[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707476925","html_url":"https://github.com/apache/hudi/pull/2082#issuecomment-707476925","issue_url":"https://api.github.com/repos/apache/hudi/issues/2082","id":707476925,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ3NjkyNQ==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T04:22:57Z","updated_at":"2020-10-13T04:22:57Z","author_association":"MEMBER","body":"> > > @leesf #2048 is landed. is it possible to merge this and address Balaji's comments? (I can help if needed)\r\n> > \r\n> > \r\n> > Sure, considering I am a little busy these days, it is wonderful if you @satishkotha would take over the PR and land it. Thanks\r\n> \r\n> @leesf @satishkotha what is your process? i am intrested to take this and land it. Thanks\r\n\r\n@lw309637554 I've already started working on this. Perhaps, you could help with one of the followup tasks of #2048? These are tracked as subtasks here https://issues.apache.org/jira/browse/HUDI-868? Subtasks 2,4 are easy to get started. But, feel free to pick others too?\r\n\r\n@vinothchandar Maybe we can close this PR to avoid confusion? I'll open new PR when i'm ready and run some basic tests.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707476925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707502829","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-707502829","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":707502829,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzUwMjgyOQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T05:43:29Z","updated_at":"2020-10-13T05:43:29Z","author_association":"CONTRIBUTOR","body":"1. I am not able to pinpoint the issue rightaway but let me engage in debugging this with you. Couple of things : \r\n\r\n1. Can you make ds field and any additional fields you are adding nullable\r\n{\r\n\"name\": \"ds\",\r\n\"type\": [\"null\", \"string\"],\r\n\"default\": null\r\n}\r\n\r\n2. In transformer implementation, after you constructed the dataset \"fi\", can you call printSchema() and add the output here.\r\n\r\nIf possible, It would make things very easy, if you can construct some form of test that I can use it to repro the issue and debug here. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707502829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707514223","html_url":"https://github.com/apache/hudi/pull/2082#issuecomment-707514223","issue_url":"https://api.github.com/repos/apache/hudi/issues/2082","id":707514223,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzUxNDIyMw==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T06:14:09Z","updated_at":"2020-10-13T06:14:09Z","author_association":"CONTRIBUTOR","body":"> > > > @leesf #2048 is landed. is it possible to merge this and address Balaji's comments? (I can help if needed)\r\n> > > \r\n> > > \r\n> > > Sure, considering I am a little busy these days, it is wonderful if you @satishkotha would take over the PR and land it. Thanks\r\n> > \r\n> > \r\n> > @leesf @satishkotha what is your process? i am intrested to take this and land it. Thanks\r\n> \r\n> @lw309637554 I've already started working on this. Perhaps, you could help with one of the followup tasks of #2048? These are tracked as subtasks here https://issues.apache.org/jira/browse/HUDI-868? Subtasks 2,4 are easy to get started. But, feel free to pick others too?\r\n> \r\n> @vinothchandar Maybe we can close this PR to avoid confusion? I'll open new PR when i'm ready and run some basic tests.\r\n\r\n@satishkotha ok, i can take some sub task in https://issues.apache.org/jira/browse/HUDI-868  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707514223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707519900","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-707519900","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":707519900,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzUxOTkwMA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T06:27:43Z","updated_at":"2020-10-13T06:27:43Z","author_association":"CONTRIBUTOR","body":"1. I have now changed all fields to  “ type”：[“ null”，“ string”]，“ default”：null\r\n2.\r\nprintSchema（）\r\n root\r\n |-- dataId: string (nullable = true)\r\n |-- collectTime: string (nullable = true)\r\n |-- clickTime: string (nullable = true)\r\n |-- spreadUrl: string (nullable = true)\r\n |-- spreadName: string (nullable = true)\r\n |-- ua: string (nullable = true)\r\n |-- uid: string (nullable = true)\r\n |-- adnetName: string (nullable = true)\r\n |-- adnetDesc: string (nullable = true)\r\n |-- ds: string (nullable = true\r\n\r\n@bvaradar ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707519900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707525990","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-707525990","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":707525990,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzUyNTk5MA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T06:40:04Z","updated_at":"2020-10-13T06:40:04Z","author_association":"CONTRIBUTOR","body":" This is the data I printed in the transform\r\n1. This is before adding the ds field\r\n\r\n![1602571032(1)](https://user-images.githubusercontent.com/25769285/95824451-e763d380-0d61-11eb-9082-78e15e9ffa97.jpg)\r\n\r\n\r\n2. This is after adding the ds field\r\n\r\n![1602571077(1)](https://user-images.githubusercontent.com/25769285/95824495-f8ace000-0d61-11eb-855f-71f6b92deb90.jpg)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707525990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707549668","html_url":"https://github.com/apache/hudi/pull/2161#issuecomment-707549668","issue_url":"https://api.github.com/repos/apache/hudi/issues/2161","id":707549668,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU0OTY2OA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T07:29:11Z","updated_at":"2020-10-13T07:29:11Z","author_association":"CONTRIBUTOR","body":"> I am okay with the PR as-is. IIUC this change does not really add any flink related changes. It might be good to have PRs, such that add some functionality in each PR.\r\n> \r\n> Also +1 on deferring further refactoring/reorganization until we can implement a first cut of flink support.\r\n\r\nYes, this PR actually aims to introduce `hudi-flink-client`module, which is the basis of the incoming functionality PRs. \r\nAgree with you that each PR should contain some functionality, will push it as your suggest \r\nthanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707549668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707550258","html_url":"https://github.com/apache/hudi/pull/2136#issuecomment-707550258","issue_url":"https://api.github.com/repos/apache/hudi/issues/2136","id":707550258,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU1MDI1OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T07:30:31Z","updated_at":"2020-10-13T07:30:31Z","author_association":"MEMBER","body":"@lw309637554 is this ready for re-review? please lmk ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707550258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707550877","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-707550877","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":707550877,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU1MDg3Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T07:31:52Z","updated_at":"2020-10-13T07:31:52Z","author_association":"MEMBER","body":"@pratyakshsharma are you able to complete this today? if not, i can take over and help . lmk :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707550877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707551778","html_url":"https://github.com/apache/hudi/pull/2161#issuecomment-707551778","issue_url":"https://api.github.com/repos/apache/hudi/issues/2161","id":707551778,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU1MTc3OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T07:33:39Z","updated_at":"2020-10-13T07:33:39Z","author_association":"MEMBER","body":"sg!  @wangxianghu \r\n\r\nI ll let @leesf or @yanghua do the merging once they are ready ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707551778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707554760","html_url":"https://github.com/apache/hudi/pull/2173#issuecomment-707554760","issue_url":"https://api.github.com/repos/apache/hudi/issues/2173","id":707554760,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU1NDc2MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T07:40:05Z","updated_at":"2020-10-13T07:40:05Z","author_association":"MEMBER","body":"@garyli1019 has a PR around this. right? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707554760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707624922","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-707624922","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":707624922,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzYyNDkyMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T09:44:16Z","updated_at":"2020-10-13T09:44:16Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : It took a while to debug this. Basically, the problem is in how spark deduces avro schema from ROw (code in spark-avro). This is incompatible with the schema passed through schema registry. Here is a gist which avoids the problem with a workaround: \r\n\r\nhttps://gist.github.com/bvaradar/f2dbb50f7c7a82178c04d41603269306\r\n\r\nPlease try this and see if you are able to ingest successfully...","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707624922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707660374","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-707660374","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":707660374,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzY2MDM3NA==","user":{"login":"LeoHsu0802","id":38006639,"node_id":"MDQ6VXNlcjM4MDA2NjM5","avatar_url":"https://avatars.githubusercontent.com/u/38006639?v=4","gravatar_id":"","url":"https://api.github.com/users/LeoHsu0802","html_url":"https://github.com/LeoHsu0802","followers_url":"https://api.github.com/users/LeoHsu0802/followers","following_url":"https://api.github.com/users/LeoHsu0802/following{/other_user}","gists_url":"https://api.github.com/users/LeoHsu0802/gists{/gist_id}","starred_url":"https://api.github.com/users/LeoHsu0802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeoHsu0802/subscriptions","organizations_url":"https://api.github.com/users/LeoHsu0802/orgs","repos_url":"https://api.github.com/users/LeoHsu0802/repos","events_url":"https://api.github.com/users/LeoHsu0802/events{/privacy}","received_events_url":"https://api.github.com/users/LeoHsu0802/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T10:53:32Z","updated_at":"2020-10-13T10:53:32Z","author_association":"NONE","body":"> I found the way to do this, For anyone's reference this can be achieved by\r\n> \r\n> 1. Use org.apache.hudi.ComplexKeyGenerator as key generator class instead of SimpleKeyGenerator.\r\n> 2. Provide the fields that you want to partition based on as comma separated string as PARITION_FIELD_OPT_KEY\r\n> \r\n> Reference :\r\n> https://github.com/apache/incubator-hudi/blob/master/hudi-spark/src/main/java/org/apache/hudi/ComplexKeyGenerator.java#L42\r\n\r\nHi @afeldman1 , I have a question about point 2, I try to partition by year/month/day in pyspark but didn't work and below is what I setting.\r\n\r\nhudi_options = {\r\n  'hoodie.table.name': tableName,\r\n  'hoodie.datasource.write.recordkey.field': 'id',\r\n  'hoodie.datasource.write.partitionpath.field': {\"year\",\"month\",\"day\"},\r\n  'hoodie.datasource.write.table.name': tableName,\r\n  'hoodie.datasource.write.operation': 'insert',\r\n  'hoodie.datasource.write.precombine.field': 'country',\r\n  'hoodie.upsert.shuffle.parallelism': 2, \r\n  'hoodie.insert.shuffle.parallelism': 2\r\n}\r\n\r\nMay I ask why?\r\nThanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707660374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707746861","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-707746861","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":707746861,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzc0Njg2MQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T13:41:37Z","updated_at":"2020-10-13T13:41:37Z","author_association":"NONE","body":"@bvaradar getting following error in patch : \r\n\r\n```\r\nerror: corrupt patch at line 252\r\n```\r\n\r\nDoing git patch for the first time .Might be Im doing something silly\r\n\r\n```\r\ngit apply file.patch\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707746861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707749644","html_url":"https://github.com/apache/hudi/issues/2165#issuecomment-707749644","issue_url":"https://api.github.com/repos/apache/hudi/issues/2165","id":707749644,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzc0OTY0NA==","user":{"login":"tandonraghav","id":10815442,"node_id":"MDQ6VXNlcjEwODE1NDQy","avatar_url":"https://avatars.githubusercontent.com/u/10815442?v=4","gravatar_id":"","url":"https://api.github.com/users/tandonraghav","html_url":"https://github.com/tandonraghav","followers_url":"https://api.github.com/users/tandonraghav/followers","following_url":"https://api.github.com/users/tandonraghav/following{/other_user}","gists_url":"https://api.github.com/users/tandonraghav/gists{/gist_id}","starred_url":"https://api.github.com/users/tandonraghav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tandonraghav/subscriptions","organizations_url":"https://api.github.com/users/tandonraghav/orgs","repos_url":"https://api.github.com/users/tandonraghav/repos","events_url":"https://api.github.com/users/tandonraghav/events{/privacy}","received_events_url":"https://api.github.com/users/tandonraghav/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T13:45:42Z","updated_at":"2020-10-13T13:45:42Z","author_association":"NONE","body":"@bvaradar Thanks for the help. I am able to resolve it by putting the shaded jar.\r\nI feel it should be documented well. \r\n\r\nhttps://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-hudi-considerations.html & https://hudi.apache.org/docs/querying_data.html","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707749644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707806594","html_url":"https://github.com/apache/hudi/pull/2173#issuecomment-707806594","issue_url":"https://api.github.com/repos/apache/hudi/issues/2173","id":707806594,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzgwNjU5NA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T15:08:48Z","updated_at":"2020-10-13T15:08:48Z","author_association":"MEMBER","body":"> @garyli1019 has a PR around this. right? \n\nYea, not finished yet. Will try to catch 0.7.0 for that.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707806594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707837890","html_url":"https://github.com/apache/hudi/pull/2136#issuecomment-707837890","issue_url":"https://api.github.com/repos/apache/hudi/issues/2136","id":707837890,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzgzNzg5MA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T15:53:46Z","updated_at":"2020-10-13T15:54:18Z","author_association":"CONTRIBUTOR","body":"> @lw309637554 is this ready for re-review? please lmk\r\n\r\n@vinothchandar  yeah, i think it is ready.  Completeness of compatibility checks in AbstractHoodieClient.createMetaClient()  need your suggestion. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707837890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707895050","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-707895050","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":707895050,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzg5NTA1MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T17:26:23Z","updated_at":"2020-10-13T17:26:23Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : I found a simpler way to workaround this and updated the gist: https://gist.github.com/bvaradar/f2dbb50f7c7a82178c04d41603269306\r\n\r\nCan you refresh the above link.\r\n\r\nYou should download to local file and apply\r\n\r\npatch -p1 < <file_path> ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707895050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707951766","html_url":"https://github.com/apache/hudi/pull/2157#issuecomment-707951766","issue_url":"https://api.github.com/repos/apache/hudi/issues/2157","id":707951766,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzk1MTc2Ng==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T19:12:39Z","updated_at":"2020-10-13T19:12:39Z","author_association":"CONTRIBUTOR","body":"looks good to me as well! ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707951766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707990175","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-707990175","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":707990175,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzk5MDE3NQ==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T20:28:11Z","updated_at":"2020-10-13T20:28:11Z","author_association":"CONTRIBUTOR","body":"Have left few minor comments. @lw309637554 \r\n\r\nRest looks good. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/707990175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708003843","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-708003843","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":708003843,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODAwMzg0Mw==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T20:55:23Z","updated_at":"2020-10-13T20:55:23Z","author_association":"NONE","body":"@bvaradar Thanks !!!  .. It seems to ingest properly. I will test all scenarios like delete etc and let you know . Thanks for such amazing support .!!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708003843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708036522","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-708036522","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":708036522,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODAzNjUyMg==","user":{"login":"afeldman1","id":4326577,"node_id":"MDQ6VXNlcjQzMjY1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/4326577?v=4","gravatar_id":"","url":"https://api.github.com/users/afeldman1","html_url":"https://github.com/afeldman1","followers_url":"https://api.github.com/users/afeldman1/followers","following_url":"https://api.github.com/users/afeldman1/following{/other_user}","gists_url":"https://api.github.com/users/afeldman1/gists{/gist_id}","starred_url":"https://api.github.com/users/afeldman1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afeldman1/subscriptions","organizations_url":"https://api.github.com/users/afeldman1/orgs","repos_url":"https://api.github.com/users/afeldman1/repos","events_url":"https://api.github.com/users/afeldman1/events{/privacy}","received_events_url":"https://api.github.com/users/afeldman1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T22:09:36Z","updated_at":"2020-10-13T22:09:36Z","author_association":"NONE","body":"Hi @LeoHsu0802, hoodie.datasource.write.partitionpath.field needs to be a comma separated string. So for your key I believe it would be `'hoodie.datasource.write.partitionpath.field': 'year,month,day'`\r\nAdditionally, are you using hive as your metastore?\r\n\r\nWith hudi version 0.6.0 a new CustomKeyGenerator was added, so I would encourage looking into this new generator. I'm trying to switch to it myself now, although getting some errors that I'm trying to identify if they are with my code or as a result of changes aws made to the hudi jar that is packaged in emr now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708036522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708093601","html_url":"https://github.com/apache/hudi/pull/1946#issuecomment-708093601","issue_url":"https://api.github.com/repos/apache/hudi/issues/1946","id":708093601,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA5MzYwMQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T01:10:02Z","updated_at":"2020-10-14T01:10:02Z","author_association":"CONTRIBUTOR","body":"> @vinothchandar : yes, +1 for move to log4j2. I will do it if necessary.\r\n\r\n+1 on moving to log4j2. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708093601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708099080","html_url":"https://github.com/apache/hudi/pull/2161#issuecomment-708099080","issue_url":"https://api.github.com/repos/apache/hudi/issues/2161","id":708099080,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA5OTA4MA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T01:30:43Z","updated_at":"2020-10-14T01:30:43Z","author_association":"CONTRIBUTOR","body":"> sg! @wangxianghu\r\n> \r\n> I ll let @leesf or @yanghua do the merging once they are ready\r\n\r\nMerging this PR. cc @vinothchandar ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708099080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708128371","html_url":"https://github.com/apache/hudi/pull/2147#issuecomment-708128371","issue_url":"https://api.github.com/repos/apache/hudi/issues/2147","id":708128371,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODEyODM3MQ==","user":{"login":"rmpifer","id":22085381,"node_id":"MDQ6VXNlcjIyMDg1Mzgx","avatar_url":"https://avatars.githubusercontent.com/u/22085381?v=4","gravatar_id":"","url":"https://api.github.com/users/rmpifer","html_url":"https://github.com/rmpifer","followers_url":"https://api.github.com/users/rmpifer/followers","following_url":"https://api.github.com/users/rmpifer/following{/other_user}","gists_url":"https://api.github.com/users/rmpifer/gists{/gist_id}","starred_url":"https://api.github.com/users/rmpifer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmpifer/subscriptions","organizations_url":"https://api.github.com/users/rmpifer/orgs","repos_url":"https://api.github.com/users/rmpifer/repos","events_url":"https://api.github.com/users/rmpifer/events{/privacy}","received_events_url":"https://api.github.com/users/rmpifer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T03:11:50Z","updated_at":"2020-10-14T03:11:50Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Sorry I've been caught up in some other obligations. We would have to explicitly add the dependencies we want to shade from hbase. If the biggest concern is around guava conflicts I think we may just want to include this for now. \r\n\r\n@umehrot2 I'm ok with updating this in `hudi-hadoop-mr-bundle` and `hudi-presto-bundle` as well as long as there are no other concerns there","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708128371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708162635","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-708162635","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":708162635,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODE2MjYzNQ==","user":{"login":"LeoHsu0802","id":38006639,"node_id":"MDQ6VXNlcjM4MDA2NjM5","avatar_url":"https://avatars.githubusercontent.com/u/38006639?v=4","gravatar_id":"","url":"https://api.github.com/users/LeoHsu0802","html_url":"https://github.com/LeoHsu0802","followers_url":"https://api.github.com/users/LeoHsu0802/followers","following_url":"https://api.github.com/users/LeoHsu0802/following{/other_user}","gists_url":"https://api.github.com/users/LeoHsu0802/gists{/gist_id}","starred_url":"https://api.github.com/users/LeoHsu0802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeoHsu0802/subscriptions","organizations_url":"https://api.github.com/users/LeoHsu0802/orgs","repos_url":"https://api.github.com/users/LeoHsu0802/repos","events_url":"https://api.github.com/users/LeoHsu0802/events{/privacy}","received_events_url":"https://api.github.com/users/LeoHsu0802/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T05:18:49Z","updated_at":"2020-10-14T05:23:13Z","author_association":"NONE","body":"> Hi @LeoHsu0802, hoodie.datasource.write.partitionpath.field needs to be a comma separated string. So for your key I believe it would be `'hoodie.datasource.write.partitionpath.field': 'year,month,day'`\r\n> Additionally, are you using hive as your metastore?\r\n> \r\n> With hudi version 0.6.0 a new CustomKeyGenerator was added, so I would encourage looking into this new generator. I'm trying to switch to it myself now, although getting some errors that I'm trying to identify if they are with my code or as a result of changes aws made to the hudi jar that is packaged in emr now.\r\n\r\nHi @afeldman1 ,\r\nThank you for your reply!\r\nI changed the partitionpath to this format \r\n`'hoodie.datasource.write.partitionpath.field': 'year,month,day'`\r\nbut only get  `default ` partition folder\r\n\r\nI run an EMR and write the partition parquet file to S3 so maybe need to do other config setting?\r\nThanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708162635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708205243","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-708205243","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":708205243,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODIwNTI0Mw==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T07:04:20Z","updated_at":"2020-10-14T07:04:20Z","author_association":"CONTRIBUTOR","body":"> Have left few minor comments. @lw309637554\r\n> \r\n> Rest looks good.\r\n\r\n@pratyakshsharma  thanks for you review. have resolved your suggestion.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708205243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708212239","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-708212239","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":708212239,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODIxMjIzOQ==","user":{"login":"giaosudau","id":539238,"node_id":"MDQ6VXNlcjUzOTIzOA==","avatar_url":"https://avatars.githubusercontent.com/u/539238?v=4","gravatar_id":"","url":"https://api.github.com/users/giaosudau","html_url":"https://github.com/giaosudau","followers_url":"https://api.github.com/users/giaosudau/followers","following_url":"https://api.github.com/users/giaosudau/following{/other_user}","gists_url":"https://api.github.com/users/giaosudau/gists{/gist_id}","starred_url":"https://api.github.com/users/giaosudau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giaosudau/subscriptions","organizations_url":"https://api.github.com/users/giaosudau/orgs","repos_url":"https://api.github.com/users/giaosudau/repos","events_url":"https://api.github.com/users/giaosudau/events{/privacy}","received_events_url":"https://api.github.com/users/giaosudau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T07:19:31Z","updated_at":"2020-10-14T07:19:52Z","author_association":"CONTRIBUTOR","body":"Got hive class error \r\n```20/10/14 15:18:12 INFO HiveClientImpl: Warehouse location for Hive client (version 2.3.7) is /Users/giaosudau/workspace/etl-pipelines/spark-warehouse\r\nException in thread \"main\" java.lang.NoSuchMethodError: org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(Lorg/apache/hadoop/hive/conf/HiveConf;Lorg/apache/hadoop/hive/metastore/HiveMetaHookLoader;Ljava/util/concurrent/ConcurrentHashMap;Ljava/lang/String;Z)Lorg/apache/hadoop/hive/metastore/IMetaStoreClient;\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:3600)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3652)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3632)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.getAllFunctions(Hive.java:3894)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.reloadFunctions(Hive.java:248)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.registerAllFunctionsOnce(Hive.java:231)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.<init>(Hive.java:388)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.create(Hive.java:332)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.getInternal(Hive.java:312)\r\n\tat org.apache.hadoop.hive.ql.metadata.Hive.get(Hive.java:288)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.client(HiveClientImpl.scala:260)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.$anonfun$withHiveState$1(HiveClientImpl.scala:286)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.liftedTree1$1(HiveClientImpl.scala:227)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.retryLocked(HiveClientImpl.scala:226)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.withHiveState(HiveClientImpl.scala:276)\r\n\tat org.apache.spark.sql.hive.client.HiveClientImpl.databaseExists(HiveClientImpl.scala:389)\r\n\tat org.apache.spark.sql.hive.HiveExternalCatalog.$anonfun$databaseExists$1(HiveExternalCatalog.scala:221)\r\n\tat scala.runtime.java8.JFunction0$mcZ$sp.apply(JFunction0$mcZ$sp.java:23)\r\n\tat org.apache.spark.sql.hive.HiveExternalCatalog.withClient(HiveExternalCatalog.scala:99)\r\n\tat org.apache.spark.sql.hive.HiveExternalCatalog.databaseExists(HiveExternalCatalog.scala:221)\r\n\tat org.apache.spark.sql.internal.SharedState.externalCatalog$lzycompute(SharedState.scala:137)\r\n\tat org.apache.spark.sql.internal.SharedState.externalCatalog(SharedState.scala:127)\r\n\tat org.apache.spark.sql.internal.SharedState.globalTempViewManager$lzycompute(SharedState.scala:157)\r\n\tat org.apache.spark.sql.internal.SharedState.globalTempViewManager(SharedState.scala:155)\r\n\tat org.apache.spark.sql.hive.HiveSessionStateBuilder.$anonfun$catalog$2(HiveSessionStateBuilder.scala:59)\r\n\tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.globalTempViewManager$lzycompute(SessionCatalog.scala:93)\r\n\tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.globalTempViewManager(SessionCatalog.scala:93)\r\n\tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.createDatabase(SessionCatalog.scala:206)\r\n\tat org.apache.spark.sql.execution.command.CreateDatabaseCommand.run(ddl.scala:81)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.executeCollect(commands.scala:79)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$logicalPlan$1(Dataset.scala:229)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3616)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:100)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:160)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:87)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n\tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3614)\r\n\tat org.apache.spark.sql.Dataset.<init>(Dataset.scala:229)\r\n\tat org.apache.spark.sql.Dataset$.$anonfun$ofRows$2(Dataset.scala:100)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n\tat org.apache.spark.sql.Dataset$.ofRows(Dataset.scala:97)\r\n\tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:606)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n\tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:601)\r\n\tat bb.gtd.de.CanalJsonToOds$.initSchema(CanalJsonToOds.scala:81)\r\n\tat bb.gtd.de.CanalJsonToOds$.delayedEndpoint$bb$gtd$de$CanalJsonToOds$1(CanalJsonToOds.scala:42)\r\n\tat bb.gtd.de.CanalJsonToOds$delayedInit$body.apply(CanalJsonToOds.scala:11)\r\n\tat scala.Function0.apply$mcV$sp(Function0.scala:39)\r\n\tat scala.Function0.apply$mcV$sp$(Function0.scala:39)\r\n\tat scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)\r\n\tat scala.App.$anonfun$main$1$adapted(App.scala:80)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat scala.App.main(App.scala:80)\r\n\tat scala.App.main$(App.scala:78)\r\n\tat bb.gtd.de.CanalJsonToOds$.main(CanalJsonToOds.scala:11)\r\n\tat bb.gtd.de.CanalJsonToOds.main(CanalJsonToOds.scala)\r\n20/10/14 15:18:12 INFO SparkContext: Invoking stop() from shutdown hook\r\n20/10/14 15:18:12 INFO AbstractConnector: Stopped Spark@64b31700{HTTP/1.1,[http/1.1]}{0.0.0.0:4041}\r\n20/10/14 15:18:12 INFO SparkUI: Stopped Spark web UI at http://192.168.200.57:4041\r\n20/10/14 15:18:12 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n20/10/14 15:18:12 INFO MemoryStore: MemoryStore cleared\r\n20/10/14 15:18:12 INFO BlockManager: BlockManager stopped\r\n20/10/14 15:18:12 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n20/10/14 15:18:12 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n20/10/14 15:18:12 INFO SparkContext: Successfully stopped SparkContext\r\n20/10/14 15:18:12 INFO ShutdownHookManager: Shutdown hook called\r\n20/10/14 15:18:12 INFO ShutdownHookManager: Deleting directory /private/var/folders/vv/5d3clfpj22q_c12ghwdnpfl80000gn/T/spark-a0c47cb6-1512-4f8c-8d10-38e58796fed6\r\nDisconnected from the target VM, address: '127.0.0.1:50019', transport: 'socket'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708212239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708261108","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-708261108","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":708261108,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODI2MTEwOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T08:54:39Z","updated_at":"2020-10-14T08:54:39Z","author_association":"CONTRIBUTOR","body":"I think this is due to the way spark deduces avro schema from Transformer ROw (in a way similar to https://github.com/apache/hudi/issues/2149#issuecomment-707624922)\r\n\r\nYou can try changing the SchemaProvider to do the below steps where the target schema is recreated using Spark-avro. This would make it consistent with Transformer generated DF.\r\n\r\nSchema newSchema = AvroConversionUtils.convertStructTypeToAvroSchema(\r\n+        AvroConversionUtils.convertAvroSchemaToStructType(schema), RowBasedSchemaProvider.HOODIE_RECORD_STRUCT_NAME,\r\n+        RowBasedSchemaProvider.HOODIE_RECORD_NAMESPACE);\r\n\r\n\r\nIf you are using  master branch, we have added support for plugging in SchemaPostProcessor (using config: hoodie.deltastreamer.schemaprovider.schema_post_processor=org.apache.hudi.utilities.schema.SparkAvroPostProcessor\r\n\r\nwhere you can implement the processSchema() method to do the above transformation.\r\n\r\n\r\n```\r\npackage org.apache.hudi.utilities.schema;\r\n\r\nimport org.apache.hudi.AvroConversionUtils;\r\nimport org.apache.hudi.common.config.TypedProperties;\r\n\r\nimport org.apache.avro.Schema;\r\nimport org.apache.spark.api.java.JavaSparkContext;\r\n\r\npublic class SparkAvroPostProcessor extends SchemaPostProcessor {\r\n\r\n  protected SparkAvroPostProcessor(TypedProperties props, JavaSparkContext jssc) {\r\n    super(props, jssc);\r\n  }\r\n\r\n  @Override\r\n  public Schema processSchema(Schema schema) {\r\n    return AvroConversionUtils.convertStructTypeToAvroSchema(\r\n        AvroConversionUtils.convertAvroSchemaToStructType(schema), RowBasedSchemaProvider.HOODIE_RECORD_STRUCT_NAME, \r\n        RowBasedSchemaProvider.HOODIE_RECORD_NAMESPACE);\r\n  }\r\n}```\r\n\r\n\r\nIf this works, I will open a PR (Jira: https://issues.apache.org/jira/browse/HUDI-1343)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708261108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708261688","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-708261688","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":708261688,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODI2MTY4OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T08:55:42Z","updated_at":"2020-10-14T08:55:42Z","author_association":"CONTRIBUTOR","body":"Can you list the partitions where you are seeing uncleaned files along with listing of .hoodie folder ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708261688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708263557","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-708263557","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":708263557,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODI2MzU1Nw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T08:59:05Z","updated_at":"2020-10-14T08:59:05Z","author_association":"CONTRIBUTOR","body":"@bvaradar   Okay, I will be experimenting and I would be happy to complete this PR if allowed,   thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708263557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708433619","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-708433619","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":708433619,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODQzMzYxOQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T14:17:02Z","updated_at":"2020-10-14T14:19:09Z","author_association":"NONE","body":"@bvaradar  The patch worked successfully for Insert and upserts except for Delete.\r\nI think due to the way debezium loads the delete changes into kafka this issue is coming \r\n\r\nAttaching the executor logs, KafkaCat outputs for ref : \r\n\r\n[logs.txt](https://github.com/apache/hudi/files/5378762/logs.txt)\r\n\r\n[kafkacat.json.txt](https://github.com/apache/hudi/files/5378751/kafkacat.json.txt)\r\n\r\nI had issued delete for record with inc_id = 3\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708433619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708500901","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-708500901","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":708500901,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODUwMDkwMQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T16:02:49Z","updated_at":"2020-10-14T16:02:49Z","author_association":"NONE","body":"@bvaradar   I changed postgres configuration and now the debezium delete action doesnt create null value in \"Before\" : \r\n```\r\n{\"before\": {\"Value\": {\"inc_id\": 3, \"year\": {\"int\": 2016}, \"violation_desc\": {\"string\": \"AGGRAVATED UNLIC OPER 2ND/PREV CONV\"}, \"violation_code\": {\"string\": \"5112A1\"}, \"case_individual_id\": {\"int\": 17475367}, \"flag\": {\"string\": \"U\"}, \"last_modified_ts\": 1600959600000000}}, \"after\": null, \"source\": {\"version\": \"1.2.2.Final\", \"connector\": \"postgresql\", \"name\": \"airflow\", \"ts_ms\": 1602690384912, \"snapshot\": {\"string\": \"false\"}, \"db\": \"airflow\", \"schema\": \"public\", \"table\": \"motor_crash_violation_incidents\", \"txId\": {\"long\": 13145245}, \"lsn\": {\"long\": 1138834144}, \"xmin\": null}, \"op\": \"d\", \"ts_ms\": {\"long\": 1602690385412}, \"transaction\": {\"ConnectDefault\": {\"id\": \"13145245\", \"total_order\": 1, \"data_collection_order\": 1}}}\r\n```\r\n\r\nBut still hudi puts up earlier error","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708500901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708505801","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-708505801","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":708505801,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODUwNTgwMQ==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T16:11:18Z","updated_at":"2020-10-14T16:24:12Z","author_association":"NONE","body":"Actually i need around 5min to get 100K events from Kafka and write it to HDFS (5mo parquet file)\r\n![Capture d’écran 2020-10-14 à 18 10 43](https://user-images.githubusercontent.com/5584892/96017476-574d8900-0e4a-11eb-8618-b2006ab1355c.png)\r\n\r\n\r\n\r\nOUTPUT : \r\n\r\n![Capture d’écran 2020-10-14 à 18 23 53](https://user-images.githubusercontent.com/5584892/96017581-73512a80-0e4a-11eb-9148-1841685ddef3.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708505801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708521865","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-708521865","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":708521865,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODUyMTg2NQ==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T16:39:15Z","updated_at":"2020-10-14T16:39:15Z","author_association":"NONE","body":"@bvaradar We have two types of data for which we have used hudi. Both of them are pretty much similar with some difference in the schema. I almost completed development. For one of the data type where we have less volume of data this difference was so huge. \r\n\r\nSay I have following number of objects in json lines format \r\n4326 Objects - 580.4 MB\r\n\r\nwhen transformed to hudi with snappy compression enabled it comes to\r\n4599 Objects - 7.2 GB\r\n\r\nwhich is really huge. For the other type where we have more volume of data I don't see this issue. It looks like below.\r\n\r\njson lines\r\n6895 Objects - 100.0 GB\r\n\r\nparquet snappy with hudi\r\n10597 Objects - 42.4 GB\r\n\r\nFollowing are the configs I am using right now. \r\n\r\nSmallFileSize = 104857600\r\nMaxFileSize = 125829120\r\nRecordSize = 35\r\nCompressionRatio = 5\r\nInsertSplitSize = 3500000\r\nIndexBloomNumEntries = 1500000\r\nKeyGenClass = org.apache.hudi.keygen.ComplexKeyGenerator\r\nRecordKeyFields = sourceid,sourceassetid,sourceeventid,value,timestamp\r\nTableType = COPY_ON_WRITE\r\nPartitionPathFields = date,sourceid\r\nHiveStylePartitioning = True\r\nWriteOperation = insert\r\nCompressionCodec = snappy\r\nCommitsRetained = 1\r\nCombineBeforeInsert = True\r\nPrecombineField = timestamp\r\nInsertDropDuplicates = True\r\nInsertShuffleParallelism = 100\r\n\r\n\r\nAnything I should look at to improve this right now ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708521865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708535130","html_url":"https://github.com/apache/hudi/pull/2092#issuecomment-708535130","issue_url":"https://api.github.com/repos/apache/hudi/issues/2092","id":708535130,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODUzNTEzMA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T17:03:57Z","updated_at":"2020-10-14T17:03:57Z","author_association":"CONTRIBUTOR","body":"@nsivabalan addressed comments","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708535130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708662319","html_url":"https://github.com/apache/hudi/issues/2100#issuecomment-708662319","issue_url":"https://api.github.com/repos/apache/hudi/issues/2100","id":708662319,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODY2MjMxOQ==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T21:11:08Z","updated_at":"2020-10-14T21:11:18Z","author_association":"CONTRIBUTOR","body":"@eigakow  were you able to try this with a different Hbase version and rebuilding Hudi ? \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708662319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708699053","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-708699053","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":708699053,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODY5OTA1Mw==","user":{"login":"afeldman1","id":4326577,"node_id":"MDQ6VXNlcjQzMjY1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/4326577?v=4","gravatar_id":"","url":"https://api.github.com/users/afeldman1","html_url":"https://github.com/afeldman1","followers_url":"https://api.github.com/users/afeldman1/followers","following_url":"https://api.github.com/users/afeldman1/following{/other_user}","gists_url":"https://api.github.com/users/afeldman1/gists{/gist_id}","starred_url":"https://api.github.com/users/afeldman1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afeldman1/subscriptions","organizations_url":"https://api.github.com/users/afeldman1/orgs","repos_url":"https://api.github.com/users/afeldman1/repos","events_url":"https://api.github.com/users/afeldman1/events{/privacy}","received_events_url":"https://api.github.com/users/afeldman1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T22:43:03Z","updated_at":"2020-10-14T22:43:03Z","author_association":"NONE","body":"Hey @LeoHsu0802,\r\nI believe you are missing specifying the key generator class. I'm presuming you have actual columns named year, month, and day, unless you have an actual timestamp column. But you need to specify the class in your hudi_options as well using:\r\nDataSourceWriteOptions.KEYGENERATOR_CLASS_OPT_KEY: classOf[ComplexKeyGenerator].getName\r\n\r\n(If DataSourceWriteOptions.KEYGENERATOR_CLASS_OPT_KEY is not recognized in python, it's the same thing as \"hoodie.datasource.write.keygenerator.class\")\r\n\r\nThis is where the CustomKeyGenerator, that I mentioned previously, comes in. I believe CustomKeyGenerator is the new preferred key class as of hudi version 0.6.0, however I'm still using ComplexKeyGenerator as I haven't been able to get CustomKeyGenerator to work.\r\n\r\nDetails on the key class can be found here: https://hudi.apache.org/docs/writing_data.html#key-generation\r\n\r\nAlso, are you using the Glue metastore with EMR and S3?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708699053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708859468","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-708859468","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":708859468,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODg1OTQ2OA==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T02:43:59Z","updated_at":"2020-10-15T02:45:32Z","author_association":"NONE","body":"@bvaradar sorry, I'm not sure if I'm getting your question correctly.\r\nPartitions:\r\n<img width=\"1300\" alt=\"Screen Shot 2020-10-15 at 13 39 53\" src=\"https://user-images.githubusercontent.com/1992396/96070539-26be2b80-0eec-11eb-9d16-2a5bb36f86fb.png\">\r\nFirst partition:\r\n<img width=\"1304\" alt=\"Screen Shot 2020-10-15 at 13 40 00\" src=\"https://user-images.githubusercontent.com/1992396/96070563-30e02a00-0eec-11eb-9be5-770906af2fc7.png\">\r\nSecond partition:\r\n<img width=\"1310\" alt=\"Screen Shot 2020-10-15 at 13 40 08\" src=\"https://user-images.githubusercontent.com/1992396/96070603-42293680-0eec-11eb-9043-442df642040b.png\">\r\nThird partition:\r\n<img width=\"1302\" alt=\"Screen Shot 2020-10-15 at 13 40 16\" src=\"https://user-images.githubusercontent.com/1992396/96070619-49e8db00-0eec-11eb-93c7-096abb8bf796.png\">\r\n\r\nIn reality, we never write into all at the same time. The new partition is created when the new version of the job is deployed.\r\nMy main question is why the second partition has 4 files. You can see that they are 30 minutes older than files in the third partition.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708859468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708910383","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-708910383","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":708910383,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODkxMDM4Mw==","user":{"login":"LeoHsu0802","id":38006639,"node_id":"MDQ6VXNlcjM4MDA2NjM5","avatar_url":"https://avatars.githubusercontent.com/u/38006639?v=4","gravatar_id":"","url":"https://api.github.com/users/LeoHsu0802","html_url":"https://github.com/LeoHsu0802","followers_url":"https://api.github.com/users/LeoHsu0802/followers","following_url":"https://api.github.com/users/LeoHsu0802/following{/other_user}","gists_url":"https://api.github.com/users/LeoHsu0802/gists{/gist_id}","starred_url":"https://api.github.com/users/LeoHsu0802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeoHsu0802/subscriptions","organizations_url":"https://api.github.com/users/LeoHsu0802/orgs","repos_url":"https://api.github.com/users/LeoHsu0802/repos","events_url":"https://api.github.com/users/LeoHsu0802/events{/privacy}","received_events_url":"https://api.github.com/users/LeoHsu0802/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T05:40:01Z","updated_at":"2020-10-15T06:44:20Z","author_association":"NONE","body":"Hi @afeldman1 ,\r\nI successfully add multiple partition with ComplexKeyGenerator but still cant not do with CustomKeyGenerator.\r\n\r\nTry to use glue metastore but not success, the partition folders are different to write by spark so when I run crawler then get multiple tables not like usual only one table\r\n\r\nI also found some problems in ComplexKey with different version EMR\r\nemr-5.31.0 =>`org.apache.hudi.keygen.ComplexKeyGenerator`  multiple partition working fine\r\nemr-6.0.0 =>`org.apache.hudi.keygen.ComplexKeyGenerator` is not avalible and you should change to `org.apache.hudi.ComplexKeyGenerator`  but even so you will only get one partition\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708910383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708984716","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-708984716","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":708984716,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODk4NDcxNg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T08:19:30Z","updated_at":"2020-10-16T07:28:27Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2111?src=pr&el=h1) Report\n> Merging [#2111](https://codecov.io/gh/apache/hudi/pull/2111?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/1f7add92916c37b05be270d9c75a9042134ec506?el=desc) will **increase** coverage by `1.14%`.\n> The diff coverage is `100.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2111/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2111?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2111      +/-   ##\n============================================\n+ Coverage     52.47%   53.62%   +1.14%     \n- Complexity     2748     2848     +100     \n============================================\n  Files           352      359       +7     \n  Lines         16129    16553     +424     \n  Branches       1752     1780      +28     \n============================================\n+ Hits           8464     8876     +412     \n+ Misses         6937     6918      -19     \n- Partials        728      759      +31     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.73% <100.00%> (-0.01%)` | `1795.00 <1.00> (+2.00)` | :arrow_down: |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.42% <ø> (-1.76%)` | `304.00 <ø> (-7.00)` | |\n| #huditimelineservice | `62.29% <ø> (?)` | `50.00 <ø> (?)` | |\n| #hudiutilities | `70.07% <ø> (+10.51%)` | `325.00 <ø> (+55.00)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2111?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...g/apache/hudi/common/model/WriteOperationType.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL1dyaXRlT3BlcmF0aW9uVHlwZS5qYXZh) | `53.84% <100.00%> (ø)` | `2.00 <1.00> (ø)` | |\n| [...n/java/org/apache/hudi/internal/DefaultSource.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9pbnRlcm5hbC9EZWZhdWx0U291cmNlLmphdmE=) | `0.00% <0.00%> (-80.00%)` | `0.00% <0.00%> (-6.00%)` | |\n| [...pache/hudi/internal/HoodieWriterCommitMessage.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9pbnRlcm5hbC9Ib29kaWVXcml0ZXJDb21taXRNZXNzYWdlLmphdmE=) | `83.33% <0.00%> (-16.67%)` | `2.00% <0.00%> (-1.00%)` | |\n| [.../hudi/internal/HoodieDataSourceInternalWriter.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9pbnRlcm5hbC9Ib29kaWVEYXRhU291cmNlSW50ZXJuYWxXcml0ZXIuamF2YQ==) | `78.12% <0.00%> (-9.38%)` | `6.00% <0.00%> (-2.00%)` | |\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3BhcmtTcWxXcml0ZXIuc2NhbGE=) | `50.95% <0.00%> (-5.26%)` | `0.00% <0.00%> (ø%)` | |\n| [.../main/java/org/apache/hudi/common/util/Option.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvT3B0aW9uLmphdmE=) | `66.66% <0.00%> (-3.61%)` | `23.00% <0.00%> (+1.00%)` | :arrow_down: |\n| [...in/scala/org/apache/hudi/IncrementalRelation.scala](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSW5jcmVtZW50YWxSZWxhdGlvbi5zY2FsYQ==) | `76.19% <0.00%> (-2.30%)` | `20.00% <0.00%> (+1.00%)` | :arrow_down: |\n| [...udi/utilities/sources/helpers/DFSPathSelector.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9ERlNQYXRoU2VsZWN0b3IuamF2YQ==) | `82.05% <0.00%> (-2.16%)` | `12.00% <0.00%> (ø%)` | |\n| [...mmon/table/log/AbstractHoodieLogRecordScanner.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9BYnN0cmFjdEhvb2RpZUxvZ1JlY29yZFNjYW5uZXIuamF2YQ==) | `79.68% <0.00%> (-1.92%)` | `29.00% <0.00%> (ø%)` | |\n| [...src/main/java/org/apache/hudi/DataSourceUtils.java](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9EYXRhU291cmNlVXRpbHMuamF2YQ==) | `44.76% <0.00%> (-0.60%)` | `22.00% <0.00%> (+1.00%)` | :arrow_down: |\n| ... and [27 more](https://codecov.io/gh/apache/hudi/pull/2111/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708984716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708985867","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-708985867","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":708985867,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODk4NTg2Nw==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T08:21:49Z","updated_at":"2020-10-15T08:21:49Z","author_association":"MEMBER","body":"> @SteNicholas Thanks for your contribution, left some comments.\r\n\r\nThanks for your comments. I have already followed up with your comments. Please feel free to review again.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708985867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708992777","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-708992777","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":708992777,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODk5Mjc3Nw==","user":{"login":"naka13","id":4703406,"node_id":"MDQ6VXNlcjQ3MDM0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4703406?v=4","gravatar_id":"","url":"https://api.github.com/users/naka13","html_url":"https://github.com/naka13","followers_url":"https://api.github.com/users/naka13/followers","following_url":"https://api.github.com/users/naka13/following{/other_user}","gists_url":"https://api.github.com/users/naka13/gists{/gist_id}","starred_url":"https://api.github.com/users/naka13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naka13/subscriptions","organizations_url":"https://api.github.com/users/naka13/orgs","repos_url":"https://api.github.com/users/naka13/repos","events_url":"https://api.github.com/users/naka13/events{/privacy}","received_events_url":"https://api.github.com/users/naka13/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T08:34:30Z","updated_at":"2020-10-15T08:34:30Z","author_association":"NONE","body":"Do you think you could do the _\"specific operation, such as filtering data, converting date\"_ using SMTs in kafka connect? Then you could directly use multi table deltastreamer ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708992777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708998405","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-708998405","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":708998405,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODk5ODQwNQ==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T08:45:08Z","updated_at":"2020-10-15T08:45:08Z","author_association":"NONE","body":"Actually Deltasteamer can't handle key in avro desirialiser that's why i wasnt able to test it. \r\nIts hardcoded (String Deserializer) for KEY and Avro for value.\r\n\r\nIn my case both are serialized in avro\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/708998405/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709208973","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709208973","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709208973,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTIwODk3Mw==","user":{"login":"naka13","id":4703406,"node_id":"MDQ6VXNlcjQ3MDM0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4703406?v=4","gravatar_id":"","url":"https://api.github.com/users/naka13","html_url":"https://github.com/naka13","followers_url":"https://api.github.com/users/naka13/followers","following_url":"https://api.github.com/users/naka13/following{/other_user}","gists_url":"https://api.github.com/users/naka13/gists{/gist_id}","starred_url":"https://api.github.com/users/naka13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naka13/subscriptions","organizations_url":"https://api.github.com/users/naka13/orgs","repos_url":"https://api.github.com/users/naka13/repos","events_url":"https://api.github.com/users/naka13/events{/privacy}","received_events_url":"https://api.github.com/users/naka13/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T11:15:17Z","updated_at":"2020-10-15T11:32:04Z","author_association":"NONE","body":"One obvious bottleneck is the sequential processing. Since you are already creating multiple streams, you can increase concurrency using `spark.streaming.concurrentJobs`. You can set it as `sparkConf.set(\"spark.streaming.concurrentJobs\", \"4\");` [Check this](https://stackoverflow.com/questions/34430636/spark-processing-multiple-kafka-topic-in-parallel)\r\nOn a side note, how are you handling deletes? Or you don't have deletes in your DB? Also, are you using a custom de-serializer for avro?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709208973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709238060","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709238060","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709238060,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTIzODA2MA==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T11:53:31Z","updated_at":"2020-10-15T11:54:11Z","author_association":"NONE","body":"@naka13  I'm already using spark.streaming.concurrentJobs with 5. \r\nFor delete i handle this by adding _hoodie_is_deleted when the field op = d (for delete) in debezium : \r\n\r\n```\r\n  .withColumn(\"_hoodie_is_deleted\",when(col(\"op\") === 'd' , true).otherwise(false))\r\n```\r\n\r\nAnd for avro i'm using a schema registry yo deserialise data in flight","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709238060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709293656","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709293656","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709293656,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTI5MzY1Ng==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T12:42:06Z","updated_at":"2020-10-15T12:42:06Z","author_association":"NONE","body":"I seems that the pulling from kafka is veryyyy slow ... \r\n\r\n```\r\n20/10/15 12:33:48 INFO memory.MemoryStore: Block broadcast_17 stored as values in memory (estimated size 29.4 KB, free 3.0 GB)\r\n20/10/15 12:33:49 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 16750 for partition xxx\r\n20/10/15 12:33:53 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 17250 for partition xxx\r\n20/10/15 12:33:57 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 17750 for partition xxx\r\n20/10/15 12:34:01 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 18250 for partition xxx\r\n20/10/15 12:34:06 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 18750 for partition xxx\r\n20/10/15 12:34:10 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor-1, groupId=spark-kafka-source-6d40b7a1-e6f9-4f86-95c3-3f875be5984f-1049685671-executor] Seeking to offset 19250 for partition xxx\r\n```\r\n\r\nOnly 500 messages per 5/10s :s","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709293656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709424684","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-709424684","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":709424684,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQyNDY4NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:00:21Z","updated_at":"2020-10-15T16:00:21Z","author_association":"CONTRIBUTOR","body":"This is clearly the error : \"Caused by: java.lang.NullPointerException: Null value appeared in non-nullable field:\"\r\nLooking at the code, its not very clear how this can happen. Just to be paranoid, when you tested second time, did you make sure the kafka topic did not have old record with null value ?  \r\n\r\nWould be helpful if you the dataset in avro format and I can try reproducing it","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709424684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709436915","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-709436915","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":709436915,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQzNjkxNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:19:46Z","updated_at":"2020-10-15T16:19:46Z","author_association":"CONTRIBUTOR","body":"THis looks fine to me. Just wondering instead of default implementation of ComplexKeyGenerator which concatenates all the fields, can you try implementing a key-generator which generates md5/sha checkums to study the behavior. Assuming the original length of the record key is large and there is pattern to exploit compression, the checksum approach could perform better.  Also, see if you can try gzip as opposed to snappy.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709436915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709442307","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709442307","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709442307,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ0MjMwNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:28:48Z","updated_at":"2020-10-15T16:28:48Z","author_association":"CONTRIBUTOR","body":"@halkar : THanks for the information. Yes, this is not expected. We would have to see whether cleaning operations is succeeding.  We have a cli \"cleans show\" that lists the cleans that have successfully happened and \"clean showpartitions\". Can you run the above commands.\r\n\r\nCan you list \".hoodie\" folder in the same way you listed the partitions.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709442307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709442394","html_url":"https://github.com/apache/hudi/pull/2181#issuecomment-709442394","issue_url":"https://api.github.com/repos/apache/hudi/issues/2181","id":709442394,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ0MjM5NA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:28:57Z","updated_at":"2020-10-15T16:28:57Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @yanghua @leesf please take a look when free","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709442394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709445492","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709445492","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709445492,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ0NTQ5Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:34:18Z","updated_at":"2020-10-15T16:34:18Z","author_association":"CONTRIBUTOR","body":"Yeah, I think this is a bottleneck. Is this a setup issue (are they located across dcs) ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709445492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709446368","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-709446368","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":709446368,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ0NjM2OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:35:49Z","updated_at":"2020-10-15T16:35:49Z","author_association":"CONTRIBUTOR","body":"@nsivabalan : Can you take a look at this ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709446368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709457283","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-709457283","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":709457283,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ1NzI4Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T16:54:42Z","updated_at":"2020-10-15T16:54:42Z","author_association":"CONTRIBUTOR","body":"@garyli1019 @umehrot2 : Can you help with this ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709457283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709480582","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-709480582","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":709480582,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ4MDU4Mg==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T17:34:56Z","updated_at":"2020-10-15T17:34:56Z","author_association":"CONTRIBUTOR","body":"This is strange. The exception appears to be happening at https://github.com/apache/hudi/blob/master/hudi-spark/src/main/scala/org/apache/hudi/MergeOnReadSnapshotRelation.scala#L138 while doing `fileStatuses.toArray`.\r\n\r\nNow it is an `java.lang.ArrayStoreException` which indicates that it is possibly trying to store a wrong type of object `org.apache.spark.sql.execution.datasources.SerializableFileStatus` in an array of `FileStatus`. This would mean that Spark itself is returning `Seq[SerializableFileStatus]` instead of `Seq[FileStatus]` which is not possible on open source spark.\r\n\r\nIn open source spark they always convert `SerializableFileStatus` to `FileStatus` before returning and thats the contract: https://github.com/apache/spark/blob/v2.4.5/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/InMemoryFileIndex.scala#L246 . `SerializableFileStatus` is private to that class. So my guess is that databricks Spark implementation differs here and its possibly returning `Seq[SerializableFileStatus]` and thats why this is happening. Not sure whether this is something we want to consider fixing and how. @bvaradar @garyli1019 @vinothchandar \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709480582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709557478","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-709557478","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":709557478,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTU1NzQ3OA==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T19:57:04Z","updated_at":"2020-10-15T19:58:40Z","author_association":"NONE","body":"@bvaradar  I thought that at first. To confirm the same I retried the scenario multiple times. Im getting the same error everytime. Only during Deletes \r\n\r\n[airflow.public.motor_crash_violation_incidents+0+0000000000 (1).avro.zip](https://github.com/apache/hudi/files/5387442/airflow.public.motor_crash_violation_incidents%2B0%2B0000000000.1.avro.zip)\r\n\r\n\r\nFollowing is the table when I read the above avro : \r\n\r\n```\r\n+--------------------+--------------------+--------------------+---+-------------+----------------+\r\n|              before|               after|              source| op|        ts_ms|     transaction|\r\n+--------------------+--------------------+--------------------+---+-------------+----------------+\r\n|                null|[1, 2016, DRIVING...|[1.2.2.Final, pos...|  c|1602791105042|[13519353, 1, 1]|\r\n|                null|[3, 2016, AGGRAVA...|[1.2.2.Final, pos...|  c|1602791105042|[13519354, 1, 1]|\r\n|                null|[4, 2019, AGGRAVA...|[1.2.2.Final, pos...|  c|1602791105043|[13519355, 1, 1]|\r\n|                null|[2, 2020, UNREASO...|[1.2.2.Final, pos...|  c|1602791105043|[13519356, 1, 1]|\r\n|                null|[9, 2020, UNREASO...|[1.2.2.Final, pos...|  c|1602791105043|[13519357, 1, 1]|\r\n|                null|[10, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105043|[13519358, 1, 1]|\r\n|                null|[11, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105044|[13519359, 1, 1]|\r\n|                null|[12, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105044|[13519360, 1, 1]|\r\n|                null|[13, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105044|[13519361, 1, 1]|\r\n|                null|[34, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105044|[13519362, 1, 1]|\r\n|                null|[35, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105045|[13519363, 1, 1]|\r\n|                null|[36, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105045|[13519364, 1, 1]|\r\n|                null|[37, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105045|[13519365, 1, 1]|\r\n|                null|[38, 2020, UNREAS...|[1.2.2.Final, pos...|  c|1602791105045|[13519366, 1, 1]|\r\n|[3, 2016, AGGRAVA...|                null|[1.2.2.Final, pos...|  d|1602791141537|[13519503, 1, 1]|\r\n+--------------------+--------------------+--------------------+---+-------------+----------------+\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709557478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709642025","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-709642025","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":709642025,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY0MjAyNQ==","user":{"login":"afeldman1","id":4326577,"node_id":"MDQ6VXNlcjQzMjY1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/4326577?v=4","gravatar_id":"","url":"https://api.github.com/users/afeldman1","html_url":"https://github.com/afeldman1","followers_url":"https://api.github.com/users/afeldman1/followers","following_url":"https://api.github.com/users/afeldman1/following{/other_user}","gists_url":"https://api.github.com/users/afeldman1/gists{/gist_id}","starred_url":"https://api.github.com/users/afeldman1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afeldman1/subscriptions","organizations_url":"https://api.github.com/users/afeldman1/orgs","repos_url":"https://api.github.com/users/afeldman1/repos","events_url":"https://api.github.com/users/afeldman1/events{/privacy}","received_events_url":"https://api.github.com/users/afeldman1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T23:28:37Z","updated_at":"2020-10-15T23:28:37Z","author_association":"NONE","body":"Hey @LeoHsu0802 \r\nAh, yes. I've been using the 5.31 version of EMR. EMR 6.0.0 has hudi version 0.5.0-incubating which is pretty old. EMR 5.3.1 includes the latest hudi version 0.6.0 (with some undisclosed aws specific changes to hudi).\r\nThese version breakdowns can be found here:\r\nFor EMR 5.x: https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-release-5x.html (Note the for 5.31, the version chart graphic incorrectly marks spark as 2.4.5, it is actually 2.4.6)\r\nFor EMR 6.x: https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-release-6x.html\r\n\r\nBut that's great to hear that your partitions are working in EMR 5.31.0. In terms of the metastore, do you mean you're trying to use the glue crawlers to create hudi tables? (don't think this is supported)\r\nOr are you saying that after running your pyspark code to create the tables, they do not appear in the glue/athena table list?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709642025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709654557","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709654557","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709654557,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY1NDU1Nw==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T00:14:53Z","updated_at":"2020-10-16T02:48:12Z","author_association":"NONE","body":"This is a different run. I'll add `cleans show` results later.\r\nAll partitions:\r\n```\r\nstaff  5984 16 Oct 12:02 .hoodie\r\nstaff   224 16 Oct 12:02 graphversion=782\r\nstaff   192 16 Oct 12:02 graphversion=783\r\nstaff   128 16 Oct 12:02 graphversion=786\r\nstaff   160 16 Oct 12:02 graphversion=788\r\n```\r\n.hoodie folder (not all of it)\r\n```\r\nstaff   969 16 Oct 09:16 20201015221614.rollback\r\nstaff     0 16 Oct 09:16 20201015221614.rollback.inflight\r\nstaff  1043 16 Oct 09:17 20201015221713.rollback\r\nstaff     0 16 Oct 09:17 20201015221713.rollback.inflight\r\nstaff  1043 16 Oct 09:18 20201015221834.rollback\r\nstaff     0 16 Oct 09:18 20201015221834.rollback.inflight\r\nstaff  1206 16 Oct 09:19 20201015221941.rollback\r\nstaff     0 16 Oct 09:19 20201015221941.rollback.inflight\r\nstaff  1043 16 Oct 09:20 20201015222038.rollback\r\nstaff     0 16 Oct 09:20 20201015222038.rollback.inflight\r\nstaff  1043 16 Oct 09:21 20201015222129.rollback\r\nstaff     0 16 Oct 09:21 20201015222129.rollback.inflight\r\nstaff   969 16 Oct 09:49 20201015224949.rollback\r\nstaff     0 16 Oct 09:49 20201015224949.rollback.inflight\r\nstaff  1079 16 Oct 10:49 20201015234929.rollback\r\nstaff     0 16 Oct 10:49 20201015234929.rollback.inflight\r\nstaff  1079 16 Oct 10:50 20201015235034.rollback\r\nstaff     0 16 Oct 10:50 20201015235034.rollback.inflight\r\nstaff   969 16 Oct 10:52 20201015235220.rollback\r\nstaff     0 16 Oct 10:52 20201015235220.rollback.inflight\r\nstaff   969 16 Oct 10:53 20201015235319.rollback\r\nstaff     0 16 Oct 10:53 20201015235319.rollback.inflight\r\nstaff  1079 16 Oct 10:54 20201015235414.rollback\r\nstaff     0 16 Oct 10:54 20201015235414.rollback.inflight\r\nstaff   969 16 Oct 10:55 20201015235515.rollback\r\nstaff     0 16 Oct 10:55 20201015235515.rollback.inflight\r\nstaff  1501 16 Oct 11:06 20201016000617.clean\r\nstaff  1496 16 Oct 11:06 20201016000617.clean.inflight\r\nstaff  1496 16 Oct 11:06 20201016000617.clean.requested\r\nstaff  1501 16 Oct 11:07 20201016000716.clean\r\nstaff  1496 16 Oct 11:07 20201016000716.clean.inflight\r\nstaff  1496 16 Oct 11:07 20201016000716.clean.requested\r\nstaff  1501 16 Oct 11:08 20201016000816.clean\r\nstaff  1496 16 Oct 11:08 20201016000816.clean.inflight\r\nstaff  1496 16 Oct 11:08 20201016000816.clean.requested\r\nstaff  1501 16 Oct 11:09 20201016000915.clean\r\nstaff  1496 16 Oct 11:09 20201016000915.clean.inflight\r\nstaff  1496 16 Oct 11:09 20201016000915.clean.requested\r\nstaff  1501 16 Oct 11:10 20201016001015.clean\r\nstaff  1496 16 Oct 11:10 20201016001015.clean.inflight\r\nstaff  1496 16 Oct 11:10 20201016001015.clean.requested\r\nstaff  1501 16 Oct 11:11 20201016001117.clean\r\nstaff  1496 16 Oct 11:11 20201016001117.clean.inflight\r\nstaff  1496 16 Oct 11:11 20201016001117.clean.requested\r\nstaff  1503 16 Oct 11:12 20201016001222.clean\r\nstaff  1497 16 Oct 11:12 20201016001222.clean.inflight\r\nstaff  1497 16 Oct 11:12 20201016001222.clean.requested\r\nstaff  2318 16 Oct 11:16 20201016001619.commit\r\nstaff     0 16 Oct 11:16 20201016001619.commit.requested\r\nstaff   986 16 Oct 11:16 20201016001619.inflight\r\nstaff  1655 16 Oct 11:17 20201016001718.clean\r\nstaff  1660 16 Oct 11:17 20201016001718.clean.inflight\r\nstaff  1660 16 Oct 11:17 20201016001718.clean.requested\r\nstaff  2318 16 Oct 11:17 20201016001718.commit\r\nstaff     0 16 Oct 11:17 20201016001718.commit.requested\r\nstaff   986 16 Oct 11:17 20201016001718.inflight\r\nstaff  1503 16 Oct 11:18 20201016001818.clean\r\nstaff  1497 16 Oct 11:18 20201016001818.clean.inflight\r\nstaff  1497 16 Oct 11:18 20201016001818.clean.requested\r\nstaff  2317 16 Oct 11:18 20201016001818.commit\r\nstaff     0 16 Oct 11:18 20201016001818.commit.requested\r\nstaff   985 16 Oct 11:18 20201016001818.inflight\r\nstaff  1503 16 Oct 11:20 20201016001919.clean\r\nstaff  1497 16 Oct 11:20 20201016001919.clean.inflight\r\nstaff  1497 16 Oct 11:20 20201016001919.clean.requested\r\nstaff  2317 16 Oct 11:19 20201016001919.commit\r\nstaff     0 16 Oct 11:19 20201016001919.commit.requested\r\nstaff   985 16 Oct 11:19 20201016001919.inflight\r\nstaff  1503 16 Oct 11:21 20201016002025.clean\r\nstaff  1497 16 Oct 11:21 20201016002025.clean.inflight\r\nstaff  1497 16 Oct 11:21 20201016002025.clean.requested\r\nstaff  2318 16 Oct 11:20 20201016002025.commit\r\nstaff     0 16 Oct 11:20 20201016002025.commit.requested\r\nstaff   986 16 Oct 11:20 20201016002025.inflight\r\nstaff  1503 16 Oct 11:21 20201016002124.clean\r\nstaff  1497 16 Oct 11:21 20201016002124.clean.inflight\r\nstaff  1497 16 Oct 11:21 20201016002124.clean.requested\r\nstaff  2317 16 Oct 11:21 20201016002124.commit\r\nstaff     0 16 Oct 11:21 20201016002124.commit.requested\r\nstaff   985 16 Oct 11:21 20201016002124.inflight\r\nstaff  1503 16 Oct 11:22 20201016002215.clean\r\nstaff  1497 16 Oct 11:22 20201016002215.clean.inflight\r\nstaff  1497 16 Oct 11:22 20201016002215.clean.requested\r\nstaff  2317 16 Oct 11:22 20201016002215.commit\r\nstaff     0 16 Oct 11:22 20201016002215.commit.requested\r\nstaff   985 16 Oct 11:22 20201016002215.inflight\r\nstaff  1503 16 Oct 11:23 20201016002316.clean\r\nstaff  1497 16 Oct 11:23 20201016002316.clean.inflight\r\nstaff  1497 16 Oct 11:23 20201016002316.clean.requested\r\nstaff  2317 16 Oct 11:23 20201016002316.commit\r\nstaff     0 16 Oct 11:23 20201016002316.commit.requested\r\nstaff   985 16 Oct 11:23 20201016002316.inflight\r\nstaff  1503 16 Oct 11:24 20201016002416.clean\r\nstaff  1497 16 Oct 11:24 20201016002416.clean.inflight\r\nstaff  1497 16 Oct 11:24 20201016002416.clean.requested\r\nstaff  1413 16 Oct 11:24 20201016002416.commit\r\nstaff     0 16 Oct 11:24 20201016002416.commit.requested\r\nstaff   380 16 Oct 11:24 20201016002416.inflight\r\nstaff  2319 16 Oct 11:25 20201016002516.commit\r\nstaff     0 16 Oct 11:25 20201016002516.commit.requested\r\nstaff   985 16 Oct 11:25 20201016002516.inflight\r\nstaff  1503 16 Oct 11:26 20201016002619.clean\r\nstaff  1497 16 Oct 11:26 20201016002619.clean.inflight\r\nstaff  1497 16 Oct 11:26 20201016002619.clean.requested\r\nstaff  1413 16 Oct 11:26 20201016002619.commit\r\nstaff     0 16 Oct 11:26 20201016002619.commit.requested\r\nstaff   380 16 Oct 11:26 20201016002619.inflight\r\nstaff  1413 16 Oct 11:27 20201016002723.commit\r\nstaff     0 16 Oct 11:27 20201016002723.commit.requested\r\nstaff   380 16 Oct 11:27 20201016002723.inflight\r\nstaff  1413 16 Oct 11:28 20201016002825.commit\r\nstaff     0 16 Oct 11:28 20201016002825.commit.requested\r\nstaff   380 16 Oct 11:28 20201016002825.inflight\r\nstaff  1413 16 Oct 11:29 20201016002917.commit\r\nstaff     0 16 Oct 11:29 20201016002917.commit.requested\r\nstaff   380 16 Oct 11:29 20201016002917.inflight\r\nstaff  2319 16 Oct 11:30 20201016003004.commit\r\nstaff     0 16 Oct 11:30 20201016003004.commit.requested\r\nstaff   985 16 Oct 11:30 20201016003004.inflight\r\nstaff  1505 16 Oct 11:31 20201016003106.clean\r\nstaff  1498 16 Oct 11:31 20201016003106.clean.inflight\r\nstaff  1498 16 Oct 11:31 20201016003106.clean.requested\r\nstaff  2319 16 Oct 11:31 20201016003106.commit\r\nstaff     0 16 Oct 11:31 20201016003106.commit.requested\r\nstaff   985 16 Oct 11:31 20201016003106.inflight\r\nstaff  1505 16 Oct 11:34 20201016003338.clean\r\nstaff  1498 16 Oct 11:34 20201016003338.clean.inflight\r\nstaff  1498 16 Oct 11:34 20201016003338.clean.requested\r\nstaff  2319 16 Oct 11:34 20201016003338.commit\r\nstaff     0 16 Oct 11:33 20201016003338.commit.requested\r\nstaff   985 16 Oct 11:33 20201016003338.inflight\r\nstaff  1505 16 Oct 11:37 20201016003648.clean\r\nstaff  1498 16 Oct 11:37 20201016003648.clean.inflight\r\nstaff  1498 16 Oct 11:37 20201016003648.clean.requested\r\nstaff  1413 16 Oct 11:37 20201016003648.commit\r\nstaff     0 16 Oct 11:36 20201016003648.commit.requested\r\nstaff   380 16 Oct 11:37 20201016003648.inflight\r\nstaff  1413 16 Oct 11:37 20201016003733.commit\r\nstaff     0 16 Oct 11:37 20201016003733.commit.requested\r\nstaff   380 16 Oct 11:37 20201016003733.inflight\r\nstaff  2320 16 Oct 11:40 20201016004005.commit\r\nstaff     0 16 Oct 11:40 20201016004005.commit.requested\r\nstaff   986 16 Oct 11:40 20201016004005.inflight\r\nstaff  1505 16 Oct 11:41 20201016004106.clean\r\nstaff  1498 16 Oct 11:41 20201016004106.clean.inflight\r\nstaff  1498 16 Oct 11:41 20201016004106.clean.requested\r\nstaff  2319 16 Oct 11:41 20201016004106.commit\r\nstaff     0 16 Oct 11:41 20201016004106.commit.requested\r\nstaff   985 16 Oct 11:41 20201016004106.inflight\r\nstaff  1505 16 Oct 11:44 20201016004405.clean\r\nstaff  1498 16 Oct 11:44 20201016004405.clean.inflight\r\nstaff  1498 16 Oct 11:44 20201016004405.clean.requested\r\nstaff  2319 16 Oct 11:44 20201016004405.commit\r\nstaff     0 16 Oct 11:44 20201016004405.commit.requested\r\nstaff   985 16 Oct 11:44 20201016004405.inflight\r\nstaff  1505 16 Oct 11:50 20201016005005.clean\r\nstaff  1498 16 Oct 11:50 20201016005005.clean.inflight\r\nstaff  1498 16 Oct 11:50 20201016005005.clean.requested\r\nstaff  2319 16 Oct 11:50 20201016005005.commit\r\nstaff     0 16 Oct 11:50 20201016005005.commit.requested\r\nstaff   985 16 Oct 11:50 20201016005005.inflight\r\nstaff  1505 16 Oct 11:51 20201016005106.clean\r\nstaff  1498 16 Oct 11:51 20201016005106.clean.inflight\r\nstaff  1498 16 Oct 11:51 20201016005106.clean.requested\r\nstaff  2319 16 Oct 11:51 20201016005106.commit\r\nstaff     0 16 Oct 11:51 20201016005106.commit.requested\r\nstaff   985 16 Oct 11:51 20201016005106.inflight\r\nstaff  1505 16 Oct 11:54 20201016005342.clean\r\nstaff  1498 16 Oct 11:54 20201016005342.clean.inflight\r\nstaff  1498 16 Oct 11:54 20201016005342.clean.requested\r\nstaff  2305 16 Oct 11:54 20201016005342.commit\r\nstaff     0 16 Oct 11:53 20201016005342.commit.requested\r\nstaff   989 16 Oct 11:54 20201016005342.inflight\r\nstaff  2312 16 Oct 11:59 20201016005831.commit\r\nstaff     0 16 Oct 11:58 20201016005831.commit.requested\r\nstaff   986 16 Oct 11:58 20201016005831.inflight\r\nstaff  1497 16 Oct 12:00 20201016010004.clean\r\nstaff  1494 16 Oct 12:00 20201016010004.clean.inflight\r\nstaff  1494 16 Oct 12:00 20201016010004.clean.requested\r\nstaff  2311 16 Oct 12:00 20201016010004.commit\r\nstaff     0 16 Oct 12:00 20201016010004.commit.requested\r\nstaff   985 16 Oct 12:00 20201016010004.inflight\r\nstaff   768 16 Oct 12:02 archived\r\nstaff   231 16 Oct 08:31 hoodie.properties\r\n```\r\nPartitions:\r\ngraphversion=782\r\n```\r\nstaff       93 16 Oct 08:32 .hoodie_partition_metadata\r\nstaff  5447259 16 Oct 09:16 efbbb2eb-d244-463d-bf64-55d0c46c057d-0_0-10154-151923_20201015221611.parquet\r\nstaff  5442031 16 Oct 09:18 efbbb2eb-d244-463d-bf64-55d0c46c057d-0_0-10800-159936_20201015221814.parquet\r\nstaff  5442099 16 Oct 09:20 efbbb2eb-d244-463d-bf64-55d0c46c057d-0_0-11245-169414_20201015222013.parquet\r\nstaff  5442001 16 Oct 09:21 efbbb2eb-d244-463d-bf64-55d0c46c057d-0_0-11481-174108_20201015222114.parquet\r\n```\r\ngraphversion=783\r\n```\r\nstaff       93 16 Oct 09:11 .hoodie_partition_metadata\r\nstaff  5519741 16 Oct 10:49 125ca82f-911b-4830-86d4-2290111cc55a-0_0-25341-397081_20201015234912.parquet\r\nstaff  5512472 16 Oct 10:50 125ca82f-911b-4830-86d4-2290111cc55a-0_0-25658-401934_20201015235010.parquet\r\nstaff  5514534 16 Oct 10:51 125ca82f-911b-4830-86d4-2290111cc55a-0_0-25898-406769_20201015235111.parquet\r\n```\r\ngraphversion=786\r\n```\r\nstaff       93 16 Oct 10:44 .hoodie_partition_metadata\r\nstaff  5723412 16 Oct 11:51 bb9e869a-edab-4515-92e4-e99f098f88e1-0_0-13936-223389_20201016005106.parquet\r\n```\r\ngraphversion=788\r\n```\r\nstaff       93 16 Oct 11:54 .hoodie_partition_metadata\r\nstaff  5806059 16 Oct 11:59 be99cdb1-d096-4623-9767-4bb7156229c8-0_0-304-4887_20201016005831.parquet\r\nstaff  5807720 16 Oct 12:00 be99cdb1-d096-4623-9767-4bb7156229c8-0_0-629-9669_20201016010004.parquet\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709654557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709655075","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709655075","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709655075,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY1NTA3NQ==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T00:16:38Z","updated_at":"2020-10-16T00:16:38Z","author_association":"NONE","body":"Is it possible that the problem is caused by two versions of the app running in parallel? I also noticed that writing hoodie files sometimes hangs.\r\n<img width=\"1407\" alt=\"Screen Shot 2020-10-15 at 21 26 25\" src=\"https://user-images.githubusercontent.com/1992396/96198576-fedccf80-0fa0-11eb-9e9c-c347dbe274ae.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709655075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709660443","html_url":"https://github.com/apache/hudi/pull/2147#issuecomment-709660443","issue_url":"https://api.github.com/repos/apache/hudi/issues/2147","id":709660443,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY2MDQ0Mw==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T00:32:51Z","updated_at":"2020-10-16T00:32:51Z","author_association":"CONTRIBUTOR","body":"@rmpifer  We might need to remove this hbase relocation from hudi-utilities-bundle as well. Ran into this issue  when using  DeltaStreamer without HBASE index and in EMR 5.31.0 with security configs. The job failed as soon as it started. Saw errors similar to https://github.com/apache/hudi/issues/2100 . But was able to quickly verify that on removing this relocation from   the hudi-utilities-bundle bundle, the job ran fine. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709660443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709685927","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709685927","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709685927,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY4NTkyNw==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:06:00Z","updated_at":"2020-10-16T02:46:46Z","author_association":"NONE","body":"Cleans:\r\n![image](https://user-images.githubusercontent.com/1992396/96207062-0490e000-0fb6-11eb-85e4-14098bbe77fb.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709685927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709697654","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709697654","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709697654,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY5NzY1NA==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:47:08Z","updated_at":"2020-10-16T02:47:08Z","author_association":"NONE","body":"Commits:\r\n![image](https://user-images.githubusercontent.com/1992396/96207078-11153880-0fb6-11eb-8f84-b82058bb0706.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709697654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709700860","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-709700860","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":709700860,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTcwMDg2MA==","user":{"login":"LeoHsu0802","id":38006639,"node_id":"MDQ6VXNlcjM4MDA2NjM5","avatar_url":"https://avatars.githubusercontent.com/u/38006639?v=4","gravatar_id":"","url":"https://api.github.com/users/LeoHsu0802","html_url":"https://github.com/LeoHsu0802","followers_url":"https://api.github.com/users/LeoHsu0802/followers","following_url":"https://api.github.com/users/LeoHsu0802/following{/other_user}","gists_url":"https://api.github.com/users/LeoHsu0802/gists{/gist_id}","starred_url":"https://api.github.com/users/LeoHsu0802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeoHsu0802/subscriptions","organizations_url":"https://api.github.com/users/LeoHsu0802/orgs","repos_url":"https://api.github.com/users/LeoHsu0802/repos","events_url":"https://api.github.com/users/LeoHsu0802/events{/privacy}","received_events_url":"https://api.github.com/users/LeoHsu0802/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:58:33Z","updated_at":"2020-10-16T02:58:33Z","author_association":"NONE","body":"Hi @afeldman1 ,\r\nThanks for your reply.\r\nYes, I found glue crawler is not support for hudi dataset.\r\nI successfully write the data to hive store and can query in Athena now but is it possible to write it to specific database? Cause the table which I wrote only appear in default database.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709700860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709702300","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709702300","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709702300,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTcwMjMwMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T03:03:09Z","updated_at":"2020-10-16T03:04:21Z","author_association":"CONTRIBUTOR","body":"@halkar : Do you mean you are writing to the same dataset concurrently ? This is not supported and you need to be ingesting to the dataset by one write a time.  Can you rerun with only one write() at a time and see if cleaner is cleaning the old file versions.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709702300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709715455","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-709715455","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":709715455,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTcxNTQ1NQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T03:53:31Z","updated_at":"2020-10-16T03:53:31Z","author_association":"CONTRIBUTOR","body":"I will try to repro tomorrow. few questions in the mean time. \r\n1. By recordSize = 35 you mean, 35 bytes? seems too low. \r\n2. By \"IndexBloomNumEntries = 1500000\", you meant to say, you have set \"hoodie.index.bloom.num_entries\" to this value?\r\n3. Did you set any value for any of these configs. \r\nhoodie.copyonwrite.insert.auto.split \r\nhoodie.index.bloom.num_entries\r\nhoodie.index.bloom.fpp\r\nhoodie.bloom.index.filter.type\r\n4. what was the size of the parquet file or how many entries your parquet file had which resulted in 10MB of bloom index.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709715455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709716905","html_url":"https://github.com/apache/hudi/issues/933#issuecomment-709716905","issue_url":"https://api.github.com/repos/apache/hudi/issues/933","id":709716905,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTcxNjkwNQ==","user":{"login":"afeldman1","id":4326577,"node_id":"MDQ6VXNlcjQzMjY1Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/4326577?v=4","gravatar_id":"","url":"https://api.github.com/users/afeldman1","html_url":"https://github.com/afeldman1","followers_url":"https://api.github.com/users/afeldman1/followers","following_url":"https://api.github.com/users/afeldman1/following{/other_user}","gists_url":"https://api.github.com/users/afeldman1/gists{/gist_id}","starred_url":"https://api.github.com/users/afeldman1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afeldman1/subscriptions","organizations_url":"https://api.github.com/users/afeldman1/orgs","repos_url":"https://api.github.com/users/afeldman1/repos","events_url":"https://api.github.com/users/afeldman1/events{/privacy}","received_events_url":"https://api.github.com/users/afeldman1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T03:59:37Z","updated_at":"2020-10-16T03:59:37Z","author_association":"NONE","body":"@LeoHsu0802, yep it's another hudi configuration option :) Where `DataSourceWriteOptions.HIVE_DATABASE_OPT_KEY` is the same as `'hoodie.datasource.hive_sync.database'` and DbName is the name of the database you'd like to use.\r\n\r\n`DataSourceWriteOptions.HIVE_DATABASE_OPT_KEY: 'DbName'`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709716905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709817321","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-709817321","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":709817321,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTgxNzMyMQ==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T06:05:13Z","updated_at":"2020-10-16T06:05:13Z","author_association":"NONE","body":"@nsivabalan Please find below my answers\r\n\r\n1. That's the average record size. I inspected the parquet files produced and calculated that based on the metrics I found there.\r\n2. Yes\r\n3. hoodie.copyonwrite.insert.split.size - didn't set manually. By default its enabled. But we don't retain 24 commits its just 1.\r\nhoodie.index.bloom.num_entries = set to 1500000\r\nhoodie.index.bloom.fpp = didn't set manually. default is 0.000000001\r\nhoodie.bloom.index.filter.type = didn't set manually. default is BLOOM\r\n\r\nin fact except for the configs I mentioned in the issue description I didn't set any other config explicitly and I left it all as defaults.\r\n\r\n4. All the files I inspected so far had this issue regardless of the size. This is consistent.  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709817321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709830826","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709830826","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709830826,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTgzMDgyNg==","user":{"login":"halkar","id":1992396,"node_id":"MDQ6VXNlcjE5OTIzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1992396?v=4","gravatar_id":"","url":"https://api.github.com/users/halkar","html_url":"https://github.com/halkar","followers_url":"https://api.github.com/users/halkar/followers","following_url":"https://api.github.com/users/halkar/following{/other_user}","gists_url":"https://api.github.com/users/halkar/gists{/gist_id}","starred_url":"https://api.github.com/users/halkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halkar/subscriptions","organizations_url":"https://api.github.com/users/halkar/orgs","repos_url":"https://api.github.com/users/halkar/repos","events_url":"https://api.github.com/users/halkar/events{/privacy}","received_events_url":"https://api.github.com/users/halkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T06:17:22Z","updated_at":"2020-10-16T06:17:22Z","author_association":"NONE","body":"@bvaradar thanks for confirming. Are there any plans to support concurrent writes? I'll try to change the logic not do concurrent writes.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709830826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709864864","html_url":"https://github.com/apache/hudi/issues/2174#issuecomment-709864864","issue_url":"https://api.github.com/repos/apache/hudi/issues/2174","id":709864864,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg2NDg2NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:06:11Z","updated_at":"2020-10-16T07:06:11Z","author_association":"CONTRIBUTOR","body":"@halkar : Yes, https://issues.apache.org/jira/browse/HUDI-845 tracks it ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709864864/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709868001","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-709868001","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":709868001,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg2ODAwMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:10:54Z","updated_at":"2020-10-16T07:10:54Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : With your provided avro file, I am able to ingest without any errors.\r\n\r\n```\r\nspark-submit --packages org.apache.spark:spark-avro_2.11:2.4.4   --class org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer $HUDI_UTILITIES_BUNDLE   --table-type COPY_ON_WRITE   --source-class org.apache.hudi.utilities.sources.AvroDFSSource   --source-ordering-field _ts_ms    --target-base-path /tmp/hudi_data   --target-table stock_ticks_cow --props /Users/balaji.varadarajan/code/oss/upstream_hudi/docker/demo/config/cases_dfs_source.properties   --schemaprovider-class org.apache.hudi.utilities.schema.DebeziumSchemaRegistryProvider   --transformer-class org.apache.hudi.utilities.transform.DebeziumTransformer   --hoodie-conf hoodie.compaction.payload.class=org.apache.hudi.common.model.DebeziumAvroPayload   --hoodie-conf hoodie.deltastreamer.source.dfs.root=file:///tmp/data/ 2>&1 | tee o.log\r\n```\r\n\r\nLogs\r\n```\r\n+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n|_ts_ms       |_op|inc_id|year|violation_desc                     |violation_code|case_individual_id|flag|last_modified_ts|\r\n+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n|1602791105042|c  |1     |2016|DRIVING WHILE INTOXICATED          |11923         |17475366          |I   |1600945380000000|\r\n|1602791105042|c  |3     |2016|AGGRAVATED UNLIC OPER 2ND/PREV CONV|5112A1        |17475367          |U   |1600959600000000|\r\n|1602791105043|c  |4     |2019|AGGRAVATED UNLIC OPER 2ND/PREV     |5112A2        |17475368          |I   |1569337200000000|\r\n|1602791105043|c  |2     |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |2180F         |17475569          |U   |1601377200000000|\r\n|1602791105043|c  |9     |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475573          |I   |1601377200000000|\r\n|1602791105043|c  |10    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601377800000000|\r\n|1602791105044|c  |11    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601381400000000|\r\n|1602791105044|c  |12    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601385000000000|\r\n|1602791105044|c  |13    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601388600000000|\r\n|1602791105044|c  |34    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601392200000000|\r\n|1602791105045|c  |35    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601395800000000|\r\n|1602791105045|c  |36    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601398800000000|\r\n|1602791105045|c  |37    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601399400000000|\r\n|1602791105045|c  |38    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601402400000000|\r\n|1602791141537|d  |3     |2016|AGGRAVATED UNLIC OPER 2ND/PREV CONV|5112A1        |17475367          |U   |1600959600000000|\r\n+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n\r\n....\r\n20/10/15 21:56:44 INFO DeltaSync: Commit 20201015215641 successful!\r\n......\r\n```\r\n\r\nI am able to read the newly added data successfully too:\r\n\r\n```\r\nscala> df.show(100, false)\r\n+-------------------+--------------------+------------------+----------------------+---------------------------------------------------------------------+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n|_hoodie_commit_time|_hoodie_commit_seqno|_hoodie_record_key|_hoodie_partition_path|_hoodie_file_name                                                    |_ts_ms       |_op|inc_id|year|violation_desc                     |violation_code|case_individual_id|flag|last_modified_ts|\r\n+-------------------+--------------------+------------------+----------------------+---------------------------------------------------------------------+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n|20201015215641     |20201015215641_0_1  |34                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105044|c  |34    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601392200000000|\r\n|20201015215641     |20201015215641_0_2  |10                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105043|c  |10    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601377800000000|\r\n|20201015215641     |20201015215641_0_3  |1                 |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105042|c  |1     |2016|DRIVING WHILE INTOXICATED          |11923         |17475366          |I   |1600945380000000|\r\n|20201015215641     |20201015215641_0_4  |3                 |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791141537|d  |3     |2016|AGGRAVATED UNLIC OPER 2ND/PREV CONV|5112A1        |17475367          |U   |1600959600000000|\r\n|20201015215641     |20201015215641_0_5  |36                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105045|c  |36    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601398800000000|\r\n|20201015215641     |20201015215641_0_6  |12                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105044|c  |12    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601385000000000|\r\n|20201015215641     |20201015215641_0_7  |9                 |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105043|c  |9     |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475573          |I   |1601377200000000|\r\n|20201015215641     |20201015215641_0_8  |38                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105045|c  |38    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601402400000000|\r\n|20201015215641     |20201015215641_0_9  |2                 |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105043|c  |2     |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |2180F         |17475569          |U   |1601377200000000|\r\n|20201015215641     |20201015215641_0_10 |4                 |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105043|c  |4     |2019|AGGRAVATED UNLIC OPER 2ND/PREV     |5112A2        |17475368          |I   |1569337200000000|\r\n|20201015215641     |20201015215641_0_11 |13                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105044|c  |13    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601388600000000|\r\n|20201015215641     |20201015215641_0_12 |11                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105044|c  |11    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180D         |17475574          |I   |1601381400000000|\r\n|20201015215641     |20201015215641_0_13 |37                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105045|c  |37    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601399400000000|\r\n|20201015215641     |20201015215641_0_14 |35                |                      |738db628-641f-4d60-b7e5-c9c971a371f8-0_0-27-29_20201015215641.parquet|1602791105045|c  |35    |2020|UNREASONABLE SPEED/SPECIAL HAZARDS |1180E         |17475574          |I   |1601395800000000|\r\n+-------------------+--------------------+------------------+----------------------+---------------------------------------------------------------------+-------------+---+------+----+-----------------------------------+--------------+------------------+----+----------------+\r\n\r\n```\r\n\r\nDo yo see anything I am missing here ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709868001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709869418","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-709869418","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":709869418,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg2OTQxOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:13:15Z","updated_at":"2020-10-16T07:13:15Z","author_association":"CONTRIBUTOR","body":"BTW, it looks like both create and delete have the same last_modified_ts which means that precombine would not have deleted the records. Is this fake data ? If so, can you set the deletion timestamp to be higher ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709869418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709875380","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-709875380","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":709875380,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg3NTM4MA==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:24:33Z","updated_at":"2020-10-16T07:24:58Z","author_association":"NONE","body":"@bvaradar @nsivabalan I did run some test around this issue. So I ran the job after setting the config hoodie.index.bloom.num_entries to 1500000 and inspected the file produced. There are 1000 records in total with total size 165381 bytes and then 10.2MB data for the bloom filter and the total size of the file was 10.2MB.\r\n\r\nAfter that I removed the config for hoodie.index.bloom.num_entries and ran the job with the default. This time I see same 1000 records with size 165381 and only 422KB data for bloom filter and the total size of the file was 428KB.\r\n\r\nSo this issue happens when I set value for the hoodie.index.bloom.num_entries to 1500000.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709875380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709876261","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709876261","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709876261,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg3NjI2MQ==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:26:30Z","updated_at":"2020-10-16T07:26:30Z","author_association":"NONE","body":"After some deep research i finally found something. I first try to do only a read and write without any transformation and its was way faster (around 500K in 30s) so i tried step by step to find what was the bottleneck and in fact it was my avro deserialisation : \r\n\r\n```\r\nxxx.readStream.selectExpr(\"deserialize(value) as message\")\r\n```\r\n\r\nSo i manage to find a better solution to deserialise avro message with io confluent schema registry \r\n\r\n```\r\nxxx.readStream.select(from_avro(col(\"value\"), schema))\r\n```\r\n\r\nAnd now i can read and write 500K messages in HUDI in 1.5min. That's way better ... ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709876261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709882868","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-709882868","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":709882868,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTg4Mjg2OA==","user":{"login":"naka13","id":4703406,"node_id":"MDQ6VXNlcjQ3MDM0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/4703406?v=4","gravatar_id":"","url":"https://api.github.com/users/naka13","html_url":"https://github.com/naka13","followers_url":"https://api.github.com/users/naka13/followers","following_url":"https://api.github.com/users/naka13/following{/other_user}","gists_url":"https://api.github.com/users/naka13/gists{/gist_id}","starred_url":"https://api.github.com/users/naka13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naka13/subscriptions","organizations_url":"https://api.github.com/users/naka13/orgs","repos_url":"https://api.github.com/users/naka13/repos","events_url":"https://api.github.com/users/naka13/events{/privacy}","received_events_url":"https://api.github.com/users/naka13/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T07:41:35Z","updated_at":"2020-10-16T07:41:35Z","author_association":"NONE","body":"@spyzzz Would it be possible for you to share the complete code? It'll be really helpful for others","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/709882868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710000914","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-710000914","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":710000914,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAwMDkxNA==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T11:56:01Z","updated_at":"2020-10-16T11:56:01Z","author_association":"NONE","body":"@naka13  Yes i'll, but i'd like to make something cleaner first. Yet its really Q&D.\r\nStill, my avro deserialisation is take 80% of my spark time jobs ... \r\nDunno yet if there is a wait to make it faster ??\r\n\r\nNot many information for structured streaming with confluent schema registry ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710000914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710023639","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-710023639","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":710023639,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAyMzYzOQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T12:46:42Z","updated_at":"2020-10-16T13:01:07Z","author_association":"NONE","body":"@bvaradar  Isnt the  ``` --source-ordering-field _ts_ms   ```   Then precombine should be looking in for _ts_ms right for deletion ?\r\n\r\nDelete worked fine for me as I replace ```--hoodie-conf hoodie.compaction.payload.class=org.apache.hudi.common.model.DebeziumAvroPayload  ``` with ``` --payload-class org.apache.hudi.common.model.DebeziumAvroPayload ```\r\n\r\nI checked the same scenario using the spark submit you had provided with `AvroDFSSource` and Im getting the same results but when I execute for `AvroKafkaSource` the earlier error comes up\r\n\r\n```\r\n+-------------------+--------------------+------------------+----------------------+--------------------+-------------+---+------+----+--------------------+--------------+------------------+----+----------------+\r\n|_hoodie_commit_time|_hoodie_commit_seqno|_hoodie_record_key|_hoodie_partition_path|   _hoodie_file_name|       _ts_ms|_op|inc_id|year|      violation_desc|violation_code|case_individual_id|flag|last_modified_ts|\r\n+-------------------+--------------------+------------------+----------------------+--------------------+-------------+---+------+----+--------------------+--------------+------------------+----+----------------+\r\n|     20201016125655|  20201016125655_0_1|                12|                      |b2699714-2916-4c4...|1602791105044|  c|    12|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601385000000000|\r\n|     20201016125655|  20201016125655_0_2|                36|                      |b2699714-2916-4c4...|1602791105045|  c|    36|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601398800000000|\r\n|     20201016125655|  20201016125655_0_3|                11|                      |b2699714-2916-4c4...|1602791105044|  c|    11|2020|UNREASONABLE SPEE...|         1180D|          17475574|   I|1601381400000000|\r\n|     20201016125655|  20201016125655_0_4|                37|                      |b2699714-2916-4c4...|1602791105045|  c|    37|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601399400000000|\r\n|     20201016125655|  20201016125655_0_5|                13|                      |b2699714-2916-4c4...|1602791105044|  c|    13|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601388600000000|\r\n|     20201016125655|  20201016125655_0_6|                 4|                      |b2699714-2916-4c4...|1602791105043|  c|     4|2019|AGGRAVATED UNLIC ...|        5112A2|          17475368|   I|1569337200000000|\r\n|     20201016125655|  20201016125655_0_7|                10|                      |b2699714-2916-4c4...|1602791105043|  c|    10|2020|UNREASONABLE SPEE...|         1180D|          17475574|   I|1601377800000000|\r\n|     20201016125655|  20201016125655_0_8|                34|                      |b2699714-2916-4c4...|1602791105044|  c|    34|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601392200000000|\r\n|     20201016125655|  20201016125655_0_9|                35|                      |b2699714-2916-4c4...|1602791105045|  c|    35|2020|UNREASONABLE SPEE...|         1180E|          17475574|   I|1601395800000000|\r\n|     20201016125655| 20201016125655_0_10|                38|                      |b2699714-2916-4c4...|1602791105045|  c|    38|2020|UNREASONABLE SPEE...|         1180D|          17475574|   I|1601402400000000|\r\n|     20201016125655| 20201016125655_0_11|                 1|                      |b2699714-2916-4c4...|1602791105042|  c|     1|2016|DRIVING WHILE INT...|         11923|          17475366|   I|1600945380000000|\r\n|     20201016125655| 20201016125655_0_12|                 2|                      |b2699714-2916-4c4...|1602791105043|  c|     2|2020|UNREASONABLE SPEE...|         2180F|          17475569|   U|1601377200000000|\r\n|     20201016125655| 20201016125655_0_13|                 9|                      |b2699714-2916-4c4...|1602791105043|  c|     9|2020|UNREASONABLE SPEE...|         1180E|          17475573|   I|1601377200000000|\r\n+-------------------+--------------------+------------------+----------------------+--------------------+-------------+---+------+----+--------------------+--------------+------------------+----+----------------+\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710023639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710029348","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-710029348","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":710029348,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAyOTM0OA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T12:58:28Z","updated_at":"2020-10-16T12:58:28Z","author_association":"CONTRIBUTOR","body":"yes, are you right. bitsize to initialize bloom is an objective function of both numEntries and ffp. \r\n\r\n(int) Math.ceil(numEntries * (-Math.log(errorRate) / (Math.log(2) * Math.log(2)))\r\n\r\nYou can check [this](https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/bloom/BloomFilterUtils.java) file for the math.\r\n\r\nNumEntries 60000, with error rate 0.000000001\r\nBitsize 2587966, numHashes 30\r\nBloom filter ser string size : 431348\r\n\r\nNumEntries 1500000, with error rate 0.000000001\r\nBitsize 64699145, numHashes 30\r\nBloom filter ser string size : 10783212\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710029348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710031904","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-710031904","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":710031904,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAzMTkwNA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T13:03:28Z","updated_at":"2020-10-16T13:45:39Z","author_association":"CONTRIBUTOR","body":"If you wish to scale the bloom filer size along with the number of entries, you can try out dynamic bloom filter.\r\nRemember this is different from hoodie.index.type which refers to BLOOM/GLOBAL_BLOOM, etc. \r\nThe config of interest is \r\nhoodie.bloom.index.filter.type = SIMPLE/DYNAMIC_V0\r\n\r\nfor DYNAMIC_V0, you need to set an extra config. \r\nhoodie.bloom.index.filter.dynamic.max.entries\r\n\r\nBasically the bloom will be initialized based on hoodie.index.bloom.num_entries. but as number of entries added reaches this value, bloom dynamically scales and increases its bitsize. This goes on upto \"hoodie.bloom.index.filter.dynamic.max.entries\". So, until this the ffp will be honored. After this the ffp may not be honored as the bloom may not grow beyond this. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710031904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710034993","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-710034993","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":710034993,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDAzNDk5Mw==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T13:09:18Z","updated_at":"2020-10-16T13:13:47Z","author_association":"NONE","body":"I followed these steps : \r\n\r\n```\r\n\r\n- Took fresh clone of release-0.6.0 branch\r\n- applied the patch provided\r\n- build and used the jar to run below commands\r\n```\r\n\r\n\r\n**AvroKafkaSource** : \r\n\r\n```\r\nspark-submit --packages org.apache.spark:spark-avro_2.11:2.4.4   --class org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer s3://xxxx/hudi/jars/hudi-utilities-bundle_2.11-0.6.0.jar   --table-type COPY_ON_WRITE   --source-class org.apache.hudi.utilities.sources.AvroKafkaSource   --source-ordering-field _ts_ms    --target-base-path s3://xxxx/warehouse/hudi_dms_acc_kafka   --target-table hudi_dms_acc_kafka --props s3://xxxx/hudi/conf/hudi-kafka.properties   --schemaprovider-class org.apache.hudi.utilities.schema.DebeziumSchemaRegistryProvider   --transformer-class org.apache.hudi.utilities.transform.DebeziumTransformer   --payload-class org.apache.hudi.common.model.DebeziumAvroPayload 2>&1 | tee o.log\r\n```\r\n[o.log](https://github.com/apache/hudi/files/5391752/o.log)\r\n\r\n**AvroDFSSource** : \r\n\r\n```\r\nspark-submit --packages org.apache.spark:spark-avro_2.11:2.4.4   --class org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer s3://xxxx/hudi/jars/hudi-utilities-bundle_2.11-0.6.0.jar   --table-type COPY_ON_WRITE   --source-class org.apache.hudi.utilities.sources.AvroDFSSource   --source-ordering-field _ts_ms    --target-base-path s3://xxxx/warehouse/hudi_dms_acc_kafka   --target-table hudi_dms_acc_kafka --props s3://xxxx/hudi/conf/hudi-conf.properties   --schemaprovider-class org.apache.hudi.utilities.schema.DebeziumSchemaRegistryProvider   --transformer-class org.apache.hudi.utilities.transform.DebeziumTransformer   --payload-class org.apache.hudi.common.model.DebeziumAvroPayload 2>&1 | tee p.log\r\n```\r\n[p.log](https://github.com/apache/hudi/files/5391748/p.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710034993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710060014","html_url":"https://github.com/apache/hudi/pull/2092#issuecomment-710060014","issue_url":"https://api.github.com/repos/apache/hudi/issues/2092","id":710060014,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDA2MDAxNA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T13:50:52Z","updated_at":"2020-10-16T13:50:52Z","author_association":"CONTRIBUTOR","body":"LGTM. Do fix the title and description since you have fixed the rollback as well. \r\nOnce you are done, let me know. or feel free to go ahead and merge it.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710060014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710520474","html_url":"https://github.com/apache/hudi/issues/1694#issuecomment-710520474","issue_url":"https://api.github.com/repos/apache/hudi/issues/1694","id":710520474,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDUyMDQ3NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T19:56:04Z","updated_at":"2020-10-16T19:56:04Z","author_association":"MEMBER","body":"So to clarify, GLOBAL_SIMPLE helps when the workload is random writes and affecting every file for e.g in each write. But it is indeed slow in the sense, it ll join against the entire dataset. If you want a better option you can try hbase index. Ofc there is extra operational overhead, but it ll fix perf and also the global indexing requirement","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710520474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710695585","html_url":"https://github.com/apache/hudi/pull/2185#issuecomment-710695585","issue_url":"https://api.github.com/repos/apache/hudi/issues/2185","id":710695585,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDY5NTU4NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T23:28:04Z","updated_at":"2020-10-16T23:29:16Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2185?src=pr&el=h1) Report\n> Merging [#2185](https://codecov.io/gh/apache/hudi/pull/2185?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/a44f66869f1b938e83857ceaed9291eca9194f45?el=desc) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2185/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2185?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #2185   +/-   ##\n=========================================\n  Coverage     53.62%   53.62%           \n  Complexity     2848     2848           \n=========================================\n  Files           359      359           \n  Lines         16553    16553           \n  Branches       1780     1780           \n=========================================\n  Hits           8876     8876           \n  Misses         6918     6918           \n  Partials        759      759           \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.73% <ø> (ø)` | `1795.00 <ø> (ø)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.42% <ø> (ø)` | `304.00 <ø> (ø)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.07% <ø> (ø)` | `325.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710695585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710699046","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-710699046","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":710699046,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDY5OTA0Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T23:43:36Z","updated_at":"2020-10-16T23:43:36Z","author_association":"CONTRIBUTOR","body":"@rahulpoptani : Would it be possible to test with OSS spark version and read the snapshot to verify ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710699046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710699297","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-710699297","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":710699297,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDY5OTI5Nw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T23:45:01Z","updated_at":"2020-10-16T23:45:01Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 : Did this work ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710699297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710713850","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-710713850","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":710713850,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDcxMzg1MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-17T00:53:25Z","updated_at":"2020-10-17T00:53:25Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : If I need to test with Kafka, would need a way to generate both Key and Value payload. Do you have some script to publish records to Kafka ? BTW, yeah, you are right about _ts_ms ordering field \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710713850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710747888","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-710747888","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":710747888,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDc0Nzg4OA==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-17T04:41:38Z","updated_at":"2020-10-17T06:02:02Z","author_association":"NONE","body":"@nsivabalan I tried out Dynamic filter. It seems to be fine. It's growing along with the number of entries dynamically. That's a good feature. Thanks.\r\n\r\nHowever what's the recommended approach in terms of indexing here ? I see various features are available out of the box. As per the record size (35 bytes) I could have more than 3.5 Million records in a file with max size 120MB. Since in the doc it was recommended to have approximately half the size of total number of records I went with 1.5M for bloom filter. But with that approach looks like the storage size is increasing by 10MB per file.\r\n\r\nwith index type - hoodie.index.type - How does this SIMPLE type work ?\r\n\r\nI see hoodie.bloom.index.prune.by.ranges, hoodie.bloom.index.use.caching, hoodie.bloom.index.use.treebased.filter, hoodie.bloom.index.bucketized.checking all these are enabled by default. Does this really help regardless of the hoodie key types used ? In my case I am using ComplexKeyGenerator with five different fields out of those one is timestamp. Is it recommended to enable all this for performance ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/710747888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711103785","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-711103785","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":711103785,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTEwMzc4NQ==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-18T01:34:17Z","updated_at":"2020-10-18T01:34:17Z","author_association":"MEMBER","body":"@vinothchandar @bvaradar Any concern?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711103785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711139438","html_url":"https://github.com/apache/hudi/pull/2188#issuecomment-711139438","issue_url":"https://api.github.com/repos/apache/hudi/issues/2188","id":711139438,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTEzOTQzOA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-18T09:12:13Z","updated_at":"2021-02-23T14:01:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2188?src=pr&el=h1) Report\n> Merging [#2188](https://codecov.io/gh/apache/hudi/pull/2188?src=pr&el=desc) (0c3a394) into [master](https://codecov.io/gh/apache/hudi/commit/2efd0760acb5de06adc0f0a4a045df792ff3b6ab?el=desc) (2efd076) will **decrease** coverage by `59.77%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2188/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2188?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master   #2188       +/-   ##\n============================================\n- Coverage     69.46%   9.69%   -59.78%     \n+ Complexity      356      48      -308     \n============================================\n  Files            53      53               \n  Lines          1929    1929               \n  Branches        230     230               \n============================================\n- Hits           1340     187     -1153     \n- Misses          456    1729     +1273     \n+ Partials        133      13      -120     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudiutilities | `9.69% <ø> (-59.78%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2188?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-3.00%)` | |\n| [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-10.00%)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [...apache/hudi/utilities/sources/JsonKafkaSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkthZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-6.00%)` | |\n| [...pache/hudi/utilities/sources/ParquetDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUGFycXVldERGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-5.00%)` | |\n| [...lities/schema/SchemaProviderWithPostProcessor.java](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFQcm92aWRlcldpdGhQb3N0UHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| ... and [30 more](https://codecov.io/gh/apache/hudi/pull/2188/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711139438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711141094","html_url":"https://github.com/apache/hudi/pull/2182#issuecomment-711141094","issue_url":"https://api.github.com/repos/apache/hudi/issues/2182","id":711141094,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTE0MTA5NA==","user":{"login":"guykhazma","id":33684427,"node_id":"MDQ6VXNlcjMzNjg0NDI3","avatar_url":"https://avatars.githubusercontent.com/u/33684427?v=4","gravatar_id":"","url":"https://api.github.com/users/guykhazma","html_url":"https://github.com/guykhazma","followers_url":"https://api.github.com/users/guykhazma/followers","following_url":"https://api.github.com/users/guykhazma/following{/other_user}","gists_url":"https://api.github.com/users/guykhazma/gists{/gist_id}","starred_url":"https://api.github.com/users/guykhazma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guykhazma/subscriptions","organizations_url":"https://api.github.com/users/guykhazma/orgs","repos_url":"https://api.github.com/users/guykhazma/repos","events_url":"https://api.github.com/users/guykhazma/events{/privacy}","received_events_url":"https://api.github.com/users/guykhazma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-18T09:27:55Z","updated_at":"2020-10-18T09:27:55Z","author_association":"CONTRIBUTOR","body":"thanks @leesf!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711141094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711168471","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-711168471","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":711168471,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTE2ODQ3MQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-18T13:30:29Z","updated_at":"2020-12-12T02:57:21Z","author_association":"CONTRIBUTOR","body":"I guess the small record size of 35 bytes throws it off. so, lets see what we can do. \r\nBefore I go further, let me recap the SIMPLE bloom. \r\nBloom filter will statically allocate the size based on the numEntries and fpp. So, irrespective of whether you add 50k entries or 500k entries or 1.5M entries (as per your config), bloom size is going to be 10MB or so. But it will guarantee the 1 * 10-9 false positive probability. Thats how a typical bloom works. If you initialize with 1.5M with 1 * 10-9 as fpp, it is going to allocate so many buckets. \r\nOnce you exceed the number of entries, then the fpp may not be guaranteed. In other words, when looked up, more entries will result in false positive compared to 1 * 10-9. \r\n\r\nComing back to the problem. So, with SIMPLE bloom, guess we can't do much given the small size of record size. And yes, all the configs you mentioned will help in reducing the time during index look up. \r\nOn a high level, these are the steps done during index lookup.\r\n- Do range look up and filter out those data files whose range does not match input records(for each input record). \r\n- From the filtered ones, do bloom look up to further trim down the data files to be looked up. \r\n- After all these filtering, go ahead and look up in data files for each record key and return the matched location if found. \r\n\r\nSo, few things to note here. \r\n- The range filtering will work only if your data is layed out such that each data files has a subset of entire dataset. If every data file's range is going to be more or less with similar min and max values, then this filtering may not help much. \r\n- Bloom filter look up: again, depending on fpp initialized, it will trim down most data files if not found. \r\n\r\nHaving said all this, here is a rough idea of the bloom filter size based on diff values for numEntires and fpp.\r\n\r\nnumEntries / FFP | 1 * 10-6 | 1 * 10-7 | 1 * 10-8 | 1 * 10-9 | \r\n-------|--------|---------|---------|-----------\r\n100k | 400k| 560k| 640k| 710k|\r\n250k | 1.2Mb| 1.4Mb | 1.6Mb | 1.8Mb|\r\n500k | 2.3Mb | 2.8Mb| 3.1Mb| 3.6Mb|\r\n750k | 3.6Mb| 4.1Mb| 4.8Mb| 5.4Mb|\r\n1M | 4.8Mb| 5.6Mb| 6.4Mb| 71.2Mb|\r\n1.25M| 6Mb| 7Mb| 8Mb| 9Mb|\r\n1.5M | 7.2Mb| 8.4Mb| 9.6Mb| 10Mb| \r\n\r\nSo, may be you can try 250k/500k with 1 * 10-6 or 1 * 10-7. \r\nOr better option is to run some workloads and determine which ones best fits your case. \r\n\r\nMay I know whats the perf impact you are seeing btw. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711168471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711466156","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-711466156","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":711466156,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTQ2NjE1Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T01:52:39Z","updated_at":"2020-10-19T01:52:39Z","author_association":"MEMBER","body":">However what's the recommended approach in terms of indexing here ? I see various features are available out of the box.\r\n\r\nBeen meaning to write a blog that walks through the options here. Interested in being a reviewer? That will also help explain this better for yourself as well :) \r\n\r\nIn short, you can pick options based on your workload (we intend to make dynamic_bloom default in 0.7.0 going forward, which should help with this issue?) \r\n\r\n- If you have records where there are ordered keys (e.g timestamp prefix), then Bloom index with range pruning will do an excellent job. It will be able to quickly prune out large number of files to compare against and just use bloom filters for the rest.\r\n- if you have records with no ordering in them (e.g uuid), but the pattern is such that mostly the recent partitions are updated with a long tail of updates/deletes to the older partitions, then still bloom index will be faster. but better to turn off range pruning, since it does not help, just incurs the cost of checking.  \r\n\r\n- If your update patterns are totally random i.e each commit affects almost every file, you can use SIMPLE_INDEX (which will join against the entire table) or if you have HBase - HBASE index (you can write your own index as well, its pluggable). We are working on adding a record level index natively within Hudi in the next major release hopefully \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711466156/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711553007","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-711553007","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":711553007,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTU1MzAwNw==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T04:45:50Z","updated_at":"2020-10-19T04:45:50Z","author_association":"NONE","body":"@bvaradar We are using the Debezium postgres connector of Confluent Kafka","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711553007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711553274","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-711553274","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":711553274,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTU1MzI3NA==","user":{"login":"rahulpoptani","id":20492557,"node_id":"MDQ6VXNlcjIwNDkyNTU3","avatar_url":"https://avatars.githubusercontent.com/u/20492557?v=4","gravatar_id":"","url":"https://api.github.com/users/rahulpoptani","html_url":"https://github.com/rahulpoptani","followers_url":"https://api.github.com/users/rahulpoptani/followers","following_url":"https://api.github.com/users/rahulpoptani/following{/other_user}","gists_url":"https://api.github.com/users/rahulpoptani/gists{/gist_id}","starred_url":"https://api.github.com/users/rahulpoptani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahulpoptani/subscriptions","organizations_url":"https://api.github.com/users/rahulpoptani/orgs","repos_url":"https://api.github.com/users/rahulpoptani/repos","events_url":"https://api.github.com/users/rahulpoptani/events{/privacy}","received_events_url":"https://api.github.com/users/rahulpoptani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T04:46:05Z","updated_at":"2020-10-19T04:46:05Z","author_association":"NONE","body":"@bvaradar The Jar I'm using is an Uber jar with Spark dependency included. Looks like the databricks environment may be the cause of these errors. I tried to run locally on my laptop and it worked fine.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711553274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711645166","html_url":"https://github.com/apache/hudi/issues/2178#issuecomment-711645166","issue_url":"https://api.github.com/repos/apache/hudi/issues/2178","id":711645166,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTY0NTE2Ng==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T06:27:03Z","updated_at":"2020-10-19T06:27:03Z","author_association":"NONE","body":"@nsivabalan @vinothchandar Thank you so much for all the explanations. If I think about it, having 10MB worth of index data may not be an issue as long as the file contains considerable amount of records. In my case there was a scenario where I had only 1000 records but with 10MB for index. So I switched to dynamic bloom now which is really helpful in this case. \r\n\r\nWe are dealing with two different types of data out of which one doesn't have much volume. That's where it threw it off where as for the other type where we do have good volume of data this didn't come out as an issue as we'd already have around 110-120MB worth of data plus index. As of now I've configure it like below\r\n\r\nIndexBloomNumEntries = 35000\r\nBloomIndexFilterType = DYNAMIC_V0\r\nBloomIndexFilterDynamicMaxEntries = 1400000\r\n\r\nstarting off with 35k (1%  of max no of entries in a file) as a base and scaling it out till 1.4M(40% of max no of entries in a file) entries as the file grows. So that should solve the problem possibly. Anyways we need to test this out for the volume we are seeing right now and tune it further if required.\r\n\r\n@vinothchandar Yes. Having a blog around this will definitely be very helpful. I felt hudi has a lot of features that can be used efficiently with some more in depth explanations than what we have right now as part of the documentation. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711645166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711757869","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-711757869","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":711757869,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTc1Nzg2OQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T07:30:41Z","updated_at":"2020-10-19T07:30:41Z","author_association":"CONTRIBUTOR","body":"Can work, but if the default value is not null, it will not work\r\n{\r\n\"name\": \"adnetDesc\",\r\n\"type\": [\"null\", \"long\"],\r\n\"default\": -1\r\n}\r\n @bvaradar   ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711757869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711759479","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-711759479","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":711759479,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTc1OTQ3OQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T07:31:47Z","updated_at":"2020-10-19T07:31:47Z","author_association":"CONTRIBUTOR","body":"I am late in reply, sorry. I have passed the verification in the production environment, and I am currently writing unit tests","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/711759479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712104176","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-712104176","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":712104176,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjEwNDE3Ng==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T11:52:12Z","updated_at":"2020-10-19T11:52:12Z","author_association":"CONTRIBUTOR","body":"@pratyakshsharma @xushiyan @vinothchandar  hello, \r\nIs there anything that needs to be fixed? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712104176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712208378","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-712208378","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":712208378,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjIwODM3OA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T14:36:57Z","updated_at":"2020-10-19T14:36:57Z","author_association":"MEMBER","body":"@lw309637554 looks like comments from @pratyakshsharma were addressed. sorry about the delay. merging now. Thank you @lw309637554 for adding the cases!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712208378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712279657","html_url":"https://github.com/apache/hudi/issues/2184#issuecomment-712279657","issue_url":"https://api.github.com/repos/apache/hudi/issues/2184","id":712279657,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjI3OTY1Nw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T16:22:51Z","updated_at":"2020-10-19T16:22:51Z","author_association":"CONTRIBUTOR","body":"@LeoHsu0802 : You need to use Global Index in order to move records to other partitions (https://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-HowdoestheHudiindexingwork&whatareitsbenefits?) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712279657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712289095","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-712289095","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":712289095,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjI4OTA5NQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T16:39:03Z","updated_at":"2020-10-19T16:39:03Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 : Adding \r\n\r\n> Can work, but if the default value is not null, it will not work\r\n> {\r\n> \"name\": \"adnetDesc\",\r\n> \"type\": [\"null\", \"long\"],\r\n> \"default\": -1\r\n> }\r\n> @bvaradar\r\n\r\nLet's discuss this in PR once you open it. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712289095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712304151","html_url":"https://github.com/apache/hudi/issues/2108#issuecomment-712304151","issue_url":"https://api.github.com/repos/apache/hudi/issues/2108","id":712304151,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjMwNDE1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T17:06:06Z","updated_at":"2020-10-19T17:06:06Z","author_association":"CONTRIBUTOR","body":"Closing this due to inactivity.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712304151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]