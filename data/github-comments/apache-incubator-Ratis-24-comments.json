[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775477318","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1775477318","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1775477318,"node_id":"IC_kwDOBMxbGc5p06JG","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T15:36:18Z","updated_at":"2023-10-23T15:36:18Z","author_association":"CONTRIBUTOR","body":"> 7. A race condition between 'leader appendEntries to peer 3' and 'peer 3 asks for vote from leader' happens. If 'asks for vote' gets first, peer 3 will shutdown.\r\n\r\nIf peer 3 starts with an empty conf, then it won't ask for vote.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775477318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775486797","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1775486797","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1775486797,"node_id":"IC_kwDOBMxbGc5p08dN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T15:41:22Z","updated_at":"2023-10-23T15:41:22Z","author_association":"CONTRIBUTOR","body":"> ... Please have a look at TestMembership#testAddOneToOne. ...\r\n\r\nThis is an important case since it is for changing from non-HA to HA.  We may:\r\n- Support only changing from 1 peer to 2 peers in a setConf (adding more peers require another setConf).\r\n- When changing from 1 peer to 2 peers, the old peer can become the leader even if the new peer not voted for it.  The new peer can become the leader only if the old peer voted for it.\r\n\r\nFor the other cases, we should somehow time out the in-progress setConf.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775486797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775776060","html_url":"https://github.com/apache/ratis/pull/948#issuecomment-1775776060","issue_url":"https://api.github.com/repos/apache/ratis/issues/948","id":1775776060,"node_id":"IC_kwDOBMxbGc5p2DE8","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T18:28:29Z","updated_at":"2023-10-23T18:28:29Z","author_association":"CONTRIBUTOR","body":"Also included some code cleanup for RATIS-872. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1775776060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776012123","html_url":"https://github.com/apache/ratis/pull/750#issuecomment-1776012123","issue_url":"https://api.github.com/repos/apache/ratis/issues/750","id":1776012123,"node_id":"IC_kwDOBMxbGc5p28tb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:59:41Z","updated_at":"2023-10-23T20:59:41Z","author_association":"CONTRIBUTOR","body":"@JackieTien97 , thanks a lot for submitting this pull request!  Closing ...","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776012123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776136895","html_url":"https://github.com/apache/ratis/pull/942#issuecomment-1776136895","issue_url":"https://api.github.com/repos/apache/ratis/issues/942","id":1776136895,"node_id":"IC_kwDOBMxbGc5p3bK_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T22:42:59Z","updated_at":"2023-10-23T22:42:59Z","author_association":"CONTRIBUTOR","body":"> ..., since we do not carry repliedId for read-only requests in unorderedAsync, shall we also exclude them in orderedAsync?\r\n\r\nThis is a very good question!  I handle blocking call and async calls separately.  Actually, it is better to handle all the calls at the same time in RaftClientImpl, which will collect the replied call ids and use them to create requests.  Let me update this after RATIS-1916.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776136895/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776354548","html_url":"https://github.com/apache/ratis/pull/949#issuecomment-1776354548","issue_url":"https://api.github.com/repos/apache/ratis/issues/949","id":1776354548,"node_id":"IC_kwDOBMxbGc5p4QT0","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T01:50:44Z","updated_at":"2023-10-24T01:50:44Z","author_association":"CONTRIBUTOR","body":"+1 LGTM","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776354548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776621023","html_url":"https://github.com/apache/ratis/pull/949#issuecomment-1776621023","issue_url":"https://api.github.com/repos/apache/ratis/issues/949","id":1776621023,"node_id":"IC_kwDOBMxbGc5p5RXf","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T06:44:57Z","updated_at":"2023-10-24T06:44:57Z","author_association":"CONTRIBUTOR","body":"@jojochuang , @guohao-rosicky , thanks  a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776621023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776881216","html_url":"https://github.com/apache/ratis/pull/950#issuecomment-1776881216","issue_url":"https://api.github.com/repos/apache/ratis/issues/950","id":1776881216,"node_id":"IC_kwDOBMxbGc5p6Q5A","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T09:47:45Z","updated_at":"2023-10-24T09:47:45Z","author_association":"CONTRIBUTOR","body":"@szetszwo PTAL!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1776881216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777098313","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1777098313","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1777098313,"node_id":"IC_kwDOBMxbGc5p7F5J","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T12:19:49Z","updated_at":"2023-10-24T12:19:49Z","author_association":"CONTRIBUTOR","body":"> How about just restarting the crashed new peer, since the network partition has recovered and there is little likelihood of the partition happening again in such a short period of time? If the partition does happen again and the restarted new peer crashes again, maybe we should give up to add this unstable peer to the new conf?\r\n\r\nHi @Brokenice0415 , thanks your nice comments. I think this is a good solution. Firstly it's very simple. We don't need to change any code. Providing an example and doc should be enough. Secondly, it's flexible. Allowing any conf updates as described in raft paper (JOINT consensus). \r\n\r\nI'm new to ratis and I'm worried my view might be a bit narrow. Could @szetszwo @SzyWilliam you kindly help giving more advices on this solution (Starting new peer with conf {C_old, peer_itself}) ? \r\n\r\nI also considered @szetszwo 's suggestion. \r\n> We may:\r\n> - Support only changing from 1 peer to 2 peers in a setConf (adding more peers require another setConf).\r\n> - When changing from 1 peer to 2 peers, the old peer can become the leader even if the new peer not voted for it. The > new peer can become the leader only if the old peer voted for it.\r\n> For the other cases, we should somehow time out the in-progress setConf.\r\n\r\nBased on the idea, I think we can set up 2 rules:\r\n1. Constraining configuration change behaviors. Only adding one peer and removing one peer are allowed.\r\n2. When changing from 1 peer to 2 peers, the old peer can become the leader even if the new peer not voted for it. The new peer can become the leader only if the old peer voted for it.\r\n\r\nBy rule 1, we reject all cases that may lead to infinite leader election, except 'adding 1 new peer to a 1 peer cluster'. By rule 2, we fix the 'adding 1 new peer to a 1 peer cluster' case.\r\n\r\nWe can prove the procedure won't cause split brain and infinite leader election. The combination of new peer and old peer configurations are shown below.\r\n\r\nold peer | new peer | Split brain | Infinite leader election | Leader can win\r\n-- | -- | -- | -- | --\r\nC_old | empty | no | no | yes\r\nC_old_and_C_new | empty | no | no | Yes, because of rule 2.\r\nC_old_and_C_new | C_old_and_C_new | no | no | yes\r\nC_new | C_old_and_C_new | no | no | yes\r\nC_old_and_C_new | C_new | no | no | yes\r\nC_new | C_new | no | no | yes\r\n\r\nThe advantages are:\r\n1. Allowing new peer to start with empty conf which is simple.\r\n2. Simplifying configuration change behaviors to only 'add 1 peer' and 'remove 1 peer'.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777098313/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777599206","html_url":"https://github.com/apache/ratis/pull/947#issuecomment-1777599206","issue_url":"https://api.github.com/repos/apache/ratis/issues/947","id":1777599206,"node_id":"IC_kwDOBMxbGc5p9ALm","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T16:28:31Z","updated_at":"2023-10-24T16:28:31Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for updating the patch, LGTM.  There were some failures in `TestLeaderInstallSnapshot`, but I see it passed in your fork.  Has this test been flaky before?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777599206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777665533","html_url":"https://github.com/apache/ratis/pull/947#issuecomment-1777665533","issue_url":"https://api.github.com/repos/apache/ratis/issues/947","id":1777665533,"node_id":"IC_kwDOBMxbGc5p9QX9","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T17:06:09Z","updated_at":"2023-10-24T17:06:09Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , it may be related to the change of 4KB data to 4MB in the test since the test setSnapshotChunkSizeMax to 1KB.  Let's revert it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777665533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777963707","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1777963707","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1777963707,"node_id":"IC_kwDOBMxbGc5p-ZK7","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T20:11:46Z","updated_at":"2023-10-24T20:11:46Z","author_association":"CONTRIBUTOR","body":"> How about just restarting the crashed new peer, ...\r\n\r\nRestarting is a good workaround.  However, it needs someone (a human or a program) to monitor it.  Otherwise, the cluster becomes unavailable due to failing to elect a leader.\r\n\r\nIf we timeout the setConf, then the cluster can recover automatically.\r\n\r\n> 2. Simplifying configuration change behaviors to only 'add 1 peer' and 'remove 1 peer'.\r\n\r\nMove generally, we should allow changing a minority set of peers in one setCont command, except for setConf from 1 peer to 2 peers.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1777963707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1779496126","html_url":"https://github.com/apache/ratis/pull/952#issuecomment-1779496126","issue_url":"https://api.github.com/repos/apache/ratis/issues/952","id":1779496126,"node_id":"IC_kwDOBMxbGc5qEPS-","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T15:08:24Z","updated_at":"2023-10-25T15:08:24Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1779496126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1779502004","html_url":"https://github.com/apache/ratis/pull/948#issuecomment-1779502004","issue_url":"https://api.github.com/repos/apache/ratis/issues/948","id":1779502004,"node_id":"IC_kwDOBMxbGc5qEQu0","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T15:10:21Z","updated_at":"2023-10-25T15:10:21Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1779502004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780028983","html_url":"https://github.com/apache/ratis/pull/947#issuecomment-1780028983","issue_url":"https://api.github.com/repos/apache/ratis/issues/947","id":1780028983,"node_id":"IC_kwDOBMxbGc5qGRY3","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T20:46:30Z","updated_at":"2023-10-25T20:46:30Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780028983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780073616","html_url":"https://github.com/apache/ratis/pull/942#issuecomment-1780073616","issue_url":"https://api.github.com/repos/apache/ratis/issues/942","id":1780073616,"node_id":"IC_kwDOBMxbGc5qGcSQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T21:21:03Z","updated_at":"2023-10-25T21:21:03Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , moved all the replied callId handling to `RaftClientImpl` and any calls can include replied callIds.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780073616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780279576","html_url":"https://github.com/apache/ratis/pull/945#issuecomment-1780279576","issue_url":"https://api.github.com/repos/apache/ratis/issues/945","id":1780279576,"node_id":"IC_kwDOBMxbGc5qHOkY","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T01:34:06Z","updated_at":"2023-10-26T01:34:06Z","author_association":"CONTRIBUTOR","body":"Thank you for the review and merge @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780279576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780324698","html_url":"https://github.com/apache/ratis/pull/941#issuecomment-1780324698","issue_url":"https://api.github.com/repos/apache/ratis/issues/941","id":1780324698,"node_id":"IC_kwDOBMxbGc5qHZla","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T02:37:27Z","updated_at":"2023-10-26T02:37:27Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo @SzyWilliam a lot for your kindly help :)","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1780324698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1781154695","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1781154695","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1781154695,"node_id":"IC_kwDOBMxbGc5qKkOH","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T13:42:16Z","updated_at":"2023-10-26T13:42:16Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo your nice suggestion! Let me try to fix it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1781154695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1782685631","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1782685631","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1782685631,"node_id":"IC_kwDOBMxbGc5qQZ-_","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T10:34:39Z","updated_at":"2023-10-27T10:34:39Z","author_association":"CONTRIBUTOR","body":"The fix patch uploaded at https://github.com/apache/ratis/pull/954. @szetszwo please have a look when you have time, thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1782685631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1783214015","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1783214015","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1783214015,"node_id":"IC_kwDOBMxbGc5qSa-_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T16:44:56Z","updated_at":"2023-10-27T16:44:56Z","author_association":"CONTRIBUTOR","body":"@wojiaodoubao , thanks for working on the fix!  Will review it.\r\n\r\n> Move generally, we should allow changing a minority set of peers in one setCont command, except for setConf from 1 peer to 2 peers.\r\n\r\nFor removing peers, it seems okay to allow removing any number of peers.  The problem is only in adding or replacing peers.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1783214015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1784208441","html_url":"https://github.com/apache/ratis/pull/955#issuecomment-1784208441","issue_url":"https://api.github.com/repos/apache/ratis/issues/955","id":1784208441,"node_id":"IC_kwDOBMxbGc5qWNw5","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-29T19:49:19Z","updated_at":"2023-10-29T19:49:19Z","author_association":"CONTRIBUTOR","body":"Another way is to use `CompletableFuture` as below.  It may be easier to understand.\r\n```java\r\n    private static final AtomicReference<CompletableFuture<ReferenceCountedObject<EventLoopGroup>>> SHARED_WORKER_GROUP\r\n        = new AtomicReference<>();\r\n\r\n    static WorkerGroupGetter newInstance(RaftProperties properties) {\r\n      final boolean shared = NettyConfigKeys.DataStream.Client.workerGroupShare(properties);\r\n      if (shared) {\r\n        final CompletableFuture<ReferenceCountedObject<EventLoopGroup>> created = new CompletableFuture<>();\r\n        final CompletableFuture<ReferenceCountedObject<EventLoopGroup>> current\r\n            = SHARED_WORKER_GROUP.updateAndGet(g -> g != null ? g : created);\r\n        if (current == created) {\r\n          created.complete(ReferenceCountedObject.wrap(newWorkerGroup(properties)));\r\n        }\r\n        return new WorkerGroupGetter(current.join().retain()) {\r\n          @Override\r\n          void shutdownGracefully() {\r\n            final CompletableFuture<ReferenceCountedObject<EventLoopGroup>> returned\r\n                = SHARED_WORKER_GROUP.updateAndGet(previous -> {\r\n              Preconditions.assertSame(current, previous, \"SHARED_WORKER_GROUP\");\r\n              return previous.join().release() ? null : previous;\r\n            });\r\n            if (returned == null) {\r\n              workerGroup.shutdownGracefully();\r\n            }\r\n          }\r\n        };\r\n      } else {\r\n        return new WorkerGroupGetter(newWorkerGroup(properties));\r\n      }\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1784208441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1785230080","html_url":"https://github.com/apache/ratis/pull/955#issuecomment-1785230080","issue_url":"https://api.github.com/repos/apache/ratis/issues/955","id":1785230080,"node_id":"IC_kwDOBMxbGc5qaHMA","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T13:42:44Z","updated_at":"2023-10-30T13:45:18Z","author_association":"CONTRIBUTOR","body":"Thank you for the review and guidance @szetszwo.  \r\n\r\nI have updated it using the `CompletableFuture` version for easier unedrstanding, but found that Datastream tests regression that threw this error:\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to get StreamInfo for DataStreamRequestByteBuf:clientId=client-FF2407A774AC,type=STREAM_DATA,id=0,offset=75998,length=607\r\n\tat org.apache.ratis.netty.server.DataStreamManagement.lambda$readImpl$11(DataStreamManagement.java:467)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:408)\r\n\tat org.apache.ratis.netty.server.DataStreamManagement.readImpl(DataStreamManagement.java:466)\r\n\tat org.apache.ratis.netty.server.DataStreamManagement.read(DataStreamManagement.java:433)\r\n\tat org.apache.ratis.netty.server.NettyServerStreamRpc$1.channelRead(NettyServerStreamRpc.java:236)\r\n``` \r\n\r\nFrom my understanding, it might be because `STREAM_HEADER` was not sent, before the `STREAM_DATA` was received. I will try to resolve this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1785230080/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1785767736","html_url":"https://github.com/apache/ratis/pull/955#issuecomment-1785767736","issue_url":"https://api.github.com/repos/apache/ratis/issues/955","id":1785767736,"node_id":"IC_kwDOBMxbGc5qcKc4","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T17:59:12Z","updated_at":"2023-10-30T17:59:12Z","author_association":"CONTRIBUTOR","body":"> ...  it might be because STREAM_HEADER was not sent, before the STREAM_DATA was received.  ...\r\n\r\n@ivandika3 , when reviewing this, I found that we also have used `AtomicReference`/`ConcurrentHashMap` incorrectly in some other case; filed RATIS-1923.\r\n\r\nIf you could find some other bugs, please also file a JIRA.  Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1785767736/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786030508","html_url":"https://github.com/apache/ratis/pull/953#issuecomment-1786030508","issue_url":"https://api.github.com/repos/apache/ratis/issues/953","id":1786030508,"node_id":"IC_kwDOBMxbGc5qdKms","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T20:59:13Z","updated_at":"2023-10-30T20:59:13Z","author_association":"CONTRIBUTOR","body":"Hit the NPE fixed by RATIS-1920 in my test.  Will sync with the master branch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786030508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786293230","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1786293230","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1786293230,"node_id":"IC_kwDOBMxbGc5qeKvu","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T01:30:56Z","updated_at":"2023-10-31T01:30:56Z","author_association":"CONTRIBUTOR","body":"Hi @szetszwo, could you kindly help to take a review when you have time, thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786293230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786410540","html_url":"https://github.com/apache/ratis/pull/942#issuecomment-1786410540","issue_url":"https://api.github.com/repos/apache/ratis/issues/942","id":1786410540,"node_id":"IC_kwDOBMxbGc5qenYs","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T04:10:30Z","updated_at":"2023-10-31T04:10:30Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786410540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786424208","html_url":"https://github.com/apache/ratis/pull/953#issuecomment-1786424208","issue_url":"https://api.github.com/repos/apache/ratis/issues/953","id":1786424208,"node_id":"IC_kwDOBMxbGc5qequQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T04:23:45Z","updated_at":"2023-10-31T04:23:45Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1786424208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1788929477","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1788929477","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1788929477,"node_id":"IC_kwDOBMxbGc5qoOXF","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T13:10:13Z","updated_at":"2023-11-01T13:10:41Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo your nice comments ! Upload v0.7 to trigger workflow. Some unit tests will fail after v0.7. Waiting the workflow to tell me which are they.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1788929477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789296758","html_url":"https://github.com/apache/ratis/pull/958#issuecomment-1789296758","issue_url":"https://api.github.com/repos/apache/ratis/issues/958","id":1789296758,"node_id":"IC_kwDOBMxbGc5qpoB2","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T16:45:39Z","updated_at":"2023-11-01T16:45:39Z","author_association":"CONTRIBUTOR","body":"I wonder if it is more efficient to use `synchronized` to implement `ReadIndexQueue` than `ConcurrentSkipListMap`?\r\n```java\r\n  static class ReadIndexQueue {\r\n    private final TimeoutExecutor scheduler = TimeoutExecutor.getInstance();\r\n    private final NavigableMap<Long, CompletableFuture<Long>> sorted = new TreeMap<>();\r\n    private final TimeDuration readTimeout;\r\n\r\n    ReadIndexQueue(TimeDuration readTimeout) {\r\n      this.readTimeout = readTimeout;\r\n    }\r\n\r\n    CompletableFuture<Long> add(long readIndex) {\r\n      final CompletableFuture<Long> returned;\r\n      final boolean create;\r\n      synchronized (this) {\r\n        // The same as computeIfAbsent except that it also tells if a new value is created.\r\n        final CompletableFuture<Long> existing = sorted.get(readIndex);\r\n        create = existing == null;\r\n        if (create) {\r\n          returned = new CompletableFuture<>();\r\n          sorted.put(readIndex, returned);\r\n        } else {\r\n          returned = existing;\r\n        }\r\n      }\r\n\r\n      if (create) {\r\n        scheduler.onTimeout(readTimeout, () -> handleTimeout(readIndex),\r\n            LOG, () -> \"Failed to handle read timeout for index \" + readIndex);\r\n      }\r\n      return returned;\r\n    }\r\n\r\n    private void handleTimeout(long readIndex) {\r\n      final CompletableFuture<Long> removed;\r\n      synchronized (this) {\r\n        removed = sorted.remove(readIndex);\r\n      }\r\n      if (removed == null) {\r\n        return;\r\n      }\r\n      removed.completeExceptionally(new ReadException(\"Read timeout \" + readTimeout + \" for index \" + readIndex));\r\n    }\r\n\r\n\r\n    /** Complete all the entries less than or equal to the given applied index. */\r\n    synchronized void complete(Long appliedIndex) {\r\n      final NavigableMap<Long, CompletableFuture<Long>> headMap = sorted.headMap(appliedIndex, true);\r\n      headMap.values().forEach(f -> f.complete(appliedIndex));\r\n      headMap.clear();\r\n    }\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789296758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789387699","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1789387699","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1789387699,"node_id":"IC_kwDOBMxbGc5qp-Oz","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T17:44:35Z","updated_at":"2023-11-01T17:44:35Z","author_association":"CONTRIBUTOR","body":"@wojiaodoubao , there are quite a few tests need to be updated due the new restriction on setConf.  Could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789387699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789430482","html_url":"https://github.com/apache/ratis/pull/955#issuecomment-1789430482","issue_url":"https://api.github.com/repos/apache/ratis/issues/955","id":1789430482,"node_id":"IC_kwDOBMxbGc5qqIrS","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T18:15:15Z","updated_at":"2023-11-01T18:15:43Z","author_association":"CONTRIBUTOR","body":"`TestNettyDataStreamStarTopologyWithGrpcCluster` and `TestNettyDataStreamChainTopologyWithGrpcCluster` have failed with timeout in quite a few attempts.  It may be related to changing the default of WORKER_GROUP_SHARE_KEY since these tests created quite many streams.  We may need to either disable it in the tests or increase the workerGroupSize.\r\n\r\n@ivandika3 , could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789430482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789937288","html_url":"https://github.com/apache/ratis/pull/956#issuecomment-1789937288","issue_url":"https://api.github.com/repos/apache/ratis/issues/956","id":1789937288,"node_id":"IC_kwDOBMxbGc5qsEaI","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T01:53:10Z","updated_at":"2023-11-02T01:53:10Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo work on this,  LGTM\r\n\r\n`The update methods in AtomicReference run in a loop and may call the update function multiple time. The old values created by the update function may be discarded without cleaning up` \r\n\r\nYes, this issue does occur when reconnecting multiple times quickly.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789937288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789999555","html_url":"https://github.com/apache/ratis/pull/956#issuecomment-1789999555","issue_url":"https://api.github.com/repos/apache/ratis/issues/956","id":1789999555,"node_id":"IC_kwDOBMxbGc5qsTnD","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T03:17:04Z","updated_at":"2023-11-02T03:17:04Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1789999555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791116424","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1791116424","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1791116424,"node_id":"IC_kwDOBMxbGc5qwkSI","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T16:55:59Z","updated_at":"2023-11-02T16:55:59Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , there are some conflicts.  Could you fix them?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791116424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791844251","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1791844251","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1791844251,"node_id":"IC_kwDOBMxbGc5qzV-b","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T03:13:20Z","updated_at":"2023-11-03T03:15:12Z","author_association":"CONTRIBUTOR","body":"The failed case is TestInstallSnapshotNotificationWithGrpc#testInstallSnapshotDuringBootstrap. It expected 2 times of 'installSnapshot' after 'setConfiguration', but got 3 times. I failed to reproduce the failure on my local environment. Upload v0.9 based on CheckedConsumer. Re-trigger workflow to see whether the failed case occurs repeatedly.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791844251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791969529","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1791969529","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1791969529,"node_id":"IC_kwDOBMxbGc5qz0j5","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T07:07:47Z","updated_at":"2023-11-03T07:07:47Z","author_association":"CONTRIBUTOR","body":"In TestInstallSnapshotNotificationWithGrpc#testInstallSnapshotDuringBootstrap, the setConfiguration is separated into 2 rpc calls. Add peer s1 first, then peer s2. \r\n\r\nThe s2 will be notified twice of install snapshot event. I think it doesn't break the semantic of notifyInstallSnapshot. Let me quote from GrpcLogAppender#shouldNotifyToInstallSnapshot.\r\n> Every follower should try to install at least one snapshot during bootstrapping, if available.\r\n\r\nThe GrpcLogAppender keeps notifyInstallSnapshot to the bootstrapping follower again and again. So install snapshot twice does happen. Changing the assert condition to 2 <= numSnapshotRequests.get() should be fine.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1791969529/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793120639","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1793120639","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1793120639,"node_id":"IC_kwDOBMxbGc5q4Nl_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T21:23:03Z","updated_at":"2023-11-03T21:23:03Z","author_association":"CONTRIBUTOR","body":"> Since it is not safe, let's don't allow it even for ` SET_UNCONDITIONALLY`.\r\n\r\nOn a second thought, it is good to have a server conf to enable/disable the restriction since it is more efficient to change \r\n- form 1-node to 3-node by one command \r\n\r\nthan\r\n- from 1-node to 2-node and 2-node to 3-node by two commands.\r\n\r\nFor changing from non-HA to HA, it usually is an one time thing and the admin will monitor it.  The split brain problem can be ignored.\r\n\r\n@wojiaodoubao , what do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793120639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793353423","html_url":"https://github.com/apache/ratis/pull/955#issuecomment-1793353423","issue_url":"https://api.github.com/repos/apache/ratis/issues/955","id":1793353423,"node_id":"IC_kwDOBMxbGc5q5GbP","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-04T05:54:54Z","updated_at":"2023-11-04T07:16:59Z","author_association":"CONTRIBUTOR","body":"Hi @szetszwo , thank you for the suggestions. I have increased the worker group size to 100 (taken from https://github.com/szetszwo/ozone-benchmark/blob/master/benchmark-conf.xml).\r\n\r\nTestNettyDataStreamChainTopologyWithGrpcCluster 400x: https://github.com/ivandika3/ratis/actions/runs/6752427405\r\n\r\nEdit: We might want to use a fixed value for the worker group instead of depending on the number of processors.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793353423/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793795102","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1793795102","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1793795102,"node_id":"IC_kwDOBMxbGc5q6yQe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-05T17:16:10Z","updated_at":"2023-11-05T17:16:10Z","author_association":"CONTRIBUTOR","body":"Filed RATIS-1930.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793795102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812002","html_url":"https://github.com/apache/ratis/pull/911#issuecomment-1793812002","issue_url":"https://api.github.com/repos/apache/ratis/issues/911","id":1793812002,"node_id":"IC_kwDOBMxbGc5q62Yi","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-05T18:33:19Z","updated_at":"2023-11-05T18:33:19Z","author_association":"CONTRIBUTOR","body":"Closing this since the problem is already fixed.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812284","html_url":"https://github.com/apache/ratis/pull/943#issuecomment-1793812284","issue_url":"https://api.github.com/repos/apache/ratis/issues/943","id":1793812284,"node_id":"IC_kwDOBMxbGc5q62c8","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-05T18:34:45Z","updated_at":"2023-11-05T18:34:45Z","author_association":"CONTRIBUTOR","body":"Closing this since #954 is merged.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812912","html_url":"https://github.com/apache/ratis/pull/838#issuecomment-1793812912","issue_url":"https://api.github.com/repos/apache/ratis/issues/838","id":1793812912,"node_id":"IC_kwDOBMxbGc5q62mw","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-05T18:37:55Z","updated_at":"2023-11-05T18:37:55Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793812912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793996147","html_url":"https://github.com/apache/ratis/pull/961#issuecomment-1793996147","issue_url":"https://api.github.com/repos/apache/ratis/issues/961","id":1793996147,"node_id":"IC_kwDOBMxbGc5q7jVz","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-06T02:38:32Z","updated_at":"2023-11-06T02:38:32Z","author_association":"CONTRIBUTOR","body":"+1 LGTM.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793996147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793996264","html_url":"https://github.com/apache/ratis/pull/954#issuecomment-1793996264","issue_url":"https://api.github.com/repos/apache/ratis/issues/954","id":1793996264,"node_id":"IC_kwDOBMxbGc5q7jXo","user":{"login":"wojiaodoubao","id":16864967,"node_id":"MDQ6VXNlcjE2ODY0OTY3","avatar_url":"https://avatars.githubusercontent.com/u/16864967?v=4","gravatar_id":"","url":"https://api.github.com/users/wojiaodoubao","html_url":"https://github.com/wojiaodoubao","followers_url":"https://api.github.com/users/wojiaodoubao/followers","following_url":"https://api.github.com/users/wojiaodoubao/following{/other_user}","gists_url":"https://api.github.com/users/wojiaodoubao/gists{/gist_id}","starred_url":"https://api.github.com/users/wojiaodoubao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wojiaodoubao/subscriptions","organizations_url":"https://api.github.com/users/wojiaodoubao/orgs","repos_url":"https://api.github.com/users/wojiaodoubao/repos","events_url":"https://api.github.com/users/wojiaodoubao/events{/privacy}","received_events_url":"https://api.github.com/users/wojiaodoubao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-06T02:38:41Z","updated_at":"2023-11-06T02:38:41Z","author_association":"CONTRIBUTOR","body":"Thanks a lot for @szetszwo's kindly help.\r\n\r\n> On a second thought, it is good to have a server conf to enable/disable the restriction since it is more efficient to change\r\n> * form 1-node to 3-node by one command\r\n> than\r\n> * from 1-node to 2-node and 2-node to 3-node by two commands.\r\n\r\nI totally agree. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1793996264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797118201","html_url":"https://github.com/apache/ratis/pull/960#issuecomment-1797118201","issue_url":"https://api.github.com/repos/apache/ratis/issues/960","id":1797118201,"node_id":"IC_kwDOBMxbGc5rHdj5","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T01:18:07Z","updated_at":"2023-11-07T01:18:07Z","author_association":"MEMBER","body":"@adoroszlai Thanks for reviewing this and releasing the staging repository!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797118201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797131215","html_url":"https://github.com/apache/ratis/pull/962#issuecomment-1797131215","issue_url":"https://api.github.com/repos/apache/ratis/issues/962","id":1797131215,"node_id":"IC_kwDOBMxbGc5rHgvP","user":{"login":"duongkame","id":17348547,"node_id":"MDQ6VXNlcjE3MzQ4NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/17348547?v=4","gravatar_id":"","url":"https://api.github.com/users/duongkame","html_url":"https://github.com/duongkame","followers_url":"https://api.github.com/users/duongkame/followers","following_url":"https://api.github.com/users/duongkame/following{/other_user}","gists_url":"https://api.github.com/users/duongkame/gists{/gist_id}","starred_url":"https://api.github.com/users/duongkame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/duongkame/subscriptions","organizations_url":"https://api.github.com/users/duongkame/orgs","repos_url":"https://api.github.com/users/duongkame/repos","events_url":"https://api.github.com/users/duongkame/events{/privacy}","received_events_url":"https://api.github.com/users/duongkame/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T01:36:06Z","updated_at":"2023-11-07T01:36:06Z","author_association":"CONTRIBUTOR","body":"cc. @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797131215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797132280","html_url":"https://github.com/apache/ratis/pull/958#issuecomment-1797132280","issue_url":"https://api.github.com/repos/apache/ratis/issues/958","id":1797132280,"node_id":"IC_kwDOBMxbGc5rHg_4","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T01:36:59Z","updated_at":"2023-11-07T01:36:59Z","author_association":"MEMBER","body":"> BTW, I recently found that atomic operations (e.g. AtomicReference/ConcurrentMap) required side-effect-free function; see [RATIS-1923](https://issues.apache.org/jira/browse/RATIS-1923). In ReadIndexQueue.add(..), the MemoizedSupplier may be initialized a future but then discarded by sorted.computeIfAbsent(..) since it keeps retrying in a loop. We may fixed it by creating the future in advance\r\n\r\nThanks for the explaination! Now I knows why we should use a side-effect-free function!\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797132280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797190637","html_url":"https://github.com/apache/ratis/pull/958#issuecomment-1797190637","issue_url":"https://api.github.com/repos/apache/ratis/issues/958","id":1797190637,"node_id":"IC_kwDOBMxbGc5rHvPt","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T02:20:36Z","updated_at":"2023-11-07T02:20:36Z","author_association":"MEMBER","body":"> I wonder if it is more efficient to use synchronized to implement ReadIndexQueue than ConcurrentSkipListMap?\r\n\r\nThanks very much for the patch! Indeed we should complete the future actively.\r\n\r\nAdditionally, I conducted an in-depth analysis of 'ConcurrentSkipListMap' and the synchronized 'TreeMap.' Both data structures have search, insert, and remove operations with a time complexity of O(logN). When removing multiple entries in `complete`, 'TreeMap' requires 2O(logN) + k operations (since it only needs to identify the ceiling and flooring entry), while 'ConcurrentSkipListMap' demands kO(logN) operations (as it loops over all the matching indexes in between). In terms of synchronization, synchronized 'TreeMap' uses locks, while 'ConcurrentSkipListMap' heavily relies on CAS operations with spinning.\r\n\r\nIn conclusion, synchronized 'TreeMap' demonstrates better performance under heavy loads and offers higher throughput, which is typical for Ratis read situations. On the other hand, 'ConcurrentSkipListMap' excels in terms of latency performance.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797190637/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797334904","html_url":"https://github.com/apache/ratis/pull/958#issuecomment-1797334904","issue_url":"https://api.github.com/repos/apache/ratis/issues/958","id":1797334904,"node_id":"IC_kwDOBMxbGc5rISd4","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T02:42:20Z","updated_at":"2023-11-07T02:42:20Z","author_association":"MEMBER","body":"@szetszwo Applied corresponding changes on code. PTAL~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797334904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797831119","html_url":"https://github.com/apache/ratis/pull/961#issuecomment-1797831119","issue_url":"https://api.github.com/repos/apache/ratis/issues/961","id":1797831119,"node_id":"IC_kwDOBMxbGc5rKLnP","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T05:06:25Z","updated_at":"2023-11-07T05:06:25Z","author_association":"CONTRIBUTOR","body":"Thanks @wojiaodoubao  and @SzyWilliam for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797831119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797832637","html_url":"https://github.com/apache/ratis/pull/959#issuecomment-1797832637","issue_url":"https://api.github.com/repos/apache/ratis/issues/959","id":1797832637,"node_id":"IC_kwDOBMxbGc5rKL-9","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T05:08:31Z","updated_at":"2023-11-07T05:08:31Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797832637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797837958","html_url":"https://github.com/apache/ratis/pull/958#issuecomment-1797837958","issue_url":"https://api.github.com/repos/apache/ratis/issues/958","id":1797837958,"node_id":"IC_kwDOBMxbGc5rKNSG","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T05:15:53Z","updated_at":"2023-11-07T05:15:53Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for researching the `ConcurrentSkipListMap` and the synchronized `TreeMap`!  I have learned a lot.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797837958/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797917035","html_url":"https://github.com/apache/ratis/pull/962#issuecomment-1797917035","issue_url":"https://api.github.com/repos/apache/ratis/issues/962","id":1797917035,"node_id":"IC_kwDOBMxbGc5rKglr","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T06:54:56Z","updated_at":"2023-11-07T06:54:56Z","author_association":"CONTRIBUTOR","body":"Although these util classes are not yet used, it is going to be very useful later on.  Let's merge them first and change other components to use it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1797917035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1806066745","html_url":"https://github.com/apache/ratis/pull/963#issuecomment-1806066745","issue_url":"https://api.github.com/repos/apache/ratis/issues/963","id":1806066745,"node_id":"IC_kwDOBMxbGc5rpmQ5","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T16:44:07Z","updated_at":"2023-11-10T16:44:07Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1806066745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1809723052","html_url":"https://github.com/apache/ratis/pull/946#issuecomment-1809723052","issue_url":"https://api.github.com/repos/apache/ratis/issues/946","id":1809723052,"node_id":"IC_kwDOBMxbGc5r3i6s","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T08:14:09Z","updated_at":"2023-11-14T08:14:09Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1809723052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810678110","html_url":"https://github.com/apache/ratis/pull/965#issuecomment-1810678110","issue_url":"https://api.github.com/repos/apache/ratis/issues/965","id":1810678110,"node_id":"IC_kwDOBMxbGc5r7MFe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T16:49:18Z","updated_at":"2023-11-14T16:49:18Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , you are right.  These files should also be removed.\r\n\r\n@adoroszlai , could you also review this?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810678110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810747301","html_url":"https://github.com/apache/ratis/pull/964#issuecomment-1810747301","issue_url":"https://api.github.com/repos/apache/ratis/issues/964","id":1810747301,"node_id":"IC_kwDOBMxbGc5r7c-l","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T17:23:07Z","updated_at":"2023-11-14T17:23:07Z","author_association":"CONTRIBUTOR","body":"> ... While avoiding one internal heap copy operation, we are now facing an additional direct memory to heap copy operation. \r\n\r\nYes, this change avoids\r\n- one copy (i.e. one heap read and one heap write)\r\n- one more heap read for crc\r\n\r\nbut adds\r\n- one direct buffer read for crc\r\n\r\n> Maybe we can found a way to compute checksum directly on LogEntryProto, since it's a heap object?\r\n\r\nThis is a good suggestion!  Let me see if there is a way to do it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810747301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810907619","html_url":"https://github.com/apache/ratis/pull/965#issuecomment-1810907619","issue_url":"https://api.github.com/repos/apache/ratis/issues/965","id":1810907619,"node_id":"IC_kwDOBMxbGc5r8EHj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T18:35:28Z","updated_at":"2023-11-14T18:35:28Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for the suggestions!  Pushed a commit addressing them.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810907619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810937926","html_url":"https://github.com/apache/ratis/pull/966#issuecomment-1810937926","issue_url":"https://api.github.com/repos/apache/ratis/issues/966","id":1810937926,"node_id":"IC_kwDOBMxbGc5r8LhG","user":{"login":"duongkame","id":17348547,"node_id":"MDQ6VXNlcjE3MzQ4NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/17348547?v=4","gravatar_id":"","url":"https://api.github.com/users/duongkame","html_url":"https://github.com/duongkame","followers_url":"https://api.github.com/users/duongkame/followers","following_url":"https://api.github.com/users/duongkame/following{/other_user}","gists_url":"https://api.github.com/users/duongkame/gists{/gist_id}","starred_url":"https://api.github.com/users/duongkame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/duongkame/subscriptions","organizations_url":"https://api.github.com/users/duongkame/orgs","repos_url":"https://api.github.com/users/duongkame/repos","events_url":"https://api.github.com/users/duongkame/events{/privacy}","received_events_url":"https://api.github.com/users/duongkame/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T18:48:24Z","updated_at":"2023-11-14T18:48:24Z","author_association":"CONTRIBUTOR","body":"@szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1810937926/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811082275","html_url":"https://github.com/apache/ratis/pull/964#issuecomment-1811082275","issue_url":"https://api.github.com/repos/apache/ratis/issues/964","id":1811082275,"node_id":"IC_kwDOBMxbGc5r8uwj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T19:43:03Z","updated_at":"2023-11-14T19:43:03Z","author_association":"CONTRIBUTOR","body":"> ... Let me see if there is a way to do it.\r\n\r\nOne idea (similar to `DigestOutputStream`) is to create a new class `CrcByteBuffer` extending `ByteBuffer`.  When ever something is written to it, it will update CRC.  Then, it avoid reading from the buffer.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811082275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811140318","html_url":"https://github.com/apache/ratis/pull/965#issuecomment-1811140318","issue_url":"https://api.github.com/repos/apache/ratis/issues/965","id":1811140318,"node_id":"IC_kwDOBMxbGc5r887e","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T20:02:41Z","updated_at":"2023-11-14T20:02:41Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the patch, @SzyWilliam for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811140318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811487337","html_url":"https://github.com/apache/ratis/pull/964#issuecomment-1811487337","issue_url":"https://api.github.com/repos/apache/ratis/issues/964","id":1811487337,"node_id":"IC_kwDOBMxbGc5r-Rpp","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T22:23:45Z","updated_at":"2023-11-14T22:23:45Z","author_association":"CONTRIBUTOR","body":"> ... create a new class `CrcByteBuffer` extending `ByteBuffer`.\r\n\r\nSince there are package private method `CrcByteBuffer` have to be in `java.nio`. Everything seems to work until getting\r\n- java.lang.SecurityException: Prohibited package name: java.nio\r\n\r\nwhen running unit tests.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1811487337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1812421695","html_url":"https://github.com/apache/ratis/pull/964#issuecomment-1812421695","issue_url":"https://api.github.com/repos/apache/ratis/issues/964","id":1812421695,"node_id":"IC_kwDOBMxbGc5sB1w_","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T12:05:17Z","updated_at":"2023-11-15T12:05:17Z","author_association":"MEMBER","body":"> We may use getLong(..) to reduce the number of calls.\r\n\r\nYou are right! getLong() seems good enough to amortize one index validation to 8 bytes.\r\n\r\n> Since there are package private method CrcByteBuffer have to be in java.nio. Everything seems to work until getting\r\njava.lang.SecurityException: Prohibited package name: java.nio\r\n\r\nThanks for taking time on this exploration! That's really unfortunate, we are almost there. Still, I think getLong is good enough!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1812421695/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1813674365","html_url":"https://github.com/apache/ratis/pull/964#issuecomment-1813674365","issue_url":"https://api.github.com/repos/apache/ratis/issues/964","id":1813674365,"node_id":"IC_kwDOBMxbGc5sGnl9","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T02:13:15Z","updated_at":"2023-11-16T02:13:15Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing this and the suggestions!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1813674365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1818973223","html_url":"https://github.com/apache/ratis/pull/968#issuecomment-1818973223","issue_url":"https://api.github.com/repos/apache/ratis/issues/968","id":1818973223,"node_id":"IC_kwDOBMxbGc5sa1Qn","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T12:27:32Z","updated_at":"2023-11-20T12:27:32Z","author_association":"CONTRIBUTOR","body":"ci passed: https://github.com/guohao-rosicky/ratis/actions/runs/6925486435","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1818973223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822033459","html_url":"https://github.com/apache/ratis/pull/969#issuecomment-1822033459","issue_url":"https://api.github.com/repos/apache/ratis/issues/969","id":1822033459,"node_id":"IC_kwDOBMxbGc5smgYz","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T03:29:53Z","updated_at":"2023-11-22T03:29:53Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing this PR!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822033459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822092574","html_url":"https://github.com/apache/ratis/pull/969#issuecomment-1822092574","issue_url":"https://api.github.com/repos/apache/ratis/issues/969","id":1822092574,"node_id":"IC_kwDOBMxbGc5smu0e","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T04:21:32Z","updated_at":"2023-11-22T04:21:32Z","author_association":"CONTRIBUTOR","body":"Please also push the source.  :)\r\n\r\nBTW, we should have pull requests for merging to `asf-site-source`.  Once the source has been merged, we may generate `asf-site` and push it without another PR.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822092574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822136818","html_url":"https://github.com/apache/ratis/pull/969#issuecomment-1822136818","issue_url":"https://api.github.com/repos/apache/ratis/issues/969","id":1822136818,"node_id":"IC_kwDOBMxbGc5sm5ny","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T05:27:02Z","updated_at":"2023-11-22T05:27:02Z","author_association":"MEMBER","body":"> BTW, we should have pull requests for merging to asf-site-source. Once the source has been merged, we may generate asf-site and push it without another PR.\r\n\r\nThanks for telling me the best-practice of asf-site! I was wondering before why we need both asf-site-source and asf-site and now I learned why. I'll update the asf-site-source and generate the website next time.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1822136818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1831062894","html_url":"https://github.com/apache/ratis/pull/971#issuecomment-1831062894","issue_url":"https://api.github.com/repos/apache/ratis/issues/971","id":1831062894,"node_id":"IC_kwDOBMxbGc5tI81u","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T01:49:43Z","updated_at":"2023-11-29T01:49:43Z","author_association":"CONTRIBUTOR","body":"@duongkame , @SzyWilliam , thanks a lots for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1831062894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1831065117","html_url":"https://github.com/apache/ratis/pull/972#issuecomment-1831065117","issue_url":"https://api.github.com/repos/apache/ratis/issues/972","id":1831065117,"node_id":"IC_kwDOBMxbGc5tI9Yd","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T01:52:30Z","updated_at":"2023-11-29T01:52:30Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1831065117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1832520547","html_url":"https://github.com/apache/ratis/pull/974#issuecomment-1832520547","issue_url":"https://api.github.com/repos/apache/ratis/issues/974","id":1832520547,"node_id":"IC_kwDOBMxbGc5tOgtj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T18:59:32Z","updated_at":"2023-11-29T18:59:32Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1832520547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1835395001","html_url":"https://github.com/apache/ratis/pull/973#issuecomment-1835395001","issue_url":"https://api.github.com/repos/apache/ratis/issues/973","id":1835395001,"node_id":"IC_kwDOBMxbGc5tZee5","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T03:24:39Z","updated_at":"2023-12-01T03:24:39Z","author_association":"MEMBER","body":"@szetszwo You are right! The change looks simple and elegant! Thanks very much for the suggestions! There're always surprises when reading the Ratis source code ;)\r\n\r\nBTW, I think we need to throw a `ReadIndexException` instead of `NotLeaderException` to be compatible with original client side. Let me just wrap the `nle` with a `ReadIndexException`","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1835395001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1835425565","html_url":"https://github.com/apache/ratis/pull/975#issuecomment-1835425565","issue_url":"https://api.github.com/repos/apache/ratis/issues/975","id":1835425565,"node_id":"IC_kwDOBMxbGc5tZl8d","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T04:09:44Z","updated_at":"2023-12-01T04:09:44Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lots for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1835425565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1836497769","html_url":"https://github.com/apache/ratis/pull/976#issuecomment-1836497769","issue_url":"https://api.github.com/repos/apache/ratis/issues/976","id":1836497769,"node_id":"IC_kwDOBMxbGc5tdrtp","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T17:24:04Z","updated_at":"2023-12-01T17:24:04Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1836497769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837411748","html_url":"https://github.com/apache/ratis/pull/977#issuecomment-1837411748","issue_url":"https://api.github.com/repos/apache/ratis/issues/977","id":1837411748,"node_id":"IC_kwDOBMxbGc5thK2k","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-03T08:45:02Z","updated_at":"2023-12-03T08:51:56Z","author_association":"CONTRIBUTOR","body":"@szetszwo thanks for updating the patch.\r\n\r\nAlthough CI says \"All checks have passed\", it also says `unit (server)` was skipped.  Actually it was not skipped, but could not be completed due to `No space left on device`, both in PR and fork runs:\r\n\r\nhttps://github.com/apache/ratis/actions/runs/7073614362/job/19253756489?pr=977\r\nhttps://github.com/szetszwo/ratis/actions/runs/7073613972/job/19253755570\r\n\r\nIf we change the new `TRACE` log level setting back to `INFO`, `TestNettyDataStreamChainTopologyWithGrpcCluster` simply times out.  So disk gets full due to verbose logs because the test runs unexpectedly long, but the failure is not caused by the log level.\r\n\r\nEven at `INFO` level logs get huge (> 1GB) due to thousands of `Failed to send DataStreamRequest` messages with stack trace.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837411748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837413424","html_url":"https://github.com/apache/ratis/pull/978#issuecomment-1837413424","issue_url":"https://api.github.com/repos/apache/ratis/issues/978","id":1837413424,"node_id":"IC_kwDOBMxbGc5thLQw","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-03T08:52:54Z","updated_at":"2023-12-03T08:52:54Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837413424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837413462","html_url":"https://github.com/apache/ratis/pull/979#issuecomment-1837413462","issue_url":"https://api.github.com/repos/apache/ratis/issues/979","id":1837413462,"node_id":"IC_kwDOBMxbGc5thLRW","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-03T08:53:02Z","updated_at":"2023-12-03T08:53:02Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837413462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837875168","html_url":"https://github.com/apache/ratis/pull/977#issuecomment-1837875168","issue_url":"https://api.github.com/repos/apache/ratis/issues/977","id":1837875168,"node_id":"IC_kwDOBMxbGc5ti7_g","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T05:36:05Z","updated_at":"2023-12-04T05:36:05Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky would you like to review?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1837875168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1839458022","html_url":"https://github.com/apache/ratis/pull/977#issuecomment-1839458022","issue_url":"https://api.github.com/repos/apache/ratis/issues/977","id":1839458022,"node_id":"IC_kwDOBMxbGc5to-bm","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T20:52:49Z","updated_at":"2023-12-04T20:52:49Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing and testing this!\r\n\r\n@guohao-rosicky , please feel free to review/test this change.  We could file follow up JIRAs if you find anything.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1839458022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1845651085","html_url":"https://github.com/apache/ratis/pull/980#issuecomment-1845651085","issue_url":"https://api.github.com/repos/apache/ratis/issues/980","id":1845651085,"node_id":"IC_kwDOBMxbGc5uAmaN","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T16:26:10Z","updated_at":"2023-12-07T16:26:10Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1845651085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1846198128","html_url":"https://github.com/apache/ratis/pull/981#issuecomment-1846198128","issue_url":"https://api.github.com/repos/apache/ratis/issues/981","id":1846198128,"node_id":"IC_kwDOBMxbGc5uCr9w","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T22:20:13Z","updated_at":"2023-12-07T22:20:13Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1846198128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1847197041","html_url":"https://github.com/apache/ratis/pull/977#issuecomment-1847197041","issue_url":"https://api.github.com/repos/apache/ratis/issues/977","id":1847197041,"node_id":"IC_kwDOBMxbGc5uGf1x","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-08T13:53:12Z","updated_at":"2023-12-08T13:53:12Z","author_association":"CONTRIBUTOR","body":"sure.\r\n> @guohao-rosicky , please feel free to review/test this change. We could file follow up JIRAs if you find anything.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1847197041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1848887558","html_url":"https://github.com/apache/ratis/pull/982#issuecomment-1848887558","issue_url":"https://api.github.com/repos/apache/ratis/issues/982","id":1848887558,"node_id":"IC_kwDOBMxbGc5uM8kG","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-10T07:59:24Z","updated_at":"2023-12-10T07:59:24Z","author_association":"CONTRIBUTOR","body":"Thansk @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1848887558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1848888078","html_url":"https://github.com/apache/ratis/pull/983#issuecomment-1848888078","issue_url":"https://api.github.com/repos/apache/ratis/issues/983","id":1848888078,"node_id":"IC_kwDOBMxbGc5uM8sO","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-10T08:02:03Z","updated_at":"2023-12-10T08:02:03Z","author_association":"CONTRIBUTOR","body":"Thansk @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1848888078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850606142","html_url":"https://github.com/apache/ratis/pull/985#issuecomment-1850606142","issue_url":"https://api.github.com/repos/apache/ratis/issues/985","id":1850606142,"node_id":"IC_kwDOBMxbGc5uTgI-","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-11T18:05:38Z","updated_at":"2023-12-11T18:05:38Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks for working on this!  When generating the summary, could we delete the dirs for the successful cases.  E.g.  only Iteration 5 failed below.  It should delete all dirs except for `iteration5`.\r\n```\r\nresult-TestMultiRaftGroup-split-1$cat summary.txt \r\nIteration 1 exit code: 0\r\nIteration 2 exit code: 0\r\nIteration 3 exit code: 0\r\nIteration 4 exit code: 0\r\nIteration 5 exit code: 1\r\nIteration 6 exit code: 0\r\nIteration 7 exit code: 0\r\nIteration 8 exit code: 0\r\nIteration 9 exit code: 0\r\nIteration 10 exit code: 0\r\nresult-TestMultiRaftGroup-split-1$ls -l\r\ntotal 8\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration1\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration10\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration2\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration3\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration4\r\ndrwxr-xr-x@ 8 szetszwo  staff  256 Dec 11 10:02 iteration5\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration6\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration7\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration8\r\ndrwxr-xr-x@ 5 szetszwo  staff  160 Dec 11 10:01 iteration9\r\n-rw-r--r--@ 1 szetszwo  staff  251 Dec 11  2023 summary.txt\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850606142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850635253","html_url":"https://github.com/apache/ratis/pull/984#issuecomment-1850635253","issue_url":"https://api.github.com/repos/apache/ratis/issues/984","id":1850635253,"node_id":"IC_kwDOBMxbGc5uTnP1","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-11T18:23:26Z","updated_at":"2023-12-11T18:23:26Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850635253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850816265","html_url":"https://github.com/apache/ratis/pull/985#issuecomment-1850816265","issue_url":"https://api.github.com/repos/apache/ratis/issues/985","id":1850816265,"node_id":"IC_kwDOBMxbGc5uUTcJ","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-11T20:15:21Z","updated_at":"2023-12-11T20:15:36Z","author_association":"CONTRIBUTOR","body":"> could we delete the dirs for the successful cases\r\n\r\nGood idea, done.\r\n\r\nhttps://github.com/adoroszlai/ratis/actions/runs/7172529326","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850816265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850903276","html_url":"https://github.com/apache/ratis/pull/985#issuecomment-1850903276","issue_url":"https://api.github.com/repos/apache/ratis/issues/985","id":1850903276,"node_id":"IC_kwDOBMxbGc5uUors","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-11T21:18:09Z","updated_at":"2023-12-11T21:18:09Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1850903276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1851041806","html_url":"https://github.com/apache/ratis/pull/986#issuecomment-1851041806","issue_url":"https://api.github.com/repos/apache/ratis/issues/986","id":1851041806,"node_id":"IC_kwDOBMxbGc5uVKgO","user":{"login":"duongkame","id":17348547,"node_id":"MDQ6VXNlcjE3MzQ4NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/17348547?v=4","gravatar_id":"","url":"https://api.github.com/users/duongkame","html_url":"https://github.com/duongkame","followers_url":"https://api.github.com/users/duongkame/followers","following_url":"https://api.github.com/users/duongkame/following{/other_user}","gists_url":"https://api.github.com/users/duongkame/gists{/gist_id}","starred_url":"https://api.github.com/users/duongkame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/duongkame/subscriptions","organizations_url":"https://api.github.com/users/duongkame/orgs","repos_url":"https://api.github.com/users/duongkame/repos","events_url":"https://api.github.com/users/duongkame/events{/privacy}","received_events_url":"https://api.github.com/users/duongkame/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-11T23:10:58Z","updated_at":"2023-12-11T23:11:15Z","author_association":"CONTRIBUTOR","body":"@szetszwo Can you have a look?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1851041806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1851188698","html_url":"https://github.com/apache/ratis/pull/983#issuecomment-1851188698","issue_url":"https://api.github.com/repos/apache/ratis/issues/983","id":1851188698,"node_id":"IC_kwDOBMxbGc5uVuXa","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T02:06:48Z","updated_at":"2023-12-12T02:06:48Z","author_association":"MEMBER","body":"Cool catch!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1851188698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1852803604","html_url":"https://github.com/apache/ratis/pull/986#issuecomment-1852803604","issue_url":"https://api.github.com/repos/apache/ratis/issues/986","id":1852803604,"node_id":"IC_kwDOBMxbGc5ub4oU","user":{"login":"duongkame","id":17348547,"node_id":"MDQ6VXNlcjE3MzQ4NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/17348547?v=4","gravatar_id":"","url":"https://api.github.com/users/duongkame","html_url":"https://github.com/duongkame","followers_url":"https://api.github.com/users/duongkame/followers","following_url":"https://api.github.com/users/duongkame/following{/other_user}","gists_url":"https://api.github.com/users/duongkame/gists{/gist_id}","starred_url":"https://api.github.com/users/duongkame/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/duongkame/subscriptions","organizations_url":"https://api.github.com/users/duongkame/orgs","repos_url":"https://api.github.com/users/duongkame/repos","events_url":"https://api.github.com/users/duongkame/events{/privacy}","received_events_url":"https://api.github.com/users/duongkame/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T20:59:55Z","updated_at":"2023-12-12T20:59:55Z","author_association":"CONTRIBUTOR","body":"Looks like the failing tests, e.g. `TestRetryCacheWithGrpc#testInvalidateRepliedCalls`, are not very stable even on master. \r\nhttps://github.com/apache/ratis/actions/runs/7154641770/job/19482398792\r\nhttps://github.com/apache/ratis/actions/runs/7134031896/job/19427982131\r\nWhat should we do about it? @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1852803604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853261790","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1853261790","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1853261790,"node_id":"IC_kwDOBMxbGc5udofe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T04:44:27Z","updated_at":"2023-12-13T04:44:27Z","author_association":"CONTRIBUTOR","body":"Since `testWithLoadAsync` fails, it probably needs the else.  Sorry that the code was long time ago.  I might not remember the details.  It may be related to failover to another server (i.e. leader change).","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853261790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853295835","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1853295835","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1853295835,"node_id":"IC_kwDOBMxbGc5udwzb","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T05:32:33Z","updated_at":"2023-12-13T05:32:33Z","author_association":"CONTRIBUTOR","body":"Yes, seems the variables are reset on exceptions. I will try to dive deeper, if needed, I'll close the PR then.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853295835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853342701","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1853342701","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1853342701,"node_id":"IC_kwDOBMxbGc5ud8Pt","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T06:31:41Z","updated_at":"2023-12-13T06:31:41Z","author_association":"CONTRIBUTOR","body":"@symious , I recall now -- when there is a failover, there could possibly be multiple calls needed to be retried.  Since the retires are async, some other calls can be retried before the first call.\r\n\r\nIn short, client calls are always in order but retries may be out of order.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853342701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853511025","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1853511025","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1853511025,"node_id":"IC_kwDOBMxbGc5uelVx","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T08:58:51Z","updated_at":"2023-12-13T08:58:51Z","author_association":"CONTRIBUTOR","body":"@szetszwo The error seems caused by repeating resets on the slidingWindow, could you help to check? ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1853511025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854561348","html_url":"https://github.com/apache/ratis/pull/988#issuecomment-1854561348","issue_url":"https://api.github.com/repos/apache/ratis/issues/988","id":1854561348,"node_id":"IC_kwDOBMxbGc5uilxE","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T19:14:45Z","updated_at":"2023-12-13T19:14:45Z","author_association":"CONTRIBUTOR","body":"Oops, keep getting `BX_UNBOXING_IMMEDIATELY_REBOXED`.  It looks like a false positive.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854561348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854576933","html_url":"https://github.com/apache/ratis/pull/993#issuecomment-1854576933","issue_url":"https://api.github.com/repos/apache/ratis/issues/993","id":1854576933,"node_id":"IC_kwDOBMxbGc5uipkl","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T19:26:47Z","updated_at":"2023-12-13T19:26:47Z","author_association":"CONTRIBUTOR","body":"@nandakumar131 , thanks a lot for working on JUnit5 migration!  For the dependencies, let's add them when they are needed (i.e. add them with the tests).  We minimize the dependencies because Ratis is a library.  We should make it easier to be consumed.\r\n\r\nFor JUnit5 migration, we may start with ratis-common since it only has a few tests.  It can show how the migration works.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854576933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854629354","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1854629354","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1854629354,"node_id":"IC_kwDOBMxbGc5ui2Xq","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T20:07:19Z","updated_at":"2023-12-13T20:07:19Z","author_association":"CONTRIBUTOR","body":"> The error seems caused by repeating resets on the slidingWindow, ...\r\n\r\nWhere is the code?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854629354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854999331","html_url":"https://github.com/apache/ratis/pull/989#issuecomment-1854999331","issue_url":"https://api.github.com/repos/apache/ratis/issues/989","id":1854999331,"node_id":"IC_kwDOBMxbGc5ukQsj","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T02:12:42Z","updated_at":"2023-12-14T02:12:42Z","author_association":"CONTRIBUTOR","body":"> repeating reset.\r\n\r\nhttps://github.com/apache/ratis/blob/cedcd2ad4cd2da13230aaa0d15678e5aee9b0729/ratis-client/src/main/java/org/apache/ratis/client/impl/OrderedAsync.java#L257C61-L257C61\r\n\r\nSteps:\r\n1. Client send 100 async requests to server, here firstReplied is true\r\n2. Leader changed, 100 requests replied with exceptions, trying to reset the slidingWindow.\r\n3. Say the requests id are [100, 199], client receives \"id100\" and and reset the slidingWindow, firstReplied changed to false.\r\n4. Client retry on \"id100\" and receives the reply, so set firstReplied to true.\r\n5. Client then receives other requests' exception reply from Step2, then reset the slidingWindow again, but the connection is ok now, no need to reset again.\r\n\r\n@szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1854999331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]