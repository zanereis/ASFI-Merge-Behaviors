[{"url":"https://api.github.com/repos/apache/helix/issues/comments/698813254","html_url":"https://github.com/apache/helix/issues/1375#issuecomment-698813254","issue_url":"https://api.github.com/repos/apache/helix/issues/1375","id":698813254,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODgxMzI1NA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T09:00:36Z","updated_at":"2020-09-25T09:00:36Z","author_association":"CONTRIBUTOR","body":"Batch does not seem to work.\r\nLOG 248\r\n\r\n>2020-09-25T08:39:42.3648213Z [ERROR] Tests run: 1205, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 5,091.712 s <<< FAILURE! - in TestSuite\r\n2020-09-25T08:39:42.3687116Z [ERROR] testNamedQueue(org.apache.helix.integration.task.TestTaskRebalancer)  Time elapsed: 600.886 s  <<< FAILURE!\r\n2020-09-25T08:39:42.3688699Z org.apache.helix.HelixException: Workflow \"testNamedQueue\" context is null or job \"testNamedQueue_slaveJob\" is not in states: [COMPLETED]\r\n2020-09-25T08:39:42.3690598Z \tat org.apache.helix.integration.task.TestTaskRebalancer.testNamedQueue(TestTaskRebalancer.java:248)\r\n2020-09-25T08:39:42.3691857Z \r\n2020-09-25T08:39:42.7668652Z [ERROR] Failures: \r\n2020-09-25T08:39:42.7674874Z [ERROR]   TestTaskRebalancer.testNamedQueue:248 » Helix Workflow \"testNamedQueue\" contex...\r\n2020-09-25T08:39:42.7679307Z","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/698813254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/698818604","html_url":"https://github.com/apache/helix/issues/1374#issuecomment-698818604","issue_url":"https://api.github.com/repos/apache/helix/issues/1374","id":698818604,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODgxODYwNA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T09:11:33Z","updated_at":"2020-09-25T09:11:33Z","author_association":"CONTRIBUTOR","body":"enlarge waiting time does not work\r\n\r\nLOG 1501\r\n\r\n>2020-09-25T08:38:01.7996107Z [ERROR] Tests run: 1205, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 4,733.556 s <<< FAILURE! - in TestSuite\r\n2020-09-25T08:38:01.7998096Z [ERROR] testAutoRebalance(org.apache.helix.integration.rebalancer.TestAutoRebalance)  Time elapsed: 301.695 s  <<< FAILURE!\r\n2020-09-25T08:38:01.7999504Z java.lang.AssertionError: expected:<true> but was:<false>\r\n2020-09-25T08:38:01.8001197Z \tat org.apache.helix.integration.rebalancer.TestAutoRebalance.testAutoRebalance(TestAutoRebalance.java:186)\r\n2020-09-25T08:38:01.8002651Z \r\n2020-09-25T08:38:02.1984857Z [ERROR] Failures: \r\n2020-09-25T08:38:02.1988718Z [ERROR]   TestAutoRebalance.testAutoRebalance:186 expected:<true> but was:<false>\r\n2020-09-25T08:38:02.1993000Z [ERROR] Tests run: 1205, Failures: 1, Errors: 0, Skipped: 1\r\n\r\n>020-09-25T07:47:25.4292432Z START TestAutoRebalance at Fri Sep 25 07:47:25 UTC 2020\r\n2020-09-25T07:47:25.4830146Z 1688836 [ZkClient-EventThread-38417-localhost:2183] ERROR org.apache.helix.zookeeper.zkclient.callback.ZkAsyncCallbacks  - Interrupted waiting for success\r\n2020-09-25T07:47:25.4832019Z java.lang.InterruptedException\r\n2020-09-25T07:47:25.4833088Z \tat java.lang.Object.wait(Native Method)\r\n2020-09-25T07:47:25.4833976Z \tat java.lang.Object.wait(Object.java:502)\r\n2020-09-25T07:47:25.4836459Z \tat org.apache.helix.zookeeper.zkclient.callback.ZkAsyncCallbacks$DefaultCallback.waitForSuccess(ZkAsyncCallbacks.java:220)\r\n2020-09-25T07:47:25.4839410Z \tat org.apache.helix.zookeeper.zkclient.ZkClient.issueSync(ZkClient.java:1308)\r\n2020-09-25T07:47:25.4841174Z \tat org.apache.helix.zookeeper.zkclient.ZkClient.access$300(ZkClient.java:83)\r\n2020-09-25T07:47:25.4842916Z \tat org.apache.helix.zookeeper.zkclient.ZkClient$4.run(ZkClient.java:1334)\r\n2020-09-25T07:47:25.4844292Z \tat org.apache.helix.zookeeper.zkclient.ZkEventThread.run(ZkEventThread.java:99)\r\n2020-09-25T07:47:28.7393028Z true: wait 7ms, org.apache.helix.integration.rebalancer.TestAutoRebalance$ExternalViewBalancedVerifier@53a84ff4\r\n2020-09-25T07:47:28.7394873Z START TestAutoRebalance testAutoRebalance at Fri Sep 25 07:47:28 UTC 2020\r\n2020-09-25T07:47:28.8840849Z true: wait 140ms, org.apache.helix.integration.rebalancer.TestAutoRebalance$ExternalViewBalancedVerifier@6127b13c\r\n2020-09-25T07:52:30.4192196Z false: org.apache.helix.integration.rebalancer.TestAutoRebalance$ExternalViewBalancedVerifier@f2c267a: wait 300057ms to verify\r\n2020-09-25T07:52:30.4348593Z END TestAutoRebalance testAutoRebalance at Fri Sep 25 07:52:30 UTC 2020, took: 301692ms.\r\n2020-09-25T07:52:30.4349741Z START TestAutoRebalance testDropResourceAutoRebalance at Fri Sep 25 07:52:30 UTC 2020\r\n2020-09-25T07:52:31.4914022Z true: wait 28ms, org.apache.helix.integration.rebalancer.TestAutoRebalance$ExternalViewBalancedVerifier@213c36b4\r\n2020-09-25T07:52:32.5078882Z verifyEmptyCurStateAndExtView: wait 1000ms to verify  (true)\r\n2020-09-25T07:52:32.7238571Z true: wait 203ms, org.apache.helix.integration.rebalancer.TestAutoRebalance$ExternalViewBalancedVerifier@6ec6d6d8\r\n2020-09-25T07:52:33.7370656Z verifyEmptyCurStateAndExtView: wait 1000ms to verify  (true)\r\n2020-09-25T07:52:33.7396615Z END TestAutoRebalance testDropResourceAutoRebalance at Fri Sep 25 07:52:33 UTC 2020, took: 3306ms.\r\n2020-09-25T07:52:33.7515529Z AfterClass: TestAutoRebalance of ZkStandAloneCMTestBase called\r\n2020-09-25T07:52:33.8497807Z END TestAutoRebalance at Fri Sep 25 07:52:33 UTC 2020\r\n2020-09-25T07:52:33.8501550Z AfterClass:TestAutoRebalance afterclass of ZkTestBase called!\r\n2020-09-25T07:52:33.8502195Z ************ SYSTEM Physical Memory:7292203008\r\n2020-09-25T07:52:33.8502654Z ************ total memory:4090 free memory:2615\r\n2020-09-25T07:52:33.8503143Z TestAutoRebalance has active threads cnt:868","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/698818604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699077706","html_url":"https://github.com/apache/helix/issues/1407#issuecomment-699077706","issue_url":"https://api.github.com/repos/apache/helix/issues/1407","id":699077706,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA3NzcwNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T18:13:22Z","updated_at":"2020-09-25T18:13:22Z","author_association":"CONTRIBUTOR","body":"```\r\n  /**\r\n   * This test does NOT allow multiple jobs being assigned to an instance.\r\n   * @throws InterruptedException\r\n   */\r\n  @Test\r\n  public void testMultipleJobAssignment() throws InterruptedException {\r\n    _runCounts.clear();\r\n    failTask = false;\r\n    String workflowName = TestHelper.getTestMethodName();\r\n    Workflow.Builder workflowBuilder = new Workflow.Builder(workflowName);\r\n\r\n    for (int i = 0; i < 20; i++) {\r\n      List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\r\n      taskConfigs.add(new TaskConfig(\"TaskOne\", new HashMap<>()));\r\n      JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\r\n          .addTaskConfigs(taskConfigs).setJobCommandConfigMap(_jobCommandMap);\r\n      workflowBuilder.addJob(\"JOB\" + i, jobBuilder);\r\n    }\r\n\r\n    _driver.start(workflowBuilder.build());\r\n    _driver.pollForWorkflowState(workflowName, TaskState.COMPLETED);\r\n\r\n    Assert.assertEquals(_runCounts.size(), 5);\r\n  }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699077706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699079309","html_url":"https://github.com/apache/helix/issues/1407#issuecomment-699079309","issue_url":"https://api.github.com/repos/apache/helix/issues/1407","id":699079309,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA3OTMwOQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T18:16:35Z","updated_at":"2020-09-25T18:16:35Z","author_association":"CONTRIBUTOR","body":"20 job over 5 instances, but is it possible that not all instance get job assigned?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699079309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699106532","html_url":"https://github.com/apache/helix/pull/1295#issuecomment-699106532","issue_url":"https://api.github.com/repos/apache/helix/issues/1295","id":699106532,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTEwNjUzMg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T19:13:40Z","updated_at":"2020-09-25T19:13:40Z","author_association":"CONTRIBUTOR","body":"@kaisun2000 you can rerun the test job in Github UI. There is no need to touch code for a re-run.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699106532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699134667","html_url":"https://github.com/apache/helix/pull/1409#issuecomment-699134667","issue_url":"https://api.github.com/repos/apache/helix/issues/1409","id":699134667,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTEzNDY2Nw==","user":{"login":"mgao0","id":31704180,"node_id":"MDQ6VXNlcjMxNzA0MTgw","avatar_url":"https://avatars.githubusercontent.com/u/31704180?v=4","gravatar_id":"","url":"https://api.github.com/users/mgao0","html_url":"https://github.com/mgao0","followers_url":"https://api.github.com/users/mgao0/followers","following_url":"https://api.github.com/users/mgao0/following{/other_user}","gists_url":"https://api.github.com/users/mgao0/gists{/gist_id}","starred_url":"https://api.github.com/users/mgao0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgao0/subscriptions","organizations_url":"https://api.github.com/users/mgao0/orgs","repos_url":"https://api.github.com/users/mgao0/repos","events_url":"https://api.github.com/users/mgao0/events{/privacy}","received_events_url":"https://api.github.com/users/mgao0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T20:17:36Z","updated_at":"2020-09-25T21:19:10Z","author_association":"CONTRIBUTOR","body":"Looks good in general. One thing to note: right now you are using the lock path that user passes in directly in the builder. But in the long run, we want to use the LockScope because we would need to support complex lock hierarchies. Can you change the setLockPath to setLockScope?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699134667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699159312","html_url":"https://github.com/apache/helix/issues/1407#issuecomment-699159312","issue_url":"https://api.github.com/repos/apache/helix/issues/1407","id":699159312,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTE1OTMxMg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T21:16:27Z","updated_at":"2020-09-25T21:16:50Z","author_association":"CONTRIBUTOR","body":"Put a delay in task run; add dependency","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699159312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699162873","html_url":"https://github.com/apache/helix/issues/1406#issuecomment-699162873","issue_url":"https://api.github.com/repos/apache/helix/issues/1406","id":699162873,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTE2Mjg3Mw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T21:25:40Z","updated_at":"2020-09-25T21:25:40Z","author_association":"CONTRIBUTOR","body":"``` \r\n protected static boolean removeJob(HelixDataAccessor accessor,\r\n      HelixPropertyStore<ZNRecord> propertyStore, String job) {\r\n    if (!removeJobConfig(accessor, job)) {\r\n      LOG.warn(String.format(\"Error occurred while trying to remove job config for %s.\", job));\r\n      return false;\r\n    }\r\n    if (!cleanupJobIdealStateExtView(accessor, job)) {\r\n      LOG.warn(String.format(\r\n          \"Error occurred while trying to remove job idealstate/externalview for %s.\", job));\r\n      return false;\r\n    }\r\n    if (!removeJobContext(propertyStore, job)) {\r\n      LOG.warn(String.format(\"Error occurred while trying to remove job context for %s.\", job));\r\n      return false;\r\n    }\r\n    return true;\r\n```\r\n\r\ncontroller run may interfere with it. Retry force delete.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699162873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699168820","html_url":"https://github.com/apache/helix/issues/1375#issuecomment-699168820","issue_url":"https://api.github.com/repos/apache/helix/issues/1375","id":699168820,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTE2ODgyMA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T21:39:41Z","updated_at":"2020-09-25T21:41:35Z","author_association":"CONTRIBUTOR","body":"Enable debug log for only one test; run 50 times; more log in driver.poll()","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699168820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699175490","html_url":"https://github.com/apache/helix/issues/1372#issuecomment-699175490","issue_url":"https://api.github.com/repos/apache/helix/issues/1372","id":699175490,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTE3NTQ5MA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T21:58:17Z","updated_at":"2020-09-25T21:58:17Z","author_association":"CONTRIBUTOR","body":"50 times single run with debug.\r\n\r\n2000       JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(MockTask.TASK_COMMAND)\r\n          .setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\r\n          .setTargetPartitionStates(Sets.newHashSet(targetPartition))\r\n          .setJobCommandConfigMap(Collections.singletonMap(MockTask.JOB_DELAY, \"200\"));\r\n      String jobName = targetPartition.toLowerCase() + \"Job\" + i;\r\n      LOG.info(\"Enqueuing job: \" + jobName);\r\n      queueBuilder.enqueueJob(jobName, jobBuilder);\r\n      currentJobNames.add(i, jobName);","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699175490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699190365","html_url":"https://github.com/apache/helix/issues/1373#issuecomment-699190365","issue_url":"https://api.github.com/repos/apache/helix/issues/1373","id":699190365,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTE5MDM2NQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T22:33:04Z","updated_at":"2020-09-25T22:33:04Z","author_association":"CONTRIBUTOR","body":"same as #1406. \r\n\r\nroot cause clear now. Force deletion can race with controller and raise exception,","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699190365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699217128","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699217128","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699217128,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTIxNzEyOA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T23:34:14Z","updated_at":"2020-09-25T23:35:20Z","author_association":"CONTRIBUTOR","body":"> 020-09-25T07:32:34.9743253Z START TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Fri Sep 25 07:32:34 UTC 2020\r\n**2020-09-25T07:32:35.0858323Z 806312 [HelixController-pipeline-task-CLUSTER_TestTaskRebalancerParallel-(2bbe73bc_TASK)] ERROR org.apache.helix.task.AbstractTaskDispatcher  - The job config is missing for job testWhenAllowOverlapJobAssignment_job_2**\r\n**2020-09-25T07:32:40.0085596Z 811229 [TestNGInvoker-testWhenAllowOverlapJobAssignment()] ERROR org.apache.helix.integration.task.TaskTestUtil  - maxRunningCount=1, workflowConfig.isJobQueue()=true, maxRunningCount=1, workflowConfig.getParallelJobs()=2, stack trace [java.lang.Thread.getStackTrace(Thread.java:1559), org.apache.helix.integration.task.TaskTestUtil.pollForWorkflowParallelState(TaskTestUtil.java:185),** org.apache.helix.integration.task.TestTaskRebalancerParallel.testWhenAllowOverlapJobAssignment(TestTaskRebalancerParallel.java:124), sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method), sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62), sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43), java.lang.reflect.Method.invoke(Method.java:498), org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76), org.testng.internal.InvokeMethodRunnable.runOne(InvokeMethodRunnable.java:46), org.testng.internal.InvokeMethodRunnable.run(InvokeMethodRunnable.java:37), java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511), java.util.concurrent.FutureTask.run(FutureTask.java:266), java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149), java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624), java.lang.Thread.run(Thread.java:748)]\r\n2020-09-25T07:32:40.0116320Z END TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Fri Sep 25 07:32:40 UTC 2020, took: 5043ms.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699217128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699218017","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699218017","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699218017,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTIxODAxNw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T23:36:20Z","updated_at":"2020-09-25T23:36:20Z","author_association":"CONTRIBUTOR","body":"```\r\n    boolean retVal =  maxRunningCount > 1 && (workflowConfig.isJobQueue() ? maxRunningCount <= workflowConfig\r\n        .getParallelJobs() : true);\r\n    if (!retVal) {\r\n      logger.error(\"maxRunningCount={}, workflowConfig.isJobQueue()={}, maxRunningCount={}, workflowConfig.getParallelJobs()={}, stack trace {}\",\r\n          maxRunningCount, workflowConfig.isJobQueue(), maxRunningCount, workflowConfig.getParallelJobs(),\r\n          Arrays.asList(Thread.currentThread().getStackTrace()));\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699218017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699220430","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699220430","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699220430,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTIyMDQzMA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T23:41:46Z","updated_at":"2020-09-25T23:41:46Z","author_association":"CONTRIBUTOR","body":"  // 1. Different jobs in a same work flow is in RUNNING at the same time\r\n  // 2. When disallow overlap assignment, no two jobs in the same work flow is in RUNNING at the same instance\r\n  // Use this method with caution because it assumes workflow doesn't finish too quickly and number of parallel running\r\n  // tasks can be counted.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699220430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699236281","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699236281","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699236281,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTIzNjI4MQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T00:17:55Z","updated_at":"2020-09-26T00:17:55Z","author_association":"CONTRIBUTOR","body":"two points. \r\n\r\n1/ add some delay for the job \r\n2/ batch queue the two jobs.\r\n\r\nthe code is like this now:\r\n\r\n```\r\n    // Create jobs that can be assigned to any instances\r\n    List<JobConfig.Builder> jobConfigBuilders = new ArrayList<JobConfig.Builder>();\r\n    for (int i = 0; i < PARALLEL_COUNT; i++) {\r\n      List<TaskConfig> taskConfigs = new ArrayList<TaskConfig>();\r\n      for (int j = 0; j < TASK_COUNT; j++) {\r\n        taskConfigs.add(new TaskConfig.Builder()\r\n            .setTaskId(\"job_\" + (i + 1) + \"_task_\" + j)\r\n            .setCommand(MockTask.TASK_COMMAND)\r\n            .addConfig(MockTask.JOB_DELAY, \"2000\")\r\n            .build());\r\n      }\r\n      jobConfigBuilders.add(new JobConfig.Builder().addTaskConfigs(taskConfigs));\r\n    }\r\n\r\n    _driver.stop(queueName);\r\n    List<String> jobNames = new ArrayList<>();\r\n    for (int i = 0; i < jobConfigBuilders.size(); ++i) {\r\n      jobNames.add(\"job_\" + (i + 1));\r\n      //_driver.enqueueJob(queueName, \"job_\" + (i + 1), jobConfigBuilders.get(i));\r\n    }\r\n    _driver.enqueueJobs(queueName, jobNames, jobConfigBuilders);\r\n    _driver.resume(queueName);\r\n    Thread.sleep(2000);\r\n    Assert.assertTrue(TaskTestUtil.pollForWorkflowParallelState(_driver, queueName));\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699236281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699334297","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699334297","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699334297,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTMzNDI5Nw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T03:51:30Z","updated_at":"2020-09-26T03:51:30Z","author_association":"CONTRIBUTOR","body":"LOG 1605\r\n\r\n>2020-09-26T03:31:14.6435435Z [ERROR] Tests run: 1207, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 5,269.987 s <<< FAILURE! - in TestSuite\r\n2020-09-26T03:31:14.6447448Z [ERROR] stopAndDeleteQueue(org.apache.helix.integration.task.TestTaskRebalancerStopResume)  Time elapsed: 600.853 s  <<< FAILURE!\r\n2020-09-26T03:31:14.6459709Z org.apache.helix.HelixException: Workflow \"stopAndDeleteQueue\" context is null or job \"stopAndDeleteQueue_slaveJob\" is not in states: [COMPLETED]\r\n2020-09-26T03:31:14.6546658Z \tat org.apache.helix.integration.task.TestTaskRebalancerStopResume.stopAndDeleteQueue(TestTaskRebalancerStopResume.java:456)\r\n2020-09-26T03:31:14.6552113Z \r\n2020-09-26T03:31:15.0677866Z [ERROR] Failures: \r\n2020-09-26T03:31:15.0694994Z [ERROR]   TestTaskRebalancerStopResume.stopAndDeleteQueue:456 » Helix Workflow \"stopAndD...","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699334297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699338155","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699338155","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699338155,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTMzODE1NQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T03:54:26Z","updated_at":"2020-09-26T03:54:26Z","author_association":"CONTRIBUTOR","body":"1. enhance log to see what state job is or ctx is null\r\n```\r\n     if (ctx == null || !allowedStates.contains(ctx.getJobState(jobName))) {\r\n       throw new HelixException(\r\n-          String.format(\"Workflow \\\"%s\\\" context is null or job \\\"%s\\\" is not in states: %s\",\r\n-              workflowName, jobName, allowedStates));\r\n+          String.format(\"Workflow \\\"%s\\\" context is null or job \\\"%s\\\" is not in states: %s; ctx is %s, jobState is %s .\",\r\n+              workflowName, jobName, allowedStates, ctx == null ? \"null\" : ctx, ctx != null ? ctx.getJobState(jobName) : \"null\"));\r\n     }\r\n```\r\n\r\n2. don't let job finish too quickly.\r\n```\r\n    Set<String> slave = Sets.newHashSet(\"SLAVE\");\r\n    JobConfig.Builder job2 = new JobConfig.Builder().setCommand(MockTask.TASK_COMMAND)\r\n        .setJobCommandConfigMap(Collections.singletonMap(MockTask.JOB_DELAY, \"2000\"))\r\n        .setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB).setTargetPartitionStates(slave);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699338155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699433042","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699433042","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699433042,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQzMzA0Mg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T05:49:53Z","updated_at":"2020-09-26T05:50:37Z","author_association":"CONTRIBUTOR","body":"Still now working.\r\n\r\nLOG 1689\r\n\r\n>2020-09-26T04:28:38.1295285Z START TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Sat Sep 26 04:28:38 UTC 2020\r\n**2020-09-26T04:28:38.2308857Z 790783 [HelixController-pipeline-task-CLUSTER_TestTaskRebalancerParallel-(b20c967f_TASK)] ERROR org.apache.helix.task.AbstractTaskDispatcher  - The job config is missing for job testWhenAllowOverlapJobAssignment_job_2**\r\n2020-09-26T04:29:40.1296989Z 852674 [TestNGInvoker-testWhenAllowOverlapJobAssignment()] ERROR org.apache.helix.integration.task.TaskTestUtil  - maxRunningCount=1, workflowConfig.isJobQueue()=true, maxRunningCount=1, workflowConfig.getParallelJobs()=2, stack trace [java.lang.Thread.getStackTrace(Thread.java:1559), org.apache.helix.integration.task.TaskTestUtil.pollForWorkflowParallelState(TaskTestUtil.java:185), org.apache.helix.integration.task.TestTaskRebalancerParallel.testWhenAllowOverlapJobAssignment(TestTaskRebalancerParallel.java:130), sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method), sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62), sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43), java.lang.reflect.Method.invoke(Method.java:498), org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76), org.testng.internal.InvokeMethodRunnable.runOne(InvokeMethodRunnable.java:46), org.testng.internal.InvokeMethodRunnable.run(InvokeMethodRunnable.java:37), java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511), java.util.concurrent.FutureTask.run(FutureTask.java:266), java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149), java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624), java.lang.Thread.run(Thread.java:748)]\r\n2020-09-26T04:29:40.1362846Z END TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Sat Sep 26 04:29:40 UTC 2020, took: 62007ms.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699433042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699452166","html_url":"https://github.com/apache/helix/pull/1295#issuecomment-699452166","issue_url":"https://api.github.com/repos/apache/helix/issues/1295","id":699452166,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ1MjE2Ng==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T07:47:56Z","updated_at":"2020-09-26T07:47:56Z","author_association":"CONTRIBUTOR","body":"I've triggered rerun the workflow. \r\nFYI, @kaisun2000 This is a button for us to **Re-run jobs**.\r\n<img width=\"388\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5187721/94335637-c04f8880-ff91-11ea-8f56-2a7d70bfb6be.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699452166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699550264","html_url":"https://github.com/apache/helix/issues/1404#issuecomment-699550264","issue_url":"https://api.github.com/repos/apache/helix/issues/1404","id":699550264,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1MDI2NA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T21:30:02Z","updated_at":"2020-09-27T00:14:33Z","author_association":"CONTRIBUTOR","body":"LOG 1734\r\n\r\n>2020-09-26T07:51:37.7357007Z [ERROR] stopDeleteJobAndResumeNamedQueue(org.apache.helix.integration.task.TestTaskRebalancerStopResume)  Time elapsed: 650.685 s  <<< FAILURE!\r\n2020-09-26T07:51:37.7455981Z org.apache.helix.HelixException: Workflow \"stopDeleteJobAndResumeNamedQueue\" context is null or job \"stopDeleteJobAndResumeNamedQueue_slaveJob2_second\" is not in states: [COMPLETED]; ctx is ZnRecord=WorkflowContext, {NAME=stopDeleteJobAndResumeNamedQueue, START_TIME=1601104360465, **STATE=IN_PROGRESS**}{JOB_STATES={stopDeleteJobAndResumeNamedQueue_slaveJob1=COMPLETED, stopDeleteJobAndResumeNamedQueue_slaveJob3=COMPLETED, stopDeleteJobAndResumeNamedQueue_slaveJob4=COMPLETED}, StartTime={stopDeleteJobAndResumeNamedQueue_slaveJob1=1601104360757, stopDeleteJobAndResumeNamedQueue_slaveJob3=1601104377687, stopDeleteJobAndResumeNamedQueue_slaveJob4=1601104394366}}{}, Stat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}, jobState is null .\r\n2020-09-26T07:51:37.7472762Z \tat org.apache.helix.integration.task.TestTaskRebalancerStopResume.stopDeleteJobAndResumeNamedQueue(TestTaskRebalancerStopResume.java:255)\r\n2020-09-26T07:51:37.7476604Z \r\n2020-09-26T07:51:38.1533236Z [ERROR] Failures: \r\n2020-09-26T07:51:38.1535848Z [ERROR]   TestTaskRebalancerStopResume.stopDeleteJobAndResumeNamedQueue:255 » Helix Work...\r\n\r\ncode \r\n```\r\npublic TaskState pollForJobState(String workflowName, String jobName, long timeout,\r\n      TaskState... states) throws InterruptedException {\r\n    // Get workflow config\r\n    WorkflowConfig workflowConfig = getWorkflowConfig(workflowName);\r\n\r\n    if (workflowConfig == null) {\r\n      throw new HelixException(String.format(\"Workflow \\\"%s\\\" does not exists!\", workflowName));\r\n    }\r\n\r\n    long timeToSleep = timeout > 50L ? 50L : timeout;\r\n\r\n    WorkflowContext ctx;\r\n    if (workflowConfig.isRecurring()) {\r\n      // if it's recurring, need to reconstruct workflow and job name\r\n      do {\r\n        Thread.sleep(timeToSleep);\r\n        ctx = getWorkflowContext(workflowName);\r\n      } while ((ctx == null || ctx.getLastScheduledSingleWorkflow() == null));\r\n\r\n      jobName = jobName.substring(workflowName.length() + 1);\r\n      workflowName = ctx.getLastScheduledSingleWorkflow();\r\n    }\r\n\r\n    Set<TaskState> allowedStates = new HashSet<>(Arrays.asList(states));\r\n    // Wait for state\r\n    long st = System.currentTimeMillis();\r\n    do {\r\n      Thread.sleep(timeToSleep);\r\n      ctx = getWorkflowContext(workflowName);\r\n    } while ((ctx == null || ctx.getJobState(jobName) == null\r\n        || !allowedStates.contains(ctx.getJobState(jobName)))\r\n        && System.currentTimeMillis() < st + timeout);\r\n\r\n    if (ctx == null || !allowedStates.contains(ctx.getJobState(jobName))) {\r\n      throw new HelixException(\r\n          String.format(\"Workflow \\\"%s\\\" context is null or job \\\"%s\\\" is not in states: %s; ctx is %s, jobState is %s .\",\r\n              workflowName, jobName, allowedStates, ctx == null ? \"null\" : ctx, ctx != null ? ctx.getJobState(jobName) : \"null\"));\r\n    }\r\n\r\n    return ctx.getJobState(jobName);\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699550264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699551282","html_url":"https://github.com/apache/helix/issues/1418#issuecomment-699551282","issue_url":"https://api.github.com/repos/apache/helix/issues/1418","id":699551282,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1MTI4Mg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T21:41:10Z","updated_at":"2020-09-26T21:41:10Z","author_association":"CONTRIBUTOR","body":"code\r\n```\r\n   // start controller\r\n    String controllerName = CONTROLLER_PREFIX + \"_0\";\r\n    _controller = new ClusterControllerManager(ZK_ADDR, CLUSTER_NAME, controllerName);\r\n    _controller.syncStart();\r\n\r\n    Thread.sleep(1000);\r\n\r\n    // verify ideal state and external view\r\n    IdealState idealState = _accessor.getProperty(_keyBuilder.idealStates(DB_NAME));\r\n    Assert.assertNotNull(idealState);\r\n    Assert.assertEquals(idealState.getNumPartitions(), PARTITION_NUMBER);\r\n    for (String partition : idealState.getPartitionSet()) {\r\n      List<String> preferenceList = idealState.getPreferenceList(partition);\r\n      Assert.assertNotNull(preferenceList);\r\n      Assert.assertEquals(preferenceList.size(), REPLICA_NUMBER);\r\n    }\r\n\r\n    ExternalView externalView = _accessor.getProperty(_keyBuilder.externalView(DB_NAME));\r\n    Assert.assertNotNull(externalView);\r\n    Assert.assertEquals(externalView.getPartitionSet().size(), PARTITION_NUMBER);\r\n    for (String partition : externalView.getPartitionSet()) {\r\n      Map<String, String> stateMap = externalView.getStateMap(partition);\r\n      Assert.assertEquals(stateMap.size(), REPLICA_NUMBER);\r\n\r\n      int masters = 0;\r\n      for (String state : stateMap.values()) {\r\n        if (state.equals(MasterSlaveSMD.States.MASTER.name())) {\r\n          ++masters;\r\n        }\r\n      }\r\n      Assert.assertEquals(masters, 1);\r\n    }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699551282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699551358","html_url":"https://github.com/apache/helix/issues/1418#issuecomment-699551358","issue_url":"https://api.github.com/repos/apache/helix/issues/1418","id":699551358,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1MTM1OA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T21:42:07Z","updated_at":"2020-09-26T21:43:22Z","author_association":"CONTRIBUTOR","body":"Root cause: too old way to wait for cluster converge. 1000ms does not guarantee it.\r\n\r\nuse bestPossibleExternalViewVerifier","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699551358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699553683","html_url":"https://github.com/apache/helix/issues/1404#issuecomment-699553683","issue_url":"https://api.github.com/repos/apache/helix/issues/1404","id":699553683,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1MzY4Mw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T22:02:47Z","updated_at":"2020-09-26T22:02:47Z","author_association":"CONTRIBUTOR","body":"stopDeleteJobAndResumeNamedQueue_slaveJob2_second not in ctx in property store.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699553683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699559127","html_url":"https://github.com/apache/helix/pull/1398#issuecomment-699559127","issue_url":"https://api.github.com/repos/apache/helix/issues/1398","id":699559127,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1OTEyNw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T23:07:36Z","updated_at":"2020-09-26T23:07:36Z","author_association":"CONTRIBUTOR","body":"@alirezazamani , it looks from code  `private long _timeout = TaskConstants.DEFAULT_NEVER_TIMEOUT;` in JobBuilder. Wondering where does it set to 10ms?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699559127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699563372","html_url":"https://github.com/apache/helix/pull/1411#issuecomment-699563372","issue_url":"https://api.github.com/repos/apache/helix/issues/1411","id":699563372,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU2MzM3Mg==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T00:08:40Z","updated_at":"2020-09-27T00:08:40Z","author_association":"CONTRIBUTOR","body":"> ZNRecord rec = new ZNRecord(_currentStateDelta.getId());\r\n>  rec.getMapFields().put(partitionKey, null);\r\n>  ZNRecordDelta delta = new ZNRecordDelta(rec, MergeOperation.SUBTRACT);\r\n> \r\n>  List<ZNRecordDelta> deltaList = new ArrayList<ZNRecordDelta>();\r\n>  deltaList.add(delta);\r\n>  _currentStateDelta.setDeltaList(deltaList);\r\n\r\n@jiajunwang Thanks for the suggestion. Yeah, this works. I looked at this part too, but didn't realize that we can move it to customized state provider. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699563372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699564717","html_url":"https://github.com/apache/helix/issues/1404#issuecomment-699564717","issue_url":"https://api.github.com/repos/apache/helix/issues/1404","id":699564717,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU2NDcxNw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T00:24:22Z","updated_at":"2020-09-27T00:24:35Z","author_association":"CONTRIBUTOR","body":"Add even more information to dump job ctx and job cfg with wf cfg\r\n\r\n```\r\n    if (ctx == null || !allowedStates.contains(ctx.getJobState(jobName))) {\r\n      WorkflowConfig wfcfg = getWorkflowConfig(workflowName);\r\n      JobConfig jobConfig = getJobConfig(jobName);\r\n      JobContext jbCtx = getJobContext(jobName);\r\n      throw new HelixException(\r\n          String.format(\"Workflow \\\"%s\\\" context is null or job \\\"%s\\\" is not in states: %s; ctx is %s, jobState is %s, wf cfg %s, jobcfg %s, jbctx %s\",\r\n              workflowName, jobName, allowedStates,\r\n              ctx == null ? \"null\" : ctx, ctx != null ? ctx.getJobState(jobName) : \"null\",\r\n              wfcfg, jobConfig, jbCtx));\r\n    }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699564717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699573904","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699573904","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699573904,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU3MzkwNA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T02:15:39Z","updated_at":"2020-09-27T02:15:39Z","author_association":"CONTRIBUTOR","body":"LOG 1795\r\n\r\n>2020-09-27T02:06:47.8122232Z org.apache.helix.HelixException: Workflow \"stopAndDeleteQueue\" context is null or job \"stopAndDeleteQueue_slaveJob\" is not in states: [COMPLETED]; ctx is ZnRecord=WorkflowContext, {NAME=stopAndDeleteQueue, START_TIME=1601170046460, STATE=IN_PROGRESS}{JOB_STATES={stopAndDeleteQueue_masterJob=COMPLETED}, StartTime={stopAndDeleteQueue_masterJob=1601170046460}}{}, Stat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}, jobState is null, wf cfg ZnRecord=stopAndDeleteQueue, {AllowOverlapJobAssignment=false, Dag={\"allNodes\":[\"stopAndDeleteQueue_masterJob\"],\"childrenToParents\":{},\"parentsToChildren\":{}}, Expiry=120000, FailureThreshold=0, IsJobQueue=true, JobPurgeInterval=1800000, MONITORING_DISABLED=true, ParallelJobs=1, TargetState=START, Terminable=false, WorkflowID=stopAndDeleteQueue, capacity=2147483647}{JobTypes={}}{}, Stat=Stat {_version=3, _creationTime=1601170046441, _modifiedTime=1601170046511, _ephemeralOwner=0}, jobcfg null, jbctx null\r\n2020-09-27T02:06:47.8128562Z \tat org.apache.helix.integration.task.TestTaskRebalancerStopResume.stopAndDeleteQueue(TestTaskRebalancerStopResume.java:458)\r\n2020-09-27T02:06:47.8130823Z \r\n2020-09-27T02:06:48.2084063Z [ERROR] Failures: \r\n2020-09-27T02:06:48.2087741Z [ERROR]   TestTaskRebalancerStopResume.stopAndDeleteQueue:458 » Helix Workflow \"stopAndD...\r\n2020-09-27T02:06:48.2089226Z [ERROR] Tests run: 1207, Failures: 1, Errors: 0, Skipped: 1","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699573904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574199","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699574199","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699574199,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU3NDE5OQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T02:19:44Z","updated_at":"2020-09-27T02:19:44Z","author_association":"CONTRIBUTOR","body":"LOG 1793\r\n\r\n>2020-09-27T02:06:59.2960843Z [ERROR] stopAndDeleteQueue(org.apache.helix.integration.task.TestTaskRebalancerStopResume)  Time elapsed: 608.535 s  <<< FAILURE!\r\n2020-09-27T02:06:59.3100773Z org.apache.helix.HelixException: Workflow \"stopAndDeleteQueue\" context is null or job \"stopAndDeleteQueue_slaveJob\" is not in states: [COMPLETED]; ctx is ZnRecord=WorkflowContext, {NAME=stopAndDeleteQueue, START_TIME=1601170052753, STATE=IN_PROGRESS}{JOB_STATES={stopAndDeleteQueue_masterJob=COMPLETED}, StartTime={stopAndDeleteQueue_masterJob=1601170052753}}{}, Stat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}, jobState is null, wf cfg ZnRecord=stopAndDeleteQueue, {AllowOverlapJobAssignment=false, Dag={\"allNodes\":[\"stopAndDeleteQueue_masterJob\"],\"childrenToParents\":{},\"parentsToChildren\":{}}, Expiry=120000, FailureThreshold=0, IsJobQueue=true, JobPurgeInterval=1800000, MONITORING_DISABLED=true, ParallelJobs=1, TargetState=START, Terminable=false, WorkflowID=stopAndDeleteQueue, capacity=2147483647}{JobTypes={}}{}, Stat=Stat {_version=3, _creationTime=1601170052735, _modifiedTime=1601170052814, _ephemeralOwner=0}, jobcfg null, jbctx null\r\n2020-09-27T02:06:59.3115829Z \tat org.apache.helix.integration.task.TestTaskRebalancerStopResume.stopAndDeleteQueue(TestTaskRebalancerStopResume.java:458)\r\n2020-09-27T02:06:59.3119284Z \r\n2020-09-27T02:06:59.7060789Z [ERROR] Failures: \r\n2020-09-27T02:06:59.7064081Z [ERROR]   TestTaskRebalancerStopResume.stopAndDeleteQueue:458 » Helix Workflow \"stopAndD...","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574281","html_url":"https://github.com/apache/helix/issues/1370#issuecomment-699574281","issue_url":"https://api.github.com/repos/apache/helix/issues/1370","id":699574281,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU3NDI4MQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T02:20:47Z","updated_at":"2020-09-27T02:20:47Z","author_association":"CONTRIBUTOR","body":"@EverYoung124 That's also a valid solution. We'll consider that option at implementation time. Thanks for the input!","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574576","html_url":"https://github.com/apache/helix/issues/1283#issuecomment-699574576","issue_url":"https://api.github.com/repos/apache/helix/issues/1283","id":699574576,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU3NDU3Ng==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T02:24:04Z","updated_at":"2020-09-27T02:24:04Z","author_association":"CONTRIBUTOR","body":"LOG 1783\r\n\r\n>2020-09-27T00:50:37.6896172Z START TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Sun Sep 27 00:50:37 UTC 2020\r\n2020-09-27T00:50:37.8062579Z 810608 [HelixController-pipeline-task-CLUSTER_TestTaskRebalancerParallel-(1c5b8721_TASK)] ERROR org.apache.helix.task.AbstractTaskDispatcher  - The job config is missing for job testWhenAllowOverlapJobAssignment_job_2, with stacktrace [java.lang.Thread.getStackTrace(Thread.java:1559), org.apache.helix.task.AbstractTaskDispatcher.isJobReadyToSchedule(AbstractTaskDispatcher.java:1200), org.apache.helix.task.WorkflowDispatcher.scheduleJobs(WorkflowDispatcher.java:292), org.apache.helix.task.WorkflowDispatcher.assignWorkflow(WorkflowDispatcher.java:219), org.apache.helix.controller.stages.task.TaskSchedulingStage.scheduleWorkflows(TaskSchedulingStage.java:184), org.apache.helix.controller.stages.task.TaskSchedulingStage.compute(TaskSchedulingStage.java:101), org.apache.helix.controller.stages.task.TaskSchedulingStage.process(TaskSchedulingStage.java:89), org.apache.helix.controller.pipeline.Pipeline.handle(Pipeline.java:68), org.apache.helix.controller.GenericHelixController.handleEvent(GenericHelixController.java:777), org.apache.helix.controller.GenericHelixController.access$500(GenericHelixController.java:128), org.apache.helix.controller.GenericHelixController$ClusterEventProcessor.run(GenericHelixController.java:1407)]\r\n2020-09-27T00:51:40.1946166Z 872993 [TestNGInvoker-testWhenAllowOverlapJobAssignment()] ERROR org.apache.helix.integration.task.TaskTestUtil  - maxRunningCount=1, workflowConfig.isJobQueue()=true, maxRunningCount=1, workflowConfig.getParallelJobs()=2, stack trace [java.lang.Thread.getStackTrace(Thread.java:1559), org.apache.helix.integration.task.TaskTestUtil.pollForWorkflowParallelState(TaskTestUtil.java:185), org.apache.helix.integration.task.TestTaskRebalancerParallel.testWhenAllowOverlapJobAssignment(TestTaskRebalancerParallel.java:130), sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method), sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62), sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43), java.lang.reflect.Method.invoke(Method.java:498), org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76), org.testng.internal.InvokeMethodRunnable.runOne(InvokeMethodRunnable.java:46), org.testng.internal.InvokeMethodRunnable.run(InvokeMethodRunnable.java:37), java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511), java.util.concurrent.FutureTask.run(FutureTask.java:266), java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149), java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624), java.lang.Thread.run(Thread.java:748)]\r\n2020-09-27T00:51:40.2079962Z END TestTaskRebalancerParallel testWhenAllowOverlapJobAssignment at Sun Sep 27 00:51:40 UTC 2020, took: 62512ms.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699574576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699697897","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-699697897","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":699697897,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTY5Nzg5Nw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T22:45:44Z","updated_at":"2020-09-27T22:45:44Z","author_association":"CONTRIBUTOR","body":"```\r\n    // Modify using client A and client B will get notification.\r\n    sharedZkClientA.createPersistent(TEST_PATH, true);\r\n    Assert.assertTrue(TestHelper.verify(() -> notificationCountB[0] == 1, 1000));\r\n    Assert.assertEquals(notificationCountB[1], 0);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699697897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699697945","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-699697945","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":699697945,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTY5Nzk0NQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T22:46:12Z","updated_at":"2020-09-27T22:46:12Z","author_association":"CONTRIBUTOR","body":"use TestHelper.WAIT_DURATION","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699697945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699699145","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699699145","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699699145,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTY5OTE0NQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T22:59:09Z","updated_at":"2020-09-27T22:59:09Z","author_association":"CONTRIBUTOR","body":"The case is exactly the same as I can confirm from debugger. \r\nLOG 1843\r\n\r\n>2020-09-27T21:29:31.1669800Z END: WorkflowControllerDataProvider.refresh() for cluster CLUSTER_TestTaskRebalancerStopResume, pipleline TASK, Cache resrouce config Content:**{stopAndDeleteQueue_masterJob=ZnRecord=stopAndDeleteQueue_masterJob, {Command=Reindex, ConcurrentTasksPerInstance=1, DisableExternalView=false, Expiry=86400000, FailureThreshold=0, IgnoreDependentJobFailure=false, JobCommandConfig={\"Delay\":\"2000\"}, JobID=stopAndDeleteQueue_masterJob, MONITORING_DISABLED=true, MaxAttemptsPerTask=10, MaxForcedReassignmentsPerTask=10, RebalanceRunningTask=false, TargetPartitionStates=MASTER, TargetResource=TestDB, TimeoutPerPartition=3600000, WorkflowID=stopAndDeleteQueue}{}{},** Stat=Stat {_version=0, _creationTime=1601242170561, _modifiedTime=1601242170561, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted_masterJob0=ZnRecord=deleteJobFromRecurrentQueueNotStarted_masterJob0, {Command=Reindex, ConcurrentTasksPerInstance=1, DisableExternalView=false, Expiry=86400000, FailureThreshold=0, IgnoreDependentJobFailure=false, JobCommandConfig={\"Delay\":\"200\"}, JobID=deleteJobFromRecurrentQueueNotStarted_masterJob0, MONITORING_DISABLED=true, MaxAttemptsPerTask=10, MaxForcedReassignmentsPerTask=10, RebalanceRunningTask=false, TargetPartitionStates=MASTER, TargetResource=TestDB, TimeoutPerPartition=3600000, WorkflowID=deleteJobFromRecurrentQueueNotStarted}{}{}, Stat=Stat {_version=0, _creationTime=1601242166392, _modifiedTime=1601242166392, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0=ZnRecord=deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0, {Command=Reindex, ConcurrentTasksPerInstance=1, DisableExternalView=false, Expiry=86400000, FailureThreshold=0, IgnoreDependentJobFailure=false, JobCommandConfig={\"Delay\":\"200\"}, JobID=deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0, MONITORING_DISABLED=true, MaxAttemptsPerTask=10, MaxForcedReassignmentsPerTask=10, RebalanceRunningTask=false, TargetPartitionStates=MASTER, TargetResource=TestDB, TimeoutPerPartition=3600000, WorkflowID=deleteJobFromRecurrentQueueNotStarted_20200927T212926}{}{}, Stat=Stat {_version=0, _creationTime=1601242166409, _modifiedTime=1601242166409, _ephemeralOwner=0}, **stopAndDeleteQueue=ZnRecord=stopAndDeleteQueue, {AllowOverlapJobAssignment=false, Dag={\"allNodes\":[\"stopAndDeleteQueue_masterJob\",\"stopAndDeleteQueue_slaveJob\"],\"childrenToParents\":{\"stopAndDeleteQueue_slaveJob\":[\"stopAndDeleteQueue_masterJob\"]},\"parentsToChildren\":{\"stopAndDeleteQueue_masterJob\":[\"stopAndDeleteQueue_slaveJob\"]}}, Expiry=120000, FailureThreshold=0, IsJobQueue=true, JobPurgeInterval=1800000, MONITORING_DISABLED=true, ParallelJobs=1, TargetState=START, Terminable=false, WorkflowID=stopAndDeleteQueue,** capacity=2147483647}{JobTypes={}}{}, Stat=Stat {_version=2, _creationTime=1601242170547, _modifiedTime=1601242170572, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted=ZnRecord=deleteJobFromRecurrentQueueNotStarted, {AllowOverlapJobAssignment=false, Dag={\"allNodes\":[\"deleteJobFromRecurrentQueueNotStarted_masterJob0\",\"deleteJobFromRecurrentQueueNotStarted_slaveJob1\"],\"childrenToParents\":{\"deleteJobFromRecurrentQueueNotStarted_slaveJob1\":[\"deleteJobFromRecurrentQueueNotStarted_masterJob0\"]},\"parentsToChildren\":{\"deleteJobFromRecurrentQueueNotStarted_masterJob0\":[\"deleteJobFromRecurrentQueueNotStarted_slaveJob1\"]}}, Expiry=120000, FailureThreshold=0, IsJobQueue=true, JobPurgeInterval=1800000, MONITORING_DISABLED=true, ParallelJobs=1, RecurrenceInterval=60, RecurrenceUnit=SECONDS, StartTime=09-27-2020 21:29:26, TargetState=START, Terminable=false, WorkflowID=deleteJobFromRecurrentQueueNotStarted, capacity=2147483647}{JobTypes={}}{}, Stat=Stat {_version=2, _creationTime=1601242166394, _modifiedTime=1601242170517, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted_slaveJob1=ZnRecord=deleteJobFromRecurrentQueueNotStarted_slaveJob1, {Command=Reindex, ConcurrentTasksPerInstance=1, DisableExternalView=false, Expiry=86400000, FailureThreshold=0, IgnoreDependentJobFailure=false, JobCommandConfig={\"Delay\":\"200\"}, JobID=deleteJobFromRecurrentQueueNotStarted_slaveJob1, MONITORING_DISABLED=true, MaxAttemptsPerTask=10, MaxForcedReassignmentsPerTask=10, RebalanceRunningTask=false, TargetPartitionStates=SLAVE, TargetResource=TestDB, TimeoutPerPartition=3600000, WorkflowID=deleteJobFromRecurrentQueueNotStarted}{}{}, Stat=Stat {_version=0, _creationTime=1601242166392, _modifiedTime=1601242166392, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted_20200927T212926=ZnRecord=deleteJobFromRecurrentQueueNotStarted_20200927T212926, {AllowOverlapJobAssignment=false, Dag={\"allNodes\":[\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0\",\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1\"],\"childrenToParents\":{\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1\":[\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0\"]},\"parentsToChildren\":{\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_masterJob0\":[\"deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1\"]}}, Expiry=120000, FailureThreshold=0, IsJobQueue=true, JobPurgeInterval=1800000, MONITORING_DISABLED=true, ParallelJobs=1, StartTime=09-27-2020 21:29:26, TargetState=START, Terminable=true, WorkflowID=deleteJobFromRecurrentQueueNotStarted_20200927T212926, capacity=2147483647}{JobTypes={}}{}, Stat=Stat {_version=0, _creationTime=1601242166410, _modifiedTime=1601242166410, _ephemeralOwner=0}, deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1=ZnRecord=deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1, {Command=Reindex, ConcurrentTasksPerInstance=1, DisableExternalView=false, Expiry=86400000, FailureThreshold=0, IgnoreDependentJobFailure=false, JobCommandConfig={\"Delay\":\"200\"}, JobID=deleteJobFromRecurrentQueueNotStarted_20200927T212926_slaveJob1, MONITORING_DISABLED=true, MaxAttemptsPerTask=10, MaxForcedReassignmentsPerTask=10, RebalanceRunningTask=false, TargetPartitionStates=SLAVE, TargetResource=TestDB, TimeoutPerPartition=3600000, WorkflowID=deleteJobFromRecurrentQueueNotStarted_20200927T212926}{}{}, Stat=Stat {_version=0, _creationTime=1601242166410, _modifiedTime=1601242166410, _ephemeralOwner=0}}\r\n2020-09-27T21:29:31.1710456Z Job stopAndDeleteQueue_slaveJob exists in jobdag bug job config missing, expire the job\r\n2020-09-27T21:29:31.1711452Z removed job config:/TaskRebalancer/stopAndDeleteQueue_slaveJob","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699699145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/699699921","html_url":"https://github.com/apache/helix/issues/1394#issuecomment-699699921","issue_url":"https://api.github.com/repos/apache/helix/issues/1394","id":699699921,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTY5OTkyMQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T23:06:17Z","updated_at":"2020-09-27T23:06:17Z","author_association":"CONTRIBUTOR","body":"Note resource config is \r\n\r\nJOB stopAndDeleteQueue_masterJob config is there\r\nJOB stopAndDeleteQueue_slave config is not there\r\nWorkFlow stopAndDeleteQueue config is there with both master/slave jobs. \r\n\r\nThis is due to selective update sequence and job adding sequence race condition. This can be reproduced in debugger too.\r\nWill write a doc about the detail.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/699699921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700244104","html_url":"https://github.com/apache/helix/pull/1411#issuecomment-700244104","issue_url":"https://api.github.com/repos/apache/helix/issues/1411","id":700244104,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI0NDEwNA==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T19:47:12Z","updated_at":"2020-09-28T19:47:12Z","author_association":"CONTRIBUTOR","body":"This PR is ready to merge. Approved by @jiajunwang \r\nFinal commit message:\r\nRemove resource from customized state if all partitions are gone.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700244104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700397122","html_url":"https://github.com/apache/helix/issues/1375#issuecomment-700397122","issue_url":"https://api.github.com/repos/apache/helix/issues/1375","id":700397122,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM5NzEyMg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:02:46Z","updated_at":"2020-09-29T03:02:46Z","author_association":"CONTRIBUTOR","body":"The root cause is clear now. Use pause pipeline trick.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700397122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700400474","html_url":"https://github.com/apache/helix/issues/1372#issuecomment-700400474","issue_url":"https://api.github.com/repos/apache/helix/issues/1372","id":700400474,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQwMDQ3NA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:15:35Z","updated_at":"2020-09-29T03:15:35Z","author_association":"CONTRIBUTOR","body":"adding job race condition avoid with pausing","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700400474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700406536","html_url":"https://github.com/apache/helix/issues/1274#issuecomment-700406536","issue_url":"https://api.github.com/repos/apache/helix/issues/1274","id":700406536,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQwNjUzNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:39:02Z","updated_at":"2020-09-29T03:39:02Z","author_association":"CONTRIBUTOR","body":"Wait longer before polling to cluster converge and using correct AutoRebalancer class with AutoRebalancer strategy","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700406536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700892304","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-700892304","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":700892304,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5MjMwNA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:15:57Z","updated_at":"2020-09-29T18:15:57Z","author_association":"CONTRIBUTOR","body":"LOG 2150\r\n\r\n>9T12:09:56.1187531Z [ERROR] Tests run: 1208, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 5,269.362 s <<< FAILURE! - in TestSuite\r\n2020-09-29T12:09:56.1194648Z [ERROR] testSharingZkClient(org.apache.helix.manager.zk.client.TestHelixZkClient)  Time elapsed: 0.076 s  <<< FAILURE!\r\n2020-09-29T12:09:56.1199728Z java.lang.AssertionError: expected:<0> but was:<1>\r\n2020-09-29T12:09:56.1207896Z \tat org.apache.helix.manager.zk.client.TestHelixZkClient.testSharingZkClient(TestHelixZkClient.java:136)\r\n2020-09-29T12:09:56.1210414Z \r\n2020-09-29T12:09:56.3960840Z [ERROR] Failures: \r\n2020-09-29T12:09:56.3962373Z [ERROR]   TestHelixZkClient.testSharingZkClient:136 expected:<0> but was:<1>","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700892304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700892906","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-700892906","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":700892906,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5MjkwNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:17:01Z","updated_at":"2020-09-29T18:17:29Z","author_association":"CONTRIBUTOR","body":"```  \r\n  // Modify using client A and client B will get notification.\r\n    sharedZkClientA.createPersistent(TEST_PATH, true);\r\n    Assert.assertTrue(TestHelper.verify(() -> notificationCountB[0] == 1, TestHelper.WAIT_DURATION));\r\n    Assert.assertEquals(notificationCountB[1], 0);  --->\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700892906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700894948","html_url":"https://github.com/apache/helix/issues/1423#issuecomment-700894948","issue_url":"https://api.github.com/repos/apache/helix/issues/1423","id":700894948,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5NDk0OA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:20:45Z","updated_at":"2020-09-29T18:20:45Z","author_association":"CONTRIBUTOR","body":"  public void testRollingUpgrade() throws InterruptedException {\r\n    // rolling upgrade the cluster\r\n    for (String ins : _instances) {\r\n      System.out.println(\"Disable \" + ins);\r\n      _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, ins, false);\r\n      //Thread.sleep(1000L);\r\n      Assert.assertTrue(_clusterVerifier.verifyByPolling());     ---> failed.\r\n      System.out.println(\"Enable \" + ins);\r\n      _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, ins, true);\r\n      //Thread.sleep(1000L);\r\n      Assert.assertTrue(_clusterVerifier.verifyByPolling());\r\n    }\r\n\r\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\r\n    Assert.assertFalse(TestTransition.duplicatedPartitionsSnapshot.keys().hasMoreElements());\r\n  }","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700894948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700898352","html_url":"https://github.com/apache/helix/issues/1423#issuecomment-700898352","issue_url":"https://api.github.com/repos/apache/helix/issues/1423","id":700898352,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5ODM1Mg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:27:02Z","updated_at":"2020-09-29T18:27:34Z","author_association":"CONTRIBUTOR","body":"More LOG\r\n\r\n>020-09-29T12:11:32.4935608Z START TestP2PSingleTopState testRollingUpgrade at Tue Sep 29 12:11:31 UTC 2020\r\n2020-09-29T12:11:32.4936077Z Disable localhost_12918\r\n2020-09-29T12:11:32.4938891Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_41 matches the hosted message's target state, set relay message 3ddf08f2-f7ee-40ef-bc55-80dedd561617 to be expired.\r\n2020-09-29T12:11:32.4942608Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_0_48 matches the hosted message's target state, set relay message d11f1836-104a-447e-9361-d12065a7d204 to be expired.\r\n2020-09-29T12:11:32.4946285Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_20 matches the hosted message's target state, set relay message 3659846a-1fd7-42db-9b13-a5ba23971f49 to be expired.\r\n2020-09-29T12:11:32.4949658Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_21 matches the hosted message's target state, set relay message bd189324-89c4-4714-a2d0-2f94985626c0 to be expired.\r\n2020-09-29T12:11:32.4954899Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_0_10 matches the hosted message's target state, set relay message 4f1aa02b-3874-435c-9908-e0523e9f6ffe to be expired.\r\n2020-09-29T12:11:32.4958432Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_40 matches the hosted message's target state, set relay message 0cca10e0-ac8c-412a-acc6-203e87dd7e99 to be expired.\r\n2020-09-29T12:11:32.4962052Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_3 matches the hosted message's target state, set relay message b152982b-d14e-4f13-a41d-ef34b00875a5 to be expired.\r\n2020-09-29T12:11:32.4966726Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_17 matches the hosted message's target state, set relay message 5c6eab3b-5823-445d-b1e2-3dd841590126 to be expired.\r\n2020-09-29T12:11:32.4970679Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_6 matches the hosted message's target state, set relay message 1e46741b-415f-44f9-a116-5fc0d3d74dc5 to be expired.\r\n2020-09-29T12:11:32.4974485Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_8 matches the hosted message's target state, set relay message bf480679-21fa-4f81-bc61-9738e4f06f25 to be expired.\r\n2020-09-29T12:11:32.4977670Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_25 matches the hosted message's target state, set relay message ea59472a-e348-4b45-a1e4-406b8d64e871 to be expired.\r\n2020-09-29T12:11:32.4982674Z 4325762 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(5a464b46)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_24 matches the hosted message's target state, set relay message fb4a04a9-5a3b-4e38-a309-01ea1219944f to be expired.\r\n2020-09-29T12:11:32.4986186Z 4325797 [HelixController-pipeline-task-CLUSTER_TestP2PSingleTopState-(cdc410c6_TASK)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_17 matches the hosted message's target state, set relay message 5c6eab3b-5823-445d-b1e2-3dd841590126 to be expired.\r\n2020-09-29T12:11:32.4991009Z 4325797 [HelixController-pipeline-task-CLUSTER_TestP2PSingleTopState-(cdc410c6_TASK)] INFO  org.apache.helix.controller.dataproviders.WorkflowControllerDataProvider  - Event cdc410c6_TASK : END: WorkflowControllerDataProvider.refresh() for cluster CLUSTER_TestP2PSingleTopState, started at 1601381491172 took 25 for TASK pipeline\r\n2020-09-29T12:11:32.4998603Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_41 matches the hosted message's target state, set relay message 3ddf08f2-f7ee-40ef-bc55-80dedd561617 to be expired.\r\n2020-09-29T12:11:32.5007202Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_0_48 matches the hosted message's target state, set relay message d11f1836-104a-447e-9361-d12065a7d204 to be expired.\r\n2020-09-29T12:11:32.5016543Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_20 matches the hosted message's target state, set relay message 3659846a-1fd7-42db-9b13-a5ba23971f49 to be expired.\r\n2020-09-29T12:11:32.5024397Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_21 matches the hosted message's target state, set relay message bd189324-89c4-4714-a2d0-2f94985626c0 to be expired.\r\n2020-09-29T12:11:32.5030710Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_0_10 matches the hosted message's target state, set relay message 4f1aa02b-3874-435c-9908-e0523e9f6ffe to be expired.\r\n2020-09-29T12:11:32.5035011Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_40 matches the hosted message's target state, set relay message 0cca10e0-ac8c-412a-acc6-203e87dd7e99 to be expired.\r\n2020-09-29T12:11:32.5044433Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_3 matches the hosted message's target state, set relay message b152982b-d14e-4f13-a41d-ef34b00875a5 to be expired.\r\n2020-09-29T12:11:32.5056295Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_17 matches the hosted message's target state, set relay message 5c6eab3b-5823-445d-b1e2-3dd841590126 to be expired.\r\n2020-09-29T12:11:32.5060309Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_6 matches the hosted message's target state, set relay message 1e46741b-415f-44f9-a116-5fc0d3d74dc5 to be expired.\r\n2020-09-29T12:11:32.5065443Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_8 matches the hosted message's target state, set relay message bf480679-21fa-4f81-bc61-9738e4f06f25 to be expired.\r\n2020-09-29T12:11:32.5073169Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_25 matches the hosted message's target state, set relay message ea59472a-e348-4b45-a1e4-406b8d64e871 to be expired.\r\n2020-09-29T12:11:32.5078638Z 4325805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(cdc410c6_DEFAULT)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_24 matches the hosted message's target state, set relay message fb4a04a9-5a3b-4e38-a309-01ea1219944f to be expired.\r\n2020-09-29T12:11:32.5083435Z 4325898 [HelixController-pipeline-task-CLUSTER_TestP2PSingleTopState-(bd2f8626)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_17 matches the hosted message's target state, set relay message 5c6eab3b-5823-445d-b1e2-3dd841590126 to be expired.\r\n2020-09-29T12:11:32.5091112Z 4325901 [HelixController-pipeline-task-CLUSTER_TestP2PSingleTopState-(bd2f8626)] INFO  org.apache.helix.controller.dataproviders.WorkflowControllerDataProvider  - Event bd2f8626 : END: WorkflowControllerDataProvider.refresh() for cluster CLUSTER_TestP2PSingleTopState, started at 1601381491238 took 63 for TASK pipeline\r\n2020-09-29T12:11:32.5097705Z 4325911 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(bd2f8626)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_22 matches the hosted message's target state, set relay message f58960aa-8114-46f5-8650-22377e250036 to be expired.\r\n\r\n...\r\n\r\n>org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_3 matches the hosted message's target state, set relay message b152982b-d14e-4f13-a41d-ef34b00875a5 to be expired.\r\n2020-09-29T12:11:34.2065834Z 4328805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(89f1ea44)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_6 matches the hosted message's target state, set relay message 1e46741b-415f-44f9-a116-5fc0d3d74dc5 to be expired.\r\n2020-09-29T12:11:34.2069486Z 4328805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(89f1ea44)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_8 matches the hosted message's target state, set relay message bf480679-21fa-4f81-bc61-9738e4f06f25 to be expired.\r\n2020-09-29T12:11:34.2073777Z 4328805 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(89f1ea44)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_25 matches the hosted message's target state, set relay message ea59472a-e348-4b45-a1e4-406b8d64e871 to be expired.\r\n2020-09-29T12:11:34.2089299Z 4328807 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(89f1ea44)] ERROR org.apache.helix.common.caches.InstanceMessagesCache  - Target state for partition TestDB_1_24 matches the hosted message's target state, set relay message fb4a04a9-5a3b-4e38-a309-01ea1219944f to be expired.\r\n2020-09-29T12:11:34.2092393Z 4328807 [HelixController-pipeline-default-CLUSTER_TestP2PSingleTopState-(89f1ea44)] ERROR org.apache.helix.util.RebalanceUtil  - Failed to issue a pipeline run. Delay is invalid.\r\n2020-09-29T12:11:34.2114998Z 4328809 [HelixController-pipeline-task-CLUSTER_TestP2PSingleTopState-(89f1ea44)] INFO  org.apache.helix.controller.dataproviders.WorkflowControllerDataProvider  - Event 89f1ea44 : END: WorkflowControllerDataProvider.refresh() for cluster CLUSTER_TestP2PSingleTopState, started at 1601381494179 took 30 for TASK pipeline\r\n2020-09-29T12:15:11.0523246Z 4545623 [TaskStateModelFactory-task_thread-11] ERROR org.apache.helix.task.TaskRunner  - Problem running the task, report task as FAILED.\r\n2020-09-29T12:15:11.0524965Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0526421Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0528764Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixPropertyStore(ZKHelixManager.java:1015)\r\n2020-09-29T12:15:11.0531395Z \tat org.apache.helix.task.UserContentStore.getUserContent(UserContentStore.java:102)\r\n2020-09-29T12:15:11.0533295Z \tat org.apache.helix.integration.task.MockTask.run(MockTask.java:149)\r\n2020-09-29T12:15:11.0534574Z \tat org.apache.helix.task.TaskRunner.run(TaskRunner.java:71)\r\n2020-09-29T12:15:11.0535524Z \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n2020-09-29T12:15:11.0536469Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0538893Z \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n2020-09-29T12:15:11.0541857Z \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n2020-09-29T12:15:11.0545061Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0546781Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0547930Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0549271Z 4545648 [TaskStateModelFactory-task_thread-11] ERROR org.apache.helix.task.TaskRunner  - Problem running the task, report task as FAILED.\r\n2020-09-29T12:15:11.0550562Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0552054Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0554042Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0561967Z \tat org.apache.helix.task.TaskRunner.requestStateTransition(TaskRunner.java:184)\r\n2020-09-29T12:15:11.0563306Z \tat org.apache.helix.task.TaskRunner.run(TaskRunner.java:93)\r\n2020-09-29T12:15:11.0564288Z \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n2020-09-29T12:15:11.0566114Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0567703Z \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n2020-09-29T12:15:11.0570853Z \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n2020-09-29T12:15:11.0572683Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0574104Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0574988Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0578068Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.messaging.handling.HelixStateTransitionHandler  - Exception while executing a state transition task testStopWorkflowInStoppingState_Job1_0\r\n2020-09-29T12:15:11.0581013Z java.lang.reflect.InvocationTargetException\r\n2020-09-29T12:15:11.0582295Z \tat sun.reflect.GeneratedMethodAccessor32.invoke(Unknown Source)\r\n2020-09-29T12:15:11.0584600Z \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n2020-09-29T12:15:11.0585872Z \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n2020-09-29T12:15:11.0588439Z \tat org.apache.helix.messaging.handling.HelixStateTransitionHandler.invoke(HelixStateTransitionHandler.java:404)\r\n2020-09-29T12:15:11.0592762Z \tat org.apache.helix.messaging.handling.HelixStateTransitionHandler.handleMessage(HelixStateTransitionHandler.java:331)\r\n2020-09-29T12:15:11.0596246Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:97)\r\n2020-09-29T12:15:11.0598629Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0599934Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0601300Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0602680Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0603535Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0604064Z Caused by: java.lang.NullPointerException\r\n2020-09-29T12:15:11.0605391Z \tat org.apache.helix.task.TaskStateModel.onBecomeStoppedFromRunning(TaskStateModel.java:94)\r\n2020-09-29T12:15:11.0606509Z \t... 11 more\r\n2020-09-29T12:15:11.0607885Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.util.StatusUpdateUtil  - Exception while logging status update\r\n2020-09-29T12:15:11.0609433Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0611120Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0613824Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0617789Z \tat org.apache.helix.util.StatusUpdateUtil.logMessageStatusUpdateRecord(StatusUpdateUtil.java:349)\r\n2020-09-29T12:15:11.0620149Z \tat org.apache.helix.util.StatusUpdateUtil.logError(StatusUpdateUtil.java:401)\r\n2020-09-29T12:15:11.0626276Z \tat org.apache.helix.messaging.handling.HelixStateTransitionHandler.handleMessage(HelixStateTransitionHandler.java:359)\r\n2020-09-29T12:15:11.0630594Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:97)\r\n2020-09-29T12:15:11.0632328Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0633424Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0635660Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0637067Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0637917Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0640139Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.messaging.handling.HelixTask  - Exception while executing a message. org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect() msgId: ca0e487d-d321-4e9c-92be-d79037838903 type: STATE_TRANSITION\r\n2020-09-29T12:15:11.0643053Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0644474Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0646766Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0650768Z \tat org.apache.helix.messaging.handling.HelixStateTransitionHandler.postHandleMessage(HelixStateTransitionHandler.java:191)\r\n2020-09-29T12:15:11.0654671Z \tat org.apache.helix.messaging.handling.HelixStateTransitionHandler.handleMessage(HelixStateTransitionHandler.java:371)\r\n2020-09-29T12:15:11.0658138Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:97)\r\n2020-09-29T12:15:11.0661977Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0663098Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0665973Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0672017Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0673873Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0730086Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.util.StatusUpdateUtil  - Exception while logging status update\r\n2020-09-29T12:15:11.0731381Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0733122Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0735169Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0737532Z \tat org.apache.helix.util.StatusUpdateUtil.logMessageStatusUpdateRecord(StatusUpdateUtil.java:349)\r\n2020-09-29T12:15:11.0739469Z \tat org.apache.helix.util.StatusUpdateUtil.logError(StatusUpdateUtil.java:401)\r\n2020-09-29T12:15:11.0740790Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:119)\r\n2020-09-29T12:15:11.0742100Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0743182Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0744526Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0745898Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0746913Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0748710Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.messaging.handling.HelixTask  - Message execution failed. msgId: ca0e487d-d321-4e9c-92be-d79037838903, errorMsg: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0750835Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.util.StatusUpdateUtil  - Exception while logging status update\r\n2020-09-29T12:15:11.0752227Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0753540Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0756034Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0758965Z \tat org.apache.helix.util.StatusUpdateUtil.logMessageStatusUpdateRecord(StatusUpdateUtil.java:349)\r\n2020-09-29T12:15:11.0760669Z \tat org.apache.helix.util.StatusUpdateUtil.logError(StatusUpdateUtil.java:393)\r\n2020-09-29T12:15:11.0762182Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:166)\r\n2020-09-29T12:15:11.0763493Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0764767Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0765959Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0767452Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0768276Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0769749Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.messaging.handling.HelixTask  - Error to final clean up for message : ca0e487d-d321-4e9c-92be-d79037838903\r\n2020-09-29T12:15:11.0773616Z 4545649 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.messaging.handling.HelixTask  - Exception after executing a message, msgId: ca0e487d-d321-4e9c-92be-d79037838903org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0776248Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0778402Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0780165Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0782822Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:172)\r\n2020-09-29T12:15:11.0785079Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0786326Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0787466Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0788870Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0789694Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:15:11.0790887Z 4545650 [HelixTaskExecutor-message_handle_thread_29751] ERROR org.apache.helix.util.StatusUpdateUtil  - Exception while logging status update\r\n2020-09-29T12:15:11.0792114Z org.apache.helix.HelixException: HelixManager (ZkClient) is not connected. Call HelixManager#connect()\r\n2020-09-29T12:15:11.0793707Z \tat org.apache.helix.manager.zk.ZKHelixManager.checkConnected(ZKHelixManager.java:388)\r\n2020-09-29T12:15:11.0796319Z \tat org.apache.helix.manager.zk.ZKHelixManager.getHelixDataAccessor(ZKHelixManager.java:658)\r\n2020-09-29T12:15:11.0798572Z \tat org.apache.helix.util.StatusUpdateUtil.logMessageStatusUpdateRecord(StatusUpdateUtil.java:349)\r\n2020-09-29T12:15:11.0800336Z \tat org.apache.helix.util.StatusUpdateUtil.logError(StatusUpdateUtil.java:393)\r\n2020-09-29T12:15:11.0801862Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:195)\r\n2020-09-29T12:15:11.0803218Z \tat org.apache.helix.messaging.handling.HelixTask.call(HelixTask.java:49)\r\n2020-09-29T12:15:11.0804330Z \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2020-09-29T12:15:11.0805505Z \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2020-09-29T12:15:11.0806881Z \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2020-09-29T12:15:11.0807728Z \tat java.lang.Thread.run(Thread.java:748)\r\n2020-09-29T12:16:23.6875756Z 4618286 [Helix-RouterUpdater-event_process-TestZkCallbackHandlerLeak_testCurrentStatePathLeakingByAsycRemoval] ERROR org.apache.helix.spectator.RoutingTableProvider  - HelixManager is not connected for router update event: Event id : 9424f190-44df-489e-acd6-e682a89c5f43name:PeriodicalRebalance\r\n2020-09-29T12:16:23.6878815Z changeContext:org.apache.helix.NotificationContext@28220708\r\n2020-09-29T12:16:23.6880166Z helixmanager:org.apache.helix.integration.manager.ClusterSpectatorManager@6f7fb87f\r\n2020-09-29T12:16:23.6881387Z \r\n2020-09-29T12:16:23.6884577Z 4618286 [Helix-RouterUpdater-event_process-TestZkCallbackHandlerLeak_testCurrentStatePathLeakingByAsycRemoval] ERROR org.apache.helix.common.DedupEventProcessor  - Helix-RouterUpdater-event_process thread failed while running Helix-RouterUpdater-event_process\r\n2020-09-29T12:16:23.6887218Z org.apache.helix.HelixException: HelixManager is not connected for router update event.\r\n2020-09-29T12:16:23.6888645Z \tat org.apache.helix.spectator.RoutingTableProvider$RouterUpdater.handleEvent(RoutingTableProvider.java:914)\r\n2020-09-29T12:16:23.6890301Z \tat org.apache.helix.spectator.RoutingTableProvider$RouterUpdater.handleEvent(RoutingTableProvider.java:878)\r\n2020-09-29T12:16:23.6891778Z \tat org.apache.helix.common.DedupEventProcessor.run(DedupEventProcessor.java:61)\r\n2020-09-29T12:16:32.9197745Z 4627519 [TestNGInvoker-testRollingUpgrade()] ERROR org.apache.helix.tools.ClusterVerifiers.ZkHelixClusterVerifier  - verifier timeout out with timeout 300000\r\n2020-09-29T12:16:32.9371442Z END TestP2PSingleTopState testRollingUpgrade at Tue Sep 29 12:16:32 UTC 2020, took: 301781ms.\r\n2020-09-29T12:16:32.9373544Z AfterClass: TestP2PSingleTopState of TestP2PSingleTopState called.\r\n2020-09-29T12:16:33.3168792Z END TestP2PSingleTopState at Tue Sep 29 12:16:33 UTC 2020\r\n2020-09-29T12:16:33.3170162Z AfterClass:TestP2PSingleTopState afterclass of ZkTestBase called!\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700898352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/700967730","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-700967730","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":700967730,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDk2NzczMA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T20:27:45Z","updated_at":"2020-09-29T20:27:45Z","author_association":"CONTRIBUTOR","body":"Note, both TestSharingZkClient() and previous TestZkConnectionManager() share the same test path. TestZkConnectionManager has a `deleteCluster(\"testZkConnectionManager\");` as last operation without waiting till it is clears. This may affect the correctness of test","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/700967730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/701496511","html_url":"https://github.com/apache/helix/issues/1319#issuecomment-701496511","issue_url":"https://api.github.com/repos/apache/helix/issues/1319","id":701496511,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTQ5NjUxMQ==","user":{"login":"brentwritescode","id":33364712,"node_id":"MDQ6VXNlcjMzMzY0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/33364712?v=4","gravatar_id":"","url":"https://api.github.com/users/brentwritescode","html_url":"https://github.com/brentwritescode","followers_url":"https://api.github.com/users/brentwritescode/followers","following_url":"https://api.github.com/users/brentwritescode/following{/other_user}","gists_url":"https://api.github.com/users/brentwritescode/gists{/gist_id}","starred_url":"https://api.github.com/users/brentwritescode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brentwritescode/subscriptions","organizations_url":"https://api.github.com/users/brentwritescode/orgs","repos_url":"https://api.github.com/users/brentwritescode/repos","events_url":"https://api.github.com/users/brentwritescode/events{/privacy}","received_events_url":"https://api.github.com/users/brentwritescode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T16:20:15Z","updated_at":"2020-09-30T16:20:15Z","author_association":"CONTRIBUTOR","body":"My apologies for the delay @narendly , PR has been submitted (and hopefully passes).\r\n\r\nIndependent of that, I did end up adding a new https://github.com/apache/helix/wiki/Pull-Request-Testing page if you want to give it a once-over and I linked to it on https://github.com/apache/helix/wiki/Pull-Request-Guidelines as well as under the \"Resources for Contributors\" section on the sidebar.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/701496511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/701499611","html_url":"https://github.com/apache/helix/issues/1387#issuecomment-701499611","issue_url":"https://api.github.com/repos/apache/helix/issues/1387","id":701499611,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTQ5OTYxMQ==","user":{"login":"brentwritescode","id":33364712,"node_id":"MDQ6VXNlcjMzMzY0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/33364712?v=4","gravatar_id":"","url":"https://api.github.com/users/brentwritescode","html_url":"https://github.com/brentwritescode","followers_url":"https://api.github.com/users/brentwritescode/followers","following_url":"https://api.github.com/users/brentwritescode/following{/other_user}","gists_url":"https://api.github.com/users/brentwritescode/gists{/gist_id}","starred_url":"https://api.github.com/users/brentwritescode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brentwritescode/subscriptions","organizations_url":"https://api.github.com/users/brentwritescode/orgs","repos_url":"https://api.github.com/users/brentwritescode/repos","events_url":"https://api.github.com/users/brentwritescode/events{/privacy}","received_events_url":"https://api.github.com/users/brentwritescode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T16:25:45Z","updated_at":"2020-09-30T16:25:45Z","author_association":"CONTRIBUTOR","body":"@dasahcc is the stuff that generates the binary distributions in the Helix repository?  If so, I can try to take a look at it too if that would help.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/701499611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/701561320","html_url":"https://github.com/apache/helix/pull/1383#issuecomment-701561320","issue_url":"https://api.github.com/repos/apache/helix/issues/1383","id":701561320,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTU2MTMyMA==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T18:21:38Z","updated_at":"2020-09-30T18:21:38Z","author_association":"CONTRIBUTOR","body":"Thanks, all, for the review!\r\n\r\nThis PR is ready to be merged, approved by @kaisun2000 @alirezazamani \r\n\r\n```\r\nCustom rest client interacts with participant side to query for its health checks. Currently there is no metrics for the query requests. We'd like to have metrics for the external http requests.\r\n\r\nThis commit adds http request latency, requests total and error http request total metrics for the custom rest client calls.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/701561320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702291024","html_url":"https://github.com/apache/helix/pull/1424#issuecomment-702291024","issue_url":"https://api.github.com/repos/apache/helix/issues/1424","id":702291024,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjI5MTAyNA==","user":{"login":"brentwritescode","id":33364712,"node_id":"MDQ6VXNlcjMzMzY0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/33364712?v=4","gravatar_id":"","url":"https://api.github.com/users/brentwritescode","html_url":"https://github.com/brentwritescode","followers_url":"https://api.github.com/users/brentwritescode/followers","following_url":"https://api.github.com/users/brentwritescode/following{/other_user}","gists_url":"https://api.github.com/users/brentwritescode/gists{/gist_id}","starred_url":"https://api.github.com/users/brentwritescode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brentwritescode/subscriptions","organizations_url":"https://api.github.com/users/brentwritescode/orgs","repos_url":"https://api.github.com/users/brentwritescode/repos","events_url":"https://api.github.com/users/brentwritescode/events{/privacy}","received_events_url":"https://api.github.com/users/brentwritescode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T17:38:46Z","updated_at":"2020-10-01T17:38:46Z","author_association":"CONTRIBUTOR","body":"Is it possible that this might be a transient test failure?  If I run the `zookeeper-api` build locally with `mvn clean test`, I get this:\r\n\r\n```\r\n[INFO] Tests run: 46, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 83.349 s - in TestSuite\r\n[INFO]\r\n[INFO] Results:\r\n[INFO]\r\n[INFO] Tests run: 46, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  02:22 min\r\n[INFO] Finished at: 2020-10-01T17:32:23Z\r\n[INFO] ------------------------------------------------------------------------\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702291024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702375221","html_url":"https://github.com/apache/helix/pull/1362#issuecomment-702375221","issue_url":"https://api.github.com/repos/apache/helix/issues/1362","id":702375221,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjM3NTIyMQ==","user":{"login":"xyuanlu","id":6392021,"node_id":"MDQ6VXNlcjYzOTIwMjE=","avatar_url":"https://avatars.githubusercontent.com/u/6392021?v=4","gravatar_id":"","url":"https://api.github.com/users/xyuanlu","html_url":"https://github.com/xyuanlu","followers_url":"https://api.github.com/users/xyuanlu/followers","following_url":"https://api.github.com/users/xyuanlu/following{/other_user}","gists_url":"https://api.github.com/users/xyuanlu/gists{/gist_id}","starred_url":"https://api.github.com/users/xyuanlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyuanlu/subscriptions","organizations_url":"https://api.github.com/users/xyuanlu/orgs","repos_url":"https://api.github.com/users/xyuanlu/repos","events_url":"https://api.github.com/users/xyuanlu/events{/privacy}","received_events_url":"https://api.github.com/users/xyuanlu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T20:20:28Z","updated_at":"2020-10-01T20:20:28Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged.\r\n\r\nFinal commit message:\r\nMove ST message to state validation from executing phase to scheduling phase.\r\n\r\nMove ST message to state validation to scheduling phase.because of the following reasons:\r\nIt is a no-op operation, thus we should not create a thread to execute it.\r\nThe lag between scheduling and executing could add additional latency for controller and eventually application latency.\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702375221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702409261","html_url":"https://github.com/apache/helix/pull/1295#issuecomment-702409261","issue_url":"https://api.github.com/repos/apache/helix/issues/1295","id":702409261,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjQwOTI2MQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T21:31:25Z","updated_at":"2020-10-01T21:31:25Z","author_association":"CONTRIBUTOR","body":"@jiajunwang, @pkuwm, as we looked, my github page does not have this UI button to re-run. Other than that, any other concerns? Or let us merge this in.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702409261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702411523","html_url":"https://github.com/apache/helix/pull/1295#issuecomment-702411523","issue_url":"https://api.github.com/repos/apache/helix/issues/1295","id":702411523,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjQxMTUyMw==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T21:37:01Z","updated_at":"2020-10-01T21:37:01Z","author_association":"CONTRIBUTOR","body":"> @jiajunwang, @pkuwm, as we looked, my github page does not have this UI button to re-run. Other than that, any other concerns? Or let us merge this in.\r\n\r\n@kaisun2000 I've helped re-run all the jobs.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702411523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702432212","html_url":"https://github.com/apache/helix/pull/1416#issuecomment-702432212","issue_url":"https://api.github.com/repos/apache/helix/issues/1416","id":702432212,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjQzMjIxMg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T22:34:18Z","updated_at":"2020-10-01T22:34:18Z","author_association":"CONTRIBUTOR","body":"Please fill the required content to the description.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702432212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702441308","html_url":"https://github.com/apache/helix/pull/1295#issuecomment-702441308","issue_url":"https://api.github.com/repos/apache/helix/issues/1295","id":702441308,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjQ0MTMwOA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T23:04:56Z","updated_at":"2020-10-01T23:04:56Z","author_association":"CONTRIBUTOR","body":"@jiajunwang, removed the extra space to trigger run from my side. Please help to merge.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702441308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702893395","html_url":"https://github.com/apache/helix/pull/1409#issuecomment-702893395","issue_url":"https://api.github.com/repos/apache/helix/issues/1409","id":702893395,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjg5MzM5NQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-02T18:34:46Z","updated_at":"2020-10-02T18:34:46Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702893395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702893662","html_url":"https://github.com/apache/helix/pull/1409#issuecomment-702893662","issue_url":"https://api.github.com/repos/apache/helix/issues/1409","id":702893662,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjg5MzY2Mg==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-02T18:35:25Z","updated_at":"2020-10-02T18:35:25Z","author_association":"CONTRIBUTOR","body":"Add Builder to ZKDistributedNonblockingLock to enable ZooScalability use\r\n\r\nZKDistributedNonblockingLock and its related helix-lock API were not ZooScalability-compliant, meaning they could not be used in a multi-ZK environment. This PR updates the said APIs so that we could use them in multi-ZK environment by adding a Builder that allows users to set multi-ZK parameters.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702893662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702975931","html_url":"https://github.com/apache/helix/issues/1428#issuecomment-702975931","issue_url":"https://api.github.com/repos/apache/helix/issues/1428","id":702975931,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjk3NTkzMQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-02T22:00:09Z","updated_at":"2020-10-02T22:00:09Z","author_association":"CONTRIBUTOR","body":"This multi() is targeted to fix recently identified \"phantom\" read problem when refreshing the cache using selective update. I will create a separate issue to illustrate the \"phantom read\" separately.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702975931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702978607","html_url":"https://github.com/apache/helix/pull/1429#issuecomment-702978607","issue_url":"https://api.github.com/repos/apache/helix/issues/1429","id":702978607,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjk3ODYwNw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-02T22:08:23Z","updated_at":"2020-10-02T22:08:23Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @narendly.\r\nI'm still doing more prototype work. Until I'm convinced that it will work end to end, I will temporarily suspend this PR's work. Let me close it for now to avoid confusion. I will re-open it later with some API design.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702978607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/702985610","html_url":"https://github.com/apache/helix/pull/1430#issuecomment-702985610","issue_url":"https://api.github.com/repos/apache/helix/issues/1430","id":702985610,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjk4NTYxMA==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-02T22:33:46Z","updated_at":"2020-10-02T22:33:46Z","author_association":"CONTRIBUTOR","body":"This PR is ready to merge. Approved by @mgao0 \r\nFinal commit message:\r\nAdd getResourceCustomized View REST API","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/702985610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/703899196","html_url":"https://github.com/apache/helix/pull/1436#issuecomment-703899196","issue_url":"https://api.github.com/repos/apache/helix/issues/1436","id":703899196,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzg5OTE5Ng==","user":{"login":"mgao0","id":31704180,"node_id":"MDQ6VXNlcjMxNzA0MTgw","avatar_url":"https://avatars.githubusercontent.com/u/31704180?v=4","gravatar_id":"","url":"https://api.github.com/users/mgao0","html_url":"https://github.com/mgao0","followers_url":"https://api.github.com/users/mgao0/followers","following_url":"https://api.github.com/users/mgao0/following{/other_user}","gists_url":"https://api.github.com/users/mgao0/gists{/gist_id}","starred_url":"https://api.github.com/users/mgao0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgao0/subscriptions","organizations_url":"https://api.github.com/users/mgao0/orgs","repos_url":"https://api.github.com/users/mgao0/repos","events_url":"https://api.github.com/users/mgao0/events{/privacy}","received_events_url":"https://api.github.com/users/mgao0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-05T21:28:38Z","updated_at":"2020-10-05T21:28:38Z","author_association":"CONTRIBUTOR","body":"Code looks good to me. Could you please some more details in the PR description explaining why we want to make this change? Such as when Helix manager connects, it will create new client, etc.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/703899196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/703974505","html_url":"https://github.com/apache/helix/pull/1432#issuecomment-703974505","issue_url":"https://api.github.com/repos/apache/helix/issues/1432","id":703974505,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzk3NDUwNQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T01:23:40Z","updated_at":"2020-10-06T01:23:40Z","author_association":"CONTRIBUTOR","body":"This pull request is approved. Please help to merge in to master.\r\n\r\n>Fix #1431\r\nfix clusterVerifier to take waitTillVeriy and also enhance\r\nlogging of TaskDriver and TaskUtil to make sure the job\r\nadding and selective update race condition would have a\r\nlog","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/703974505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704021969","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-704021969","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":704021969,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDAyMTk2OQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T04:36:53Z","updated_at":"2020-10-06T04:36:53Z","author_association":"CONTRIBUTOR","body":"LOG 2510\r\n\r\n>START TestHelixZkClient testZkConnectionManager at Tue Oct 06 02:02:06 UTC 2020\r\n2020-10-06T02:02:06.7570703Z END TestHelixZkClient testZkConnectionManager at Tue Oct 06 02:02:06 UTC 2020, took: 226ms.\r\n2020-10-06T02:02:06.7571961Z START TestHelixZkClient testSharingZkClient at Tue Oct 06 02:02:06 UTC 2020\r\n2020-10-06T02:02:06.7651298Z sharedZkClient A increased n1 with path: /testSharingZkClient/IDEALSTATES/test_helix_zkclienttestSharingZkClient\r\n2020-10-06T02:02:06.7657051Z sharedZkClient B increased n0 with path: /testSharingZkClient/IDEALSTATES/test_helix_zkclienttestSharingZkClient\r\n2020-10-06T02:02:06.7676143Z Created test path:/testSharingZkClient/IDEALSTATES/test_helix_zkclienttestSharingZkClient\r\n2020-10-06T02:02:06.7683131Z sharedZkClient B increased n0 with path: /testSharingZkClient/IDEALSTATES/test_helix_zkclienttestSharingZkClient\r\n2020-10-06T02:02:06.7684654Z sharedZkClient A increased n0 with path: /testSharingZkClient/IDEALSTATES/test_helix_zkclienttestSharingZkClient\r\n2020-10-06T02:02:06.8269303Z END TestHelixZkClient testSharingZkClient at Tue Oct 06 02:02:06 UTC 2020, took: 70ms.\r\n2020-10-06T02:02:06.8271632Z AfterClass:TestHelixZkClient afterclass of ZkTestBase called!\r\n\r\n>123963Z [ERROR] Failures: \r\n2020-10-06T03:23:24.3129550Z [ERROR]   TestHelixZkClient.testSharingZkClient:141 expected:<0> but was:<1>\r\n\r\ncode:\r\n\r\n```\r\n    final int[] notificationCountA = {0, 0};\r\n    sharedZkClientA.subscribeDataChanges(TEST_PATH, new IZkDataListener() {\r\n      @Override\r\n      public void handleDataChange(String s, Object o) {\r\n        notificationCountA[0]++;\r\n        System.out.println(\"sharedZkClient A increased n0 with path: \" + s);\r\n      }\r\n\r\n      @Override\r\n      public void handleDataDeleted(String s) {\r\n        notificationCountA[1]++;\r\n        System.out.println(\"sharedZkClient A increased n1 with path: \" + s);\r\n      }\r\n    });\r\n    final int[] notificationCountB = {0, 0};\r\n    sharedZkClientB.subscribeDataChanges(TEST_PATH, new IZkDataListener() {\r\n      @Override\r\n      public void handleDataChange(String s, Object o) {\r\n        notificationCountB[0]++;\r\n        System.out.println(\"sharedZkClient B increased n0 with path: \" + s);\r\n      }\r\n\r\n      @Override\r\n      public void handleDataDeleted(String s) {\r\n        notificationCountB[1]++;\r\n        System.out.println(\"sharedZkClient B increased n1 with path: \" + s);\r\n      }\r\n    });\r\n\r\n    // Modify using client A and client B will get notification.\r\n    sharedZkClientA.createPersistent(TEST_PATH, true);\r\n    System.out.println(\"Created test path:\" + TEST_PATH);\r\n    Assert.assertTrue(TestHelper.verify(() -> notificationCountB[0] == 1, TestHelper.WAIT_DURATION));\r\n    Assert.assertEquals(notificationCountB[1], 0);\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704021969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704022200","html_url":"https://github.com/apache/helix/issues/1419#issuecomment-704022200","issue_url":"https://api.github.com/repos/apache/helix/issues/1419","id":704022200,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDAyMjIwMA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T04:37:57Z","updated_at":"2020-10-06T04:37:57Z","author_association":"CONTRIBUTOR","body":"It seems that handleDelete was called for both A and B. Not sure where it is from. This is very rare happening.\r\n\r\nadd a little bit more log.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704022200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704414218","html_url":"https://github.com/apache/helix/pull/1072#issuecomment-704414218","issue_url":"https://api.github.com/repos/apache/helix/issues/1072","id":704414218,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQxNDIxOA==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T16:58:15Z","updated_at":"2020-10-06T16:58:15Z","author_association":"MEMBER","body":"Are we still planning to merge this PR in?  What is pending here?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704414218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704415393","html_url":"https://github.com/apache/helix/pull/1436#issuecomment-704415393","issue_url":"https://api.github.com/repos/apache/helix/issues/1436","id":704415393,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQxNTM5Mw==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T17:00:23Z","updated_at":"2020-10-06T17:00:23Z","author_association":"MEMBER","body":"Minor:  \"Not to cache DataAccessor in CustomizedStateProvider\" is more accurate.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704415393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704416624","html_url":"https://github.com/apache/helix/pull/1436#issuecomment-704416624","issue_url":"https://api.github.com/repos/apache/helix/issues/1436","id":704416624,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQxNjYyNA==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T17:02:30Z","updated_at":"2020-10-06T17:03:23Z","author_association":"MEMBER","body":"There are two logic changes here, I know both of them are short, but can we break it down to two PRs? 1) Catch the exception and return false in GroupCommit, 2) Do not cache dataAccessor in CustomizedStateProvider.  Those two changes are independent of each other.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704416624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704420471","html_url":"https://github.com/apache/helix/pull/1438#issuecomment-704420471","issue_url":"https://api.github.com/repos/apache/helix/issues/1438","id":704420471,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQyMDQ3MQ==","user":{"login":"NealSun96","id":18000949,"node_id":"MDQ6VXNlcjE4MDAwOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/18000949?v=4","gravatar_id":"","url":"https://api.github.com/users/NealSun96","html_url":"https://github.com/NealSun96","followers_url":"https://api.github.com/users/NealSun96/followers","following_url":"https://api.github.com/users/NealSun96/following{/other_user}","gists_url":"https://api.github.com/users/NealSun96/gists{/gist_id}","starred_url":"https://api.github.com/users/NealSun96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NealSun96/subscriptions","organizations_url":"https://api.github.com/users/NealSun96/orgs","repos_url":"https://api.github.com/users/NealSun96/repos","events_url":"https://api.github.com/users/NealSun96/events{/privacy}","received_events_url":"https://api.github.com/users/NealSun96/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T17:09:06Z","updated_at":"2020-10-06T17:09:06Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @lei-xia   \r\nFinal commit message:\r\n## Fix TaskGarbageCollectionStage rebalance trigger when job purge interval is negative  ##\r\nWhen job purge interval is negative, skip rebalance scheduling for the workflow. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704420471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704425985","html_url":"https://github.com/apache/helix/pull/1227#issuecomment-704425985","issue_url":"https://api.github.com/repos/apache/helix/issues/1227","id":704425985,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQyNTk4NQ==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T17:18:42Z","updated_at":"2020-10-06T17:18:42Z","author_association":"MEMBER","body":"This PR is too long for effective reviewing.  I scanned the PR quickly, I would suggest at least break it to 3 separate PRs with each of them focusing on just 1 topic, that will make them much easier to review:  1) Fix test issues caused by StateVerifier (i.e, add the delay),  2) Replace all hard-code sleep() call with TestVerifier, 3) Add ThreadLeak/memory usage check into the test, and maybe 4) other minor fixes in the tests.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704425985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704456642","html_url":"https://github.com/apache/helix/pull/1422#issuecomment-704456642","issue_url":"https://api.github.com/repos/apache/helix/issues/1422","id":704456642,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQ1NjY0Mg==","user":{"login":"alirezazamani","id":9290963,"node_id":"MDQ6VXNlcjkyOTA5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9290963?v=4","gravatar_id":"","url":"https://api.github.com/users/alirezazamani","html_url":"https://github.com/alirezazamani","followers_url":"https://api.github.com/users/alirezazamani/followers","following_url":"https://api.github.com/users/alirezazamani/following{/other_user}","gists_url":"https://api.github.com/users/alirezazamani/gists{/gist_id}","starred_url":"https://api.github.com/users/alirezazamani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirezazamani/subscriptions","organizations_url":"https://api.github.com/users/alirezazamani/orgs","repos_url":"https://api.github.com/users/alirezazamani/repos","events_url":"https://api.github.com/users/alirezazamani/events{/privacy}","received_events_url":"https://api.github.com/users/alirezazamani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T18:13:20Z","updated_at":"2020-10-06T18:15:12Z","author_association":"NONE","body":"This PR is ready to be merged.\r\n\r\nFinal commit message:\r\nFix currentState not being removed when pending message existed\r\n\r\nThis commit makes sure that the controller drops the current state of \r\nthe jobs that have just finished and have pending messages.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704456642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704544728","html_url":"https://github.com/apache/helix/pull/1441#issuecomment-704544728","issue_url":"https://api.github.com/repos/apache/helix/issues/1441","id":704544728,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDU0NDcyOA==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T20:49:22Z","updated_at":"2020-10-06T20:49:22Z","author_association":"CONTRIBUTOR","body":"This PR is ready to merge. Approved by @jiajunwang \r\nFinal commit message:\r\nCatch exception in group commit.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704544728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704548759","html_url":"https://github.com/apache/helix/pull/1066#issuecomment-704548759","issue_url":"https://api.github.com/repos/apache/helix/issues/1066","id":704548759,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDU0ODc1OQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T20:58:00Z","updated_at":"2020-10-06T21:08:04Z","author_association":"CONTRIBUTOR","body":"@pkuwm, @jiajunwang,\r\n\r\nSync-ed with @pkuwm offline. As I raised, there seems to be another race condition in this code. This is not introduced by this pull request, it exists all the time. \r\n\r\nBasically, it is like this:\r\n>Say, pause signal is added, the old lead controller see this one and the callback is in zkclient queue. the new lead controller to be also see it, but the generic controller ignored it as it is not leader yet.\r\nthen new controller becomes leader due to old controller session expiration.\r\nwill new controller in this case not pausing?\r\n\r\nLet us sync about shall we fix it here, or in another pull, or what should we do? I will create an issue to track it.\r\n\r\n#1442 is tracking this newly raised issue.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704548759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704599870","html_url":"https://github.com/apache/helix/pull/1066#issuecomment-704599870","issue_url":"https://api.github.com/repos/apache/helix/issues/1066","id":704599870,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDU5OTg3MA==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T23:09:09Z","updated_at":"2020-10-06T23:09:09Z","author_association":"CONTRIBUTOR","body":"> @pkuwm, @jiajunwang,\r\n> \r\n> Sync-ed with @pkuwm offline. As I raised, there seems to be another race condition in this code. This is not introduced by this pull request, it exists all the time.\r\n> \r\n> Basically, it is like this:\r\n> \r\n> > Say, pause signal is added, the old lead controller see this one and the callback is in zkclient queue. the new lead controller to be also see it, but the generic controller ignored it as it is not leader yet.\r\n> > then new controller becomes leader due to old controller session expiration.\r\n> > will new controller in this case not pausing?\r\n> \r\n> Let us sync about shall we fix it here, or in another pull, or what should we do? I will create an issue to track it.\r\n> \r\n> #1442 is tracking this newly raised issue.\r\n\r\n@kaisun2000 Thanks for creating the issue for tracking it. If it is an issue, we should get it in another PR. Let's discuss.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704599870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704601623","html_url":"https://github.com/apache/helix/issues/1442#issuecomment-704601623","issue_url":"https://api.github.com/repos/apache/helix/issues/1442","id":704601623,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYwMTYyMw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T23:14:39Z","updated_at":"2020-10-06T23:14:39Z","author_association":"CONTRIBUTOR","body":"On my understanding, the new controller shall read all znodes including the signal once it get the leadership. So it will be paused. Please try to reproduce.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704601623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704602671","html_url":"https://github.com/apache/helix/issues/1442#issuecomment-704602671","issue_url":"https://api.github.com/repos/apache/helix/issues/1442","id":704602671,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYwMjY3MQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T23:18:02Z","updated_at":"2020-10-06T23:18:02Z","author_association":"CONTRIBUTOR","body":"@kaisun2000 please follow the issue template if possible. If we have a way to confirm if this is an real issue, let's do so. If it requires more time, please mark it as a task which titled with \"Confirming if XXX is a bug\".","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704602671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704603942","html_url":"https://github.com/apache/helix/pull/1066#issuecomment-704603942","issue_url":"https://api.github.com/repos/apache/helix/issues/1066","id":704603942,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYwMzk0Mg==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T23:22:16Z","updated_at":"2020-10-06T23:22:16Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @kaisun2000 @jiajunwang \r\n\r\nThere is a case that after controller leader switches, pipelines of both old Helix controller leader and new leader are running in parallel.\r\nDifferent assignment decisions are sent to different participants so there are double masters for a single partition.\r\n\r\nThe commit addresses this issue by blocking non-leader controller to send messages to ZK.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704603942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704611335","html_url":"https://github.com/apache/helix/pull/1436#issuecomment-704611335","issue_url":"https://api.github.com/repos/apache/helix/issues/1436","id":704611335,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYxMTMzNQ==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-06T23:48:19Z","updated_at":"2020-10-06T23:48:19Z","author_association":"CONTRIBUTOR","body":"This PR is ready to merge. Approved by @mgao0 \r\nFinal commit message:\r\nNot to cache data accessor in Helix customized state provider.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704611335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704636135","html_url":"https://github.com/apache/helix/pull/1445#issuecomment-704636135","issue_url":"https://api.github.com/repos/apache/helix/issues/1445","id":704636135,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDYzNjEzNQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T01:18:27Z","updated_at":"2020-10-07T01:19:35Z","author_association":"CONTRIBUTOR","body":"> \"This class is deprecated, please use dedicated verifier classes, such as BestPossibleExternalViewVerifier, etc, in tools.ClusterVerifiers.\"\r\n> \r\n> Is it possible that we just stop using this class?\r\n\r\n@jiajunwang, theoretically, you are right. On the other hand, we did not remove other deprecated class usage in our code base. We need to limit the scope of breaking up #1227. \r\n\r\nHow about let create a separate issue to track \"removing usage of deprecated ClusterVerifier\"","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704636135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704665324","html_url":"https://github.com/apache/helix/pull/1072#issuecomment-704665324","issue_url":"https://api.github.com/repos/apache/helix/issues/1072","id":704665324,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDY2NTMyNA==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T03:10:59Z","updated_at":"2020-10-07T03:10:59Z","author_association":"CONTRIBUTOR","body":"> Are we still planning to merge this PR in?  What is pending here?\n\n@lei-xia Yes. It was not urgent so it was left for a while. We will still need this to make it more accurate and consistent with znrecord size limit config. Will polish the PR and get it reviewed this week.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704665324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704685428","html_url":"https://github.com/apache/helix/pull/1416#issuecomment-704685428","issue_url":"https://api.github.com/repos/apache/helix/issues/1416","id":704685428,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDY4NTQyOA==","user":{"login":"zhangmeng916","id":56051770,"node_id":"MDQ6VXNlcjU2MDUxNzcw","avatar_url":"https://avatars.githubusercontent.com/u/56051770?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangmeng916","html_url":"https://github.com/zhangmeng916","followers_url":"https://api.github.com/users/zhangmeng916/followers","following_url":"https://api.github.com/users/zhangmeng916/following{/other_user}","gists_url":"https://api.github.com/users/zhangmeng916/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangmeng916/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangmeng916/subscriptions","organizations_url":"https://api.github.com/users/zhangmeng916/orgs","repos_url":"https://api.github.com/users/zhangmeng916/repos","events_url":"https://api.github.com/users/zhangmeng916/events{/privacy}","received_events_url":"https://api.github.com/users/zhangmeng916/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T04:34:36Z","updated_at":"2020-10-07T04:34:36Z","author_association":"CONTRIBUTOR","body":"This PR is ready to merge. Approved by @pkuwm \r\nFinal commit message:\r\nAdd REST API for cluster topology\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704685428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/704707243","html_url":"https://github.com/apache/helix/pull/1447#issuecomment-704707243","issue_url":"https://api.github.com/repos/apache/helix/issues/1447","id":704707243,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDcwNzI0Mw==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T05:45:08Z","updated_at":"2020-10-07T05:45:08Z","author_association":"MEMBER","body":"minor: suggest to change the PR (commit) title to \"Replace Thread.sleep() with TestHelper.verify() to fix the flaky unit tests\".","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/704707243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705145881","html_url":"https://github.com/apache/helix/pull/1447#issuecomment-705145881","issue_url":"https://api.github.com/repos/apache/helix/issues/1447","id":705145881,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTE0NTg4MQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T19:27:05Z","updated_at":"2020-10-07T19:27:05Z","author_association":"CONTRIBUTOR","body":"This diff is approved. Please help to merge\r\n\r\n> fix #1446 \r\nQuite some unit test still use Thread.sleep(xxx) to wait for a\r\ncondition to happen. This is a source of falkiness of test. This\r\nmay also make the test running unnecessarily long. We address\r\nthis issue with TestHelper.verify() method.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705145881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705146360","html_url":"https://github.com/apache/helix/pull/1447#issuecomment-705146360","issue_url":"https://api.github.com/repos/apache/helix/issues/1447","id":705146360,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTE0NjM2MA==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T19:28:03Z","updated_at":"2020-10-07T19:28:03Z","author_association":"CONTRIBUTOR","body":"3 PRs have duplicate code which increases the effort for reviewers to review. I suggest you make them one by one or clean the duplicate code ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705146360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705149843","html_url":"https://github.com/apache/helix/pull/1445#issuecomment-705149843","issue_url":"https://api.github.com/repos/apache/helix/issues/1445","id":705149843,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTE0OTg0Mw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T19:34:43Z","updated_at":"2020-10-07T19:34:43Z","author_association":"CONTRIBUTOR","body":"This pull is approved. Please help to merge\r\n\r\n>fix #1444 \r\nClusterStateVerifier need to be closable. Otherwise, we may leak\r\nZooKeeper client session together with ZkClient. That is thread\r\nleakage with memory leakage and potentially Zookeeper server\r\nresource hogging.\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705149843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705151612","html_url":"https://github.com/apache/helix/pull/1447#issuecomment-705151612","issue_url":"https://api.github.com/repos/apache/helix/issues/1447","id":705151612,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTE1MTYxMg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T19:38:36Z","updated_at":"2020-10-07T19:38:36Z","author_association":"CONTRIBUTOR","body":"The PRs are all broke out from #1227. We need to make them individually compiles. Thus the duplicate code. Once I merge them in to #1227, the duplication would be gone. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705151612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705251143","html_url":"https://github.com/apache/helix/pull/1449#issuecomment-705251143","issue_url":"https://api.github.com/repos/apache/helix/issues/1449","id":705251143,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTI1MTE0Mw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T23:49:03Z","updated_at":"2020-10-07T23:49:03Z","author_association":"CONTRIBUTOR","body":"This diff is approved. Please help to merge into trunk\r\n\r\n>fix #1448 part 1\r\nHelixClusterVerifier verify() and related method may return\r\npre-maturely. The reason is that the verify the converging stable\r\ncondition too early before controller has a chance to make\r\nchange. Basically the previous stable state is mistaken as the\r\nexpected next stable state.\r\n\r\nWe fix this issue by adding waitTillVerify() timeout in\r\nconstruction time of verifier.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705251143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705252616","html_url":"https://github.com/apache/helix/pull/1447#issuecomment-705252616","issue_url":"https://api.github.com/repos/apache/helix/issues/1447","id":705252616,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTI1MjYxNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-07T23:54:30Z","updated_at":"2020-10-07T23:54:30Z","author_association":"CONTRIBUTOR","body":"The diff is approved, please help to merge into trunk.\r\n\r\n>fix #1446\r\nQuite some unit test still use Thread.sleep(xxx) to wait for a\r\ncondition to happen. This is a source of falkiness of test. This\r\nmay also make the test running unnecessarily long. We address\r\nthis issue with TestHelper.verify() method.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705252616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705258213","html_url":"https://github.com/apache/helix/pull/1362#issuecomment-705258213","issue_url":"https://api.github.com/repos/apache/helix/issues/1362","id":705258213,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTI1ODIxMw==","user":{"login":"xyuanlu","id":6392021,"node_id":"MDQ6VXNlcjYzOTIwMjE=","avatar_url":"https://avatars.githubusercontent.com/u/6392021?v=4","gravatar_id":"","url":"https://api.github.com/users/xyuanlu","html_url":"https://github.com/xyuanlu","followers_url":"https://api.github.com/users/xyuanlu/followers","following_url":"https://api.github.com/users/xyuanlu/following{/other_user}","gists_url":"https://api.github.com/users/xyuanlu/gists{/gist_id}","starred_url":"https://api.github.com/users/xyuanlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyuanlu/subscriptions","organizations_url":"https://api.github.com/users/xyuanlu/orgs","repos_url":"https://api.github.com/users/xyuanlu/repos","events_url":"https://api.github.com/users/xyuanlu/events{/privacy}","received_events_url":"https://api.github.com/users/xyuanlu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T00:14:34Z","updated_at":"2020-10-08T00:14:34Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged. Approved by @dasahcc \r\n\r\nFinal commit message:\r\nMove ST message to state validation from executing phase to scheduling phase.\r\n\r\nMove ST message to state validation to scheduling phase.because of the following reasons:\r\nIt is a no-op operation, thus we should not create a thread to execute it.\r\nThe lag between scheduling and executing could add additional latency for controller and eventually application latency. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705258213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705327032","html_url":"https://github.com/apache/helix/issues/1336#issuecomment-705327032","issue_url":"https://api.github.com/repos/apache/helix/issues/1336","id":705327032,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTMyNzAzMg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T04:48:39Z","updated_at":"2020-10-08T04:48:39Z","author_association":"CONTRIBUTOR","body":"LOG 2742\r\n>2020-10-08T00:48:47.6150751Z new config:ZnRecord=TestCluster_0, \r\n{\r\nFAULT_ZONE_TYPE=Host, PERSIST_BEST_POSSIBLE_ASSIGNMENT=true, SimpleField1=Value1, SimpleField2=Value2, TOPOLOGY=/Rack/Sub-Rack/Host/Instance, TOPOLOGY_AWARE_ENABLED=true, newField=newValue\r\n}\r\n{\r\nMapField1={key1=value1, key2=value2}, MapField2={key3=value1, key4=value2}, newMap={newkey1=newvalue1, newkey2=newvalue2}\r\n}\r\n{\r\n   **INSTANCE_CAPACITY_KEYS=[],** \r\n   ListField1=[Value1, Value2, Value3], \r\n   ListField2=[Value2, Value1, Value3], \r\n   newList=[newValue1, newValue2]\r\n}, \r\nStat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}\r\n2020-10-08T00:48:47.6152886Z End test :testAddConfigFields\r\n2020-10-08T00:48:47.6153403Z Start test :testUpdateConfigFields\r\n2020-10-08T00:48:47.6185510Z new config:ZnRecord=TestCluster_0, {FAULT_ZONE_TYPE=Host, PERSIST_BEST_POSSIBLE_ASSIGNMENT=true, SimpleField1=Value1, SimpleField2=Value2, TOPOLOGY=/Rack/Sub-Rack/Host/Instance, TOPOLOGY_AWARE_ENABLED=true, newField=newValue}{MapField1={key1=value1, key2=value2}, MapField2={key3=value1, key4=value2}, newMap={newkey1=newvalue1, newkey2=newvalue2}}{INSTANCE_CAPACITY_KEYS=[], ListField1=[Value1, Value2, Value3], ListField2=[Value2, Value1, Value3], newList=[newValue1, newValue2]}, Stat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705327032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705328578","html_url":"https://github.com/apache/helix/issues/1336#issuecomment-705328578","issue_url":"https://api.github.com/repos/apache/helix/issues/1336","id":705328578,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTMyODU3OA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T04:54:32Z","updated_at":"2020-10-08T04:54:32Z","author_association":"CONTRIBUTOR","body":"This is from debugger\r\n>Start test :testUpdateConfigFields\r\nnew config:ZnRecord=TestCluster_0,\r\n {\r\nFAULT_ZONE_TYPE=helixZoneId, PERSIST_BEST_POSSIBLE_ASSIGNMENT=true, SimpleField1=Value1, SimpleField2=Value2, newField=newValue\r\n}\r\n{\r\nMapField1={key1=value1, key2=value2}, MapField2={key3=value1, key4=value2}, newMap={newkey1=newvalue1, newkey2=newvalue2}\r\n}\r\n{\r\nListField1=[Value1, Value2, Value3], ListField2=[Value2, Value1, Value3], newList=[newValue1, newValue2]\r\n}, \r\nStat=Stat {_version=0, _creationTime=0, _modifiedTime=0, _ephemeralOwner=0}\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705328578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705349006","html_url":"https://github.com/apache/helix/pull/1450#issuecomment-705349006","issue_url":"https://api.github.com/repos/apache/helix/issues/1450","id":705349006,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTM0OTAwNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T05:59:59Z","updated_at":"2020-10-08T05:59:59Z","author_association":"CONTRIBUTOR","body":"This PR is approved, please help to merge into trunk.\r\n\r\n> HelixClusterVerifier verify() and related method may return\r\npre-maturely. The reason is that the verify the converging stable\r\ncondition too early before controller has a chance to make\r\nchange. Basically the previous stable state is mistaken as the\r\nexpected next stable state. Part two.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705349006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705362682","html_url":"https://github.com/apache/helix/issues/1336#issuecomment-705362682","issue_url":"https://api.github.com/repos/apache/helix/issues/1336","id":705362682,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTM2MjY4Mg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T06:33:54Z","updated_at":"2020-10-08T06:33:54Z","author_association":"CONTRIBUTOR","body":"Need to trace the origin of INSTANCE_CAPACITY_KEYS in github. Is it related to cloud config?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705362682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705806064","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-705806064","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":705806064,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTgwNjA2NA==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T20:29:43Z","updated_at":"2020-10-08T20:29:43Z","author_association":"MEMBER","body":"Are we targeting to output the memory usage after each test class? Will this PR make it happen?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705806064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705818222","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-705818222","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":705818222,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTgxODIyMg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T20:55:24Z","updated_at":"2020-10-08T20:55:24Z","author_association":"CONTRIBUTOR","body":"> Are we targeting to output the memory usage after each test class? Will this PR make it happen?\r\n\r\nCurrently, all the ones using ZkTestBase. Since the majority use  ZkTestBase, we have a good idea of the memory usage over time. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705818222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705859317","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-705859317","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":705859317,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTg1OTMxNw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T22:37:38Z","updated_at":"2020-10-08T22:37:38Z","author_association":"CONTRIBUTOR","body":"The PR is approved, please help to merge in.\r\n\r\n>Add thread leakage checker and memory usage reporter. The two\r\nutility would be invoke before and after test classes. The would\r\nhelp to detect/monitor resource/memory usage of the unit test.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705859317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/705926326","html_url":"https://github.com/apache/helix/pull/1455#issuecomment-705926326","issue_url":"https://api.github.com/repos/apache/helix/issues/1455","id":705926326,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTkyNjMyNg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T02:15:15Z","updated_at":"2020-10-09T02:15:15Z","author_association":"CONTRIBUTOR","body":"> I have concerns about this PR.\r\n> \r\n> 1. The way we disable purge is by setting the config everywhere. As we discussed, it is a temporary resolution. When we need to remove them, it would be messy.\r\n> 2. This PR mixes other changes with the purge change. Meaning we cannot revert it to remove the temporary \"fix\".\r\n> 3. I think we agreed on wait until Neal evaluate the ETA of a more graceful temp solution, do we have the conclusion yet?\r\n> 4. I think we can refactor a little bit by leveraging parent class. The current PR introduces lots of duplicate logic.\r\n\r\n3/ Last time we discussed, the conclusion is that let Neal work on read one more time before purging as a temp solution. I will help to validate by reproducing the phantom read problem in the debugger. Let us sync about this tomorrow then.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/705926326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706342191","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-706342191","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":706342191,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjM0MjE5MQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T18:39:01Z","updated_at":"2020-10-09T18:39:01Z","author_association":"CONTRIBUTOR","body":"> Still, 2 problems that I also mentioned in the other test improvement PRs.\r\n> \r\n> 1. What is the guideline for using a system print vs. log? Without confirming this point, I cannot review it effectively. I prefer log, BTW.\r\n> 2. Why not throw an exception on leakage? If just print error, then we can just let the tool runs every night. There is no need to do it with every \"mvn test\".\r\n>    For example, if people ignore the error, then we might figure it out weeks later. Then this check will be very less helpful.\r\n\r\nIf we throw exception, current test won't work. I reduced the threads leakage from around 3000 to several hundreds at this point. Getting it to 0 is still some way to go.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706342191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706365590","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-706365590","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":706365590,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjM2NTU5MA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T19:32:15Z","updated_at":"2020-10-09T19:32:15Z","author_association":"CONTRIBUTOR","body":"Sync-ed with JJ offline. Once the thread leakage reduced to 0. We will enable the throw exception (failing test). Before that, we use system.out to log it out for people to examine without enable info level logging","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706365590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706396680","html_url":"https://github.com/apache/helix/pull/1452#issuecomment-706396680","issue_url":"https://api.github.com/repos/apache/helix/issues/1452","id":706396680,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjM5NjY4MA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T20:50:28Z","updated_at":"2020-10-09T20:50:28Z","author_association":"CONTRIBUTOR","body":"The PR is approved. Please help to merge to trunk\r\n\r\n>Add thread leakage checker and memory usage reporter. The two\r\nutility would be invoke before and after test classes. The would\r\nhelp to detect/monitor resource/memory usage of the unit test.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706396680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706427049","html_url":"https://github.com/apache/helix/pull/1413#issuecomment-706427049","issue_url":"https://api.github.com/repos/apache/helix/issues/1413","id":706427049,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjQyNzA0OQ==","user":{"login":"NealSun96","id":18000949,"node_id":"MDQ6VXNlcjE4MDAwOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/18000949?v=4","gravatar_id":"","url":"https://api.github.com/users/NealSun96","html_url":"https://github.com/NealSun96","followers_url":"https://api.github.com/users/NealSun96/followers","following_url":"https://api.github.com/users/NealSun96/following{/other_user}","gists_url":"https://api.github.com/users/NealSun96/gists{/gist_id}","starred_url":"https://api.github.com/users/NealSun96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NealSun96/subscriptions","organizations_url":"https://api.github.com/users/NealSun96/orgs","repos_url":"https://api.github.com/users/NealSun96/repos","events_url":"https://api.github.com/users/NealSun96/events{/privacy}","received_events_url":"https://api.github.com/users/NealSun96/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-09T22:31:04Z","updated_at":"2020-10-09T22:31:04Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @dasahcc @jiajunwang \r\nFinal commit message:\r\n## Feature: Offline Node Timeout During Maintenance Mode  ##\r\nWe would like to avoid the scenario where nodes that have been offline for a while come back to life during maintenance mode. Solution: if a node has been offline for a certain period of time, the maintenance mode rebalancer will not assign partitions to it.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706427049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706491387","html_url":"https://github.com/apache/helix/issues/1457#issuecomment-706491387","issue_url":"https://api.github.com/repos/apache/helix/issues/1457","id":706491387,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjQ5MTM4Nw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-10T05:29:55Z","updated_at":"2020-10-10T05:29:55Z","author_association":"CONTRIBUTOR","body":"cc: @alirezazamani ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706491387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/706494047","html_url":"https://github.com/apache/helix/issues/1458#issuecomment-706494047","issue_url":"https://api.github.com/repos/apache/helix/issues/1458","id":706494047,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjQ5NDA0Nw==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-10T05:59:55Z","updated_at":"2020-10-10T05:59:55Z","author_association":"CONTRIBUTOR","body":"```\r\n   ExternalView externalView = null;\r\n    for (int i = 0; i < 10; i++) {\r\n      Thread.sleep(100);\r\n      externalView = accessor.getProperty(keyBuilder.externalView(\"TestDB0\"));\r\n      // System.out.println(\"externalView: \" + externalView);\r\n      if (externalView == null) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    Assert.assertNull(externalView, \"external-view for TestDB0 should be removed, but was: \"\r\n        + externalView);  --->\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/706494047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/707309894","html_url":"https://github.com/apache/helix/issues/1457#issuecomment-707309894","issue_url":"https://api.github.com/repos/apache/helix/issues/1457","id":707309894,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzMwOTg5NA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T19:41:08Z","updated_at":"2020-10-12T19:41:08Z","author_association":"CONTRIBUTOR","body":"\r\n2020-10-10T03:48:18.5395568Z START TestDropCurrentStateRunningTask testDropCurrentStateRunningTask at Sat Oct 10 03:48:18 UTC 2020\r\n2020-10-10T03:48:18.6956488Z 567180 [ZkClient-EventThread-10033-localhost:2183] ERROR org.apache.helix.zookeeper.zkclient.callback.ZkAsyncCallbacks  - Interrupted waiting for success\r\n2020-10-10T03:48:18.6958575Z java.lang.InterruptedException\r\n2020-10-10T03:48:18.6959535Z \tat java.lang.Object.wait(Native Method)\r\n2020-10-10T03:48:18.6960103Z \tat java.lang.Object.wait(Object.java:502)\r\n2020-10-10T03:48:18.6961561Z \tat org.apache.helix.zookeeper.zkclient.callback.ZkAsyncCallbacks$DefaultCallback.waitForSuccess(ZkAsyncCallbacks.java:220)\r\n2020-10-10T03:48:18.6963683Z \tat org.apache.helix.zookeeper.zkclient.ZkClient.issueSync(ZkClient.java:1278)\r\n2020-10-10T03:48:18.6965204Z \tat org.apache.helix.zookeeper.zkclient.ZkClient.access$300(ZkClient.java:84)\r\n2020-10-10T03:48:18.6966637Z \tat org.apache.helix.zookeeper.zkclient.ZkClient$4.run(ZkClient.java:1304)\r\n2020-10-10T03:48:18.6967971Z \tat org.apache.helix.zookeeper.zkclient.ZkEventThread.run(ZkEventThread.java:99)\r\n2020-10-10T03:48:20.8114969Z 569294 [HelixTaskExecutor-message_handle_thread_4351] ERROR org.apache.helix.task.TaskStateModel  - Participant localhost_12918's thread for task partition testDropCurrentStateRunningTask_JOB0_0 not found while attempting to cancel the task; Manual cleanup may be required.\r\n2020-10-10T03:48:20.8406227Z 569320 [HelixTaskExecutor-message_handle_thread_4352] ERROR org.apache.helix.task.TaskStateModel  - Participant localhost_12919's thread for task partition testDropCurrentStateRunningTask_JOB0_0 not found while attempting to cancel the task; Manual cleanup may be required.\r\n2020-10-10T03:49:20.9323408Z END TestDropCurrentStateRunningTask testDropCurrentStateRunningTask at Sat Oct 10 03:49:20 UTC 2020, took: 62391ms.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/707309894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]