[{"url":"https://api.github.com/repos/apache/whirr/issues/comments/1426170","html_url":"https://github.com/apache/whirr/pull/1#issuecomment-1426170","issue_url":"https://api.github.com/repos/apache/whirr/issues/1","id":1426170,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjYxNzA=","user":{"login":"andreisavu","id":55869,"node_id":"MDQ6VXNlcjU1ODY5","avatar_url":"https://avatars.githubusercontent.com/u/55869?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisavu","html_url":"https://github.com/andreisavu","followers_url":"https://api.github.com/users/andreisavu/followers","following_url":"https://api.github.com/users/andreisavu/following{/other_user}","gists_url":"https://api.github.com/users/andreisavu/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisavu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisavu/subscriptions","organizations_url":"https://api.github.com/users/andreisavu/orgs","repos_url":"https://api.github.com/users/andreisavu/repos","events_url":"https://api.github.com/users/andreisavu/events{/privacy}","received_events_url":"https://api.github.com/users/andreisavu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-06-23T15:51:45Z","updated_at":"2011-06-23T15:51:45Z","author_association":"MEMBER","body":"We will continue development on this issue on JIRA: https://issues.apache.org/jira/browse/WHIRR-334 \n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/1426170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3196105","html_url":"https://github.com/apache/whirr/pull/3#issuecomment-3196105","issue_url":"https://api.github.com/repos/apache/whirr/issues/3","id":3196105,"node_id":"MDEyOklzc3VlQ29tbWVudDMxOTYxMDU=","user":{"login":"noiano","id":335631,"node_id":"MDQ6VXNlcjMzNTYzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/335631?v=4","gravatar_id":"","url":"https://api.github.com/users/noiano","html_url":"https://github.com/noiano","followers_url":"https://api.github.com/users/noiano/followers","following_url":"https://api.github.com/users/noiano/following{/other_user}","gists_url":"https://api.github.com/users/noiano/gists{/gist_id}","starred_url":"https://api.github.com/users/noiano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noiano/subscriptions","organizations_url":"https://api.github.com/users/noiano/orgs","repos_url":"https://api.github.com/users/noiano/repos","events_url":"https://api.github.com/users/noiano/events{/privacy}","received_events_url":"https://api.github.com/users/noiano/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2011-12-18T18:34:30Z","updated_at":"2011-12-18T18:34:30Z","author_association":"NONE","body":"using jira\n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3196105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3383271","html_url":"https://github.com/apache/whirr/pull/4#issuecomment-3383271","issue_url":"https://api.github.com/repos/apache/whirr/issues/4","id":3383271,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODMyNzE=","user":{"login":"andreisavu","id":55869,"node_id":"MDQ6VXNlcjU1ODY5","avatar_url":"https://avatars.githubusercontent.com/u/55869?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisavu","html_url":"https://github.com/andreisavu","followers_url":"https://api.github.com/users/andreisavu/followers","following_url":"https://api.github.com/users/andreisavu/following{/other_user}","gists_url":"https://api.github.com/users/andreisavu/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisavu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisavu/subscriptions","organizations_url":"https://api.github.com/users/andreisavu/orgs","repos_url":"https://api.github.com/users/andreisavu/repos","events_url":"https://api.github.com/users/andreisavu/events{/privacy}","received_events_url":"https://api.github.com/users/andreisavu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-01-06T11:09:46Z","updated_at":"2012-01-06T11:09:46Z","author_association":"MEMBER","body":"Integration tests are failing both on aws-ec2 & cloudservers-uk. \n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3383271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3383296","html_url":"https://github.com/apache/whirr/pull/4#issuecomment-3383296","issue_url":"https://api.github.com/repos/apache/whirr/issues/4","id":3383296,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODMyOTY=","user":{"login":"andreisavu","id":55869,"node_id":"MDQ6VXNlcjU1ODY5","avatar_url":"https://avatars.githubusercontent.com/u/55869?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisavu","html_url":"https://github.com/andreisavu","followers_url":"https://api.github.com/users/andreisavu/followers","following_url":"https://api.github.com/users/andreisavu/following{/other_user}","gists_url":"https://api.github.com/users/andreisavu/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisavu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisavu/subscriptions","organizations_url":"https://api.github.com/users/andreisavu/orgs","repos_url":"https://api.github.com/users/andreisavu/repos","events_url":"https://api.github.com/users/andreisavu/events{/privacy}","received_events_url":"https://api.github.com/users/andreisavu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-01-06T11:11:35Z","updated_at":"2012-01-06T11:11:35Z","author_association":"MEMBER","body":"We also need to upgrade the test deps:\n\n```\n     <dependency>\n       <groupId>org.apache.cassandra</groupId>\n       <artifactId>cassandra-all</artifactId>\n-      <version>0.7.0</version>\n+      <version>1.0.6</version>\n     </dependency>\n```\n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3383296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3393402","html_url":"https://github.com/apache/whirr/pull/4#issuecomment-3393402","issue_url":"https://api.github.com/repos/apache/whirr/issues/4","id":3393402,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTM0MDI=","user":{"login":"nmilford","id":72489,"node_id":"MDQ6VXNlcjcyNDg5","avatar_url":"https://avatars.githubusercontent.com/u/72489?v=4","gravatar_id":"","url":"https://api.github.com/users/nmilford","html_url":"https://github.com/nmilford","followers_url":"https://api.github.com/users/nmilford/followers","following_url":"https://api.github.com/users/nmilford/following{/other_user}","gists_url":"https://api.github.com/users/nmilford/gists{/gist_id}","starred_url":"https://api.github.com/users/nmilford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nmilford/subscriptions","organizations_url":"https://api.github.com/users/nmilford/orgs","repos_url":"https://api.github.com/users/nmilford/repos","events_url":"https://api.github.com/users/nmilford/events{/privacy}","received_events_url":"https://api.github.com/users/nmilford/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-01-07T01:26:45Z","updated_at":"2012-01-07T01:26:45Z","author_association":"NONE","body":"Integration tests fail because _initial_token_ needs to be explicitly set. Complete [WHIRR-469](https://issues.apache.org/jira/browse/WHIRR-469) and you'll be good to go.\n\nThe first two nodes get spawned, each getting 50% of the ring \n\n> nathan@ip-10-195-47-159:~$ nodetool -h $(hostname) -p 7199 ring\n> Address         DC          Rack        Status State   Load            Owns    Token  \n> 10.195.47.159   datacenter1 rack1       Up     Normal  13.48 KB        **50.00%**  66545260261209709411633801669351785558  \n> 10.116.134.146  datacenter1 rack1       Up     Normal  6.67 KB         **50.00%**  151615851991444325277477453527293838422   \n\nThis is a successful start up.\n\n> nathan@ip-10-116-134-146:~$ tail -15 /var/log/cassandra/system.log\n> INFO [FlushWriter:1] 2012-01-07 01:02:15,249 Memtable.java (line 277) Completed flushing  /var/lib/cassandra/data/system/LocationInfo-hc-3-Data.db (87 bytes)\n> INFO [main] 2012-01-07 01:02:15,250 StorageService.java (line 627) JOINING: sleeping 30000 ms for pending range setup\n> INFO [main] 2012-01-07 01:02:45,257 StorageService.java (line 627) JOINING: Starting to bootstrap...\n> INFO [main] 2012-01-07 01:02:45,269 ColumnFamilyStore.java (line 692) Enqueuing flush of Memtable-LocationInfo@6923467(53/66 serialized/live bytes, 2 ops)\n> INFO [FlushWriter:1] 2012-01-07 01:02:45,270 Memtable.java (line 240) Writing Memtable-LocationInfo@6923467(53/66 serialized/live bytes, 2 ops)\n> INFO [FlushWriter:1] 2012-01-07 01:02:45,310 Memtable.java (line 277) Completed flushing /var/lib/cassandra/data/system/LocationInfo-hc-4-Data.db (163 bytes)\n> INFO [CompactionExecutor:1] 2012-01-07 01:02:45,316 CompactionTask.java (line 113) Compacting [SSTableReader(path='/var/lib/cassandra/data/system/LocationInfo-hc-2-Data.db'), SSTableReader(path='/var/lib/cassandra/data/system/LocationInfo-hc-1-Data.db'), SSTableReader(path='/var/lib/cassandra/data/system/LocationInfo-hc-4-Data.db'), SSTableReader(path='/var/lib/cassandra/data/system/LocationInfo-hc-3-Data.db')]\n> INFO [main] 2012-01-07 01:02:45,326 StorageService.java (line 948) Node /10.116.134.146 state jump to normal\n> INFO [main] 2012-01-07 01:02:45,327 StorageService.java (line 589) Bootstrap/Replace/Move completed! Now serving reads.\n> INFO [main] 2012-01-07 01:02:45,338 Mx4jTool.java (line 72) Will not load MX4J, mx4j-tools.jar is not in the classpath\n> INFO [main] 2012-01-07 01:02:45,440 CassandraDaemon.java (line 125) Binding thrift service to /0.0.0.0:9160\n> INFO [main] 2012-01-07 01:02:45,444 CassandraDaemon.java (line 134) Using TFastFramedTransport with a max frame size of 15728640 bytes.\n> INFO [main] 2012-01-07 01:02:45,448 CassandraDaemon.java (line 161) Using synchronous/threadpool thrift server on /0.0.0.0 : 9160\n> **INFO [Thread-5] 2012-01-07 01:02:45,451 CassandraDaemon.java (line 213) Listening for thrift clients...**\n\nThen it appears that any subsequent Cassandra node fails to start when called.\n\nThis is on the 3rd node that failed to start on the first try.\n\n> nathan@ip-10-242-47-147:~$ tail -15 /var/log/cassandra/system.log \n>  INFO [main] 2012-01-07 01:02:17,217 StorageService.java (line 627) JOINING: getting bootstrap token\n> **ERROR [main] 2012-01-07 01:02:17,222 AbstractCassandraDaemon.java (line 354) Exception encountered during startup\n> java.lang.RuntimeException: Every node is a bootstrap source! Please specify an initial token manually or wait for an existing  bootstrap operation to finish.\n>   at org.apache.cassandra.dht.BootStrapper.getBootstrapSource(BootStrapper.java:194)\n>   at org.apache.cassandra.dht.BootStrapper.getBalancedToken(BootStrapper.java:150)\n>   at org.apache.cassandra.dht.BootStrapper.getBootstrapToken(BootStrapper.java:145)\n>   at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:535)\n>   at org.apache.cassandra.service.StorageService.initServer(StorageService.java:472)\n>   at org.apache.cassandra.service.StorageService.initServer(StorageService.java:385)\n>   at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:215)\n>   at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:337)\n>   at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:107)**\n>  INFO [StorageServiceShutdownHook] 2012-01-07 01:02:17,251 MessagingService.java (line 478) Shutting down MessageService...\n>  INFO [ACCEPT-/10.242.47.147] 2012-01-07 01:02:17,252 MessagingService.java (line 635) MessagingService shutting down server thread.\n>  INFO [StorageServiceShutdownHook] 2012-01-07 01:02:17,252 MessagingService.java (line 494) Waiting for in-progress requests to complete\n\nI previously missed this, because I went into the instances and started the dead nodes manually after Whirr fired it up, not thinking anything of it.\n\nAfter  manually starting the third node it'll take half of another node's tokens.\n\n> nathan@ip-10-195-47-159:~$ nodetool -h $(hostname) -p 7199 ring\n> Address         DC          Rack        Status State   Load            Owns    Token  \n> 10.242.47.147   datacenter1 rack1       Up     Normal  20.09 KB        **25.00%**  24009964396092401478711975740380759126  \n> 10.195.47.159   datacenter1 rack1       Up     Normal  6.7 KB          **25.00%**  66545260261209709411633801669351785558  \n> 10.116.134.146  datacenter1 rack1       Up     Normal  11.08 KB        50.00%  151615851991444325277477453527293838422  \n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3393402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3395530","html_url":"https://github.com/apache/whirr/pull/4#issuecomment-3395530","issue_url":"https://api.github.com/repos/apache/whirr/issues/4","id":3395530,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTU1MzA=","user":{"login":"andreisavu","id":55869,"node_id":"MDQ6VXNlcjU1ODY5","avatar_url":"https://avatars.githubusercontent.com/u/55869?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisavu","html_url":"https://github.com/andreisavu","followers_url":"https://api.github.com/users/andreisavu/followers","following_url":"https://api.github.com/users/andreisavu/following{/other_user}","gists_url":"https://api.github.com/users/andreisavu/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisavu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisavu/subscriptions","organizations_url":"https://api.github.com/users/andreisavu/orgs","repos_url":"https://api.github.com/users/andreisavu/repos","events_url":"https://api.github.com/users/andreisavu/events{/privacy}","received_events_url":"https://api.github.com/users/andreisavu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-01-07T12:42:57Z","updated_at":"2012-01-07T12:42:57Z","author_association":"MEMBER","body":"Thanks for investigating this. I will start to work on WHIRR-469. \n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3395530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3492766","html_url":"https://github.com/apache/whirr/pull/4#issuecomment-3492766","issue_url":"https://api.github.com/repos/apache/whirr/issues/4","id":3492766,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI3NjY=","user":{"login":"andreisavu","id":55869,"node_id":"MDQ6VXNlcjU1ODY5","avatar_url":"https://avatars.githubusercontent.com/u/55869?v=4","gravatar_id":"","url":"https://api.github.com/users/andreisavu","html_url":"https://github.com/andreisavu","followers_url":"https://api.github.com/users/andreisavu/followers","following_url":"https://api.github.com/users/andreisavu/following{/other_user}","gists_url":"https://api.github.com/users/andreisavu/gists{/gist_id}","starred_url":"https://api.github.com/users/andreisavu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreisavu/subscriptions","organizations_url":"https://api.github.com/users/andreisavu/orgs","repos_url":"https://api.github.com/users/andreisavu/repos","events_url":"https://api.github.com/users/andreisavu/events{/privacy}","received_events_url":"https://api.github.com/users/andreisavu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-01-14T15:17:20Z","updated_at":"2012-01-14T15:17:20Z","author_association":"MEMBER","body":"I have attached this pull as a .patch to https://issues.apache.org/jira/browse/WHIRR-407 + some changes for node balancing. \n","reactions":{"url":"https://api.github.com/repos/apache/whirr/issues/comments/3492766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]