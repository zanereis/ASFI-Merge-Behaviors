[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386704107","html_url":"https://github.com/apache/accumulo/pull/3163#issuecomment-1386704107","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3163","id":1386704107,"node_id":"IC_kwDOACaFSM5Sp2zr","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T08:59:22Z","updated_at":"2023-01-18T08:59:22Z","author_association":"MEMBER","body":"This was a backport of #3150 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386704107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386705724","html_url":"https://github.com/apache/accumulo/pull/3150#issuecomment-1386705724","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3150","id":1386705724,"node_id":"IC_kwDOACaFSM5Sp3M8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T09:00:42Z","updated_at":"2023-01-18T09:00:42Z","author_association":"MEMBER","body":"This was backported to 2.1.1 in #3163 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386705724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386710766","html_url":"https://github.com/apache/accumulo/issues/3094#issuecomment-1386710766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3094","id":1386710766,"node_id":"IC_kwDOACaFSM5Sp4bu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T09:04:16Z","updated_at":"2023-01-18T09:04:16Z","author_association":"MEMBER","body":"Let's leave it open for now, but I removed the 2.1.1 project label from it, because we don't have anything we can do for this right now, until we get more information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386710766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387304543","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1387304543","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1387304543,"node_id":"IC_kwDOACaFSM5SsJZf","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T15:57:52Z","updated_at":"2023-01-18T15:57:52Z","author_association":"CONTRIBUTOR","body":"> 1. What behavior do you expect if there was a crash on assignment, or a crash/kill that circumvented an unassignment? I was wondering if the behavior in these edge cases for the 'assignment' mode made sense as you've implemented them here.\r\n\r\nI update the last location on both the loading of the tablet and on the unloading of the tablet.  Hence on a crash/kill the last location will still have been updated.  Also this allows one to change the mode while the system is up and running and still have the last location updated when the system is taken down.  Perhaps I don't quite understand this question however.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387304543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387306123","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1387306123","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1387306123,"node_id":"IC_kwDOACaFSM5SsJyL","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T15:58:58Z","updated_at":"2023-01-18T15:58:58Z","author_association":"CONTRIBUTOR","body":"> 2. I'm also curious what you thought about how it should work if the value were to be changed in the ZooKeeper system config while a system was running.\r\n\r\nI update the last location on both the loading of the tablet and on the unloading of the tablet. This allows one to change the mode while the system is up and running and still have the last location updated when the system is taken down.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387306123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387308147","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1387308147","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1387308147,"node_id":"IC_kwDOACaFSM5SsKRz","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T16:00:25Z","updated_at":"2023-01-18T16:00:25Z","author_association":"CONTRIBUTOR","body":"> 3. Also, the property name is a tserver property... but since the locations are updated via Ample, it's not clear that the tserver is the only one that exclusively updates them. I wonder if the manager might update the current/last location, and if the property is still appropriately named in that case.\r\n\r\nI am pretty sure only the tserver is updating the last location.  That holds for both modes.  Also I want to be able to change this property while the system is running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387308147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387311058","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1387311058","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1387311058,"node_id":"IC_kwDOACaFSM5SsK_S","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T16:02:17Z","updated_at":"2023-01-18T16:02:17Z","author_association":"CONTRIBUTOR","body":"> 4. I'm also curious if you had thought about backporting this to 2.1.\r\n\r\nThis was actually implemented against 2.1 so that backport is trivial.  I also have a branch with the backport to 1.10.x prepared and I have tested that on some internal clusters.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387311058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387455403","html_url":"https://github.com/apache/accumulo/pull/2827#issuecomment-1387455403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2827","id":1387455403,"node_id":"IC_kwDOACaFSM5SsuOr","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T17:32:05Z","updated_at":"2023-01-18T17:32:05Z","author_association":"CONTRIBUTOR","body":"This PR will be superseded by the changes with https://github.com/apache/accumulo/pull/3161","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387455403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387473513","html_url":"https://github.com/apache/accumulo/pull/3118#issuecomment-1387473513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3118","id":1387473513,"node_id":"IC_kwDOACaFSM5Ssypp","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T17:47:51Z","updated_at":"2023-01-19T16:55:51Z","author_association":"CONTRIBUTOR","body":"Current output sample with d8ace68633c15\r\n\r\nErrors that would impact an upgrade are shown as:\r\n\r\n```\r\nERROR_ACCUMULO_MISSING_SOME:NOT_PRIVATE /accumulo/f1fe5db4-569d-44c2-a91e-c6a3f5be1f08/badacl r:anyone\r\n\r\n```\r\n\r\nA sample report:\r\n\r\n```\r\nReport Time: 2023-01-18T17:44:38.23753Z\r\n-----------------------------------------------\r\nOutput format:\r\nACCUMULO_PERM:OTHER_PERM path user_acls...\r\n\r\nZooKeeper acls for instance ID: 2a7aab5f-fca0-443d-b41e-768d3b9ca5dd\r\n\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/f1fe5db4-569d-44c2-a91e-c6a3f5be1f08 cdrwa:accumulo, r:anyone\r\nERROR_ACCUMULO_MISSING_SOME:NOT_PRIVATE /accumulo/f1fe5db4-569d-44c2-a91e-c6a3f5be1f08/badacl r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/bulk_failed_copyq cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/bulk_failed_copyq/locks cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/compactors cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/config cdrwa:accumulo\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/coordinators cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/coordinators/lock cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/dead cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/dead/tservers cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/fate cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/gc cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/gc/lock cdrwa:accumulo, r:anyone\r\n...\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/wals/localhost:9997[10000ef0a060004] cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/wals/localhost:9997[10000ef0a060004]/0f162f5c-5c00-4e22-8ea9-f7f6afbd7395 cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/2a7aab5f-fca0-443d-b41e-768d3b9ca5dd/wals/localhost:9997[10000ef0a060004]/79db80af-eacb-4c7f-9cdd-130917842c8c cdrwa:accumulo, r:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/instances cdrwa:anyone\r\nACCUMULO_OKAY:NOT_PRIVATE /accumulo/instances/uno cdrwa:accumulo, r:anyone\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1387473513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396195898","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1396195898","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1396195898,"node_id":"IC_kwDOACaFSM5TOEI6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T22:46:39Z","updated_at":"2023-01-18T22:46:39Z","author_association":"MEMBER","body":"In testing this, I have seen the ITs hang twice, for at least 8 hours each before I terminated the build. I have not investigated to determine what is causing the problem. It may be unrelated, and a mere coincidence, but I have not seen it happen with other builds recently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396195898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396410621","html_url":"https://github.com/apache/accumulo/pull/3164#issuecomment-1396410621","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3164","id":1396410621,"node_id":"IC_kwDOACaFSM5TO4j9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T04:03:26Z","updated_at":"2023-01-19T04:03:26Z","author_association":"CONTRIBUTOR","body":"> Does this patch need to be applied to 2.1? (Also the unit tests are failing)\r\n\r\nYes it will need to be applied to 2.1.  The bug was found when testing offline scans, but it fixes more general problems with btach scans in the scan server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396410621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396918063","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1396918063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1396918063,"node_id":"IC_kwDOACaFSM5TQ0cv","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T12:42:21Z","updated_at":"2023-01-19T12:42:21Z","author_association":"CONTRIBUTOR","body":"Kicked off a new IT build. I don't believe that your test runs had my latest changes. 2/3 of my IT's have passed as of this point. :crossed_fingers: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1396918063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397146014","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1397146014","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1397146014,"node_id":"IC_kwDOACaFSM5TRsGe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T15:23:05Z","updated_at":"2023-01-19T15:23:05Z","author_association":"CONTRIBUTOR","body":"IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397146014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397436262","html_url":"https://github.com/apache/accumulo/pull/3164#issuecomment-1397436262","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3164","id":1397436262,"node_id":"IC_kwDOACaFSM5TSy9m","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T18:36:48Z","updated_at":"2023-01-19T18:36:48Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - you may want to merge this directly to 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397436262/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397449873","html_url":"https://github.com/apache/accumulo/issues/2775#issuecomment-1397449873","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2775","id":1397449873,"node_id":"IC_kwDOACaFSM5TS2SR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T18:50:12Z","updated_at":"2023-01-19T18:50:12Z","author_association":"CONTRIBUTOR","body":"@ivakegg submitted a [patch](https://github.com/apache/commons-vfs/pull/367) for [VFS-683](https://issues.apache.org/jira/projects/VFS/issues/VFS-683) that should be included in the VFS 2.10 release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397449873/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397546578","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1397546578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1397546578,"node_id":"IC_kwDOACaFSM5TTN5S","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T20:17:57Z","updated_at":"2023-01-19T20:17:57Z","author_association":"CONTRIBUTOR","body":"2nd IT build passed based on commit 16b5531. @ctubbsii - not sure what the issue was yesterday.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1397546578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398724375","html_url":"https://github.com/apache/accumulo/pull/3160#issuecomment-1398724375","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3160","id":1398724375,"node_id":"IC_kwDOACaFSM5TXtcX","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T17:34:58Z","updated_at":"2023-01-20T17:34:58Z","author_association":"CONTRIBUTOR","body":"This will resolve https://github.com/apache/accumulo/issues/3098","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398724375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398788327","html_url":"https://github.com/apache/accumulo/issues/3087#issuecomment-1398788327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3087","id":1398788327,"node_id":"IC_kwDOACaFSM5TX9Dn","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T18:40:01Z","updated_at":"2023-01-20T18:40:01Z","author_association":"CONTRIBUTOR","body":"Closing for now, can be re-opened if needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398788327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398803887","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1398803887","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1398803887,"node_id":"IC_kwDOACaFSM5TYA2v","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T18:54:04Z","updated_at":"2023-01-20T18:54:04Z","author_association":"CONTRIBUTOR","body":"Could this be the cause of #2606 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398803887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398817770","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1398817770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1398817770,"node_id":"IC_kwDOACaFSM5TYEPq","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T19:08:24Z","updated_at":"2023-01-20T19:08:24Z","author_association":"CONTRIBUTOR","body":"It does not seem to resolve #2606, I ran it with this change and the test still fails. @DomGarguilo noted that the slow iterator is pausing between calls to next which may be different that the time of the scan itself.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398817770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398819178","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1398819178","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1398819178,"node_id":"IC_kwDOACaFSM5TYElq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T19:09:25Z","updated_at":"2023-01-20T19:09:25Z","author_association":"CONTRIBUTOR","body":"ok, thx for checking.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398819178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398893342","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1398893342","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1398893342,"node_id":"IC_kwDOACaFSM5TYWse","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T20:25:51Z","updated_at":"2023-01-20T20:25:51Z","author_association":"CONTRIBUTOR","body":"30c674cbd8 modifies the ScanServerIT to test scan timeout - may resolve #2606","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1398893342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399303663","html_url":"https://github.com/apache/accumulo/pull/3136#issuecomment-1399303663","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3136","id":1399303663,"node_id":"IC_kwDOACaFSM5TZ63v","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-21T18:13:58Z","updated_at":"2023-01-21T18:13:58Z","author_association":"CONTRIBUTOR","body":"@ctubbsii and @dlmarion - I just pushed a new update and I have significantly reworked the PR. There's still work to be done...comments need updating, some tests still need fixing and to be updated, and there is still some old VFS references laying around, etc. But it's in a good enough state to be looked at again to make sure this new direction is correct before I finish polishing everything up.\r\n\r\nThe latest update now implements the agreed upon behavior of just re-using the existing 2 properties `general.context.class.loader.factory` and `table.class.loader.context`\r\n\r\nIf not specified the `DefaultContextClassLoaderFactory` now will just load a new `URLClassLoader` and use the table context property as a list of URIs. I got rid of the ContextManager and simplified things to just cache classloaders for a period of time in a cache (for how long is something I wasn't sure of yet). I got rid of the complex logic to remove contexts as it seemed unnecessary and a simple Caffeine cache should work.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399303663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399316343","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1399316343","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1399316343,"node_id":"IC_kwDOACaFSM5TZ993","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-21T19:23:42Z","updated_at":"2023-01-21T19:23:42Z","author_association":"CONTRIBUTOR","body":"I investigated this again yesterday and there are still some reports of this same behavior happening against 1.10.x. It's similar behavior where there is missing data returned from the scan of the accumulo.metdata table during GC leading to references being missed. In this case an entire tablet worth of data is missing which leads to files being deleted that shouldn't because the file references aren't seen.\r\n\r\nA simple example of the scenario seen is:\r\n\r\n1. accumulo.root has 1 tablet containing the metadata for 4 accumulo.metadata tablets.\r\n2. The 3rd accumulo metadata tablet contains metadata for the 10th, 11th, and 12th tablets in table X.\r\n3. GC runs and all of the metadata contained in the 1st, 2nd, and 4th accumulo.metadata tablets is returned and used appropriately by the garbage collector\r\n4. However, during the GC run all of the data for the 3rd accumulo metadata tablet goes missing which leads to missing the references to files in the 10th, 11th, and 12th tablets from table X.\r\n5. Because the file references are missing, files for the 10th, 11th, 12th tablets of table X get removed \r\n\r\nIn some instances the issue could be traced to a hardware failure (disk issue) but this has not always been the case. Even if there is a hardware failure the fact that data is missing should be detected during the safety checks of the scan for file references of the metadata table. If there are errors/inconsistencies detected during the scan (due to splits, etc) then the iterator that is used should reset itself to prevent an issue.\r\n\r\nHowever, because there ends up being file references missing and bypassing the checks this would seem to maybe indicate an issue in the iterator error handling/detection so maybe something isn't quite right because GC continued with data not being detected as missing. The iterator used for scanning for file references is the [TabletIterator](https://github.com/apache/accumulo/blob/88b75633f7eef883f07446cfbff01cc193ecf6fa/server/base/src/main/java/org/apache/accumulo/server/util/TabletIterator.java#L57) used in version 1.10. It's not known if the issue still exists in 2.1 as there were changes made and a different Iterator is now used but if it does it would likely be in the equivalent iterator used for the references scan in the [LinkingIterator](https://github.com/apache/accumulo/blob/bd49cff1be7de00a43cd9f03e75c319e5ab3735d/core/src/main/java/org/apache/accumulo/core/metadata/schema/LinkingIterator.java#L50) in 2.1 .\r\n\r\nThe root cause of the issue isn't known so it makes it hard to fix or find a solution for now but I talked to @dlmarion about this and thought of a few things to bring up and discuss.\r\n\r\n1. Does it make sense to just abort the GC run vs trying to reset the iterator if an error is detected? The gc process runs in a loop anyways and will just re-run the next iteration. It's possible there's an issue with resetting the iterator so maybe just aborting would be better.\r\n2. Is it possible there is actually a server side error that isn't bubbling back to the client which would lead to the client continuing the scan when it shouldn't?\r\n3. Should we try and run an extra sanity check somehow to verify the data is actually correct? For example, should we try also using the Offline iterator to scan and compare? Can we verify we actually received all the tablets we should by checking before and after the run? Do we run the scan multiple times and compare? If we ran multiple times we could take a superset of files seen (anything that truly should be GC'd would just get removed next run)\r\n4. Because an entire tablet of data was missing in this scenario is it possible it's related to the tablet splitting and the data was missed?\r\n5. Does this error actually happen in other cases (scans of other/normal tables) but no one notices usually because missing data during the scan may not be noticed but in this case it is noticed because it leads to errors later? Or is this only related to the metadata table and these specific iterators?\r\n\r\nObviously some more investigating work needs to be done but this is where things currently stand after I started looking into it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399316343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399325525","html_url":"https://github.com/apache/accumulo/pull/3164#issuecomment-1399325525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3164","id":1399325525,"node_id":"IC_kwDOACaFSM5TaANV","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-21T20:19:39Z","updated_at":"2023-01-21T20:19:39Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - you may want to merge this directly to 2.1\r\n\r\nThat will be a lot cleaner than cherry picking it back and then merging it forward. I am going to do that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399325525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399573166","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1399573166","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1399573166,"node_id":"IC_kwDOACaFSM5Ta8qu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-22T18:53:25Z","updated_at":"2023-01-22T18:53:25Z","author_association":"CONTRIBUTOR","body":"> In IsolatedScanner, the two timeouts are confusing and it could be an error that there are two values when one was intended, but I preserved current behavior.\r\n\r\n@EdColeman  can you provide a pointer to the code that is suspect?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1399573166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400299506","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1400299506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1400299506,"node_id":"IC_kwDOACaFSM5Tdt_y","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-23T13:00:37Z","updated_at":"2023-01-23T13:00:37Z","author_association":"CONTRIBUTOR","body":"Another thought is that `LinkingIterator.goodTransition` defaults to returning `true` and only returning `false` under certain conditions. I'm wondering if that should be reversed, default to returning `false` and returning `true` under successful conditions. I'm wondering if there is a new condition that exists that is not being checked and so it returns `true` currently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400299506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400652298","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1400652298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1400652298,"node_id":"IC_kwDOACaFSM5TfEIK","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-23T16:42:52Z","updated_at":"2023-01-23T16:42:52Z","author_association":"CONTRIBUTOR","body":"@keith-turner Basically there are two timeouts in IsolatedScanner - one is inherited by extending ScannerOptions and the other is local to IsolatedScanner (now named iteratorTimeout in this PR) and referenced below as the \"local\" value.  The scannerTimeout in Scanner options is not referenced in the IsolatedScanner code.  I was unsure if the local one was necessary or if the code could delegate to ScannerOptions.\r\n\r\nBefore, the local IsolatedScanner timeout was \"timeout\"\r\nhttps://github.com/apache/accumulo/blob/459a5c0d5ef97339837a75b61af817f77fc65b42/core/src/main/java/org/apache/accumulo/core/client/IsolatedScanner.java#L52\r\n\r\nIn ScannerOptions, the parameter was called \"timeOut\" (note capital O)\r\nhttps://github.com/apache/accumulo/blob/459a5c0d5ef97339837a75b61af817f77fc65b42/core/src/main/java/org/apache/accumulo/core/clientImpl/ScannerOptions.java#L56\r\n\r\nWhen the iterator is created in newIterator, the scanner is set to the \"locally declared value\"\r\nhttps://github.com/apache/accumulo/blob/0ef06afbfcea0908d3b19e1d8ae9fc1cc60a2e77/core/src/main/java/org/apache/accumulo/core/client/IsolatedScanner.java#L124\r\n\r\nIn the buffered reader the constructor,  it sets the \"local\" value.\r\n\r\nhttps://github.com/apache/accumulo/blob/0ef06afbfcea0908d3b19e1d8ae9fc1cc60a2e77/core/src/main/java/org/apache/accumulo/core/client/IsolatedScanner.java#L137\r\n\r\nI was unsure if \"timeout\" was distinctly different than \"timeOut\"  or if it was an oversight.   I thought about deleting the local value and delegating to the scannerTimeout (timeOut) in ScannerOptions, but it was not clear if this would be okay or if the local value was specifically created / used for some purpose that was not clear to me.  \r\n\r\nIt's fine if the local value is needed / stays - but a short description as to why may help the next person that comes along and has the same question. The other option is to delegate to the ScannerOptions scannerTimeout (timeOut) and remove the \"local\" value.\r\n\r\nCurrently, this PR is keeping both to preserve the current functionality.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400652298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400834950","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1400834950","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1400834950,"node_id":"IC_kwDOACaFSM5TfwuG","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-23T19:04:47Z","updated_at":"2023-01-23T19:04:47Z","author_association":"CONTRIBUTOR","body":"As @DomGarguilo noted in https://github.com/apache/accumulo/issues/2606 - I'm not sure that the timeouts being tested are actually the scanner timeouts.  There seems to be a sensitivity to the timeout value used that is independent of the scan timeout that is set.  SO, I'm not sure, in there current for the added tests are testing what was intended.  \r\n\r\nSome possibilities:\r\n\r\n- The SlowIterator used does not trigger a timeout that would be guarded by the scan timeout.\r\n- There is an issue with the timeout in the scanner.\r\n- something else?\r\n\r\nStill looking at it and resolution may be independent of this PR ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1400834950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402484884","html_url":"https://github.com/apache/accumulo/pull/3167#issuecomment-1402484884","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3167","id":1402484884,"node_id":"IC_kwDOACaFSM5TmDiU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T19:33:42Z","updated_at":"2023-01-24T19:33:42Z","author_association":"CONTRIBUTOR","body":"There is something in the PR that is causing the balancer ITs to fail. I can't figure out what it is, so I'm going to let this sit for a while and close later if we can't figure it out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402484884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402619461","html_url":"https://github.com/apache/accumulo/issues/3170#issuecomment-1402619461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3170","id":1402619461,"node_id":"IC_kwDOACaFSM5TmkZF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T20:40:39Z","updated_at":"2023-01-24T20:40:39Z","author_association":"CONTRIBUTOR","body":"I was able to reproduce your issue. IIRC the jline dependency was upgraded and looking at their documentation, issues, and user list, I'm guessing this is the issue. I did notice two things:\r\n\r\n 1. When you press a key on the keyboard, the highlighting goes away.\r\n 2. If you paste a single line and hit enter, it works.\r\n \r\n So, I think the issue is only with dealing the pasting of multiple lines (and the newline after them).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402619461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402647258","html_url":"https://github.com/apache/accumulo/issues/3170#issuecomment-1402647258","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3170","id":1402647258,"node_id":"IC_kwDOACaFSM5TmrLa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T20:59:25Z","updated_at":"2023-01-24T20:59:25Z","author_association":"CONTRIBUTOR","body":"Reading through some of the issues and comments on the user list, it looks like we might need to create out own parser.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402647258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402765491","html_url":"https://github.com/apache/accumulo/pull/3171#issuecomment-1402765491","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3171","id":1402765491,"node_id":"IC_kwDOACaFSM5TnICz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T22:16:49Z","updated_at":"2023-01-24T22:16:49Z","author_association":"CONTRIBUTOR","body":"It appears that JLine implemented (and enabled by default) [bracketed-paste](https://en.wikipedia.org/wiki/Bracketed-paste). This PR disables that and disables highlighting. I tested this locally by pasting multiple commands into the shell and found no highlighting and that each command was executed at the end of its line. I tested both ctrl-c/ctrl-v and highlight and mouse click and both worked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402765491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402836124","html_url":"https://github.com/apache/accumulo/issues/2606#issuecomment-1402836124","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2606","id":1402836124,"node_id":"IC_kwDOACaFSM5TnZSc","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T23:44:24Z","updated_at":"2023-01-24T23:44:24Z","author_association":"CONTRIBUTOR","body":"The javadoc in ScannerBase says that the timeout is a retry timeout.  \r\n\r\n```\r\n This setting determines how long a scanner will automatically retry when a failure occurs. By default, a scanner will retry forever.\r\n```\r\n\r\nIn testing, with the SlowIterator, with a Scanner, there is no failure that triggers the retry timeout, so there Timeout exception is not thrown.  The calling in code ScanIterator will just keep looping, trying to get a row.  Once the sleep expires in SlowIterator, the row is returned and the loop restarts.\r\n\r\nWith a scanner, setting a batch timeout will control how long it will take to gather results - but it does not time out - presumably because the iterator is \"still making progress\" wrt the scan.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402836124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402838794","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1402838794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1402838794,"node_id":"IC_kwDOACaFSM5TnZ8K","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-24T23:48:34Z","updated_at":"2023-01-24T23:48:34Z","author_association":"CONTRIBUTOR","body":"Closing this and will submit a new PR against 2.1.  After more investigation timeOut should be renamed retryTimeout and there may be other changes that can provide readability improvements.\r\n\r\nThe testing of the scan timeout here is invalid and is not testing the expected conditions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402838794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402915758","html_url":"https://github.com/apache/accumulo/pull/3172#issuecomment-1402915758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3172","id":1402915758,"node_id":"IC_kwDOACaFSM5Tnsuu","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T01:19:09Z","updated_at":"2023-01-25T01:19:09Z","author_association":"CONTRIBUTOR","body":":+1: Changing the verbiage to  `retryTimeout` makes its use much clearer! ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1402915758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1403474518","html_url":"https://github.com/apache/accumulo/pull/3171#issuecomment-1403474518","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3171","id":1403474518,"node_id":"IC_kwDOACaFSM5Tp1JW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T11:36:22Z","updated_at":"2023-01-25T11:36:22Z","author_association":"CONTRIBUTOR","body":"Full IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1403474518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1403986210","html_url":"https://github.com/apache/accumulo/issues/3170#issuecomment-1403986210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3170","id":1403986210,"node_id":"IC_kwDOACaFSM5TryEi","user":{"login":"keith-ratcliffe","id":1606834,"node_id":"MDQ6VXNlcjE2MDY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1606834?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-ratcliffe","html_url":"https://github.com/keith-ratcliffe","followers_url":"https://api.github.com/users/keith-ratcliffe/followers","following_url":"https://api.github.com/users/keith-ratcliffe/following{/other_user}","gists_url":"https://api.github.com/users/keith-ratcliffe/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-ratcliffe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-ratcliffe/subscriptions","organizations_url":"https://api.github.com/users/keith-ratcliffe/orgs","repos_url":"https://api.github.com/users/keith-ratcliffe/repos","events_url":"https://api.github.com/users/keith-ratcliffe/events{/privacy}","received_events_url":"https://api.github.com/users/keith-ratcliffe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T17:33:26Z","updated_at":"2023-01-25T17:33:26Z","author_association":"CONTRIBUTOR","body":"Thanks @dlmarion !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1403986210/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404020244","html_url":"https://github.com/apache/accumulo/pull/3165#issuecomment-1404020244","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3165","id":1404020244,"node_id":"IC_kwDOACaFSM5Tr6YU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:02:43Z","updated_at":"2023-01-25T18:02:43Z","author_association":"MEMBER","body":"In trying to understand what happened, I see that I merged this forward to the main branch for 3.0.0 from the 2.1 branch from the command-line, so GitHub thought it was okay to delete the originating branch. However, this PR should not have been created. It is not necessary to create a PR for merging forward to newer branches, and it can cause problems when you do.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404020244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404032242","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1404032242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1404032242,"node_id":"IC_kwDOACaFSM5Tr9Ty","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:13:06Z","updated_at":"2023-01-25T18:13:06Z","author_association":"CONTRIBUTOR","body":"@keith-turner - could you take a look at this when you get a chance? I talked with @ctubbsii and he said he had not objection to including in 3.0, wanted to get your input before I merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404032242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404036393","html_url":"https://github.com/apache/accumulo/pull/3165#issuecomment-1404036393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3165","id":1404036393,"node_id":"IC_kwDOACaFSM5Tr-Up","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:16:53Z","updated_at":"2023-01-25T18:16:53Z","author_association":"CONTRIBUTOR","body":"I was incorrectly using my clone as a \"staging branch\" instead of pushing directly to the main (upstream) accumulo repository, thinking that would be a safer course.  The githib actions would run and I could confirm the changes in the github UI. \r\n\r\nBut, github being \"helpful\" provides an option to delete the branch when the merge is completed - I assumed this was my \"local\" branch but was the 2.1 branch from upstream.\r\n\r\nAfter discussions, to preserve history it is best not to use our clones as staging and instead directly push to upstream (main) accumulo repo.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404036393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404054373","html_url":"https://github.com/apache/accumulo/pull/3166#issuecomment-1404054373","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3166","id":1404054373,"node_id":"IC_kwDOACaFSM5TsCtl","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:33:51Z","updated_at":"2023-01-25T18:33:51Z","author_association":"MEMBER","body":"Superseded by #3172 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404054373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404061200","html_url":"https://github.com/apache/accumulo/pull/3165#issuecomment-1404061200","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3165","id":1404061200,"node_id":"IC_kwDOACaFSM5TsEYQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:40:15Z","updated_at":"2023-01-25T18:40:15Z","author_association":"MEMBER","body":"You can still stage on your clone to run GitHub Actions in your fork... and then fix any issues by adding fixes to your local branch before pushing up. You don't need to create a PR to trigger GitHub Actions... you can just run them in your forked repo in your branch. However, the longer you have the merge forward staged, the more conflicts you'll likely see as new activity appears on the target/main branch, so I would merge relatively quickly and fix any merge bugs as a follow-up. But, you can reduce the risk by testing the merge locally or in your fork, so when you do merge the actual commit that gets added, you have already tested it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404061200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404085862","html_url":"https://github.com/apache/accumulo/pull/3172#issuecomment-1404085862","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3172","id":1404085862,"node_id":"IC_kwDOACaFSM5TsKZm","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-25T18:55:17Z","updated_at":"2023-01-25T18:55:17Z","author_association":"CONTRIBUTOR","body":"This looks like 1.10 may be a better target - but the package names have changed - @ctubbsii do you have a preference for the way the changes are applied?  I could try an see if I can use the UI to target 1.10, close this and make the same changes in 1.10 and then merge forward,...?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1404085862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405242835","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1405242835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1405242835,"node_id":"IC_kwDOACaFSM5Twk3T","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-26T16:09:47Z","updated_at":"2023-01-26T16:09:47Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Are you now ok with this PR or do you hvae additional concerns?  Do you want additional PRs to go against 2.1 and 1.10 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405242835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405281252","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1405281252","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1405281252,"node_id":"IC_kwDOACaFSM5TwuPk","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-26T16:37:04Z","updated_at":"2023-01-26T16:37:04Z","author_association":"MEMBER","body":"@ivakegg asked:\r\n> @ctubbsii Are you now ok with this PR or do you hvae additional concerns? Do you want additional PRs to go against 2.1 and 1.10 ?\r\n\r\nI don't have any other concerns, and I'm okay with this for 2.1.1, but the PR will need to be remade for that, and the since version for the property will need to be updated. For 1.10, I don't think it's worth it... the code is very different and it would require changing the \"since\" information to the property from a simple \"2.1.1\" to a more complicated \"1.10.3, but not 2.x before 2.1.1, then from 2.1.1 onward\". It's just very confusing to manage expectations for users when we try to backport new features. I'm okay with 2.1.1 only because there's no harm if the user has this set for 2.1.0... the property would just be ignored... and because there's no API changes or substantive behavior changes, just an optimization knob.\r\n\r\nTo add to 2.1.1, I'm going to create a temporary working branch, switch the base branch for this PR to that, merge it, then cherry-pick it to 2.1 and update the references to 3.0.0 to 2.1.1. Then I'll merge it forward to the main branch and get rid of the temporary working branch. That way, it's just easier on you and you don't need to create a new PR, and we can get this merged in sooner to 2.1. If 1.10 is desired, we'll need a new PR... to backport, and the merge forward will be a little complicated... but as I said, I do not think we should do that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405281252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405284059","html_url":"https://github.com/apache/accumulo/issues/1169#issuecomment-1405284059","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1169","id":1405284059,"node_id":"IC_kwDOACaFSM5Twu7b","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-26T16:39:11Z","updated_at":"2023-01-26T16:39:11Z","author_association":"MEMBER","body":"This is addressed by #3142 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405284059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405328601","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1405328601","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1405328601,"node_id":"IC_kwDOACaFSM5Tw5zZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-26T17:10:57Z","updated_at":"2023-01-26T17:10:57Z","author_association":"MEMBER","body":"Committed to 2.1 branch as 7f19f96914ed12614bbd2d6b24a88d322e49b006 and merged forward into main branch","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405328601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405487315","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1405487315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1405487315,"node_id":"IC_kwDOACaFSM5TxgjT","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-26T19:19:22Z","updated_at":"2023-01-26T19:19:32Z","author_association":"CONTRIBUTOR","body":"@ctubbsii OK, thank you for merging.  I can keep 1.10 backport exclusively in our own fork.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1405487315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1407425748","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1407425748","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1407425748,"node_id":"IC_kwDOACaFSM5T45zU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-28T15:46:31Z","updated_at":"2023-01-28T15:46:31Z","author_association":"CONTRIBUTOR","body":"That is an interesting idea for the logic for the goodTransition method, later this week I can look into that more and test reversing it and see what happens.\r\n\r\nI ran some tests yesterday and today trying to break things and so far the iterator has detected all the errors and reset properly. I ran tests with rapid GC happening in a loop concurrently while the metadata table was being split frequently (due to it being configured to a very small size) and also with in memory caching turned off. This produced a lot of messages in the logs where the iterator detected problems do to the splits, etc but it always reset itself properly. Each time the correct rfiles were GC'd and nothing that was removed that shouldn't.\r\n\r\nI also looked at exception handling and bubbling up from a server side iterator to the client and that appears to work. There's actually an integration test for this [ServerSideErrorIT](https://github.com/apache/accumulo/blob/ab8e2f518887a2505cad9dbc02e82197babfc1bd/test/src/main/java/org/apache/accumulo/test/functional/ServerSideErrorIT.java)\r\n\r\nI'll continue looking at this more next week. My goal is to try and find a flaw somewhere with a test case because if we can reproduce an error with testing this will be a lot easier to track down.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1407425748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1408707131","html_url":"https://github.com/apache/accumulo/pull/3172#issuecomment-1408707131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3172","id":1408707131,"node_id":"IC_kwDOACaFSM5T9yo7","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-30T14:20:07Z","updated_at":"2023-01-30T14:20:07Z","author_association":"CONTRIBUTOR","body":"Replaced with https://github.com/apache/accumulo/pull/3176 that is based on 1.10.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1408707131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1409706096","html_url":"https://github.com/apache/accumulo/pull/3146#issuecomment-1409706096","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3146","id":1409706096,"node_id":"IC_kwDOACaFSM5UBmhw","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T03:38:44Z","updated_at":"2023-01-31T03:38:44Z","author_association":"CONTRIBUTOR","body":"I've thought about these changes and I'm closing this PR in favor of the fix in #3177  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1409706096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1409707990","html_url":"https://github.com/apache/accumulo/issues/3145#issuecomment-1409707990","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3145","id":1409707990,"node_id":"IC_kwDOACaFSM5UBm_W","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T03:41:18Z","updated_at":"2023-01-31T03:41:18Z","author_association":"CONTRIBUTOR","body":"Changed my proposed solution to validate properties on the server-side and solve this issue for all clients. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1409707990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410246543","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1410246543","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1410246543,"node_id":"IC_kwDOACaFSM5UDqeP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T12:16:12Z","updated_at":"2023-01-31T12:16:12Z","author_association":"CONTRIBUTOR","body":"Kicked off full IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410246543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410870850","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1410870850","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1410870850,"node_id":"IC_kwDOACaFSM5UGC5C","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T18:25:42Z","updated_at":"2023-01-31T18:25:42Z","author_association":"CONTRIBUTOR","body":"Full IT build succeeded.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410870850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410935644","html_url":"https://github.com/apache/accumulo/issues/3138#issuecomment-1410935644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3138","id":1410935644,"node_id":"IC_kwDOACaFSM5UGStc","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T19:20:22Z","updated_at":"2023-01-31T23:39:45Z","author_association":"CONTRIBUTOR","body":"Another dimension to this might occur if the dead server has just enough functionality to keep the ZooKeeper connection from timing out but otherwise unable to fully receive / respond to ZooKeeper events.\r\n\r\nWhat would \"happen\" is the zoo lock is deleted, which should force the tserver to stop hosting its tablets.  The manager sees the tables unassigned, and assigns them to the another tserver.  If the original tserver does not realize that it should not be hosting the tablets then both the original and the new server are serving the same tablets - which we make assumptions that it will never happen.\r\n\r\nThere is an IT test, HalfDeadITServer that tries to test some of this, but not sure how much it actually covers.  And I recall past attempts to mock / wrap an ZooKeeper client to inject various errors, but I am unsure how far they progressed. \r\n\r\nThere was an old Jira issue that may highlight the issue with a half-dead server\r\n\r\n```\r\n# ACCUMULO-1245 - https://issues.apache.org/jira/browse/ACCUMULO-1245\r\n\r\nTablet servers that lose their locks don't always kill themselves. In one case, the lock is lost, detected, but the \r\nclass that is supposed to execute fails because it cannot be loaded from the file system. Other threads continue \r\nto run, unaware that they are no longer part of a valid server.\r\n\r\nConsider firewalling, somehow, this rogue server from the rest of the cluster. Perhaps it can be an external utility \r\nthat will power down the node, or actually set up firewall rules.\r\n```\r\nMost of this may be outside of this issue (if the Fate command is insufficient) - but there may be other issues that should be looked at.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1410935644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412187896","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1412187896","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1412187896,"node_id":"IC_kwDOACaFSM5ULEb4","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T14:52:42Z","updated_at":"2023-02-01T14:52:42Z","author_association":"CONTRIBUTOR","body":"The offending import in TabletLocatorImplTest  is \r\n```\r\nimport org.junit.Assert;\r\n```\r\n\r\nAlso, there may be other checkstyle issues that need to be addressed:\r\n```\r\n[WARNING] src/main/java/org/apache/accumulo/core/clientImpl/TabletLocatorImpl.java:[356,9] (blocks) NeedBraces: 'if' construct must use '{}'s.\r\n[WARNING] src/test/java/org/apache/accumulo/core/clientImpl/TabletLocatorImplTest.java:[61] (regexp) RegexpSinglelineJava: Use static imports for Assert.* methods for consistency\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412187896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412196891","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1412196891","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1412196891,"node_id":"IC_kwDOACaFSM5ULGob","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T14:57:54Z","updated_at":"2023-02-01T14:57:54Z","author_association":"CONTRIBUTOR","body":"@EdColeman those changes weren't introduced in this PR. \n\nI think the latest merge to 2.1 caused the problem \nhttps://github.com/apache/accumulo/commit/cb22cc46bb4b8792c5b4c7a7a301b224ca1684c1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412196891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412224849","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1412224849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1412224849,"node_id":"IC_kwDOACaFSM5ULNdR","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T15:12:43Z","updated_at":"2023-02-01T15:12:43Z","author_association":"CONTRIBUTOR","body":"I have a PR incoming to fix 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412224849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412281329","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1412281329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1412281329,"node_id":"IC_kwDOACaFSM5ULbPx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T15:48:05Z","updated_at":"2023-02-01T15:48:05Z","author_association":"CONTRIBUTOR","body":"Should be fixed when https://github.com/apache/accumulo/pull/3179 is merged","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412281329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412597074","html_url":"https://github.com/apache/accumulo/pull/3177#issuecomment-1412597074","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3177","id":1412597074,"node_id":"IC_kwDOACaFSM5UMoVS","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T19:23:37Z","updated_at":"2023-02-01T19:23:37Z","author_association":"CONTRIBUTOR","body":"@EdColeman I merged in the latest changes from 2.1 and all tests are now passing. \r\n \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412597074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412794484","html_url":"https://github.com/apache/accumulo/issues/3174#issuecomment-1412794484","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3174","id":1412794484,"node_id":"IC_kwDOACaFSM5UNYh0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T22:01:31Z","updated_at":"2023-02-01T22:01:31Z","author_association":"CONTRIBUTOR","body":"I went back to version 1.3.5 and the code looks the same.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1412794484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1413641814","html_url":"https://github.com/apache/accumulo/issues/3145#issuecomment-1413641814","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3145","id":1413641814,"node_id":"IC_kwDOACaFSM5UQnZW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T12:12:41Z","updated_at":"2023-02-02T12:12:41Z","author_association":"CONTRIBUTOR","body":"Closed by #3177 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1413641814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1413645310","html_url":"https://github.com/apache/accumulo/pull/3180#issuecomment-1413645310","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3180","id":1413645310,"node_id":"IC_kwDOACaFSM5UQoP-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T12:15:34Z","updated_at":"2023-02-02T12:15:34Z","author_association":"CONTRIBUTOR","body":"Full IT build successful","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1413645310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414117540","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1414117540","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1414117540,"node_id":"IC_kwDOACaFSM5USbik","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T17:34:32Z","updated_at":"2023-02-02T17:34:32Z","author_association":"CONTRIBUTOR","body":"The [HostRegexTableLoadBalancer](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/balancer/HostRegexTableLoadBalancer.java) allows the user to define groups of tablet servers (by hostname of ip regex) across which to balance a table's tablets. The sets could be overlapping, or not, and all hosts *not* covered by a regex are part of a default group that is used to balance unconfigured table's tablets.\r\n\r\nIf we support setting multiple groups via the `-g` argument, then the `HostRegexTableLoadBalancer` could be deprecated in favor of the new balancer thas has the same functionality.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414117540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414150611","html_url":"https://github.com/apache/accumulo/issues/3182#issuecomment-1414150611","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3182","id":1414150611,"node_id":"IC_kwDOACaFSM5USjnT","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T18:02:14Z","updated_at":"2023-02-02T18:02:14Z","author_association":"CONTRIBUTOR","body":"I have asked @ddanielr to look at this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414150611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414320587","html_url":"https://github.com/apache/accumulo/issues/3183#issuecomment-1414320587","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3183","id":1414320587,"node_id":"IC_kwDOACaFSM5UTNHL","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T20:15:51Z","updated_at":"2023-02-02T20:15:51Z","author_association":"CONTRIBUTOR","body":"Help with the fate options is available on the admin command, so this might not be necessary.\r\n\r\n```\r\naccumulo admin -h\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414320587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414361924","html_url":"https://github.com/apache/accumulo/issues/3182#issuecomment-1414361924","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3182","id":1414361924,"node_id":"IC_kwDOACaFSM5UTXNE","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T20:56:48Z","updated_at":"2023-02-02T20:56:48Z","author_association":"CONTRIBUTOR","body":"@dlmarion I read through your documentation and I'm working on this.\r\nCan you assign this issue to me?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414361924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414710310","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1414710310","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1414710310,"node_id":"IC_kwDOACaFSM5UUsQm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T02:36:22Z","updated_at":"2023-02-03T02:36:22Z","author_association":"CONTRIBUTOR","body":"> The sets could be overlapping, or not, and all hosts not covered by a regex are part of a default group that is used to balance unconfigured table's tablets.\r\n\r\nWhat are the use cases for overlapping groups of servers?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1414710310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415789072","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1415789072","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1415789072,"node_id":"IC_kwDOACaFSM5UYzoQ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T12:11:33Z","updated_at":"2023-02-03T12:11:33Z","author_association":"CONTRIBUTOR","body":"> What are the use cases for overlapping groups of servers?\r\n\r\nI don't remember, if I had to guess it was just maximum flexibility. Thinking about this further, we might not need to support multiple groups per server. When configuring the HostRegexTableLoadBalancer (see [test](https://github.com/apache/accumulo/blob/main/core/src/test/java/org/apache/accumulo/core/spi/balancer/HostRegexTableLoadBalancerTest.java#L205)), the user maps a table directly to a regex that maps to hosts. Assigning a group name to a TabletServer provides a level of indirection. For example:\r\n\r\n  * There could be a set of TabletServers that use the group `meta` to host the metadata table\r\n  * There could be a set of TabletServers that use the group `appA` to host the tables used by application A\r\n  * There could be a set of TabletServers that use the group `appsBC` to host the tables used by applications B & C\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415789072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415821337","html_url":"https://github.com/apache/accumulo/pull/3175#issuecomment-1415821337","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3175","id":1415821337,"node_id":"IC_kwDOACaFSM5UY7gZ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T12:43:02Z","updated_at":"2023-02-03T12:43:02Z","author_association":"CONTRIBUTOR","body":"Was there an actual issue observed that caused you to change to using fair locks? Whenever I've done any reading into the topic fair locks are generally discouraged due to the performance penalty that often happens.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415821337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415824731","html_url":"https://github.com/apache/accumulo/pull/3175#issuecomment-1415824731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3175","id":1415824731,"node_id":"IC_kwDOACaFSM5UY8Vb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T12:46:21Z","updated_at":"2023-02-03T12:46:21Z","author_association":"CONTRIBUTOR","body":"User saw scan threads waiting on the lock, so some scans were making progress and others were not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415824731/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415831192","html_url":"https://github.com/apache/accumulo/pull/3175#issuecomment-1415831192","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3175","id":1415831192,"node_id":"IC_kwDOACaFSM5UY96Y","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T12:52:14Z","updated_at":"2023-02-03T12:52:14Z","author_association":"CONTRIBUTOR","body":"Something else I noticed is that it would be good to change this line here even though it's not related to the PR. \r\n\r\nhttps://github.com/apache/accumulo/blob/49d335313f18275a66e604e274db9ba6895a4373/core/src/main/java/org/apache/accumulo/core/file/blockfile/cache/lru/SynchronousLoadingBlockCache.java#L116-L118\r\n\r\nThe call to lock() should always be outside of the try block so it should be: \r\n\r\n```java\r\nloadLock.lock();\r\ntry {\r\n   ...\r\n```\r\n\r\nThis is because if the call to lock() fails you can end up with an IllegalMonitorStateException when the thread calls unlock() in the finally block since it doesn't own the lock. In practice this would be pretty rare as lock() _shouldn't_ ever really throw an exception. It's much more of an issue if you use something like `lockInterruptibly()` but it's still best practice to have it outside the try block.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1415831192/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416220841","html_url":"https://github.com/apache/accumulo/issues/3182#issuecomment-1416220841","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3182","id":1416220841,"node_id":"IC_kwDOACaFSM5UadCp","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T18:06:05Z","updated_at":"2023-02-03T18:06:05Z","author_association":"CONTRIBUTOR","body":"WIP up with current changes.\r\nhttps://github.com/apache/accumulo/pull/3187\r\n\r\nI based these changes off 1.10. Did you want that branch targeted? or is this a 2.1 change?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416220841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416226257","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1416226257","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1416226257,"node_id":"IC_kwDOACaFSM5UaeXR","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T18:10:51Z","updated_at":"2023-02-03T18:10:51Z","author_association":"CONTRIBUTOR","body":"I'm working on the IT test now but all the current IT's use the `getConnector()` call from the harness.\r\n\r\nSince this is a client config property, I need to create a new client with this property set to `false`.\r\n\r\nFor the IT, would comparing scan duration between the two clients be a valid test of this property?\r\nOr, is there a better way to test this functionality? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416226257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416772087","html_url":"https://github.com/apache/accumulo/issues/1327#issuecomment-1416772087","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1327","id":1416772087,"node_id":"IC_kwDOACaFSM5Ucjn3","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-04T14:47:54Z","updated_at":"2023-02-04T14:47:54Z","author_association":"CONTRIBUTOR","body":"I have started looking into this and doing research on how to go about implementing it. I plan to try and break this up into sub-tasks to implement smaller changes at a time. Some things of course won't be possible in isolation but I will break it up the best I can.  Also, because of the scope of the issue I don't see it being ready for 3.0.0 so should we un-assign this from 3.0.0? I could see some smaller changes being done for 3.0.0 but probably not the entire feature.\r\n\r\nAlso, one question I had as I've been diving into this is will the goal here to be to ONLY  support no-chop merges or is there a desire to preserve the current behavior of merges (maybe a flag or something to specify the type)? \r\n\r\nI could see scenarios where a user would want to actually do a merge the current way (and take the performance penalty that comes with it) but I'm thinking we probably don't need to preserve the current merge strategy as an option because a user could also just simply run a compaction after a merge and accomplish the same thing if desired.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1416772087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1418236284","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1418236284","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1418236284,"node_id":"IC_kwDOACaFSM5UiJF8","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-05T18:56:47Z","updated_at":"2023-02-05T18:56:47Z","author_association":"CONTRIBUTOR","body":"I did some more testing this past Friday/Saturday on this and couldn't get an errors to show up still. I did however see in the logs the iterator actually detect inconsistencies in the meatadata table and it fixed itself (just like I said in my previous comment). I talked to @keith-turner about this a bit and he suggested I try testing against 1.10 (and not just 2.1 and main). I also realized I was mostly testing using the mini accumulo cluster which does not use HDFS. So today I spent some time-rerunning my tests against 1.10 and using Uno (so it's a real cluster with HDFS) and I still didn't get an errors and everything worked as it should.\r\n\r\nOne idea I had that could possibly help the problem would be to require garbage collection to run more than one time and compare results before actually removing files. For example, GC could run the scan to get the file candidates with references multiple times in the same GC run and then compare results and take a superset or fail if inconsistent.  Another option is to require more than one GC run before actually deleting. Something like when GC runs and comes comes up with the files it is about to delete maybe we just mark them (in metadata probably) as deleted/to be deleted and a subsequent run could do the actual delete if it detects the file as marked in a previous run so we know we at least had multiple runs where we think we should delete. We could even make it configurable to require X number of positive hits to do a deletion or have a time delay etc. \r\n\r\nRunning the scan more than once to detect the file references would only actually help if the problem was transient and non-deterministic and was isolated to a single scan and wouldn't just happen in a future scan which is hard to say because we don't know the actual problem. There's also a bit of a chicken/egg problem where if we are writing the GC result back to metadata but metadata scans are the issue and inconsistent it could be a problem. Also this behavior to delay deletion can sort of already be accomplished by using HDFS trash and files can be recovered from there and there is already #3140 to help make the HDFS trash option better but having it built in to GC could also be nice if it would help prevent early deletion in the first place.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1418236284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1418339001","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1418339001","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1418339001,"node_id":"IC_kwDOACaFSM5UiiK5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T01:01:01Z","updated_at":"2023-02-06T01:01:29Z","author_association":"CONTRIBUTOR","body":"After merging main into this branch, which contained the fixes for #3168, I spun up [this test](https://gist.github.com/keith-turner/f2159111b025e600a6e0abbaba1d92f3) again and its been running for 72hrs w/o issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1418339001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419240077","html_url":"https://github.com/apache/accumulo/pull/3180#issuecomment-1419240077","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3180","id":1419240077,"node_id":"IC_kwDOACaFSM5Ul-KN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T15:11:48Z","updated_at":"2023-02-06T15:11:48Z","author_association":"CONTRIBUTOR","body":"@keith-turner - changes made based on your comments.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419240077/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419360325","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1419360325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1419360325,"node_id":"IC_kwDOACaFSM5UmbhF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T16:23:34Z","updated_at":"2023-02-06T16:23:34Z","author_association":"CONTRIBUTOR","body":"I think it might be useful to still copy over tests from #3091 . Specifically the test additions in ScanServerIT, OfflineTableIT, and ScanServerNoSServersIT.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419360325/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419644026","html_url":"https://github.com/apache/accumulo/pull/3185#issuecomment-1419644026","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3185","id":1419644026,"node_id":"IC_kwDOACaFSM5Ungx6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T19:39:48Z","updated_at":"2023-02-06T19:39:48Z","author_association":"MEMBER","body":"This was originally merged to main first, but then backported into 2.1 for 2.1.1 in #3186.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419644026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419651489","html_url":"https://github.com/apache/accumulo/issues/1327#issuecomment-1419651489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1327","id":1419651489,"node_id":"IC_kwDOACaFSM5Unimh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T19:45:10Z","updated_at":"2023-02-06T19:45:10Z","author_association":"MEMBER","body":"There is no need to retain the current behavior. Users can always compact the range afterwards if they want, and doing it in that order means it is at least available for query faster, even though the IO performance would be similar.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419651489/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419662983","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1419662983","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1419662983,"node_id":"IC_kwDOACaFSM5UnlaH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-06T19:56:05Z","updated_at":"2023-02-06T19:56:05Z","author_association":"CONTRIBUTOR","body":"In the client code, the first time the client performs a scan on a server, the client waits for all writes to complete before the scan can begin. It can be argued, that for user tables, the application may not be concerned with waiting for the writes to complete given that the waits are there for a specific use case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419662983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419966573","html_url":"https://github.com/apache/accumulo/pull/3175#issuecomment-1419966573","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3175","id":1419966573,"node_id":"IC_kwDOACaFSM5Uovht","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T00:02:33Z","updated_at":"2023-02-07T00:02:33Z","author_association":"MEMBER","body":"If GitHub has to show `...` for the first line of a commit message, it is a good hint that it's far too long. We've had several very long \"subject\" line portions in our git logs. This was the most recent one I noticed (but not the worst). It would be a good goal to keep very brief subject lines in the git logs, and put more details in the body.\r\n\r\nFor example, here's my attempt to polish up this commit message's subject line (solely as an example for how it could be done for future commits):\r\n\r\n```diff\r\n-Increased number of locks in SynchronousLoadingBlockCache and set them to be fair (#3175)\r\n+Improve lock behavior in SynchronousLoadingBlockCache (#3175)\r\n```\r\n\r\nThe body already describes what the improvements are (increasing the count and making them fair), so we don't need those details in the subject line.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1419966573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420026061","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1420026061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1420026061,"node_id":"IC_kwDOACaFSM5Uo-DN","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T01:12:27Z","updated_at":"2023-02-07T01:12:27Z","author_association":"MEMBER","body":"> There's also a bit of a chicken/egg problem where if we are writing the GC result back to metadata but metadata scans are the issue and inconsistent it could be a problem.\r\n\r\nNo. The deletion candidates are in a completely separate section of the table than the metadata tablets that could contain existing references. If some issue prevents the file from being seen as a candidate, then it doesn't matter... it won't be deleted. This only is a problem if the file is detected as a candidate, but the checking for existing references among the tablet metadata returns successfully with no reference detected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420026061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420032733","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1420032733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1420032733,"node_id":"IC_kwDOACaFSM5Uo_rd","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T01:21:24Z","updated_at":"2023-02-07T01:22:48Z","author_association":"MEMBER","body":"> In the client code, the first time the client performs a scan on a server, the client waits for all writes to complete before the scan can begin. It can be argued, that for user tables, the application may not be concerned with waiting for the writes to complete given that the waits are there for a specific use case.\r\n\r\nMy understanding is that the specific use case is consistency from the same client, to ensure that a previous write is visible on subsequent scans. The comment says this is especially important for metadata, but I think it's just as important for consistency in general. While this may not be strictly required in all use cases (some users may not care about this consistency), I don't know of a compelling reason to relax the behavior. I don't think effort should be put into making client views of the data less consistent... not without a substantially compelling reason, and I haven't seen any reason even proposed, least of all a substantially compelling one.\r\n\r\nIn any case, I definitely don't think we should do anything in 1.10 at all for this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420032733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420037129","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1420037129","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1420037129,"node_id":"IC_kwDOACaFSM5UpAwJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T01:28:37Z","updated_at":"2023-02-07T01:28:37Z","author_association":"MEMBER","body":"It seems to me that the core characteristic of this idea is that tservers themselves are annotated with some kind of label/group identifier. I think that's something users can already do outside of Accumulo (such as with the hostname, or some other external group file) and using either the HostRegexTableLoadBalancer or a custom balancer.\r\n\r\nI don't think we need to make any architectural or built-in changes to Accumulo to support this use case, and I think if we try to, we're just going to add unnecessary complexity to maintain, with the end result being no more functionality than we already have that is maybe only *slightly* easier to use for some people. I'm really not sure that it's worth introducing more complex code for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420037129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420075671","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1420075671","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1420075671,"node_id":"IC_kwDOACaFSM5UpKKX","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T02:07:50Z","updated_at":"2023-02-07T02:07:50Z","author_association":"CONTRIBUTOR","body":"> > In the client code, the first time the client performs a scan on a server, the client waits for all writes to complete before the scan can begin. It can be argued, that for user tables, the application may not be concerned with waiting for the writes to complete given that the waits are there for a specific use case.\r\n> \r\n> My understanding is that the specific use case is consistency from the same client, to ensure that a previous write is visible on subsequent scans. The comment says this is especially important for metadata, but I think it's just as important for consistency in general. While this may not be strictly required in all use cases (some users may not care about this consistency), I don't know of a compelling reason to relax the behavior. I don't think effort should be put into making client views of the data less consistent... not without a substantially compelling reason, and I haven't seen any reason even proposed, least of all a substantially compelling one.\r\n> \r\n> In any case, I definitely don't think we should do anything in 1.10 at all for this.\r\n\r\nI had asked for branch clarification in #3182. The issue wasn't assigned to a particular branch so I started at 1.10 with the expectation that I could re-target as desired. Happy to move this work to 2.1 instead.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420075671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420092874","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1420092874","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1420092874,"node_id":"IC_kwDOACaFSM5UpOXK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T02:17:10Z","updated_at":"2023-02-07T02:17:10Z","author_association":"CONTRIBUTOR","body":" > I think that's something users can already do outside of Accumulo (such as with the hostname, or some other external group file) and using either the HostRegexTableLoadBalancer or a custom balancer.\r\n\r\nIn the kubernetes case this is not so easy when you have an auto-scaled group of tservers that is dynamically allocated ip addresses.  When running scan servers and compactors in kubernetes it was so easy to start them with a group specified on the command line and have the rest of the system respond automatically as those different groups scaled up and down.\r\n\r\nEven for clusters of machines I think this group option is nice because it makes the Accumulo config indifferent to the specifics of the cluster. So I can use the same accumulo config on two different cluster with different IP address+hostnames and if I start 10 tservers in group A and 20 in group B on each cluster, then same config will behave the same on both clusters.  Where with the regex config I have to adapt the config to the cluster or try to adapt the clusters ips and hostnames to the config.  So it makes it easier to have reproducible behavior across clusters.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420092874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420113886","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1420113886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1420113886,"node_id":"IC_kwDOACaFSM5UpTfe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T02:40:08Z","updated_at":"2023-02-07T02:40:08Z","author_association":"CONTRIBUTOR","body":"> I think it might be useful to still copy over tests from https://github.com/apache/accumulo/pull/3091\r\n\r\nThat is the only reason I have not taken this out of draft yet.  After I do that I plan to take it out of draft.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420113886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420122157","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1420122157","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1420122157,"node_id":"IC_kwDOACaFSM5UpVgt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T02:54:02Z","updated_at":"2023-02-07T02:54:02Z","author_association":"CONTRIBUTOR","body":"> My understanding is that the specific use case is consistency from the same client, to ensure that a previous write is visible on subsequent scans. \r\n\r\nI don't believe this was for same client.  The wait for write behavior is for the following case.\r\n\r\n1. client does a write and then the client process dies\r\n2. client process starts again and does a read, expecting to see anything it wrote before.  However if the write is still in flight on the tserver side it may not see it.\r\n\r\nWithin the same process if a client always flushes the batch writer before reading it will see the changes w/o this check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420122157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420129527","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1420129527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1420129527,"node_id":"IC_kwDOACaFSM5UpXT3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T03:04:59Z","updated_at":"2023-02-07T03:04:59Z","author_association":"CONTRIBUTOR","body":"This comment is just for discussion, I don't have a particular action in mind.  I am wondering if this should be scoped differently, like should it be scoped at the table level (with a per table prop) or at the scanner level with a method on the scanner to disable this.  With the way the config is so widely scoped seems like it could be set because someone wants to change the behavior on one table, but it ends up unintentionally changing the behavior for other tables.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420129527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420627043","html_url":"https://github.com/apache/accumulo/pull/3187#issuecomment-1420627043","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3187","id":1420627043,"node_id":"IC_kwDOACaFSM5UrQxj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T11:32:20Z","updated_at":"2023-02-07T11:32:20Z","author_association":"CONTRIBUTOR","body":"> I haven't seen any reason even proposed, least of all a substantially compelling one.\r\n\r\nThis was something that a user noticed their client waiting on, and not performing scans, when the user thought scans should have been running.\r\n\r\n> My understanding is that the specific use case is consistency from the same client, to ensure that a previous write is visible on subsequent scans.\r\n> I don't believe this was for same client. The wait for write behavior is for the following case.\r\n> client does a write and then the client process dies\r\n> client process starts again and does a read, expecting to see anything it wrote before. However if the write is still in flight on the tserver side it may not see it.\r\n\r\nMy understanding of the use-case for waiting for writes is you have an application running on a host, the application \r\n dies and is restarted, so you want the application to wait for writes to finish before reading. The current implementation makes several assumptions:\r\n\r\n  1. All user applications both read and write data.\r\n  2. All newly started applications are able to wait for some unknown amount of time for writes to complete before their scans can start.\r\n  3. That in an environment where you could be constantly loading data, the application performing scans has an understanding of what consistent means.\r\n\r\nThe thought here was to be able to bypass the wait condition in the client for user tables. I have no issue with the implementation being done at the table or scanner level. I think doing it as either a client property or scanner setting would be easier, as it would not involve any server side code to deal with the table property. Doing it at the client seemed sufficient to meet the needs of an application running in an environment where 1, 2, and 3 were not the case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420627043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420654933","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1420654933","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1420654933,"node_id":"IC_kwDOACaFSM5UrXlV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T11:57:34Z","updated_at":"2023-02-07T11:57:34Z","author_association":"CONTRIBUTOR","body":"> I think that's something users can already do outside of Accumulo (such as with the hostname, or some other external group file) and using either the HostRegexTableLoadBalancer or a custom balancer.\r\n\r\nWhile the HostRegexTableLoadBalancer might work in an environment like kubernetes, I don't think it's user friendly. You can pass the kubernetes pod ip address to the Accumulo server process using the `-a` argument, but the ip address for the pod is based on the the range of ip addresses assigned to the host. When deploying Accumulo in this environment and using the HostRegexTableLoadBalancer the user would need to:\r\n\r\n  1. Create different yaml descriptor files for the Accumulo processes to assign different groups to different nodes using kubernetes `nodeSelector` type in the yaml file.\r\n  2. Find the IP range for all of the nodes involved\r\n  3. For each table that they want to configure, create a regex using the IP ranges of the hosts involved.\r\n  \r\nIf we have the ability to assign group labels to TabletServers (like we do for ScanServers, and \"queues\" for Compactors), then for a kubernetes deployment the user has to:\r\n\r\n  1. Create different yaml descriptor files for the Accumulo processes to assign different groups\r\n  2. Create a load balancer that balances tables using the groups (a variation of the HostRegexTableLoadBalancer)\r\n  3. Configure this new balancer, assigning groups to tables.\r\n  \r\nThen, the kubernetes administrator can scale the deployments of a particular group as needed without worrying about the node's IP address. In a commercial cloud environment, I can imagine that node IP addresses may change over time which could be really burdensome.\r\n\r\nI have been working on a solution for this, I should be able to put it up today for comments.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420654933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420656275","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1420656275","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1420656275,"node_id":"IC_kwDOACaFSM5UrX6T","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T11:58:46Z","updated_at":"2023-02-07T11:58:46Z","author_association":"CONTRIBUTOR","body":"> > I think it might be useful to still copy over tests from #3091\r\n> \r\n> That is the only reason I have not taken this out of draft yet. After I do that I plan to take it out of draft.\r\n\r\nWhen you do that, I'll close #3091 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1420656275/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421300022","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1421300022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1421300022,"node_id":"IC_kwDOACaFSM5Ut1E2","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T19:04:27Z","updated_at":"2023-02-07T19:04:27Z","author_association":"MEMBER","body":"@keith-turner wrote:\r\n> In the kubernetes case this is not so easy when you have an auto-scaled group of tservers that is dynamically allocated ip addresses. When running scan servers and compactors in kubernetes it was so easy to start them with a group specified on the command line and have the rest of the system respond automatically as those different groups scaled up and down.\r\n\r\nIt seems like it would be easy to make a balancer that could detect some tag/label associated with a particular kubernetes group. I'm not that familiar with running stuff in kubernetes, but I've seen the concept of \"genders\" or \"flavors\" or \"groups\" in scalable architectures before, so I'd be surprised if kubernetes didn't support something like that that the user could leverage easily on their own.\r\n\r\n@dlmarion wrote:\r\n> While the HostRegexTableLoadBalancer might work in an environment like kubernetes, I don't think it's user friendly. \r\n\r\nI agree. I don't necessarily think that balancer should be used. I think a different balancer that could make use of different labels would be warrented. However, given this is a niche use case, I still think this would be better suited to having a custom balancer for that situation... which is why we have balancers pluggable... rather than architecting a custom solution inside Accumulo. I don't think we need to be responsible for all user conveniences... making pluggable endpoints that empower users is often sufficient; there are trade-offs that grow our code complexity and increase our maintenance burden the more we try to take on every possible user deployment use case. If it's going to increase our code complexity, I'm going to favor more towards empowering users to customize things using our pluggable endpoints, rather than adding more APIs and config to Accumulo. I think it's worth considering keeping this a pluggable solution rather than a built-in one.\r\n\r\n> If we have the ability to assign group labels to TabletServers (like we do for ScanServers, and \"queues\" for Compactors), then for a kubernetes deployment the user has to:\r\n> \r\n> 1. Create different yaml descriptor files for the Accumulo processes to assign different groups\r\n> 2. Create a load balancer that balances tables using the groups (a variation of the HostRegexTableLoadBalancer)\r\n> 3. Configure this new balancer, assigning groups to tables.\r\n\r\nRight, but couldn't these groups just be kubernetes metadata? Isn't that already something that kubernetes supports today? Do we need to add baked-in metadata for tservers to define tserver groups or can users already get that today with some kind of kubernetes labels? If they already label tservers today in kubernetes, then growing the complexity of Accumulo to achieve this is much less appealing to me. But, I would be in favor of writing a blog post to show off a balancer implementation that would be aware of an existing kubernetes label feature. I think that would be very useful to empower users by showing them what our pluggable endpoints are capable of.\r\n\r\n> I have been working on a solution for this, I should be able to put it up today for comments.\r\n\r\nI will take a look at #3189.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421300022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421309409","html_url":"https://github.com/apache/accumulo/pull/3180#issuecomment-1421309409","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3180","id":1421309409,"node_id":"IC_kwDOACaFSM5Ut3Xh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T19:10:41Z","updated_at":"2023-02-07T19:10:41Z","author_association":"CONTRIBUTOR","body":"@ctubbsii @keith-turner  - Thanks for the review, I believe that I implemented all of your suggested changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421309409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421324707","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1421324707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1421324707,"node_id":"IC_kwDOACaFSM5Ut7Gj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T19:23:15Z","updated_at":"2023-02-07T19:24:15Z","author_association":"CONTRIBUTOR","body":"> Right, but couldn't these groups just be kubernetes metadata? Isn't that already something that kubernetes supports today?\r\n\r\nI don't know. Looking at [this](https://stackoverflow.com/questions/63169737/kubernetes-api-list-pods-with-a-label) you can query the Kubernetes API server, but I don't know all of the intricacies involved with what appears to be auth tokens, the type of results that are returned, latency, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421324707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421367985","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1421367985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1421367985,"node_id":"IC_kwDOACaFSM5UuFqx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T20:02:33Z","updated_at":"2023-02-07T20:02:48Z","author_association":"MEMBER","body":"In any case, after looking at #3189, it doesn't look like it will add too much complexity to add a service group name for all services. So, I think my initial reservations, based on my concern about complexity, aren't really valid. I still think it's useful to think in terms of the complexity / convenience trade-offs, but after seeing the implementation, my opinion has swung the other way in terms of where I think this would fall.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421367985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421376055","html_url":"https://github.com/apache/accumulo/issues/3178#issuecomment-1421376055","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3178","id":1421376055,"node_id":"IC_kwDOACaFSM5UuHo3","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T20:08:53Z","updated_at":"2023-02-07T20:08:53Z","author_association":"MEMBER","body":"> > Right, but couldn't these groups just be kubernetes metadata? Isn't that already something that kubernetes supports today?\r\n> \r\n> I don't know. Looking at [this](https://stackoverflow.com/questions/63169737/kubernetes-api-list-pods-with-a-label) you can query the Kubernetes API server, but I don't know all of the intricacies involved with what appears to be auth tokens, the type of results that are returned, latency, etc.\r\n\r\nYou can use the [downward api](https://kubernetes.io/docs/concepts/workloads/pods/downward-api/) to expose some pod info (including labels and annotations) via files or environment variables inside the pod. I'm wondering if that would be sufficient?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1421376055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]