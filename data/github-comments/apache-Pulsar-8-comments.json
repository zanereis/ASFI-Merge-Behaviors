[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283570585","html_url":"https://github.com/apache/pulsar/issues/258#issuecomment-283570585","issue_url":"https://api.github.com/repos/apache/pulsar/issues/258","id":283570585,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzU3MDU4NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T06:43:51Z","updated_at":"2017-03-02T06:43:51Z","author_association":"CONTRIBUTOR","body":"It looks like there are failures related to the DataSketches stats library : \r\n\r\n```\r\njava.lang.ArrayIndexOutOfBoundsException: 256\r\n        at com.yahoo.sketches.quantiles.DoublesUpdateImpl.zipSize2KBuffer(DoublesUpdateImpl.java:127)\r\n        at com.yahoo.sketches.quantiles.DoublesUpdateImpl.inPlacePropagateCarry(DoublesUpdateImpl.java:92)\r\n        at com.yahoo.sketches.quantiles.DoublesUpdateImpl.processFullBaseBuffer(DoublesUpdateImpl.java:46)\r\n        at com.yahoo.sketches.quantiles.HeapDoublesSketch.update(HeapDoublesSketch.java:176)\r\n        at org.apache.bokkeeper.stats.datasketches.DataSketchesOpStatsLogger.registerSuccessfulEvent(DataSketchesOpStatsLogger.java:59)\r\n        at org.apache.bookkeeper.bookie.Journal.run(Journal.java:895)\r\n```\r\n\r\nThis exception is happening in the Journal thread and causes the bookie process to restart.\r\n\r\nOther exception during the stats collection :\r\n\r\n```\r\n2017-02-26 17:59:56,096 - WARN  - [metrics-1-1:DataSketchesMetricsProvider@76] - Failed to report stats: 128\r\njava.lang.ArrayIndexOutOfBoundsException: 128\r\n        at com.yahoo.sketches.quantiles.DoublesAuxiliary.populateFromQuantilesSketch(DoublesAuxiliary.java:99)\r\n        at com.yahoo.sketches.quantiles.DoublesAuxiliary.<init>(DoublesAuxiliary.java:38)\r\n        at com.yahoo.sketches.quantiles.DoublesSketch.constructAuxiliary(DoublesSketch.java:607)\r\n        at com.yahoo.sketches.quantiles.DoublesSketch.getQuantile(DoublesSketch.java:195)\r\n        at org.apache.bokkeeper.stats.datasketches.DataSketchesOpStatsLogger.getMedian(DataSketchesOpStatsLogger.java:121)\r\n        at org.apache.bokkeeper.stats.datasketches.JsonFileReporter.lambda$report$9(JsonFileReporter.java:67)\r\n        at java.util.concurrent.ConcurrentSkipListMap.forEach(ConcurrentSkipListMap.java:3252)\r\n        at org.apache.bokkeeper.stats.datasketches.JsonFileReporter.report(JsonFileReporter.java:61)\r\n        at org.apache.bokkeeper.stats.datasketches.DataSketchesMetricsProvider.lambda$null$5(DataSketchesMetricsProvider.java:74)\r\n```\r\n\r\n\r\nAs a workaround, you can fallback a different stats  implementation for the bookies, eg:\r\n```properties\r\nstatsProviderClass=org.apache.bookkeeper.stats.CodahaleMetricsProvider\r\ncodahaleStatsJmxEndpoint=metrics\r\n```\r\n\r\nand collect the stats through JMX. Or comment `statsProviderClass` to disable stats","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283570585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283571043","html_url":"https://github.com/apache/pulsar/issues/258#issuecomment-283571043","issue_url":"https://api.github.com/repos/apache/pulsar/issues/258","id":283571043,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzU3MTA0Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T06:47:11Z","updated_at":"2017-03-02T06:47:11Z","author_association":"CONTRIBUTOR","body":"I don't understand the specific exceptions. Need to dig a bit into that code or ask help to DataSketches people.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283571043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283573972","html_url":"https://github.com/apache/pulsar/issues/267#issuecomment-283573972","issue_url":"https://api.github.com/repos/apache/pulsar/issues/267","id":283573972,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzU3Mzk3Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T07:05:07Z","updated_at":"2017-03-02T07:05:07Z","author_association":"CONTRIBUTOR","body":"> Bookie handle is not available\r\n\r\nThis error is printed when the client fails to connect to a particular bookie for reading/writing. If the process is crashing/restarting, it's to be expected to see that in broker logs.\r\n\r\n> And lots of these on bookies:\r\n>\r\n> 2017-03-02 00:13:13,429 - ERROR - [BookKeeperClientWorker-22->1:LedgerFragmentReplicator$2@252] - BK error reading ledger entry: 44413 >org.apache.bookkeeper.client.BKException$BKBookieHandleNotAvailableException at >org.apache.bookkeeper.client.BKException.create(BKException.java:62) at or\r\n\r\nThese are probably related to the bookie auto-replication (it's very noisy on the logs). Are you running that in the same process as the bookies?\r\n\r\n> Trying to get the metadata of the mentioned ledger on the log using bookkeeper shell I get a not found error. Looks like a few ledgers dissapeared for some reason.\r\n\r\nAre these from data ledgers and were supposed not to be deleted? Can you grep for the ledgerId in the broker/bookie logs to check when (an possibly why) it was deleted?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283573972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283666521","html_url":"https://github.com/apache/pulsar/issues/267#issuecomment-283666521","issue_url":"https://api.github.com/repos/apache/pulsar/issues/267","id":283666521,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzY2NjUyMQ==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T14:25:02Z","updated_at":"2017-03-02T16:12:15Z","author_association":"NONE","body":"Yes we're running the auto-recovery in the same process as the bookies. I had to disable it, because several bookies wouldn't stop logging that exception and the CPU got to a 100%.\r\n\r\nChecking the logs I couldn't find a reason for the deletion of the ledger. Maybe it was supposed to be deleted and in that case why it was trying to replicate non-existent ledgers.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283666521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283672312","html_url":"https://github.com/apache/pulsar/issues/258#issuecomment-283672312","issue_url":"https://api.github.com/repos/apache/pulsar/issues/258","id":283672312,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzY3MjMxMg==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T14:45:57Z","updated_at":"2017-03-02T14:45:57Z","author_association":"NONE","body":"Thanks for your response. We'll disable the stats for now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283672312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283710869","html_url":"https://github.com/apache/pulsar/issues/268#issuecomment-283710869","issue_url":"https://api.github.com/repos/apache/pulsar/issues/268","id":283710869,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzcxMDg2OQ==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T16:54:06Z","updated_at":"2017-03-02T16:54:06Z","author_association":"NONE","body":"The error has only occurred once. If I don't see it again for a few weeks, I'll close this issue (or of course you can).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283710869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283718053","html_url":"https://github.com/apache/pulsar/issues/271#issuecomment-283718053","issue_url":"https://api.github.com/repos/apache/pulsar/issues/271","id":283718053,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzcxODA1Mw==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T17:18:12Z","updated_at":"2017-03-02T17:18:12Z","author_association":"NONE","body":"Are you suggesting gRPC service that uses the C++ lib as an alternative to the Web Sockets service?\r\nOr are you suggesting a rewrite of Java & C++ libs to use gRPC instead of current protobuf based protocol?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283718053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283728144","html_url":"https://github.com/apache/pulsar/issues/267#issuecomment-283728144","issue_url":"https://api.github.com/repos/apache/pulsar/issues/267","id":283728144,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzcyODE0NA==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T17:53:57Z","updated_at":"2017-03-02T17:53:57Z","author_association":"NONE","body":"@merlimat None of our bookies have crashed for the past 18hs and we are still getting these messages:\r\n\r\n`ERROR - [BookKeeperClientWorker-17-1:PersistentDispatcherMultipleConsumers@316] - [persistent://fury/global/apicoremisc_listing_sort__listing_sort_api/apicoremisc_listing_sort__listing_sort_api-partition-7 / apicoremisc_listing_sort_saas_consumer] Error reading entries at 141134:0 : Bookie handle is not available, Read Type Normal - Retrying to read in 63.609 seconds`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283728144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283729931","html_url":"https://github.com/apache/pulsar/pull/270#issuecomment-283729931","issue_url":"https://api.github.com/repos/apache/pulsar/issues/270","id":283729931,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzcyOTkzMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T18:00:40Z","updated_at":"2017-03-02T18:00:40Z","author_association":"CONTRIBUTOR","body":"@rdhabalia It seems there are some genuine test failures : \r\n\r\n```\r\nTests run: 527, Failures: 6, Errors: 0, Skipped: 0, Time elapsed: 1,062.603 sec <<< FAILURE! - in TestSuite\r\nsocketTest(com.yahoo.pulsar.websocket.proxy.ProxyPublishConsumeTest)  Time elapsed: 10.098 sec  <<< FAILURE!\r\norg.testng.internal.thread.ThreadTimeoutException: Method org.testng.internal.TestNGMethod.socketTest() didn't finish within the time-out 10000\r\n\tat com.yahoo.pulsar.websocket.proxy.ProxyPublishConsumeTest.socketTest(ProxyPublishConsumeTest.java:102)\r\ntestInternalServerExceptionOnLookup(com.yahoo.pulsar.client.api.AuthenticatedProducerConsumerTest)  Time elapsed: 0.109 sec  <<< FAILURE!\r\njava.lang.AssertionError\r\n\tat com.yahoo.pulsar.client.api.AuthenticatedProducerConsumerTest.testInternalServerExceptionOnLookup(AuthenticatedProducerConsumerTest.java:228)\r\ntestMultipleBrokerDifferentClusterLookup(com.yahoo.pulsar.client.api.BrokerServiceLookupTest)  Time elapsed: 0.215 sec  <<< FAILURE!\r\ncom.yahoo.pulsar.client.api.PulsarClientException$LookupException: com.yahoo.pulsar.client.api.PulsarClientException: Authorization failed null on cluster persistent://my-property2/use2/my-ns/my-topic1 with error null\r\ntestMultipleBrokerLookup(com.yahoo.pulsar.client.api.BrokerServiceLookupTest)  Time elapsed: 57.306 sec  <<< FAILURE!\r\ncom.yahoo.pulsar.client.api.PulsarClientException: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\nCaused by: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\nCaused by: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\ntestPartitionTopicLookup(com.yahoo.pulsar.client.api.BrokerServiceLookupTest)  Time elapsed: 62.131 sec  <<< FAILURE!\r\ncom.yahoo.pulsar.client.api.PulsarClientException: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\nCaused by: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\nCaused by: com.yahoo.pulsar.client.api.PulsarClientException$LookupException: java.lang.NullPointerException\r\ntestWebserviceServiceTls(com.yahoo.pulsar.client.api.BrokerServiceLookupTest)  Time elapsed: 0.357 sec  <<< FAILURE!\r\njavax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\r\n\tat com.yahoo.pulsar.client.api.BrokerServiceLookupTest.testWebserviceServiceTls(BrokerServiceLookupTest.java:421)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283729931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283738056","html_url":"https://github.com/apache/pulsar/pull/270#issuecomment-283738056","issue_url":"https://api.github.com/repos/apache/pulsar/issues/270","id":283738056,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzczODA1Ng==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T18:30:43Z","updated_at":"2017-03-02T18:30:43Z","author_association":"CONTRIBUTOR","body":"yes, looking into it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283738056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283763287","html_url":"https://github.com/apache/pulsar/issues/267#issuecomment-283763287","issue_url":"https://api.github.com/repos/apache/pulsar/issues/267","id":283763287,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mzc2MzI4Nw==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T20:01:36Z","updated_at":"2017-03-02T20:01:36Z","author_association":"NONE","body":"After a lot of digging we found that the servers that contained those ledgers were accidentally deleted by us. The whole ensemble was removed with no chance of replication.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283763287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283763858","html_url":"https://github.com/apache/pulsar/pull/252#issuecomment-283763858","issue_url":"https://api.github.com/repos/apache/pulsar/issues/252","id":283763858,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mzc2Mzg1OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T20:03:36Z","updated_at":"2017-03-02T20:03:36Z","author_association":"CONTRIBUTOR","body":">One other option could be to react on the lookups being rejected by the broker (from #181) and close the connection only if errors are received in a certain timeframe.\r\n\r\nDoes it mean client should close the connection when broker gives `TooManyRequestError` back? It means\r\n1. If client doesn't receive `TooManyRequestError` then client will keep this persistent-connection forever. So, there is a still chance that all clients go to the same broker and can still create load on one broker if traffic is < 20K (`maxConcurrentLookupRequest=20000`)\r\n\r\nBut I think I agree with the idea that if client gets `TooManyRequestError` in certain timeframe then client should disconnect the connection and try to connect to different broker (as that broker is already overloaded).\r\n\r\nSame as like #265 we close http-connection on internal-server-error, we need to do it for binary-lookup. So, I will combine 2 changes in new PR:\r\n1. close binary-proto-lookup connection on 500 error\r\n2. close connection if client receives `TooManyLookupRequestError` in certain timeframe.\r\n\r\nAnd we can think of if we don't need this PR-change (close persistent-connection) then we may close this one.\r\n\r\nAny thought?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283763858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283767220","html_url":"https://github.com/apache/pulsar/pull/252#issuecomment-283767220","issue_url":"https://api.github.com/repos/apache/pulsar/issues/252","id":283767220,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mzc2NzIyMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T20:16:09Z","updated_at":"2017-03-02T20:16:09Z","author_association":"CONTRIBUTOR","body":"My reasoning is: \r\n * All client will end up in a single broker only if it's the only one left in cluster\r\n * At that point the broker should be overwhelmed by lookups, if it is not... then we should be good anyway\r\n * If we force close the connections, we can give the clients a chance to reconnect to the other brokers that are being brought up\r\n\r\n> 1. close binary-proto-lookup connection on 500 error\r\n> 2. close connection if client receives TooManyLookupRequestError in certain timeframe.\r\n\r\nYep, that's what I was thinking\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283767220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283774221","html_url":"https://github.com/apache/pulsar/issues/271#issuecomment-283774221","issue_url":"https://api.github.com/repos/apache/pulsar/issues/271","id":283774221,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mzc3NDIyMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T20:43:44Z","updated_at":"2017-03-02T20:44:19Z","author_association":"CONTRIBUTOR","body":"When we started the project gRPC was not available yet so we went with custom protocol. \r\n\r\nI think it would be great to offer a gRPC based interface for better integration, though I would see that as an additional layer, such as the WebSocket proxy (which can run embedded in the broker or as a separate component).\r\n\r\nOne of the primary goals of the custom binary protocol we came up with, was to have the client establish a \"session\" (either producer/consumer), attached to a topic, perform authentication and then let it publish/receive messages as fast as possible, with flow control to guard the rail.\r\n\r\nEg: we don't want to perform auth at every message, or to specify the topic name each time (which in many cases can be as long as the data itself).\r\n\r\nSo, mixing the \"session\" with RPC seems a bit complicated. Also guaranteeing ordering would be challenging as there would be no relation for different publish requests on the same topic.\r\n\r\nHaving said that, I'd be really happy to have a gRPC based proxy service. Contributions welcome! ðŸ˜„ \r\n\r\nIt may be also interesting to offer the same interface (or at least a significant portion of it) as GCP pub-sub: https://cloud.google.com/pubsub/docs/reference/rpc/google.pubsub.v1","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283774221/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283801688","html_url":"https://github.com/apache/pulsar/pull/273#issuecomment-283801688","issue_url":"https://api.github.com/repos/apache/pulsar/issues/273","id":283801688,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzgwMTY4OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T22:22:06Z","updated_at":"2017-03-02T22:22:06Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283801688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283804895","html_url":"https://github.com/apache/pulsar/issues/258#issuecomment-283804895","issue_url":"https://api.github.com/repos/apache/pulsar/issues/258","id":283804895,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzgwNDg5NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-02T22:35:07Z","updated_at":"2017-03-02T22:35:07Z","author_association":"CONTRIBUTOR","body":"There seems to be a concurrency issue in the stats provider that makes 2 threads seeing inconsistent internal state and thus throw exception. I'll send a fix in the bookkeeper repo branch.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/283804895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284087328","html_url":"https://github.com/apache/pulsar/pull/275#issuecomment-284087328","issue_url":"https://api.github.com/repos/apache/pulsar/issues/275","id":284087328,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDA4NzMyOA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-03T22:25:37Z","updated_at":"2017-03-03T22:25:37Z","author_association":"CONTRIBUTOR","body":"First commit solved the immediate problem - 072fe7e296474291fa72cd75ec8026bb695a63d2\r\n\r\nSecond commit restructures the code to solve both the immediate problem and the problem @rdhabalia had tried to fix - c1088ac4a2377a535f2503ffee2fd17331d3e1d9","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284087328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284087377","html_url":"https://github.com/apache/pulsar/pull/275#issuecomment-284087377","issue_url":"https://api.github.com/repos/apache/pulsar/issues/275","id":284087377,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDA4NzM3Nw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-03T22:25:52Z","updated_at":"2017-03-03T22:25:52Z","author_association":"CONTRIBUTOR","body":"can you please add the unit-test case where it tries to disconnect twice. first time it disconnects which stops producer, second time it should not flip the state and try to again restart the replicator which should restart it successfully.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284087377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284102223","html_url":"https://github.com/apache/pulsar/pull/186#issuecomment-284102223","issue_url":"https://api.github.com/repos/apache/pulsar/issues/186","id":284102223,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDEwMjIyMw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-03T23:47:58Z","updated_at":"2017-03-03T23:47:58Z","author_association":"CONTRIBUTOR","body":"@merlimat I have also added `AdminTools` documentation change in this PR.\r\nAs we have PR dependencies #274 -> #181 -> this PR. we can merge it if we are fine with the changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284102223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284109590","html_url":"https://github.com/apache/pulsar/pull/275#issuecomment-284109590","issue_url":"https://api.github.com/repos/apache/pulsar/issues/275","id":284109590,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDEwOTU5MA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-04T00:41:48Z","updated_at":"2017-03-04T00:41:48Z","author_association":"CONTRIBUTOR","body":"@rdhabalia @saandrews - added test case \r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284109590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284246409","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284246409","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284246409,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDI0NjQwOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-05T17:45:34Z","updated_at":"2017-03-05T17:45:34Z","author_association":"CONTRIBUTOR","body":"The bigger question I have is how to take advantage of this, meaning which changes would be needed to \"survive\" a quorum loss on the data ZK and how to make sure that everything is back in order in every condition. :)\r\n\r\nAnyway, is this still a big concern, given that apache/zookeeper#157 has been merged and will be available in zk-3.4.10 ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284246409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284295697","html_url":"https://github.com/apache/pulsar/pull/181#issuecomment-284295697","issue_url":"https://api.github.com/repos/apache/pulsar/issues/181","id":284295697,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDI5NTY5Nw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T03:40:58Z","updated_at":"2017-03-06T03:40:58Z","author_association":"CONTRIBUTOR","body":"@merlimat rebased this one with the #186 changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284295697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284305984","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284305984","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284305984,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDMwNTk4NA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T05:25:06Z","updated_at":"2017-03-06T05:25:06Z","author_association":"CONTRIBUTOR","body":"Here, the problem which we are trying to fix is: Prevent cold-restart of broker due to dataZK's large snapshot size:\r\n- As dataZk has larger snapshot size and many times zk-session times out at broker due to zk-gc or leader-election. It causes cold-restart at brokers and all clients try to reconnect at the same time which forces all the brokers to load all topics at the same time and it again creates significant back-pressure at zookeeper which again may cause quorum loss in zk.\r\n\r\nTherefore, if we have separate dataZK and clusterManagementZK then dataZk will not cause broker restart and pulsar-broker can still survive without dataZk.\r\n\r\n>how to make sure that everything is back in order in every condition.\r\n\r\nas dataZk is down, all clients fail while publish/consume and creation of producer/consumer. So, there is no data loss however, when dataZk comes back that's the only signal we have to make sure everything is back in order and probably monitoring such as SLA-monitoring can help to confirm broker's stability.\r\n\r\n>Anyway, is this still a big concern, given that apache/zookeeper#157 has been merged and will be available in zk-3.4.10 ?\r\n\r\nI think this ZK-patch will help to reduce leader-election time and it will prevent zk-session timeout at broker and also prevent broker-restart. This will definitely help in this problem statement. But, I think it's always good to protect broker against zk-session timeout.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284305984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284307630","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284307630","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284307630,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDMwNzYzMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T05:40:26Z","updated_at":"2017-03-06T05:40:26Z","author_association":"CONTRIBUTOR","body":"> Therefore, if we have separate dataZK and clusterManagementZK then dataZk will not cause broker restart and pulsar-broker can still survive without dataZk.\r\n\r\nTrue, but that's not going to change much, you still cannot survive the quorum loss on clusterManagementZK, plus there need to be significant changes in order to continue operating when loosing dataZk quorum.\r\n\r\n> as dataZk is down, all clients fail while publish/consume and creation of producer/consumer. So, \r\n> there is no data loss however, when dataZk comes back that's the only signal we have to make\r\n> sure everything is back in order and probably monitoring such as SLA-monitoring can help to \r\n> confirm broker's stability.\r\n\r\nThe tricky part is how to come back and have everything in sync between broker and ZK quorum. Eg: version numbers for transactions that were caught in-flight during the quorum loss.\r\n\r\n> I think this ZK-patch will help to reduce leader-election time and it will prevent zk-session timeout > at broker and also prevent broker-restart. This will definitely help in this problem statement. But, I > think it's always good to protect broker against zk-session timeout.\r\n\r\nThe point there is that, by making the leader election not dependent on the snapshot size, the chances of loosing one or the other ZK quorum are not that different.\r\n\r\nThe only difference at that point would be the memory footprint of the quorum and (apart from configuring the JVM heap accordingly), the easiest way to improve the conditions there would be to use binary protobuf for the z-nodes content.\r\n\r\nEven just doing that for ML and cursors (and at least initially, not for BK ledgers) would considerably reduce the ZK data set size. I would expect the same info to take 1/10th of size in binary vs text format.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284307630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284317531","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-284317531","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":284317531,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDMxNzUzMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T07:00:13Z","updated_at":"2017-03-06T07:00:30Z","author_association":"CONTRIBUTOR","body":"@sschepens  I have added few changes on top of this PR in #276. Please take a look. \r\n\r\nI haven't included your second commit about the lock refactoring. I didn't see any deadlock so far and that's kind of \"sensitive\" code :). Kind of easy to break something unexpected there. \r\nHow did you get the deadlock, just running the unit tests?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284317531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284318330","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-284318330","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":284318330,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDMxODMzMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T07:05:54Z","updated_at":"2017-03-06T07:05:54Z","author_association":"CONTRIBUTOR","body":"> How did you get the deadlock, just running the unit tests?\r\n\r\nCorrect myself.. I see the same deadlock","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284318330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284386526","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-284386526","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":284386526,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDM4NjUyNg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T12:45:47Z","updated_at":"2017-03-06T19:34:18Z","author_association":"CONTRIBUTOR","body":"@merlimat we've been running with this code for almost two weeks and we have not seen any more deadlocks nor unwanted behavior I believe, please check the lock refactoring I made, most changes make a lot of sense to me, and shouldn't trigger any side effects.\r\n\r\nThis will also probably reduce contention a little bit, since some locks are never required and some others are released quicker.\r\n\r\nIn some cases we were synchronizing on `pendingMarkDeleteOps` just to perform an `RESET_CURSOR_IN_PROGRESS_UPDATER.compareAndSet`, and this didn't make much sense, since this operations are already atomic and don't modify `pendingMarkDeleteOps`\r\n\r\nIn other cases we were synchronizing on `pendingMarkDeleteOps` on blocks of code which then didn't end up needing the lock at all. I modified these, to only lock the blocks of code which actually need the lock.\r\n\r\nThen `flushPendingMarkDeletes` was requiring that the caller synchronized on `pendingMarkDeleteOps` before calling the method, this also made little sense, so I moved the lock inside the method.\r\n\r\nI don't see how these could cause any issues, but maybe you can see something I don't.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284386526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284558241","html_url":"https://github.com/apache/pulsar/issues/279#issuecomment-284558241","issue_url":"https://api.github.com/repos/apache/pulsar/issues/279","id":284558241,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU1ODI0MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-06T22:41:24Z","updated_at":"2017-03-06T22:41:24Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Just saw this, can you take a look when you have time?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284558241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284576132","html_url":"https://github.com/apache/pulsar/pull/254#issuecomment-284576132","issue_url":"https://api.github.com/repos/apache/pulsar/issues/254","id":284576132,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU3NjEzMg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T00:04:14Z","updated_at":"2017-03-07T00:04:14Z","author_association":"CONTRIBUTOR","body":"@rdhabalia @merlimat - kindly review this.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284576132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284594713","html_url":"https://github.com/apache/pulsar/issues/281#issuecomment-284594713","issue_url":"https://api.github.com/repos/apache/pulsar/issues/281","id":284594713,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU5NDcxMw==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T01:45:44Z","updated_at":"2017-03-07T01:45:44Z","author_association":"CONTRIBUTOR","body":"ðŸ‘ We'll need a CLI that knows how to decode into protobuf text so that we can still examine the system: maybe a wrapper around zoosh.\r\n\r\nHow do you propose to rewrite the data in ZK into the new format?  We obviously won't want to do it too quickly.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284594713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284597169","html_url":"https://github.com/apache/pulsar/issues/281#issuecomment-284597169","issue_url":"https://api.github.com/repos/apache/pulsar/issues/281","id":284597169,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDU5NzE2OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T01:59:29Z","updated_at":"2017-03-07T01:59:29Z","author_association":"CONTRIBUTOR","body":"For the re-writing I was thinking to just do that each of them individually, at the first write occourence. \r\n\r\nFor z-nodes that are not rewritten, we can leave the code that fallback to deserislize the text format indefinitely. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284597169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284635104","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284635104","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284635104,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDYzNTEwNA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T06:34:50Z","updated_at":"2017-03-07T06:34:50Z","author_association":"CONTRIBUTOR","body":"Ok. few more points on it:\r\n>True, but that's not going to change much, you still cannot survive the quorum loss on clusterManagementZK\r\n\r\nI think our main concern is larger footprint causes instability (larger gc) and quorum-loss in zk which impacts broker's cold-restart and it has recursive negative impact on both zk and broker. So, clusterManagementZK will just store the ephemeral-nodes such as bundle-ownership and loadbalancer information, which creates smallest snapshot size and that's the main reason to prevent  zk quorum loss.\r\n\r\n>The tricky part is how to come back and have everything in sync between broker and ZK quorum. Eg: version numbers for transactions that were caught in-flight during the quorum loss.\r\n\r\nThis should be fix by reading latest zk-data and refreshing the version when broker sees bad-version when system comes back.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284635104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284813769","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284813769","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284813769,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDgxMzc2OQ==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T18:33:25Z","updated_at":"2017-03-07T18:33:25Z","author_association":"CONTRIBUTOR","body":"Has anyone estimated the impact on snapshot size for workloads people care about as proposed in https://github.com/yahoo/pulsar/issues/281#issuecomment-284597169?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284813769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284817082","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284817082","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284817082,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDgxNzA4Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T18:45:12Z","updated_at":"2017-03-07T18:45:12Z","author_association":"CONTRIBUTOR","body":"Also, it would be good to record worse case GC pauses in ZK servers.\r\n\r\nMy suspect is that, in a correctly configured machine (no swap, heap large enough for data-set), the GC pauses would be an order of magnitude less than what is needed to cause a zk server to be dropped from quorum.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284817082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284817581","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-284817581","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":284817581,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDgxNzU4MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-07T18:46:50Z","updated_at":"2017-03-07T18:46:50Z","author_association":"CONTRIBUTOR","body":"Also, the risk of #281, compared to the risk involved in transitioning to the 2 zk quorums is way lower.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/284817581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120046","html_url":"https://github.com/apache/pulsar/pull/276#issuecomment-285120046","issue_url":"https://api.github.com/repos/apache/pulsar/issues/276","id":285120046,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTEyMDA0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-08T18:08:42Z","updated_at":"2017-03-08T18:08:42Z","author_association":"CONTRIBUTOR","body":"Ping @saandrews @rdhabalia ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120356","html_url":"https://github.com/apache/pulsar/pull/276#issuecomment-285120356","issue_url":"https://api.github.com/repos/apache/pulsar/issues/276","id":285120356,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTEyMDM1Ng==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-08T18:09:51Z","updated_at":"2017-03-08T18:09:51Z","author_association":"CONTRIBUTOR","body":"yes, I will review it soon.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120641","html_url":"https://github.com/apache/pulsar/pull/276#issuecomment-285120641","issue_url":"https://api.github.com/repos/apache/pulsar/issues/276","id":285120641,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTEyMDY0MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-08T18:10:51Z","updated_at":"2017-03-08T18:10:51Z","author_association":"CONTRIBUTOR","body":"No rush, just that I have the other changes for binary format in ML written on top of this :) \r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285120641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285150215","html_url":"https://github.com/apache/pulsar/pull/282#issuecomment-285150215","issue_url":"https://api.github.com/repos/apache/pulsar/issues/282","id":285150215,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTE1MDIxNQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-08T19:54:59Z","updated_at":"2017-03-08T19:54:59Z","author_association":"CONTRIBUTOR","body":"Note: this PR is based on a branch that contains the changes for #276. I will rebase once that PR gets merged.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285150215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285154213","html_url":"https://github.com/apache/pulsar/issues/281#issuecomment-285154213","issue_url":"https://api.github.com/repos/apache/pulsar/issues/281","id":285154213,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTE1NDIxMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-08T20:09:31Z","updated_at":"2017-03-08T20:09:31Z","author_association":"CONTRIBUTOR","body":"Added PR with first part of needed changes. About the CLI tool, I'm leaning towards having a REST API that read from ZK and returns the json. The topic won't need to be loaded, just any broker could answer that request.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285154213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285483146","html_url":"https://github.com/apache/pulsar/pull/276#issuecomment-285483146","issue_url":"https://api.github.com/repos/apache/pulsar/issues/276","id":285483146,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ4MzE0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T21:07:27Z","updated_at":"2017-03-09T21:07:27Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Updated","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285483146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285604488","html_url":"https://github.com/apache/pulsar/pull/283#issuecomment-285604488","issue_url":"https://api.github.com/repos/apache/pulsar/issues/283","id":285604488,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTYwNDQ4OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T08:08:38Z","updated_at":"2017-03-10T08:08:38Z","author_association":"CONTRIBUTOR","body":"@saandrews I think we still need to make the buffer unpooled, the `retain()` was there since we at least once saw the ref count for the cmdPing going to 0","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285604488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285605327","html_url":"https://github.com/apache/pulsar/pull/283#issuecomment-285605327","issue_url":"https://api.github.com/repos/apache/pulsar/issues/283","id":285605327,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTYwNTMyNw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T08:13:34Z","updated_at":"2017-03-10T08:13:34Z","author_association":"CONTRIBUTOR","body":"I see. I have moved the buffer to unpooled as well.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285605327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285749953","html_url":"https://github.com/apache/pulsar/pull/282#issuecomment-285749953","issue_url":"https://api.github.com/repos/apache/pulsar/issues/282","id":285749953,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTc0OTk1Mw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T18:40:26Z","updated_at":"2017-03-10T18:40:26Z","author_association":"CONTRIBUTOR","body":"just FYI: https://github.com/yahoo/pulsar/tree/persist-individually-deleted-messages-br should we delete branch?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285749953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285751948","html_url":"https://github.com/apache/pulsar/pull/282#issuecomment-285751948","issue_url":"https://api.github.com/repos/apache/pulsar/issues/282","id":285751948,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTc1MTk0OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T18:48:02Z","updated_at":"2017-03-10T18:48:02Z","author_association":"CONTRIBUTOR","body":"I created that branch, so that this PR would only show intended changes. I'll rebase on master now and remove that temp branch.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285751948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285767757","html_url":"https://github.com/apache/pulsar/pull/282#issuecomment-285767757","issue_url":"https://api.github.com/repos/apache/pulsar/issues/282","id":285767757,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTc2Nzc1Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T19:51:30Z","updated_at":"2017-03-10T19:51:30Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Updated","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285767757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285795571","html_url":"https://github.com/apache/pulsar/pull/252#issuecomment-285795571","issue_url":"https://api.github.com/repos/apache/pulsar/issues/252","id":285795571,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTc5NTU3MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T21:56:27Z","updated_at":"2017-03-10T21:56:27Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Should this PR be closed in favor of #274 ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285795571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285795773","html_url":"https://github.com/apache/pulsar/pull/252#issuecomment-285795773","issue_url":"https://api.github.com/repos/apache/pulsar/issues/252","id":285795773,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTc5NTc3Mw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T21:57:24Z","updated_at":"2017-03-10T21:57:24Z","author_association":"CONTRIBUTOR","body":"yes, let's close this one.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285795773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285820173","html_url":"https://github.com/apache/pulsar/pull/285#issuecomment-285820173","issue_url":"https://api.github.com/repos/apache/pulsar/issues/285","id":285820173,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTgyMDE3Mw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-11T00:15:45Z","updated_at":"2017-03-11T00:15:45Z","author_association":"CONTRIBUTOR","body":"We are trying to get some help to review it. Will update in few days.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285820173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285822977","html_url":"https://github.com/apache/pulsar/issues/237#issuecomment-285822977","issue_url":"https://api.github.com/repos/apache/pulsar/issues/237","id":285822977,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTgyMjk3Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-11T00:38:54Z","updated_at":"2017-03-11T00:38:54Z","author_association":"CONTRIBUTOR","body":"Tests are still failing in master : \r\n\r\n```\r\nsocketTest(com.yahoo.pulsar.websocket.proxy.ProxyPublishConsumeTest)  Time elapsed: 10.026 sec  <<< FAILURE!\r\norg.testng.internal.thread.ThreadTimeoutException: Method org.testng.internal.TestNGMethod.socketTest() didn't finish within the time-out 10000\r\n\tat com.yahoo.pulsar.websocket.proxy.ProxyPublishConsumeTest.socketTest(ProxyPublishConsumeTest.java:110)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/285822977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286091642","html_url":"https://github.com/apache/pulsar/issues/269#issuecomment-286091642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/269","id":286091642,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjA5MTY0Mg==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T12:19:29Z","updated_at":"2017-03-13T12:19:29Z","author_association":"NONE","body":"> Tests run: 540, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 863.584 sec <<< FAILURE! - in TestSuite\r\n> testLoadReportsWrittenOnZK(com.yahoo.pulsar.broker.loadbalance.LoadBalancerTest)  Time elapsed: 0.012 sec  <<< FAILURE!\r\n> java.lang.AssertionError: expected [true] but found [false]\r\n> \tat com.yahoo.pulsar.broker.loadbalance.LoadBalancerTest.testLoadReportsWrittenOnZK(LoadBalancerTest.java:202)\r\n\r\nPulsar version: f0fbb4da55d60099af12159f7b7932f9ec4843b3\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286091642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286243460","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286243460","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286243460,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0MzQ2MA==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:05:23Z","updated_at":"2017-03-13T21:05:23Z","author_association":"CONTRIBUTOR","body":"what's the plan for ABI compat break? force a rebuild to take the new client?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286243460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286244140","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286244140","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286244140,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0NDE0MA==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:07:51Z","updated_at":"2017-03-13T21:07:51Z","author_association":"CONTRIBUTOR","body":"ðŸ‘ ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286244140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286245335","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286245335","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286245335,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0NTMzNQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:12:33Z","updated_at":"2017-03-13T21:13:54Z","author_association":"CONTRIBUTOR","body":"@merlimat - Changes for #241 are incomplete since we don't have the macro in Auth.cc so if you try to compile the code with -DPULSAR_ENABLE_DEPRECATED_METHOD it will fail since there is no implementation for \r\n- AuthData \r\n- static AuthDataPtr Disabled();\r\n- static AuthDataPtr YcaV1(const std::string& ycaAppId);\r\n\r\n@msb-at-yahoo - we are planning to maintain an internal branch with changes for \"Auth.h\" and \"Auth.cc\", we will pull changes from OS master and push to the internal branch whenever we build a tag.\r\n\r\nSince these Auth.* files are rarely changed we will rarely have to do a manual merge.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286245335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286245771","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286245771","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286245771,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0NTc3MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:14:09Z","updated_at":"2017-03-13T21:14:09Z","author_association":"CONTRIBUTOR","body":"@jai1 Fine with me.. I was also skeptic of feasibility of source compatibility. Please make sure to check in with @saandrews .","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286245771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286247095","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286247095","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286247095,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0NzA5NQ==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:19:01Z","updated_at":"2017-03-13T21:19:01Z","author_association":"CONTRIBUTOR","body":"makes sense. Â longer term we should look at something influenced by SASL so that support for internal auth protocols don't break the ABI.\n\nOn Monday, March 13, 2017, 2:12:40 PM PDT, jai1 <notifications@github.com> wrote:\n@merlimat - Changes for #241 are incomplete since we don't have the macro in Auth.cc so if you try to compile the code with -DPULSAR_ENABLE_DEPRECATED_METHOD it will fail since there is no implementation for\n   \n   - AuthData\n   - static AuthDataPtr Disabled();\n   - static AuthDataPtr YcaV1(const std::string& ycaAppId);\n\n@msb-at-yahoo - we are planning to maintain an internal branch with changes for \"Auth.h\" and \"Auth.cc\", we will pull changed from OS master and push to the internal branch whenever we build a tag.\n\nSince these Auth.* files are rarely changed we will rarely have to do a manual merge.\n\nâ€”\nYou are receiving this because you were mentioned.\n\nReply to this email directly, view it on GitHub, or mute the thread. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286247095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286248353","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286248353","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286248353,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI0ODM1Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T21:23:54Z","updated_at":"2017-03-13T21:23:54Z","author_association":"CONTRIBUTOR","body":"> makes sense.  longer term we should look at something influenced by SASL so that support for internal auth protocols don't break the ABI.\r\n\r\nIt's already possible, the new auth api takes a \"plugin\" library as a parameter, so you can pass in a new auth implementation.\r\n\r\nThe problem was related to the earlier C++ auth api that was having YCA as an always viable option.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286248353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286259709","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286259709","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286259709,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI1OTcwOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T22:10:48Z","updated_at":"2017-03-13T22:11:03Z","author_association":"CONTRIBUTOR","body":"> fence topic\r\n> disconnect producers and consumers on the topic\r\n\r\nThis needs to happen on multiple brokers\r\n\r\n> increase partitions\r\n\r\nThat's the easy part ðŸ˜„ \r\n\r\n> unfence topic\r\n\r\nAgain, coordinate multiple brokers, and then needs a way to communicate to producer consumers that they have to restart with the partition configuration. \r\n\r\n(All this setting aside any ordering breaking consideration)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286259709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286261638","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286261638","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286261638,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI2MTYzOA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T22:19:05Z","updated_at":"2017-03-13T22:19:05Z","author_association":"CONTRIBUTOR","body":"I think the 1st step should be to define what can be reasonably achieved and what the operation would look like for a user","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286261638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286264462","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286264462","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286264462,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI2NDQ2Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T22:31:59Z","updated_at":"2017-03-13T22:31:59Z","author_association":"CONTRIBUTOR","body":">This needs to happen on multiple brokers\r\n\r\nThat's correct. Therefore, i missed to list down another option here:\r\n- create additional subscriptions for new partitions\r\n- increase partitions in globalZk\r\n- ask partitioned-topic owner brokers to invalidate partition-topic cache and disconnect all producers and consumers\r\n- let producers/consumers reconnect (if any of the lookup broker failed/delayed to refresh partition-topic cache then in worst case we won't loose the data as subscriptions are already created) and next client restart can get it correctly. \r\n\r\n> I think the 1st step should be to define what can be reasonably achieved and what the operation would look like for a user\r\n\r\nCorrect. I think broker can only increase the number of partitions and can't allow to decrease as it requires to delete subscription.\r\nAPI: updatePartitionedTopic(topic, numPartitions) // or incrementPartitions(topic, numPartitions)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286264462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286271473","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286271473","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286271473,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI3MTQ3Mw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T23:06:22Z","updated_at":"2017-03-13T23:06:22Z","author_association":"CONTRIBUTOR","body":"@merlimat @msb-at-yahoo - I think we already broke the ABI by changing \r\n`static AuthDataPtr Disabled(); \r\n`TO\r\n`static AuthenticationPtr Disabled();\r\n`\r\nSince AuthData is not of the same size as Authentication class\r\n\r\nTrying to fix it without having to change Client.cc\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286271473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286271709","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286271709","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286271709,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI3MTcwOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T23:07:41Z","updated_at":"2017-03-13T23:07:47Z","author_association":"CONTRIBUTOR","body":"> I think we already broke the ABI by changing\r\n\r\nABI was broken on renaming the c++ namespace from `cms` to `pulsar`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286271709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286286642","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-286286642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":286286642,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjI4NjY0Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T00:36:08Z","updated_at":"2017-03-14T00:36:08Z","author_association":"CONTRIBUTOR","body":"Please don't merge the branch I will me making more changes to fix the broken ABI so that we can compile by adding -Dpulsar=cms","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286286642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286300779","html_url":"https://github.com/apache/pulsar/pull/285#issuecomment-286300779","issue_url":"https://api.github.com/repos/apache/pulsar/issues/285","id":286300779,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMwMDc3OQ==","user":{"login":"hrsakai","id":22829228,"node_id":"MDQ6VXNlcjIyODI5MjI4","avatar_url":"https://avatars.githubusercontent.com/u/22829228?v=4","gravatar_id":"","url":"https://api.github.com/users/hrsakai","html_url":"https://github.com/hrsakai","followers_url":"https://api.github.com/users/hrsakai/followers","following_url":"https://api.github.com/users/hrsakai/following{/other_user}","gists_url":"https://api.github.com/users/hrsakai/gists{/gist_id}","starred_url":"https://api.github.com/users/hrsakai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hrsakai/subscriptions","organizations_url":"https://api.github.com/users/hrsakai/orgs","repos_url":"https://api.github.com/users/hrsakai/repos","events_url":"https://api.github.com/users/hrsakai/events{/privacy}","received_events_url":"https://api.github.com/users/hrsakai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T02:11:17Z","updated_at":"2017-03-14T02:11:17Z","author_association":"CONTRIBUTOR","body":"@merlimat @saandrews \r\nI did ``Add a link to the translation in the main Documentation.md page `` and `` Instead reference the same files under doc/images folder``. please, check them(https://github.com/yahoo/pulsar/pull/285/commits/a17a3cbfe85b3f56f1e59daf5d2bcea91a63300a https://github.com/yahoo/pulsar/pull/285/commits/2ec6cfe3bc88120c51658eb39f98990cc08f2766).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286300779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286313355","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286313355","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286313355,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMxMzM1NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T03:41:24Z","updated_at":"2017-03-14T03:41:24Z","author_association":"CONTRIBUTOR","body":"One point to consider is that when connecting to create a producer/consumer on a partition, the client doesn't indicate how many partitions it believes are available. Eg.: we don't specify partition 5 out of 16. \r\n\r\nThat would make it easier for a broker to reject a producer/consumer with the wrong metadata information.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286313355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286318984","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286318984","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286318984,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMxODk4NA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T04:27:17Z","updated_at":"2017-03-14T04:27:17Z","author_association":"CONTRIBUTOR","body":">That would make it easier for a broker to reject a producer/consumer with the wrong metadata information.\r\n\r\nI apologize but I couldn't fully understand this one. you are right that client doesn't send metadata-information(eg. 5 out of 16) to broker when create producer/consumer. So, you are suggesting that we should introduce a new field named `totalPartitions` in a request and if it doesn't match at broker then broker rejects so, client can do new lookup to get latest metadata?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286318984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286319381","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286319381","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286319381,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMxOTM4MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T04:30:51Z","updated_at":"2017-03-14T04:30:51Z","author_association":"CONTRIBUTOR","body":">  So, you are suggesting that we should introduce a new field named totalPartitions in a request and if it doesn't match at broker then broker rejects so, client can do new lookup to get latest metadata?\r\n\r\nYes, though I'm just bouncing ideas.. don't read too much into it.\r\n\r\n> client can do new lookup to get latest metadata?\r\n\r\nThe challenge here is to make sure the client library reinitiates itself by correctly recreating all the individual producers/consumers. Also, what happens to clients with older client lib?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286319381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286320363","html_url":"https://github.com/apache/pulsar/issues/291#issuecomment-286320363","issue_url":"https://api.github.com/repos/apache/pulsar/issues/291","id":286320363,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMyMDM2Mw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T04:39:57Z","updated_at":"2017-03-14T04:39:57Z","author_association":"CONTRIBUTOR","body":"> Yes, though I'm just bouncing ideas.. don't read too much into it.\r\nOk. :-)\r\n\r\nyes, we can do that. with older lib (if `totalPartitions` not present) it will not reject producers/consumers and client might have to restart manually later on. but with this change at least client can get a chance to do new lookup.\r\nHowever, we also have to handle usecase where new partitions falls under different bundle and broker which owns that bundle might not have received watch so broker itself may not have latest data.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286320363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286336747","html_url":"https://github.com/apache/pulsar/pull/292#issuecomment-286336747","issue_url":"https://api.github.com/repos/apache/pulsar/issues/292","id":286336747,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjMzNjc0Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T06:49:10Z","updated_at":"2017-03-14T06:49:10Z","author_association":"CONTRIBUTOR","body":"This PR is the last piece missing to complete #281 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286336747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286417400","html_url":"https://github.com/apache/pulsar/pull/285#issuecomment-286417400","issue_url":"https://api.github.com/repos/apache/pulsar/issues/285","id":286417400,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjQxNzQwMA==","user":{"login":"okuryu","id":34588,"node_id":"MDQ6VXNlcjM0NTg4","avatar_url":"https://avatars.githubusercontent.com/u/34588?v=4","gravatar_id":"","url":"https://api.github.com/users/okuryu","html_url":"https://github.com/okuryu","followers_url":"https://api.github.com/users/okuryu/followers","following_url":"https://api.github.com/users/okuryu/following{/other_user}","gists_url":"https://api.github.com/users/okuryu/gists{/gist_id}","starred_url":"https://api.github.com/users/okuryu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okuryu/subscriptions","organizations_url":"https://api.github.com/users/okuryu/orgs","repos_url":"https://api.github.com/users/okuryu/repos","events_url":"https://api.github.com/users/okuryu/events{/privacy}","received_events_url":"https://api.github.com/users/okuryu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T13:16:32Z","updated_at":"2017-03-14T13:16:32Z","author_association":"NONE","body":"+1 for the quality of translation as a first version.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286417400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286476517","html_url":"https://github.com/apache/pulsar/pull/254#issuecomment-286476517","issue_url":"https://api.github.com/repos/apache/pulsar/issues/254","id":286476517,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjQ3NjUxNw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T16:24:43Z","updated_at":"2017-03-14T16:24:43Z","author_association":"CONTRIBUTOR","body":"@merlimat - Please review this when you get time\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286476517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286573275","html_url":"https://github.com/apache/pulsar/pull/294#issuecomment-286573275","issue_url":"https://api.github.com/repos/apache/pulsar/issues/294","id":286573275,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjU3MzI3NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-14T21:54:56Z","updated_at":"2017-03-14T21:54:56Z","author_association":"CONTRIBUTOR","body":"/cc @agarman. I also have some dashboards on the works","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286573275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286605985","html_url":"https://github.com/apache/pulsar/pull/294#issuecomment-286605985","issue_url":"https://api.github.com/repos/apache/pulsar/issues/294","id":286605985,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYwNTk4NQ==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-15T00:38:33Z","updated_at":"2017-03-15T00:38:33Z","author_association":"NONE","body":"That's great. Sorry my team's participation is currently in limbo.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/286605985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287225625","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-287225625","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":287225625,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzIyNTYyNQ==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T23:42:32Z","updated_at":"2017-03-16T23:42:32Z","author_association":"CONTRIBUTOR","body":"If you are still seeing this issue, it will be useful if you can list the nodes under /ledgers/available and send the contents of /bookies","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287225625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287349593","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-287349593","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":287349593,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM0OTU5Mw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T13:10:54Z","updated_at":"2017-03-17T13:11:04Z","author_association":"CONTRIBUTOR","body":"@saandrews yes we're still experimenting this every once in a while","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287349593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287427196","html_url":"https://github.com/apache/pulsar/pull/254#issuecomment-287427196","issue_url":"https://api.github.com/repos/apache/pulsar/issues/254","id":287427196,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzQyNzE5Ng==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T17:56:45Z","updated_at":"2017-03-17T17:56:45Z","author_association":"CONTRIBUTOR","body":"@rdhabalia - have implemented your suggestion\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287427196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287427308","html_url":"https://github.com/apache/pulsar/pull/254#issuecomment-287427308","issue_url":"https://api.github.com/repos/apache/pulsar/issues/254","id":287427308,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzQyNzMwOA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T17:57:10Z","updated_at":"2017-03-17T17:57:10Z","author_association":"CONTRIBUTOR","body":"@saandrews @rdhabalia - need a plus one on this - please","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287427308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287512078","html_url":"https://github.com/apache/pulsar/pull/290#issuecomment-287512078","issue_url":"https://api.github.com/repos/apache/pulsar/issues/290","id":287512078,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzUxMjA3OA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-18T03:05:30Z","updated_at":"2017-03-18T03:05:30Z","author_association":"CONTRIBUTOR","body":"@msb-at-yahoo @saandrews @merlimat - With this we maintain backward compatibility with Yahoo code (only -Dpulsar=cms and Auth.*) and leave a smaller footprint of depreciated methods.\r\n\r\nNeed a +1 on this please","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287512078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287933998","html_url":"https://github.com/apache/pulsar/pull/254#issuecomment-287933998","issue_url":"https://api.github.com/repos/apache/pulsar/issues/254","id":287933998,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzkzMzk5OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T23:51:03Z","updated_at":"2017-03-20T23:51:03Z","author_association":"CONTRIBUTOR","body":"@merlimat can you also please review it when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287933998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287993054","html_url":"https://github.com/apache/pulsar/pull/296#issuecomment-287993054","issue_url":"https://api.github.com/repos/apache/pulsar/issues/296","id":287993054,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzk5MzA1NA==","user":{"login":"yush1ga","id":22343413,"node_id":"MDQ6VXNlcjIyMzQzNDEz","avatar_url":"https://avatars.githubusercontent.com/u/22343413?v=4","gravatar_id":"","url":"https://api.github.com/users/yush1ga","html_url":"https://github.com/yush1ga","followers_url":"https://api.github.com/users/yush1ga/followers","following_url":"https://api.github.com/users/yush1ga/following{/other_user}","gists_url":"https://api.github.com/users/yush1ga/gists{/gist_id}","starred_url":"https://api.github.com/users/yush1ga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yush1ga/subscriptions","organizations_url":"https://api.github.com/users/yush1ga/orgs","repos_url":"https://api.github.com/users/yush1ga/repos","events_url":"https://api.github.com/users/yush1ga/events{/privacy}","received_events_url":"https://api.github.com/users/yush1ga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T07:00:51Z","updated_at":"2017-03-21T07:00:51Z","author_association":"CONTRIBUTOR","body":"I added documentation.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/287993054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288236334","html_url":"https://github.com/apache/pulsar/pull/292#issuecomment-288236334","issue_url":"https://api.github.com/repos/apache/pulsar/issues/292","id":288236334,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODIzNjMzNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T22:14:35Z","updated_at":"2017-03-21T22:14:35Z","author_association":"CONTRIBUTOR","body":"Ping @saandrews @rdhabalia ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288236334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288247608","html_url":"https://github.com/apache/pulsar/pull/255#issuecomment-288247608","issue_url":"https://api.github.com/repos/apache/pulsar/issues/255","id":288247608,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI0NzYwOA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T23:09:55Z","updated_at":"2017-03-21T23:09:55Z","author_association":"CONTRIBUTOR","body":"Closing the PR - need to think a little more about this - sorry for the unneccessary noise.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288247608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288248507","html_url":"https://github.com/apache/pulsar/issues/300#issuecomment-288248507","issue_url":"https://api.github.com/repos/apache/pulsar/issues/300","id":288248507,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI0ODUwNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T23:14:28Z","updated_at":"2017-03-21T23:14:28Z","author_association":"CONTRIBUTOR","body":"Is the 5K bundles realistic? \r\nWasn't the model to be more like: 1 bundle == 1K topics ?\r\n\r\nThe unload is already working bundle by bundle, we would just need to throttle on the load path. \r\n\r\nI think it can be either done at the bundle or (probably better) at the topic level, defining a max number of concurrent load and deferring the rest.\r\n\r\nThe \"defer\" could be done in few different ways: \r\n * Fail the load and let the clients retry later\r\n * Or, just queue the topic load request and whenever we're done loading a topic check the queue for more topics to resume loading.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288248507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288252665","html_url":"https://github.com/apache/pulsar/pull/303#issuecomment-288252665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/303","id":288252665,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI1MjY2NQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T23:34:59Z","updated_at":"2017-03-21T23:34:59Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288252665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288262114","html_url":"https://github.com/apache/pulsar/issues/300#issuecomment-288262114","issue_url":"https://api.github.com/repos/apache/pulsar/issues/300","id":288262114,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI2MjExNA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T00:31:17Z","updated_at":"2017-03-22T00:31:17Z","author_association":"CONTRIBUTOR","body":"> Is the 5K bundles realistic?\r\nWasn't the model to be more like: 1 bundle == 1K topics ?\r\n\r\nactually, while running load test topics were not distributed equally to each bundle so, topics couldn't distributed uniformly.\r\n\r\nand yes, we have made similar change as you mentioned and will perform similar load test with it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288262114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288262177","html_url":"https://github.com/apache/pulsar/pull/292#issuecomment-288262177","issue_url":"https://api.github.com/repos/apache/pulsar/issues/292","id":288262177,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI2MjE3Nw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T00:31:39Z","updated_at":"2017-03-22T00:31:39Z","author_association":"CONTRIBUTOR","body":"yes, I will review it soon.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288262177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288472170","html_url":"https://github.com/apache/pulsar/pull/304#issuecomment-288472170","issue_url":"https://api.github.com/repos/apache/pulsar/issues/304","id":288472170,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQ3MjE3MA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T17:15:38Z","updated_at":"2017-03-22T17:15:38Z","author_association":"CONTRIBUTOR","body":"@hrsakai - I had to change the CPP Client code (#290) - rename a few APIs and classes in the Auth code in order to maintain backward compatibility with CPP client in production. You may have to use the new API names - let me know if you run into some trouble, I will help out. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288472170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288533016","html_url":"https://github.com/apache/pulsar/pull/306#issuecomment-288533016","issue_url":"https://api.github.com/repos/apache/pulsar/issues/306","id":288533016,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODUzMzAxNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T20:43:56Z","updated_at":"2017-03-22T20:43:56Z","author_association":"CONTRIBUTOR","body":"> If we reject the loading, an unused topic will not get loaded later. That's why I was also thinking of \"queuing\" the topic load operations.\r\n\r\nThat's correct. However, if topic is unused (no producer/consumer) then isn't it deleted by GC from that broker. So, after that it will not reflect into stats. And if there is any producer wants to connect then anyway that topic will be loaded after sometime. \r\nIs that correct?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288533016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288533300","html_url":"https://github.com/apache/pulsar/pull/306#issuecomment-288533300","issue_url":"https://api.github.com/repos/apache/pulsar/issues/306","id":288533300,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODUzMzMwMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T20:44:49Z","updated_at":"2017-03-22T20:44:49Z","author_association":"CONTRIBUTOR","body":"> However, if topic is unused (no producer/consumer) then isn't it deleted by GC from that broker. \r\n\r\nThe topic can have subscriptions and no producers/consumers using it","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288533300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288538679","html_url":"https://github.com/apache/pulsar/issues/309#issuecomment-288538679","issue_url":"https://api.github.com/repos/apache/pulsar/issues/309","id":288538679,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODUzODY3OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T21:02:32Z","updated_at":"2017-03-22T21:02:32Z","author_association":"CONTRIBUTOR","body":"The state of that consumer in that partition is:\r\n```\r\n    \"7621bdff98154778b082d362e5490520-sem-gps_mlm\" : {\r\n      \"markDeletePosition\" : \"566917:35285\",\r\n      \"readPosition\" : \"566917:35286\",\r\n      \"waitingReadOp\" : false,\r\n      \"pendingReadOps\" : 0,\r\n      \"messagesConsumedCounter\" : -2966888,\r\n      \"cursorLedger\" : 701872,\r\n      \"cursorLedgerLastEntry\" : 1,\r\n      \"individuallyDeletedMessages\" : \"[(566917:35286â€¥620386:25392], (620386:25393â€¥628296:34483], (628296:34484â€¥654199:1618], (654199:1619â€¥659017:48446], (659017:48447â€¥679414:36857], (679414:36858â€¥680901:49317], (680901:49318â€¥682083:9805], (682083:9806â€¥682083:11646], (682083:11647â€¥683799:15090], (683799:15091â€¥684740:22556], (684740:22557â€¥685652:24167], (685652:24168â€¥685652:26223], (685652:26224â€¥685652:32989], (685652:32990â€¥686322:18693], (686322:18694â€¥686322:21945], (686322:21946â€¥686322:22203], (686322:22204â€¥686322:26791], (686322:26792â€¥686322:27396], (686322:27397â€¥686857:41421], (686857:41422â€¥687180:39997], (687180:39998â€¥687981:17711], (687981:17712â€¥688971:40255], (688971:40256â€¥690115:21199], (690115:21200â€¥691739:24453], (691739:24454â€¥691739:24886], (691739:24887â€¥691739:34095], (691739:34096â€¥691739:37104], (691739:37105â€¥691739:38179], (691739:38180â€¥693222:8367], (693222:8368â€¥694265:36928], (694265:36929â€¥694265:39195], (694265:39196â€¥697447:3648], (697447:3649â€¥697890:45761], (697890:45762â€¥700410:3789], (700410:3790â€¥700410:26734], (700410:26735â€¥701287:47336], (701287:47343â€¥701287:47582], (701287:47593â€¥701287:47736], (701287:47743â€¥701287:47823], (701287:47830â€¥701287:47872], (701287:47880â€¥701287:47941], (701287:47943â€¥701287:47976], (701287:47993â€¥701287:48014], (701287:48043â€¥701287:48058], (701287:48093â€¥701287:48111], (701287:48141â€¥701287:48158], (701287:48188â€¥701287:48197], (701287:48238â€¥701287:48247], (701287:48289â€¥701287:48306], (701287:48377â€¥701287:48382], (701287:48426â€¥701287:48428], (701287:48477â€¥701287:48492], (701287:48526â€¥701287:48532], (701287:48576â€¥701287:48579], (701287:48626â€¥701287:48628], (701287:48967â€¥701287:48973]]\",\r\n      \"lastLedgerSwitchTimestamp\" : \"2017-03-22 20:38:15.660\",\r\n      \"state\" : \"NoLedger\"\r\n    },\r\n```\r\nWhat's weird is that it's in a NoLedger state and it is not creating a new one","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288538679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288563047","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-288563047","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":288563047,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU2MzA0Nw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T22:45:27Z","updated_at":"2017-03-22T22:45:27Z","author_association":"CONTRIBUTOR","body":"Can't use boost::asio since we are using bost 1.41 which doesn't have support for native handle","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288563047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288570325","html_url":"https://github.com/apache/pulsar/pull/306#issuecomment-288570325","issue_url":"https://api.github.com/repos/apache/pulsar/issues/306","id":288570325,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU3MDMyNQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T23:23:50Z","updated_at":"2017-03-22T23:23:50Z","author_association":"CONTRIBUTOR","body":"> The topic can have subscriptions and no producers/consumers using it\r\n\r\nThat's true, GC doesn't delete topic with non-empty subscription so, we can get the stat. Updated the change.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288570325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288575953","html_url":"https://github.com/apache/pulsar/pull/304#issuecomment-288575953","issue_url":"https://api.github.com/repos/apache/pulsar/issues/304","id":288575953,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU3NTk1Mw==","user":{"login":"hrsakai","id":22829228,"node_id":"MDQ6VXNlcjIyODI5MjI4","avatar_url":"https://avatars.githubusercontent.com/u/22829228?v=4","gravatar_id":"","url":"https://api.github.com/users/hrsakai","html_url":"https://github.com/hrsakai","followers_url":"https://api.github.com/users/hrsakai/followers","following_url":"https://api.github.com/users/hrsakai/following{/other_user}","gists_url":"https://api.github.com/users/hrsakai/gists{/gist_id}","starred_url":"https://api.github.com/users/hrsakai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hrsakai/subscriptions","organizations_url":"https://api.github.com/users/hrsakai/orgs","repos_url":"https://api.github.com/users/hrsakai/repos","events_url":"https://api.github.com/users/hrsakai/events{/privacy}","received_events_url":"https://api.github.com/users/hrsakai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T23:56:53Z","updated_at":"2017-03-22T23:56:53Z","author_association":"CONTRIBUTOR","body":"@jai1 \r\nI reflected the new API names in sample code.please, check it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288575953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288595251","html_url":"https://github.com/apache/pulsar/pull/304#issuecomment-288595251","issue_url":"https://api.github.com/repos/apache/pulsar/issues/304","id":288595251,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU5NTI1MQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T02:01:30Z","updated_at":"2017-03-23T02:01:30Z","author_association":"CONTRIBUTOR","body":"@hrsakai - changes look good - sorry for the trouble \r\nHave restarted the build.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288595251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288633823","html_url":"https://github.com/apache/pulsar/pull/310#issuecomment-288633823","issue_url":"https://api.github.com/repos/apache/pulsar/issues/310","id":288633823,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODYzMzgyMw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T07:02:05Z","updated_at":"2017-03-23T07:02:05Z","author_association":"CONTRIBUTOR","body":"LGTM. Is it possible to pass `queryParam` to one of the [ProxyTest](https://github.com/yahoo/pulsar/blob/master/pulsar-broker/src/test/java/com/yahoo/pulsar/websocket/proxy/ProxyPublishConsumeTest.java#L89) as none of the test case pass the query-param.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288633823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288656593","html_url":"https://github.com/apache/pulsar/issues/277#issuecomment-288656593","issue_url":"https://api.github.com/repos/apache/pulsar/issues/277","id":288656593,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODY1NjU5Mw==","user":{"login":"zaa","id":5245,"node_id":"MDQ6VXNlcjUyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/5245?v=4","gravatar_id":"","url":"https://api.github.com/users/zaa","html_url":"https://github.com/zaa","followers_url":"https://api.github.com/users/zaa/followers","following_url":"https://api.github.com/users/zaa/following{/other_user}","gists_url":"https://api.github.com/users/zaa/gists{/gist_id}","starred_url":"https://api.github.com/users/zaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zaa/subscriptions","organizations_url":"https://api.github.com/users/zaa/orgs","repos_url":"https://api.github.com/users/zaa/repos","events_url":"https://api.github.com/users/zaa/events{/privacy}","received_events_url":"https://api.github.com/users/zaa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T09:02:37Z","updated_at":"2017-03-23T09:02:37Z","author_association":"NONE","body":"We experience similar behaviour when starting Yahoo Pulsar 1.16.2. Logs contain the following lines\r\n\r\n```\r\n2017-03-23 08:53:53,207 - INFO  - [main:EntryCacheManager@72] - Initialized managed-ledger entry cache of 1024.0 Mb\r\n2017-03-23 08:53:53,243 - ERROR - [main:PulsarBrokerStarter@48] - Uncaught exception in thread main: io.netty.util.internal.MathUtil.safeFindNextPositivePowerOfTwo(I)I\r\njava.lang.NoSuchMethodError: io.netty.util.internal.MathUtil.safeFindNextPositivePowerOfTwo(I)I\r\n\tat io.netty.buffer.PoolThreadCache$MemoryRegionCache.<init>(PoolThreadCache.java:372)\r\n\tat io.netty.buffer.PoolThreadCache$SubPageMemoryRegionCache.<init>(PoolThreadCache.java:340)\r\n\tat io.netty.buffer.PoolThreadCache.createSubPageCaches(PoolThreadCache.java:135)\r\n\tat io.netty.buffer.PoolThreadCache.<init>(PoolThreadCache.java:86)\r\n\tat io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.initialValue(PooledByteBufAllocator.java:361)\r\n\tat io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.initialValue(PooledByteBufAllocator.java:354)\r\n\tat io.netty.util.concurrent.FastThreadLocal.initialize(FastThreadLocal.java:155)\r\n\tat io.netty.util.concurrent.FastThreadLocal.get(FastThreadLocal.java:149)\r\n\tat io.netty.util.concurrent.FastThreadLocal.get(FastThreadLocal.java:135)\r\n\tat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:251)\r\n\tat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:158)\r\n\tat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:149)\r\n\tat com.yahoo.pulsar.broker.service.PulsarStats.<init>(PulsarStats.java:59)\r\n\tat com.yahoo.pulsar.broker.service.BrokerService.<init>(BrokerService.java:146)\r\n\tat com.yahoo.pulsar.broker.PulsarService.start(PulsarService.java:235)\r\n\tat com.yahoo.pulsar.PulsarBrokerStarter.main(PulsarBrokerStarter.java:59)\r\n```\r\n\r\nIn our case, the broker appears to be running, but it does not listen to clients traffic\r\n\r\nping @merlimat ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288656593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288707353","html_url":"https://github.com/apache/pulsar/pull/310#issuecomment-288707353","issue_url":"https://api.github.com/repos/apache/pulsar/issues/310","id":288707353,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODcwNzM1Mw==","user":{"login":"massakam","id":22543882,"node_id":"MDQ6VXNlcjIyNTQzODgy","avatar_url":"https://avatars.githubusercontent.com/u/22543882?v=4","gravatar_id":"","url":"https://api.github.com/users/massakam","html_url":"https://github.com/massakam","followers_url":"https://api.github.com/users/massakam/followers","following_url":"https://api.github.com/users/massakam/following{/other_user}","gists_url":"https://api.github.com/users/massakam/gists{/gist_id}","starred_url":"https://api.github.com/users/massakam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massakam/subscriptions","organizations_url":"https://api.github.com/users/massakam/orgs","repos_url":"https://api.github.com/users/massakam/repos","events_url":"https://api.github.com/users/massakam/events{/privacy}","received_events_url":"https://api.github.com/users/massakam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T12:45:52Z","updated_at":"2017-03-23T12:45:52Z","author_association":"CONTRIBUTOR","body":"I modified ProxyPublishConsumeTest to pass the query parameter \"subscriptionType\". PTAL.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288707353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288798692","html_url":"https://github.com/apache/pulsar/issues/308#issuecomment-288798692","issue_url":"https://api.github.com/repos/apache/pulsar/issues/308","id":288798692,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODc5ODY5Mg==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T17:31:09Z","updated_at":"2017-03-23T17:31:09Z","author_association":"CONTRIBUTOR","body":"Did you check how long did the zookeeper take to elect the new leader? Most\nlikely it took longer and brokers lost their session and shut them down.\nDid you notice if the followers were lagging behind or it's snapshot is\ncorrupt/incomplete before you took down the leader?\n\n\n\nOn Wed, Mar 22, 2017 at 12:46 PM, sschepens <notifications@github.com>\nwrote:\n\n> @merlimat <https://github.com/merlimat> we had to replace our current\n> local ZK leader in a cluster and this seems to cause a LOT of issues in the\n> cluster.\n> Brokers seem to have shut down all at the same time, leaving the cluster\n> unable to handle traffic until restarted.\n> Also, a lot of consumers seem to have been reset to a previous moment in\n> time, generating a huge amount of backlog.\n>\n> We see these logs before the broker apparently shut down:\n>\n> March 22nd 2017, 15:31:43.156\t2017-03-22 18:31:43,155 - INFO  - [main-SendThread(ip-10-64-102-223.ec2.internal:2181):ClientCnxn$SendThread@1158] - Unable to read additional data from server sessionid 0x35a384d476e093b, likely server has closed socket, closing socket connection and attempting reconnect\n> March 22nd 2017, 15:31:43.258\t2017-03-22 18:31:43,258 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:1 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.258\t2017-03-22 18:31:43,258 - WARN  - [main-EventThread:LeaderElectionService$1@111] - Got something wrong on watch: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.258\t2017-03-22 18:31:43,258 - WARN  - [main-EventThread:LeaderElectionService$1@92] - Type of the event is [None] and path is [null]\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,258 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:2 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,258 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:2 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,258 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:2 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,258 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:1 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,259 - INFO  - [main-EventThread:ZooKeeperDataCache@131] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:2 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,259 - INFO  - [main-EventThread:ZooKeeperSessionWatcher@87] - Received zookeeper notification, eventType=None, eventState=Disconnected\n> March 22nd 2017, 15:31:43.259\t2017-03-22 18:31:43,259 - INFO  - [main-EventThread:ZooKeeperCache@346] - [State:CONNECTED Timeout:30000 sessionid:0x35a384d476e093b local:null remoteserver:null lastZxid:17254516425 <(725)%20451-6425> xid:1622313 sent:1622313 recv:1791041 queuedpkts:2 pendingresp:0 queuedevents:0] Received ZooKeeper watch event: WatchedEvent state:Disconnected type:None path:null\n> March 22nd 2017, 15:31:43.587\t2017-03-22 18:31:43,586 - INFO  - [main-SendThread(ip-10-64-102-117.ec2.internal:2181):ClientCnxn$SendThread@1032] - Opening socket connection to server ip-10-64-102-117.ec2.internal/10.64.102.117:2181. Will not attempt to authenticate using SASL (unknown error)\n>\n> A couple of questions:\n> 1 - Why do brokers shutdown on ZK Leader disconnection?\n> 2 - Why could this affect the backlog of consumers? we're running with a\n> branch that persists individualDeletedMessages.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/yahoo/pulsar/issues/308>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ATk4LBfklfMvdfwW1R67bVM-F_pJHPCsks5roXqIgaJpZM4Mlump>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288798692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288810203","html_url":"https://github.com/apache/pulsar/issues/277#issuecomment-288810203","issue_url":"https://api.github.com/repos/apache/pulsar/issues/277","id":288810203,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgxMDIwMw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T18:04:25Z","updated_at":"2017-03-23T18:04:25Z","author_association":"CONTRIBUTOR","body":"Could this be due to multiple versions of netty?\n\nOn Thu, Mar 23, 2017 at 2:02 AM, Alexander Zhuravlev <\nnotifications@github.com> wrote:\n\n> We experience similar behaviour when starting Yahoo Pulsar 1.16.2. Logs\n> contain the following lines\n>\n> 2017-03-23 08:53:53,207 - INFO  - [main:EntryCacheManager@72] - Initialized managed-ledger entry cache of 1024.0 Mb\n> 2017-03-23 08:53:53,243 - ERROR - [main:PulsarBrokerStarter@48] - Uncaught exception in thread main: io.netty.util.internal.MathUtil.safeFindNextPositivePowerOfTwo(I)I\n> java.lang.NoSuchMethodError: io.netty.util.internal.MathUtil.safeFindNextPositivePowerOfTwo(I)I\n> \tat io.netty.buffer.PoolThreadCache$MemoryRegionCache.<init>(PoolThreadCache.java:372)\n> \tat io.netty.buffer.PoolThreadCache$SubPageMemoryRegionCache.<init>(PoolThreadCache.java:340)\n> \tat io.netty.buffer.PoolThreadCache.createSubPageCaches(PoolThreadCache.java:135)\n> \tat io.netty.buffer.PoolThreadCache.<init>(PoolThreadCache.java:86)\n> \tat io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.initialValue(PooledByteBufAllocator.java:361)\n> \tat io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.initialValue(PooledByteBufAllocator.java:354)\n> \tat io.netty.util.concurrent.FastThreadLocal.initialize(FastThreadLocal.java:155)\n> \tat io.netty.util.concurrent.FastThreadLocal.get(FastThreadLocal.java:149)\n> \tat io.netty.util.concurrent.FastThreadLocal.get(FastThreadLocal.java:135)\n> \tat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:251)\n> \tat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:158)\n> \tat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:149)\n> \tat com.yahoo.pulsar.broker.service.PulsarStats.<init>(PulsarStats.java:59)\n> \tat com.yahoo.pulsar.broker.service.BrokerService.<init>(BrokerService.java:146)\n> \tat com.yahoo.pulsar.broker.PulsarService.start(PulsarService.java:235)\n> \tat com.yahoo.pulsar.PulsarBrokerStarter.main(PulsarBrokerStarter.java:59)\n>\n> In our case, the broker appears to be running, but it does not listen to\n> clients traffic\n>\n> ping @merlimat <https://github.com/merlimat>\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/yahoo/pulsar/issues/277#issuecomment-288656593>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/ATk4LM8cKyX9wfO-Ns5OpfM31sJvw9Kuks5rojU0gaJpZM4MTzRK>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288810203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288815248","html_url":"https://github.com/apache/pulsar/issues/277#issuecomment-288815248","issue_url":"https://api.github.com/repos/apache/pulsar/issues/277","id":288815248,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgxNTI0OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T18:19:58Z","updated_at":"2017-03-23T18:19:58Z","author_association":"CONTRIBUTOR","body":"Please check #125. \r\nThere was a similar kind of issue with `async-http-client` that brings different version of `io.netty.util.internal.MathUtil` which is not compatible with `netty-all` apis. So, can you verify if you can see any `netty` artifacts other than `netty-all` in the classpath.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288815248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]