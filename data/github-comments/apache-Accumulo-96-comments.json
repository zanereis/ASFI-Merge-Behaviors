[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258602393","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1258602393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1258602393,"node_id":"IC_kwDOACaFSM5LBL-Z","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-26T20:34:06Z","updated_at":"2022-09-26T20:34:06Z","author_association":"CONTRIBUTOR","body":"> I was running 4 Bulk Rwalk jobs again.\r\n\r\nAny advice if I wanted to try to reproduce this?  How many tservers were you running?  You had 4 random walk processes each running the bulk graph?  Was everything running on a single VM or multiple VMs?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258602393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258620653","html_url":"https://github.com/apache/accumulo/pull/2966#issuecomment-1258620653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2966","id":1258620653,"node_id":"IC_kwDOACaFSM5LBQbt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-26T20:53:21Z","updated_at":"2022-09-26T20:53:21Z","author_association":"CONTRIBUTOR","body":"It looks like Thrift 0.17.0 requires gradle to be installed to successfully build. You can install gradle using the instructions [here](https://gradle.org/install/) and then put `gradle` on your $PATH.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258620653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258622779","html_url":"https://github.com/apache/accumulo/pull/2966#issuecomment-1258622779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2966","id":1258622779,"node_id":"IC_kwDOACaFSM5LBQ87","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-26T20:55:59Z","updated_at":"2022-09-26T20:55:59Z","author_association":"CONTRIBUTOR","body":"Java Thrift 0.17.0 changes [here](https://github.com/apache/thrift/blob/master/CHANGES.md#java)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1258622779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259410321","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1259410321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1259410321,"node_id":"IC_kwDOACaFSM5LEROR","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T12:07:32Z","updated_at":"2022-09-27T12:07:32Z","author_association":"CONTRIBUTOR","body":"> > I was running 4 Bulk Rwalk jobs again.\r\n> \r\n> Any advice if I wanted to try to reproduce this? How many tservers were you running? You had 4 random walk processes each running the bulk graph? Was everything running on a single VM or multiple VMs?\r\n\r\nI was able to produce this on a single EC2 Ubuntu instance, running Uno. I installed Snaphot and set `export NUM_TSERVERS=2`. Then once I had Uno running, I ran the following command to fire off 4 local RW processes:\r\n<pre>\r\nfor (( i=1; i<5; i++)); do ~/workspace/accumulo-testing/bin/rwalk Bulk.xml > /tmp/rwalk\"$i\".log 2>&1 & done\r\n</pre>\r\nFYI I found a bug in the Bulk RW test so make sure you get the fix from accumulo-testing first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259410321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259414214","html_url":"https://github.com/apache/accumulo/pull/2966#issuecomment-1259414214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2966","id":1259414214,"node_id":"IC_kwDOACaFSM5LESLG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T12:10:46Z","updated_at":"2022-09-27T16:42:32Z","author_association":"CONTRIBUTOR","body":"Looks like this update changes the generated code by:\r\n  1. Adding @ Override annotations\r\n  2. Adding @ SuppressWarnings annotations\r\n  3. Adding methods calls as part of [THRIFT-5519](https://issues.apache.org/jira/browse/THRIFT-5519)\r\n  \r\nI used the following command to see the changes:\r\n```\r\ngit diff main | grep '+' | grep -v Override | grep -v SuppressWarnings | grep -v @@\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259414214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259469977","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1259469977","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1259469977,"node_id":"IC_kwDOACaFSM5LEfyZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T12:58:52Z","updated_at":"2022-09-27T12:58:52Z","author_association":"CONTRIBUTOR","body":"Meant to open this PR as a draft.  Only updated table operations.  Still need to update namespace and instance ops, but wanted to wait on those to see if there as any feedback on table operations.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259469977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259524325","html_url":"https://github.com/apache/accumulo/issues/2961#issuecomment-1259524325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2961","id":1259524325,"node_id":"IC_kwDOACaFSM5LEtDl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T13:38:39Z","updated_at":"2022-09-27T13:38:39Z","author_association":"CONTRIBUTOR","body":"> @milleruntime I could submit a PR to fix this if you would like, just let me know.\r\n\r\nI am looking at it today. I see where the column family needs to be added to the switch case but I wasn't sure if there was anything else special that we need to do within `TabletMetadata`. Like, do we need to set [this chopped boolean] to true(https://github.com/apache/accumulo/blob/cf57e343de77f416de10c22e0ed05ef37f433b36/core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletMetadata.java#L286) ? Or can i just create a boolean for chopped?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259524325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259532949","html_url":"https://github.com/apache/accumulo/issues/2963#issuecomment-1259532949","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2963","id":1259532949,"node_id":"IC_kwDOACaFSM5LEvKV","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T13:44:42Z","updated_at":"2022-09-27T13:44:42Z","author_association":"CONTRIBUTOR","body":"Are you seeing too many calls of a certain request? I think that is the feature that reports warnings and errors in the Monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259532949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259554672","html_url":"https://github.com/apache/accumulo/issues/2961#issuecomment-1259554672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2961","id":1259554672,"node_id":"IC_kwDOACaFSM5LE0dw","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T14:00:32Z","updated_at":"2022-09-27T14:14:18Z","author_association":"CONTRIBUTOR","body":"> I am looking at it today. I see where the column family needs to be added to the switch case but I wasn't sure if there was anything else special that we need to do within TabletMetadata. Like, do we need to set [this chopped boolean] to true(\r\n\r\nLooking at the code inside TabletLocationState and how it being used there, it does not matter if chopped is passed. So can probably leave that alone.  I think its unrelated to fixing this issue, but that code that uses TabletLocationState should probably be refactored to avoid not passing in uneeded params to compute something.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259554672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259572219","html_url":"https://github.com/apache/accumulo/issues/2961#issuecomment-1259572219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2961","id":1259572219,"node_id":"IC_kwDOACaFSM5LE4v7","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T14:13:48Z","updated_at":"2022-09-27T14:14:27Z","author_association":"CONTRIBUTOR","body":">  I think its unrelated to fixing this issue, but that code that uses TabletLocationState should probably be refactored to avoid not passing in uneeded params to compute something.\r\n\r\nGoing to try restating above w/o double negatives.  Thinking we should refactor the code in question to have a function that computes tablet state only passing in parameters that are needed by the computation.  That refactor could possibly be a separate PR from fixing this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259572219/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259592998","html_url":"https://github.com/apache/accumulo/issues/2963#issuecomment-1259592998","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2963","id":1259592998,"node_id":"IC_kwDOACaFSM5LE90m","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T14:29:00Z","updated_at":"2022-09-27T15:12:29Z","author_association":"CONTRIBUTOR","body":"I only see the swapiness messages, but I gather that I would see the HTTP transaction for *any* message sent from the servers to the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259592998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259682666","html_url":"https://github.com/apache/accumulo/issues/2963#issuecomment-1259682666","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2963","id":1259682666,"node_id":"IC_kwDOACaFSM5LFTtq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T15:34:24Z","updated_at":"2022-09-27T15:34:24Z","author_association":"CONTRIBUTOR","body":"I redeployed locally from scratch and I'm not seeing these messages. It's possible that I had some old configurations, so I'm going to close this and we can re-open if necessary.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259682666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259702196","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1259702196","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1259702196,"node_id":"IC_kwDOACaFSM5LFYe0","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T15:49:59Z","updated_at":"2022-09-27T15:49:59Z","author_association":"CONTRIBUTOR","body":"As a follow-on - would it make sense to move Retry from fate to core.util package?  Its being used outside of fate now (here and elsewhere)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259702196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259772160","html_url":"https://github.com/apache/accumulo/pull/2966#issuecomment-1259772160","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2966","id":1259772160,"node_id":"IC_kwDOACaFSM5LFpkA","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T16:40:30Z","updated_at":"2022-09-27T16:40:30Z","author_association":"CONTRIBUTOR","body":"Full IT build passed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259772160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259792075","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1259792075","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1259792075,"node_id":"IC_kwDOACaFSM5LFubL","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T16:58:06Z","updated_at":"2022-09-27T16:58:06Z","author_association":"MEMBER","body":"Are you able to reproduce this exception or did it just happen once?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259792075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259800693","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1259800693","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1259800693,"node_id":"IC_kwDOACaFSM5LFwh1","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T17:05:37Z","updated_at":"2022-09-27T17:05:37Z","author_association":"CONTRIBUTOR","body":"> Are you able to reproduce this exception or did it just happen once?\r\n\r\nWell the exception prevented the Manger from starting up but I think it requires ZK to be in a certain state to reproduce. There isn't much logged in the code so I am not exactly sure of what needs to happen. From the state of my test cluster and looking at the code, it seemed that their was a Fate TX in ZK without a `top`. The ZooStore method that gets the `top` transaction for Fate, allows for returning of null but the way we are wrapping ZooStore in this situation, it doesn't work. I open a fix to revert this change in https://github.com/apache/accumulo/pull/2971","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259800693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259801410","html_url":"https://github.com/apache/accumulo/pull/2971#issuecomment-1259801410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2971","id":1259801410,"node_id":"IC_kwDOACaFSM5LFwtC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T17:06:10Z","updated_at":"2022-09-27T17:06:10Z","author_association":"CONTRIBUTOR","body":"How did using a ReadOnly store break the code on a restart?  Is there anyway to test this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259801410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259803458","html_url":"https://github.com/apache/accumulo/pull/2971#issuecomment-1259803458","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2971","id":1259803458,"node_id":"IC_kwDOACaFSM5LFxNC","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T17:08:04Z","updated_at":"2022-09-27T17:08:04Z","author_association":"CONTRIBUTOR","body":"> How did using a ReadOnly store break the code on a restart? Is there anyway to test this?\r\n\r\nSee my comment to @DomGarguilo here: https://github.com/apache/accumulo/issues/2968#issuecomment-1259800693","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259803458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259819051","html_url":"https://github.com/apache/accumulo/pull/2966#issuecomment-1259819051","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2966","id":1259819051,"node_id":"IC_kwDOACaFSM5LF1Ar","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T17:21:39Z","updated_at":"2022-09-27T17:21:39Z","author_association":"CONTRIBUTOR","body":"Looks like Thrift 0.17.0 was affected by [THRIFT-5632](https://issues.apache.org/jira/projects/THRIFT/issues/THRIFT-5632). Might need to wait until 0.18.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259819051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259908256","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1259908256","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1259908256,"node_id":"IC_kwDOACaFSM5LGKyg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T18:41:51Z","updated_at":"2022-09-27T18:41:51Z","author_association":"CONTRIBUTOR","body":"> As a follow-on - would it make sense to move Retry from fate to core.util package? Its being used outside of fate now (here and elsewhere)\r\n\r\nThat sounds reasonable.  Also I think there is some pre-existing code in accumulo that does retries w/o using the Retry class, code that existed before Retry was created.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259908256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259924593","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1259924593","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1259924593,"node_id":"IC_kwDOACaFSM5LGOxx","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T18:58:16Z","updated_at":"2022-09-27T18:58:16Z","author_association":"CONTRIBUTOR","body":"I added more debugging and started the cluster up again. It is failing to get the `top` for a COMPACT transaction. Here is the only information stored in ZK for the TX:\r\n<pre>\r\n[zk: localhost:2181(CONNECTED)] ls /accumulo/34a151cb-5f96-4e44-b0ab-265f4a660d9b/fate/tx_44e352e4e798b1eb\r\n[TX_NAME]\r\n[zk: localhost:2181(CONNECTED)] get /accumulo/34a151cb-5f96-4e44-b0ab-265f4a660d9b/fate/tx_44e352e4e798b1eb\r\nSUCCESSFUL\r\n[zk: localhost:2181(CONNECTED)] get /accumulo/34a151cb-5f96-4e44-b0ab-265f4a660d9b/fate/tx_44e352e4e798b1eb/TX_NAME \r\nS TABLE_COMPACT\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259924593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259927183","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1259927183","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1259927183,"node_id":"IC_kwDOACaFSM5LGPaP","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T19:00:55Z","updated_at":"2022-09-27T19:00:55Z","author_association":"CONTRIBUTOR","body":"@EdColeman I saw the same NPE trying to call `accumulo admin fate --summary`.\r\n<pre>\r\n02:58:35 {main} ~/workspace/uno/install/logs/accumulo$ accumulo admin fate --summary\r\n2022-09-27T14:58:50,218 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\n2022-09-27T14:58:51,205 [metrics.MetricsUtil] INFO : Metric producer PropStoreMetrics initialize\r\nDUDE get top for: tx_FATE[44e352e4e798b1eb] txName = TABLE_COMPACT\r\nDUDE find top for: /accumulo/34a151cb-5f96-4e44-b0ab-265f4a660d9b/fate/tx_44e352e4e798b1eb\r\n2022-09-27T14:58:51,346 [util.Admin] ERROR: null\r\njava.lang.NullPointerException: null\r\n\tat java.util.Objects.requireNonNull(Objects.java:221) ~[?:?]\r\n\tat org.apache.accumulo.fate.ReadOnlyStore$ReadOnlyRepoWrapper.<init>(ReadOnlyStore.java:75) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.fate.ReadOnlyStore.top(ReadOnlyStore.java:92) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.fate.AdminUtil.getTransactionStatus(AdminUtil.java:383) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.fate.AdminUtil.getStatus(AdminUtil.java:261) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.server.util.Admin.summarizeFateTx(Admin.java:863) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.server.util.Admin.executeFateOpsCommand(Admin.java:816) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.server.util.Admin.execute(Admin.java:396) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.start.Main.lambda$execKeyword$0(Main.java:122) ~[accumulo-start-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n\tat java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259927183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259969709","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1259969709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1259969709,"node_id":"IC_kwDOACaFSM5LGZyt","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T19:43:38Z","updated_at":"2022-09-27T19:43:38Z","author_association":"CONTRIBUTOR","body":"I think there might be a bug in ReadOnlyStore, in that it assumes a call to `top()` in it's underlying store (ZooStore) can't be null.\r\nThis can be seen in 1.10:\r\nhttps://github.com/apache/accumulo/blob/5363d781d3c7f304765c1bdef93969e84f1d934f/fate/src/main/java/org/apache/accumulo/fate/ReadOnlyStore.java#L89\r\n\r\nThe ReadOnlyRepoWrapper constructor above requires that the Repo returned from the call to `top()` be non-null. But the impl code in ZooStore, clearly has code to handle the case when `top()` returns null:\r\nhttps://github.com/apache/accumulo/blob/b11a03615d583a3f7cc6bebd975d98d3552b83cd/fate/src/main/java/org/apache/accumulo/fate/ZooStore.java#L257-L259\r\n\r\n\r\nReadOnlyStore was only used in limited places (deprecated FateAdmin and upgrade code) in previous versions so its likely this went unnoticed. For some reason, we started using ReadOnlyStore in other places in the Fate code and I am starting to think that this was a bad idea. I have one fix for this in https://github.com/apache/accumulo/pull/2971 but there are other places in the code that it is used that should be addressed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259969709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259975022","html_url":"https://github.com/apache/accumulo/issues/2973#issuecomment-1259975022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2973","id":1259975022,"node_id":"IC_kwDOACaFSM5LGbFu","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T19:49:02Z","updated_at":"2022-09-27T19:49:02Z","author_association":"CONTRIBUTOR","body":"It looks like this bug exists in 1.10 as well but it may be inconsequential in previous versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259975022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259993972","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1259993972","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1259993972,"node_id":"IC_kwDOACaFSM5LGft0","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T20:09:55Z","updated_at":"2022-09-27T20:09:55Z","author_association":"CONTRIBUTOR","body":"@keith-turner I also dropped the verify and END nodes from Bulk, just so the test would keep running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1259993972/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260029322","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1260029322","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1260029322,"node_id":"IC_kwDOACaFSM5LGoWK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T20:45:49Z","updated_at":"2022-09-27T20:45:49Z","author_association":"CONTRIBUTOR","body":"> Are you able to reproduce this exception or did it just happen once?\r\n\r\nI was able to reproduce this on a fresh cluster with the fix to Ample. All it takes is to have at least one Fate Tx with a null `top`, so either in the FAILED or SUCCESSFUL state. I had 4 RW Bulk jobs running on Uno with 2 tservers and then stopped and started servers.\r\n<pre>\r\nroot@uno> fate -print\r\n...\r\nTABLE_BULK_IMPORT2 txid: 2e8275045e4e78bf  status: FAILED             locked: []              locking: []              op: null            created: 2022-09-27T20:30:25.603Z\r\nTABLE_COMPACT   txid: 339ee3184c45d5ae  status: SUCCESSFUL         locked: []              locking: []              op: null            created: 2022-09-27T20:34:00.145Z\r\nTABLE_BULK_IMPORT2 txid: 2ef40d89abbb6295  status: SUCCESSFUL         locked: []              locking: []              op: null            created: 2022-09-27T20:31:35.409Z\r\nTABLE_BULK_IMPORT2 txid: 2e7b49accfe75012  status: SUBMITTED          locked: []              locking: [R:3]           op: PrepBulkImport  created: 2022-09-27T20:39:34.952Z\r\nTABLE_BULK_IMPORT2 txid: 3aeed3ff61f05cc7  status: SUBMITTED          locked: []              locking: [R:1]           op: PrepBulkImport  created: 2022-09-27T20:39:52.12Z\r\nTABLE_BULK_IMPORT2 txid: 0756c354d0015692  status: FAILED             locked: []              locking: []              op: null            created: 2022-09-27T20:31:36.41Z\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260029322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260141548","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1260141548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1260141548,"node_id":"IC_kwDOACaFSM5LHDvs","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T22:31:34Z","updated_at":"2022-09-27T22:31:34Z","author_association":"CONTRIBUTOR","body":"The switch to using the ReadOnlyRepo was to enforce places that were reading FATEs for status / metrics were not performing updates (and to enforce that) with the assumption (I guess wrong) that they were equivalent.  \r\n\r\nSwitching back may be okay, but the null returned by top in ZooStore will need to be correctly handled or we will have just moved the NPE to another location.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260141548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260194192","html_url":"https://github.com/apache/accumulo/pull/2971#issuecomment-1260194192","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2971","id":1260194192,"node_id":"IC_kwDOACaFSM5LHQmQ","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T23:59:22Z","updated_at":"2022-09-27T23:59:22Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/accumulo/pull/2975 may be an alternative approach","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260194192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260730437","html_url":"https://github.com/apache/accumulo/pull/2975#issuecomment-1260730437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2975","id":1260730437,"node_id":"IC_kwDOACaFSM5LJThF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T10:51:18Z","updated_at":"2022-09-28T10:51:18Z","author_association":"CONTRIBUTOR","body":"> Metrics and status commands only need to read FATE status and it would be a coding error if they attempted to update a FATE.\r\n\r\nThis is accomplished by simply using Java polymorphism. If we revert back to the original code, I don't think there is anything else to do. The original code creates a ZooStore object but it declares the type as `ReadOnlyTStore`. For example:\r\n<pre>\r\nprivate final ReadOnlyTStore<FateMetrics> zooStore;\r\n...\r\nthis.zooStore = new ZooStore<>(fateRootPath, context.getZooReaderWriter());\r\nthis.zooStore.getStatus(1234L);\r\nthis.zooStore.delete(1234L); // compile error\r\n</pre>\r\n\r\nIt may be less confusing to rename the variable but otherwise we are fine. Use of the `ReadOnlyTStore` type prevents any updates to a FATE TX. If anything, we may want to drop the class ReadOnlyStore altogether.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260730437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260733808","html_url":"https://github.com/apache/accumulo/pull/2971#issuecomment-1260733808","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2971","id":1260733808,"node_id":"IC_kwDOACaFSM5LJUVw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T10:54:46Z","updated_at":"2022-09-28T10:54:46Z","author_association":"CONTRIBUTOR","body":"The original code uses polymorphism to prevent updates to the ZooStore. See my comment here: https://github.com/apache/accumulo/pull/2975#issuecomment-1260730437","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260733808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260736769","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1260736769","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1260736769,"node_id":"IC_kwDOACaFSM5LJVEB","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T10:58:02Z","updated_at":"2022-09-28T10:58:02Z","author_association":"CONTRIBUTOR","body":"I think we should also make the options the same. For example, Admin uses `fate -p -s IN_PROGRESS` while the Shell command uses `-t` for filtering on status Type.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260736769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260741652","html_url":"https://github.com/apache/accumulo/issues/2968#issuecomment-1260741652","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2968","id":1260741652,"node_id":"IC_kwDOACaFSM5LJWQU","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T11:03:07Z","updated_at":"2022-09-28T11:03:07Z","author_association":"CONTRIBUTOR","body":"> The switch to using the ReadOnlyRepo was to enforce places that were reading FATEs for status / metrics were not performing updates.\r\n\r\nAs long as the type declared is `ReadOnlyTStore` and not the fully functioning `TStore`, then we are fine. \r\n\r\n> the null returned by top in ZooStore will need to be correctly handled or we will have just moved the NPE to another location.\r\n\r\nThis is true. It appears the code previously just printed the output of `top()` and didn't try to use it. I am not sure if this is still true.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260741652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260840018","html_url":"https://github.com/apache/accumulo/issues/2973#issuecomment-1260840018","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2973","id":1260840018,"node_id":"IC_kwDOACaFSM5LJuRS","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T12:36:02Z","updated_at":"2022-09-28T12:36:02Z","author_association":"CONTRIBUTOR","body":"I think it might be best to drop the class ReadOnlyStore. It is confusing, unnecessary and prone to bugs. The way the Fate code was originally written used the interface `ReadOnlyTStore` to prevent access to the \"write\" methods in `TStore`. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1260840018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261188612","html_url":"https://github.com/apache/accumulo/issues/2934#issuecomment-1261188612","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2934","id":1261188612,"node_id":"IC_kwDOACaFSM5LLDYE","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T16:52:29Z","updated_at":"2022-09-28T16:52:29Z","author_association":"CONTRIBUTOR","body":"FYI this table doesn't have to be a datatables table since its not dynamic but it doesn't hurt to make it one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261188612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261241038","html_url":"https://github.com/apache/accumulo/issues/2979#issuecomment-1261241038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2979","id":1261241038,"node_id":"IC_kwDOACaFSM5LLQLO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T17:37:33Z","updated_at":"2022-09-28T17:37:33Z","author_association":"CONTRIBUTOR","body":"I'm wondering if the issue is [here](https://github.com/apache/accumulo/blob/main/server/tserver/src/main/java/org/apache/accumulo/tserver/log/RecoveryLogsIterator.java#L81). The `RecoveryLogsIterator` creates an `RFileScanner` with the table properties of the `metadata` table. `RFileScanner` [gets](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/client/rfile/RFileScanner.java#L226) a CryptoService using the Table scope, not the Recovery scope.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261241038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261281299","html_url":"https://github.com/apache/accumulo/issues/2979#issuecomment-1261281299","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2979","id":1261281299,"node_id":"IC_kwDOACaFSM5LLaAT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T18:00:15Z","updated_at":"2022-09-28T18:00:15Z","author_association":"CONTRIBUTOR","body":"Yeah that looks like the problem. I made the `RecoveryLogsIterator` use the RFile API back when I changed recovery to use RFiles but that was prior to the crypto changes. We may have to make recovery use the internal File reader classes so we can pass in the CryptoService. I made the `LogSorter` create a CryptoService for writing the sorted log files but missed the code path when the tserver reads the sorted logs. We will have to do similar to what I did here:\r\nhttps://github.com/apache/accumulo/blob/42a6a9f4c54a60e73ec5b20841f883353c95d2e8/server/tserver/src/main/java/org/apache/accumulo/tserver/log/LogSorter.java#L226-L227","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261281299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261318842","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1261318842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1261318842,"node_id":"IC_kwDOACaFSM5LLjK6","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T18:37:24Z","updated_at":"2022-09-28T18:37:24Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - it the exception is going to be thrown - would it be better to have it as a checked exception to force handling or a deliberate choice to pass up the stack? (ConcurrentModificationException inherits from RuntimeException)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261318842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261338943","html_url":"https://github.com/apache/accumulo/issues/2979#issuecomment-1261338943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2979","id":1261338943,"node_id":"IC_kwDOACaFSM5LLoE_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T18:57:25Z","updated_at":"2022-09-28T18:57:25Z","author_association":"CONTRIBUTOR","body":"What is `the internal File reader classes` ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261338943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261352928","html_url":"https://github.com/apache/accumulo/issues/2979#issuecomment-1261352928","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2979","id":1261352928,"node_id":"IC_kwDOACaFSM5LLrfg","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T19:09:18Z","updated_at":"2022-09-28T19:09:18Z","author_association":"CONTRIBUTOR","body":"> What is `the internal File reader classes` ?\r\n\r\nhttps://github.com/apache/accumulo/blob/42a6a9f4c54a60e73ec5b20841f883353c95d2e8/core/src/main/java/org/apache/accumulo/core/clientImpl/bulk/BulkImport.java#L352-L355","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261352928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261376900","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1261376900","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1261376900,"node_id":"IC_kwDOACaFSM5LLxWE","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T19:31:04Z","updated_at":"2022-09-28T19:31:04Z","author_association":"MEMBER","body":"> make the options the same. For example, Admin uses `fate -p -s IN_PROGRESS` while the Shell command uses `-t` for filtering on status Type.\r\n\r\nwhich option do you think is better?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261376900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261434973","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1261434973","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1261434973,"node_id":"IC_kwDOACaFSM5LL_hd","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T20:33:35Z","updated_at":"2022-09-28T20:47:39Z","author_association":"CONTRIBUTOR","body":"> I would prefer we not automatically retry. I would rather throw the ConcurrentModificationException. This should happen rarely, but when it does, it should be made known to the user, in case they want to do something different... like check with other groups who made the other change to see what the actually configuration should be. And, we shouldn't be hiding potential errors in user's automation, if they unintentionally have multiple processes changing the configuration without being aware of that.\r\n\r\nFor the case you describe no one could ever rely on the concurrent modification exception to ensure the correctness of their system.  If they want to ensure only a single process modifies configuration this exception does not offer a reliable way to ensure that or detect when that is not the case.  I see the exception as a nuisance that may occur for normal use cases in a distributed system, it does not offer anything of value and will just cause people problems IMO.\r\n\r\nThe wonderful thing about this new API is that allows a user the chance to atomically inspect the config and modify it.  This new ability to atomically inspect and modify allows user to build code that is correct in a distributed system on top of this API.  If someone wants to utilize this inspect and modify capability I can only think of uses cases where they would want to automatically retry.  If their mapMutator inspects before modfifying then it will automatically redo the inspection on the latest snapshot when there is a concurrent modification.  Atomic inspect and modify is a really powerful new feature and I think automatic retry makes it easier to use it correctly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1261434973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262010116","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1262010116","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1262010116,"node_id":"IC_kwDOACaFSM5LOL8E","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T09:22:55Z","updated_at":"2022-09-29T09:22:55Z","author_association":"CONTRIBUTOR","body":"The discussion of retry vs not retry made me realize the javadoc could be improved to provide more detail about this new feature.  I update some of the javadoc in [7850b0c](https://github.com/apache/accumulo/pull/2967/commits/7850b0ccea80c635c921e643fd712d20895b3de9)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262010116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262145882","html_url":"https://github.com/apache/accumulo/pull/2981#issuecomment-1262145882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2981","id":1262145882,"node_id":"IC_kwDOACaFSM5LOtFa","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T11:29:08Z","updated_at":"2022-09-29T11:29:08Z","author_association":"CONTRIBUTOR","body":"I'm looking into this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262145882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262311511","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1262311511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1262311511,"node_id":"IC_kwDOACaFSM5LPVhX","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T13:48:22Z","updated_at":"2022-09-29T13:48:22Z","author_association":"CONTRIBUTOR","body":"The `-t` option is used for specifying table in a number of commands - would it be less confusing is that was sort of reserved for that?  The fate command does not take a table so it is unambiguous here, so the primary consideration would be clarity. `-s` for status seems a little more natural the `-t` for status type, but either way seems okay.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262311511/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262339810","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1262339810","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1262339810,"node_id":"IC_kwDOACaFSM5LPcbi","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T14:08:41Z","updated_at":"2022-09-29T14:08:41Z","author_association":"CONTRIBUTOR","body":"Yeah I like `-s` better, like Ed said. So we can just change that one. But this ticket was more for making sure the filter actually works.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262339810/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262404221","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1262404221","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1262404221,"node_id":"IC_kwDOACaFSM5LPsJ9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T14:57:09Z","updated_at":"2022-09-29T14:57:09Z","author_association":"CONTRIBUTOR","body":"> On the other hand, when a change is submitted, nothing prevents another change coming along right behind and changing things to another value. Setting a property is not a guarantee that it would not be changed when it is used - so this change would not impact that.\r\n\r\nYeah that is how I see it.  If there is a good change followed by a problematic change, the time between those could be zero,3 seconds, or 4 months.  Throwing a concurrent modification exception offers no reliable solution to this.  Using conditional updates does offer a possible solution if all updates use them because some problematic changes may not be made.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262404221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262423633","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262423633","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262423633,"node_id":"IC_kwDOACaFSM5LPw5R","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:11:54Z","updated_at":"2022-09-29T15:11:54Z","author_association":"CONTRIBUTOR","body":"I had seen this but got side tracked. I think the easiest fix would be to just return a `Map<String,String>` for this version, like the other InstanceOperations methods. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262423633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262445267","html_url":"https://github.com/apache/accumulo/pull/2976#issuecomment-1262445267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2976","id":1262445267,"node_id":"IC_kwDOACaFSM5LP2LT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:27:51Z","updated_at":"2022-09-29T15:27:51Z","author_association":"CONTRIBUTOR","body":"@keith-turner any thoughts on this change?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262445267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262454310","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262454310","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262454310,"node_id":"IC_kwDOACaFSM5LP4Ym","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:34:02Z","updated_at":"2022-09-29T15:34:02Z","author_association":"MEMBER","body":"@keith-turner Any insight into why this wasn't caught by apilyzer-maven-plugin?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262454310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262455013","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262455013","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262455013,"node_id":"IC_kwDOACaFSM5LP4jl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:34:25Z","updated_at":"2022-09-29T15:34:25Z","author_association":"CONTRIBUTOR","body":"I have a fix for this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262455013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262459861","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262459861","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262459861,"node_id":"IC_kwDOACaFSM5LP5vV","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:38:24Z","updated_at":"2022-09-29T15:38:24Z","author_association":"MEMBER","body":"> I had seen this but got side tracked. I think the easiest fix would be to just return a `Map<String,String>` for this version, like the other InstanceOperations methods.\r\n\r\nWe already have a method that returns `Map<String,String>`. It seems the idea for this new method was to return the version, which I'm not sure how that was intended to be used by end users. It may be best to just make this method private, or move it to an internal Impl class.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262459861/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262465604","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262465604","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262465604,"node_id":"IC_kwDOACaFSM5LP7JE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:42:39Z","updated_at":"2022-09-29T15:42:39Z","author_association":"CONTRIBUTOR","body":"> We already have a method that returns Map<String,String>\r\n\r\nWhere are you seeing that? You see another `Map<String,String> getSystemProperties` ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262465604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262478624","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262478624","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262478624,"node_id":"IC_kwDOACaFSM5LP-Ug","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T15:52:53Z","updated_at":"2022-09-29T15:52:53Z","author_association":"MEMBER","body":"> > We already have a method that returns Map<String,String>\r\n> \r\n> Where are you seeing that? You see another `Map<String,String> getSystemProperties` ?\r\n\r\nIt's called \"getSystemConfiguration\"","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262478624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262505905","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1262505905","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1262505905,"node_id":"IC_kwDOACaFSM5LQE-x","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T16:15:31Z","updated_at":"2022-09-29T16:15:31Z","author_association":"CONTRIBUTOR","body":"Thanks. I get confused by our use of props, properties, configuration, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262505905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262680568","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1262680568","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1262680568,"node_id":"IC_kwDOACaFSM5LQvn4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T18:47:48Z","updated_at":"2022-09-29T18:47:48Z","author_association":"MEMBER","body":"> For the case you describe no one could ever rely on the concurrent modification exception to ensure the correctness of their system. If they want to ensure only a single process modifies configuration this exception does not offer a reliable way to ensure that or detect when that is not the case. I see the exception as a nuisance that may occur for normal use cases in a distributed system, it does not offer anything of value and will just cause people problems IMO.\r\n\r\nWhat I'm suggesting is that internally we check the version and ensure it hasn't changed. If the version has changed because somebody else updated the ZK node with a different edit, then we throw ConcurrentModificationException. That seems like a pretty reliable way to ensure that other changes are detected.\r\n\r\n> The wonderful thing about this new API is that allows a user the chance to atomically inspect the config and modify it. This new ability to atomically inspect and modify allows user to build code that is correct in a distributed system on top of this API. If someone wants to utilize this inspect and modify capability I can only think of uses cases where they would want to automatically retry. If their mapMutator inspects before modfifying then it will automatically redo the inspection on the latest snapshot when there is a concurrent modification. Atomic inspect and modify is a really powerful new feature and I think automatic retry makes it easier to use it correctly.\r\n\r\nI agree atomic inspect and modify is very powerful, but one of its powers is the ability to detect collisions. I also agree that this empowers correctly written mapMutator code to ensure the desired outcome, even in the face of collisions.\r\n\r\nHowever, my use case that I'm concerned about isn't about the desired outcome of the map mutation. The aspect I'm concerned about is more about administrators / operators being able to detect rogue threads that are causing collisions in a system that an administrator may wish to detect, track down, and address, before they can trust the map mutator code they are trying to run. It's not a \"computer science\" concern about correctness... it's a practical \"IT\" concern about system administration. I think you're overlooking that practical concern, even though I agree with you on the computer science/algorithm correctness aspect and the convenience of retrying.\r\n\r\nI don't think this will cause people problems if we document it properly in the Javadoc.\r\n\r\nAll that said, retry may be okay if there's a warning logged (on both the client and the server side, ideally) that notes the change was detected and it will be retried. However, I still have concerns that it may never finish (if we retry indefinitely; very unlikely, and my concern is proportionately low for this one), and the general restriction on users (my concern is higher for this one). Just because we can't think of a use case where a retry is not desired, it doesn't mean there isn't one, and I see no reason to restrict users by adding extra code we have to maintain, just because we failed to have the foresight to think of a way a use case a user might have.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262680568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262682666","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1262682666","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1262682666,"node_id":"IC_kwDOACaFSM5LQwIq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T18:50:01Z","updated_at":"2022-09-29T18:50:01Z","author_association":"MEMBER","body":"> > On the other hand, when a change is submitted, nothing prevents another change coming along right behind and changing things to another value. Setting a property is not a guarantee that it would not be changed when it is used - so this change would not impact that.\r\n> \r\n> Yeah that is how I see it. If there is a good change followed by a problematic change, the time between those could be zero,3 seconds, or 4 months. Throwing a concurrent modification exception offers no reliable solution to this. Using conditional updates does offer a possible solution if all updates use them because some problematic changes may not be made.\r\n\r\nI agree with that. I'm not necessarily suggesting we need to try to detect that. I'm more concerned that we're adding extra code that goes out of our way to pretend it didn't happen and hide the fact from the user when we did detect it. I don't see a reason to do that. I don't think we should try to detect the case where it could happen silently... I'm just saying we shouldn't be the ones perpetuating the silence when it could have otherwise been made known to the user that it did happen.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262682666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262684597","html_url":"https://github.com/apache/accumulo/pull/2982#issuecomment-1262684597","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2982","id":1262684597,"node_id":"IC_kwDOACaFSM5LQwm1","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T18:52:11Z","updated_at":"2022-09-29T18:52:11Z","author_association":"MEMBER","body":"It's unfortunate we have two separate RFile read paths. It'd be really nice to just have one that was easier for users to use, and also supported all our internal needs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262684597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262690262","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1262690262","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1262690262,"node_id":"IC_kwDOACaFSM5LQx_W","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T18:57:37Z","updated_at":"2022-09-29T18:57:37Z","author_association":"MEMBER","body":"Is log spam the only consequence to this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262690262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262692267","html_url":"https://github.com/apache/accumulo/pull/2982#issuecomment-1262692267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2982","id":1262692267,"node_id":"IC_kwDOACaFSM5LQyer","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T18:59:54Z","updated_at":"2022-09-29T18:59:54Z","author_association":"CONTRIBUTOR","body":"> It's unfortunate we have two separate RFile read paths. It'd be really nice to just have one that was easier for users to use, and also supported all our internal needs.\r\n\r\nYeah that would be nice. For this situation, we would need to have the RFile API take a CryptoService or something to differentiate it from the table properties. Maybe once crypto graduates from being experimental, we can add something to the RFile API. But there are likely to be other situations like this though, where we don't won't to expose internals and still need FileSKVIterator.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262692267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262695346","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1262695346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1262695346,"node_id":"IC_kwDOACaFSM5LQzOy","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T19:02:36Z","updated_at":"2022-09-29T19:02:36Z","author_association":"CONTRIBUTOR","body":"> Is log spam the only consequence to this?\r\n\r\nAFAIK yes. It is just odd and not very assuring to have Errors immediately after starting up a server process.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262695346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262697002","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1262697002","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1262697002,"node_id":"IC_kwDOACaFSM5LQzoq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T19:04:14Z","updated_at":"2022-09-29T19:04:14Z","author_association":"MEMBER","body":"I can take a look at this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262697002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262715696","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1262715696","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1262715696,"node_id":"IC_kwDOACaFSM5LQ4Mw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T19:22:51Z","updated_at":"2022-09-29T19:22:51Z","author_association":"CONTRIBUTOR","body":"It looks to be a race condition too since these errors don't show up on a clean newly setup cluster. I think the happen when the Manager has other things to take care at startup, before creating the Fate object.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262715696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262737681","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1262737681","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1262737681,"node_id":"IC_kwDOACaFSM5LQ9kR","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T19:46:37Z","updated_at":"2022-09-29T19:46:37Z","author_association":"CONTRIBUTOR","body":"> All that said, retry may be okay if there's a warning logged (on both the client and the server side, ideally) that notes the change was detected and it will be retried. \r\n\r\nThis PR is using the Retry class and logging will occur via it when retries happen.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262737681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262757326","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1262757326","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1262757326,"node_id":"IC_kwDOACaFSM5LRCXO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T20:06:31Z","updated_at":"2022-09-29T20:06:31Z","author_association":"MEMBER","body":"I took a look at this, and the only thing I've seen is fate operations that would have triggered this. There shouldn't be any fate operations running prior to this being initialized. Do you have a stack trace? I have not seen this error. The manager also even has an explicit check and throws an exception if it detects that fate was started prior to upgrades being complete. Is this an upgrade error, or some other startup situation?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262757326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262757743","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1262757743","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1262757743,"node_id":"IC_kwDOACaFSM5LRCdv","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-29T20:07:01Z","updated_at":"2022-09-29T20:07:01Z","author_association":"MEMBER","body":"It looks like the filter is not getting picked up properly and for some reason the value is null by the time the filtering actually occurs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1262757743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263407458","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1263407458","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1263407458,"node_id":"IC_kwDOACaFSM5LThFi","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T10:37:35Z","updated_at":"2022-09-30T10:37:35Z","author_association":"CONTRIBUTOR","body":"This change seems to be causing a test failure in PropStoreConfigIT, https://builds.apache.org/job/Accumulo/job/main/lastCompletedBuild/org.apache.accumulo$accumulo-test/testReport/org.apache.accumulo.test.conf/PropStoreConfigIT/modifyInstancePropertiesTest/\r\n\r\nI can take a quick look but wanted to point it out\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263407458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263416039","html_url":"https://github.com/apache/accumulo/pull/2985#issuecomment-1263416039","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2985","id":1263416039,"node_id":"IC_kwDOACaFSM5LTjLn","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T10:45:47Z","updated_at":"2022-09-30T10:45:47Z","author_association":"CONTRIBUTOR","body":"So the issue here with the [test](https://builds.apache.org/job/Accumulo/job/main/lastCompletedBuild/org.apache.accumulo$accumulo-test/testReport/org.apache.accumulo.test.conf/PropStoreConfigIT/modifyInstancePropertiesTest/) breaking is that the point of the new method that was removed was to only return the system properties but now the assertion is done on getSystemConfiguration() which is going to return the entire config.\r\n\r\nWhy not just keep the public getSystemProperties() method but have it return a map instead?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263416039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263418015","html_url":"https://github.com/apache/accumulo/issues/2983#issuecomment-1263418015","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2983","id":1263418015,"node_id":"IC_kwDOACaFSM5LTjqf","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T10:47:38Z","updated_at":"2022-09-30T10:47:38Z","author_association":"CONTRIBUTOR","body":"I commented in the PR but the two methods actually return different things. One returned just the system properties vs the entire config which is why the test fails. So I think we should bring the getProperties() back but just document how it's different.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263418015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263478206","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263478206","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263478206,"node_id":"IC_kwDOACaFSM5LTyW-","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T11:55:39Z","updated_at":"2022-09-30T11:55:39Z","author_association":"CONTRIBUTOR","body":"Is there a use case for this method? Or is it just to return the same properties set by the new method?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263478206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263481085","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263481085","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263481085,"node_id":"IC_kwDOACaFSM5LTzD9","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T11:58:49Z","updated_at":"2022-09-30T11:58:49Z","author_association":"CONTRIBUTOR","body":"> Is there a use case for this method? Or is it just to return the same properties set by the new method?\r\n\r\nThe use case is getting back what properties were set in ZK explicitly which is going to be useful when making configuration changes. The other method returns the entire configuration so you get back a couple hundred properties but most are going to be either values stored in the properties file or defaults. This allows you to find out exactly what was overridden so can be used to mutate using the new modify properties api.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263481085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263487687","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263487687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263487687,"node_id":"IC_kwDOACaFSM5LT0rH","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T12:05:35Z","updated_at":"2022-09-30T12:05:35Z","author_association":"CONTRIBUTOR","body":"I ran the `PropStoreConfigIT` test with these changes and it now passes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263487687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263499527","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263499527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263499527,"node_id":"IC_kwDOACaFSM5LT3kH","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T12:17:46Z","updated_at":"2022-09-30T12:17:46Z","author_association":"CONTRIBUTOR","body":"If you are going to add a new method, why not give the user more control with something like:\r\n<pre>\r\n/**\r\n   * Get specific set of system configuration properties.\r\n   */\r\n  Map<String,String> getSystemConfiguration(ConfigurationType type);\r\n</pre>\r\n\r\nWe already have a thrift type for `ConfigurationType` so it could be new API Enum:\r\n<pre>\r\nenum ConfigurationType {\r\n    CURRENT, SITE, DEFAULT\r\n  }\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263499527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263501709","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1263501709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1263501709,"node_id":"IC_kwDOACaFSM5LT4GN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T12:20:08Z","updated_at":"2022-09-30T12:20:08Z","author_association":"CONTRIBUTOR","body":"> It looks like the filter is not getting picked up properly and for some reason the value is null by the time the filtering actually occurs.\r\n\r\nRight. I have a simple fix ready to go but was waiting on #2976 since that is also breaking the command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263501709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263618436","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263618436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263618436,"node_id":"IC_kwDOACaFSM5LUUmE","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:03:05Z","updated_at":"2022-09-30T14:03:05Z","author_association":"CONTRIBUTOR","body":"Oops, I thought it would pop up with an option to amend the commit message but I didn't see it so the commit message is wrong but this is obviously been rebased and merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263618436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263620266","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263620266","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263620266,"node_id":"IC_kwDOACaFSM5LUVCq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:04:33Z","updated_at":"2022-09-30T14:04:33Z","author_association":"CONTRIBUTOR","body":"Ah I was trying to rebase/squash but must have just picked the rebase only option as all 3 commits showed up. Sorry about that, I guess it's too late to fix as we obviously don't want to force push on main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263620266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263630290","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263630290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263630290,"node_id":"IC_kwDOACaFSM5LUXfS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:12:39Z","updated_at":"2022-09-30T14:12:39Z","author_association":"CONTRIBUTOR","body":"> Is the functionality of the atomic updates covered in unit tests? If that coverage is sufficient, then this test may not be adding value and it seems odd to need to add thrift dependencies in an IT test.\r\n> \r\n> I would prefer that the test find another way to test this functionality without a direct thrift call if at all feasible.\r\n\r\nI don't see why we can't use thrift methods in the IT test but I just wanted to get the build working again since the test was broken. We could open up another issue to discuss the API changes around this further now that the test is fixed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263630290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263641673","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263641673","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263641673,"node_id":"IC_kwDOACaFSM5LUaRJ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:21:57Z","updated_at":"2022-09-30T14:21:57Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - Anything we can do here to fix the history after my mistake (squash the 3 commits back to 1) or at this point is it too late since it's in main?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263641673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263649411","html_url":"https://github.com/apache/accumulo/pull/2986#issuecomment-1263649411","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2986","id":1263649411,"node_id":"IC_kwDOACaFSM5LUcKD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:28:12Z","updated_at":"2022-09-30T14:28:12Z","author_association":"MEMBER","body":"> @ctubbsii - Anything we can do here to fix the history after my mistake (squash the 3 commits back to 1) or at this point is it too late since it's in main?\r\n\r\nWe should leave the history as-is, since the commits have already been pushed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263649411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263652635","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1263652635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1263652635,"node_id":"IC_kwDOACaFSM5LUc8b","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:31:15Z","updated_at":"2022-09-30T14:31:15Z","author_association":"MEMBER","body":"Do we really need this? I feel like a user can just use `grep` themselves, if each item is already printed on separate lines.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263652635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263658752","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263658752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263658752,"node_id":"IC_kwDOACaFSM5LUecA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:36:21Z","updated_at":"2022-09-30T14:36:21Z","author_association":"MEMBER","body":"> > All that said, retry may be okay if there's a warning logged (on both the client and the server side, ideally) that notes the change was detected and it will be retried.\r\n> \r\n> This PR is using the Retry class and logging will occur via it when retries happen.\r\n\r\nIs the intent to retry indefinitely, or are we going to decide on a number of retries for the user, or are we going to add additional complexity to allow them to tune the retry, and customize the other retry options, like retry delay or back-off? How deep did you want to go with this retry?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263658752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263660627","html_url":"https://github.com/apache/accumulo/pull/2982#issuecomment-1263660627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2982","id":1263660627,"node_id":"IC_kwDOACaFSM5LUe5T","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:37:52Z","updated_at":"2022-09-30T14:37:52Z","author_association":"MEMBER","body":"I think having the RFile API accept an optional CryptoService was something I had previously suggested, but yeah, maybe it's premature if it's still marked experimental.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263660627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263667783","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263667783","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263667783,"node_id":"IC_kwDOACaFSM5LUgpH","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:43:49Z","updated_at":"2022-09-30T14:44:31Z","author_association":"CONTRIBUTOR","body":"Retry forever would make me a little concerned. Even if  _should_ be ok in this case because it should eventually succeed at some point weird and unexpected things can sometimes happen (especially in distributed systems). I would it would be good to terminate and throw an exception as a fail safe but I don't know at what point to do that and whether or not it is worth the complexity to do so and make it configurable or just pick an arbitrary amount of times to try.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263667783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263670236","html_url":"https://github.com/apache/accumulo/issues/2974#issuecomment-1263670236","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2974","id":1263670236,"node_id":"IC_kwDOACaFSM5LUhPc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:45:44Z","updated_at":"2022-09-30T14:45:44Z","author_association":"CONTRIBUTOR","body":"> Do we really need this? I feel like a user can just use `grep` themselves, if each item is already printed on separate lines.\r\n\r\nNot really. Now that its in Admin you can easily pipe it to grep. The only thing that is kinda nice is that the description also prints all the possible types:\r\n<pre>\r\n          -s, --state\r\n            <state>[ -s <state>...] Print transactions in the state(s) {NEW, \r\n            IN_PROGRESS, FAILED_IN_PROGRESS, FAILED, SUCCESSFUL}\r\n            Default: []\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263670236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263685805","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1263685805","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1263685805,"node_id":"IC_kwDOACaFSM5LUlCt","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T14:58:53Z","updated_at":"2022-09-30T14:58:53Z","author_association":"CONTRIBUTOR","body":"> There shouldn't be any fate operations running prior to this being initialized. Do you have a stack trace? \r\n\r\nThat's what I thought as well. I will try to reproduce the error but its just each of the Thrift APIs in FateServiceHandler giving NPEs on the fate object.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263685805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263703117","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263703117","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263703117,"node_id":"IC_kwDOACaFSM5LUpRN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T15:14:04Z","updated_at":"2022-09-30T15:14:04Z","author_association":"CONTRIBUTOR","body":"I had asked about returning Future<Void> for this method. Not only to make it async, but cancel-able.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263703117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263703421","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1263703421","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1263703421,"node_id":"IC_kwDOACaFSM5LUpV9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T15:14:20Z","updated_at":"2022-09-30T15:19:47Z","author_association":"CONTRIBUTOR","body":"Here is the first occurrence of the error at startup:\r\n<pre>\r\n2022-09-30T11:06:45,099 [manager.Manager] DEBUG: Acquired manager lock\r\n2022-09-30T11:06:45,100 [manager.EventCoordinator] INFO : State changed from INITIAL to HAVE_LOCK\r\n2022-09-30T11:06:45,102 [metrics.MetricsUtil] INFO : initializing metrics, enabled:false, class:\r\n2022-09-30T11:06:45,105 [threads.ThreadPools] DEBUG: Creating ScheduledThreadPoolExecutor for replicationMetricsPoller with 1 threads\r\n2022-09-30T11:06:45,106 [metrics.MetricsUtil] INFO : Metric producer ReplicationMetrics initialize\r\n2022-09-30T11:06:45,106 [metrics.ManagerMetrics] INFO : Registered replication metrics module\r\n2022-09-30T11:06:45,165 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:50314; action: authenticate;\r\n2022-09-30T11:06:45,166 [thrift.ProcessFunction] ERROR: Internal error processing waitForFateOperation\r\njava.lang.NullPointerException: null\r\n        at org.apache.accumulo.manager.FateServiceHandler.waitForFateOperation(FateServiceHandler.java:706) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceUtil.lambda$wrapService$0(TraceUtil.java:206) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at com.sun.proxy.$Proxy36.waitForFateOperation(Unknown Source) ~[?:?]\r\n        at org.apache.accumulo.core.manager.thrift.FateService$Processor$waitForFateOperation.getResult(FateService.java:560) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.manager.thrift.FateService$Processor$waitForFateOperation.getResult(FateService.java:539) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:38) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:38) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.thrift.TMultiplexedProcessor.process(TMultiplexedProcessor.java:138) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.server.rpc.TimedProcessor.process(TimedProcessor.java:54) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:524) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.server.rpc.CustomNonBlockingServer$CustomFrameBuffer.invoke(CustomNonBlockingServer.java:129) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.server.Invocation.run(Invocation.java:18) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n</pre>\r\n\r\nHere is one of the tservers, which gets a server lock before the Manager so it could be trying to call `doFateOperation()`:\r\n<pre>\r\n2022-09-30T11:06:42,112 [threads.ThreadPools] DEBUG: Creating ScheduledThreadPoolExecutor for GeneralExecutor with 1 threads\r\n2022-09-30T11:06:42,113 [tserver.TabletServer] INFO : address = localhost:9997\r\n2022-09-30T11:06:42,131 [zookeeper.ServiceLock] DEBUG: [zlock#fab928b1-e15e-4f56-87bf-10e656d43232#] Ephemeral node /accumulo/afdde8ba-3cb0-4742-a2d1-a41a54d06a1b/tservers/localhost:9997/zlock#fab928b1-e15e-4f56-87bf-10e656d43232#0000000002 created\r\n2022-09-30T11:06:42,132 [zookeeper.ServiceLock] DEBUG: [zlock#fab928b1-e15e-4f56-87bf-10e656d43232#] Setting watcher on /accumulo/afdde8ba-3cb0-4742-a2d1-a41a54d06a1b/tservers/localhost:9997/zlock#fab928b1-e15e-4f56-87bf-10e656d43232#0000000002\r\n2022-09-30T11:06:42,134 [zookeeper.ServiceLock] DEBUG: [zlock#fab928b1-e15e-4f56-87bf-10e656d43232#] First candidate is my lock, acquiring...\r\n2022-09-30T11:06:42,134 [tserver.TabletServer] DEBUG: Obtained tablet server lock /accumulo/afdde8ba-3cb0-4742-a2d1-a41a54d06a1b/tservers/localhost:9997/zlock#fab928b1-e15e-4f56-87bf-10e656d43232#0000000002\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263703421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263758036","html_url":"https://github.com/apache/accumulo/pull/2987#issuecomment-1263758036","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2987","id":1263758036,"node_id":"IC_kwDOACaFSM5LU2rU","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T16:07:04Z","updated_at":"2022-09-30T16:07:04Z","author_association":"CONTRIBUTOR","body":"Another advantage to have the fate command run in Admin is that it doesn't require Accumulo to be running. So an admin can shut the cluster down and perform actions using the new command. The only exception is cancel requires the Manager to be running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263758036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263768049","html_url":"https://github.com/apache/accumulo/pull/2988#issuecomment-1263768049","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2988","id":1263768049,"node_id":"IC_kwDOACaFSM5LU5Hx","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T16:17:01Z","updated_at":"2022-09-30T16:17:01Z","author_association":"CONTRIBUTOR","body":"It would be good to see if all ITs pass with these additional permissions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263768049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263785211","html_url":"https://github.com/apache/accumulo/pull/2989#issuecomment-1263785211","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2989","id":1263785211,"node_id":"IC_kwDOACaFSM5LU9T7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T16:34:40Z","updated_at":"2022-09-30T16:34:40Z","author_association":"CONTRIBUTOR","body":"No idea, I was just manually going through the Thrift API method implementations and looking for checks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263785211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263787410","html_url":"https://github.com/apache/accumulo/pull/2989#issuecomment-1263787410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2989","id":1263787410,"node_id":"IC_kwDOACaFSM5LU92S","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T16:36:55Z","updated_at":"2022-09-30T16:36:55Z","author_association":"CONTRIBUTOR","body":"My comment was more of a prompt that we should check and add tests if needed - that can be done outside of this individual PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263787410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263810999","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1263810999","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1263810999,"node_id":"IC_kwDOACaFSM5LVDm3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T17:03:07Z","updated_at":"2022-09-30T17:03:07Z","author_association":"MEMBER","body":"> Here is the first occurrence of the error at startup:\r\n\r\nWas there anything special about this startup occurrence? Was it an upgrade or a fresh install? Was it a single node, or a cluster? I'm just not sure what circumstances can cause this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263810999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263831498","html_url":"https://github.com/apache/accumulo/issues/2980#issuecomment-1263831498","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2980","id":1263831498,"node_id":"IC_kwDOACaFSM5LVInK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T17:26:42Z","updated_at":"2022-09-30T17:26:42Z","author_association":"CONTRIBUTOR","body":"> > Here is the first occurrence of the error at startup:\r\n> \r\n> Was there anything special about this startup occurrence? Was it an upgrade or a fresh install? Was it a single node, or a cluster? I'm just not sure what circumstances can cause this.\r\n\r\nI have an Uno cluster setup with 2 tservers. I had 4 RW Bulk tests running. I did an `uno kill` and then `uno start accumulo` to restart everything. The NPE happened again. Maybe its a race condition with the tservers starting up quicker then the Manager. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263831498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263896085","html_url":"https://github.com/apache/accumulo/pull/2990#issuecomment-1263896085","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2990","id":1263896085,"node_id":"IC_kwDOACaFSM5LVYYV","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T18:37:20Z","updated_at":"2022-09-30T18:37:20Z","author_association":"CONTRIBUTOR","body":"I tested these changes and the new error is being printed just as much but with more information:\r\n<pre>\r\n2022-09-30T14:33:41,021 [manager.Manager] WARN : Unexpected use of fate in thread Manager-ClientPool-Worker-1 at time 1664562821016 blocked until fate starts\r\njava.lang.IllegalStateException: Attempted fate action before fate was started; if this doesn't make progress, please report it as a bug to the developers\r\n        at org.apache.accumulo.manager.Manager.fate(Manager.java:244) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.manager.FateServiceHandler.waitForFateOperation(FateServiceHandler.java:706) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceUtil.lambda$wrapService$0(TraceUtil.java:206) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at com.sun.proxy.$Proxy36.waitForFateOperation(Unknown Source) ~[?:?]\r\n        at org.apache.accumulo.core.manager.thrift.FateService$Processor$waitForFateOperation.getResult(FateService.java:594) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.manager.thrift.FateService$Processor$waitForFateOperation.getResult(FateService.java:570) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:40) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:40) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.TMultiplexedProcessor.process(TMultiplexedProcessor.java:147) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.accumulo.server.rpc.TimedProcessor.process(TimedProcessor.java:54) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:492) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.accumulo.server.rpc.CustomNonBlockingServer$CustomFrameBuffer.invoke(CustomNonBlockingServer.java:129) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263896085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263899321","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263899321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263899321,"node_id":"IC_kwDOACaFSM5LVZK5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T18:41:01Z","updated_at":"2022-09-30T18:41:01Z","author_association":"MEMBER","body":"> I had asked about returning Future for this method. Not only to make it async, but cancel-able.\r\n\r\nI like that idea. I think it gets us the best of all use cases. We get retry conveniently, automatically, but we can interrupt it by cancelling the future. We can also get async, and we don't need to worry about throwing the ConcurrentModificationException. Maximum user choice, maximum dev flexibility. The only thing we don't provide is customization of the retry loop (delay period, backoff, max attempts), but I think that's fine. We get pretty much everything we've discussed here with an easily interruptible infinite asynchronous retry in a Future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263899321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263910357","html_url":"https://github.com/apache/accumulo/pull/2990#issuecomment-1263910357","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2990","id":1263910357,"node_id":"IC_kwDOACaFSM5LVb3V","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T18:54:30Z","updated_at":"2022-09-30T18:54:30Z","author_association":"MEMBER","body":"> I tested these changes and the new error is being printed just as much but with more information:\r\n\r\nI was hoping it might occur less often, because of the way it blocks, it might prevent noisy NPEs from retries.\r\n\r\nI think the main concern is: do these make progress? Or do they block indefinitely?\r\n\r\nIf they make progress, it's probably fine. We can tune this a bit further... maybe instead of logging and waiting, we just wait for a certain amount of time, then log and throw an exception only if it times out, and fails to make progress. Setting a timeout is easy to do with the CountDownLatch. How much time does the Manager need, typically?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263910357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263940521","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263940521","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263940521,"node_id":"IC_kwDOACaFSM5LVjOp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T19:30:34Z","updated_at":"2022-09-30T19:30:34Z","author_association":"CONTRIBUTOR","body":"I was thinking of something like:\r\n\r\n```\r\n public Future<Void> modifyProperties(final Consumer<Map<String,String>> mapMutator)\r\n     throws AccumuloException, AccumuloSecurityException, IllegalArgumentException {\r\n\r\n   final Retry retry =\r\n       Retry.builder().infiniteRetries().retryAfter(25, MILLISECONDS).incrementBy(25, MILLISECONDS)\r\n       .maxWait(30, SECONDS).backOffFactor(1.5).logInterval(3, MINUTES).createRetry();\r\n\r\n   FutureTask<Void> f = new FutureTask<>(() -> {\r\n     while (true) {\r\n       try {\r\n         tryToModifyProperties(mapMutator);\r\n         break;\r\n       } catch (ConcurrentModificationException cme) {\r\n         try {\r\n           retry.logRetry(LoggerFactory.getLogger(InstanceOperationsImpl.class),\r\n               \"Unable to modify instance properties for because of concurrent modification\");\r\n           retry.waitForNextAttempt();\r\n         } catch (InterruptedException e) {\r\n           throw new RuntimeException(e);\r\n         }\r\n       } finally {\r\n         retry.useRetry();\r\n       }\r\n     }\r\n   }, null);\r\n   \r\n   ForkJoinPool.commonPool().execute(f);\r\n   \r\n   return f;\r\n }\r\n```\r\n\r\nWhether or not the ForkJoinPool is used or not doesn't really matter to me. Other places in the client code where `ClientContext.threadPools()` is used an ExecutorService is created and then shutdown in the same method. I used ForkJoinPool here for convenience as we don't need a pool of Threads.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263940521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263992658","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1263992658","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1263992658,"node_id":"IC_kwDOACaFSM5LVv9S","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T20:27:15Z","updated_at":"2022-09-30T20:27:15Z","author_association":"MEMBER","body":"> I was thinking of something like:\r\n\r\nI think it might be useful to have the Future return something useful, like number of retries that occurred before success, or how long it took to succeed. Okay, maybe not those... but maybe there's something else useful? Also, I'm wondering if we can override the cancel method on the future to specifically cancel the retries by setting a flag and breaking out of the retry loop, rather than relying on interrupting the thread and dealing with exception handling when we cancel.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263992658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263996428","html_url":"https://github.com/apache/accumulo/issues/2963#issuecomment-1263996428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2963","id":1263996428,"node_id":"IC_kwDOACaFSM5LVw4M","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T20:31:25Z","updated_at":"2022-09-30T20:31:44Z","author_association":"MEMBER","body":"I'm not sure it's a problem to log the monitor activity to its own debug log file (and that's the intent of that servlet logging feature). That's pretty consistent with other web server deployments, like httpd. Logging the responses is weird.\r\n\r\nHowever, these should not make it into the logs shown on the monitor page, unless you somehow configure the logging to redirect them there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1263996428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264030707","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264030707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264030707,"node_id":"IC_kwDOACaFSM5LV5Pz","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T21:15:38Z","updated_at":"2022-09-30T21:15:38Z","author_association":"CONTRIBUTOR","body":"> > I was thinking of something like:\r\n> \r\n> I think it might be useful to have the Future return something useful, like number of retries that occurred before success, or how long it took to succeed. Okay, maybe not those... but maybe there's something else useful? Also, I'm wondering if we can override the cancel method on the future to specifically cancel the retries by setting a flag and breaking out of the retry loop, rather than relying on interrupting the thread and dealing with exception handling when we cancel.\r\n\r\nI'm not sure I like the idea of overriding the cancel method. Handling the InterruptedException is the standard way of handling a canceled future so I don't think we should deviate from that pattern as that's the intended way for handling it.\r\n\r\nIn terms of returning something useful the main thing the user cares about is it succeeded so I don't see a problem just returning nothing or true. I don't think returning number of retrys or anything like that would provide a lot of value. Maybe you could return a map of the properties after update which would be the current state of all the properties at the scope (instance, namespace, table, etc)? The user would already know the specific properties that were changed and their values as they were supplied in the mapMutator so I don't think it makes sense to return that but returning the state of all properties might be nice. Of course the user could also just call the get properties method if they really wanted to see that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264030707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264092662","html_url":"https://github.com/apache/accumulo/pull/2957#issuecomment-1264092662","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2957","id":1264092662,"node_id":"IC_kwDOACaFSM5LWIX2","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T22:36:42Z","updated_at":"2022-09-30T22:36:42Z","author_association":"MEMBER","body":"@DomGarguilo Regarding the license issue, flot used to bundle some jQuery plugins, with their own license specifics. If those are no longer bundled in the version of flot we're using (and therefore, we are no longer redistributing them), we can get rid of those mentions in the license.\r\n\r\n@cshannon We've discussed this before, but I'm too lazy to dig it up in the archives at the moment. It boils down to: obfuscated/minimized code is not free and open source. It does not meet the definition of open source software according to the the open source initiative (not ASF's official definition, but a useful one), nor does it meet the definition of free software according to the free software foundation (again, not ASF's official definition, but a useful one). We should not bundle the minimized versions in our source tarball. We could include them in our distribution tarball, but there's really no reason to do that, because we're probably not getting much benefit from it anyway. Many browsers cache and optimize and do other various magical things with javascript... and that's assuming downstream users haven't modified the monitor to use a CDN instead of the javascript we're giving them anyway. So, using the obfuscated/minimized versions are generally not worth it for us.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264092662/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]