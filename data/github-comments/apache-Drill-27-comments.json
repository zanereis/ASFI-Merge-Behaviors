[{"url":"https://api.github.com/repos/apache/drill/issues/comments/352757489","html_url":"https://github.com/apache/drill/pull/1068#issuecomment-352757489","issue_url":"https://api.github.com/repos/apache/drill/issues/1068","id":352757489,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc1NzQ4OQ==","user":{"login":"MitchelLabonte","id":3504695,"node_id":"MDQ6VXNlcjM1MDQ2OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3504695?v=4","gravatar_id":"","url":"https://api.github.com/users/MitchelLabonte","html_url":"https://github.com/MitchelLabonte","followers_url":"https://api.github.com/users/MitchelLabonte/followers","following_url":"https://api.github.com/users/MitchelLabonte/following{/other_user}","gists_url":"https://api.github.com/users/MitchelLabonte/gists{/gist_id}","starred_url":"https://api.github.com/users/MitchelLabonte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MitchelLabonte/subscriptions","organizations_url":"https://api.github.com/users/MitchelLabonte/orgs","repos_url":"https://api.github.com/users/MitchelLabonte/repos","events_url":"https://api.github.com/users/MitchelLabonte/events{/privacy}","received_events_url":"https://api.github.com/users/MitchelLabonte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T13:53:26Z","updated_at":"2017-12-19T13:53:26Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi No problem, yes all tests pass now. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352757489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/352766995","html_url":"https://github.com/apache/drill/pull/1068#issuecomment-352766995","issue_url":"https://api.github.com/repos/apache/drill/issues/1068","id":352766995,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2Njk5NQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T14:19:52Z","updated_at":"2017-12-19T14:19:52Z","author_association":"MEMBER","body":"@MitchelLabonte, thanks for the pull request, +1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352766995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/352813564","html_url":"https://github.com/apache/drill/pull/1073#issuecomment-352813564","issue_url":"https://api.github.com/repos/apache/drill/issues/1073","id":352813564,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjgxMzU2NA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T16:36:06Z","updated_at":"2017-12-19T16:36:06Z","author_association":"MEMBER","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352813564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/352848199","html_url":"https://github.com/apache/drill/pull/1075#issuecomment-352848199","issue_url":"https://api.github.com/repos/apache/drill/issues/1075","id":352848199,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjg0ODE5OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T18:39:00Z","updated_at":"2017-12-19T18:39:00Z","author_association":"CONTRIBUTOR","body":"One additional thought. This bug was found when sorting 18 GB of data in 8 GB of memory. That is, a case in which the sort must spill.\r\n\r\nWhat happens in the case in which the 18 GB of data is sorted in, say, 20 GB of memory (an in-memory sort)? We don't want the merge limit to force a spill in this case; kind of defeats the purpose of an in-memory sort.\r\n\r\nSo:\r\n\r\n1. Does the limit affect in memory sort? If so, we need to revise the solution.\r\n2. Does the in-memory sort suffer from a similar performance issue? If so, we need to revise the in memory sort.\r\n\r\nOne possible solution is to:\r\n\r\n1. Defer sorting of individual batches until necessary.\r\n2. Sort batches just before spilling.\r\n3. If all batches fit in memory, do a single, combined sort (using an SV4).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352848199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/352861837","html_url":"https://github.com/apache/drill/pull/1073#issuecomment-352861837","issue_url":"https://api.github.com/repos/apache/drill/issues/1073","id":352861837,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjg2MTgzNw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T19:28:43Z","updated_at":"2017-12-19T19:28:43Z","author_association":"CONTRIBUTOR","body":"Removed unnecessary creation of list in OrderedPartitionSenderCreator as discussed. @paul-rogers  please take a look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352861837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/352900305","html_url":"https://github.com/apache/drill/pull/1075#issuecomment-352900305","issue_url":"https://api.github.com/repos/apache/drill/issues/1075","id":352900305,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjkwMDMwNQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T22:04:12Z","updated_at":"2017-12-19T22:04:12Z","author_association":"MEMBER","body":"The scenario when all batches can be merged in memory is covered by 'if (canUseMemoryMerge())` check in `SortImpl.java:399`. The affected code path applies only to cases where merge between spilled and in-memory batches is necessary. Note that this is a short term fix to improve managed sort performance, in a long run, it is necessary to have an ability to merge all batches in memory (using SV4) without spilling and be able to merge it with the spilled data.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/352900305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353074689","html_url":"https://github.com/apache/drill/pull/1026#issuecomment-353074689","issue_url":"https://api.github.com/repos/apache/drill/issues/1026","id":353074689,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzA3NDY4OQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-20T14:18:38Z","updated_at":"2017-12-20T14:18:38Z","author_association":"MEMBER","body":"@vladimirtkach thanks for adding tests for math functions. New changes look good to me.\r\n@paul-rogers please take a look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353074689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353179640","html_url":"https://github.com/apache/drill/pull/1055#issuecomment-353179640","issue_url":"https://api.github.com/repos/apache/drill/issues/1055","id":353179640,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzE3OTY0MA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-20T20:53:58Z","updated_at":"2017-12-20T20:53:58Z","author_association":"CONTRIBUTOR","body":"Didn't make sense to have small commits in the PR. So I've squashed and rebased onto 1.13.0.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353179640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353185638","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-353185638","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":353185638,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzE4NTYzOA==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-20T21:21:03Z","updated_at":"2017-12-20T21:21:03Z","author_association":"CONTRIBUTOR","body":"+1. Nice work.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353185638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353281884","html_url":"https://github.com/apache/drill/pull/1067#issuecomment-353281884","issue_url":"https://api.github.com/repos/apache/drill/issues/1067","id":353281884,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzI4MTg4NA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-21T07:49:23Z","updated_at":"2017-12-21T07:49:23Z","author_association":"CONTRIBUTOR","body":"@amansinha100 / @parthchandra can you review this?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353281884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353400685","html_url":"https://github.com/apache/drill/pull/1075#issuecomment-353400685","issue_url":"https://api.github.com/repos/apache/drill/issues/1075","id":353400685,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzQwMDY4NQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-21T16:52:21Z","updated_at":"2017-12-21T16:52:21Z","author_association":"MEMBER","body":"@paul-rogers Please review","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353400685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353495907","html_url":"https://github.com/apache/drill/pull/1071#issuecomment-353495907","issue_url":"https://api.github.com/repos/apache/drill/issues/1071","id":353495907,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzQ5NTkwNw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T00:59:30Z","updated_at":"2017-12-22T00:59:30Z","author_association":"CONTRIBUTOR","body":"Thanks much for the example files and explanation for the need to hash.\r\n\r\nThe improvements look good. I wonder, however, if the code gen approach is overkill. There is exactly one allowable hash method per type. (Has to be the same for all queries to get reliable results.)\r\n\r\nHere, we are generating code to do the work of:\r\n\r\n* Bind to all vectors.\r\n* Get a value out of the vector into a holder.\r\n* Pass the value to the proper hash function.\r\n* Combine the results.\r\n\r\nThe result is a huge amount of code to generate. The gist of this bug is that, when the number of columns becomes large, we generate so much code that we have to take extra steps to manage it. And, of course, compiling, caching and loading the code takes time.\r\n\r\nAs something to think about for the future, this entire mechanism can be replaced with a much simpler one:\r\n\r\n* Add a `hash(seed)` method to each value vector.\r\n* Here, iterate over the list of vectors.\r\n* Call the `hash()` method on each vector.\r\n* Combine the results.\r\n\r\nTradeoffs?\r\n\r\n* The proposed method has no setup cost. It is, instead an \"interpreted\" approach. The old method has a large setup cost.\r\n* The proposed method must make a \"virtual\" call into each vector to get the value and hash it using the pre-coded, type-specific function. The old method makes a direct call to get the value in a holder, then a direct call to the hash method.\r\n* The proposed method is insensitive to the number of columns (other than that it increases the size of the column loop.) The old method needs special care to handle the extra code.\r\n\r\nThe proposed method would be easy to test to see which is more efficient: (large code generation + direct method calls) vs. (no code generation and virtual method calls). My money is on the new method as it eliminates the holders, sloshing variables around and so on. The JIT can optimize the \"pre-coded\" methods once and for all early in the Drillbit run rather than having to re-optimize the (huge) generated methods per query.\r\n\r\nThe improvement is not necessary for this PR, but is something to think about. @Ben-Zvi may need something similar for the hash join to avoid generating query-specific key hashes. In fact, since hashing is used in many places (exchanges, hash agg, etc.), we might get quite a nice savings in time and code complexity by slowing moving to the proposed model.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353495907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353578777","html_url":"https://github.com/apache/drill/pull/1071#issuecomment-353578777","issue_url":"https://api.github.com/repos/apache/drill/issues/1071","id":353578777,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU3ODc3Nw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T11:21:26Z","updated_at":"2017-12-22T11:21:26Z","author_association":"MEMBER","body":"@paul-rogers thanks for the code review. Your approach seems to be worth trying. I have created Jira for enhancement [1].\r\n\r\n[1] https://issues.apache.org/jira/browse/DRILL-6052","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353578777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353600962","html_url":"https://github.com/apache/drill/pull/1040#issuecomment-353600962","issue_url":"https://api.github.com/repos/apache/drill/issues/1040","id":353600962,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzYwMDk2Mg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T13:44:07Z","updated_at":"2017-12-22T13:44:07Z","author_association":"MEMBER","body":"@sohami thanks for making the changes. +1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353600962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353760153","html_url":"https://github.com/apache/drill/pull/1060#issuecomment-353760153","issue_url":"https://api.github.com/repos/apache/drill/issues/1060","id":353760153,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mzc2MDE1Mw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-24T01:44:09Z","updated_at":"2017-12-24T01:44:09Z","author_association":"CONTRIBUTOR","body":"This PR is a tough one. We generally like to avoid design discussions in PRs; but I'm going to violate that rule.\r\n\r\nThis PR is based on the premise that each vector has all the information needed to pull values from a `VLBulkEntry`. The bulk entry reads a given number of values. Presumably this is faster than having the source of the values set values one-by-one.\r\n\r\nA separate project is confronting a limitation of Drill: that readers can create batches of very large sizes. Why? Readers choose to read x records. Records can be as small as a few bytes or as large as many MB. (Large records are common in document data sources.) Suppose we decide to read 4K records (a common size) and the records are 1 MB each. The batch needs 4 GB of data. But, the \"managed\" sort and hash agg operators often get only about 40 MB. Since 4 GB batch > 40 MB working memory, queries die.\r\n\r\nIf we knew that each record was y bytes, we could compute the record count, x = target batch size / record size. But, for most readers (including Parquet), Drill cannot know the record size until after the record is read. Hence, the entire premise of setting a fixed read size is unworkable. In short, unlike a classic relational DB, Drill cannot predict record sizes, Drill can only react to the size of records as they are read.\r\n\r\nSuppose the design were modified so that vector V read either up to x values or until it reaches some maximum vector size. The problem then becomes that, if the record has two columns, V and W, they cannot coordinate. (Specifically, the inner loop in vector V should not have visibility into the state of vector W.) V may read, say, 16K values of 1K each and become full. (For reasons discussed elsewhere, 16 MB is a convenient maximum vector size.) But if column W is 4X wider, at 4K bytes, it must read the same 16K records already read by X, but will require 64 MB, exceeding Y's own size target by 4X.\r\n\r\nSuppose the row has 1000 columns. (Unusual, but not unheard of.) Then, we have 1000 bulk readers all needing to coordinate. Maybe each one stays within its own size limit, growing to only 8 MB. But, the aggregate total of 1000 columns at 8 MB each is 8 GB, which exceeds the overall batch size target. (The actual target will be set by the planner, but low 10s of MB is a likely limit.)\r\n\r\nTo work around this, the bulk load mechanism must know the sizes of all columns it will read in a batch and compute a row count that causes the aggregate sum of values to be below both the per-vector and overall batch size targets. As discussed, since Drill cannot predict the future, and Parquet provides no per-row size metadata, this approach cannot work in the general case (though, with good guesses, it can work in, say, some percentage of \"typical\" queries -- the approach the Drill currently uses.)\r\n\r\nMaybe the solution can read in small bursts, maybe 100 rows, to sense if any vector gets too large before doing another 100 values into each vector. Still with any value larger than 1 for the \"burst count\", it is easy to get back into the situation of an oversize batch if row sizes are not uniform. \r\n\r\nSince Parquet makes no guarantees that row sizes are uniform, this is a stochastic game. What are the chances that the next 100 (say) rows behave like the last 100? Any deviation leads to OOM errors and query failures. What percentage of the time will we allow queries to fail with OOM errors to go fast the rest of the time? 10% failure rate for a 100% speed improvement? Is there any correct failure rate other than 0%? This is a hard question. In fact, this is the very problem that the \"batch size\" project was asked to solve.\r\n\r\nWe are left with two choices. Either 1) exempt Parquet from row size limits, or 2) devise a new solution that allows size limits to be enforced, if only stochastically. Since we are entertaining this PR, then clearly we've decided to *not* address size issues in Parquet. But, since Parquet is our primary input format, we've decided not to address size issues for ~90% of queries. But, since we do, in fact, have a parallel project to limit batch sizes, perhaps we have not, in fact, exempted Parquet. This is quite the dilemma! \r\n\r\nFor background, the \"batch size\" project, to be used for other readers, solves the problem by monitoring total batch size row by row. When a row causes the batch (or any individual vector) size to be exceeded, \"rollover\" occurs to create a new batch, and the full batch is sent downstream. Lots of complexity comes from the fact that overflow can occur in the middle of a rows, perhaps inside a deeply nested structure. The mechanism makes overflow transparent to the reader; the reader simply asks if it can write a row, writes it, then loops to check again.\r\n\r\nIt is understood that Parquet is columnar, and the row-by-row approach is perhaps inefficient. So, we need a columnar solution to the batch size problem. Perhaps this project can propose one.\r\n\r\nThe above description points out another concern. The PR says that this mechanism is for flat rows. Yet, we have yet another project to support nested tables (the so-called \"complex types\".) Is this PR consistent with that project, or will we need a new, complex type reader that uses, say, the \"batch size\" mechanism, while the \"flat\" reader uses this mechanism? Perhaps this project can propose a solution to that issue also.\r\n\r\nWould appreciate direction from the PMC and commercial management about their intent and how these three now-conflicting projects are to be reconciled. Once that info is available, we can continue to determine if the code offered here realizes the goals set by project leadership.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353760153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/353765806","html_url":"https://github.com/apache/drill/pull/1060#issuecomment-353765806","issue_url":"https://api.github.com/repos/apache/drill/issues/1060","id":353765806,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mzc2NTgwNg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-24T05:07:57Z","updated_at":"2017-12-24T05:07:57Z","author_association":"CONTRIBUTOR","body":"Always a good idea to suggest an alternative in addition to identifying challenges. I wonder if the code can resolve the questions raised by taking a someone different approach:\r\n\r\n1. Rather than vectors pulling in data, create a new abstraction that does so. It loads a heap buffer with values until either a) filling the buffer, or b) reaching a defined value limit.\r\n2. Once all vector buffers are full, make a pass over all columns to determine how much will fit into the target vectors before overflow. (That is, if the buffer holds 1K values, but only 200 of column C fits before overflow, then 200 becomes the vector fill number.) Let's call this N.\r\n3. Make another pass, copying N values from each buffer into the target vectors. If that leaves values in the buffers, hold those values for the next pass (by shifting them down or implementing a circular buffer.)\r\n\r\nThe above handles vector size limits. It has the advantage of turning \"Drill can't predict the future\" (can't know value lengths until they are read) into an exercise in examining the past: which values were read into buffers.\r\n\r\nIt is a bit harder to imagine how to honor batch size limits since the limit is computed over all vectors, not just one. There is the crude-but-effective approach in step 2:\r\n\r\n2. In the pass above to compute N (the number of values to copy into vectors), go row by row, accumulating totals (as the \"row set loader\" does on actual writes.) Once the limit is set, back off by one to get N (the last count that completely fits within a row.)\r\n\r\nNow, since the above requires row-by-row calculations, it requires the very work that this PR seeks to avoid (but does not do actual data transfers.)\r\n\r\nThe question, then, is this: is there a refinement to the above algorithm that can be done non-iteratively (without doing a row-by-row check?)\r\n\r\nAnd, with all the extra machinery needed to honor limits, will we still see a significant speedup relative to a straightforward row-by-row read?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/353765806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354248210","html_url":"https://github.com/apache/drill/pull/1042#issuecomment-354248210","issue_url":"https://api.github.com/repos/apache/drill/issues/1042","id":354248210,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDI0ODIxMA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-28T08:11:32Z","updated_at":"2017-12-28T08:11:32Z","author_association":"CONTRIBUTOR","body":"@paul-rogers , since you've responded to the original JIRA, perhaps you can review this for @xhochy ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354248210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354402769","html_url":"https://github.com/apache/drill/pull/1054#issuecomment-354402769","issue_url":"https://api.github.com/repos/apache/drill/issues/1054","id":354402769,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQwMjc2OQ==","user":{"login":"prasadns14","id":4907022,"node_id":"MDQ6VXNlcjQ5MDcwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/4907022?v=4","gravatar_id":"","url":"https://api.github.com/users/prasadns14","html_url":"https://github.com/prasadns14","followers_url":"https://api.github.com/users/prasadns14/followers","following_url":"https://api.github.com/users/prasadns14/following{/other_user}","gists_url":"https://api.github.com/users/prasadns14/gists{/gist_id}","starred_url":"https://api.github.com/users/prasadns14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prasadns14/subscriptions","organizations_url":"https://api.github.com/users/prasadns14/orgs","repos_url":"https://api.github.com/users/prasadns14/repos","events_url":"https://api.github.com/users/prasadns14/events{/privacy}","received_events_url":"https://api.github.com/users/prasadns14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T06:09:18Z","updated_at":"2017-12-29T06:09:18Z","author_association":"CONTRIBUTOR","body":"@paul-rogers, please review","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354402769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354483906","html_url":"https://github.com/apache/drill/pull/1067#issuecomment-354483906","issue_url":"https://api.github.com/repos/apache/drill/issues/1067","id":354483906,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQ4MzkwNg==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T18:38:18Z","updated_at":"2017-12-29T18:38:18Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354483906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354484462","html_url":"https://github.com/apache/drill/pull/1077#issuecomment-354484462","issue_url":"https://api.github.com/repos/apache/drill/issues/1077","id":354484462,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQ4NDQ2Mg==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T18:42:46Z","updated_at":"2017-12-29T18:42:46Z","author_association":"CONTRIBUTOR","body":"@sohami \r\nApplied the checks for security to deny unauthorized access.\r\nThis is a screenshot with an admin user (`mapr`) querying the table.\r\n<img width=\"1440\" alt=\"adminuser\" src=\"https://user-images.githubusercontent.com/4335237/34444695-cbe7efd4-ec84-11e7-9bf1-e4b007c8a062.png\">\r\n\r\nThis is a screenshot with a non-admin user (`kuser1`) querying the table.\r\n<img width=\"1440\" alt=\"nonadminuser\" src=\"https://user-images.githubusercontent.com/4335237/34444715-f7f0b85e-ec84-11e7-8fe1-bbed71e2d5ea.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354484462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354487043","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-354487043","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":354487043,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQ4NzA0Mw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T19:02:53Z","updated_at":"2017-12-29T19:02:53Z","author_association":"CONTRIBUTOR","body":"@parthchandra I've added the same security check being done for DRILL-5068. But I'm not sure if the match for connections should be in the original user or the impersonated user, or both. Suggestions? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354487043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354489557","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-354489557","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":354489557,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQ4OTU1Nw==","user":{"login":"chunhui-shi","id":9878787,"node_id":"MDQ6VXNlcjk4Nzg3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/9878787?v=4","gravatar_id":"","url":"https://api.github.com/users/chunhui-shi","html_url":"https://github.com/chunhui-shi","followers_url":"https://api.github.com/users/chunhui-shi/followers","following_url":"https://api.github.com/users/chunhui-shi/following{/other_user}","gists_url":"https://api.github.com/users/chunhui-shi/gists{/gist_id}","starred_url":"https://api.github.com/users/chunhui-shi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunhui-shi/subscriptions","organizations_url":"https://api.github.com/users/chunhui-shi/orgs","repos_url":"https://api.github.com/users/chunhui-shi/repos","events_url":"https://api.github.com/users/chunhui-shi/events{/privacy}","received_events_url":"https://api.github.com/users/chunhui-shi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T19:23:35Z","updated_at":"2017-12-29T19:23:35Z","author_association":"CONTRIBUTOR","body":"Can you file a pull request to mapr/incubator-calcite with your changes in https://github.com/KulykRoman/incubator-calcite/commits/DrillCalcite1.15.0_rc0?\r\nSo we can review and get these changes into official branch to publish.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354489557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354490720","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-354490720","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":354490720,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQ5MDcyMA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T19:33:43Z","updated_at":"2017-12-29T19:33:43Z","author_association":"MEMBER","body":"@chunhui-shi, this branch is not ready completely. There is opened a pull request on Apache Calcite [CALCITE-2018](https://issues.apache.org/jira/browse/CALCITE-2018) which should be cherry-picked into this branch. When it is merged into Apache master, we will update both branches and create a pull request on mapr/incubator-calcite.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354490720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354512283","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-354512283","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":354512283,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDUxMjI4Mw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T23:25:58Z","updated_at":"2017-12-29T23:25:58Z","author_association":"CONTRIBUTOR","body":"Filtering should be done based on impersonated user which will be stored in UserSession as well. So your check [here](https://github.com/kkhatua/drill/blob/66ab15df7e0df6804b1938adc048728c7436450b/exec/java-exec/src/main/java/org/apache/drill/exec/store/sys/BitToUserConnectionIterator.java#L81) is fine.\r\n\r\nBut we shouldn't display the [target User](https://github.com/kkhatua/drill/blob/66ab15df7e0df6804b1938adc048728c7436450b/exec/java-exec/src/main/java/org/apache/drill/exec/store/sys/BitToUserConnectionIterator.java#L123) separately in the table. Just displaying the session user is fine which will be same as querying user. Because when we do `session.getTargetUserName()`  it get's the target name which was passed in Connection URL during connection time. But during query time the actual targeted user or the session user can change.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354512283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354520430","html_url":"https://github.com/apache/drill/pull/1059#issuecomment-354520430","issue_url":"https://api.github.com/repos/apache/drill/issues/1059","id":354520430,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDUyMDQzMA==","user":{"login":"HanumathRao","id":5264087,"node_id":"MDQ6VXNlcjUyNjQwODc=","avatar_url":"https://avatars.githubusercontent.com/u/5264087?v=4","gravatar_id":"","url":"https://api.github.com/users/HanumathRao","html_url":"https://github.com/HanumathRao","followers_url":"https://api.github.com/users/HanumathRao/followers","following_url":"https://api.github.com/users/HanumathRao/following{/other_user}","gists_url":"https://api.github.com/users/HanumathRao/gists{/gist_id}","starred_url":"https://api.github.com/users/HanumathRao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HanumathRao/subscriptions","organizations_url":"https://api.github.com/users/HanumathRao/orgs","repos_url":"https://api.github.com/users/HanumathRao/repos","events_url":"https://api.github.com/users/HanumathRao/events{/privacy}","received_events_url":"https://api.github.com/users/HanumathRao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-30T01:35:59Z","updated_at":"2017-12-30T01:35:59Z","author_association":"CONTRIBUTOR","body":"@paul-rogers  Thanks for the review. I have moved the testcase to one test file and called it from multiple places. I have also made changes to move the code in checkForEarlyExit to base class. Please let me know if any other changes are required. thanks.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354520430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354664806","html_url":"https://github.com/apache/drill/pull/922#issuecomment-354664806","issue_url":"https://api.github.com/repos/apache/drill/issues/922","id":354664806,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDY2NDgwNg==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-01T17:22:55Z","updated_at":"2018-01-01T17:22:55Z","author_association":"CONTRIBUTOR","body":"Closing this until a rework is complete, based on the recommendations.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354664806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354784841","html_url":"https://github.com/apache/drill/pull/1054#issuecomment-354784841","issue_url":"https://api.github.com/repos/apache/drill/issues/1054","id":354784841,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDc4NDg0MQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-02T15:02:05Z","updated_at":"2018-01-02T15:02:05Z","author_association":"MEMBER","body":"@prasadns14 changes in DRILL-5963 (already merged into master) should have covered this case. Please check if issue is resolved.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354784841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354914744","html_url":"https://github.com/apache/drill/pull/1079#issuecomment-354914744","issue_url":"https://api.github.com/repos/apache/drill/issues/1079","id":354914744,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDkxNDc0NA==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T00:49:14Z","updated_at":"2018-01-03T00:49:14Z","author_association":"CONTRIBUTOR","body":"@parthchandra - Please help to review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354914744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354924864","html_url":"https://github.com/apache/drill/pull/1080#issuecomment-354924864","issue_url":"https://api.github.com/repos/apache/drill/issues/1080","id":354924864,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDkyNDg2NA==","user":{"login":"tdunning","id":250490,"node_id":"MDQ6VXNlcjI1MDQ5MA==","avatar_url":"https://avatars.githubusercontent.com/u/250490?v=4","gravatar_id":"","url":"https://api.github.com/users/tdunning","html_url":"https://github.com/tdunning","followers_url":"https://api.github.com/users/tdunning/followers","following_url":"https://api.github.com/users/tdunning/following{/other_user}","gists_url":"https://api.github.com/users/tdunning/gists{/gist_id}","starred_url":"https://api.github.com/users/tdunning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdunning/subscriptions","organizations_url":"https://api.github.com/users/tdunning/orgs","repos_url":"https://api.github.com/users/tdunning/repos","events_url":"https://api.github.com/users/tdunning/events{/privacy}","received_events_url":"https://api.github.com/users/tdunning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T02:18:37Z","updated_at":"2018-01-03T02:18:37Z","author_association":"CONTRIBUTOR","body":"The Travis failure appears unrelated to this pull request.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354924864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354932156","html_url":"https://github.com/apache/drill/pull/1080#issuecomment-354932156","issue_url":"https://api.github.com/repos/apache/drill/issues/1080","id":354932156,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDkzMjE1Ng==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T03:41:17Z","updated_at":"2018-01-03T03:41:17Z","author_association":"CONTRIBUTOR","body":"Hi Ted, \r\nThanks for doing this.  This looks really great!  The PCAP files came from here: https://github.com/chrissanders/packets.  The author said that they are free to use, but asks for retribution.  \r\n\r\nWhen I started poking at this, and my original thought was to add a boolean column for each TCP flag which would facilitate analysis, as well as a field which contains all the flags. My original thought was that would enable you to quickly detect things like SYN scans and the like.  I've been going through `Practical Packet Analysis` by Chris Sanders and trying to do some of the same things he does in Wireshark with Drill.  The next thing I was going to try to do was figure out a way of getting Drill to follow sequences.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354932156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/354939320","html_url":"https://github.com/apache/drill/pull/1080#issuecomment-354939320","issue_url":"https://api.github.com/repos/apache/drill/issues/1080","id":354939320,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDkzOTMyMA==","user":{"login":"tdunning","id":250490,"node_id":"MDQ6VXNlcjI1MDQ5MA==","avatar_url":"https://avatars.githubusercontent.com/u/250490?v=4","gravatar_id":"","url":"https://api.github.com/users/tdunning","html_url":"https://github.com/tdunning","followers_url":"https://api.github.com/users/tdunning/followers","following_url":"https://api.github.com/users/tdunning/following{/other_user}","gists_url":"https://api.github.com/users/tdunning/gists{/gist_id}","starred_url":"https://api.github.com/users/tdunning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdunning/subscriptions","organizations_url":"https://api.github.com/users/tdunning/orgs","repos_url":"https://api.github.com/users/tdunning/repos","events_url":"https://api.github.com/users/tdunning/events{/privacy}","received_events_url":"https://api.github.com/users/tdunning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T05:23:02Z","updated_at":"2018-01-03T05:23:02Z","author_association":"CONTRIBUTOR","body":"To follow sequences, group by session id, order by time or sequence number.\n\nThis assumes ports are not reused to the same host very often. Will break\noccasionally under odd conditions such as super high connection rate behind\na broken proxy with no keep alive.\n\n\nOn Jan 2, 2018 7:41 PM, \"Charles S. Givre\" <notifications@github.com> wrote:\n\n> Hi Ted,\n> Thanks for doing this. This looks really great! The PCAP files came from\n> here: https://github.com/chrissanders/packets. The author said that they\n> are free to use, but asks for retribution.\n>\n> When I started poking at this, and my original thought was to add a\n> boolean column for each TCP flag which would facilitate analysis, as well\n> as a field which contains all the flags. My original thought was that would\n> enable you to quickly detect things like SYN scans and the like. I've been\n> going through Practical Packet Analysis by Chris Sanders and trying to do\n> some of the same things he does in Wireshark with Drill. The next thing I\n> was going to try to do was figure out a way of getting Drill to follow\n> sequences.\n>\n> \n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/drill/pull/1080#issuecomment-354932156>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAPSer4NlGCG2NVsDPLLmmNzAwBy88Knks5tGvbjgaJpZM4RRO_1>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/354939320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355106158","html_url":"https://github.com/apache/drill/pull/1079#issuecomment-355106158","issue_url":"https://api.github.com/repos/apache/drill/issues/1079","id":355106158,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTEwNjE1OA==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T19:39:06Z","updated_at":"2018-01-03T19:39:06Z","author_association":"CONTRIBUTOR","body":"Thanks for the review!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355106158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355179278","html_url":"https://github.com/apache/drill/pull/1077#issuecomment-355179278","issue_url":"https://api.github.com/repos/apache/drill/issues/1077","id":355179278,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTE3OTI3OA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-04T01:57:41Z","updated_at":"2018-01-04T01:57:41Z","author_association":"CONTRIBUTOR","body":"@sohami made the changes. You can review this.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355179278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355181223","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-355181223","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":355181223,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTE4MTIyMw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-04T02:12:03Z","updated_at":"2018-01-04T02:12:03Z","author_association":"CONTRIBUTOR","body":"@sohami updated the commit. Please review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355181223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355406857","html_url":"https://github.com/apache/drill/pull/1077#issuecomment-355406857","issue_url":"https://api.github.com/repos/apache/drill/issues/1077","id":355406857,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTQwNjg1Nw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-04T21:41:51Z","updated_at":"2018-01-04T21:41:51Z","author_association":"CONTRIBUTOR","body":"Thanks for the changes. +1 LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355406857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355407533","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-355407533","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":355407533,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTQwNzUzMw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-04T21:44:45Z","updated_at":"2018-01-04T21:44:45Z","author_association":"CONTRIBUTOR","body":"+1 LGTM. Thanks for the changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355407533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355432721","html_url":"https://github.com/apache/drill/pull/1076#issuecomment-355432721","issue_url":"https://api.github.com/repos/apache/drill/issues/1076","id":355432721,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTQzMjcyMQ==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-04T23:50:04Z","updated_at":"2018-01-04T23:50:04Z","author_association":"CONTRIBUTOR","body":"+1 (binding)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355432721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355445899","html_url":"https://github.com/apache/drill/pull/1024#issuecomment-355445899","issue_url":"https://api.github.com/repos/apache/drill/issues/1024","id":355445899,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTQ0NTg5OQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-05T01:10:53Z","updated_at":"2018-01-05T01:10:53Z","author_association":"CONTRIBUTOR","body":"Ready for a final review. \r\nAll unit tests, with the exception of `PreparedStatementTest.testServerTriggeredQueryTimeout` . The test is being ignored because the timed pause injection is not being honoured for a PreparedStatement, though it is honoured for a regular Statement. In actual dev/functional testing, however, the timeout works, which makes me believe there is a limitation with the test framework injecting pauses for Prepared Statement.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355445899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355714455","html_url":"https://github.com/apache/drill/pull/1084#issuecomment-355714455","issue_url":"https://api.github.com/repos/apache/drill/issues/1084","id":355714455,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTcxNDQ1NQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-06T01:56:31Z","updated_at":"2018-01-06T01:56:31Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva / @cgivre , would you care to review this? Let me know if you are unable to build and need screenshots.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355714455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/355715638","html_url":"https://github.com/apache/drill/pull/1084#issuecomment-355715638","issue_url":"https://api.github.com/repos/apache/drill/issues/1084","id":355715638,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTcxNTYzOA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-06T02:12:35Z","updated_at":"2018-01-06T02:12:35Z","author_association":"CONTRIBUTOR","body":"When viewing a query profile:\r\n![image](https://user-images.githubusercontent.com/4335237/34635374-5793b98c-f243-11e7-87db-2078892c571c.png)\r\n\r\nWhen editing the query of a submitted profile:\r\n![image](https://user-images.githubusercontent.com/4335237/34635402-a5fbe1d0-f243-11e7-87e2-8dc9eecd38e6.png)\r\n\r\nWhen writing a new query and using snippets to autocomplete ( `ctas` and `s*` ):\r\n![image](https://user-images.githubusercontent.com/4335237/34635428-eb1b166e-f243-11e7-8937-499040ef4dba.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/355715638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356053680","html_url":"https://github.com/apache/drill/pull/1081#issuecomment-356053680","issue_url":"https://api.github.com/repos/apache/drill/issues/1081","id":356053680,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjA1MzY4MA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-08T18:34:32Z","updated_at":"2018-01-08T18:34:32Z","author_association":"CONTRIBUTOR","body":"@paul-rogers please review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356053680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356129404","html_url":"https://github.com/apache/drill/pull/1085#issuecomment-356129404","issue_url":"https://api.github.com/repos/apache/drill/issues/1085","id":356129404,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjEyOTQwNA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-08T23:26:42Z","updated_at":"2018-01-08T23:26:42Z","author_association":"CONTRIBUTOR","body":"### Error Handling\r\n\r\nThe column writer work introduces a new scan operator mechanism. Part of that mechanism is to standardize error handling. Part of that work is, in turn, to add a a couple new error types to UserError to better categorize errors.\r\n\r\n### Star Column\r\n\r\nOrganized our many references to the \"star column\" to make it more readily available to the new scan framework.\r\n\r\n### Date/Time Utilities\r\n\r\nThe various date/time vectors have very handy methods to convert the vector representation into Joda objects. This PR pulls that code out into a utility class that can be used in other places. This change uncovered a flaw in JDBC: that the existing date/time utilities were not included in the JDBC jar, causing failures. This PR fixes that.\r\n\r\n### Deprecate OptionSet\r\n\r\nIn a previous set of PRs we've been assembling a sub-operator test framework. This PR continues that work by deprecating the prior OptionSet class. (OptionSet was meant to work around limitations in the original OptionManager, but those issues have since been resolved by all the great work that Jyothsna and Tim have done. Since OptionSet now no longer serves a useful purpose, this PR removes it.)\r\n\r\n### Deprecate StatsWriter\r\n\r\nSimilarly, the StatsWriter class added a stats mechanism that can be used in sub-operator tests. Further experience has shown we can make the full OperatorStats work in this context, so StatsWriter is deprecated in this PR.\r\n\r\n### Fix for Close of Sort Operator\r\n\r\nA bit of code was reshuffled to close the operator context in the correct order in the sort operator in both production and unit tests.\r\n\r\n### Swap Containers\r\n\r\nAdded code to swap buffers between two containers. Builds on code added earlier to exchange buffers between two vectors. (Used in scan operator, to be added later.)\r\n\r\n### CSV Column Header Error Handling\r\n\r\nChanged CSV to use UserException to report errors instead of an ad-hoc HeaderError exception.\r\n\r\n### Test Tools\r\n\r\nAdd a number of services to the ClusterFixture family of test classes. The key new feature is the ability to read the results of a multi-batch query as a sequence of RowSet objects so we can use the row set tools to verify results.\r\n\r\n### Union Vector\r\n\r\nThe union vector is a rather odd duck: it works, but is not widely supported in Drill. It stores its \"type\" members in two ways: in an internal map and in member variables. The member variable format makes it hard to treat the types generically. This PR keeps the serialized format (storing vectors in an internal map) but changes the member variable format to use an array of type vectors rather than individual variables. The result is that generic access (for the new Union column writer) is much easier.\r\n\r\n### Materialized Field in Vectors\r\n\r\nVectors provide a MaterializedField to hold their metadata. The original idea seems to be that a MaterializedField is immutable. This worked great for simple scalar types. But, code evolved to change the MaterializedField for maps (to add map members), for Unions (to add union members) and so on.\r\n\r\nFor container types (Map, Repeated Map, Union, List, Repeated List), the \"parent\" MaterializedField holds onto a copy of the child field. But, some parents, when they receive new members, throw away their old MaterializedField and create a new one. The result is that, if we have the structure map(map(a, b)), when we add b to the inner map, the parent ends up pointing to an older version of the child schema, not the updated one.\r\n\r\nThis PR fixes at least some of those issues in the Union vector.\r\n\r\n### JUnit Upgrade\r\n\r\nUpgrades JUnit from 4.11 to 4.12 to make use of a handy annotation that disables timeouts when debugging.\r\n\r\n### Generic Cleanup\r\n\r\nAdded comments, fixed indentation and other minor changes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356129404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356134246","html_url":"https://github.com/apache/drill/pull/1058#issuecomment-356134246","issue_url":"https://api.github.com/repos/apache/drill/issues/1058","id":356134246,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjEzNDI0Ng==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-08T23:52:25Z","updated_at":"2018-01-08T23:52:25Z","author_association":"MEMBER","body":"@paul-rogers Please review","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356134246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356138763","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-356138763","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":356138763,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjEzODc2Mw==","user":{"login":"agirish","id":2224090,"node_id":"MDQ6VXNlcjIyMjQwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/2224090?v=4","gravatar_id":"","url":"https://api.github.com/users/agirish","html_url":"https://github.com/agirish","followers_url":"https://api.github.com/users/agirish/followers","following_url":"https://api.github.com/users/agirish/following{/other_user}","gists_url":"https://api.github.com/users/agirish/gists{/gist_id}","starred_url":"https://api.github.com/users/agirish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agirish/subscriptions","organizations_url":"https://api.github.com/users/agirish/orgs","repos_url":"https://api.github.com/users/agirish/repos","events_url":"https://api.github.com/users/agirish/events{/privacy}","received_events_url":"https://api.github.com/users/agirish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T00:16:52Z","updated_at":"2018-01-09T00:16:52Z","author_association":"MEMBER","body":"+1. I think this is a welcome change for newbies trying out Drill on personal systems. For production use, the current defaults were anyway not always sufficient and had to be updated. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356138763/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356229105","html_url":"https://github.com/apache/drill/pull/1023#issuecomment-356229105","issue_url":"https://api.github.com/repos/apache/drill/issues/1023","id":356229105,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjIyOTEwNQ==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T09:30:46Z","updated_at":"2018-01-09T09:30:46Z","author_association":"CONTRIBUTOR","body":"@paul-rogers For some reason this wan't included in a batch commit. After rebasing onto master I noticed some tests were failing sporadically so I've included a 1 line fix for DRILL-6003 in the last commit. Can you please take a look and +1 again? Hopefully the change will go in this time.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356229105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356249882","html_url":"https://github.com/apache/drill/pull/1049#issuecomment-356249882","issue_url":"https://api.github.com/repos/apache/drill/issues/1049","id":356249882,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjI0OTg4Mg==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T10:51:59Z","updated_at":"2018-01-09T10:51:59Z","author_association":"MEMBER","body":"@parthchandra, thanks for the pull request! LGTM, +1.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356249882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356271374","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-356271374","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":356271374,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjI3MTM3NA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T12:32:40Z","updated_at":"2018-01-09T12:32:40Z","author_association":"MEMBER","body":"@chunhui-shi, I have made additional fixes in new commits (commits after DRILL-3993: Changes after code review. 3120762). Could you please take a look? \r\nAlso, I have created pull request on incubator-calcite: https://github.com/mapr/incubator-calcite/pull/16","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356271374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356387729","html_url":"https://github.com/apache/drill/pull/814#issuecomment-356387729","issue_url":"https://api.github.com/repos/apache/drill/issues/814","id":356387729,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjM4NzcyOQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T19:26:02Z","updated_at":"2018-01-09T19:32:45Z","author_association":"CONTRIBUTOR","body":"@ebuildy is there a JIRA associated with this PR?\r\n@arina-ielchiieva this looks to be checked in.\r\nhttps://github.com/apache/drill/blob/gh-pages/_docs/install/060-starting-the-web-ui.md\r\nCan you close this?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356387729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356388443","html_url":"https://github.com/apache/drill/pull/814#issuecomment-356388443","issue_url":"https://api.github.com/repos/apache/drill/issues/814","id":356388443,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjM4ODQ0Mw==","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T19:28:38Z","updated_at":"2018-01-09T19:28:38Z","author_association":"NONE","body":"Hello, nop, no JIRA ticket associated.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356388443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356394847","html_url":"https://github.com/apache/drill/pull/458#issuecomment-356394847","issue_url":"https://api.github.com/repos/apache/drill/issues/458","id":356394847,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjM5NDg0Nw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T19:52:22Z","updated_at":"2018-01-09T19:52:22Z","author_association":"CONTRIBUTOR","body":"@jcmcote Did you get a chance to follow up on @jinfengni 's comment on this PR?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356394847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356396160","html_url":"https://github.com/apache/drill/pull/1060#issuecomment-356396160","issue_url":"https://api.github.com/repos/apache/drill/issues/1060","id":356396160,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjM5NjE2MA==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T19:57:01Z","updated_at":"2018-01-09T19:57:01Z","author_association":"CONTRIBUTOR","body":"Before I reply to the provided comments I want first to thank both Parth and Paul for taking time to review this Pull Request.\r\n@parthchandra Regarding the High Level Comments\r\n\r\n- FS Access Manager\r\nThe attached document listed several possible improvements in terms of CPU, Partitioning (changes to the query plan), and IO layer. I didn't want to club all the changes in a single pull request; instead I started with the Pull Request with the highest priority (in terms of performance improvement) which is CPU related enhancements.\r\n\r\n- Drill Memory Package\r\nI understand where you're coming from; I have analyzed this task and came up with a solution which I felt was the cleanest. Let me take you through my thinking process and the alternative solutions that I have considered:\r\na) Why did I use this low level APIs?\r\nThe Bulk Parquet reader uses the Drill Buffer APIs to copy data chunks to the CPU cache; this means that memory sanity checks are always performed. During code profiling I have noticed the Hotspot was using too many instructions (byte based assembly was used); I have researched ways to improve this and found some Hadoop and Compression java code which utilized 64bit access instructions when manipulating byte arrays (e.g., [Snappy](https://github.com/airlift/aircompressor/blob/master/src/main/java/io/airlift/compress/snappy/SnappyRawCompressor.java)).  This makes a huge difference\r\n\r\nb) Safety\r\nAs indicated previously, native data is always accessed through the Drill Buffer APIs (that is, accessed data is sanitized). During bulk processing, the new utility has additional checks which are triggered when assertions are enabled. This means all test-suite and QA tests (which run with assertions On) will be able to catch any faulty memory access; note also the checks are simpler since they only pertain to byte arrays boundary checks.\r\n\r\nc) Abstraction\r\nI agree that the Drill code base should follow a common code path when accessing native memory (minimize chances of introducing bugs), though I felt the Drill Memory package was the main abstraction since it was centralized and thus easier to test.\r\n\r\nd) Alternatives\r\nI have considered using the Netty io.netty.util.internal.PlatformDependent0 to access the Java intrinsics APIs though this class has a package scope and the wrapper public class io.netty.util.internal.PlatformDependent doesn't expose this low level functionality. Thus the work around would have been to create MemoryUtils class under the io.netty.util.internal package. I didn't think this was a cleaner approach than just using Java's intrinsic APIs directly (note also that Java9 will expose such intrinsics under a public JDK package instead of the sun.misc. Please let me know if you rather prefer the io.netty.util.internal route instead.\r\n\r\n- Changes to the Vector Code\r\nI had few discussions with Paul about the need to reconcile DRILL-5657; the agreement was to proceed with the current implementation and then apply refactoring (future releases) as my changes are backward compatible (new public APIs added). \r\n\r\n- Arrow Integration\r\nI will create a task to analyze the impact of the Arrow Integration on the Parquet Reader.\r\n\r\n- UserBitShared.proto\r\nThis class was updated to deal with the implicit columns optimization. I have added two fields to the NullableVarChar class to capture the logical number of rows and the fact this feature was active. This allowed me to use different Accessor and Mutator implementation. You and I had a discussion about this and the agreement was to:\r\na) The new optimization is configurable (current default is off); though we might change the default at some point\r\nb) Detect C++ based clients and turn of this optimization (that is, the implicit columns enhancements); I didn't implement this task yet as I forgot the name of the property that you have indicated (this should be quite fast to implement though)\r\n\r\n- Testing\r\nYes, QA helped me to run the test-suite with the two new options enabled. The new changes didn't modify any of the encoding/compression logic but I'll be happy to add any test(s) you deem necessary.. \r\n\r\n- Code Style\r\nThank you for the pointers; I'll stick to your feedback in future changes to ease the review process.\r\n\r\n    \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356396160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356410458","html_url":"https://github.com/apache/drill/pull/440#issuecomment-356410458","issue_url":"https://api.github.com/repos/apache/drill/issues/440","id":356410458,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQxMDQ1OA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T20:52:40Z","updated_at":"2018-01-09T20:52:40Z","author_association":"CONTRIBUTOR","body":"@hamdanuk this commit has too many commits, which makes the PR nearly impossible to review. Would you like to rebase your work on the latest Drill 1.12.0 and try again?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356410458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356413987","html_url":"https://github.com/apache/drill/pull/652#issuecomment-356413987","issue_url":"https://api.github.com/repos/apache/drill/issues/652","id":356413987,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQxMzk4Nw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T21:06:05Z","updated_at":"2018-01-09T21:06:25Z","author_association":"CONTRIBUTOR","body":"@ppadma can you rebase this with the current master, and include the workaround? It does not make sense to hold up this commit for so long if a workaround for the Windows platform is sufficient.\r\nMarked the JIRA for target release 1.13.0","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356413987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356444133","html_url":"https://github.com/apache/drill/pull/456#issuecomment-356444133","issue_url":"https://api.github.com/repos/apache/drill/issues/456","id":356444133,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQ0NDEzMw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T23:08:16Z","updated_at":"2018-01-09T23:08:58Z","author_association":"CONTRIBUTOR","body":"@StevenMPhillips Is anyone reviewing this?\r\nCan you set the original JIRA to be in a Reviewable state?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356444133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356444510","html_url":"https://github.com/apache/drill/pull/367#issuecomment-356444510","issue_url":"https://api.github.com/repos/apache/drill/issues/367","id":356444510,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQ0NDUxMA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T23:10:09Z","updated_at":"2018-01-09T23:10:09Z","author_association":"CONTRIBUTOR","body":"@nagix Did you get a chance to rebase this commit?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356444510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356451204","html_url":"https://github.com/apache/drill/pull/1001#issuecomment-356451204","issue_url":"https://api.github.com/repos/apache/drill/issues/1001","id":356451204,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQ1MTIwNA==","user":{"login":"priteshm","id":1015719,"node_id":"MDQ6VXNlcjEwMTU3MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1015719?v=4","gravatar_id":"","url":"https://api.github.com/users/priteshm","html_url":"https://github.com/priteshm","followers_url":"https://api.github.com/users/priteshm/followers","following_url":"https://api.github.com/users/priteshm/following{/other_user}","gists_url":"https://api.github.com/users/priteshm/gists{/gist_id}","starred_url":"https://api.github.com/users/priteshm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priteshm/subscriptions","organizations_url":"https://api.github.com/users/priteshm/orgs","repos_url":"https://api.github.com/users/priteshm/repos","events_url":"https://api.github.com/users/priteshm/events{/privacy}","received_events_url":"https://api.github.com/users/priteshm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T23:44:32Z","updated_at":"2018-01-09T23:44:32Z","author_association":"NONE","body":"@sachouche can you update this PR?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356451204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356453518","html_url":"https://github.com/apache/drill/pull/1087#issuecomment-356453518","issue_url":"https://api.github.com/repos/apache/drill/issues/1087","id":356453518,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjQ1MzUxOA==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-09T23:57:34Z","updated_at":"2018-01-09T23:57:34Z","author_association":"CONTRIBUTOR","body":"@parthchandra can you please review this fix?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356453518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356586729","html_url":"https://github.com/apache/drill/pull/1087#issuecomment-356586729","issue_url":"https://api.github.com/repos/apache/drill/issues/1087","id":356586729,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjU4NjcyOQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T12:20:18Z","updated_at":"2018-01-10T12:20:18Z","author_association":"MEMBER","body":"@sachouche do you have Jira for this fix (if not please create it)? Could you please include Jira number in PR and description and PR commit message (it's a Drill standard) [1, 2, 3].\r\n\r\n[1] https://drill.apache.org/docs/apache-drill-contribution-guidelines/\r\n[2] https://github.com/apache/drill/commits/master\r\n[3] https://github.com/apache/drill/pull/1065","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356586729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356593443","html_url":"https://github.com/apache/drill/pull/1074#issuecomment-356593443","issue_url":"https://api.github.com/repos/apache/drill/issues/1074","id":356593443,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjU5MzQ0Mw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T12:51:19Z","updated_at":"2018-01-10T12:51:19Z","author_association":"MEMBER","body":"@prasadns14 please resolve the conflicts.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356593443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356663122","html_url":"https://github.com/apache/drill/pull/1087#issuecomment-356663122","issue_url":"https://api.github.com/repos/apache/drill/issues/1087","id":356663122,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjY2MzEyMg==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T16:49:38Z","updated_at":"2018-01-10T16:49:38Z","author_association":"CONTRIBUTOR","body":"Thank you Arina for catching this; I created the commit for QA before vacation so that they could verify the fix. At that time, I didn't have an Apache JIRA. I have now updated the comment to reflect the JIRA id DRILL-6079 which is also the name of this remote branch.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356663122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356668543","html_url":"https://github.com/apache/drill/pull/1001#issuecomment-356668543","issue_url":"https://api.github.com/repos/apache/drill/issues/1001","id":356668543,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjY2ODU0Mw==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T17:06:44Z","updated_at":"2018-01-10T17:06:44Z","author_association":"CONTRIBUTOR","body":"Created another pull request #1072to merge my changes with the one done with Padma's.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356668543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356699641","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-356699641","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":356699641,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjY5OTY0MQ==","user":{"login":"priteshm","id":1015719,"node_id":"MDQ6VXNlcjEwMTU3MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1015719?v=4","gravatar_id":"","url":"https://api.github.com/users/priteshm","html_url":"https://github.com/priteshm","followers_url":"https://api.github.com/users/priteshm/followers","following_url":"https://api.github.com/users/priteshm/following{/other_user}","gists_url":"https://api.github.com/users/priteshm/gists{/gist_id}","starred_url":"https://api.github.com/users/priteshm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priteshm/subscriptions","organizations_url":"https://api.github.com/users/priteshm/orgs","repos_url":"https://api.github.com/users/priteshm/repos","events_url":"https://api.github.com/users/priteshm/events{/privacy}","received_events_url":"https://api.github.com/users/priteshm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T18:51:35Z","updated_at":"2018-01-10T18:51:35Z","author_association":"NONE","body":"@paul-rogers, @parthchandra  can you review/ comment on this change?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356699641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356743678","html_url":"https://github.com/apache/drill/pull/1069#issuecomment-356743678","issue_url":"https://api.github.com/repos/apache/drill/issues/1069","id":356743678,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Njc0MzY3OA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T21:33:11Z","updated_at":"2018-01-10T21:33:11Z","author_association":"MEMBER","body":"@MitchelLabonte @arina-ielchiieva I don't think that Drill needs that many threads/acceptors to handle HTTP(s) requests as it is not a real web (REST API) server. For proper resource utilization, it will be better to limit the number of acceptors to a small value (let's say 2 or 4 by default) instead of the current default that uses a number of available processors and can be huge on machines with lots of cores (32 or more). @paul-rogers  What is your take on this?  ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356743678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356747833","html_url":"https://github.com/apache/drill/pull/1074#issuecomment-356747833","issue_url":"https://api.github.com/repos/apache/drill/issues/1074","id":356747833,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Njc0NzgzMw==","user":{"login":"prasadns14","id":4907022,"node_id":"MDQ6VXNlcjQ5MDcwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/4907022?v=4","gravatar_id":"","url":"https://api.github.com/users/prasadns14","html_url":"https://github.com/prasadns14","followers_url":"https://api.github.com/users/prasadns14/followers","following_url":"https://api.github.com/users/prasadns14/following{/other_user}","gists_url":"https://api.github.com/users/prasadns14/gists{/gist_id}","starred_url":"https://api.github.com/users/prasadns14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prasadns14/subscriptions","organizations_url":"https://api.github.com/users/prasadns14/orgs","repos_url":"https://api.github.com/users/prasadns14/repos","events_url":"https://api.github.com/users/prasadns14/events{/privacy}","received_events_url":"https://api.github.com/users/prasadns14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-10T21:48:25Z","updated_at":"2018-01-10T21:48:25Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, resolved merge conflicts","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356747833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356780746","html_url":"https://github.com/apache/drill/pull/1069#issuecomment-356780746","issue_url":"https://api.github.com/repos/apache/drill/issues/1069","id":356780746,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Njc4MDc0Ng==","user":{"login":"MitchelLabonte","id":3504695,"node_id":"MDQ6VXNlcjM1MDQ2OTU=","avatar_url":"https://avatars.githubusercontent.com/u/3504695?v=4","gravatar_id":"","url":"https://api.github.com/users/MitchelLabonte","html_url":"https://github.com/MitchelLabonte","followers_url":"https://api.github.com/users/MitchelLabonte/followers","following_url":"https://api.github.com/users/MitchelLabonte/following{/other_user}","gists_url":"https://api.github.com/users/MitchelLabonte/gists{/gist_id}","starred_url":"https://api.github.com/users/MitchelLabonte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MitchelLabonte/subscriptions","organizations_url":"https://api.github.com/users/MitchelLabonte/orgs","repos_url":"https://api.github.com/users/MitchelLabonte/repos","events_url":"https://api.github.com/users/MitchelLabonte/events{/privacy}","received_events_url":"https://api.github.com/users/MitchelLabonte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-11T00:09:13Z","updated_at":"2018-01-11T00:09:13Z","author_association":"CONTRIBUTOR","body":"@vrozov the Web server definitely doesn't need this much, but Drill won't launch on a machine with more than 200 cores and throw an exception:\r\nException in thread \"main\" org.apache.drill.exec.exception.DrillStartupException: Failure\r\nduring initial startup of Drillbit:\r\n> at org.apache.drill.exec.server.Drillbit.start(Drillbit.java:313)\r\n> at org.apache.drill.exec.server.Drillbit.start(Drillbit.java:289)\r\n> at org.apache.drill.exec.server.Drillbit.start(Drillbit.java:285)\r\n> Caused by: java.lang.IllegalStateException: Insufficient max threads in ThreadPool: max=200\r\n< needed=206\r\n> at org.eclipse.jetty.server.Server.doStart(Server.java:321)\r\n> at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\r\n> at org.eclipse.drill.exec.server.rest.WebServer.start(WebServer.java:197)\r\n> at org.eclipse.drill.exec.server.Drillbit.run(Drillbit.java:140)\r\n> at org.eclipse.drill.exec.server.Drillbit.start(Drillbit.java:309)\r\n> ... 2 more\r\n\r\nThe configuration is there to have an option to not hit this exception on startup on a machine with more than 200 cores. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356780746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356785364","html_url":"https://github.com/apache/drill/pull/1069#issuecomment-356785364","issue_url":"https://api.github.com/repos/apache/drill/issues/1069","id":356785364,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Njc4NTM2NA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-11T00:35:56Z","updated_at":"2018-01-11T00:35:56Z","author_association":"MEMBER","body":"@MitchelLabonte My proposal is to limit the number of acceptors instead of allowing to increase the max number of threads in the connection pool. If the number of acceptors is limited, the number of \"needed\" threads will be limited too and the exception will not be raised.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356785364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356913202","html_url":"https://github.com/apache/drill/pull/1078#issuecomment-356913202","issue_url":"https://api.github.com/repos/apache/drill/issues/1078","id":356913202,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjkxMzIwMg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-11T11:55:32Z","updated_at":"2018-01-11T11:55:32Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356913202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/356991780","html_url":"https://github.com/apache/drill/pull/1074#issuecomment-356991780","issue_url":"https://api.github.com/repos/apache/drill/issues/1074","id":356991780,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Njk5MTc4MA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-11T16:58:24Z","updated_at":"2018-01-11T16:58:24Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/356991780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357080549","html_url":"https://github.com/apache/drill/pull/1073#issuecomment-357080549","issue_url":"https://api.github.com/repos/apache/drill/issues/1073","id":357080549,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzA4MDU0OQ==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-11T22:20:45Z","updated_at":"2018-01-11T22:20:45Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Added the comment. Please take a look and let me know if you'd like any other changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357080549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357109912","html_url":"https://github.com/apache/drill/pull/1023#issuecomment-357109912","issue_url":"https://api.github.com/repos/apache/drill/issues/1023","id":357109912,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzEwOTkxMg==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T00:48:53Z","updated_at":"2018-01-12T00:48:53Z","author_association":"CONTRIBUTOR","body":"Travis build is flakey. Rerunning build.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357109912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357254942","html_url":"https://github.com/apache/drill/pull/1060#issuecomment-357254942","issue_url":"https://api.github.com/repos/apache/drill/issues/1060","id":357254942,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzI1NDk0Mg==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T14:39:12Z","updated_at":"2018-01-12T14:42:13Z","author_association":"CONTRIBUTOR","body":"@paul-rogers with regard to the design aspects that you brought up:\r\n** Corrections about the proposed Design **\r\nYour analysis somehow assumes the Vector is the one driving the loading operation. This is not the case, a) it is the reader which invokes the bulk save API b) the Vector save method runs a loop requesting the rest of the data. The reader can any time stop the loading phase; currently the reader uses the batch size to make this decision. The plan is to enhance this logic by having a feedback from the Vector save method about memory usage (e.g., save current row set with the condition the memory usage doesn't get beyond X bytes). I believe I have raised this design decision early on and the agreement was to implement the memory batch restrictions in a next Drill release.\r\n\r\n** Agile Development **\r\nThrough the years I came to appreciate the value of agile development. One needs to prioritize design activities; it is completely valid to start with a design (which is not guaranteed to be perfect) and then refine it overtime as long as the underlying implementation doesn't spill to other modules (encapsulation). This has the merit of showcasing incremental improvements and allowing developers to get new insight as they have a better understanding.\r\n   ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357254942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357324216","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-357324216","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":357324216,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzMyNDIxNg==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T18:58:41Z","updated_at":"2018-01-12T18:58:41Z","author_association":"CONTRIBUTOR","body":"The settings for running the unit tests are (from the pom file :\r\n              -Xms512m -Xmx4096m \r\n              -XX:MaxPermSize=512M -XX:MaxDirectMemorySize=4096M\r\n              -XX:+CMSClassUnloadingEnabled -ea\r\n\r\nAt the very least, the default settings for Drill and the unit tests should match.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357324216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357336587","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-357336587","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":357336587,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzMzNjU4Nw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T19:48:27Z","updated_at":"2018-01-12T19:48:27Z","author_association":"CONTRIBUTOR","body":"I think folks running unit tests can continue with the existing limits of 4GB heap+4GB Direct. The idea is to get Drill up and running for minimal use cases, and you are expected to bump up memory to higher limits if queries get OOM errors. Unit tests, if carrying any tests that require much more memory, would qualify under this.\r\nI've launched a [fork](https://github.com/kkhatua/drill/commits/LowerMemUnitTest) of this branch with reduced memory settings for the unit tests as well and letting TravisCI test it out:\r\nhttps://travis-ci.org/kkhatua/drill/builds/328250155\r\nIf it passes, we can either reduce those settings in the POM files as well, or leave it intact to ensure developers doing unit tests are able to run the tests in a reasonable amount of time.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357336587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357385808","html_url":"https://github.com/apache/drill/pull/1084#issuecomment-357385808","issue_url":"https://api.github.com/repos/apache/drill/issues/1084","id":357385808,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzM4NTgwOA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T23:48:48Z","updated_at":"2018-01-12T23:48:48Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva updated the changes based on your review. Please have a look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357385808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357387061","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-357387061","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":357387061,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzM4NzA2MQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-12T23:56:05Z","updated_at":"2018-01-12T23:56:05Z","author_association":"CONTRIBUTOR","body":"Ok. Looks like [DRILL-5926](https://issues.apache.org/jira/browse/DRILL-5926) (committed into Apache master) explicitly has a need for bumping up the memory to 4GB for heap alone. I guess we'll need to figure out something else to manage this.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357387061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357602533","html_url":"https://github.com/apache/drill/pull/1092#issuecomment-357602533","issue_url":"https://api.github.com/repos/apache/drill/issues/1092","id":357602533,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzYwMjUzMw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-15T07:31:45Z","updated_at":"2018-01-15T07:31:45Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva - Can you please help to review this PR ?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357602533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/357822984","html_url":"https://github.com/apache/drill/pull/1082#issuecomment-357822984","issue_url":"https://api.github.com/repos/apache/drill/issues/1082","id":357822984,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzgyMjk4NA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T00:56:55Z","updated_at":"2018-01-16T00:57:33Z","author_association":"CONTRIBUTOR","body":"Done the following changes:\r\n1. The file names have been changed to the following:\r\n* `./bin/auto-setup.sh`\r\n* `./conf/distrib-setup.sh`\r\n* `./conf/drill-setup.sh`\r\n`auto-setup.sh` and `distrib-setup.sh` files are mutually exclusive in execution.\r\n\ti. `distrib-setup.sh` -> if it has executable content. Else `auto-setup.sh`\r\n\t\tThe assumption here is that the distribution might have a different mechanism for doing things (along lines of specifying a preferred setup service).\r\n\tii. `drill-setup.sh` --> This is any additional setup activities beyond what the distribution offers. I don't think this should be mutually exclusive to the previous step, but should be an add on.\r\n\r\nA distribution of Drill should reimplement the setup task done by `auto-setup.sh` , if it wants to do the same separately.\r\n\r\n2. For managing memory automatically, the `auto-setup.sh` script is looking for the `DRILLBIT_MAX_PROC_MEM` variable.\r\nIf this is not set (which is the case by default), the existing procedure for inferring memory parameters will be followed.\r\n\r\n3. If the `DRILLBIT_MAX_PROC_MEM` variable is set, the logic defined within the `auto-setup.sh` script is executed to assign and validate that the total memory allocation of Heap, Direct and CodeCache is within that value.\r\n\r\n4. The JIRA and the PR has been updated with the details of the feature.\r\n\r\nUpdate to the Apache Drill documentation will follow along with the release notes as well.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/357822984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358033111","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-358033111","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":358033111,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODAzMzExMQ==","user":{"login":"chunhui-shi","id":9878787,"node_id":"MDQ6VXNlcjk4Nzg3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/9878787?v=4","gravatar_id":"","url":"https://api.github.com/users/chunhui-shi","html_url":"https://github.com/chunhui-shi","followers_url":"https://api.github.com/users/chunhui-shi/followers","following_url":"https://api.github.com/users/chunhui-shi/following{/other_user}","gists_url":"https://api.github.com/users/chunhui-shi/gists{/gist_id}","starred_url":"https://api.github.com/users/chunhui-shi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunhui-shi/subscriptions","organizations_url":"https://api.github.com/users/chunhui-shi/orgs","repos_url":"https://api.github.com/users/chunhui-shi/repos","events_url":"https://api.github.com/users/chunhui-shi/events{/privacy}","received_events_url":"https://api.github.com/users/chunhui-shi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T17:09:21Z","updated_at":"2018-01-16T17:15:20Z","author_association":"CONTRIBUTOR","body":"+1. Thank you for addressing the comments.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358033111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358043758","html_url":"https://github.com/apache/drill/pull/1091#issuecomment-358043758","issue_url":"https://api.github.com/repos/apache/drill/issues/1091","id":358043758,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODA0Mzc1OA==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T17:41:20Z","updated_at":"2018-01-16T17:41:20Z","author_association":"CONTRIBUTOR","body":"@paul-rogers  Paul, can you please review this PR ? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358043758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358129754","html_url":"https://github.com/apache/drill/pull/1059#issuecomment-358129754","issue_url":"https://api.github.com/repos/apache/drill/issues/1059","id":358129754,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEyOTc1NA==","user":{"login":"HanumathRao","id":5264087,"node_id":"MDQ6VXNlcjUyNjQwODc=","avatar_url":"https://avatars.githubusercontent.com/u/5264087?v=4","gravatar_id":"","url":"https://api.github.com/users/HanumathRao","html_url":"https://github.com/HanumathRao","followers_url":"https://api.github.com/users/HanumathRao/followers","following_url":"https://api.github.com/users/HanumathRao/following{/other_user}","gists_url":"https://api.github.com/users/HanumathRao/gists{/gist_id}","starred_url":"https://api.github.com/users/HanumathRao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HanumathRao/subscriptions","organizations_url":"https://api.github.com/users/HanumathRao/orgs","repos_url":"https://api.github.com/users/HanumathRao/repos","events_url":"https://api.github.com/users/HanumathRao/events{/privacy}","received_events_url":"https://api.github.com/users/HanumathRao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:30:31Z","updated_at":"2018-01-16T22:30:31Z","author_association":"CONTRIBUTOR","body":"@vdiravka  Thank you for the review comments.\r\n\r\nI have done the needed changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358129754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358151876","html_url":"https://github.com/apache/drill/pull/1057#issuecomment-358151876","issue_url":"https://api.github.com/repos/apache/drill/issues/1057","id":358151876,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE1MTg3Ng==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:17:08Z","updated_at":"2018-01-17T00:17:08Z","author_association":"CONTRIBUTOR","body":"Addressed review comments and rebased.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358151876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358377940","html_url":"https://github.com/apache/drill/pull/1093#issuecomment-358377940","issue_url":"https://api.github.com/repos/apache/drill/issues/1093","id":358377940,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODM3Nzk0MA==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T17:23:12Z","updated_at":"2018-01-17T17:23:12Z","author_association":"NONE","body":"+1 .  It would be good to add a unit test using the example in the JIRA. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358377940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358460494","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-358460494","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":358460494,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ2MDQ5NA==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T21:54:14Z","updated_at":"2018-01-17T21:54:14Z","author_association":"NONE","body":"@vvysotskyi could you pls separate out the HashAggregate OOM related change from this PR and file a separate JIRA for it since it is unrelated to the calcite rebase per-se.  Lumping them together causes confusion.   Thanks. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358460494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358460964","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-358460964","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":358460964,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ2MDk2NA==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T21:55:42Z","updated_at":"2018-01-17T21:55:42Z","author_association":"NONE","body":"Other than one comment above, rest LGTM.  +1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358460964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358478872","html_url":"https://github.com/apache/drill/pull/1095#issuecomment-358478872","issue_url":"https://api.github.com/repos/apache/drill/issues/1095","id":358478872,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ3ODg3Mg==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T23:02:05Z","updated_at":"2018-01-17T23:02:05Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358478872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358502523","html_url":"https://github.com/apache/drill/pull/1090#issuecomment-358502523","issue_url":"https://api.github.com/repos/apache/drill/issues/1090","id":358502523,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUwMjUyMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T01:02:25Z","updated_at":"2018-01-18T01:02:25Z","author_association":"CONTRIBUTOR","body":"Pushed a new commit that fixes an indexing error. Also removes the \"unsafe\" methods in favor of the \"set\" methods in DrillBuf as Vlad requested.\r\n\r\n@vrozov, please take another look. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358502523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358506633","html_url":"https://github.com/apache/drill/pull/1095#issuecomment-358506633","issue_url":"https://api.github.com/repos/apache/drill/issues/1095","id":358506633,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUwNjYzMw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T01:25:03Z","updated_at":"2018-01-18T01:25:03Z","author_association":"CONTRIBUTOR","body":"Note the test failure on Travis is the infamous Sort operator test failure, which is unrelated to this change:\r\n\r\n```\r\nFailed tests: \r\n  TestSortImpl.testLargeBatch:498->runJumboBatchTest:471->runLargeSortTest:451 Value of 1:0 expected:<0> but was:<1>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358506633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358568655","html_url":"https://github.com/apache/drill/pull/1093#issuecomment-358568655","issue_url":"https://api.github.com/repos/apache/drill/issues/1093","id":358568655,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU2ODY1NQ==","user":{"login":"gparai","id":19275160,"node_id":"MDQ6VXNlcjE5Mjc1MTYw","avatar_url":"https://avatars.githubusercontent.com/u/19275160?v=4","gravatar_id":"","url":"https://api.github.com/users/gparai","html_url":"https://github.com/gparai","followers_url":"https://api.github.com/users/gparai/followers","following_url":"https://api.github.com/users/gparai/following{/other_user}","gists_url":"https://api.github.com/users/gparai/gists{/gist_id}","starred_url":"https://api.github.com/users/gparai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gparai/subscriptions","organizations_url":"https://api.github.com/users/gparai/orgs","repos_url":"https://api.github.com/users/gparai/repos","events_url":"https://api.github.com/users/gparai/events{/privacy}","received_events_url":"https://api.github.com/users/gparai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T08:06:30Z","updated_at":"2018-01-18T08:06:30Z","author_association":"NONE","body":"@amansinha100 I have addressed your comments.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358568655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358581161","html_url":"https://github.com/apache/drill/pull/1094#issuecomment-358581161","issue_url":"https://api.github.com/repos/apache/drill/issues/1094","id":358581161,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU4MTE2MQ==","user":{"login":"milindt","id":35451050,"node_id":"MDQ6VXNlcjM1NDUxMDUw","avatar_url":"https://avatars.githubusercontent.com/u/35451050?v=4","gravatar_id":"","url":"https://api.github.com/users/milindt","html_url":"https://github.com/milindt","followers_url":"https://api.github.com/users/milindt/followers","following_url":"https://api.github.com/users/milindt/following{/other_user}","gists_url":"https://api.github.com/users/milindt/gists{/gist_id}","starred_url":"https://api.github.com/users/milindt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milindt/subscriptions","organizations_url":"https://api.github.com/users/milindt/orgs","repos_url":"https://api.github.com/users/milindt/repos","events_url":"https://api.github.com/users/milindt/events{/privacy}","received_events_url":"https://api.github.com/users/milindt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T09:01:04Z","updated_at":"2018-01-18T09:01:04Z","author_association":"CONTRIBUTOR","body":"Details in [DRILL-6090](https://issues.apache.org/jira/browse/DRILL-6090)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358581161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358582301","html_url":"https://github.com/apache/drill/pull/1094#issuecomment-358582301","issue_url":"https://api.github.com/repos/apache/drill/issues/1094","id":358582301,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU4MjMwMQ==","user":{"login":"milindt","id":35451050,"node_id":"MDQ6VXNlcjM1NDUxMDUw","avatar_url":"https://avatars.githubusercontent.com/u/35451050?v=4","gravatar_id":"","url":"https://api.github.com/users/milindt","html_url":"https://github.com/milindt","followers_url":"https://api.github.com/users/milindt/followers","following_url":"https://api.github.com/users/milindt/following{/other_user}","gists_url":"https://api.github.com/users/milindt/gists{/gist_id}","starred_url":"https://api.github.com/users/milindt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milindt/subscriptions","organizations_url":"https://api.github.com/users/milindt/orgs","repos_url":"https://api.github.com/users/milindt/repos","events_url":"https://api.github.com/users/milindt/events{/privacy}","received_events_url":"https://api.github.com/users/milindt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T09:05:44Z","updated_at":"2018-01-18T09:05:44Z","author_association":"CONTRIBUTOR","body":"@paul-rogers can you please review this fix?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358582301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358583280","html_url":"https://github.com/apache/drill/pull/1094#issuecomment-358583280","issue_url":"https://api.github.com/repos/apache/drill/issues/1094","id":358583280,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU4MzI4MA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T09:09:43Z","updated_at":"2018-01-18T09:10:09Z","author_association":"MEMBER","body":"@milindt release 1.12.0 is already out. Regarding this fix, once you address code review comments it will be added in the upcoming 1.13.0.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358583280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358611505","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-358611505","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":358611505,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODYxMTUwNQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T10:55:37Z","updated_at":"2018-01-18T10:55:37Z","author_association":"MEMBER","body":"@amansinha100, regarding HashAggregate OOM related change, it was done in the scope of this pull request since with new Calcite a physical plan for the query was changed to the correct one but it caused an infinite loop in HashAgg operator. Therefore I made these changes in order to prevent this infinite loop for the queries that previously worked. \r\nI still think that it is better to keep this change in this PR.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358611505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358632269","html_url":"https://github.com/apache/drill/pull/1095#issuecomment-358632269","issue_url":"https://api.github.com/repos/apache/drill/issues/1095","id":358632269,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODYzMjI2OQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T12:28:48Z","updated_at":"2018-01-18T12:28:48Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358632269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358692485","html_url":"https://github.com/apache/drill/pull/1066#issuecomment-358692485","issue_url":"https://api.github.com/repos/apache/drill/issues/1066","id":358692485,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODY5MjQ4NQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T16:02:06Z","updated_at":"2018-01-18T16:02:06Z","author_association":"MEMBER","body":"FYI: changes in pom files:\r\nWe observed issue with Avatica similar to the issue described in https://issues.apache.org/jira/browse/CALCITE-1694. Therefore we had to make changes in our pom files similar to the changes, made in CALCITE-1694 to fix NoClassDefFoundError.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358692485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358756896","html_url":"https://github.com/apache/drill/pull/570#issuecomment-358756896","issue_url":"https://api.github.com/repos/apache/drill/issues/570","id":358756896,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODc1Njg5Ng==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T19:33:28Z","updated_at":"2018-01-18T19:33:28Z","author_association":"CONTRIBUTOR","body":"The new VARDECIMAL one-size-fits-all decimal type, which this PR implements, will now be incorporated into the following new JIRA with additional changes and fixes for Drill 1.13:\r\nhttps://issues.apache.org/jira/browse/DRILL-6094\r\n\r\nSo, development on this PR will now cease.  But VARDECIMAL lives on....\r\nDave Oshinsky","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358756896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358822459","html_url":"https://github.com/apache/drill/pull/1072#issuecomment-358822459","issue_url":"https://api.github.com/repos/apache/drill/issues/1072","id":358822459,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODgyMjQ1OQ==","user":{"login":"priteshm","id":1015719,"node_id":"MDQ6VXNlcjEwMTU3MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1015719?v=4","gravatar_id":"","url":"https://api.github.com/users/priteshm","html_url":"https://github.com/priteshm","followers_url":"https://api.github.com/users/priteshm/followers","following_url":"https://api.github.com/users/priteshm/following{/other_user}","gists_url":"https://api.github.com/users/priteshm/gists{/gist_id}","starred_url":"https://api.github.com/users/priteshm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priteshm/subscriptions","organizations_url":"https://api.github.com/users/priteshm/orgs","repos_url":"https://api.github.com/users/priteshm/repos","events_url":"https://api.github.com/users/priteshm/events{/privacy}","received_events_url":"https://api.github.com/users/priteshm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T00:00:08Z","updated_at":"2018-01-19T00:00:08Z","author_association":"NONE","body":"@paul-rogers Is this ready for commit?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358822459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358861639","html_url":"https://github.com/apache/drill/pull/1092#issuecomment-358861639","issue_url":"https://api.github.com/repos/apache/drill/issues/1092","id":358861639,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODg2MTYzOQ==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T04:09:52Z","updated_at":"2018-01-19T04:09:52Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva - I have rebased the commit's on latest master and made the change as suggested. I have also made the MainLoginPageModel class public since it was causing the issue without that at runtime. Looks like during testing I kept it as public but later while opening the PR I might have changed it to package-private and was seeing issues today again during test.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358861639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358897996","html_url":"https://github.com/apache/drill/pull/1086#issuecomment-358897996","issue_url":"https://api.github.com/repos/apache/drill/issues/1086","id":358897996,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODg5Nzk5Ng==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T08:25:11Z","updated_at":"2018-01-19T08:25:11Z","author_association":"CONTRIBUTOR","body":"The primary objective of the JIRA (and this PR) is to allow Drill to truly start up in a bare-min memory footprint. Most people trying Drill would start experimenting with a LocalFS, before trying on a small distributedFS and then eventually scaling out the number of nodes for the DFS.\r\n\r\nThe challenge has been to figure out what is a reasonably small size for Drill to function without failing. A setting of *5GB* (`1G Heap`+`3G Direct`+`512M CodeCache`) was sufficient for a single node Drill instance to startup and run the TPCH benchmark (single user, via SQLLine) for *scaleFactor=1*; against +CSV-Text+ and uncompressed +Parquet+ formats. Queries that failed were because of HashAgg operator not having sufficient memory. To work around this, as the error message suggested, the HashAgg fallback option was enabled. The heap memory peaked at `800MB`, while the Drillbit process itself maxed out at `2.2GB`.\r\nFunctional tests from the drill-test framework also ran to completion without issue.\r\n\r\nHowever, the unit-tests hang because of insufficient memory. The tests typically need about `3GB Heap` and `4GB Direct` (~8GB total), which is defined separately in the `pom.xml` .\r\n\r\nBased on this, we have the following options, if we wish to move towards reducing the default memory footprint:\r\n\r\n1. Reduce default memory to 5GB, but leave the unit tests memory requirements (8GB at last check) intact.\r\n  We dont expect anyone to run unit tests, so if they did run unit tests with the 8GB setting, it would run to completion if the user has enough memory.\r\n  If a user does provide an excesssively large input to process to Drill, it is expected to correctly report insufficient memory availability and there is good documentation for explaining how to increase memory.\r\n\r\n2. Reduce default memory to match the unit-test memory requirements of 8GB\r\n  This reduces the memory requirement substantially from the 8GB, but is still high for someone trying out Drill in a memory-constrained VM (or sandboxed) environment. This also means that we need to track the minimum memory requirements of the unit-tests and keep in sync with it. Even if the user is not intending to run unit-tests in the limited-memory environment.\r\n\r\n3. Change nothing, but introduce sample files on lines of `$DRILL_HOME/conf/drill-override.conf.example`\r\n  The proposal here would be to have a minimum viable memory footprint config file (e.g. `drill-env.sh.minMem` ), which a first time user of Drill can swap with `./conf/drill-env.sh` when bringing up Drill. The flip side of this is that a Drill trial user would need to have the knowledge of swapping the config file for low-memory usage before starting up Drill.\r\n\r\nThere seems to be consensus that users dont feel intimidated to install Drill and start working with small-to-medium workloads on something as low end as a laptop. Based on that, I'd recommend option # 1, which is this PR. I'll leave this PR open to discussion.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358897996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358901495","html_url":"https://github.com/apache/drill/pull/1091#issuecomment-358901495","issue_url":"https://api.github.com/repos/apache/drill/issues/1091","id":358901495,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODkwMTQ5NQ==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T08:41:39Z","updated_at":"2018-01-19T08:41:39Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Addressed code review comments. Added a new system/session option to configure output batch size. Please review. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358901495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/358902593","html_url":"https://github.com/apache/drill/pull/1092#issuecomment-358902593","issue_url":"https://api.github.com/repos/apache/drill/issues/1092","id":358902593,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODkwMjU5Mw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T08:47:12Z","updated_at":"2018-01-19T08:47:12Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/358902593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]