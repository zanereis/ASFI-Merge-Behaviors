[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683357171","html_url":"https://github.com/apache/iceberg/pull/1334#issuecomment-683357171","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1334","id":683357171,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM1NzE3MQ==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T00:16:21Z","updated_at":"2020-08-30T00:16:21Z","author_association":"CONTRIBUTOR","body":"> Merged. Thanks for fixing this, @kbendick!\r\n\r\nThanks for your patience with me! I hadn't been used to using ByteBuffer directly very often so this was really enlightening for me. Also, glad that it seems like the `ByteBuffers` util class might have made it in because of this. It certainly greatly simplified things for me.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683357171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683358653","html_url":"https://github.com/apache/iceberg/pull/1389#issuecomment-683358653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1389","id":683358653,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM1ODY1Mw==","user":{"login":"jzhuge","id":1883812,"node_id":"MDQ6VXNlcjE4ODM4MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1883812?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhuge","html_url":"https://github.com/jzhuge","followers_url":"https://api.github.com/users/jzhuge/followers","following_url":"https://api.github.com/users/jzhuge/following{/other_user}","gists_url":"https://api.github.com/users/jzhuge/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhuge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhuge/subscriptions","organizations_url":"https://api.github.com/users/jzhuge/orgs","repos_url":"https://api.github.com/users/jzhuge/repos","events_url":"https://api.github.com/users/jzhuge/events{/privacy}","received_events_url":"https://api.github.com/users/jzhuge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T00:32:45Z","updated_at":"2020-08-30T00:32:45Z","author_association":"MEMBER","body":"Agree that passing the clock through `TableOperations` to `SnapshotProducer.apply` does not make sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683358653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683362629","html_url":"https://github.com/apache/iceberg/pull/1326#issuecomment-683362629","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1326","id":683362629,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM2MjYyOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T01:10:55Z","updated_at":"2020-08-30T01:10:55Z","author_association":"CONTRIBUTOR","body":"@cmathiesen, I had a closer look at the date/time and decimal conversion and found that there were a few bugs. I opened https://github.com/ExpediaGroup/iceberg/pull/16 with the fixes for those problems. Could you review that and merge?\r\n\r\nOne major take-away was that it is not safe to call `Timestamp.toLocalDate` for conversion because that conversion is in local time, not UTC. FYI @massdosage, @rdsr, and @guilload.\r\n\r\nThis also hits [HIVE-19726](https://issues.apache.org/jira/browse/HIVE-19726), which erases milliseconds. It was fixed in Hive 2.4.0, but I've added a work-around in the PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683362629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683363120","html_url":"https://github.com/apache/iceberg/pull/1400#issuecomment-683363120","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1400","id":683363120,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM2MzEyMA==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T01:17:54Z","updated_at":"2020-08-30T01:17:54Z","author_association":"CONTRIBUTOR","body":"@rdblue This PR replaces this one https://github.com/apache/iceberg/pull/1333 which I closed due to my overly trampled master branch. ðŸ˜„ ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683363120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683368106","html_url":"https://github.com/apache/iceberg/pull/1227#issuecomment-683368106","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1227","id":683368106,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM2ODEwNg==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T02:34:50Z","updated_at":"2020-08-30T02:34:50Z","author_association":"CONTRIBUTOR","body":"@rdblue @kbendick Sorry for my late response. I am working on it during the weekend","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683368106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683380801","html_url":"https://github.com/apache/iceberg/pull/1394#issuecomment-683380801","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1394","id":683380801,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM4MDgwMQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T06:06:11Z","updated_at":"2020-08-30T06:06:11Z","author_association":"CONTRIBUTOR","body":"> Looks like the current issue is a checkstyle failure:\r\n> \r\n> ```\r\n> > Task :iceberg-hive:checkstyleMain FAILED\r\n> [ant:checkstyle] [ERROR] /home/travis/build/apache/iceberg/hive/src/main/java/org/apache/iceberg/hive/HiveCatalog.java:249: Trailing whitespace is not allowed. [RegexpSinglelineJava]\r\n> [ant:checkstyle] [ERROR] /home/travis/build/apache/iceberg/hive/src/main/java/org/apache/iceberg/hive/HiveCatalog.java:249: Whitespace at end-of-line [RegexpSingleline]\r\n> ```\r\n\r\nYeah, introduced with the new line I put it to retrigger the tests (was so sure about putting in that line, but IntelliJ made fun of me :))\r\n.\r\nThe failure before were these, and only on Java11:\r\n```\r\norg.apache.iceberg.spark.actions.TestExpireSnapshotsAction3 > dataFilesCleanupWithParallelTasks FAILED\r\n    java.lang.AssertionError: FILE_B should be deleted\r\n\r\norg.apache.iceberg.spark.sql.TestCreateTableAsSelect > testUnpartitionedCTAS[1] FAILED\r\n    java.lang.AssertionError: Should have rows matching the source table: number of results should match expected:<12> but was:<15>\r\n        at org.junit.Assert.fail(Assert.java:88)\r\n        at org.junit.Assert.failNotEquals(Assert.java:834)\r\n        at org.junit.Assert.assertEquals(Assert.java:645)\r\n        at org.apache.iceberg.spark.SparkTestBase.assertEquals(SparkTestBase.java:100)\r\n        at org.apache.iceberg.spark.sql.TestCreateTableAsSelect.testUnpartitionedCTAS(TestCreateTableAsSelect.java:70)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683380801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683384784","html_url":"https://github.com/apache/iceberg/pull/1401#issuecomment-683384784","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1401","id":683384784,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM4NDc4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T07:02:04Z","updated_at":"2020-08-30T07:02:04Z","author_association":"CONTRIBUTOR","body":"Thanks for the fix, @dubeme!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683384784/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683469703","html_url":"https://github.com/apache/iceberg/issues/1311#issuecomment-683469703","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1311","id":683469703,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ2OTcwMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T20:57:25Z","updated_at":"2020-08-30T20:57:25Z","author_association":"CONTRIBUTOR","body":"We should add release notes to the releases page on the ASF site: http://iceberg.apache.org/releases/\r\n\r\nLooks like we've been neglecting copying them from the release announcements. I can move some over to that page this week. Thanks for pointing this out.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683469703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683510188","html_url":"https://github.com/apache/iceberg/pull/1348#issuecomment-683510188","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1348","id":683510188,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUxMDE4OA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T01:49:48Z","updated_at":"2020-08-31T01:49:48Z","author_association":"MEMBER","body":"@rdblue Yeah, Thanks for the merging,  let me rebase this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683510188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683516342","html_url":"https://github.com/apache/iceberg/pull/1393#issuecomment-683516342","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1393","id":683516342,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUxNjM0Mg==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T02:21:29Z","updated_at":"2020-08-31T02:21:46Z","author_association":"CONTRIBUTOR","body":"Thanks a lot for your review~ @rdblue and @kbendick  I'll take a look~","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683516342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683745049","html_url":"https://github.com/apache/iceberg/issues/1396#issuecomment-683745049","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1396","id":683745049,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Mzc0NTA0OQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T12:21:40Z","updated_at":"2020-08-31T12:21:40Z","author_association":"COLLABORATOR","body":"So the name mapping is created from a custom schema which converted from custom parquet schema, and some of the field names do not match the data file's field names.  Correct? \r\n\r\nIIUC, we could detect whether data files' field names exist in `typeWithIds`. Does that sound reasonable to you?\r\n\r\n``` java\r\n      for (ColumnChunkMetaData col : rowGroup.getColumns()) {\r\n        if (fileSchema.containsPath(col.getPath().toArray())) {\r\n          PrimitiveType colType = fileSchema.getType(col.getPath().toArray()).asPrimitiveType();\r\n          if (colType.getId() != null) {\r\n            int id = colType.getId().intValue();\r\n            stats.put(id, col.getStatistics());\r\n            valueCounts.put(id, col.getValueCount());\r\n            conversions.put(id, ParquetConversions.converterFromParquet(colType));\r\n          }\r\n        }\r\n      }\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683745049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683839747","html_url":"https://github.com/apache/iceberg/pull/1227#issuecomment-683839747","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1227","id":683839747,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzgzOTc0Nw==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T15:09:36Z","updated_at":"2020-08-31T15:09:36Z","author_association":"CONTRIBUTOR","body":"@kbendick The PR is updated according to your comments:\r\n(1) Replace line break with blank to make it more safe\r\n(2) Add a warning as well as a comment for `excludes`\r\nWould you please take a look at it at your most convenience?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683839747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683951899","html_url":"https://github.com/apache/iceberg/issues/1345#issuecomment-683951899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1345","id":683951899,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Mzk1MTg5OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T18:29:37Z","updated_at":"2020-08-31T18:29:37Z","author_association":"CONTRIBUTOR","body":"Internally, we started assigning a default name mapping when migrating existing tables to Iceberg. I am not sure a name mapping makes sense when we create a fresh Iceberg table. My assumption was that we would need to assign a name mapping in the import/snapshot commands.\r\n\r\nAlso, we ignore Parquet metrics for columns we could not determine ids for in `SparkTableUtil`. Should we do the same for ORC?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/683951899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684136693","html_url":"https://github.com/apache/iceberg/pull/1326#issuecomment-684136693","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1326","id":684136693,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDEzNjY5Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T01:27:55Z","updated_at":"2020-09-01T01:27:55Z","author_association":"CONTRIBUTOR","body":"Thanks @cmathiesen! Merged. And thanks to all the reviewers!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684136693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684144340","html_url":"https://github.com/apache/iceberg/pull/1356#issuecomment-684144340","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1356","id":684144340,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDE0NDM0MA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T01:54:29Z","updated_at":"2020-09-01T01:54:29Z","author_association":"COLLABORATOR","body":"@rdblue , This is for vectorized parquet position reader and also include a follow up for skipping reading footer redundantly. Could you please take a look at your convenience?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684144340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684814404","html_url":"https://github.com/apache/iceberg/pull/1348#issuecomment-684814404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1348","id":684814404,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDgxNDQwNA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T12:25:32Z","updated_at":"2020-09-01T12:25:32Z","author_association":"MEMBER","body":"Ping @rdblue @JingsongLi for reviewing, Thanks. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684814404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684826894","html_url":"https://github.com/apache/iceberg/pull/1267#issuecomment-684826894","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1267","id":684826894,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDgyNjg5NA==","user":{"login":"massdosage","id":29457,"node_id":"MDQ6VXNlcjI5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/29457?v=4","gravatar_id":"","url":"https://api.github.com/users/massdosage","html_url":"https://github.com/massdosage","followers_url":"https://api.github.com/users/massdosage/followers","following_url":"https://api.github.com/users/massdosage/following{/other_user}","gists_url":"https://api.github.com/users/massdosage/gists{/gist_id}","starred_url":"https://api.github.com/users/massdosage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massdosage/subscriptions","organizations_url":"https://api.github.com/users/massdosage/orgs","repos_url":"https://api.github.com/users/massdosage/repos","events_url":"https://api.github.com/users/massdosage/events{/privacy}","received_events_url":"https://api.github.com/users/massdosage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T12:47:26Z","updated_at":"2020-09-01T12:47:26Z","author_association":"CONTRIBUTOR","body":"@rdblue @rdsr I believe your previous comments have now been addressed, could you please take another look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684826894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684834350","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-684834350","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":684834350,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDgzNDM1MA==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T13:00:07Z","updated_at":"2020-09-01T13:00:07Z","author_association":"CONTRIBUTOR","body":"@massdosage, @rdblue: You might be interested in reviewing this.\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684834350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684852718","html_url":"https://github.com/apache/iceberg/issues/1396#issuecomment-684852718","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1396","id":684852718,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg1MjcxOA==","user":{"login":"hk-lrzy","id":14176134,"node_id":"MDQ6VXNlcjE0MTc2MTM0","avatar_url":"https://avatars.githubusercontent.com/u/14176134?v=4","gravatar_id":"","url":"https://api.github.com/users/hk-lrzy","html_url":"https://github.com/hk-lrzy","followers_url":"https://api.github.com/users/hk-lrzy/followers","following_url":"https://api.github.com/users/hk-lrzy/following{/other_user}","gists_url":"https://api.github.com/users/hk-lrzy/gists{/gist_id}","starred_url":"https://api.github.com/users/hk-lrzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hk-lrzy/subscriptions","organizations_url":"https://api.github.com/users/hk-lrzy/orgs","repos_url":"https://api.github.com/users/hk-lrzy/repos","events_url":"https://api.github.com/users/hk-lrzy/events{/privacy}","received_events_url":"https://api.github.com/users/hk-lrzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T13:27:42Z","updated_at":"2020-09-01T13:27:42Z","author_association":"NONE","body":"I see current master branch will use data file's schema replace field name if path not found in nameMapping? \r\n```\r\n  @Override\r\n  public Type primitive(PrimitiveType primitive) {\r\n    MappedField field = nameMapping.find(currentPath());\r\n    return field == null ? primitive : primitive.withId(field.id());\r\n  }\r\n``` \r\nSo i still not aware clearly, could you tell more about detailï¼Ÿ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684852718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684873935","html_url":"https://github.com/apache/iceberg/issues/1396#issuecomment-684873935","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1396","id":684873935,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg3MzkzNQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T13:58:09Z","updated_at":"2020-09-01T13:58:09Z","author_association":"COLLABORATOR","body":"@hk-lrzy , `ApplyNameMapping` is used to assign IDs for data file's schema, so here we return the data file's type with IDs parsed from name mapping.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684873935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684878998","html_url":"https://github.com/apache/iceberg/pull/1390#issuecomment-684878998","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1390","id":684878998,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg3ODk5OA==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T14:04:42Z","updated_at":"2020-09-01T14:04:42Z","author_association":"CONTRIBUTOR","body":"I've changed the approach to point to Java quickstart page as suggested.\r\n\r\n<img width=\"883\" alt=\"Screen Shot 2020-09-01 at 11 01 31 PM\" src=\"https://user-images.githubusercontent.com/1317309/91861084-60720480-eca7-11ea-9bdb-21d4c09d32f0.png\">\r\n<img width=\"865\" alt=\"Screen Shot 2020-09-01 at 11 02 02 PM\" src=\"https://user-images.githubusercontent.com/1317309/91861098-64058b80-eca7-11ea-97b3-a9358f0445f8.png\">\r\n\r\nCould you please take a look again? Thanks in advance!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684878998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684879376","html_url":"https://github.com/apache/iceberg/pull/1408#issuecomment-684879376","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1408","id":684879376,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg3OTM3Ng==","user":{"login":"massdosage","id":29457,"node_id":"MDQ6VXNlcjI5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/29457?v=4","gravatar_id":"","url":"https://api.github.com/users/massdosage","html_url":"https://github.com/massdosage","followers_url":"https://api.github.com/users/massdosage/followers","following_url":"https://api.github.com/users/massdosage/following{/other_user}","gists_url":"https://api.github.com/users/massdosage/gists{/gist_id}","starred_url":"https://api.github.com/users/massdosage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massdosage/subscriptions","organizations_url":"https://api.github.com/users/massdosage/orgs","repos_url":"https://api.github.com/users/massdosage/repos","events_url":"https://api.github.com/users/massdosage/events{/privacy}","received_events_url":"https://api.github.com/users/massdosage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T14:05:13Z","updated_at":"2020-09-01T14:05:13Z","author_association":"CONTRIBUTOR","body":"@rdblue hopefully a quick, easy one to review!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684879376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684935235","html_url":"https://github.com/apache/iceberg/pull/1408#issuecomment-684935235","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1408","id":684935235,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDkzNTIzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T15:23:02Z","updated_at":"2020-09-01T15:23:02Z","author_association":"CONTRIBUTOR","body":"Looks great, thanks for fixing these!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684935235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684937951","html_url":"https://github.com/apache/iceberg/pull/1267#issuecomment-684937951","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1267","id":684937951,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDkzNzk1MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T15:27:06Z","updated_at":"2020-09-01T15:27:06Z","author_association":"CONTRIBUTOR","body":"Looks great. Thanks @massdosage!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684937951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684941667","html_url":"https://github.com/apache/iceberg/pull/1394#issuecomment-684941667","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1394","id":684941667,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDk0MTY2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T15:32:35Z","updated_at":"2020-09-01T15:32:35Z","author_association":"CONTRIBUTOR","body":"Thanks, @pvary! Just a couple minor things to fix and I'll merge this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684941667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684964432","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-684964432","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":684964432,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDk2NDQzMg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T16:05:30Z","updated_at":"2020-09-01T16:05:30Z","author_association":"CONTRIBUTOR","body":"@rdblue @RussellSpitzer @rdsr this is the builder we discussed [here](https://github.com/apache/iceberg/pull/1373/files#r475944439).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684964432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684979450","html_url":"https://github.com/apache/iceberg/issues/1403#issuecomment-684979450","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1403","id":684979450,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDk3OTQ1MA==","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T16:26:56Z","updated_at":"2020-09-01T16:26:56Z","author_association":"CONTRIBUTOR","body":"just want to add another [unaddressed comment](https://github.com/apache/iceberg/pull/1185#discussion_r479589663) regarding distinguishing DataFile from different Flink checkpoints.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/684979450/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685021647","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-685021647","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":685021647,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTAyMTY0Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T17:36:31Z","updated_at":"2020-09-01T17:36:31Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @pvary! I think the first thing is to revert some of the renaming. That will make the patch smaller and easier to review. We'll also need to find a place to perform the commit, as you said. Maybe @omalley can help advise.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685021647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685079780","html_url":"https://github.com/apache/iceberg/pull/1394#issuecomment-685079780","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1394","id":685079780,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTA3OTc4MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T19:18:08Z","updated_at":"2020-09-01T19:18:08Z","author_association":"CONTRIBUTOR","body":"@pvary, I found one more thing. Sorry for not finding it sooner.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685079780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685115239","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-685115239","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":685115239,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTExNTIzOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T20:31:27Z","updated_at":"2020-09-01T20:31:27Z","author_association":"CONTRIBUTOR","body":"I think there's a slight problem with the approach that this uses. This creates a builder that interacts with the public `Catalog` API. That's great for users of the API because it is easier to create tables using the builder. But it doesn't help implementers of the API or handle the problem that we keep adding new variations of `createTable` when we add new table metadata.\r\n\r\nSince the builder ends up calling `createTable` with all of the metadata options it has accumulated, when we need to add a new one, like `distribute by` for example, we will still need to create another variant of `createTable` and update the builder to call it. So we will still accumulate more methods in the public API.\r\n\r\nIdeally, the builder would create `TableMetadata` and pass it into the implementation. The problem is that `TableMetadata` is not an API class. So if we wanted to do that, we wouldn't be able to provide the builder implementation in the API. We would have to add an interface for the builder that is implemented in some `BaseCatalog` in `iceberg-core`. That's a bit more work, but I think it would help in the long term. What do you think @aokolnychyi?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685115239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685116089","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-685116089","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":685116089,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTExNjA4OQ==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T20:32:57Z","updated_at":"2020-09-01T20:32:57Z","author_association":"NONE","body":"Random aside, have you guys considered using [Immutables?](https://immutables.github.io/)\r\n\r\nWe've started to use it extensively other places as it does a nice job of several things around pojo and builders. It's also nice as it is an annotation processor and creates no runtime dependency (but still produces inspectable code, as opposed to something like lombok, which is pretty much black box)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685116089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685118055","html_url":"https://github.com/apache/iceberg/pull/1394#issuecomment-685118055","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1394","id":685118055,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTExODA1NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T20:36:17Z","updated_at":"2020-09-01T20:36:17Z","author_association":"CONTRIBUTOR","body":"Thanks @pvary! Merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685118055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685165029","html_url":"https://github.com/apache/iceberg/issues/1413#issuecomment-685165029","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1413","id":685165029,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTE2NTAyOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T22:22:47Z","updated_at":"2020-09-01T22:22:47Z","author_association":"CONTRIBUTOR","body":"Actually, we may not need anything. One moment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685165029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685166000","html_url":"https://github.com/apache/iceberg/issues/1413#issuecomment-685166000","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1413","id":685166000,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTE2NjAwMA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T22:25:06Z","updated_at":"2020-09-01T22:25:33Z","author_association":"CONTRIBUTOR","body":"I think we can try to leverage [DecryptionPropertiesFactory](https://github.com/apache/parquet-mr/blob/3d45fd5480b1b58074c5b53d0738774cf355d11e/parquet-hadoop/src/main/java/org/apache/parquet/crypto/DecryptionPropertiesFactory.java#L45) in Parquet.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685166000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685264398","html_url":"https://github.com/apache/iceberg/issues/1414#issuecomment-685264398","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1414","id":685264398,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTI2NDM5OA==","user":{"login":"xmuyoo","id":3090410,"node_id":"MDQ6VXNlcjMwOTA0MTA=","avatar_url":"https://avatars.githubusercontent.com/u/3090410?v=4","gravatar_id":"","url":"https://api.github.com/users/xmuyoo","html_url":"https://github.com/xmuyoo","followers_url":"https://api.github.com/users/xmuyoo/followers","following_url":"https://api.github.com/users/xmuyoo/following{/other_user}","gists_url":"https://api.github.com/users/xmuyoo/gists{/gist_id}","starred_url":"https://api.github.com/users/xmuyoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xmuyoo/subscriptions","organizations_url":"https://api.github.com/users/xmuyoo/orgs","repos_url":"https://api.github.com/users/xmuyoo/repos","events_url":"https://api.github.com/users/xmuyoo/events{/privacy}","received_events_url":"https://api.github.com/users/xmuyoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T03:17:08Z","updated_at":"2020-09-02T03:17:08Z","author_association":"NONE","body":"I've noticed that there is a module named `iceberg-flink`. It seems that Iceberg can work with Flink instead of Spark. \r\n\r\nBut I don't know how it go now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685264398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685331404","html_url":"https://github.com/apache/iceberg/issues/1396#issuecomment-685331404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1396","id":685331404,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTMzMTQwNA==","user":{"login":"hk-lrzy","id":14176134,"node_id":"MDQ6VXNlcjE0MTc2MTM0","avatar_url":"https://avatars.githubusercontent.com/u/14176134?v=4","gravatar_id":"","url":"https://api.github.com/users/hk-lrzy","html_url":"https://github.com/hk-lrzy","followers_url":"https://api.github.com/users/hk-lrzy/followers","following_url":"https://api.github.com/users/hk-lrzy/following{/other_user}","gists_url":"https://api.github.com/users/hk-lrzy/gists{/gist_id}","starred_url":"https://api.github.com/users/hk-lrzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hk-lrzy/subscriptions","organizations_url":"https://api.github.com/users/hk-lrzy/orgs","repos_url":"https://api.github.com/users/hk-lrzy/repos","events_url":"https://api.github.com/users/hk-lrzy/events{/privacy}","received_events_url":"https://api.github.com/users/hk-lrzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T06:26:21Z","updated_at":"2020-09-02T07:34:15Z","author_association":"NONE","body":"@chenjunjiedada, i understand, you actually means data file schema not equals to row group schemaï¼Ÿ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685331404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685401310","html_url":"https://github.com/apache/iceberg/issues/1396#issuecomment-685401310","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1396","id":685401310,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTQwMTMxMA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T07:12:18Z","updated_at":"2020-09-02T07:12:18Z","author_association":"COLLABORATOR","body":"@hk-lrzy , Yes, the original problem happens because the file schema that used to generate name mapping not equals to (some names are not matched) the file schema in the actual parquet file.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685401310/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685474655","html_url":"https://github.com/apache/iceberg/pull/1394#issuecomment-685474655","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1394","id":685474655,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTQ3NDY1NQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T09:16:22Z","updated_at":"2020-09-02T09:16:22Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue for all the effort put into reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685474655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685888820","html_url":"https://github.com/apache/iceberg/pull/1373#issuecomment-685888820","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1373","id":685888820,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTg4ODgyMA==","user":{"login":"electrum","id":9230,"node_id":"MDQ6VXNlcjkyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/9230?v=4","gravatar_id":"","url":"https://api.github.com/users/electrum","html_url":"https://github.com/electrum","followers_url":"https://api.github.com/users/electrum/followers","following_url":"https://api.github.com/users/electrum/following{/other_user}","gists_url":"https://api.github.com/users/electrum/gists{/gist_id}","starred_url":"https://api.github.com/users/electrum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrum/subscriptions","organizations_url":"https://api.github.com/users/electrum/orgs","repos_url":"https://api.github.com/users/electrum/repos","events_url":"https://api.github.com/users/electrum/events{/privacy}","received_events_url":"https://api.github.com/users/electrum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T17:33:33Z","updated_at":"2020-09-02T17:33:33Z","author_association":"CONTRIBUTOR","body":"Would it make sense to store the sort order in the file (as part of attributes / metadata) as a safety check?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/685888820/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686033768","html_url":"https://github.com/apache/iceberg/pull/1373#issuecomment-686033768","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1373","id":686033768,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjAzMzc2OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T21:30:45Z","updated_at":"2020-09-02T21:30:45Z","author_association":"CONTRIBUTOR","body":"> Would it make sense to store the sort order in the file (as part of attributes / metadata) as a safety check?\r\n\r\nYes, we should definitely do this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686033768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686045682","html_url":"https://github.com/apache/iceberg/pull/1373#issuecomment-686045682","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1373","id":686045682,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjA0NTY4Mg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T21:44:41Z","updated_at":"2020-09-02T21:44:41Z","author_association":"CONTRIBUTOR","body":"@electrum, yes, there will be at least 3 follow-up items I noted in the PR description:\r\n- Associate data and delete files with sort order id.\r\n- Spec update.\r\n- An API for updating the current sort order in a table similar to what we have for partition specs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686045682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686058432","html_url":"https://github.com/apache/iceberg/pull/1393#issuecomment-686058432","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1393","id":686058432,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjA1ODQzMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T22:18:42Z","updated_at":"2020-09-02T22:18:42Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nThank @JingsongLi, I merged this to master. And thanks to @openinx and @kbendick for reviewing!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686058432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686089635","html_url":"https://github.com/apache/iceberg/pull/1348#issuecomment-686089635","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1348","id":686089635,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjA4OTYzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T23:25:40Z","updated_at":"2020-09-02T23:25:40Z","author_association":"CONTRIBUTOR","body":"+1 overall. I'd merge this now even with a couple of minor comments but it appears that merging #1393 caused conflicts.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686089635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686151932","html_url":"https://github.com/apache/iceberg/pull/1177#issuecomment-686151932","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1177","id":686151932,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE1MTkzMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T00:10:10Z","updated_at":"2020-09-03T00:10:10Z","author_association":"CONTRIBUTOR","body":"@fbocse, this looks good to me! Once the public method name and Javadoc are fixed, I'm +1. It would also be nice to merge `TypeVisitor` back into `SchemaWithPartnerVisitor` unless there's some independent use for it that I'm missing.\r\n\r\n@rdsr, what do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686151932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686155144","html_url":"https://github.com/apache/iceberg/issues/1345#issuecomment-686155144","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1345","id":686155144,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE1NTE0NA==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T00:20:57Z","updated_at":"2020-09-03T00:20:57Z","author_association":"CONTRIBUTOR","body":"> Internally, we started assigning a default name mapping when migrating existing tables to Iceberg. I am not sure a name mapping makes sense when we create a fresh Iceberg table. \r\n\r\nYeah, I don't think a name mapping makes sense for Iceberg tables that won't import any data. For migrated tables, a default name mapping equivalent to the columns of the target table should be fine. That's what I did, but programmatically in https://github.com/apache/iceberg/pull/1399/files#diff-531684170cfef0f1493ced85a0c8dbfcR544 \r\n\r\n> My assumption was that we would need to assign a name mapping in the import/snapshot commands.\r\n\r\nI think the common case would be that when importing a table, users would want to import all the columns, so the default name mapping should be the same of the target table schema. This is consistent with the default you mentioned and my changed mentioned above if I understand correctly.\r\n\r\n> \r\n> Also, we ignore Parquet metrics for columns we could not determine ids for in SparkTableUtil. Should we do the same for ORC?\r\n\r\nYes, this behavior should be covered by my change in https://github.com/apache/iceberg/pull/1399/files#diff-ea7008dc637345e7a36b5e1b5a579e13L264 and the ORC metrics implementation already skips columns that do not have an Iceberg field mapped by the id: https://github.com/apache/iceberg/pull/1399/files#diff-ea7008dc637345e7a36b5e1b5a579e13L116\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686155144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686155295","html_url":"https://github.com/apache/iceberg/pull/1399#issuecomment-686155295","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1399","id":686155295,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE1NTI5NQ==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T00:21:28Z","updated_at":"2020-09-03T00:21:28Z","author_association":"CONTRIBUTOR","body":"@rdsr @shardulm94 @aokolnychyi @rdblue PTAL if you have a chance. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686155295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686158105","html_url":"https://github.com/apache/iceberg/pull/1353#issuecomment-686158105","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1353","id":686158105,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE1ODEwNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T00:31:34Z","updated_at":"2020-09-03T00:31:34Z","author_association":"CONTRIBUTOR","body":"Thanks @JingsongLi. I think this is close, but I don't think that we need to restrict `select` to only data table scans. We should be able to use it when planning any scan by updating schema pruning to use the schema passed in to `BaseTableScan` when it is created.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686158105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686192640","html_url":"https://github.com/apache/iceberg/pull/1353#issuecomment-686192640","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1353","id":686192640,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE5MjY0MA==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T02:20:18Z","updated_at":"2020-09-03T02:20:18Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue for your review, yes, we can support `select` better, should be able to use it for all scans. I'll try to do it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686192640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686281454","html_url":"https://github.com/apache/iceberg/pull/1348#issuecomment-686281454","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1348","id":686281454,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjI4MTQ1NA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T06:22:11Z","updated_at":"2020-09-03T06:22:11Z","author_association":"MEMBER","body":"The broken unit test for jdk11 is ( jdk8 works fine): \r\n\r\n```\r\norg.apache.iceberg.spark.sql.TestCreateTableAsSelect > testDataFrameV2Replace[1] FAILED\r\n    java.lang.AssertionError: Should have rows matching the source table: number of results should match expected:<3> but was:<6>\r\n        at org.junit.Assert.fail(Assert.java:88)\r\n        at org.junit.Assert.failNotEquals(Assert.java:834)\r\n        at org.junit.Assert.assertEquals(Assert.java:645)\r\n        at org.apache.iceberg.spark.SparkTestBase.assertEquals(SparkTestBase.java:100)\r\n        at org.apache.iceberg.spark.sql.TestCreateTableAsSelect.testDataFrameV2Replace(TestCreateTableAsSelect.java:206)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686281454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686290245","html_url":"https://github.com/apache/iceberg/issues/1416#issuecomment-686290245","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1416","id":686290245,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjI5MDI0NQ==","user":{"login":"zhangdove","id":25578853,"node_id":"MDQ6VXNlcjI1NTc4ODUz","avatar_url":"https://avatars.githubusercontent.com/u/25578853?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangdove","html_url":"https://github.com/zhangdove","followers_url":"https://api.github.com/users/zhangdove/followers","following_url":"https://api.github.com/users/zhangdove/following{/other_user}","gists_url":"https://api.github.com/users/zhangdove/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangdove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangdove/subscriptions","organizations_url":"https://api.github.com/users/zhangdove/orgs","repos_url":"https://api.github.com/users/zhangdove/repos","events_url":"https://api.github.com/users/zhangdove/events{/privacy}","received_events_url":"https://api.github.com/users/zhangdove/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T06:44:29Z","updated_at":"2020-09-03T06:44:29Z","author_association":"CONTRIBUTOR","body":"The problem relates to time zones, where `Timestamp` is used in function calls. \r\n\r\n@rdblue Do you have any good ways to avoid this problem?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686290245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686440819","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-686440819","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":686440819,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjQ0MDgxOQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T11:59:59Z","updated_at":"2020-09-03T11:59:59Z","author_association":"CONTRIBUTOR","body":"Here comes the new implementation with the mapred.OutputCommitter.\r\nIf the previous one was The Bad, then this one is The Ugly. ðŸ˜ƒ \r\n\r\nWhat I have learned:\r\n- mapred.OutputCommitter has to be a static class - and it has to have a default constructor\r\n```\r\n2020-09-03T13:03:10,637  INFO [Thread-100] mapred.LocalJobRunner: Failed to createOutputCommitter\r\njava.lang.RuntimeException: java.lang.NoSuchMethodException: org.apache.iceberg.mr.hive.HiveIcebergOutputFormat$IcebergOutputCommitter.<init>()\r\n\tat org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:135) ~[hadoop-common-3.1.0.jar:?]\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job.createOutputCommitter(LocalJobRunner.java:515) ~[hadoop-mapreduce-client-common-3.1.0.jar:?]\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:530) ~[hadoop-mapreduce-client-common-3.1.0.jar:?]\r\nCaused by: java.lang.NoSuchMethodException: org.apache.iceberg.mr.hive.HiveIcebergOutputFormat$IcebergOutputCommitter.<init>()\r\n\tat java.lang.Class.getConstructor0(Class.java:3082) ~[?:1.8.0_152]\r\n\tat java.lang.Class.getDeclaredConstructor(Class.java:2178) ~[?:1.8.0_152]\r\n\tat org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:129) ~[hadoop-common-3.1.0.jar:?]\r\n```\r\n- There is a method helping to configure jobs which are very handy if specific configuration is needed. See: HiveIcebergStorageHandler.configureJobConf. We can use this to set the OutputCommitter - otherwise Hive uses a default NullOutputCommitter.\r\n- There is a different instance of HiveIcebergOutputFormat on HiveServer2, and on the Mappers/Reducers. Reflection is used to create it on the Mapper/Reducer side from scratch, so the only way to send info to it is JobConf. See: HiveIcebergStorageHandler.configureOutputJobProperties\r\n- getHiveRecordWriter will be called on Mapper/Reducer side, so we do not want to load table there ðŸ˜„\r\n- We might be able to communicate between RecordWriter and OutputCommitter on Mapper/Reducer side through JobConf/TaskAttemptContext.jobConf, but I am not too comfortable with it - Any thoughts here?\r\n\r\nThe basic idea behind the patch is:\r\n1. We need to use HiveIcebergStorageHandler.configureJobConf to set the mapred.output.committer.class.\r\n2. Writers are creating the files for a directory defined by the table and the hive query id. When a writer is closed it closes the appender and creates a committed file for marking the file finished.\r\n3. When the job is finished it lists the directory and appends the data files to the table.\r\n\r\nWhat I do not like:\r\n- Relies on listing of the target dir. In Hive we do this often, and on S3 we have to use S3Guard to have a reliable listing. I was hoping to get rid of this at least for Iceberg tables. @rdblue, @massdosage: Do you think it would be an acceptable compromise for Hive writes? Do you have any better ideas?\r\n- Creating the commit file would be better placed in commitTask, but serializing the Metrics into the JobConf object seems like a bad idea. @rdblue, @massdosage: Any thoughts?\r\n\r\nWhat I have found:\r\n- org.apache.iceberg.Metrics implements Serializable but uses ByteBuffers which are not Serializable, so I had to create a serialized version for it.\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686440819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686521473","html_url":"https://github.com/apache/iceberg/pull/1418#issuecomment-686521473","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1418","id":686521473,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUyMTQ3Mw==","user":{"login":"massdosage","id":29457,"node_id":"MDQ6VXNlcjI5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/29457?v=4","gravatar_id":"","url":"https://api.github.com/users/massdosage","html_url":"https://github.com/massdosage","followers_url":"https://api.github.com/users/massdosage/followers","following_url":"https://api.github.com/users/massdosage/following{/other_user}","gists_url":"https://api.github.com/users/massdosage/gists{/gist_id}","starred_url":"https://api.github.com/users/massdosage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massdosage/subscriptions","organizations_url":"https://api.github.com/users/massdosage/orgs","repos_url":"https://api.github.com/users/massdosage/repos","events_url":"https://api.github.com/users/massdosage/events{/privacy}","received_events_url":"https://api.github.com/users/massdosage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T14:14:23Z","updated_at":"2020-09-03T14:14:23Z","author_association":"CONTRIBUTOR","body":"One question I have, do we want to repackage the Java classes in this module from `org.apache.iceberg.hive` to `org.apache.hive.metastore`? Or something else? Or just leave them?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686521473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686557764","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-686557764","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":686557764,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU1Nzc2NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:08:23Z","updated_at":"2020-09-03T15:08:23Z","author_association":"CONTRIBUTOR","body":"+1 when conflicts are addressed and tests are passing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686557764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686558170","html_url":"https://github.com/apache/iceberg/pull/1373#issuecomment-686558170","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1373","id":686558170,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU1ODE3MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:09:02Z","updated_at":"2020-09-03T15:09:02Z","author_association":"CONTRIBUTOR","body":"+1 overall. We can either add the v2 check in this PR or later.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686558170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686559813","html_url":"https://github.com/apache/iceberg/pull/1418#issuecomment-686559813","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1418","id":686559813,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU1OTgxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:11:47Z","updated_at":"2020-09-03T15:11:47Z","author_association":"CONTRIBUTOR","body":"Thanks @massdosage! Looks great.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686559813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686560834","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-686560834","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":686560834,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU2MDgzNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:13:27Z","updated_at":"2020-09-03T15:13:27Z","author_association":"CONTRIBUTOR","body":"> Relies on listing of the target dir.\r\n\r\nCan we find out in job commit how many writer tasks there were? Then we could use well-known locations and make sure each one is read.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686560834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686562274","html_url":"https://github.com/apache/iceberg/pull/1348#issuecomment-686562274","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1348","id":686562274,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU2MjI3NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:15:37Z","updated_at":"2020-09-03T15:15:37Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks for getting this done, @openinx! It's great to see Flink SQL writes working.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686562274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686564541","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-686564541","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":686564541,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU2NDU0MQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:19:11Z","updated_at":"2020-09-03T15:19:11Z","author_association":"CONTRIBUTOR","body":"@jacques-n, I haven't seen immutables before. How is your impression? Is the naming of generated methods fixed?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686564541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686564763","html_url":"https://github.com/apache/iceberg/pull/1353#issuecomment-686564763","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1353","id":686564763,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU2NDc2Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:19:32Z","updated_at":"2020-09-03T15:19:32Z","author_association":"CONTRIBUTOR","body":"Looks good, except for the new method. Could you help me understand your rationale for only getting filter columns when performing a data table scan?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686564763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686568801","html_url":"https://github.com/apache/iceberg/pull/1418#issuecomment-686568801","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1418","id":686568801,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU2ODgwMQ==","user":{"login":"massdosage","id":29457,"node_id":"MDQ6VXNlcjI5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/29457?v=4","gravatar_id":"","url":"https://api.github.com/users/massdosage","html_url":"https://github.com/massdosage","followers_url":"https://api.github.com/users/massdosage/followers","following_url":"https://api.github.com/users/massdosage/following{/other_user}","gists_url":"https://api.github.com/users/massdosage/gists{/gist_id}","starred_url":"https://api.github.com/users/massdosage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massdosage/subscriptions","organizations_url":"https://api.github.com/users/massdosage/orgs","repos_url":"https://api.github.com/users/massdosage/repos","events_url":"https://api.github.com/users/massdosage/events{/privacy}","received_events_url":"https://api.github.com/users/massdosage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T15:25:53Z","updated_at":"2020-09-03T15:26:03Z","author_association":"CONTRIBUTOR","body":"@rdblue No problem, so you're happy with not repackaging the Java classes?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686568801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686597917","html_url":"https://github.com/apache/iceberg/pull/1418#issuecomment-686597917","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1418","id":686597917,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU5NzkxNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T16:10:45Z","updated_at":"2020-09-03T16:10:45Z","author_association":"CONTRIBUTOR","body":"Yes. Moving the classes would be a breaking API change so I'd prefer to avoid it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686597917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686602875","html_url":"https://github.com/apache/iceberg/pull/1384#issuecomment-686602875","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1384","id":686602875,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjYwMjg3NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T16:18:28Z","updated_at":"2020-09-03T16:18:28Z","author_association":"CONTRIBUTOR","body":"Looks great. Thanks for fixing this problem, @Simon0806! I'll merge the fix.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686602875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686608945","html_url":"https://github.com/apache/iceberg/pull/1417#issuecomment-686608945","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1417","id":686608945,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjYwODk0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T16:29:36Z","updated_at":"2020-09-03T16:29:36Z","author_association":"CONTRIBUTOR","body":"This looks good, but I'd like to have a few test cases that validate how things could go wrong. For example:\r\n\r\n* Selecting out of order columns: `SELECT b, a, c FROM abc_table`\r\n* Selecting all but the first column, all but a middle column, and all but the last column\r\n* Selecting the same column twice: `SELECT a, a FROM abc_table`\r\n\r\nAlso, how is Hive getting the final projection that Iceberg produces?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686608945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686616025","html_url":"https://github.com/apache/iceberg/pull/1409#issuecomment-686616025","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1409","id":686616025,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjYxNjAyNQ==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T16:42:50Z","updated_at":"2020-09-03T16:42:50Z","author_association":"NONE","body":"> @jacques-n, I haven't seen immutables before. How is your impression? Is the naming of generated methods fixed?\r\n\r\nI'm not sure whether you mean \"fixed\" as in broken or \"fixed\" as in not-customizable. If the former, I'm not sure what you're referring to. If the latter, yes there is some control to customize the method names:\r\nhttps://immutables.github.io/style.html\r\n\r\nWe find that it is relatively painless to use, has good IDE integration and removes a lot of boilerplate code. Allows us to do a better job of creating domain specific model classes in different layers rather than over-sharing them.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686616025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686830961","html_url":"https://github.com/apache/iceberg/pull/1417#issuecomment-686830961","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1417","id":686830961,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjgzMDk2MQ==","user":{"login":"guilload","id":3011588,"node_id":"MDQ6VXNlcjMwMTE1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/3011588?v=4","gravatar_id":"","url":"https://api.github.com/users/guilload","html_url":"https://github.com/guilload","followers_url":"https://api.github.com/users/guilload/followers","following_url":"https://api.github.com/users/guilload/following{/other_user}","gists_url":"https://api.github.com/users/guilload/gists{/gist_id}","starred_url":"https://api.github.com/users/guilload/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guilload/subscriptions","organizations_url":"https://api.github.com/users/guilload/orgs","repos_url":"https://api.github.com/users/guilload/repos","events_url":"https://api.github.com/users/guilload/events{/privacy}","received_events_url":"https://api.github.com/users/guilload/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T00:27:02Z","updated_at":"2020-09-04T00:27:02Z","author_association":"CONTRIBUTOR","body":"Hi @cmathiesen,\r\n\r\nForwarding the selected columns in `getSplits` is not sufficient. You can take a look at the Parquet logs to check whether projections are correctly pushed down. You can also log the length (i.e. # of fields) of the records returned by the input format.\r\n\r\nConceptually, here's what's need to be done:\r\n- pass the selected columns in `getSplits` AND in `getRecordReader`\r\n- modify the object inspector to match the projected schema\r\n\r\n[I have also started working on a PR](https://github.com/apache/iceberg/compare/master...guilload:guilload--hive--projection-pushdown) for this but unfortunately I haven't been able to get to a fully working solution. \r\n\r\nI suspect that when the SerDe is instantiated, the `hive.io.file.readcolumn.names` property is not always set and so the \"unprojected\" objectinspector does not match the projected records, which manifests itself in failing tests with an array out of bound exception when Hive tries to read a field in a projected record with the mismatched object inspector.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686830961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686858941","html_url":"https://github.com/apache/iceberg/issues/1422#issuecomment-686858941","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1422","id":686858941,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg1ODk0MQ==","user":{"login":"yiguolei","id":9208457,"node_id":"MDQ6VXNlcjkyMDg0NTc=","avatar_url":"https://avatars.githubusercontent.com/u/9208457?v=4","gravatar_id":"","url":"https://api.github.com/users/yiguolei","html_url":"https://github.com/yiguolei","followers_url":"https://api.github.com/users/yiguolei/followers","following_url":"https://api.github.com/users/yiguolei/following{/other_user}","gists_url":"https://api.github.com/users/yiguolei/gists{/gist_id}","starred_url":"https://api.github.com/users/yiguolei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yiguolei/subscriptions","organizations_url":"https://api.github.com/users/yiguolei/orgs","repos_url":"https://api.github.com/users/yiguolei/repos","events_url":"https://api.github.com/users/yiguolei/events{/privacy}","received_events_url":"https://api.github.com/users/yiguolei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T02:13:33Z","updated_at":"2020-09-04T02:13:33Z","author_association":"NONE","body":"If it costs a lot of time to read manifest file, why not merge the data files or merge manifests under a manifest list file?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686858941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686863138","html_url":"https://github.com/apache/iceberg/pull/1353#issuecomment-686863138","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1353","id":686863138,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg2MzEzOA==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T02:29:31Z","updated_at":"2020-09-04T02:31:04Z","author_association":"CONTRIBUTOR","body":"Sorry, It seems that I misunderstood it.\r\nIs the filter applied to the schema of scan or the schema of table?\r\nFor example, a table schema: {id -> int, data -> string}, but the schema of a `FilesTableScan` is {content -> int, file_path -> string, file_size -> long, ....}. (Defined in `DataFile`)\r\n\r\nSo IIUC, filters on `FilesTableScan` should be `file_path=...` or `file_size>.. and file_size<...`. I got it wrong because there was something wrong with the sample in the test class: `TestMetadataTableScans`, in this class, all filters on id...\r\n\r\nIf `select` on wrong filters, there will be an exception: `Cannot find field 'id' in struct`.\r\n\r\nI'll change the code and fix the tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686863138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686872885","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-686872885","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":686872885,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg3Mjg4NQ==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T03:04:28Z","updated_at":"2020-09-04T03:04:28Z","author_association":"CONTRIBUTOR","body":"@rdblue @aokolnychyi @RussellSpitzer would you please help to review again, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686872885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686915430","html_url":"https://github.com/apache/iceberg/issues/1422#issuecomment-686915430","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1422","id":686915430,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkxNTQzMA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:23:59Z","updated_at":"2020-09-04T05:23:59Z","author_association":"CONTRIBUTOR","body":"To give a bit more background, job planning is fast even on huge tables if we have a partition predicate and end up processing 10-15 partitions in a single job. We have `RewriteManifestsAction` to rewrite metadata and align it with partitions on demand. That covers all common use cases.\r\n\r\nAt the same time, Iceberg supports file filtering within partitions and opens the opportunity for efficient *full* table scans. So there are two use cases we want to address:\r\n\r\n- job planning for full table scans (less important)\r\n- job planning for queries with predicates only on sort key in partitioned tables (becomes common in Iceberg tables)\r\n\r\nThe second use case is the primary one. It is a common pattern to partition tables by date and sort by key and have queries *without* partition predicates but with predicates on the sort key. Such use cases were not possible without Iceberg since we could not filter files within partitions and we ended up with full table scans. Right now, we can narrow down the number of matching files to 1-2 per partition. So we can scan PB scale tables for a given key faster. If we do so right now, we end up spending most of the time during job planning. That's why it would be better to parallelize that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686915430/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686916005","html_url":"https://github.com/apache/iceberg/issues/1422#issuecomment-686916005","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1422","id":686916005,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkxNjAwNQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:25:30Z","updated_at":"2020-09-04T05:25:30Z","author_association":"CONTRIBUTOR","body":"In the future, I see the possibility to load and leverage secondary indexes using this approach too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686916005/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686918773","html_url":"https://github.com/apache/iceberg/issues/1178#issuecomment-686918773","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1178","id":686918773,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkxODc3Mw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:33:36Z","updated_at":"2020-09-04T05:33:36Z","author_association":"CONTRIBUTOR","body":"Seems like this can be resolved?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686918773/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686920372","html_url":"https://github.com/apache/iceberg/issues/317#issuecomment-686920372","issue_url":"https://api.github.com/repos/apache/iceberg/issues/317","id":686920372,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkyMDM3Mg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:38:04Z","updated_at":"2020-09-04T05:48:14Z","author_association":"CONTRIBUTOR","body":"Main PR: https://github.com/apache/iceberg/pull/1373","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686920372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686926269","html_url":"https://github.com/apache/iceberg/pull/1373#issuecomment-686926269","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1373","id":686926269,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkyNjI2OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:53:16Z","updated_at":"2020-09-04T05:53:16Z","author_association":"CONTRIBUTOR","body":"I've merged this PR to get this feature going. I keep the original issue open since this work is not complete.\r\n\r\nFollow-up items:\r\n- Associate data and delete files with sort order id.\r\n- Spec update.\r\n- An API for updating the current sort order in a table similar to what we have for partition specs.\r\n- Add v2 validation checks (#1419).\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/686926269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687040199","html_url":"https://github.com/apache/iceberg/pull/1423#issuecomment-687040199","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1423","id":687040199,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA0MDE5OQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T09:38:37Z","updated_at":"2020-09-04T09:38:37Z","author_association":"MEMBER","body":"I used this patch to copy all the dependencies from `flink` module to a separate folder. \r\n\r\n```\r\ndiff --git a/build.gradle b/build.gradle\r\nindex 2ee676de..d0d21ec9 100644\r\n--- a/build.gradle\r\n+++ b/build.gradle\r\n@@ -297,6 +297,11 @@ project(':iceberg-flink') {\r\n       exclude group: 'com.zaxxer', module: 'HikariCP'\r\n     }\r\n   }\r\n+\r\n+  task copyDependencies(type: Copy) {\r\n+    from configurations.default\r\n+    into 'dependencies'\r\n+  }\r\n }\r\n \r\n project(':iceberg-flink-runtime') {\r\n```\r\n\r\nHere are the dependencies: \r\n\r\n```bash\r\nâžœ  dependencies git:(flink-runtime) âœ— ls -atlr  \r\ntotal 72120\r\ndrwxr-xr-x   6 openinx  staff       192 Sep  4 17:35 ..\r\n-rw-r--r--   1 openinx  staff     70648 Sep  4 17:35 iceberg-data-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff     80259 Sep  4 17:35 iceberg-orc-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff    269140 Sep  4 17:35 iceberg-parquet-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff     31033 Sep  4 17:35 iceberg-hive-metastore-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff    723066 Sep  4 17:35 iceberg-core-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff    341213 Sep  4 17:35 iceberg-api-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff     31339 Sep  4 17:35 iceberg-common-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff    587956 Sep  4 17:35 avro-1.9.2.jar\r\n-rw-r--r--   1 openinx  staff   1781264 Sep  4 17:35 orc-core-1.6.3-nohive.jar\r\n-rw-r--r--   1 openinx  staff     28953 Sep  4 17:35 orc-shims-1.6.3.jar\r\n-rw-r--r--   1 openinx  staff  19512529 Sep  4 17:35 parquet-avro-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff    437637 Sep  4 17:35 parquet-hadoop-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff   1619439 Sep  4 17:35 parquet-column-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff    848718 Sep  4 17:35 parquet-encoding-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff     96197 Sep  4 17:35 parquet-common-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff    700667 Sep  4 17:35 parquet-format-structures-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff     41203 Sep  4 17:35 slf4j-api-1.7.25.jar\r\n-rw-r--r--   1 openinx  staff     15322 Sep  4 17:35 findbugs-annotations-1.3.9-1.jar\r\n-rw-r--r--   1 openinx  staff   1634977 Sep  4 17:35 iceberg-bundled-guava-746c0c8.dirty.jar\r\n-rw-r--r--   1 openinx  staff   1403755 Sep  4 17:35 jackson-databind-2.10.2.jar\r\n-rw-r--r--   1 openinx  staff    349074 Sep  4 17:35 jackson-core-2.10.2.jar\r\n-rw-r--r--   1 openinx  staff    846706 Sep  4 17:35 caffeine-2.7.0.jar\r\n-rw-r--r--   1 openinx  staff    615064 Sep  4 17:35 commons-compress-1.19.jar\r\n-rw-r--r--   1 openinx  staff    193908 Sep  4 17:35 checker-qual-2.6.0.jar\r\n-rw-r--r--   1 openinx  staff     13161 Sep  4 17:35 error_prone_annotations-2.3.3.jar\r\n-rw-r--r--   1 openinx  staff    181098 Sep  4 17:35 aircompressor-0.15.jar\r\n-rw-r--r--   1 openinx  staff    102244 Sep  4 17:35 jaxb-api-2.2.11.jar\r\n-rw-r--r--   1 openinx  staff     19014 Sep  4 17:35 annotations-17.0.0.jar\r\n-rw-r--r--   1 openinx  staff    233745 Sep  4 17:35 threeten-extra-1.5.0.jar\r\n-rw-r--r--   1 openinx  staff     68080 Sep  4 17:35 jackson-annotations-2.10.2.jar\r\n-rw-r--r--   1 openinx  staff   1786250 Sep  4 17:35 parquet-jackson-1.11.0.jar\r\n-rw-r--r--   1 openinx  staff   2021167 Sep  4 17:35 snappy-java-1.1.7.3.jar\r\n-rw-r--r--   1 openinx  staff    111119 Sep  4 17:35 commons-pool-1.6.jar\r\n-rw-r--r--   1 openinx  staff     26586 Sep  4 17:35 javax.annotation-api-1.3.2.jar\r\ndrwxr-xr-x  37 openinx  staff      1184 Sep  4 17:35 .\r\n-rw-r--r--   1 openinx  staff     20924 Sep  4 17:35 audience-annotations-0.11.0.jar\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687040199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687074236","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-687074236","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":687074236,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA3NDIzNg==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T10:54:55Z","updated_at":"2020-09-04T10:54:55Z","author_association":"CONTRIBUTOR","body":"> > Relies on listing of the target dir.\r\n> \r\n> Can we find out in job commit how many writer tasks there were? Then we could use well-known locations and make sure each one is read.\r\n\r\nI suspect that the JobContext contains only input information about the number of mappers/reducers. I have only debugged the LocalJobRunner code for now, but I did not see anything which would indicate that we have up-to-date information there.\r\nThe only solution for it I was able to come up is creating a new JobClient to get the info from the server. I was not able to make it work for the LocalJobRunner yet, and I think this would be too specific for MR.\r\nHow does this work for Spark writes? Do we have any other places where MR write is already implemented for Iceberg?\r\n\r\nUpdated the PR to commit the task only at IcebergOutputCommitter.commitTask, and not at IcebergRecordWriter.close.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687074236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687215018","html_url":"https://github.com/apache/iceberg/issues/1422#issuecomment-687215018","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1422","id":687215018,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzIxNTAxOA==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T15:19:36Z","updated_at":"2020-09-04T15:19:36Z","author_association":"MEMBER","body":"@yiguolei In the use cases we are thinking about the \r\n\r\n> If it costs a lot of time to read manifest file, why not merge the data files or merge manifests under a manifest list file?\r\n\r\nThe issue is that that approach also does not scale with very large amounts of metadata. We would I really like a solution that allows us to do TableScan style queries even when the underlying table has hundreds of megs if not gigabytes of metadata.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687215018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687240095","html_url":"https://github.com/apache/iceberg/issues/1426#issuecomment-687240095","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1426","id":687240095,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzI0MDA5NQ==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T16:02:54Z","updated_at":"2020-09-04T16:02:54Z","author_association":"MEMBER","body":"I think we actually have a large number of other unused things, our current warning level is quite high. We should probably go through and clean them up. I have some time this morning so I think I'll grab all the obvious ones. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687240095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687381040","html_url":"https://github.com/apache/iceberg/pull/1427#issuecomment-687381040","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1427","id":687381040,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzM4MTA0MA==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T20:59:23Z","updated_at":"2020-09-04T20:59:23Z","author_association":"MEMBER","body":"@kbendick , @rdblue , @aokolnychyi - This PR takes care of a good portion of the warnings currently in the code base. I tried to only take care of the ones I was sure were either actual bugs, or wouldn't actually change behavior. There are a few more classes of warning to clean up. I\"ll try tackling those later.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687381040/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687464819","html_url":"https://github.com/apache/iceberg/issues/1422#issuecomment-687464819","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1422","id":687464819,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzQ2NDgxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T23:26:59Z","updated_at":"2020-09-04T23:27:45Z","author_association":"CONTRIBUTOR","body":"I haven't formed an opinion on what approach is more promising right now. Here are my thoughts after a quick look:\r\n\r\n**Option 1 (extension to the `TableScan` API)**\r\n\r\nPros:\r\n- Reuses the existing filtering logic.\r\n- API could be reused by other query engines.\r\n- Seems to require less code?\r\n\r\nCons:\r\n- Is a substantial change to the core planning logic that requires thorough testing (both performance and correctness).\r\n- Requires to think about serialization and especially Kryo serialization during planning (was not needed before).\r\n\r\n**Option 2 (metadata tables)**\r\n\r\nPros:\r\n\r\n- Reuses the existing logic to read manifests in a scalable way via metadata tables.\r\n- Reuses the existing logic for wrapping Spark `Row`s into Iceberg `DataFile`s.\r\n- Doesn't touch the core planning API and is more isolated.\r\n- Maybe, can be exposed as an action (makes sense or not?)\r\n\r\nCons:\r\n\r\n- Requires instantiating evaluators ourselves.\r\n- Seems to require a bit more code but I feel like it can be simplified.\r\n- Specific to Spark but could be implemented in other systems that support metadata tables.\r\n\r\nImplementation aside, we need to consider when to apply this. Ideally, we would have some sort of a threshold for the size of manifests we need to scan after manifest filtering. If we narrow down the scope to a couple of manifests, plan locally. Otherwise, plan using Spark. I am not sure it will be that easy, though. Instead, we could support a Spark read option that would tell us which mode to use. The value can be local, distributed, auto. In auto, the simplest option is to analyze the scan condition. If there is a reasonable partition predicate (e.g. `equals` or `inSet`), we could always do planning locally. If not and if distributed is enabled, leverage Spark.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687464819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687527691","html_url":"https://github.com/apache/iceberg/pull/1423#issuecomment-687527691","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1423","id":687527691,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzUyNzY5MQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T02:25:34Z","updated_at":"2020-09-05T02:25:34Z","author_association":"COLLABORATOR","body":"Do we expect the Flink cluster has hive execution environment like Spark cluster? In our Flink cluster, we don't have a hive environment so that we require users to upload the application jar along with a hive-exec jar. The spark cluster doesn't need this since it has built-in hive jars. Thoughts? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687527691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687572568","html_url":"https://github.com/apache/iceberg/pull/1227#issuecomment-687572568","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1227","id":687572568,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzU3MjU2OA==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T08:35:51Z","updated_at":"2020-09-05T08:38:30Z","author_association":"CONTRIBUTOR","body":"Thank you so much for returning to this @waterlx! My apologies for the delay, my work has been rather busy this past week.\r\n\r\nI have concerns about not using quotes when calling `echo`. It's not technically required in all shells, but it's a fairly standard practice (`echo` uses quotes elsewhere in the script). It gives me some slight concerns for portability of the shell script (especially if people are running in containers and using stricter shells). Other than that, it looks great! I have a small nit / suggestion for making the script slightly more readable and to allow for removing hat entire sentence comment on `$adds` (but I'll leave that to your call).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687572568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687573257","html_url":"https://github.com/apache/iceberg/pull/1427#issuecomment-687573257","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1427","id":687573257,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzU3MzI1Nw==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T08:43:20Z","updated_at":"2020-09-05T08:43:20Z","author_association":"CONTRIBUTOR","body":"Thank you @RussellSpitzer. I'll take a look at this in the morning or early afternoon tomorrow. You know I have a passion for linting and for fixing warnings! ðŸ’¯ ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687573257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687578777","html_url":"https://github.com/apache/iceberg/pull/1427#issuecomment-687578777","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1427","id":687578777,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzU3ODc3Nw==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T09:29:34Z","updated_at":"2020-09-05T09:29:34Z","author_association":"CONTRIBUTOR","body":"> @kbendick , @rdblue , @aokolnychyi - This PR takes care of a good portion of the warnings currently in the code base. I tried to only take care of the ones I was sure were either actual bugs, or wouldn't actually change behavior. There are a few more classes of warning to clean up. I\"ll try tackling those later.\r\n\r\n@RussellSpitzer I have a patch for `NarrowingCompoundAssignment` warnings, where I have to change a type in a class from `int` to `long` for correctness reasons. I can update that and then submit it tomorrow, as I imagine that's likely to see some discussion as it's less straight forward. I can submit it in the morning / afternoon tomorrow.\r\n\r\nI'm in agreement with @jzhuge that it would be great to start enforcing more of the ErrorProne warnings in gradle. As mentioned, if you don't know of any rules that we could start enforcing off of the top of your head, then I'd be more than happy to look into it. I know that I fixed a number of missing `@overrides` and as I didn't enforce it, more have slipped in. Though we might want to consider the length of time that the tests take to run vs how important erring out on specific warnings is (which is one reason why I'd prefer to see enforcement in gradle in probably a separate PR).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687578777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687983624","html_url":"https://github.com/apache/iceberg/issues/1428#issuecomment-687983624","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1428","id":687983624,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4MzYyNA==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:20:20Z","updated_at":"2020-09-07T02:20:20Z","author_association":"CONTRIBUTOR","body":"Working on this. Will submit a PR soon.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/687983624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688199120","html_url":"https://github.com/apache/iceberg/pull/1423#issuecomment-688199120","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1423","id":688199120,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODE5OTEyMA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T09:31:18Z","updated_at":"2020-09-07T09:31:18Z","author_association":"MEMBER","body":"I'm not quite sure whether we need to pack the hive-exec jar within the flink-runtime jar now. Seems it's a fat jar and include an old version guava dependency ( just notice the comment in build.gradle), I will try the demo under hive environment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688199120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688281553","html_url":"https://github.com/apache/iceberg/pull/1430#issuecomment-688281553","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1430","id":688281553,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODI4MTU1Mw==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T12:04:52Z","updated_at":"2020-09-07T12:04:52Z","author_association":"CONTRIBUTOR","body":"@rdblue: Could you please review this?\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688281553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688600832","html_url":"https://github.com/apache/iceberg/pull/1423#issuecomment-688600832","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1423","id":688600832,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYwMDgzMg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T03:42:45Z","updated_at":"2020-09-08T03:43:40Z","author_association":"MEMBER","body":"I read the apache flink hive document [here](https://ci.apache.org/projects/flink/flink-docs-stable/dev/table/hive/#dependencies),  It's recommended to use the bundled `flink-sql-connector-hive-x.x.x` jar in flink sql client  if the hive version is included in bundled list, otherwise we could [choose the jars from hive](https://ci.apache.org/projects/flink/flink-docs-stable/dev/table/hive/#user-defined-dependencies) by ourself. \r\n\r\nSo I think we don't need to include the `hive-exec` jar within the `flink-runtime` module again, FYI @chenjunjiedada .\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688600832/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688622829","html_url":"https://github.com/apache/iceberg/issues/1431#issuecomment-688622829","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1431","id":688622829,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYyMjgyOQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T05:14:40Z","updated_at":"2020-09-08T05:14:40Z","author_association":"CONTRIBUTOR","body":"Will submit a PR soon.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688622829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688623390","html_url":"https://github.com/apache/iceberg/pull/1423#issuecomment-688623390","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1423","id":688623390,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYyMzM5MA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T05:17:01Z","updated_at":"2020-09-08T05:17:01Z","author_association":"COLLABORATOR","body":"Thanks @openinx! I wasn't aware Flink has this bundle jar.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688623390/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688729139","html_url":"https://github.com/apache/iceberg/pull/1185#issuecomment-688729139","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1185","id":688729139,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODcyOTEzOQ==","user":{"login":"tangchenyang","id":44256449,"node_id":"MDQ6VXNlcjQ0MjU2NDQ5","avatar_url":"https://avatars.githubusercontent.com/u/44256449?v=4","gravatar_id":"","url":"https://api.github.com/users/tangchenyang","html_url":"https://github.com/tangchenyang","followers_url":"https://api.github.com/users/tangchenyang/followers","following_url":"https://api.github.com/users/tangchenyang/following{/other_user}","gists_url":"https://api.github.com/users/tangchenyang/gists{/gist_id}","starred_url":"https://api.github.com/users/tangchenyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangchenyang/subscriptions","organizations_url":"https://api.github.com/users/tangchenyang/orgs","repos_url":"https://api.github.com/users/tangchenyang/repos","events_url":"https://api.github.com/users/tangchenyang/events{/privacy}","received_events_url":"https://api.github.com/users/tangchenyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T09:02:17Z","updated_at":"2020-09-08T09:02:17Z","author_association":"NONE","body":"As a user, how can i use flink write my DataStream to iceberg.\r\nIs there an example or API document or user document for this feature? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688729139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688741887","html_url":"https://github.com/apache/iceberg/pull/1185#issuecomment-688741887","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1185","id":688741887,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODc0MTg4Nw==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T09:24:22Z","updated_at":"2020-09-08T09:24:22Z","author_association":"MEMBER","body":"Hi @tangchenyang   The unit test [TestFlinkIcebergSink](https://github.com/apache/iceberg/blob/master/flink/src/test/java/org/apache/iceberg/flink/sink/TestFlinkIcebergSink.java#L133)  provide a complete demo to show you how to write records into iceberg table by flink.  I'm writing a document to show users how to write data into iceberg by both table sql and datastream api, but not finished yet. \r\nhttps://github.com/apache/iceberg/pull/1423","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688741887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688747036","html_url":"https://github.com/apache/iceberg/pull/1185#issuecomment-688747036","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1185","id":688747036,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODc0NzAzNg==","user":{"login":"tangchenyang","id":44256449,"node_id":"MDQ6VXNlcjQ0MjU2NDQ5","avatar_url":"https://avatars.githubusercontent.com/u/44256449?v=4","gravatar_id":"","url":"https://api.github.com/users/tangchenyang","html_url":"https://github.com/tangchenyang","followers_url":"https://api.github.com/users/tangchenyang/followers","following_url":"https://api.github.com/users/tangchenyang/following{/other_user}","gists_url":"https://api.github.com/users/tangchenyang/gists{/gist_id}","starred_url":"https://api.github.com/users/tangchenyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangchenyang/subscriptions","organizations_url":"https://api.github.com/users/tangchenyang/orgs","repos_url":"https://api.github.com/users/tangchenyang/repos","events_url":"https://api.github.com/users/tangchenyang/events{/privacy}","received_events_url":"https://api.github.com/users/tangchenyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T09:34:06Z","updated_at":"2020-09-08T09:34:06Z","author_association":"NONE","body":"Greate!  Many thanks. @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688747036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688845802","html_url":"https://github.com/apache/iceberg/issues/1410#issuecomment-688845802","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1410","id":688845802,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg0NTgwMg==","user":{"login":"skambha","id":16563220,"node_id":"MDQ6VXNlcjE2NTYzMjIw","avatar_url":"https://avatars.githubusercontent.com/u/16563220?v=4","gravatar_id":"","url":"https://api.github.com/users/skambha","html_url":"https://github.com/skambha","followers_url":"https://api.github.com/users/skambha/followers","following_url":"https://api.github.com/users/skambha/following{/other_user}","gists_url":"https://api.github.com/users/skambha/gists{/gist_id}","starred_url":"https://api.github.com/users/skambha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skambha/subscriptions","organizations_url":"https://api.github.com/users/skambha/orgs","repos_url":"https://api.github.com/users/skambha/repos","events_url":"https://api.github.com/users/skambha/events{/privacy}","received_events_url":"https://api.github.com/users/skambha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T12:53:01Z","updated_at":"2020-09-08T12:53:01Z","author_association":"CONTRIBUTOR","body":"I can take a look into this.  \r\n\r\nI ran a simple test and the current behavior of replace is we are merging the existing properties with the new ones and updating any existing properties with the new values. \r\n\r\nWhat is the reason we are merging the table properties instead of doing a replace?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688845802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688893301","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-688893301","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":688893301,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg5MzMwMQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T13:57:17Z","updated_at":"2020-09-08T13:57:17Z","author_association":"CONTRIBUTOR","body":"As @steveloughran is our resident OutputCommitter expert, I feel better about our currently proposed solution now.\r\nBased on his suggestions parallelized the FileSystem calls, also fleshed out the tests.\r\n\r\n@rdblue, @massdosage: What are your thoughts of the current proposed solution? Code styling and formatting questions are also fair game, since I still just learn the style working on Iceberg. Could you please take a look at #1430 too, as it would help us to get rid of the SerializableMetrics class.\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/688893301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689022825","html_url":"https://github.com/apache/iceberg/pull/759#issuecomment-689022825","issue_url":"https://api.github.com/repos/apache/iceberg/issues/759","id":689022825,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAyMjgyNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:20:58Z","updated_at":"2020-09-08T17:20:58Z","author_association":"CONTRIBUTOR","body":"I'm closing this because #1177 was merged. Thanks @fbocse and @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689022825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689023022","html_url":"https://github.com/apache/iceberg/pull/1177#issuecomment-689023022","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1177","id":689023022,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAyMzAyMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:21:20Z","updated_at":"2020-09-08T17:21:20Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks for all your work, @fbocse and @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689023022/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689025110","html_url":"https://github.com/apache/iceberg/pull/1433#issuecomment-689025110","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1433","id":689025110,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAyNTExMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:25:06Z","updated_at":"2020-09-08T17:25:06Z","author_association":"CONTRIBUTOR","body":"Looks good to me. I had a couple comments on the tests (naming, use `AssertHelpers.assertThrows`), but those aren't blockers so I'll merge this. Good catch, @openinx!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689025110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689028621","html_url":"https://github.com/apache/iceberg/pull/1429#issuecomment-689028621","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1429","id":689028621,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAyODYyMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:32:00Z","updated_at":"2020-09-08T17:32:00Z","author_association":"CONTRIBUTOR","body":"+1 for fixing this when called from a different catalog. We see these exceptions all the time in normal use and I've been meaning to implement a fix for it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689028621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689109012","html_url":"https://github.com/apache/iceberg/pull/1407#issuecomment-689109012","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1407","id":689109012,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTEwOTAxMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T20:09:18Z","updated_at":"2020-09-08T20:09:18Z","author_association":"CONTRIBUTOR","body":"Good to see your name pop up here, @steveloughran!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689109012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689121670","html_url":"https://github.com/apache/iceberg/pull/1353#issuecomment-689121670","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1353","id":689121670,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTEyMTY3MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T20:36:17Z","updated_at":"2020-09-08T20:36:17Z","author_association":"CONTRIBUTOR","body":"Thanks, @JingsongLi! I can see why that test was misleading. Thanks for fixing this, I'll merge.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/689121670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]