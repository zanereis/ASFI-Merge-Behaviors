[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656437050","html_url":"https://github.com/apache/pulsar/pull/7475#issuecomment-656437050","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7475","id":656437050,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQzNzA1MA==","user":{"login":"jiazhai","id":6348208,"node_id":"MDQ6VXNlcjYzNDgyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/6348208?v=4","gravatar_id":"","url":"https://api.github.com/users/jiazhai","html_url":"https://github.com/jiazhai","followers_url":"https://api.github.com/users/jiazhai/followers","following_url":"https://api.github.com/users/jiazhai/following{/other_user}","gists_url":"https://api.github.com/users/jiazhai/gists{/gist_id}","starred_url":"https://api.github.com/users/jiazhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiazhai/subscriptions","organizations_url":"https://api.github.com/users/jiazhai/orgs","repos_url":"https://api.github.com/users/jiazhai/repos","events_url":"https://api.github.com/users/jiazhai/events{/privacy}","received_events_url":"https://api.github.com/users/jiazhai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T01:54:17Z","updated_at":"2020-07-10T01:54:17Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656437050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656437080","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656437080","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656437080,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQzNzA4MA==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T01:54:26Z","updated_at":"2020-07-10T01:54:26Z","author_association":"MEMBER","body":"@devinbost Are you interested in contributing a fix for this?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656437080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656438071","html_url":"https://github.com/apache/pulsar/issues/7492#issuecomment-656438071","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7492","id":656438071,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQzODA3MQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T01:58:18Z","updated_at":"2020-07-10T01:58:18Z","author_association":"MEMBER","body":"@horsteff Are you interested in contributing a bug fix?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656438071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656440318","html_url":"https://github.com/apache/pulsar/issues/6236#issuecomment-656440318","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6236","id":656440318,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ0MDMxOA==","user":{"login":"rounak11","id":31311697,"node_id":"MDQ6VXNlcjMxMzExNjk3","avatar_url":"https://avatars.githubusercontent.com/u/31311697?v=4","gravatar_id":"","url":"https://api.github.com/users/rounak11","html_url":"https://github.com/rounak11","followers_url":"https://api.github.com/users/rounak11/followers","following_url":"https://api.github.com/users/rounak11/following{/other_user}","gists_url":"https://api.github.com/users/rounak11/gists{/gist_id}","starred_url":"https://api.github.com/users/rounak11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rounak11/subscriptions","organizations_url":"https://api.github.com/users/rounak11/orgs","repos_url":"https://api.github.com/users/rounak11/repos","events_url":"https://api.github.com/users/rounak11/events{/privacy}","received_events_url":"https://api.github.com/users/rounak11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T02:07:06Z","updated_at":"2020-07-13T22:05:19Z","author_association":"NONE","body":"@sijie @hari819 is there a way to enable tls in bookie using pem? If so please let me know the configs. Thanks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656440318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656451119","html_url":"https://github.com/apache/pulsar/issues/7480#issuecomment-656451119","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7480","id":656451119,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ1MTExOQ==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T02:51:38Z","updated_at":"2020-07-10T02:51:38Z","author_association":"MEMBER","body":"@sxpsxp12 In fact, we have already supported the batch function on the produce side. By default, the batch is enabled.\r\n\r\n```\r\nproducer, err := client.CreateProducer(ProducerOptions{\r\n\t\tTopic:                   topicName,\r\n\t\tDisableBatching:         false,\r\n\t\tBatchingMaxMessages:     uint(numOfMessages),\r\n\t\tBatchingMaxPublishDelay: time.Second * 10,\r\n\t\tProperties: map[string]string{\r\n\t\t\t\"producer-name\": \"test-producer-name\",\r\n\t\t\t\"producer-id\":   \"test-producer-id\",\r\n\t\t},\r\n\t})\r\n\tassert.Nil(t, err)\r\n\tdefer producer.Close()\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656451119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656451148","html_url":"https://github.com/apache/pulsar/pull/7487#issuecomment-656451148","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7487","id":656451148,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ1MTE0OA==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T02:51:46Z","updated_at":"2020-07-10T02:51:46Z","author_association":"CONTRIBUTOR","body":"@merlimat Yeah, because the tests imitated `KeySharedSubscriptionTest.receiveAndCheckDistribution` in module `pulsar-broker`'s tests to verify balanced distribution of keys. While the `PERCENT_ERROR` is 0.4 in Java tests, I increased it to 0.5 because in my local test environment, 0.4 made tests much more easily to fail.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656451148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656459565","html_url":"https://github.com/apache/pulsar/pull/7471#issuecomment-656459565","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7471","id":656459565,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ1OTU2NQ==","user":{"login":"Jennifer88huang-zz","id":47805623,"node_id":"MDQ6VXNlcjQ3ODA1NjIz","avatar_url":"https://avatars.githubusercontent.com/u/47805623?v=4","gravatar_id":"","url":"https://api.github.com/users/Jennifer88huang-zz","html_url":"https://github.com/Jennifer88huang-zz","followers_url":"https://api.github.com/users/Jennifer88huang-zz/followers","following_url":"https://api.github.com/users/Jennifer88huang-zz/following{/other_user}","gists_url":"https://api.github.com/users/Jennifer88huang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Jennifer88huang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jennifer88huang-zz/subscriptions","organizations_url":"https://api.github.com/users/Jennifer88huang-zz/orgs","repos_url":"https://api.github.com/users/Jennifer88huang-zz/repos","events_url":"https://api.github.com/users/Jennifer88huang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Jennifer88huang-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T03:24:04Z","updated_at":"2020-07-10T03:24:04Z","author_association":"CONTRIBUTOR","body":"@Anonymitaet Thanks for your reviewing.\r\n@rdhabalia do you have any suggestion on the structure?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656459565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656496887","html_url":"https://github.com/apache/pulsar/issues/7488#issuecomment-656496887","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7488","id":656496887,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ5Njg4Nw==","user":{"login":"97arushisharma","id":23057357,"node_id":"MDQ6VXNlcjIzMDU3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/23057357?v=4","gravatar_id":"","url":"https://api.github.com/users/97arushisharma","html_url":"https://github.com/97arushisharma","followers_url":"https://api.github.com/users/97arushisharma/followers","following_url":"https://api.github.com/users/97arushisharma/following{/other_user}","gists_url":"https://api.github.com/users/97arushisharma/gists{/gist_id}","starred_url":"https://api.github.com/users/97arushisharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/97arushisharma/subscriptions","organizations_url":"https://api.github.com/users/97arushisharma/orgs","repos_url":"https://api.github.com/users/97arushisharma/repos","events_url":"https://api.github.com/users/97arushisharma/events{/privacy}","received_events_url":"https://api.github.com/users/97arushisharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T05:50:56Z","updated_at":"2020-07-10T05:50:56Z","author_association":"NONE","body":"@sijie thanks for the reply. Here are the bookkeeper.conf files.\r\n[bookkeeper-02.conf.txt](https://github.com/apache/pulsar/files/4901184/bookkeeper-02.conf.txt)\r\n[bookkeeper-01.conf.txt](https://github.com/apache/pulsar/files/4901206/bookkeeper-01.conf.txt)\r\n[bookkeeper-03.conf.txt](https://github.com/apache/pulsar/files/4901214/bookkeeper-03.conf.txt)\r\n\r\nAlso below is the metadata command I have used:\r\n```\r\nbin/pulsar initialize-cluster-metadata \\\r\n  --cluster miq-pulsar-cluster \\\r\n  --zookeeper apachepulsar-01:2181 \\\r\n  --configuration-store apachepulsar-01:2181 \\\r\n  --web-service-url http://apachepulsar-02:8080 \\\r\n  --web-service-url-tls https://apachepulsar-02:8443 \\\r\n  --broker-service-url pulsar://apachepulsar-02:6650 \\\r\n  --broker-service-url-tls pulsar+ssl://apachepulsar-02:6651\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656496887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656522260","html_url":"https://github.com/apache/pulsar/pull/7468#issuecomment-656522260","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7468","id":656522260,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjUyMjI2MA==","user":{"login":"Huanli-Meng","id":48120384,"node_id":"MDQ6VXNlcjQ4MTIwMzg0","avatar_url":"https://avatars.githubusercontent.com/u/48120384?v=4","gravatar_id":"","url":"https://api.github.com/users/Huanli-Meng","html_url":"https://github.com/Huanli-Meng","followers_url":"https://api.github.com/users/Huanli-Meng/followers","following_url":"https://api.github.com/users/Huanli-Meng/following{/other_user}","gists_url":"https://api.github.com/users/Huanli-Meng/gists{/gist_id}","starred_url":"https://api.github.com/users/Huanli-Meng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huanli-Meng/subscriptions","organizations_url":"https://api.github.com/users/Huanli-Meng/orgs","repos_url":"https://api.github.com/users/Huanli-Meng/repos","events_url":"https://api.github.com/users/Huanli-Meng/events{/privacy}","received_events_url":"https://api.github.com/users/Huanli-Meng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T07:10:12Z","updated_at":"2020-07-10T07:10:12Z","author_association":"CONTRIBUTOR","body":"@jiazhai @Jennifer88huang , could you please help review the PR?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656522260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656705729","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656705729","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656705729,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjcwNTcyOQ==","user":{"login":"sbourkeostk","id":58816076,"node_id":"MDQ6VXNlcjU4ODE2MDc2","avatar_url":"https://avatars.githubusercontent.com/u/58816076?v=4","gravatar_id":"","url":"https://api.github.com/users/sbourkeostk","html_url":"https://github.com/sbourkeostk","followers_url":"https://api.github.com/users/sbourkeostk/followers","following_url":"https://api.github.com/users/sbourkeostk/following{/other_user}","gists_url":"https://api.github.com/users/sbourkeostk/gists{/gist_id}","starred_url":"https://api.github.com/users/sbourkeostk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbourkeostk/subscriptions","organizations_url":"https://api.github.com/users/sbourkeostk/orgs","repos_url":"https://api.github.com/users/sbourkeostk/repos","events_url":"https://api.github.com/users/sbourkeostk/events{/privacy}","received_events_url":"https://api.github.com/users/sbourkeostk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T14:28:58Z","updated_at":"2020-07-10T14:28:58Z","author_association":"CONTRIBUTOR","body":"I don't think there's a problem in the Prometheus client, it's Pulsar that's creating the new metrics by setting a new label. Prometheus is clear in it's advice about not overusing labels:\r\nhttps://prometheus.io/docs/practices/instrumentation/#do-not-overuse-labels\r\nI believe the solution is simple - don't set the \"ts\" label and instead increment the metric.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656705729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656706289","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656706289","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656706289,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjcwNjI4OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T14:30:07Z","updated_at":"2020-07-10T14:30:07Z","author_association":"CONTRIBUTOR","body":"@rdhabalia there is already a mechanism in place. ptal at #7406","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656706289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656708101","html_url":"https://github.com/apache/pulsar/pull/7495#issuecomment-656708101","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7495","id":656708101,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjcwODEwMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T14:33:47Z","updated_at":"2020-07-10T14:33:47Z","author_association":"CONTRIBUTOR","body":"> it would be better to have a testcase cover this.\r\n\r\nit's not easy to test since the error only happens in background","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656708101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656712253","html_url":"https://github.com/apache/pulsar/issues/7476#issuecomment-656712253","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7476","id":656712253,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjcxMjI1Mw==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T14:42:19Z","updated_at":"2020-07-21T08:38:57Z","author_association":"CONTRIBUTOR","body":"@sijie, Thanks for you reply.\r\nThis problem has happened several times in our pulsar cluster.  At the first time, I thought it was  caused by session expires, but no SessionExpired related log can be found. \r\n```java\r\nlocalZkConnectionSvc.start(new ZookeeperSessionExpiredHandler() {\r\n            @Override\r\n            public void onSessionExpired() {\r\n                log.error(\"Shutting down ZK sessions: {}\", -1);\r\n            }\r\n\r\n            @Override\r\n            public void setWatcher(ZooKeeperSessionWatcher watcher) {\r\n\r\n            }\r\n        });\r\n\r\n        this.localZkCache = new LocalZooKeeperCache(localZkConnectionSvc.getLocalZooKeeper(),\r\n                (int) TimeUnit.MILLISECONDS.toSeconds(zookeeperSessionTimeoutMs), this.orderedExecutor);\r\n        localZkConnectionSvc.start(new ZookeeperSessionExpiredHandler() {\r\n            @Override\r\n            public void onSessionExpired() {\r\n                try {\r\n                    localZkCache.getZooKeeper().close();\r\n                } catch (InterruptedException e) {\r\n                    log.warn(\"Failed to shutdown ZooKeeper gracefully {}\", e.getMessage(), e);\r\n                }\r\n            }\r\n```\r\nIf we assume it was caused by zk session expires, does it means that connection with zk cluster has been broken? \r\nWhat should we do in this situation, just restart the service or any other suggenstions?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656712253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656769281","html_url":"https://github.com/apache/pulsar/issues/7492#issuecomment-656769281","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7492","id":656769281,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njc2OTI4MQ==","user":{"login":"horsteff","id":1541599,"node_id":"MDQ6VXNlcjE1NDE1OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1541599?v=4","gravatar_id":"","url":"https://api.github.com/users/horsteff","html_url":"https://github.com/horsteff","followers_url":"https://api.github.com/users/horsteff/followers","following_url":"https://api.github.com/users/horsteff/following{/other_user}","gists_url":"https://api.github.com/users/horsteff/gists{/gist_id}","starred_url":"https://api.github.com/users/horsteff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horsteff/subscriptions","organizations_url":"https://api.github.com/users/horsteff/orgs","repos_url":"https://api.github.com/users/horsteff/repos","events_url":"https://api.github.com/users/horsteff/events{/privacy}","received_events_url":"https://api.github.com/users/horsteff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T16:35:25Z","updated_at":"2020-07-10T16:35:25Z","author_association":"CONTRIBUTOR","body":"@sijie Yes, that's what I had in mind. I'm already working on it and will make a pull request then.\r\n\r\nOne question: After digging a little in the code and thinking about possible fixes I would rather like to drop the `withConfig` method from `PulsarStandaloneBuilder` and replace it with a `withConfigFile` method. I don't see any other way (without major changes), to apply configuration settings without unexpected overwriting and in an order a user would expect. A config file is required in any case and with a `withConfigFile` method the `PulsarStandaloneBuilder` is able to read it in it's `build` method like the `PulsarStandaloneStarter` constructor does, which would fix the second part of this issue. If a user wants to change some config settings by code, it's possible by modifying the `ServiceConfiguration` object of the created `PulsarStandalone` instance after calling `PulsarStandaloneBuilder.build()` and before calling `PulsarStandalone.start()` without the need to create an own `ServiceConfiguration` instance. This would also make clear to the user, that modifying the config object overwrites values set via configuration file (at least those not for the `LocalBookkeeperEnsemble`, but that's another story).\r\nDropping `PulsarStandaloneBuilder.withConfig` shouldn't be such a problem with existing code as currently it effectively does nothing. And it seems that no other user has noticed that. 8)\r\nIs this solution ok for you?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656769281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656861153","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656861153","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656861153,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg2MTE1Mw==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T19:51:43Z","updated_at":"2020-07-10T19:51:43Z","author_association":"CONTRIBUTOR","body":"@sijie I'm open to contributing a fix for this, but if it will change the end-user data contract, we'd need to vet it with the community. I'll need to investigate the matter further. \r\n\r\n@sbourkeostk Thanks for the feedback. I'll take a closer look at that information. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656861153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656861938","html_url":"https://github.com/apache/pulsar/pull/7430#issuecomment-656861938","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7430","id":656861938,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg2MTkzOA==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T19:53:51Z","updated_at":"2020-07-10T19:53:51Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656861938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656862813","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656862813","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656862813,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg2MjgxMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T19:56:09Z","updated_at":"2020-07-10T19:56:09Z","author_association":"CONTRIBUTOR","body":"> but if it will change the end-user data contract\r\n\r\nThis is not changing the data contract. This is just a metric to help debuggabiity. \r\n\r\nI think the timestamp was there to display the \"exceptions in the last X hours\". If it doesn't work with Prometheus, we need to get rid of the label. There are surely other ways to do the query without having that label, since the timeseries have timestamps.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656862813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656871611","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656871611","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656871611,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg3MTYxMQ==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T20:18:34Z","updated_at":"2020-07-10T20:21:20Z","author_association":"CONTRIBUTOR","body":"@merlimat  \r\nSince we're using the Prometheus Counter's internal state to keep track of our exceptions in our Java implementation, every time an exception is thrown, we're still adding the exception to the Counter, aren't we?\r\ne.g. https://github.com/apache/pulsar/blob/02bf9a0b770e53f5a6f3810e9602ccc9a4c05050/pulsar-functions/instance/src/main/java/org/apache/pulsar/functions/instance/stats/FunctionStatsManager.java#L293\r\n\r\nIf I'm not mistaken, even if we omit the timestamp, wouldn't we still need to check if that exception has been thrown recently and filter new writes (unless we change how we're tracking that information) to prevent the new exception from perpetuating the same issue?\r\nIf that's true and we need to filter new writes, then unless we periodically reset the exceptions (which we might already do), we could end up with new exceptions being suppressed inadvertently because they match old exceptions. There's a difference between an exception that occurs once a day and an exception that occurs with every method call, so we'd need a way to distinguish between them. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656871611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656873339","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-656873339","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":656873339,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg3MzMzOQ==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T20:22:54Z","updated_at":"2020-07-10T20:22:54Z","author_association":"CONTRIBUTOR","body":"It looks like we might be able to just remove the timestamp for the Go functions implementation, but is it that simple on the Java side? ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656873339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656881392","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656881392","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656881392,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg4MTM5Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T20:43:48Z","updated_at":"2020-07-10T20:43:48Z","author_association":"CONTRIBUTOR","body":"#7406 manages broker-wide throttling at the IO thread level and we can still reproduce above issue with the #7406 fix.\r\nThis PR actually manages this back-pressure at the broker level rather at the thread level and keeps broker stable in all scenarios. This PR also doesn't use a mutex and shouldn't create a contention in write path.\r\nSo, I think we will need this PR for OOM issues we are facing frequently.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656881392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656882367","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656882367","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656882367,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg4MjM2Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T20:46:14Z","updated_at":"2020-07-10T20:46:14Z","author_association":"CONTRIBUTOR","body":"@rdhabalia The change in #7406 is to avoid any contention in write path and to impose a global max.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656882367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656888277","html_url":"https://github.com/apache/pulsar/pull/7506#issuecomment-656888277","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7506","id":656888277,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg4ODI3Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T21:00:08Z","updated_at":"2020-07-10T21:00:08Z","author_association":"CONTRIBUTOR","body":"> The completable future will never return. So any sub-sequent topic lookups will fail because any\r\nattempts to load a topic will never attempt to re-open a managed ledger.\r\n\r\n@sijie Do you know why is that never never returning? Is that for DNS error on opening the ledger?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656888277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656909319","html_url":"https://github.com/apache/pulsar/pull/7506#issuecomment-656909319","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7506","id":656909319,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkwOTMxOQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T21:55:51Z","updated_at":"2020-07-10T21:55:51Z","author_association":"MEMBER","body":"@merlimat it is stuck in LedgerRecoveryOp when recovering cursors. I haven't caught the real exception. My feeling is more coming from the zookeeper side. The chaos test we did is killing the Kubernetes worker node hardly. In that worker node, it has one zookeeper pod, one bookkeeper pod, and one broker pod. This sounds like causing some zookeeper call didn't come back and the ledger recovery op stuck without triggering any callback which in return causes the problem in managed ledger library.\r\n\r\nA side note - I created an issue a while ago to separate loading cursors from loading managed ledger. The idea is that we should allow producers to produce messages once the managed ledger is ready. This would improve write availability. https://github.com/apache/pulsar/issues/7404 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656909319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656911219","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656911219","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656911219,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkxMTIxOQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T22:01:05Z","updated_at":"2020-07-10T22:01:05Z","author_association":"CONTRIBUTOR","body":"> The change in #7406 is to avoid any contention in write path and to impose a global max.\r\n\r\nI have gone through with #7406 PR but as I said it distributes max global bytes across separate IO threads which has its own disadvantage eg: 1gb across 30 IO threads means 1 IO thread can only do 33MB it means as a user I have to create multiple connections and hope it will be served by other IO thread to get higher throughput.\r\nIt doesn't happen in this PR as all connections see 1 count without much contention. Please let me know if you see any contention or issue with this PR. because I think we would prefer to use global count across all cnx and handle the backpressure. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656911219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656922057","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656922057","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656922057,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkyMjA1Nw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T22:29:51Z","updated_at":"2020-07-10T22:29:51Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656922057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656944897","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656944897","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656944897,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0NDg5Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:06:25Z","updated_at":"2020-07-11T00:06:25Z","author_association":"CONTRIBUTOR","body":"> g: 1gb across 30 IO threads means 1 IO thread can only do 33MB it means as a user I have to create multiple connections and hope it will be served by other IO thread to get higher throughput.\r\n\r\nA couple of notes: \r\n * You won't get higher throughput after a certain amount of memory (eg: 30MB)\r\n * If you have 16 cores available, you would also have >> 1GB of direct mem\r\n\r\nFinally, the number of messages/s is not a good proxy measure for the amount of memory required in the broker\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656944897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656952881","html_url":"https://github.com/apache/pulsar/pull/7506#issuecomment-656952881","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7506","id":656952881,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk1Mjg4MQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:48:58Z","updated_at":"2020-07-11T00:48:58Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656952881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656959121","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656959121","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656959121,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk1OTEyMQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T01:23:54Z","updated_at":"2020-07-11T01:23:54Z","author_association":"CONTRIBUTOR","body":"> Finally, the number of messages/s is not a good proxy measure for the amount of memory required in the broker\r\n\r\nYes, I will add restriction based on number bytes as well along with number of messages. However, my argument about #7406 is I don't want to restrict throughput per thread and that requires user to create multiple connections to get higher throughput and that will definitely not work for us in the long term.\r\nSo, can you please let me know if you see any major concern about the PR if not then I can add restriction based on bytes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656959121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656965741","html_url":"https://github.com/apache/pulsar/pull/7473#issuecomment-656965741","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7473","id":656965741,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk2NTc0MQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T01:55:28Z","updated_at":"2020-07-11T01:55:28Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656965741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656967808","html_url":"https://github.com/apache/pulsar/issues/7512#issuecomment-656967808","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7512","id":656967808,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk2NzgwOA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T02:09:16Z","updated_at":"2020-07-11T02:09:16Z","author_association":"CONTRIBUTOR","body":"@mikecaat Thanks for the feedback, the behavior is not expected. I think you have found the root cause, are you interested in fixing it?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656967808/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656968891","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656968891","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656968891,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk2ODg5MQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T02:17:29Z","updated_at":"2020-07-11T02:17:29Z","author_association":"CONTRIBUTOR","body":"> Yes, I will add restriction based on number bytes as well along with number of messages.\r\n\r\nIs it the same as #6178 does?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656968891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656969804","html_url":"https://github.com/apache/pulsar/pull/7498#issuecomment-656969804","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7498","id":656969804,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk2OTgwNA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T02:24:03Z","updated_at":"2020-07-11T02:24:03Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656969804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656974378","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-656974378","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":656974378,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk3NDM3OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T02:58:59Z","updated_at":"2020-07-11T02:58:59Z","author_association":"CONTRIBUTOR","body":"> Is it the same as #6178 does?\r\n\r\nYes, but #6178 uses a volatile counter and that creates contention in write path and therefore, @merlimat tried to remove it in #7406 by using thread-local. but only downside for #7406 is it puts restriction for each IO thread that can makes user to create multiple connections to achieve higher throughput. and I believe this PR addresses both the issues and we can use the same buffer config introduced in #6178.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656974378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656976130","html_url":"https://github.com/apache/pulsar/issues/7512#issuecomment-656976130","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7512","id":656976130,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk3NjEzMA==","user":{"login":"mikecaat","id":35882227,"node_id":"MDQ6VXNlcjM1ODgyMjI3","avatar_url":"https://avatars.githubusercontent.com/u/35882227?v=4","gravatar_id":"","url":"https://api.github.com/users/mikecaat","html_url":"https://github.com/mikecaat","followers_url":"https://api.github.com/users/mikecaat/followers","following_url":"https://api.github.com/users/mikecaat/following{/other_user}","gists_url":"https://api.github.com/users/mikecaat/gists{/gist_id}","starred_url":"https://api.github.com/users/mikecaat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikecaat/subscriptions","organizations_url":"https://api.github.com/users/mikecaat/orgs","repos_url":"https://api.github.com/users/mikecaat/repos","events_url":"https://api.github.com/users/mikecaat/events{/privacy}","received_events_url":"https://api.github.com/users/mikecaat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T03:10:24Z","updated_at":"2020-07-11T03:10:49Z","author_association":"CONTRIBUTOR","body":"@codelipenghui Thanks for replying. Since I made the pull request, please review it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656976130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656992587","html_url":"https://github.com/apache/pulsar/issues/7479#issuecomment-656992587","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7479","id":656992587,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk5MjU4Nw==","user":{"login":"sxpsxp12","id":24519721,"node_id":"MDQ6VXNlcjI0NTE5NzIx","avatar_url":"https://avatars.githubusercontent.com/u/24519721?v=4","gravatar_id":"","url":"https://api.github.com/users/sxpsxp12","html_url":"https://github.com/sxpsxp12","followers_url":"https://api.github.com/users/sxpsxp12/followers","following_url":"https://api.github.com/users/sxpsxp12/following{/other_user}","gists_url":"https://api.github.com/users/sxpsxp12/gists{/gist_id}","starred_url":"https://api.github.com/users/sxpsxp12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxpsxp12/subscriptions","organizations_url":"https://api.github.com/users/sxpsxp12/orgs","repos_url":"https://api.github.com/users/sxpsxp12/repos","events_url":"https://api.github.com/users/sxpsxp12/events{/privacy}","received_events_url":"https://api.github.com/users/sxpsxp12/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T05:18:12Z","updated_at":"2020-07-11T05:18:12Z","author_association":"NONE","body":"**The test results are the same with versions 2.5.2 cgo client and 2.6.0 cgo client**\r\n\r\n# Organized the following information\r\n## Work 1\r\n1. producer config\r\n\r\n```\r\n\tproducer, err := pulsar_client.SingletonPulsarClient().\r\n\t\tCreateProducer(pulsar.ProducerOptions{\r\n\t\t\tName:  \"demo-producer-down-cgo\",\r\n\t\t\tTopic: topic,\r\n\r\n\t\t\tCompressionType: pulsar.LZ4,    //or pulsar.ZLib or pulsar.ZSTD\r\n\t\t\tHashingScheme:   pulsar.Murmur3_32Hash,\r\n\r\n\t\t\tMaxPendingMessages: 30000,\r\n\r\n\t\t\tBatching:                true,\r\n\t\t\tBatchingMaxMessages:     1000,\r\n\t\t\tBatchingMaxPublishDelay: 3000 * time.Millisecond,\r\n\t\t})\r\n```\r\n\r\n2. consumer config\r\n\r\n```\r\n\tvar err error\r\n\tconsumer, err = pulsar_client.SingletonPulsarClient().\r\n\t\tCreateConsumer(pulsar.ConsumerOptions{\r\n\t\t\tTopicsPattern:    \"persistent://dataplatform/wsn/down_.*\",\r\n\t\t\t//TopicsPattern:    \"persistent://public/default/demo.*\",\r\n\t\t\tSubscriptionName: \"demo-mock-consumer-cgo\",\r\n\r\n\t\t\tSubscriptionInitPos: pulsar.Latest,\r\n\t\t\tType:                pulsar.Failover,\r\n\r\n\t\t\tReceiverQueueSize: 5000,\r\n\t\t\tMessageChannel:    messageChan,\r\n\t\t})\r\n```\r\n\r\n## Work 2\r\n\r\n1. producer config\r\n\r\n```\r\n\tproducer, err := pulsar_client.SingletonPulsarClient().\r\n\t\tCreateProducer(pulsar.ProducerOptions{\r\n\t\t\tName:  \"demo-producer-down-cgo\",\r\n\t\t\tTopic: topic,\r\n\r\n\t\t\tCompressionType: pulsar.ZSTD,  //or pulsar.ZLib or pulsar pulsar.LZ4\r\n\t\t\tHashingScheme:   pulsar.Murmur3_32Hash,\r\n\r\n\t\t\tMaxPendingMessages: 30000,\r\n\r\n\t\t\tBatching:                false,\r\n\t\t\tBatchingMaxMessages:     1000,\r\n\t\t\tBatchingMaxPublishDelay: 3000 * time.Millisecond,\r\n\t\t})\r\n```\r\n\r\n2. consumer config\r\n\r\n```\r\n\tvar err error\r\n\tconsumer, err = pulsar_client.SingletonPulsarClient().\r\n\t\tCreateConsumer(pulsar.ConsumerOptions{\r\n\t\t\tTopicsPattern:    \"persistent://dataplatform/wsn/down_.*\",\r\n\t\t\t//TopicsPattern:    \"persistent://public/default/demo.*\",\r\n\t\t\tSubscriptionName: \"demo-mock-consumer-cgo\",\r\n\r\n\t\t\tSubscriptionInitPos: pulsar.Latest,\r\n\t\t\tType:                pulsar.KeyShared,   //or pulsar.Failover\r\n\r\n\t\t\tReceiverQueueSize: 5000,\r\n\t\t\tMessageChannel:    messageChan,\r\n\t\t})\r\n```\r\n\r\n\r\n\r\n## No Work1\r\n1. producer config\r\n\r\n```\r\n\tproducer, err := pulsar_client.SingletonPulsarClient().\r\n\t\tCreateProducer(pulsar.ProducerOptions{\r\n\t\t\tName:  \"demo-producer-down-cgo\",\r\n\t\t\tTopic: topic,\r\n\r\n\t\t\tCompressionType: pulsar.LZ4, //or pulsar.ZLib or pulsar.ZSTD\r\n\t\t\tHashingScheme:   pulsar.Murmur3_32Hash,\r\n\r\n\t\t\tMaxPendingMessages: 30000,\r\n\r\n\t\t\tBatching:                true,\r\n\t\t\tBatchingMaxMessages:     1000,\r\n\t\t\tBatchingMaxPublishDelay: 3000 * time.Millisecond,\r\n\t\t})\r\n```\r\n2. consumer config\r\n\r\n```\r\n\tvar err error\r\n\tconsumer, err = pulsar_client.SingletonPulsarClient().\r\n\t\tCreateConsumer(pulsar.ConsumerOptions{\r\n\t\t\tTopicsPattern:    \"persistent://dataplatform/wsn/down_.*\",\r\n\t\t\t//TopicsPattern:    \"persistent://public/default/demo.*\",\r\n\t\t\tSubscriptionName: \"demo-mock-consumer-cgo\",\r\n\r\n\t\t\tSubscriptionInitPos: pulsar.Latest,\r\n\t\t\tType:                pulsar.KeyShared,\r\n\r\n\t\t\tReceiverQueueSize: 5000,\r\n\t\t\tMessageChannel:    messageChan,\r\n\t\t})\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/656992587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657021104","html_url":"https://github.com/apache/pulsar/issues/5598#issuecomment-657021104","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5598","id":657021104,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzAyMTEwNA==","user":{"login":"roackb2","id":5952025,"node_id":"MDQ6VXNlcjU5NTIwMjU=","avatar_url":"https://avatars.githubusercontent.com/u/5952025?v=4","gravatar_id":"","url":"https://api.github.com/users/roackb2","html_url":"https://github.com/roackb2","followers_url":"https://api.github.com/users/roackb2/followers","following_url":"https://api.github.com/users/roackb2/following{/other_user}","gists_url":"https://api.github.com/users/roackb2/gists{/gist_id}","starred_url":"https://api.github.com/users/roackb2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roackb2/subscriptions","organizations_url":"https://api.github.com/users/roackb2/orgs","repos_url":"https://api.github.com/users/roackb2/repos","events_url":"https://api.github.com/users/roackb2/events{/privacy}","received_events_url":"https://api.github.com/users/roackb2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T09:13:07Z","updated_at":"2020-07-11T09:24:24Z","author_association":"NONE","body":"I'm successful to authorize a Node.js WebSocket client with JWT authentication and authorization enabled on Pulsar, but I have issue establishing the connection.\r\n\r\nBy using [npm ws](https://www.npmjs.com/package/ws) module, I was able to set Authorization Bearer like this:\r\n```javascript\r\nthis.wsUrl = `wss://${opts.host}:${opts.port}/ws/v2/consumer/persistent/${opts.tenant}/${opts.namespace}/${opts.topic}/${opts.subscription}`;\r\nthis.wsOpts = {\r\n    headers: {\r\n        Authorization: `Bearer ${opts.token}`\r\n    }\r\n}\r\nthis.websocket = new WebSocket(this.wsUrl, this.wsOpts);\r\n```\r\nThe resulting url is like `wss://localhost:8443/ws/v2/consumer/persistent/my-tenant/my-namespace/my-topic/sub-1`\r\n\r\nAnd viewing the log of Pulsar, I could see that authorization is successful:\r\n```\r\n08:59:55.403 [pulsar-web-69-3] INFO  org.apache.pulsar.websocket.AbstractWebSocketHandler - [172.17.0.1:53360] Authenticated WebSocket client topology-admin on topic persistent://my-tenant/my-namespace/my-topic\r\n```\r\nHowever, the following error shows up:\r\n```\r\n08:59:55.617 [pulsar-client-io-94-6] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x618b3eb3, L:/127.0.0.1:47428 - R:localhost/127.0.0.1:6650]] Connected to server\r\n08:59:55.633 [pulsar-io-51-1] INFO  org.apache.pulsar.broker.service.ServerCnx - New connection from /127.0.0.1:47428\r\n08:59:55.716 [pulsar-io-51-1] WARN  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:47428] Got exception io.netty.handler.codec.TooLongFrameException: Adjusted frame length exceeds 5253120: 369295620 - discarded\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.fail(LengthFieldBasedFrameDecoder.java:503)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.failIfNecessary(LengthFieldBasedFrameDecoder.java:489)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.exceededFrameLength(LengthFieldBasedFrameDecoder.java:376)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:419)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:332)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:498)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:437)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:792)\r\n\tat io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:475)\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:378)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n08:59:55.752 [pulsar-io-51-1] INFO  org.apache.pulsar.broker.service.ServerCnx - Closed connection from /127.0.0.1:47428\r\n08:59:55.750 [pulsar-client-io-94-6] WARN  org.apache.pulsar.client.impl.ClientCnx - Error during handshake\r\njava.nio.channels.ClosedChannelException: null\r\n\tat io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1076) [io.netty-netty-handler-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384) [io.netty-netty-transport-native-epoll-4.1.48.Final-linux-x86_64.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_252]\r\n08:59:55.822 [pulsar-client-io-94-6] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x618b3eb3, L:/127.0.0.1:47428 ! R:localhost/127.0.0.1:6650] Disconnected\r\n08:59:55.827 [pulsar-client-io-94-6] WARN  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x618b3eb3, L:/127.0.0.1:47428 ! R:localhost/127.0.0.1:6650]] Connection handshake failed: org.apache.pulsar.client.api.PulsarClientException: Connection already closed\r\n08:59:55.933 [pulsar-external-listener-95-1] WARN  org.apache.pulsar.client.impl.PulsarClientImpl - [topic: persistent://my-tenant/my-namespace/my-topic] Could not get connection while getPartitionedTopicMetadata -- Will try again in 100 ms\r\n08:59:55.955 [pulsar-client-io-94-8] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x13fe0546, L:/127.0.0.1:47430 - R:localhost/127.0.0.1:6650]] Connected to server\r\n08:59:55.960 [pulsar-io-51-2] INFO  org.apache.pulsar.broker.service.ServerCnx - New connection from /127.0.0.1:47430\r\n08:59:55.972 [pulsar-io-51-2] WARN  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:47430] Got exception io.netty.handler.codec.TooLongFrameException: Adjusted frame length exceeds 5253120: 369295620 - discarded\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.fail(LengthFieldBasedFrameDecoder.java:503)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.failIfNecessary(LengthFieldBasedFrameDecoder.java:489)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.exceededFrameLength(LengthFieldBasedFrameDecoder.java:376)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:419)\r\n\tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:332)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:498)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:437)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:792)\r\n\tat io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:475)\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:378)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n08:59:55.994 [pulsar-io-51-2] INFO  org.apache.pulsar.broker.service.ServerCnx - Closed connection from /127.0.0.1:47430\r\n08:59:56.005 [pulsar-client-io-94-8] WARN  org.apache.pulsar.client.impl.ClientCnx - Error during handshake\r\njava.nio.channels.ClosedChannelException: null\r\n\tat io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1076) [io.netty-netty-handler-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:241) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:262) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:248) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe$8.run(AbstractChannel.java:818) [io.netty-netty-transport-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384) [io.netty-netty-transport-native-epoll-4.1.48.Final-linux-x86_64.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_252]\r\n08:59:56.021 [pulsar-client-io-94-8] INFO  org.apache.pulsar.client.impl.ClientCnx - [id: 0x13fe0546, L:/127.0.0.1:47430 ! R:localhost/127.0.0.1:6650] Disconnected\r\n08:59:56.024 [pulsar-client-io-94-8] WARN  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x13fe0546, L:/127.0.0.1:47430 ! R:localhost/127.0.0.1:6650]] Connection handshake failed: org.apache.pulsar.client.api.PulsarClientException: Connection already closed\r\n08:59:56.218 [pulsar-external-listener-95-1] WARN  org.apache.pulsar.client.impl.PulsarClientImpl - [topic: persistent://my-tenant/my-namespace/my-topic] Could not get connection while getPartitionedTopicMetadata -- Will try again in 191 ms\r\n```\r\nWith some study, I know that `TooLongFrameException` is most likely caused by mismatch of whether using TLS between the client and the broker, and by viewing the log, I see this part: \r\n```\r\n08:59:55.617 [pulsar-client-io-94-6] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x618b3eb3, L:/127.0.0.1:47428 - R:localhost/127.0.0.1:6650]] Connected to server\r\n```\r\n\r\n It seems that `ConnectionPool` is connecting secure WebSocket to non-TLS boker service port `6650`, can anyone give me some direction how to make secure WebSocket work?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657021104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657033193","html_url":"https://github.com/apache/pulsar/pull/5570#issuecomment-657033193","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5570","id":657033193,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzAzMzE5Mw==","user":{"login":"jiazhai","id":6348208,"node_id":"MDQ6VXNlcjYzNDgyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/6348208?v=4","gravatar_id":"","url":"https://api.github.com/users/jiazhai","html_url":"https://github.com/jiazhai","followers_url":"https://api.github.com/users/jiazhai/followers","following_url":"https://api.github.com/users/jiazhai/following{/other_user}","gists_url":"https://api.github.com/users/jiazhai/gists{/gist_id}","starred_url":"https://api.github.com/users/jiazhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiazhai/subscriptions","organizations_url":"https://api.github.com/users/jiazhai/orgs","repos_url":"https://api.github.com/users/jiazhai/repos","events_url":"https://api.github.com/users/jiazhai/events{/privacy}","received_events_url":"https://api.github.com/users/jiazhai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T10:10:43Z","updated_at":"2020-07-11T10:10:43Z","author_association":"MEMBER","body":"@codelipenghui would you please help review it again? seems @congbobo184 has already fixed most of the comments.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657033193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657084842","html_url":"https://github.com/apache/pulsar/pull/7498#issuecomment-657084842","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7498","id":657084842,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA4NDg0Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T15:52:36Z","updated_at":"2020-07-11T15:52:36Z","author_association":"CONTRIBUTOR","body":"Wouldn't the GC CLI options be adapted when JVM > 1.8?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657084842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657097678","html_url":"https://github.com/apache/pulsar/issues/6935#issuecomment-657097678","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6935","id":657097678,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA5NzY3OA==","user":{"login":"alexku7","id":42849762,"node_id":"MDQ6VXNlcjQyODQ5NzYy","avatar_url":"https://avatars.githubusercontent.com/u/42849762?v=4","gravatar_id":"","url":"https://api.github.com/users/alexku7","html_url":"https://github.com/alexku7","followers_url":"https://api.github.com/users/alexku7/followers","following_url":"https://api.github.com/users/alexku7/following{/other_user}","gists_url":"https://api.github.com/users/alexku7/gists{/gist_id}","starred_url":"https://api.github.com/users/alexku7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexku7/subscriptions","organizations_url":"https://api.github.com/users/alexku7/orgs","repos_url":"https://api.github.com/users/alexku7/repos","events_url":"https://api.github.com/users/alexku7/events{/privacy}","received_events_url":"https://api.github.com/users/alexku7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T17:15:23Z","updated_at":"2020-07-11T17:15:23Z","author_association":"NONE","body":"Hello @sijie \r\nRecently, we have upgraded to pulsar 2.6.0 but unfortunately the issue still exists :(\r\nIt seems that the topic still is not deleted because of opened ledger.\r\n\r\nI  am just wondering if the fix has been merged into 2.6.0 ? \r\nI","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657097678/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657157586","html_url":"https://github.com/apache/pulsar/pull/7516#issuecomment-657157586","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7516","id":657157586,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzE1NzU4Ng==","user":{"login":"Dishwasha","id":48307,"node_id":"MDQ6VXNlcjQ4MzA3","avatar_url":"https://avatars.githubusercontent.com/u/48307?v=4","gravatar_id":"","url":"https://api.github.com/users/Dishwasha","html_url":"https://github.com/Dishwasha","followers_url":"https://api.github.com/users/Dishwasha/followers","following_url":"https://api.github.com/users/Dishwasha/following{/other_user}","gists_url":"https://api.github.com/users/Dishwasha/gists{/gist_id}","starred_url":"https://api.github.com/users/Dishwasha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dishwasha/subscriptions","organizations_url":"https://api.github.com/users/Dishwasha/orgs","repos_url":"https://api.github.com/users/Dishwasha/repos","events_url":"https://api.github.com/users/Dishwasha/events{/privacy}","received_events_url":"https://api.github.com/users/Dishwasha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T01:08:38Z","updated_at":"2020-07-12T01:08:38Z","author_association":"CONTRIBUTOR","body":"The failing tests seem likely to be a pre-existing problem with antiafinity and unrelated.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657157586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657232274","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-657232274","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":657232274,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzIzMjI3NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T14:51:19Z","updated_at":"2020-07-12T14:51:19Z","author_association":"CONTRIBUTOR","body":"> don't want to restrict throughput per thread and that requires user to create multiple connections t\r\n\r\n@rdhabalia It does not impact the throughput once you have a minimum of memory per thread.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657232274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657300461","html_url":"https://github.com/apache/pulsar/pull/7515#issuecomment-657300461","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7515","id":657300461,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMwMDQ2MQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T00:30:10Z","updated_at":"2020-07-13T00:30:10Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657300461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657306109","html_url":"https://github.com/apache/pulsar/pull/7448#issuecomment-657306109","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7448","id":657306109,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMwNjEwOQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T01:00:34Z","updated_at":"2020-07-13T01:00:34Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657306109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657306782","html_url":"https://github.com/apache/pulsar/issues/7481#issuecomment-657306782","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7481","id":657306782,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMwNjc4Mg==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T01:03:59Z","updated_at":"2020-07-13T01:03:59Z","author_association":"CONTRIBUTOR","body":"@anvinjain Thanks for the feedback, are you interested in pushing a fix for it?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657306782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657376872","html_url":"https://github.com/apache/pulsar/issues/7455#issuecomment-657376872","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7455","id":657376872,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzM3Njg3Mg==","user":{"login":"feeblefakie","id":1052473,"node_id":"MDQ6VXNlcjEwNTI0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/1052473?v=4","gravatar_id":"","url":"https://api.github.com/users/feeblefakie","html_url":"https://github.com/feeblefakie","followers_url":"https://api.github.com/users/feeblefakie/followers","following_url":"https://api.github.com/users/feeblefakie/following{/other_user}","gists_url":"https://api.github.com/users/feeblefakie/gists{/gist_id}","starred_url":"https://api.github.com/users/feeblefakie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feeblefakie/subscriptions","organizations_url":"https://api.github.com/users/feeblefakie/orgs","repos_url":"https://api.github.com/users/feeblefakie/repos","events_url":"https://api.github.com/users/feeblefakie/events{/privacy}","received_events_url":"https://api.github.com/users/feeblefakie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T06:02:12Z","updated_at":"2020-07-13T06:03:30Z","author_association":"NONE","body":"@codelipenghui I just re-executed it . Here are the logs.\r\n[sub1.txt](https://github.com/apache/pulsar/files/4910870/sub1.txt)\r\n[sub2.txt](https://github.com/apache/pulsar/files/4910871/sub2.txt)\r\n\r\nYou can check the inconsistency with [check.sh](https://github.com/feeblefakie/misc/blob/master/pulsar/check.sh) as needed. (You need to delete `txt` suffix to run. I added .txt suffix for GitHub)\r\n\r\nRegarding the broker dump, I don't know what you mean/need. Can you clarify ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657376872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657389671","html_url":"https://github.com/apache/pulsar/issues/7455#issuecomment-657389671","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7455","id":657389671,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzM4OTY3MQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T06:45:44Z","updated_at":"2020-07-13T06:45:44Z","author_association":"CONTRIBUTOR","body":"> Regarding the broker dump, I don't know what you mean/need. Can you clarify ? \r\n\r\nthe broker heap dump, I want to check some state of key_shared subscription.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657389671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657637333","html_url":"https://github.com/apache/pulsar/pull/7522#issuecomment-657637333","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7522","id":657637333,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzYzNzMzMw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T15:45:30Z","updated_at":"2020-07-13T15:45:30Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657637333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657690737","html_url":"https://github.com/apache/pulsar/issues/7479#issuecomment-657690737","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7479","id":657690737,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzY5MDczNw==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T17:29:01Z","updated_at":"2020-07-13T17:29:01Z","author_association":"CONTRIBUTOR","body":"It looks like a problem of broker. I have tested following Java client (commit  c94067d) with broker 2.6.0 standalone:\r\n \r\n```java\r\nimport org.apache.pulsar.client.api.*;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class ProducerDemo {\r\n    public static void main(String[] args) {\r\n        try (PulsarClient client = PulsarClient.builder().serviceUrl(\"pulsar://localhost:6650\").build()) {\r\n            Consumer<String> consumer = client.newConsumer(Schema.STRING) //\r\n                    .topic(\"ParTopic\") //\r\n                    .subscriptionName(\"my-sub\") //\r\n                    .subscriptionType(SubscriptionType.Key_Shared) //\r\n                    .subscribe();\r\n            Producer<String> producer = client.newProducer(Schema.STRING) //\r\n                    .compressionType(CompressionType.LZ4) //\r\n                    .topic(\"ParTopic\") //\r\n                    .create();\r\n            MessageId id = producer.newMessage().value(\"hello world\").send();\r\n            System.out.println(\"send to \" + Arrays.toString(id.toByteArray()));\r\n            producer.close();\r\n            Message<String> msg = consumer.receive(30, TimeUnit.SECONDS);\r\n            System.out.println(\"receive \" + new String(msg.getData()));\r\n            consumer.close();\r\n        } catch (PulsarClientException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt stuck at `consumer.receive` until timeout exceeds. The broker's log is\r\n\r\n```\r\n01:23:14.206 [bookkeeper-ml-workers-OrderedExecutor-2-0] ERROR org.apache.bookkeeper.common.util.SafeRunnable - Unexpected throwable caught \r\njava.lang.IndexOutOfBoundsException: readerIndex: 77, writerIndex: -268173235 (expected: 0 <= readerIndex <= writerIndex <= capacity(4096))\r\n\tat io.netty.buffer.AbstractByteBuf.checkIndexBounds(AbstractByteBuf.java:112) ~[io.netty-netty-buffer-4.1.48.Final.jar:4.1.48.Final]\r\n\tat io.netty.buffer.AbstractByteBuf.writerIndex(AbstractByteBuf.java:135) ~[io.netty-netty-buffer-4.1.48.Final.jar:4.1.48.Final]\r\n\tat org.apache.pulsar.common.protocol.Commands.deSerializeSingleMessageInBatch(Commands.java:1707) ~[org.apache.pulsar-pulsar-common-2.6.0.jar:2.6.0]\r\n\tat org.apache.pulsar.broker.service.AbstractBaseDispatcher.peekStickyKey(AbstractBaseDispatcher.java:161) ~[org.apache.pulsar-pulsar-broker-2.6.0.jar:2.6.0]\r\n\tat org.apache.pulsar.broker.service.persistent.PersistentStickyKeyDispatcherMultipleConsumers.sendMessagesToConsumers(PersistentStickyKeyDispatcherMultipleConsumers.java:145) ~[org.apache.pulsar-pulsar-broker-2.6.0.jar:2.6.0]\r\n\tat org.apache.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:476) ~[org.apache.pulsar-pulsar-broker-2.6.0.jar:2.6.0]\r\n\tat org.apache.bookkeeper.mledger.impl.OpReadEntry.lambda$checkReadCompletion$2(OpReadEntry.java:152) ~[org.apache.pulsar-managed-ledger-2.6.0.jar:2.6.0]\r\n\tat org.apache.bookkeeper.mledger.util.SafeRun$1.safeRun(SafeRun.java:32) ~[org.apache.pulsar-managed-ledger-2.6.0.jar:2.6.0]\r\n\tat org.apache.bookkeeper.common.util.SafeRunnable.run(SafeRunnable.java:36) [org.apache.bookkeeper-bookkeeper-common-4.10.0.jar:4.10.0]\r\n\tat org.apache.bookkeeper.common.util.OrderedExecutor$TimedRunnable.run(OrderedExecutor.java:203) [org.apache.bookkeeper-bookkeeper-common-4.10.0.jar:4.10.0]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_251]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_251]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [io.netty-netty-common-4.1.48.Final.jar:4.1.48.Final]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_251]\r\n```\r\n\r\nThe worse thing is that this corrupted message (I guess) could affect following messages. After that, I changed `LZ4` to `NONE`, it still didn't work. But if I stopped the standalone, then delete `data` directory, and started the standalone again, `Key_Shared` with `Compression.NONE` worked.\r\n\r\nI didn't test with latest broker, did the latest broker solve this problem or just change some behaviour? @sijie ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657690737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657693308","html_url":"https://github.com/apache/pulsar/issues/7479#issuecomment-657693308","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7479","id":657693308,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzY5MzMwOA==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T17:34:15Z","updated_at":"2020-07-13T17:34:15Z","author_association":"CONTRIBUTOR","body":"Just now I saw the [PR #7416](https://github.com/apache/pulsar/pull/7416) that could fix this bug.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657693308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657790765","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-657790765","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":657790765,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzc5MDc2NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T20:59:28Z","updated_at":"2020-07-13T20:59:28Z","author_association":"CONTRIBUTOR","body":"@merlimat we need a fix for the OOM soon. I don't see any issue with this PR but if we still want to move forward with #7406 then can we please confirm and we can have that as a fix. However, we should update the disadvantage of this PR to avoid similar PR in future with the same fix (because based on past experience such things always happen).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657790765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657882027","html_url":"https://github.com/apache/pulsar/pull/5644#issuecomment-657882027","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5644","id":657882027,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzg4MjAyNw==","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T23:46:46Z","updated_at":"2020-07-13T23:46:46Z","author_association":"CONTRIBUTOR","body":"Looks like com.fasterxml.jackson.core:jackson-databind is up-to-date now, so this is no longer needed.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657882027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657882037","html_url":"https://github.com/apache/pulsar/pull/5645#issuecomment-657882037","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5645","id":657882037,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzg4MjAzNw==","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T23:46:47Z","updated_at":"2020-07-13T23:46:47Z","author_association":"CONTRIBUTOR","body":"Looks like com.fasterxml.jackson.core:jackson-databind is up-to-date now, so this is no longer needed.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657882037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657893897","html_url":"https://github.com/apache/pulsar/pull/7416#issuecomment-657893897","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7416","id":657893897,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzg5Mzg5Nw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T00:15:22Z","updated_at":"2020-07-14T00:15:22Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657893897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657894295","html_url":"https://github.com/apache/pulsar/pull/7430#issuecomment-657894295","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7430","id":657894295,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzg5NDI5NQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T00:16:35Z","updated_at":"2020-07-14T00:16:35Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657894295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657906590","html_url":"https://github.com/apache/pulsar/pull/7416#issuecomment-657906590","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7416","id":657906590,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkwNjU5MA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:04:05Z","updated_at":"2020-07-14T01:04:05Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657906590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657912182","html_url":"https://github.com/apache/pulsar/issues/7500#issuecomment-657912182","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7500","id":657912182,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkxMjE4Mg==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:24:30Z","updated_at":"2020-07-14T01:24:30Z","author_association":"MEMBER","body":"> Is the backlog of the newly created subscription over 1GB backlog quotas?\r\n\r\nYes. Because the backlog will exceed 1GB limitation.\r\n\r\n> Will a producer immediately stop because of producer_request_hold policy?\r\n\r\nYes. That's correct.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657912182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657913463","html_url":"https://github.com/apache/pulsar/issues/7517#issuecomment-657913463","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7517","id":657913463,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkxMzQ2Mw==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:29:23Z","updated_at":"2020-07-14T01:29:23Z","author_association":"MEMBER","body":"@kezhuw Are you interested in sending a pull request to fix it?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657913463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657920061","html_url":"https://github.com/apache/pulsar/pull/7453#issuecomment-657920061","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7453","id":657920061,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkyMDA2MQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:55:13Z","updated_at":"2020-07-14T01:55:13Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657920061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657922721","html_url":"https://github.com/apache/pulsar/issues/7492#issuecomment-657922721","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7492","id":657922721,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkyMjcyMQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T02:05:39Z","updated_at":"2020-07-14T02:05:39Z","author_association":"MEMBER","body":"@horsteff that sounds a good solution to me.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657922721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657945624","html_url":"https://github.com/apache/pulsar/pull/7453#issuecomment-657945624","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7453","id":657945624,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0NTYyNA==","user":{"login":"Jennifer88huang-zz","id":47805623,"node_id":"MDQ6VXNlcjQ3ODA1NjIz","avatar_url":"https://avatars.githubusercontent.com/u/47805623?v=4","gravatar_id":"","url":"https://api.github.com/users/Jennifer88huang-zz","html_url":"https://github.com/Jennifer88huang-zz","followers_url":"https://api.github.com/users/Jennifer88huang-zz/followers","following_url":"https://api.github.com/users/Jennifer88huang-zz/following{/other_user}","gists_url":"https://api.github.com/users/Jennifer88huang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Jennifer88huang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jennifer88huang-zz/subscriptions","organizations_url":"https://api.github.com/users/Jennifer88huang-zz/orgs","repos_url":"https://api.github.com/users/Jennifer88huang-zz/repos","events_url":"https://api.github.com/users/Jennifer88huang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Jennifer88huang-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:30:14Z","updated_at":"2020-07-14T03:30:14Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657945624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657945844","html_url":"https://github.com/apache/pulsar/pull/7406#issuecomment-657945844","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7406","id":657945844,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0NTg0NA==","user":{"login":"jiazhai","id":6348208,"node_id":"MDQ6VXNlcjYzNDgyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/6348208?v=4","gravatar_id":"","url":"https://api.github.com/users/jiazhai","html_url":"https://github.com/jiazhai","followers_url":"https://api.github.com/users/jiazhai/followers","following_url":"https://api.github.com/users/jiazhai/following{/other_user}","gists_url":"https://api.github.com/users/jiazhai/gists{/gist_id}","starred_url":"https://api.github.com/users/jiazhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiazhai/subscriptions","organizations_url":"https://api.github.com/users/jiazhai/orgs","repos_url":"https://api.github.com/users/jiazhai/repos","events_url":"https://api.github.com/users/jiazhai/events{/privacy}","received_events_url":"https://api.github.com/users/jiazhai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:31:08Z","updated_at":"2020-07-14T03:31:08Z","author_association":"MEMBER","body":"@codelipenghui to help review this pr","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657945844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657946092","html_url":"https://github.com/apache/pulsar/pull/7499#issuecomment-657946092","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7499","id":657946092,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0NjA5Mg==","user":{"login":"jiazhai","id":6348208,"node_id":"MDQ6VXNlcjYzNDgyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/6348208?v=4","gravatar_id":"","url":"https://api.github.com/users/jiazhai","html_url":"https://github.com/jiazhai","followers_url":"https://api.github.com/users/jiazhai/followers","following_url":"https://api.github.com/users/jiazhai/following{/other_user}","gists_url":"https://api.github.com/users/jiazhai/gists{/gist_id}","starred_url":"https://api.github.com/users/jiazhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiazhai/subscriptions","organizations_url":"https://api.github.com/users/jiazhai/orgs","repos_url":"https://api.github.com/users/jiazhai/repos","events_url":"https://api.github.com/users/jiazhai/events{/privacy}","received_events_url":"https://api.github.com/users/jiazhai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:32:11Z","updated_at":"2020-07-14T03:32:22Z","author_association":"MEMBER","body":"pinged @codelipenghui for 7406","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657946092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657949777","html_url":"https://github.com/apache/pulsar/issues/7478#issuecomment-657949777","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7478","id":657949777,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0OTc3Nw==","user":{"login":"jiawulin001","id":14244944,"node_id":"MDQ6VXNlcjE0MjQ0OTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14244944?v=4","gravatar_id":"","url":"https://api.github.com/users/jiawulin001","html_url":"https://github.com/jiawulin001","followers_url":"https://api.github.com/users/jiawulin001/followers","following_url":"https://api.github.com/users/jiawulin001/following{/other_user}","gists_url":"https://api.github.com/users/jiawulin001/gists{/gist_id}","starred_url":"https://api.github.com/users/jiawulin001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiawulin001/subscriptions","organizations_url":"https://api.github.com/users/jiawulin001/orgs","repos_url":"https://api.github.com/users/jiawulin001/repos","events_url":"https://api.github.com/users/jiawulin001/events{/privacy}","received_events_url":"https://api.github.com/users/jiawulin001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:47:46Z","updated_at":"2020-07-14T03:47:46Z","author_association":"MEMBER","body":"@codelipenghui \r\nI'm thinking if we should introduce a timeout mechanism to avoid this problem instead of changing the logic to async? Since asynchronously resetting the cursor might return a response directly before it actually finish the work, and may influence the order of code execution on client side and lead to unexpected outcome.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657949777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657966039","html_url":"https://github.com/apache/pulsar/issues/7076#issuecomment-657966039","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7076","id":657966039,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk2NjAzOQ==","user":{"login":"bleacha870721","id":59589208,"node_id":"MDQ6VXNlcjU5NTg5MjA4","avatar_url":"https://avatars.githubusercontent.com/u/59589208?v=4","gravatar_id":"","url":"https://api.github.com/users/bleacha870721","html_url":"https://github.com/bleacha870721","followers_url":"https://api.github.com/users/bleacha870721/followers","following_url":"https://api.github.com/users/bleacha870721/following{/other_user}","gists_url":"https://api.github.com/users/bleacha870721/gists{/gist_id}","starred_url":"https://api.github.com/users/bleacha870721/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleacha870721/subscriptions","organizations_url":"https://api.github.com/users/bleacha870721/orgs","repos_url":"https://api.github.com/users/bleacha870721/repos","events_url":"https://api.github.com/users/bleacha870721/events{/privacy}","received_events_url":"https://api.github.com/users/bleacha870721/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T04:56:04Z","updated_at":"2020-07-14T04:56:04Z","author_association":"NONE","body":"@sijie  May I know the current progress of this issue? I still couldn't get the latest messages in 2.6.0 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657966039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657969573","html_url":"https://github.com/apache/pulsar/issues/7076#issuecomment-657969573","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7076","id":657969573,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk2OTU3Mw==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T05:08:55Z","updated_at":"2020-07-14T05:08:55Z","author_association":"MEMBER","body":"@bleacha870721 the setting requires some configuration changes in the bookies' side (e.g. bump journal version).  We need to update the documentation about the full process.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657969573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657975830","html_url":"https://github.com/apache/pulsar/issues/7500#issuecomment-657975830","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7500","id":657975830,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk3NTgzMA==","user":{"login":"hozumi","id":410572,"node_id":"MDQ6VXNlcjQxMDU3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/410572?v=4","gravatar_id":"","url":"https://api.github.com/users/hozumi","html_url":"https://github.com/hozumi","followers_url":"https://api.github.com/users/hozumi/followers","following_url":"https://api.github.com/users/hozumi/following{/other_user}","gists_url":"https://api.github.com/users/hozumi/gists{/gist_id}","starred_url":"https://api.github.com/users/hozumi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hozumi/subscriptions","organizations_url":"https://api.github.com/users/hozumi/orgs","repos_url":"https://api.github.com/users/hozumi/repos","events_url":"https://api.github.com/users/hozumi/events{/privacy}","received_events_url":"https://api.github.com/users/hozumi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T05:30:15Z","updated_at":"2020-07-14T05:30:15Z","author_association":"NONE","body":"@sijie Thank you for your answer.\r\nThat is to say, in order for lately created subscription to read all retained messages without interfering a producer, should backlog quota be set to the same size as retention policy? (In this case, 100GB.)\r\nIf so, as retention policy is applied to the messages only not in backlog, do I need to estimate the maximum size of disk space at twice the size of the retention policy?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/657975830/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658013060","html_url":"https://github.com/apache/pulsar/issues/7481#issuecomment-658013060","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7481","id":658013060,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODAxMzA2MA==","user":{"login":"anvinjain","id":8705790,"node_id":"MDQ6VXNlcjg3MDU3OTA=","avatar_url":"https://avatars.githubusercontent.com/u/8705790?v=4","gravatar_id":"","url":"https://api.github.com/users/anvinjain","html_url":"https://github.com/anvinjain","followers_url":"https://api.github.com/users/anvinjain/followers","following_url":"https://api.github.com/users/anvinjain/following{/other_user}","gists_url":"https://api.github.com/users/anvinjain/gists{/gist_id}","starred_url":"https://api.github.com/users/anvinjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anvinjain/subscriptions","organizations_url":"https://api.github.com/users/anvinjain/orgs","repos_url":"https://api.github.com/users/anvinjain/repos","events_url":"https://api.github.com/users/anvinjain/events{/privacy}","received_events_url":"https://api.github.com/users/anvinjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T07:14:34Z","updated_at":"2020-07-14T07:14:34Z","author_association":"NONE","body":"@codelipenghui Sure, I will take this up. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658013060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658404472","html_url":"https://github.com/apache/pulsar/issues/6054#issuecomment-658404472","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6054","id":658404472,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQwNDQ3Mg==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T20:46:12Z","updated_at":"2020-07-14T20:46:12Z","author_association":"CONTRIBUTOR","body":"@sijie @codelipenghui We have confirmed that this is actually still an issue in Pulsar 2.5.2. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658404472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658404866","html_url":"https://github.com/apache/pulsar/issues/6054#issuecomment-658404866","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6054","id":658404866,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQwNDg2Ng==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T20:47:01Z","updated_at":"2020-07-14T20:47:01Z","author_association":"CONTRIBUTOR","body":"If it's a clue, it only happens on topics involving functions.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658404866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658415855","html_url":"https://github.com/apache/pulsar/pull/7534#issuecomment-658415855","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7534","id":658415855,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQxNTg1NQ==","user":{"login":"addisonj","id":636291,"node_id":"MDQ6VXNlcjYzNjI5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/636291?v=4","gravatar_id":"","url":"https://api.github.com/users/addisonj","html_url":"https://github.com/addisonj","followers_url":"https://api.github.com/users/addisonj/followers","following_url":"https://api.github.com/users/addisonj/following{/other_user}","gists_url":"https://api.github.com/users/addisonj/gists{/gist_id}","starred_url":"https://api.github.com/users/addisonj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/addisonj/subscriptions","organizations_url":"https://api.github.com/users/addisonj/orgs","repos_url":"https://api.github.com/users/addisonj/repos","events_url":"https://api.github.com/users/addisonj/events{/privacy}","received_events_url":"https://api.github.com/users/addisonj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T21:11:31Z","updated_at":"2020-07-14T21:11:31Z","author_association":"CONTRIBUTOR","body":"@Anonymitaet here are the docs for #6086, let me know who else should review with you being out :)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658415855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658506639","html_url":"https://github.com/apache/pulsar/pull/7534#issuecomment-658506639","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7534","id":658506639,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNjYzOQ==","user":{"login":"Anonymitaet","id":50226895,"node_id":"MDQ6VXNlcjUwMjI2ODk1","avatar_url":"https://avatars.githubusercontent.com/u/50226895?v=4","gravatar_id":"","url":"https://api.github.com/users/Anonymitaet","html_url":"https://github.com/Anonymitaet","followers_url":"https://api.github.com/users/Anonymitaet/followers","following_url":"https://api.github.com/users/Anonymitaet/following{/other_user}","gists_url":"https://api.github.com/users/Anonymitaet/gists{/gist_id}","starred_url":"https://api.github.com/users/Anonymitaet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anonymitaet/subscriptions","organizations_url":"https://api.github.com/users/Anonymitaet/orgs","repos_url":"https://api.github.com/users/Anonymitaet/repos","events_url":"https://api.github.com/users/Anonymitaet/events{/privacy}","received_events_url":"https://api.github.com/users/Anonymitaet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:21:40Z","updated_at":"2020-07-15T03:26:19Z","author_association":"MEMBER","body":"@addisonj thank you so much for your tech inputs.\r\n\r\n@wolfstudy could u pls help review? Thanks. \r\nFYI: @addisonj has added the following contents (in blue)\r\n![image](https://user-images.githubusercontent.com/50226895/87498960-ab9a6e80-c68b-11ea-92e0-cadbbec37597.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658506639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658512237","html_url":"https://github.com/apache/pulsar/pull/6752#issuecomment-658512237","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6752","id":658512237,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUxMjIzNw==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:43:21Z","updated_at":"2020-07-15T02:43:21Z","author_association":"MEMBER","body":"ping @jerrypeng please take a look, thanks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658512237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658537755","html_url":"https://github.com/apache/pulsar/issues/6054#issuecomment-658537755","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6054","id":658537755,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUzNzc1NQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T04:25:36Z","updated_at":"2020-07-15T04:25:36Z","author_association":"MEMBER","body":"@devinbost did you happen to have a heap dump?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658537755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658548718","html_url":"https://github.com/apache/pulsar/issues/6054#issuecomment-658548718","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6054","id":658548718,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU0ODcxOA==","user":{"login":"devinbost","id":7418031,"node_id":"MDQ6VXNlcjc0MTgwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7418031?v=4","gravatar_id":"","url":"https://api.github.com/users/devinbost","html_url":"https://github.com/devinbost","followers_url":"https://api.github.com/users/devinbost/followers","following_url":"https://api.github.com/users/devinbost/following{/other_user}","gists_url":"https://api.github.com/users/devinbost/gists{/gist_id}","starred_url":"https://api.github.com/users/devinbost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devinbost/subscriptions","organizations_url":"https://api.github.com/users/devinbost/orgs","repos_url":"https://api.github.com/users/devinbost/repos","events_url":"https://api.github.com/users/devinbost/events{/privacy}","received_events_url":"https://api.github.com/users/devinbost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T05:08:37Z","updated_at":"2020-07-15T05:08:37Z","author_association":"CONTRIBUTOR","body":"@sijie Unfortunately, I don't. What's the best way for us to get a heap dump when this happens again? ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658548718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658554731","html_url":"https://github.com/apache/pulsar/issues/7488#issuecomment-658554731","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7488","id":658554731,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU1NDczMQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T05:30:41Z","updated_at":"2020-07-15T05:30:41Z","author_association":"MEMBER","body":"@97arushisharma the configurations look good to me. Based on your last comment, it seems that you have addressed your problem by setting `zkLedgersRootPath`. Is that correct? Any other issues that you need help?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658554731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658559832","html_url":"https://github.com/apache/pulsar/issues/7488#issuecomment-658559832","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7488","id":658559832,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU1OTgzMg==","user":{"login":"97arushisharma","id":23057357,"node_id":"MDQ6VXNlcjIzMDU3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/23057357?v=4","gravatar_id":"","url":"https://api.github.com/users/97arushisharma","html_url":"https://github.com/97arushisharma","followers_url":"https://api.github.com/users/97arushisharma/followers","following_url":"https://api.github.com/users/97arushisharma/following{/other_user}","gists_url":"https://api.github.com/users/97arushisharma/gists{/gist_id}","starred_url":"https://api.github.com/users/97arushisharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/97arushisharma/subscriptions","organizations_url":"https://api.github.com/users/97arushisharma/orgs","repos_url":"https://api.github.com/users/97arushisharma/repos","events_url":"https://api.github.com/users/97arushisharma/events{/privacy}","received_events_url":"https://api.github.com/users/97arushisharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T05:49:12Z","updated_at":"2020-07-15T05:49:12Z","author_association":"NONE","body":"Yup. Thanks @sijie . ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658559832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658572663","html_url":"https://github.com/apache/pulsar/issues/7480#issuecomment-658572663","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7480","id":658572663,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU3MjY2Mw==","user":{"login":"sxpsxp12","id":24519721,"node_id":"MDQ6VXNlcjI0NTE5NzIx","avatar_url":"https://avatars.githubusercontent.com/u/24519721?v=4","gravatar_id":"","url":"https://api.github.com/users/sxpsxp12","html_url":"https://github.com/sxpsxp12","followers_url":"https://api.github.com/users/sxpsxp12/followers","following_url":"https://api.github.com/users/sxpsxp12/following{/other_user}","gists_url":"https://api.github.com/users/sxpsxp12/gists{/gist_id}","starred_url":"https://api.github.com/users/sxpsxp12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxpsxp12/subscriptions","organizations_url":"https://api.github.com/users/sxpsxp12/orgs","repos_url":"https://api.github.com/users/sxpsxp12/repos","events_url":"https://api.github.com/users/sxpsxp12/events{/privacy}","received_events_url":"https://api.github.com/users/sxpsxp12/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T06:28:15Z","updated_at":"2020-07-15T06:28:15Z","author_association":"NONE","body":"@wolfstudy thanksit's work ok","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658572663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658650072","html_url":"https://github.com/apache/pulsar/issues/7480#issuecomment-658650072","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7480","id":658650072,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODY1MDA3Mg==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T09:14:16Z","updated_at":"2020-07-15T09:14:16Z","author_association":"MEMBER","body":"> @wolfstudy thanksit's work ok\r\n\r\nCool, will close this issue. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658650072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658665164","html_url":"https://github.com/apache/pulsar/pull/7540#issuecomment-658665164","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7540","id":658665164,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODY2NTE2NA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T09:42:42Z","updated_at":"2020-07-15T09:42:42Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658665164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658733795","html_url":"https://github.com/apache/pulsar/issues/5608#issuecomment-658733795","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5608","id":658733795,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODczMzc5NQ==","user":{"login":"Anonymitaet","id":50226895,"node_id":"MDQ6VXNlcjUwMjI2ODk1","avatar_url":"https://avatars.githubusercontent.com/u/50226895?v=4","gravatar_id":"","url":"https://api.github.com/users/Anonymitaet","html_url":"https://github.com/Anonymitaet","followers_url":"https://api.github.com/users/Anonymitaet/followers","following_url":"https://api.github.com/users/Anonymitaet/following{/other_user}","gists_url":"https://api.github.com/users/Anonymitaet/gists{/gist_id}","starred_url":"https://api.github.com/users/Anonymitaet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anonymitaet/subscriptions","organizations_url":"https://api.github.com/users/Anonymitaet/orgs","repos_url":"https://api.github.com/users/Anonymitaet/repos","events_url":"https://api.github.com/users/Anonymitaet/events{/privacy}","received_events_url":"https://api.github.com/users/Anonymitaet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T12:18:09Z","updated_at":"2020-07-15T12:18:09Z","author_association":"MEMBER","body":"@candlerb `--py` has been documented in [pulsar-admin functions create](http://pulsar.apache.org/tools/pulsar-admin/2.7.0-SNAPSHOT/#-em-create-em--2) and [pulsar-admin functions update](http://pulsar.apache.org/tools/pulsar-admin/2.7.0-SNAPSHOT/#-em-update-em--4).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658733795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658788970","html_url":"https://github.com/apache/pulsar/pull/7389#issuecomment-658788970","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7389","id":658788970,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4ODk3MA==","user":{"login":"lukestephenson-zendesk","id":48660846,"node_id":"MDQ6VXNlcjQ4NjYwODQ2","avatar_url":"https://avatars.githubusercontent.com/u/48660846?v=4","gravatar_id":"","url":"https://api.github.com/users/lukestephenson-zendesk","html_url":"https://github.com/lukestephenson-zendesk","followers_url":"https://api.github.com/users/lukestephenson-zendesk/followers","following_url":"https://api.github.com/users/lukestephenson-zendesk/following{/other_user}","gists_url":"https://api.github.com/users/lukestephenson-zendesk/gists{/gist_id}","starred_url":"https://api.github.com/users/lukestephenson-zendesk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukestephenson-zendesk/subscriptions","organizations_url":"https://api.github.com/users/lukestephenson-zendesk/orgs","repos_url":"https://api.github.com/users/lukestephenson-zendesk/repos","events_url":"https://api.github.com/users/lukestephenson-zendesk/events{/privacy}","received_events_url":"https://api.github.com/users/lukestephenson-zendesk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:06:22Z","updated_at":"2020-07-15T14:06:22Z","author_association":"CONTRIBUTOR","body":"I'm trying to work around this until 2.6.1 is released.  Not sure what to do.\r\n\r\n> The default value of the offload-deletion-lag is null, this will cause an NPE problem\r\n\r\nFrom the docs I thought the default value would be 14400000\r\n![image](https://user-images.githubusercontent.com/48660846/87509585-35aafd00-c6b5-11ea-951d-be5ec77ac1ef.png)\r\n\r\nWill explicitly setting a value for this setting help?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658788970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658826811","html_url":"https://github.com/apache/pulsar/pull/7539#issuecomment-658826811","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7539","id":658826811,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgyNjgxMQ==","user":{"login":"vzhikserg","id":7816474,"node_id":"MDQ6VXNlcjc4MTY0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7816474?v=4","gravatar_id":"","url":"https://api.github.com/users/vzhikserg","html_url":"https://github.com/vzhikserg","followers_url":"https://api.github.com/users/vzhikserg/followers","following_url":"https://api.github.com/users/vzhikserg/following{/other_user}","gists_url":"https://api.github.com/users/vzhikserg/gists{/gist_id}","starred_url":"https://api.github.com/users/vzhikserg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vzhikserg/subscriptions","organizations_url":"https://api.github.com/users/vzhikserg/orgs","repos_url":"https://api.github.com/users/vzhikserg/repos","events_url":"https://api.github.com/users/vzhikserg/events{/privacy}","received_events_url":"https://api.github.com/users/vzhikserg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T15:12:11Z","updated_at":"2020-07-15T15:12:11Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658826811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658829336","html_url":"https://github.com/apache/pulsar/issues/5608#issuecomment-658829336","issue_url":"https://api.github.com/repos/apache/pulsar/issues/5608","id":658829336,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgyOTMzNg==","user":{"login":"candlerb","id":44789,"node_id":"MDQ6VXNlcjQ0Nzg5","avatar_url":"https://avatars.githubusercontent.com/u/44789?v=4","gravatar_id":"","url":"https://api.github.com/users/candlerb","html_url":"https://github.com/candlerb","followers_url":"https://api.github.com/users/candlerb/followers","following_url":"https://api.github.com/users/candlerb/following{/other_user}","gists_url":"https://api.github.com/users/candlerb/gists{/gist_id}","starred_url":"https://api.github.com/users/candlerb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/candlerb/subscriptions","organizations_url":"https://api.github.com/users/candlerb/orgs","repos_url":"https://api.github.com/users/candlerb/repos","events_url":"https://api.github.com/users/candlerb/events{/privacy}","received_events_url":"https://api.github.com/users/candlerb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T15:17:04Z","updated_at":"2020-07-15T15:17:04Z","author_association":"CONTRIBUTOR","body":"I don't see any mention of zip files at those links - is this awaiting docs to be republished?  I can't tell, because there's no link to the relevant git commit either.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658829336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658851306","html_url":"https://github.com/apache/pulsar/issues/7489#issuecomment-658851306","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7489","id":658851306,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg1MTMwNg==","user":{"login":"vzhikserg","id":7816474,"node_id":"MDQ6VXNlcjc4MTY0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7816474?v=4","gravatar_id":"","url":"https://api.github.com/users/vzhikserg","html_url":"https://github.com/vzhikserg","followers_url":"https://api.github.com/users/vzhikserg/followers","following_url":"https://api.github.com/users/vzhikserg/following{/other_user}","gists_url":"https://api.github.com/users/vzhikserg/gists{/gist_id}","starred_url":"https://api.github.com/users/vzhikserg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vzhikserg/subscriptions","organizations_url":"https://api.github.com/users/vzhikserg/orgs","repos_url":"https://api.github.com/users/vzhikserg/repos","events_url":"https://api.github.com/users/vzhikserg/events{/privacy}","received_events_url":"https://api.github.com/users/vzhikserg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T16:00:59Z","updated_at":"2020-07-15T16:00:59Z","author_association":"CONTRIBUTOR","body":"@devinbost could you please review the go implementation in the #7539 pull request?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658851306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658892374","html_url":"https://github.com/apache/pulsar/pull/7534#issuecomment-658892374","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7534","id":658892374,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg5MjM3NA==","user":{"login":"addisonj","id":636291,"node_id":"MDQ6VXNlcjYzNjI5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/636291?v=4","gravatar_id":"","url":"https://api.github.com/users/addisonj","html_url":"https://github.com/addisonj","followers_url":"https://api.github.com/users/addisonj/followers","following_url":"https://api.github.com/users/addisonj/following{/other_user}","gists_url":"https://api.github.com/users/addisonj/gists{/gist_id}","starred_url":"https://api.github.com/users/addisonj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/addisonj/subscriptions","organizations_url":"https://api.github.com/users/addisonj/orgs","repos_url":"https://api.github.com/users/addisonj/repos","events_url":"https://api.github.com/users/addisonj/events{/privacy}","received_events_url":"https://api.github.com/users/addisonj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T17:15:23Z","updated_at":"2020-07-15T17:15:23Z","author_association":"CONTRIBUTOR","body":"@Anonymitaet Thanks for all the great feedback as well as links to style, that is really helpful :) ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658892374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658899560","html_url":"https://github.com/apache/pulsar/issues/6923#issuecomment-658899560","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6923","id":658899560,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg5OTU2MA==","user":{"login":"rocketraman","id":53049,"node_id":"MDQ6VXNlcjUzMDQ5","avatar_url":"https://avatars.githubusercontent.com/u/53049?v=4","gravatar_id":"","url":"https://api.github.com/users/rocketraman","html_url":"https://github.com/rocketraman","followers_url":"https://api.github.com/users/rocketraman/followers","following_url":"https://api.github.com/users/rocketraman/following{/other_user}","gists_url":"https://api.github.com/users/rocketraman/gists{/gist_id}","starred_url":"https://api.github.com/users/rocketraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rocketraman/subscriptions","organizations_url":"https://api.github.com/users/rocketraman/orgs","repos_url":"https://api.github.com/users/rocketraman/repos","events_url":"https://api.github.com/users/rocketraman/events{/privacy}","received_events_url":"https://api.github.com/users/rocketraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T17:27:45Z","updated_at":"2020-07-15T17:27:45Z","author_association":"MEMBER","body":"Agreed, right now the [PIP](https://github.com/apache/pulsar/wiki/PIP-34:-Add-new-subscribe-type-Key_shared) is the only place where one can find important information about how this works when consumers connect and disconnect.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/658899560/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659000490","html_url":"https://github.com/apache/pulsar/pull/7453#issuecomment-659000490","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7453","id":659000490,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAwMDQ5MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T20:46:00Z","updated_at":"2020-07-15T20:46:00Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659000490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659020234","html_url":"https://github.com/apache/pulsar/pull/7541#issuecomment-659020234","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7541","id":659020234,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAyMDIzNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T21:23:52Z","updated_at":"2020-07-15T21:23:52Z","author_association":"CONTRIBUTOR","body":"@aahmed-se After this, we can also change some of the github jobs to just compile core modules (eg: all the broker test jobs, the C++ build, ..)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659020234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659070236","html_url":"https://github.com/apache/pulsar/pull/7541#issuecomment-659070236","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7541","id":659070236,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA3MDIzNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T23:39:41Z","updated_at":"2020-07-15T23:39:41Z","author_association":"CONTRIBUTOR","body":"@aahmed-se One more thing, these modules should not be in the `core-modules` list: `pulsar-broker-shaded`, `pulsar-client-all`, `pulsar-discovery-service`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659070236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659070692","html_url":"https://github.com/apache/pulsar/pull/7541#issuecomment-659070692","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7541","id":659070692,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA3MDY5Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T23:41:37Z","updated_at":"2020-07-15T23:41:37Z","author_association":"CONTRIBUTOR","body":"As well as `pulsar-functions/localrun-shaded` and `pulsar-functions/runtime-all`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659070692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659074203","html_url":"https://github.com/apache/pulsar/pull/7540#issuecomment-659074203","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7540","id":659074203,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA3NDIwMw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T23:53:54Z","updated_at":"2020-07-15T23:53:54Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659074203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659075996","html_url":"https://github.com/apache/pulsar/pull/7453#issuecomment-659075996","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7453","id":659075996,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA3NTk5Ng==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T23:59:56Z","updated_at":"2020-07-15T23:59:56Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659075996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659082217","html_url":"https://github.com/apache/pulsar/pull/7542#issuecomment-659082217","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7542","id":659082217,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA4MjIxNw==","user":{"login":"aahmed-se","id":8009085,"node_id":"MDQ6VXNlcjgwMDkwODU=","avatar_url":"https://avatars.githubusercontent.com/u/8009085?v=4","gravatar_id":"","url":"https://api.github.com/users/aahmed-se","html_url":"https://github.com/aahmed-se","followers_url":"https://api.github.com/users/aahmed-se/followers","following_url":"https://api.github.com/users/aahmed-se/following{/other_user}","gists_url":"https://api.github.com/users/aahmed-se/gists{/gist_id}","starred_url":"https://api.github.com/users/aahmed-se/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aahmed-se/subscriptions","organizations_url":"https://api.github.com/users/aahmed-se/orgs","repos_url":"https://api.github.com/users/aahmed-se/repos","events_url":"https://api.github.com/users/aahmed-se/events{/privacy}","received_events_url":"https://api.github.com/users/aahmed-se/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T00:20:32Z","updated_at":"2020-07-16T00:20:32Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659082217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659091611","html_url":"https://github.com/apache/pulsar/issues/7455#issuecomment-659091611","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7455","id":659091611,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA5MTYxMQ==","user":{"login":"feeblefakie","id":1052473,"node_id":"MDQ6VXNlcjEwNTI0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/1052473?v=4","gravatar_id":"","url":"https://api.github.com/users/feeblefakie","html_url":"https://github.com/feeblefakie","followers_url":"https://api.github.com/users/feeblefakie/followers","following_url":"https://api.github.com/users/feeblefakie/following{/other_user}","gists_url":"https://api.github.com/users/feeblefakie/gists{/gist_id}","starred_url":"https://api.github.com/users/feeblefakie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feeblefakie/subscriptions","organizations_url":"https://api.github.com/users/feeblefakie/orgs","repos_url":"https://api.github.com/users/feeblefakie/repos","events_url":"https://api.github.com/users/feeblefakie/events{/privacy}","received_events_url":"https://api.github.com/users/feeblefakie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T00:56:32Z","updated_at":"2020-07-16T00:56:32Z","author_association":"NONE","body":"@codelipenghui @merlimat Could anyone give me the answers for the questions ? I want to dig into it deeper but I'm not very experienced so I need some more information about the spec.\r\nhttps://github.com/apache/pulsar/issues/7455#issuecomment-654763271\r\n\r\n@sijie \r\nThe issue is pretty critical since it violates the guarantee that the Key_Shared feature must meet, but I feel it is not regarded as important somehow. Do you have any reason for that ?\r\nAnyways, we should make the doc says the current implementation violates the ordering guarantee or should fix it as soon as possible. The current situation (saying it guarantees but it actually doesn't) is not just right.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659091611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659125676","html_url":"https://github.com/apache/pulsar/pull/6752#issuecomment-659125676","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6752","id":659125676,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTEyNTY3Ng==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T02:51:45Z","updated_at":"2020-07-16T02:51:45Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659125676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659164323","html_url":"https://github.com/apache/pulsar/pull/7534#issuecomment-659164323","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7534","id":659164323,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE2NDMyMw==","user":{"login":"Anonymitaet","id":50226895,"node_id":"MDQ6VXNlcjUwMjI2ODk1","avatar_url":"https://avatars.githubusercontent.com/u/50226895?v=4","gravatar_id":"","url":"https://api.github.com/users/Anonymitaet","html_url":"https://github.com/Anonymitaet","followers_url":"https://api.github.com/users/Anonymitaet/followers","following_url":"https://api.github.com/users/Anonymitaet/following{/other_user}","gists_url":"https://api.github.com/users/Anonymitaet/gists{/gist_id}","starred_url":"https://api.github.com/users/Anonymitaet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anonymitaet/subscriptions","organizations_url":"https://api.github.com/users/Anonymitaet/orgs","repos_url":"https://api.github.com/users/Anonymitaet/repos","events_url":"https://api.github.com/users/Anonymitaet/events{/privacy}","received_events_url":"https://api.github.com/users/Anonymitaet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T05:17:09Z","updated_at":"2020-07-16T05:17:09Z","author_association":"MEMBER","body":"@addisonj thank you so much for providing this helpful information :-D","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659164323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659190469","html_url":"https://github.com/apache/pulsar/pull/7542#issuecomment-659190469","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7542","id":659190469,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE5MDQ2OQ==","user":{"login":"aahmed-se","id":8009085,"node_id":"MDQ6VXNlcjgwMDkwODU=","avatar_url":"https://avatars.githubusercontent.com/u/8009085?v=4","gravatar_id":"","url":"https://api.github.com/users/aahmed-se","html_url":"https://github.com/aahmed-se","followers_url":"https://api.github.com/users/aahmed-se/followers","following_url":"https://api.github.com/users/aahmed-se/following{/other_user}","gists_url":"https://api.github.com/users/aahmed-se/gists{/gist_id}","starred_url":"https://api.github.com/users/aahmed-se/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aahmed-se/subscriptions","organizations_url":"https://api.github.com/users/aahmed-se/orgs","repos_url":"https://api.github.com/users/aahmed-se/repos","events_url":"https://api.github.com/users/aahmed-se/events{/privacy}","received_events_url":"https://api.github.com/users/aahmed-se/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:35:07Z","updated_at":"2020-07-16T06:35:07Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659190469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659197020","html_url":"https://github.com/apache/pulsar/pull/7549#issuecomment-659197020","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7549","id":659197020,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE5NzAyMA==","user":{"login":"aahmed-se","id":8009085,"node_id":"MDQ6VXNlcjgwMDkwODU=","avatar_url":"https://avatars.githubusercontent.com/u/8009085?v=4","gravatar_id":"","url":"https://api.github.com/users/aahmed-se","html_url":"https://github.com/aahmed-se","followers_url":"https://api.github.com/users/aahmed-se/followers","following_url":"https://api.github.com/users/aahmed-se/following{/other_user}","gists_url":"https://api.github.com/users/aahmed-se/gists{/gist_id}","starred_url":"https://api.github.com/users/aahmed-se/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aahmed-se/subscriptions","organizations_url":"https://api.github.com/users/aahmed-se/orgs","repos_url":"https://api.github.com/users/aahmed-se/repos","events_url":"https://api.github.com/users/aahmed-se/events{/privacy}","received_events_url":"https://api.github.com/users/aahmed-se/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:52:19Z","updated_at":"2020-07-16T06:52:19Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659197020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659204094","html_url":"https://github.com/apache/pulsar/issues/7554#issuecomment-659204094","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7554","id":659204094,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTIwNDA5NA==","user":{"login":"massakam","id":22543882,"node_id":"MDQ6VXNlcjIyNTQzODgy","avatar_url":"https://avatars.githubusercontent.com/u/22543882?v=4","gravatar_id":"","url":"https://api.github.com/users/massakam","html_url":"https://github.com/massakam","followers_url":"https://api.github.com/users/massakam/followers","following_url":"https://api.github.com/users/massakam/following{/other_user}","gists_url":"https://api.github.com/users/massakam/gists{/gist_id}","starred_url":"https://api.github.com/users/massakam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massakam/subscriptions","organizations_url":"https://api.github.com/users/massakam/orgs","repos_url":"https://api.github.com/users/massakam/repos","events_url":"https://api.github.com/users/massakam/events{/privacy}","received_events_url":"https://api.github.com/users/massakam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T07:07:02Z","updated_at":"2020-07-16T07:07:02Z","author_association":"CONTRIBUTOR","body":"The class of `individualDeletedMessages` has been changed by the following two PRs:\r\n- https://github.com/apache/pulsar/pull/3818\r\n- https://github.com/apache/pulsar/pull/3819","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659204094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659206287","html_url":"https://github.com/apache/pulsar/issues/7554#issuecomment-659206287","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7554","id":659206287,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTIwNjI4Nw==","user":{"login":"massakam","id":22543882,"node_id":"MDQ6VXNlcjIyNTQzODgy","avatar_url":"https://avatars.githubusercontent.com/u/22543882?v=4","gravatar_id":"","url":"https://api.github.com/users/massakam","html_url":"https://github.com/massakam","followers_url":"https://api.github.com/users/massakam/followers","following_url":"https://api.github.com/users/massakam/following{/other_user}","gists_url":"https://api.github.com/users/massakam/gists{/gist_id}","starred_url":"https://api.github.com/users/massakam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massakam/subscriptions","organizations_url":"https://api.github.com/users/massakam/orgs","repos_url":"https://api.github.com/users/massakam/repos","events_url":"https://api.github.com/users/massakam/events{/privacy}","received_events_url":"https://api.github.com/users/massakam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T07:11:22Z","updated_at":"2020-07-16T07:11:22Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Is the difference in behavior between `ConcurrentOpenLongPairRangeSet` and `TreeRangeSet/LongPairRangeSet.DefaultRangeSet` intentional? If so, what is the reason?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/659206287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]