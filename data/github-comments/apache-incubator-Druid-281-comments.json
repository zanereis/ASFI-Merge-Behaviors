[{"url":"https://api.github.com/repos/apache/druid/issues/comments/548141222","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548141222","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548141222,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE0MTIyMg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T22:34:44Z","updated_at":"2019-10-30T22:34:44Z","author_association":"MEMBER","body":"### Hyper-threading and default ForkJoinPool parallelism and per query parallelism configuration values\r\n\r\nAnother side-note before I dig into benchmark results, I wanted to call out that I modified the default values for `druid.processing.merge.pool.parallelism` and `druid.processing.merge.pool.defaultMaxQueryParallelism` to be 0.75 and 0.5 times `Runtime.getRuntime().availableProcessors()` instead of 1.5 and 1.0 respectively, to make an assumption that there are 2 hyper-threads per physical core.\r\n\r\nThis run of `ParallelMergeCombiningSequenceBenchmark` on an `m5.4xl`, which has 8 physical cores but reports 16 cores through `Runtime.getRuntime.availableProcessors()` since that is the 'vCPU' count, illustrates the reason for this.\r\n\r\n```\r\nBenchmark                                     (concurrentSequenceConsumers)  (inputSequenceType)  (numSequences)  (rowsPerSequence)                          (strategy)  Mode  Cnt     Score    Error  Units\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000  combiningMergeSequence-same-thread  avgt   20  2975.944 ±  3.406  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000         parallelism-1-10ms-256-1024  avgt   20  2903.598 ±  7.425  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000         parallelism-4-10ms-256-1024  avgt   20   918.689 ±  7.172  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000         parallelism-6-10ms-256-1024  avgt   20   549.228 ±  1.545  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000         parallelism-8-10ms-256-1024  avgt   20   394.795 ±  1.110  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000        parallelism-12-10ms-256-1024  avgt   20   707.393 ±  2.392  ms/op\r\nParallelMergeCombiningSequenceBenchmark.exec                              1         non-blocking             128              75000        parallelism-16-10ms-256-1024  avgt   20  2069.897 ± 35.939  ms/op\r\n```\r\n\r\nThis is of course because hyper-threads are not _real_ cores, so when actually fully utilizing a CPU to do work, counting them as such results in slower overall throughput. This is in line with the fine print on hyper-threads I think. \r\n\r\nThis assumption for the default value might be wrong, but it held true for both my laptop and AWS, so maybe isn't unreasonable. I updated the user facing documentation on these settings to include this assumption, so that if an operators hardware differs and has more or no hyper-threading the value should be adjusted accordingly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548141222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548142920","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548142920","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548142920,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE0MjkyMA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T22:40:51Z","updated_at":"2019-10-30T22:40:51Z","author_association":"MEMBER","body":"### best case\r\nAll benchmarks for this phase were done on an AWS `m5.8xl` which has 16 physical cores, 32 hyper-threads. The currently chosen default configuration is `parallelism-16-100ms-4096-16384` in all of the following charts.\r\n\r\nAs mentioned in an earlier comment, the first area I wanted to benchmark is looking at the best case scenario to illustrate the raw performance increase of performing sequence and result merging in parallel when no other work is concurrently happening. \r\n\r\nRelatively quickly the benchmarks made it apparent that the parallelism chooser (`computeNumTasks`) was far too greedy, which in hind-sight seems obvious. Prior to running this benchmark, `computeNumTasks` did a check to ensure that _at least 2 sequences would be in every partition_ since that is the minimum number required to do meaningful work in parallel. However, this leads to a potentially very unbalanced amount of work between the layer 1 and layer 2 tasks, where layer 1 tasks would do very little work but the final merge layer 2 task would have a lot more to do from the increased number of input sequences. See this chart, which is plotting out artificially limited parallelism to compare to 'max' parallelism with different configurations, how the more parallelism used results in slower overall times.\r\n\r\n![parallelism-m5 8xl-original](https://user-images.githubusercontent.com/1577461/67904227-f9d20680-fb2a-11e9-8d52-c3bfcb7f39a3.gif)\r\n\r\nBy moving to balance the number of partitions to the size of each partition by limiting parallelism to the square root of total number of input sequences, this has been improved to the point that I consider 'good enough' for now.\r\n\r\n![parallelism-m5 8xl-variants](https://user-images.githubusercontent.com/1577461/67904252-06565f00-fb2b-11e9-8104-16202f7cd78f.gif)\r\n\r\n\r\nThese performance improvements should be most apparent in\r\n* large clusters (high number of sequences to merge) with most result set sizes\r\n* moderate sized clusters with large result sets and high combinability\r\n\r\nThis performance improvement applies across all result set sizes as well (here from 1k per input sequence up to 10m per input sequence)\r\n\r\n![parallelism-m5 8xl-final](https://user-images.githubusercontent.com/1577461/67904268-0eae9a00-fb2b-11e9-81cc-5fdec8554d75.gif)\r\n\r\n\r\nOf note, in the best case the configuration parameters other than maximum parallelism seemed to provide a relatively insignificant amount of variation in these tests, leading me to believe that they didn't really matter so much. For small result sets, the default value I have chosen does tend to do worse than the smaller sized tasks, but performs better with larger result sets which I believe is what we should tune for. \r\n\r\nHowever, the worst case, heavy concurrency benchmarks did end up changing my stance on this, where the larger sized unit of work per task seems to perform a lot better, particularly when blocking is involved.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548142920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152141","html_url":"https://github.com/apache/druid/pull/8792#issuecomment-548152141","issue_url":"https://api.github.com/repos/apache/druid/issues/8792","id":548152141,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE1MjE0MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:17:04Z","updated_at":"2019-10-30T23:17:04Z","author_association":"CONTRIBUTOR","body":"Just tried it out and it totes works!\r\n\r\n![image](https://user-images.githubusercontent.com/177816/67906080-ae225b80-fb30-11e9-8e04-5d0c6d231bc8.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152477","html_url":"https://github.com/apache/druid/issues/7884#issuecomment-548152477","issue_url":"https://api.github.com/repos/apache/druid/issues/7884","id":548152477,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE1MjQ3Nw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:18:29Z","updated_at":"2019-10-30T23:18:29Z","author_association":"CONTRIBUTOR","body":"This is fixed by #8792 🎆 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152735","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548152735","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548152735,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE1MjczNQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:19:45Z","updated_at":"2019-10-30T23:19:45Z","author_association":"MEMBER","body":"### worst case\r\nThe other really important part to highlight, is to determine how this approach degrades under increasing concurrency by looking at the absolute worst case scenario with the current approach, the concurrent load spike. I consider this the nemesis of the current parallelism chooser, since it will potentially dramatically under-estimate the available CPU capacity. \r\n\r\nFor reference, I included a measurement when the `ParallelMergeCombiningSequence` level of parallelism was limited to 1. This is what the computed level of parallelism will trend towards when load is gradually increased and sustained, and so is how continued overloading is expected to behave.\r\n\r\nFrom the left of the following line plots, the vertical dotted lines represent the number of physical cores and number of hyper-threads of the benchmark machine.\r\n\r\n![concurrency-m5 8xl-burst](https://user-images.githubusercontent.com/1577461/67905082-8c73a500-fb2d-11e9-8f7c-baecc07fc8e9.gif)\r\n\r\nThis looks pretty bad for parallelism under huge load spikes, but also keep in mind that this measurement is looking at the time to complete all threads, not the average per thread timing (so at the far right of the plot, the time to simultaneously complete 4 times as many threads as we have processors).\r\n\r\nUsing an offset of 10ms before each concurrent thread to help even out the load shrinks the gap of performance degradation significantly:\r\n![concurrency-m5 8xl-10ms-offset-burst](https://user-images.githubusercontent.com/1577461/67904913-0e170300-fb2d-11e9-9e0b-24c8c076aff8.gif)\r\nand helps tie the greedy parallelism chooser to the poor load spike performance.\r\n\r\n#### blocking\r\nLooking at the `ParallelMergeCombiningSequenceJmhThreadsBenchmark` output shows similar observations, but the apparent degradation doesn't seem as bad because it is not entirely driven by the slowest thread.\r\n\r\n![concurrency-m5 8xl-non-blocking-threaded](https://user-images.githubusercontent.com/1577461/67905376-5c78d180-fb2e-11e9-9e06-153180c8d738.gif)\r\n \r\n\r\nThis is due to many of the concurrent threads not seeing particularly worse performance, but having the worst performing threads averaged into the overall time. It also produces a plot that grows in the same linear fashion as the same threaded approach currently in use.\r\n\r\n\r\n\r\nIntroducing blocking input sequences caused some unexpected erratic behavior in the 10ms target task run time that I found surprising, but was repeatable. As far as I have been able to determine, the increased overall number of tasks that need to run on the `ForkJoinPool` and additional contention since there are more operations adding to and taking from a `BlockingQueue`.\r\n![concurrency-m5 8xl-initially-blocking-100-500ms](https://user-images.githubusercontent.com/1577461/67904793-afea2000-fb2c-11e9-821a-4a7a2a23bdd1.gif)\r\nThe larger task run time results in the least amount of both tasks and cooperative blocking operations, which is why it was ultimately chosen as the default.\r\n\r\nLonger delays and smaller result sets also shrink the apparent difference between the approach in this PR and the current approach, even without delays between threads:\r\n![concurrency-m5 8xl-initially-blocking-4000-5000ms](https://user-images.githubusercontent.com/1577461/67905953-5a177700-fb30-11e9-8e87-e7f1999161d9.gif)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548152735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548155872","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548155872","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548155872,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE1NTg3Mg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:34:03Z","updated_at":"2019-10-30T23:34:03Z","author_association":"MEMBER","body":"### my conclusions\r\nI think the performance degradation under load spikes falls within what I consider acceptable range.  Particularly important, I find the degradation to be relatively predictable so that we can update the cluster tuning guide (in a future PR) to best advise how to tune your brokers for a given cluster size and load pattern. \r\n\r\nI also believe there is quite a lot of room for further improvement, so maybe we could get to place where this approach nears the same overloaded characteristics of the http thread pool based merges we currently perform.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548155872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548155894","html_url":"https://github.com/apache/druid/issues/3435#issuecomment-548155894","issue_url":"https://api.github.com/repos/apache/druid/issues/3435","id":548155894,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE1NTg5NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:34:08Z","updated_at":"2019-10-30T23:34:08Z","author_association":"CONTRIBUTOR","body":"> Hmm, why not include it? We include the aws sdk in the s3 extensions bundled with Druid, it seems nice to include the hadoop version too.\r\n\r\nI think the packaged jars should be minimized and so include only mandatory ones. `hadoop-aws` is only useful when they want to deal with s3 via hdfs. It seems a sort of an extension of an extension to me.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548155894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548160990","html_url":"https://github.com/apache/druid/issues/3435#issuecomment-548160990","issue_url":"https://api.github.com/repos/apache/druid/issues/3435","id":548160990,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE2MDk5MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T23:57:41Z","updated_at":"2019-10-30T23:57:41Z","author_association":"CONTRIBUTOR","body":"> I think the packaged jars should be minimized and so include only mandatory ones. `hadoop-aws` is only useful when they want to deal with s3 via hdfs. It seems a sort of an extension of an extension to me.\r\n\r\nHmm, well, personally I think including it is nice, since it makes the app easier to use out of the box for AWS people and doesn't bloat the distribution too much. However, I would be ok not including it if we add something to the docs that says exactly what command to run to get `hadoop-aws` working properly. (These things are hard for users to figure out from first principles)\r\n\r\nI'm ok with whatever y'all think is best (@jihoonson and @nishantmonu51) if you agree with each other. If not my vote goes to including the jar.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548160990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548170033","html_url":"https://github.com/apache/druid/issues/3435#issuecomment-548170033","issue_url":"https://api.github.com/repos/apache/druid/issues/3435","id":548170033,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE3MDAzMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T00:41:49Z","updated_at":"2019-10-31T00:41:49Z","author_association":"CONTRIBUTOR","body":"I think it makes more sense to add to docs as for GCS (https://druid.apache.org/docs/latest/development/extensions-core/hdfs.html). ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548170033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548173368","html_url":"https://github.com/apache/druid/issues/8786#issuecomment-548173368","issue_url":"https://api.github.com/repos/apache/druid/issues/8786","id":548173368,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODE3MzM2OA==","user":{"login":"koupeng","id":6110684,"node_id":"MDQ6VXNlcjYxMTA2ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/6110684?v=4","gravatar_id":"","url":"https://api.github.com/users/koupeng","html_url":"https://github.com/koupeng","followers_url":"https://api.github.com/users/koupeng/followers","following_url":"https://api.github.com/users/koupeng/following{/other_user}","gists_url":"https://api.github.com/users/koupeng/gists{/gist_id}","starred_url":"https://api.github.com/users/koupeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koupeng/subscriptions","organizations_url":"https://api.github.com/users/koupeng/orgs","repos_url":"https://api.github.com/users/koupeng/repos","events_url":"https://api.github.com/users/koupeng/events{/privacy}","received_events_url":"https://api.github.com/users/koupeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T00:59:58Z","updated_at":"2019-10-31T00:59:58Z","author_association":"NONE","body":"@vogievetsky thanks,but,my pc is win10？","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548173368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548207239","html_url":"https://github.com/apache/druid/pull/8794#issuecomment-548207239","issue_url":"https://api.github.com/repos/apache/druid/issues/8794","id":548207239,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIwNzIzOQ==","user":{"login":"suneet-s","id":44787917,"node_id":"MDQ6VXNlcjQ0Nzg3OTE3","avatar_url":"https://avatars.githubusercontent.com/u/44787917?v=4","gravatar_id":"","url":"https://api.github.com/users/suneet-s","html_url":"https://github.com/suneet-s","followers_url":"https://api.github.com/users/suneet-s/followers","following_url":"https://api.github.com/users/suneet-s/following{/other_user}","gists_url":"https://api.github.com/users/suneet-s/gists{/gist_id}","starred_url":"https://api.github.com/users/suneet-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suneet-s/subscriptions","organizations_url":"https://api.github.com/users/suneet-s/orgs","repos_url":"https://api.github.com/users/suneet-s/repos","events_url":"https://api.github.com/users/suneet-s/events{/privacy}","received_events_url":"https://api.github.com/users/suneet-s/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T03:59:18Z","updated_at":"2019-10-31T03:59:18Z","author_association":"CONTRIBUTOR","body":"Thanks for this fix!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548207239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548224002","html_url":"https://github.com/apache/druid/issues/8289#issuecomment-548224002","issue_url":"https://api.github.com/repos/apache/druid/issues/8289","id":548224002,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIyNDAwMg==","user":{"login":"alexwangx","id":9983697,"node_id":"MDQ6VXNlcjk5ODM2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/9983697?v=4","gravatar_id":"","url":"https://api.github.com/users/alexwangx","html_url":"https://github.com/alexwangx","followers_url":"https://api.github.com/users/alexwangx/followers","following_url":"https://api.github.com/users/alexwangx/following{/other_user}","gists_url":"https://api.github.com/users/alexwangx/gists{/gist_id}","starred_url":"https://api.github.com/users/alexwangx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexwangx/subscriptions","organizations_url":"https://api.github.com/users/alexwangx/orgs","repos_url":"https://api.github.com/users/alexwangx/repos","events_url":"https://api.github.com/users/alexwangx/events{/privacy}","received_events_url":"https://api.github.com/users/alexwangx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T05:37:33Z","updated_at":"2019-10-31T05:37:33Z","author_association":"NONE","body":"I also encountered this problem, have you solved it? @shuaidonga ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548224002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548231683","html_url":"https://github.com/apache/druid/issues/6907#issuecomment-548231683","issue_url":"https://api.github.com/repos/apache/druid/issues/6907","id":548231683,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIzMTY4Mw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T06:17:25Z","updated_at":"2019-10-31T06:17:25Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548231683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548234174","html_url":"https://github.com/apache/druid/pull/8798#issuecomment-548234174","issue_url":"https://api.github.com/repos/apache/druid/issues/8798","id":548234174,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIzNDE3NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T06:29:58Z","updated_at":"2019-10-31T06:29:58Z","author_association":"CONTRIBUTOR","body":"I think none of the tests will check this anyway; merging. I tested it locally.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548234174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548247254","html_url":"https://github.com/apache/druid/pull/8796#issuecomment-548247254","issue_url":"https://api.github.com/repos/apache/druid/issues/8796","id":548247254,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODI0NzI1NA==","user":{"login":"lgtm-com[bot]","id":43144390,"node_id":"MDM6Qm90NDMxNDQzOTA=","avatar_url":"https://avatars.githubusercontent.com/in/17324?v=4","gravatar_id":"","url":"https://api.github.com/users/lgtm-com%5Bbot%5D","html_url":"https://github.com/apps/lgtm-com","followers_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/followers","following_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/repos","events_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/lgtm-com%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T07:28:43Z","updated_at":"2019-10-31T07:28:43Z","author_association":"NONE","body":"This pull request **introduces 1 alert** when merging c673418e9a8a5faafea769ac623267a339102429 into e70b71c90f8ebc9d96a8acba6ac4d3f7269773dd - [view on LGTM.com](https://lgtm.com/projects/g/apache/incubator-druid/rev/pr-ec34f23f2b9b8c9902b599ecbf873ebaf4253f7a)\n\n**new alerts:**\n\n* 1 for Useless assignment to local variable","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548247254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548370339","html_url":"https://github.com/apache/druid/issues/8605#issuecomment-548370339","issue_url":"https://api.github.com/repos/apache/druid/issues/8605","id":548370339,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODM3MDMzOQ==","user":{"login":"Stephan3555","id":2537072,"node_id":"MDQ6VXNlcjI1MzcwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/2537072?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan3555","html_url":"https://github.com/Stephan3555","followers_url":"https://api.github.com/users/Stephan3555/followers","following_url":"https://api.github.com/users/Stephan3555/following{/other_user}","gists_url":"https://api.github.com/users/Stephan3555/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan3555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan3555/subscriptions","organizations_url":"https://api.github.com/users/Stephan3555/orgs","repos_url":"https://api.github.com/users/Stephan3555/repos","events_url":"https://api.github.com/users/Stephan3555/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan3555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T13:18:56Z","updated_at":"2019-10-31T13:18:56Z","author_association":"NONE","body":"Running in the same problem lately. Have you found the reason?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548370339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548375740","html_url":"https://github.com/apache/druid/issues/8289#issuecomment-548375740","issue_url":"https://api.github.com/repos/apache/druid/issues/8289","id":548375740,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODM3NTc0MA==","user":{"login":"shuaidonga","id":16378509,"node_id":"MDQ6VXNlcjE2Mzc4NTA5","avatar_url":"https://avatars.githubusercontent.com/u/16378509?v=4","gravatar_id":"","url":"https://api.github.com/users/shuaidonga","html_url":"https://github.com/shuaidonga","followers_url":"https://api.github.com/users/shuaidonga/followers","following_url":"https://api.github.com/users/shuaidonga/following{/other_user}","gists_url":"https://api.github.com/users/shuaidonga/gists{/gist_id}","starred_url":"https://api.github.com/users/shuaidonga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuaidonga/subscriptions","organizations_url":"https://api.github.com/users/shuaidonga/orgs","repos_url":"https://api.github.com/users/shuaidonga/repos","events_url":"https://api.github.com/users/shuaidonga/events{/privacy}","received_events_url":"https://api.github.com/users/shuaidonga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T13:30:56Z","updated_at":"2019-10-31T13:30:56Z","author_association":"NONE","body":"Change the cdh version to compile in the source code\r\n\r\n\r\n\r\n------------------ Original ------------------\r\nFrom: AlexWang <notifications@github.com&gt;\r\nDate: Thu,Oct 31,2019 1:38 PM\r\nTo: apache/incubator-druid <incubator-druid@noreply.github.com&gt;\r\nCc: shuaidonga <1181157720@qq.com&gt;, Mention <mention@noreply.github.com&gt;\r\nSubject: Re: [apache/incubator-druid] druid 0.15.0 with cdh 5.9.2 index-hadoop happend java.lang.NoSuchFieldError:org.apache.hadoop.mapreduce.TypeConverter.fromYarn error (#8289)\r\n\r\n\r\n\r\n\r\nI also encountered this problem, have you solved it? @shuaidonga\r\n \r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548375740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548458650","html_url":"https://github.com/apache/druid/issues/8800#issuecomment-548458650","issue_url":"https://api.github.com/repos/apache/druid/issues/8800","id":548458650,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODQ1ODY1MA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T16:29:05Z","updated_at":"2019-10-31T16:29:05Z","author_association":"CONTRIBUTOR","body":"I think DruidSQL orders depending on what the data type is. If you have a string value that represents numbers then you could cast it `CAST('foo' AS BIGINT)`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548458650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548505757","html_url":"https://github.com/apache/druid/issues/8800#issuecomment-548505757","issue_url":"https://api.github.com/repos/apache/druid/issues/8800","id":548505757,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODUwNTc1Nw==","user":{"login":"abhishekrb19","id":8687261,"node_id":"MDQ6VXNlcjg2ODcyNjE=","avatar_url":"https://avatars.githubusercontent.com/u/8687261?v=4","gravatar_id":"","url":"https://api.github.com/users/abhishekrb19","html_url":"https://github.com/abhishekrb19","followers_url":"https://api.github.com/users/abhishekrb19/followers","following_url":"https://api.github.com/users/abhishekrb19/following{/other_user}","gists_url":"https://api.github.com/users/abhishekrb19/gists{/gist_id}","starred_url":"https://api.github.com/users/abhishekrb19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhishekrb19/subscriptions","organizations_url":"https://api.github.com/users/abhishekrb19/orgs","repos_url":"https://api.github.com/users/abhishekrb19/repos","events_url":"https://api.github.com/users/abhishekrb19/events{/privacy}","received_events_url":"https://api.github.com/users/abhishekrb19/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T18:19:56Z","updated_at":"2019-10-31T18:19:56Z","author_association":"CONTRIBUTOR","body":"Oh, yes, the `CAST` worked! Thanks @vogievetsky, I will close this issue.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548505757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548526908","html_url":"https://github.com/apache/druid/pull/8779#issuecomment-548526908","issue_url":"https://api.github.com/repos/apache/druid/issues/8779","id":548526908,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODUyNjkwOA==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T19:12:13Z","updated_at":"2019-10-31T19:12:13Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 Could you please review this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548526908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548555632","html_url":"https://github.com/apache/druid/issues/8801#issuecomment-548555632","issue_url":"https://api.github.com/repos/apache/druid/issues/8801","id":548555632,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU1NTYzMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T20:29:34Z","updated_at":"2019-10-31T20:29:34Z","author_association":"CONTRIBUTOR","body":"Sounds good to me overall. \r\n\r\n> Instead of MM pushing the task logs on completion to log storage, Overlord will fetch the logs and push them to the log storage\r\n\r\nCould this potentially become a bottleneck when scaling?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548555632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548560274","html_url":"https://github.com/apache/druid/issues/8801#issuecomment-548560274","issue_url":"https://api.github.com/repos/apache/druid/issues/8801","id":548560274,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU2MDI3NA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T20:42:35Z","updated_at":"2019-10-31T20:43:21Z","author_association":"MEMBER","body":"\r\n> Sounds good to me overall.\r\n> \r\n> > Instead of MM pushing the task logs on completion to log storage, Overlord will fetch the logs and push them to the log storage\r\n> \r\n> Could this potentially become a bottleneck when scaling?\r\n\r\nThis will be done asynchronously by a background thread.\r\n\r\nHowever, if it becomes a bottleneck, log publishing can be turned off and any of kubernetes logging methods can be used to collect job logs - \r\nrecommendations are described here - https://kubernetes.io/docs/concepts/cluster-administration/logging/ \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548560274/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548583744","html_url":"https://github.com/apache/druid/issues/8801#issuecomment-548583744","issue_url":"https://api.github.com/repos/apache/druid/issues/8801","id":548583744,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4Mzc0NA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T21:51:29Z","updated_at":"2019-10-31T21:51:29Z","author_association":"CONTRIBUTOR","body":"+1 , we were actually thinking along those lines in recent past.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548583744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586147","html_url":"https://github.com/apache/druid/pull/8777#issuecomment-548586147","issue_url":"https://api.github.com/repos/apache/druid/issues/8777","id":548586147,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4NjE0Nw==","user":{"login":"renevan10","id":19524971,"node_id":"MDQ6VXNlcjE5NTI0OTcx","avatar_url":"https://avatars.githubusercontent.com/u/19524971?v=4","gravatar_id":"","url":"https://api.github.com/users/renevan10","html_url":"https://github.com/renevan10","followers_url":"https://api.github.com/users/renevan10/followers","following_url":"https://api.github.com/users/renevan10/following{/other_user}","gists_url":"https://api.github.com/users/renevan10/gists{/gist_id}","starred_url":"https://api.github.com/users/renevan10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renevan10/subscriptions","organizations_url":"https://api.github.com/users/renevan10/orgs","repos_url":"https://api.github.com/users/renevan10/repos","events_url":"https://api.github.com/users/renevan10/events{/privacy}","received_events_url":"https://api.github.com/users/renevan10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T21:59:46Z","updated_at":"2019-10-31T21:59:46Z","author_association":"CONTRIBUTOR","body":"@fjy I'm not sure if that's possible, it would require a complex override on the calendar component. I think users should know which ones are which given that the component itself doesn't have those labels?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586329","html_url":"https://github.com/apache/druid/issues/8705#issuecomment-548586329","issue_url":"https://api.github.com/repos/apache/druid/issues/8705","id":548586329,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4NjMyOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:00:23Z","updated_at":"2019-10-31T22:00:23Z","author_association":"CONTRIBUTOR","body":"if it helps, I have had success with\r\n```\r\ndocker pull apache/incubator-druid:0.16.0-incubating\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586329/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586851","html_url":"https://github.com/apache/druid/pull/8797#issuecomment-548586851","issue_url":"https://api.github.com/repos/apache/druid/issues/8797","id":548586851,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4Njg1MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:01:58Z","updated_at":"2019-10-31T22:01:58Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-druid/pull/8796 should me merged first\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548586851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548589728","html_url":"https://github.com/apache/druid/pull/8656#issuecomment-548589728","issue_url":"https://api.github.com/repos/apache/druid/issues/8656","id":548589728,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4OTcyOA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:12:27Z","updated_at":"2019-10-31T22:12:27Z","author_association":"CONTRIBUTOR","body":"please don't rebase/force-push after the PR is under review which makes it really difficult for me, as reviewer, to see what changed since I last reviewed. thanks. ( https://github.com/apache/incubator-druid/blob/master/CONTRIBUTING.md#if-your-pull-request-shows-conflicts-with-master )","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548589728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548593219","html_url":"https://github.com/apache/druid/issues/8755#issuecomment-548593219","issue_url":"https://api.github.com/repos/apache/druid/issues/8755","id":548593219,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU5MzIxOQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:24:39Z","updated_at":"2019-10-31T22:24:39Z","author_association":"CONTRIBUTOR","body":"Will be fixed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548593219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548598403","html_url":"https://github.com/apache/druid/issues/8716#issuecomment-548598403","issue_url":"https://api.github.com/repos/apache/druid/issues/8716","id":548598403,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU5ODQwMw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:45:23Z","updated_at":"2019-10-31T22:45:23Z","author_association":"CONTRIBUTOR","body":"sorry, glad to know that `DruidLeaderClient` is already being used , wasn't aware of `DruidLeaderClient#goAsync` which purposefully skips managing the request lifecycle and consequently doesn't do the redirects itself.\r\n\r\ngoAsync(..) use cases can probably be replaced to use go(..) with use of a version of `InputStreamResponseHandler` that preserves the HTTP response code .\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548598403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548600873","html_url":"https://github.com/apache/druid/issues/8713#issuecomment-548600873","issue_url":"https://api.github.com/repos/apache/druid/issues/8713","id":548600873,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYwMDg3Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:55:21Z","updated_at":"2019-10-31T22:55:21Z","author_association":"CONTRIBUTOR","body":"sorry, been away for a while.\r\n\r\nsounds good, if it can be handled in the more generic way at the level of `ResponseContext` .","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548600873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548606451","html_url":"https://github.com/apache/druid/issues/8716#issuecomment-548606451","issue_url":"https://api.github.com/repos/apache/druid/issues/8716","id":548606451,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYwNjQ1MQ==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T23:20:25Z","updated_at":"2019-10-31T23:20:25Z","author_association":"NONE","body":"`goAsync` is supposed to be non-blocking, it doesn't do a `get()` on the `future`, it takes a `BytesAccumulatingResponseHandler`. I was thinking of doing the retries from the callers of `goAsync` on exception in `future.get()`, not sure if there's a better solution.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548606451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548608044","html_url":"https://github.com/apache/druid/pull/8803#issuecomment-548608044","issue_url":"https://api.github.com/repos/apache/druid/issues/8803","id":548608044,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYwODA0NA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T23:27:47Z","updated_at":"2019-10-31T23:27:47Z","author_association":"CONTRIBUTOR","body":"Yay! Thank you.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548608044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548608462","html_url":"https://github.com/apache/druid/issues/8786#issuecomment-548608462","issue_url":"https://api.github.com/repos/apache/druid/issues/8786","id":548608462,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYwODQ2Mg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T23:29:55Z","updated_at":"2019-10-31T23:29:55Z","author_association":"CONTRIBUTOR","body":"Druid dev does not work right on windows. Do you want to develop all of Druid or just the web console?\r\nCan you try executing all the commands inside of `web-console`'s `script/build` bash script yourself?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548608462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548609739","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548609739","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548609739,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYwOTczOQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T23:35:07Z","updated_at":"2019-10-31T23:35:07Z","author_association":"CONTRIBUTOR","body":"Thank you for the detailed benchmark results! It looks great but I wonder how the default configuration works under more realistic load. For example, it would be more realistic if there are like 80% of light queries and 20% of heavy queries that have a shorter delay and a larger delay, respectively.\r\n\r\n> I think the performance degradation under load spikes falls within what I consider acceptable range. Particularly important, I find the degradation to be relatively predictable so that we can update the cluster tuning guide (in a future PR) to best advise how to tune your brokers for a given cluster size and load pattern.\r\n\r\nSounds nice. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548609739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548611095","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-548611095","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":548611095,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYxMTA5NQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T23:40:49Z","updated_at":"2019-11-01T04:23:05Z","author_association":"MEMBER","body":">Thank you for the detailed benchmark results! It looks great but I wonder how the default configuration works under more realistic load. For example, it would be more realistic if there are like 80% of light queries and 20% of heavy queries that have a shorter delay and a larger delay, respectively.\r\n\r\nThis sounds good. I think i went a bit hard on this PR in the benchmarks I have presented so far in terms of targeting the worst cases which aren't super realistic, which I think maybe looks a lot scarier than a typical heavy load will appear practice. The existing worst case benchmarks are basically depicting what happens if a bunch of moderate to large result set sized queries _all happen simultaneously_ and even more _all simultaneously have work to do instead of some of them blocking waiting for input_, which should very rarely (if ever) happen in the real world.\r\n\r\nI will throw together another benchmark to try and plot out a more realistic heavy load case to see how that looks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548611095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548627260","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-548627260","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":548627260,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODYyNzI2MA==","user":{"login":"zhenxiao","id":1274155,"node_id":"MDQ6VXNlcjEyNzQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1274155?v=4","gravatar_id":"","url":"https://api.github.com/users/zhenxiao","html_url":"https://github.com/zhenxiao","followers_url":"https://api.github.com/users/zhenxiao/followers","following_url":"https://api.github.com/users/zhenxiao/following{/other_user}","gists_url":"https://api.github.com/users/zhenxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/zhenxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhenxiao/subscriptions","organizations_url":"https://api.github.com/users/zhenxiao/orgs","repos_url":"https://api.github.com/users/zhenxiao/repos","events_url":"https://api.github.com/users/zhenxiao/events{/privacy}","received_events_url":"https://api.github.com/users/zhenxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T01:08:15Z","updated_at":"2019-11-01T01:08:15Z","author_association":"CONTRIBUTOR","body":"thank you, @leventov \r\ncomments addressed","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548627260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548660262","html_url":"https://github.com/apache/druid/pull/8797#issuecomment-548660262","issue_url":"https://api.github.com/repos/apache/druid/issues/8797","id":548660262,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODY2MDI2Mg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T04:15:35Z","updated_at":"2019-11-01T04:15:35Z","author_association":"CONTRIBUTOR","body":"This is great! With our powers combined the web console will be unstoppable! 👍  ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548660262/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548710887","html_url":"https://github.com/apache/druid/pull/8775#issuecomment-548710887","issue_url":"https://api.github.com/repos/apache/druid/issues/8775","id":548710887,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODcxMDg4Nw==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T08:41:58Z","updated_at":"2019-11-01T08:41:58Z","author_association":"MEMBER","body":"> Failed to execute goal com.twitter:scrooge-maven-plugin:4.11.0:testCompile (thrift-test-sources) on project druid-thrift-extensions: Execution thrift-test-sources of goal com.twitter:scrooge-maven-plugin:4.11.0:testCompile failed: Plugin com.twitter:scrooge-maven-plugin:4.11.0 or one of its dependencies could not be resolved: Could not find artifact org.apache.thrift:libthrift:jar:0.5.0-1 in central (https://repo.maven.apache.org/maven2) -> [Help 1]\r\n\r\nIt seems that TeamCity has been unstable recently... I can pass the `thrift-test-sources` task on my PC. I am going to restart Teamcity's job by forcing a push.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548710887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548796876","html_url":"https://github.com/apache/druid/issues/6784#issuecomment-548796876","issue_url":"https://api.github.com/repos/apache/druid/issues/6784","id":548796876,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODc5Njg3Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T13:57:14Z","updated_at":"2019-11-01T13:57:14Z","author_association":"NONE","body":"This issue has been closed due to lack of activity. If you think that is incorrect, or the issue requires additional review, you can revive the issue at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548796876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548801984","html_url":"https://github.com/apache/druid/issues/8807#issuecomment-548801984","issue_url":"https://api.github.com/repos/apache/druid/issues/8807","id":548801984,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODgwMTk4NA==","user":{"login":"v-vishwa","id":51313197,"node_id":"MDQ6VXNlcjUxMzEzMTk3","avatar_url":"https://avatars.githubusercontent.com/u/51313197?v=4","gravatar_id":"","url":"https://api.github.com/users/v-vishwa","html_url":"https://github.com/v-vishwa","followers_url":"https://api.github.com/users/v-vishwa/followers","following_url":"https://api.github.com/users/v-vishwa/following{/other_user}","gists_url":"https://api.github.com/users/v-vishwa/gists{/gist_id}","starred_url":"https://api.github.com/users/v-vishwa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v-vishwa/subscriptions","organizations_url":"https://api.github.com/users/v-vishwa/orgs","repos_url":"https://api.github.com/users/v-vishwa/repos","events_url":"https://api.github.com/users/v-vishwa/events{/privacy}","received_events_url":"https://api.github.com/users/v-vishwa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T14:11:45Z","updated_at":"2019-11-01T14:14:51Z","author_association":"CONTRIBUTOR","body":"@MrMoronIV \r\n In you ingestion spec, I see you have\r\n\r\n```\r\n\"tuningConfig\": {\r\n    \"type\": \"realtime\",\r\n```\r\nI think, Type should be `Kafka`, please see the doc below:\r\nhttps://druid.apache.org/docs/latest/development/extensions-core/kafka-ingestion","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548801984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548804971","html_url":"https://github.com/apache/druid/issues/8807#issuecomment-548804971","issue_url":"https://api.github.com/repos/apache/druid/issues/8807","id":548804971,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODgwNDk3MQ==","user":{"login":"MrMoronIV","id":35342346,"node_id":"MDQ6VXNlcjM1MzQyMzQ2","avatar_url":"https://avatars.githubusercontent.com/u/35342346?v=4","gravatar_id":"","url":"https://api.github.com/users/MrMoronIV","html_url":"https://github.com/MrMoronIV","followers_url":"https://api.github.com/users/MrMoronIV/followers","following_url":"https://api.github.com/users/MrMoronIV/following{/other_user}","gists_url":"https://api.github.com/users/MrMoronIV/gists{/gist_id}","starred_url":"https://api.github.com/users/MrMoronIV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrMoronIV/subscriptions","organizations_url":"https://api.github.com/users/MrMoronIV/orgs","repos_url":"https://api.github.com/users/MrMoronIV/repos","events_url":"https://api.github.com/users/MrMoronIV/events{/privacy}","received_events_url":"https://api.github.com/users/MrMoronIV/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T14:19:42Z","updated_at":"2019-11-01T14:19:42Z","author_association":"NONE","body":"I replaced the whole tuningConfig block with:\r\n\r\n```\r\n\"tuningConfig\": {\r\n    \"type\": \"kafka\",\r\n    \"maxRowsPerSegment\": 5000000\r\n  },\r\n```\r\nand it now works, sweet!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548804971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548817340","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-548817340","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":548817340,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODgxNzM0MA==","user":{"login":"zhenxiao","id":1274155,"node_id":"MDQ6VXNlcjEyNzQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1274155?v=4","gravatar_id":"","url":"https://api.github.com/users/zhenxiao","html_url":"https://github.com/zhenxiao","followers_url":"https://api.github.com/users/zhenxiao/followers","following_url":"https://api.github.com/users/zhenxiao/following{/other_user}","gists_url":"https://api.github.com/users/zhenxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/zhenxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhenxiao/subscriptions","organizations_url":"https://api.github.com/users/zhenxiao/orgs","repos_url":"https://api.github.com/users/zhenxiao/repos","events_url":"https://api.github.com/users/zhenxiao/events{/privacy}","received_events_url":"https://api.github.com/users/zhenxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T14:52:47Z","updated_at":"2019-11-01T14:52:47Z","author_association":"CONTRIBUTOR","body":"thank you, @leventov \r\nhow's this one?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548817340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548859007","html_url":"https://github.com/apache/druid/pull/8621#issuecomment-548859007","issue_url":"https://api.github.com/repos/apache/druid/issues/8621","id":548859007,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg1OTAwNw==","user":{"login":"michaelschiff","id":1669670,"node_id":"MDQ6VXNlcjE2Njk2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/1669670?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelschiff","html_url":"https://github.com/michaelschiff","followers_url":"https://api.github.com/users/michaelschiff/followers","following_url":"https://api.github.com/users/michaelschiff/following{/other_user}","gists_url":"https://api.github.com/users/michaelschiff/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelschiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelschiff/subscriptions","organizations_url":"https://api.github.com/users/michaelschiff/orgs","repos_url":"https://api.github.com/users/michaelschiff/repos","events_url":"https://api.github.com/users/michaelschiff/events{/privacy}","received_events_url":"https://api.github.com/users/michaelschiff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T16:43:06Z","updated_at":"2019-11-01T16:43:06Z","author_association":"CONTRIBUTOR","body":"<img width=\"1675\" alt=\"Screen Shot 2019-11-01 at 9 35 49 AM\" src=\"https://user-images.githubusercontent.com/1669670/68040609-e7231300-fc8b-11e9-991e-30e7f1b1cbba.png\">\r\nThings are working well in our development clusters.  Please let me know if there is anything else you'd like to see before going forward with review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548859007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548881797","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-548881797","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":548881797,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg4MTc5Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:38:38Z","updated_at":"2019-11-01T17:38:38Z","author_association":"MEMBER","body":"@zhenxiao also, future note: please don't rebase/force push your PR branch in Druid, always just add commits on top. See https://github.com/apache/incubator-druid/blob/master/CONTRIBUTING.md#if-your-pull-request-shows-conflicts-with-master.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548881797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548883468","html_url":"https://github.com/apache/druid/issues/7833#issuecomment-548883468","issue_url":"https://api.github.com/repos/apache/druid/issues/7833","id":548883468,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg4MzQ2OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:42:59Z","updated_at":"2019-11-01T17:42:59Z","author_association":"CONTRIBUTOR","body":"Fixed in #7969.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548883468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548884359","html_url":"https://github.com/apache/druid/issues/8716#issuecomment-548884359","issue_url":"https://api.github.com/repos/apache/druid/issues/8716","id":548884359,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg4NDM1OQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:45:28Z","updated_at":"2019-11-01T17:45:28Z","author_association":"CONTRIBUTOR","body":"> goAsync(..) use cases can probably be replaced to use go(..) with use of a version of `InputStreamResponseHandler` that preserves the HTTP response code .\r\n\r\nI think this is the right way we should go in the future.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548884359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548884370","html_url":"https://github.com/apache/druid/pull/8775#issuecomment-548884370","issue_url":"https://api.github.com/repos/apache/druid/issues/8775","id":548884370,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg4NDM3MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:45:30Z","updated_at":"2019-11-01T17:45:30Z","author_association":"CONTRIBUTOR","body":"I restarted the TC and LGTM checks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548884370/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548929618","html_url":"https://github.com/apache/druid/pull/8430#issuecomment-548929618","issue_url":"https://api.github.com/repos/apache/druid/issues/8430","id":548929618,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODkyOTYxOA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T19:57:12Z","updated_at":"2019-11-01T19:57:12Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If you think that's incorrect or this pull request should instead be reviewed, please simply write any comment. Even if closed, you can still revive the PR at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548929618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548955564","html_url":"https://github.com/apache/druid/pull/8748#issuecomment-548955564","issue_url":"https://api.github.com/repos/apache/druid/issues/8748","id":548955564,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODk1NTU2NA==","user":{"login":"SEKIRO-J","id":19563364,"node_id":"MDQ6VXNlcjE5NTYzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/19563364?v=4","gravatar_id":"","url":"https://api.github.com/users/SEKIRO-J","html_url":"https://github.com/SEKIRO-J","followers_url":"https://api.github.com/users/SEKIRO-J/followers","following_url":"https://api.github.com/users/SEKIRO-J/following{/other_user}","gists_url":"https://api.github.com/users/SEKIRO-J/gists{/gist_id}","starred_url":"https://api.github.com/users/SEKIRO-J/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SEKIRO-J/subscriptions","organizations_url":"https://api.github.com/users/SEKIRO-J/orgs","repos_url":"https://api.github.com/users/SEKIRO-J/repos","events_url":"https://api.github.com/users/SEKIRO-J/events{/privacy}","received_events_url":"https://api.github.com/users/SEKIRO-J/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T21:22:56Z","updated_at":"2019-11-01T21:25:17Z","author_association":"CONTRIBUTOR","body":"> Does this really solve the original bug? It adds the partition to partitionIds, so it's detected, which is an improvement; the fact that this isn't happening now seems to be a regression. But this patch does not seem to do anything to force the system to read from the earliest offset for this newly-discovered partition. I skimmed through the tests and didn't see a test for this case either.\r\n\r\n\r\nThe root cause for the original bug was:\r\nnewly added partition in kafka never recognized as \"newly added\", so it won't be using `useEarliestOffset==true`, the reason why this is happening is:\r\nhttps://github.com/apache/incubator-druid/blob/53094e159db4b04f0b5b356e064b011d66bad21b/indexing-service/src/main/java/org/apache/druid/indexing/seekablestream/supervisor/SeekableStreamSupervisor.java#L448 never gets updated, so https://github.com/apache/incubator-druid/blob/53094e159db4b04f0b5b356e064b011d66bad21b/indexing-service/src/main/java/org/apache/druid/indexing/seekablestream/supervisor/SeekableStreamSupervisor.java#L1884 `initialPartitionDiscovery ` is always true and `subsequentlyDiscoveredPartitions` never updates.\r\nSo all the \"newly discovered partitions\" are regarded as \"partitions when the supervisor first run\", which reads `earliestOffset` from config. \r\n\r\nThe code for using `useEarliestOffset==true` for newly discovered partitions already exists:\r\nhttps://github.com/apache/incubator-druid/blob/53094e159db4b04f0b5b356e064b011d66bad21b/indexing-service/src/main/java/org/apache/druid/indexing/seekablestream/supervisor/SeekableStreamSupervisor.java#L2860,\r\nSo the solution to this bug just needs to update `partitionIds`, so that `subsequentlyDiscoveredPartitions ` can be updated.\r\n\r\n\r\nI have a test case to test & verify this behavior, but due to some reasons, like `metadata.max.age.ms` is set to 10s and immutable, and other system environment things. The regression test could be flaky,  so I just wrote a unit test to test the function I added. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548955564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/548976216","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-548976216","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":548976216,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODk3NjIxNg==","user":{"login":"zhenxiao","id":1274155,"node_id":"MDQ6VXNlcjEyNzQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1274155?v=4","gravatar_id":"","url":"https://api.github.com/users/zhenxiao","html_url":"https://github.com/zhenxiao","followers_url":"https://api.github.com/users/zhenxiao/followers","following_url":"https://api.github.com/users/zhenxiao/following{/other_user}","gists_url":"https://api.github.com/users/zhenxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/zhenxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhenxiao/subscriptions","organizations_url":"https://api.github.com/users/zhenxiao/orgs","repos_url":"https://api.github.com/users/zhenxiao/repos","events_url":"https://api.github.com/users/zhenxiao/events{/privacy}","received_events_url":"https://api.github.com/users/zhenxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T22:50:10Z","updated_at":"2019-11-01T22:50:10Z","author_association":"CONTRIBUTOR","body":"thank you, @leventov \r\nFor testcase failure, always get:\r\n\r\n```\r\n[ERROR]   Run 1: DirectDruidClientTest.testCancel:277 \r\n  Expectation failure on verify:\r\n    HttpClient.go(capture(org.apache.druid.java.util.http.client.Request@4cfa805b), <any>, <any>): expected: 1, actual: 0\r\n```\r\n\r\nget stuck with debugging Mock. I try to fix it by change it to anyTimes. Not sure whether it is the right way to fix it. Any suggestions?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/548976216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549021274","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-549021274","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":549021274,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyMTI3NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T08:06:30Z","updated_at":"2019-11-02T08:06:30Z","author_association":"MEMBER","body":"Sorry, I don't have time to debug tests for you.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549021274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549021461","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-549021461","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":549021461,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyMTQ2MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T08:08:51Z","updated_at":"2019-11-02T08:08:51Z","author_association":"MEMBER","body":"Actually, the tests have passed. The problem is now that TeamCity inspections are failing, but this seems to be a project-wide problem, not specific to this PR. So you are good with this PR, just need to wait until the problem with TeamCity is resolved.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549021461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549022248","html_url":"https://github.com/apache/druid/pull/8809#issuecomment-549022248","issue_url":"https://api.github.com/repos/apache/druid/issues/8809","id":549022248,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyMjI0OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T08:19:15Z","updated_at":"2019-11-02T08:19:15Z","author_association":"MEMBER","body":"Mechanically adding `Execs.directExecutor()` doesn't solve the problem. You should actually thoughtfully check every case and verify that `Execs.directExecutor()` is an acceptable option in each of them. A case should meet at least one of three criteria, as described in https://github.com/code-review-checklists/java-concurrency#cf-beware-non-async:\r\n 1) The callback is lightweight and non-blocking (as is the case in your PR #8700); or\r\n 2) The callback is added from the same executor as the future is completed; or\r\n 3) The callback attachment is preceded with `if (future.isDone())` check.\r\n\r\nThen, the specific criterion should be identified in a comment, similarly to what I asked you to do here: https://github.com/apache/incubator-druid/pull/8700#discussion_r341482427.\r\n\r\nOtherwise (if the case meets neither of these criteria), `directExecutor()` should not be used.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549022248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549022432","html_url":"https://github.com/apache/druid/pull/8809#issuecomment-549022432","issue_url":"https://api.github.com/repos/apache/druid/issues/8809","id":549022432,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyMjQzMg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T08:21:43Z","updated_at":"2019-11-02T08:21:43Z","author_association":"MEMBER","body":"A forbidden-apis entry should also be added. See an example here: https://github.com/apache/incubator-druid/commit/15fbf5983d9d6abaeda54296f97fe65f1d6bba98#diff-4cfb6baf06c34e537a8666d9a0f3aebd","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549022432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549026920","html_url":"https://github.com/apache/druid/pull/8700#issuecomment-549026920","issue_url":"https://api.github.com/repos/apache/druid/issues/8700","id":549026920,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyNjkyMA==","user":{"login":"zhenxiao","id":1274155,"node_id":"MDQ6VXNlcjEyNzQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1274155?v=4","gravatar_id":"","url":"https://api.github.com/users/zhenxiao","html_url":"https://github.com/zhenxiao","followers_url":"https://api.github.com/users/zhenxiao/followers","following_url":"https://api.github.com/users/zhenxiao/following{/other_user}","gists_url":"https://api.github.com/users/zhenxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/zhenxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhenxiao/subscriptions","organizations_url":"https://api.github.com/users/zhenxiao/orgs","repos_url":"https://api.github.com/users/zhenxiao/repos","events_url":"https://api.github.com/users/zhenxiao/events{/privacy}","received_events_url":"https://api.github.com/users/zhenxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T09:29:02Z","updated_at":"2019-11-02T09:29:02Z","author_association":"CONTRIBUTOR","body":"thank you, @leventov \r\ncomments addressed","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549026920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549028506","html_url":"https://github.com/apache/druid/pull/8808#issuecomment-549028506","issue_url":"https://api.github.com/repos/apache/druid/issues/8808","id":549028506,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAyODUwNg==","user":{"login":"zhenxiao","id":1274155,"node_id":"MDQ6VXNlcjEyNzQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1274155?v=4","gravatar_id":"","url":"https://api.github.com/users/zhenxiao","html_url":"https://github.com/zhenxiao","followers_url":"https://api.github.com/users/zhenxiao/followers","following_url":"https://api.github.com/users/zhenxiao/following{/other_user}","gists_url":"https://api.github.com/users/zhenxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/zhenxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhenxiao/subscriptions","organizations_url":"https://api.github.com/users/zhenxiao/orgs","repos_url":"https://api.github.com/users/zhenxiao/repos","events_url":"https://api.github.com/users/zhenxiao/events{/privacy}","received_events_url":"https://api.github.com/users/zhenxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T09:52:40Z","updated_at":"2019-11-02T09:52:40Z","author_association":"CONTRIBUTOR","body":"thank you, @leventov \r\ncomments addressed","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549028506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549038088","html_url":"https://github.com/apache/druid/issues/6789#issuecomment-549038088","issue_url":"https://api.github.com/repos/apache/druid/issues/6789","id":549038088,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTAzODA4OA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T12:10:19Z","updated_at":"2019-11-02T12:10:19Z","author_association":"NONE","body":"This issue has been closed due to lack of activity. If you think that is incorrect, or the issue requires additional review, you can revive the issue at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549038088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549065867","html_url":"https://github.com/apache/druid/issues/8812#issuecomment-549065867","issue_url":"https://api.github.com/repos/apache/druid/issues/8812","id":549065867,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTA2NTg2Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-02T17:45:59Z","updated_at":"2019-11-02T17:45:59Z","author_association":"CONTRIBUTOR","body":"This is a pretty big refactoring. I will add new interfaces first and then implement individual file formats and storage types.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549065867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549112402","html_url":"https://github.com/apache/druid/issues/8816#issuecomment-549112402","issue_url":"https://api.github.com/repos/apache/druid/issues/8816","id":549112402,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTExMjQwMg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-03T07:34:05Z","updated_at":"2019-11-03T07:34:05Z","author_association":"CONTRIBUTOR","body":"that would be a cool result format, another motivation (which is really no longer the case on modern browsers but still: https://cheatsheetseries.owasp.org/cheatsheets/AJAX_Security_Cheat_Sheet.html#always-return-json-with-an-object-on-the-outside","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549112402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549126684","html_url":"https://github.com/apache/druid/pull/8811#issuecomment-549126684","issue_url":"https://api.github.com/repos/apache/druid/issues/8811","id":549126684,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTEyNjY4NA==","user":{"login":"sbespalov","id":22783811,"node_id":"MDQ6VXNlcjIyNzgzODEx","avatar_url":"https://avatars.githubusercontent.com/u/22783811?v=4","gravatar_id":"","url":"https://api.github.com/users/sbespalov","html_url":"https://github.com/sbespalov","followers_url":"https://api.github.com/users/sbespalov/followers","following_url":"https://api.github.com/users/sbespalov/following{/other_user}","gists_url":"https://api.github.com/users/sbespalov/gists{/gist_id}","starred_url":"https://api.github.com/users/sbespalov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbespalov/subscriptions","organizations_url":"https://api.github.com/users/sbespalov/orgs","repos_url":"https://api.github.com/users/sbespalov/repos","events_url":"https://api.github.com/users/sbespalov/events{/privacy}","received_events_url":"https://api.github.com/users/sbespalov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-03T11:19:51Z","updated_at":"2019-11-03T11:19:51Z","author_association":"NONE","body":"Closed because of failed integration tests. New #8818 opened.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549126684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549188519","html_url":"https://github.com/apache/druid/pull/8165#issuecomment-549188519","issue_url":"https://api.github.com/repos/apache/druid/issues/8165","id":549188519,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTE4ODUxOQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-03T23:00:51Z","updated_at":"2019-11-03T23:00:51Z","author_association":"NONE","body":"This pull request/issue has been closed due to lack of activity. If you think that is incorrect, or the pull request requires review, you can revive the PR at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549188519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549193267","html_url":"https://github.com/apache/druid/issues/6915#issuecomment-549193267","issue_url":"https://api.github.com/repos/apache/druid/issues/6915","id":549193267,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTE5MzI2Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T00:00:53Z","updated_at":"2019-11-04T00:00:53Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549193267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549233628","html_url":"https://github.com/apache/druid/issues/8605#issuecomment-549233628","issue_url":"https://api.github.com/repos/apache/druid/issues/8605","id":549233628,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTIzMzYyOA==","user":{"login":"qianmoQ","id":20521442,"node_id":"MDQ6VXNlcjIwNTIxNDQy","avatar_url":"https://avatars.githubusercontent.com/u/20521442?v=4","gravatar_id":"","url":"https://api.github.com/users/qianmoQ","html_url":"https://github.com/qianmoQ","followers_url":"https://api.github.com/users/qianmoQ/followers","following_url":"https://api.github.com/users/qianmoQ/following{/other_user}","gists_url":"https://api.github.com/users/qianmoQ/gists{/gist_id}","starred_url":"https://api.github.com/users/qianmoQ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qianmoQ/subscriptions","organizations_url":"https://api.github.com/users/qianmoQ/orgs","repos_url":"https://api.github.com/users/qianmoQ/repos","events_url":"https://api.github.com/users/qianmoQ/events{/privacy}","received_events_url":"https://api.github.com/users/qianmoQ/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T06:13:42Z","updated_at":"2019-11-04T06:13:42Z","author_association":"NONE","body":"> Running in the same problem lately. Have you found the reason?\r\n\r\nI'm not using the apache version anymore, I'm using the IO druid version now, and that's no longer a problem","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549233628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549240386","html_url":"https://github.com/apache/druid/issues/4133#issuecomment-549240386","issue_url":"https://api.github.com/repos/apache/druid/issues/4133","id":549240386,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTI0MDM4Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T06:57:10Z","updated_at":"2019-11-04T06:57:10Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549240386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549249896","html_url":"https://github.com/apache/druid/pull/8814#issuecomment-549249896","issue_url":"https://api.github.com/repos/apache/druid/issues/8814","id":549249896,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTI0OTg5Ng==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T07:49:51Z","updated_at":"2019-11-04T07:49:51Z","author_association":"CONTRIBUTOR","body":"Does it fully fix #8661?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549249896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549253205","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-549253205","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":549253205,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTI1MzIwNQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T08:05:37Z","updated_at":"2019-11-04T11:47:29Z","author_association":"MEMBER","body":"### more realistic worst case\r\nI reworked the JMH thread based benchmark to use thread groups to examine what happens in a more realistic scenario, with the newly renamed `ParallelMergeCombiningSequenceThreadedBenchmark`. I find this benchmark to be a fair bit less scary than the previous 'worst case' benchmarks, which focused on an impossible scenario because I really wanted to dig in and see where and how the wheels fell off.\r\n\r\nThis benchmark models a more 'typical' heavy load, where the majority of the queries are smaller result-sets with shorter blocking times and a smaller subset are larger result sets with longer initial blocking times. By using thread groups we can look at performance for these 'classes' of queries as load increases. \r\n\r\nThis set was collected with a ratio of 1 'moderately large' query for every 8 'small' queries, where 'moderately large' is defined as input sequence row counts of 50k-75k rows and blocking for 1-2.5 seconds before yielding results, and 'small' is defined as input sequence row counts of 500-10k and blocking for 50-200ms. Keep in mind while reviewing the result that I collected data on a significantly higher level of parallelism than I would expect a 16 core machine to be realistically configured to handle. I would probably configure an m5.8xl with no more than 64 http threads, but collected data points up to 128 concurrent sequences being processed just to see where things went.\r\n\r\nThe first plot shows the merge time (y axis) growth as concurrency (x axis) increases, animated to show the differences for a given number of input sequences (analagous to cluster size).\r\n\r\n![thread-groups-typical-distribution-1-8-small](https://user-images.githubusercontent.com/1577461/68105759-6125e880-fe94-11e9-86a4-cae8fb52b92b.gif)\r\n\r\nNote that the x axis is the _total_ concurrency count, not the number of threads of this particular group. Also worth pointing out is that the degradation of performance happens at a significantly higher level of concurrency than the previous (unrealistic) worse case performance, but in terms of characteristics, it does share some aspects with the previous plots, such as 8 input sequences being a lot more performant than say 64, and after a certain threshold, the performance of the parallel approach crosses the limit of the same threaded serial merge approach.\r\n\r\n\r\nThe larger 'queries' tell a similar tale:\r\n\r\n![thread-groups-typical-distribution-1-8-moderately-large](https://user-images.githubusercontent.com/1577461/68106055-4142f480-fe95-11e9-897b-57c7cf8b4ace.gif)\r\n\r\nThe differences here when the parallel merge sequence crosses the threshold look to me a fair bit less dramatic than the 'small' sequences, but keep in mind the 'big jump' in the small sequences only amount to a few hundred milliseconds, so it's not quite as dramatic as it appears.\r\n\r\nThe final plot shows the overall average between both groups:\r\n\r\n![thread-groups-typical-distribution-1-8-average](https://user-images.githubusercontent.com/1577461/68105727-46ec0a80-fe94-11e9-9854-aaae9d8405c7.gif)\r\n\r\nwhich I find a bit less useful than the other 2 plots, but included anyway for completeness.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549253205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549434724","html_url":"https://github.com/apache/druid/pull/8814#issuecomment-549434724","issue_url":"https://api.github.com/repos/apache/druid/issues/8814","id":549434724,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTQzNDcyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T16:29:11Z","updated_at":"2019-11-04T16:29:11Z","author_association":"CONTRIBUTOR","body":"> Does it fully fix #8661?\r\n\r\nI believe the other functions already exist (check the docs) so yes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549434724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549462718","html_url":"https://github.com/apache/druid/issues/8820#issuecomment-549462718","issue_url":"https://api.github.com/repos/apache/druid/issues/8820","id":549462718,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTQ2MjcxOA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T17:31:35Z","updated_at":"2019-11-04T17:31:35Z","author_association":"CONTRIBUTOR","body":"Could you post more details of the query and the error please?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549462718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549477950","html_url":"https://github.com/apache/druid/pull/8821#issuecomment-549477950","issue_url":"https://api.github.com/repos/apache/druid/issues/8821","id":549477950,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTQ3Nzk1MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T18:09:32Z","updated_at":"2019-11-04T18:09:32Z","author_association":"CONTRIBUTOR","body":"Seems like there was an issue with thrift repo. Restarted failed ones.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549477950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549496846","html_url":"https://github.com/apache/druid/pull/8305#issuecomment-549496846","issue_url":"https://api.github.com/repos/apache/druid/issues/8305","id":549496846,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTQ5Njg0Ng==","user":{"login":"jessp01","id":5270205,"node_id":"MDQ6VXNlcjUyNzAyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/5270205?v=4","gravatar_id":"","url":"https://api.github.com/users/jessp01","html_url":"https://github.com/jessp01","followers_url":"https://api.github.com/users/jessp01/followers","following_url":"https://api.github.com/users/jessp01/following{/other_user}","gists_url":"https://api.github.com/users/jessp01/gists{/gist_id}","starred_url":"https://api.github.com/users/jessp01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jessp01/subscriptions","organizations_url":"https://api.github.com/users/jessp01/orgs","repos_url":"https://api.github.com/users/jessp01/repos","events_url":"https://api.github.com/users/jessp01/events{/privacy}","received_events_url":"https://api.github.com/users/jessp01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T18:56:39Z","updated_at":"2019-11-04T18:56:39Z","author_association":"NONE","body":"Hello all,\r\n\r\nI'm hitting the exact same issue with 0.15.1. Since upgrading to 0.16.0 requires additional work, does anyone happen to have a built version of 0.15.1 with these changes I can obtain and test? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549496846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549519351","html_url":"https://github.com/apache/druid/pull/8777#issuecomment-549519351","issue_url":"https://api.github.com/repos/apache/druid/issues/8777","id":549519351,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTUxOTM1MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T19:52:50Z","updated_at":"2019-11-04T19:52:50Z","author_association":"CONTRIBUTOR","body":"Could you restrict the input to only accept chars that are valid for intervals to have so so not allow this:\r\n\r\n![image](https://user-images.githubusercontent.com/177816/68153006-9dd7fb00-fef9-11e9-80d0-28952d1942c9.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549519351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549640247","html_url":"https://github.com/apache/druid/issues/6823#issuecomment-549640247","issue_url":"https://api.github.com/repos/apache/druid/issues/6823","id":549640247,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY0MDI0Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T02:50:15Z","updated_at":"2019-11-05T02:50:15Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549640247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549650904","html_url":"https://github.com/apache/druid/issues/6823#issuecomment-549650904","issue_url":"https://api.github.com/repos/apache/druid/issues/6823","id":549650904,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY1MDkwNA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T03:46:16Z","updated_at":"2019-11-05T03:46:16Z","author_association":"MEMBER","body":"Still relevant","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549650904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549650919","html_url":"https://github.com/apache/druid/issues/6823#issuecomment-549650919","issue_url":"https://api.github.com/repos/apache/druid/issues/6823","id":549650919,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY1MDkxOQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T03:46:19Z","updated_at":"2019-11-05T03:46:19Z","author_association":"NONE","body":"This issue is no longer marked as stale.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549650919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549657961","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549657961","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549657961,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY1Nzk2MQ==","user":{"login":"suneet-s","id":44787917,"node_id":"MDQ6VXNlcjQ0Nzg3OTE3","avatar_url":"https://avatars.githubusercontent.com/u/44787917?v=4","gravatar_id":"","url":"https://api.github.com/users/suneet-s","html_url":"https://github.com/suneet-s","followers_url":"https://api.github.com/users/suneet-s/followers","following_url":"https://api.github.com/users/suneet-s/following{/other_user}","gists_url":"https://api.github.com/users/suneet-s/gists{/gist_id}","starred_url":"https://api.github.com/users/suneet-s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suneet-s/subscriptions","organizations_url":"https://api.github.com/users/suneet-s/orgs","repos_url":"https://api.github.com/users/suneet-s/repos","events_url":"https://api.github.com/users/suneet-s/events{/privacy}","received_events_url":"https://api.github.com/users/suneet-s/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T04:28:06Z","updated_at":"2019-11-05T04:28:06Z","author_association":"CONTRIBUTOR","body":"The heatmaps look super cool! (although I don't think I fully understand them yet :| ) What did you use to build them?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549657961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549661674","html_url":"https://github.com/apache/druid/issues/6922#issuecomment-549661674","issue_url":"https://api.github.com/repos/apache/druid/issues/6922","id":549661674,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY2MTY3NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T04:50:14Z","updated_at":"2019-11-05T04:50:14Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549661674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549699847","html_url":"https://github.com/apache/druid/pull/8823#issuecomment-549699847","issue_url":"https://api.github.com/repos/apache/druid/issues/8823","id":549699847,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTY5OTg0Nw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T07:36:16Z","updated_at":"2019-11-05T07:36:16Z","author_association":"CONTRIBUTOR","body":"This is amazing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549699847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549717755","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549717755","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549717755,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTcxNzc1NQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T08:34:13Z","updated_at":"2019-11-05T08:34:13Z","author_association":"MEMBER","body":">The heatmaps look super cool! (although I don't think I fully understand them yet :| ) What did you use to build them?\r\n\r\nHah, thanks, I used R with ggplot2 to make them. I'll try to clean up the code and attach it, if I have a chance, in case anyone else wants to do some benchmarking tinker with the results. As for what they mean, I'll try my best to explain it as succinctly as possible 😅.\r\n\r\nThe benchmark I added in this PR, `NullHandlingBitmapGetVsIteratorBenchmark`, is simulating approximately what happens during query processing on a historical for numerical null columns when used with something like a `NullableAggregator`, which is a wrapper around another `Aggregator` to ignore `null` values or delegate aggregation to the wrapped aggregator for rows that have actual values.\r\n\r\nWhen SQL compatible null handling is enabled, numeric columns are stored with 2 parts if nulls are present: the column itself, and a bitmap that has a set bit for each null value. At query time, filters are evaluated to compute something called an `Offset`, which is basically just the set of rows that are taking part in the query, and are used to create a column value/vector selector for those rows from the underlying column. Selectors have a `isNull` method which can be used to determine if a particular row is a `null`, and for numeric columns this is checking if that row is set on the bitmap. So mechanically, `NullableAggregator` will check each row from the selector to see if it is null (through the underlying bitmap), if it is, ignore it, but if not, delegate to the underlying `Aggregator` to do whatever it does to compute the result.\r\n\r\nThe benchmark simplifies this concept into using a `BitSet` to simulate the `Offset`, an `ImmutableBitmap` for the null value bitmap, and a for loop that iterates over the \"rows\" selected by the `BitSet` to emulate the behavior of the aggregator on the selector, checking for set bits in the `ImmutableBitmap` for each index like `isNull` would be doing.\r\n\r\nTranslating this into heatmap, the y axis is showing the effects of differences in density of the null bitmap (bottom is a few null values, top is nearly all rows are null), the x axis is the differences in the number of rows that our selector will select (left side selects very few rows, right scans nearly all rows), and the z axis is the difference in benchmark operation time between using bitmap.get` and using an iterator (or peekable iterator) from the null bitmap to move along with the iterator on the selectivity bitset. Further, some of the heatmaps have translated the raw benchmark times into the _time per row_ by scaling the time by how many rows are selected, to standardize measurement across the x axis, making it easier to compare the 2 strategies.\r\n\r\nSorry, that didn't end up being so short... I .. hope this didn't make it more confusing 😜 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549717755/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549718415","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549718415","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549718415,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTcxODQxNQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T08:36:09Z","updated_at":"2019-11-05T08:36:09Z","author_association":"MEMBER","body":"To follow-up on the PR description, I let the concise benchmarks finish where nearly all of the rows are selected:\r\n```\r\nBenchmark                                                  (bitmapType)  (filterMatch)  (nullDensity)  (numRows)  Mode  Cnt          Score   Error  Units\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999              0     500000  avgt    2       2438.318          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999            0.1     500000  avgt    2  261150067.426          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.25     500000  avgt    2  430133586.339          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999            0.5     500000  avgt    2  623322588.940          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.75     500000  avgt    2  449875260.568          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.99     500000  avgt    2   29015358.505          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999              0     500000  avgt    2       2316.307          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999            0.1     500000  avgt    2       4158.871          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.25     500000  avgt    2       6041.184          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999            0.5     500000  avgt    2       8397.707          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.75     500000  avgt    2       6129.792          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.99     500000  avgt    2       3511.961          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999              0     500000  avgt    2       2440.615          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999            0.1     500000  avgt    2       4431.640          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.25     500000  avgt    2       6302.718          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999            0.5     500000  avgt    2       8911.671          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.75     500000  avgt    2       6809.052          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.99     500000  avgt    2       4995.936          us/op\r\n```\r\n\r\nUsing `get` with concise is just terribad. The results for 1% of rows is similarly pretty awful, though a couple orders of magnitude less bad:\r\n```\r\nBenchmark                                                  (bitmapType)  (filterMatch)  (nullDensity)  (numRows)  Mode  Cnt        Score   Error  Units\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01              0     500000  avgt    2      100.110          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01            0.1     500000  avgt    2  3878501.478          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.25     500000  avgt    2  4853693.538          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01            0.5     500000  avgt    2  8399206.128          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.75     500000  avgt    2  5169724.280          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.99     500000  avgt    2   440739.562          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01              0     500000  avgt    2       69.756          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01            0.1     500000  avgt    2     1813.610          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.25     500000  avgt    2     3364.983          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01            0.5     500000  avgt    2     3745.194          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.75     500000  avgt    2     2702.778          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.99     500000  avgt    2     1874.390          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01              0     500000  avgt    2       77.929          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01            0.1     500000  avgt    2     1592.171          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.25     500000  avgt    2     2216.227          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01            0.5     500000  avgt    2     3535.110          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.75     500000  avgt    2     2400.203          us/op\r\nNullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.99     500000  avgt    2      436.322          us/op\r\n```\r\n\r\nI did not plot these because it seemed to be rather pointless, concise seems to be _only_ viable when using `IntIterator` or `PeekableIntIterator`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549718415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549733336","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-549733336","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":549733336,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTczMzMzNg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T09:14:47Z","updated_at":"2019-11-05T09:20:28Z","author_association":"MEMBER","body":"### simulated heavy load\r\nI collected another round of data using the same benchmarks as my 'more realistic worst case' comment, but this time plotting what happens when a large number of queries all start within a 500ms spread, which might be a more typical heavy load, rather than simulating a large concurrent spike of simultaneous queries like the last set of results.\r\n\r\nIn this scenario, parallel merges outperform the same threaded merges until much higher concurrency than the concurrent spike model. This is at least partially driven by the fact that each individual thread can make a better estimate about utilization than is possible in the spike model.\r\n\r\n##### 'small' sequences\r\n![thread-groups-typical-distribution-small-500ms](https://user-images.githubusercontent.com/1577461/68194001-09a57c80-ff69-11e9-9325-d3e70b4853d2.gif)\r\n\r\n##### 'moderately large' sequences\r\n![thread-groups-typical-distribution-moderately-large-500ms](https://user-images.githubusercontent.com/1577461/68193956-f7c3d980-ff68-11e9-9d29-d3ee688d8cb6.gif)\r\n\r\n\r\n##### overall average\r\n![thread-groups-typical-distribution-average-500ms](https://user-images.githubusercontent.com/1577461/68194026-132ee480-ff69-11e9-9601-921a98188feb.gif)\r\n\r\nI think future work could focus on making the concurrent spike behavior a bit more chillax through a variety of means, but I find these results to be 'good enough' for now. \r\n\r\nAnyone want to see any other scenarios?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549733336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549866189","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549866189","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549866189,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTg2NjE4OQ==","user":{"login":"jnaous","id":2042890,"node_id":"MDQ6VXNlcjIwNDI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2042890?v=4","gravatar_id":"","url":"https://api.github.com/users/jnaous","html_url":"https://github.com/jnaous","followers_url":"https://api.github.com/users/jnaous/followers","following_url":"https://api.github.com/users/jnaous/following{/other_user}","gists_url":"https://api.github.com/users/jnaous/gists{/gist_id}","starred_url":"https://api.github.com/users/jnaous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnaous/subscriptions","organizations_url":"https://api.github.com/users/jnaous/orgs","repos_url":"https://api.github.com/users/jnaous/repos","events_url":"https://api.github.com/users/jnaous/events{/privacy}","received_events_url":"https://api.github.com/users/jnaous/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T15:12:33Z","updated_at":"2019-11-05T15:12:33Z","author_association":"CONTRIBUTOR","body":"Thanks Clint! These /are/ really good benchmarks. I'm curious what\npercentage of the entire cost for processing a row a null check would be so\nwe can have a good idea of what % overhead we're talking about.\n\n\nOn Tue, Nov 5, 2019 at 12:36 AM Clint Wylie <notifications@github.com>\nwrote:\n\n> To follow-up on the PR description, I let the concise benchmarks finish\n> where nearly all of the rows are selected:\n>\n> Benchmark                                                  (bitmapType)  (filterMatch)  (nullDensity)  (numRows)  Mode  Cnt          Score   Error  Units\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999              0     500000  avgt    2       2438.318          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999            0.1     500000  avgt    2  261150067.426          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.25     500000  avgt    2  430133586.339          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999            0.5     500000  avgt    2  623322588.940          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.75     500000  avgt    2  449875260.568          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise        0.99999           0.99     500000  avgt    2   29015358.505          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999              0     500000  avgt    2       2316.307          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999            0.1     500000  avgt    2       4158.871          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.25     500000  avgt    2       6041.184          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999            0.5     500000  avgt    2       8397.707          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.75     500000  avgt    2       6129.792          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise        0.99999           0.99     500000  avgt    2       3511.961          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999              0     500000  avgt    2       2440.615          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999            0.1     500000  avgt    2       4431.640          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.25     500000  avgt    2       6302.718          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999            0.5     500000  avgt    2       8911.671          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.75     500000  avgt    2       6809.052          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise        0.99999           0.99     500000  avgt    2       4995.936          us/op\n>\n> Using get with concise is just terribad. The results for 1% of rows is\n> similarly pretty awful, though a couple orders of magnitude less bad:\n>\n> Benchmark                                                  (bitmapType)  (filterMatch)  (nullDensity)  (numRows)  Mode  Cnt        Score   Error  Units\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01              0     500000  avgt    2      100.110          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01            0.1     500000  avgt    2  3878501.478          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.25     500000  avgt    2  4853693.538          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01            0.5     500000  avgt    2  8399206.128          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.75     500000  avgt    2  5169724.280          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.get                    concise           0.01           0.99     500000  avgt    2   440739.562          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01              0     500000  avgt    2       69.756          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01            0.1     500000  avgt    2     1813.610          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.25     500000  avgt    2     3364.983          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01            0.5     500000  avgt    2     3745.194          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.75     500000  avgt    2     2702.778          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.iterator               concise           0.01           0.99     500000  avgt    2     1874.390          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01              0     500000  avgt    2       77.929          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01            0.1     500000  avgt    2     1592.171          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.25     500000  avgt    2     2216.227          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01            0.5     500000  avgt    2     3535.110          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.75     500000  avgt    2     2400.203          us/op\n> NullHandlingBitmapGetVsIteratorBenchmark.peekableIterator       concise           0.01           0.99     500000  avgt    2      436.322          us/op\n>\n> I did not plot these because it seemed to be rather pointless, concise\n> seems to be *only* viable when using IntIterator or PeekableIntIterator.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/pull/8822?email_source=notifications&email_token=AAPSYCQ2URIZF6VEJ3SSGADQSEWAJA5CNFSM4JI4LCNKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEDCATDY#issuecomment-549718415>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAPSYCV5IXHLEI6HE5RKM3DQSEWAJANCNFSM4JI4LCNA>\n> .\n>\n\n\n-- \nJad Naous\nImply | VP R&D\n650-521-3425\njad.naous@imply.io\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549866189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549901339","html_url":"https://github.com/apache/druid/pull/8802#issuecomment-549901339","issue_url":"https://api.github.com/repos/apache/druid/issues/8802","id":549901339,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTkwMTMzOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T16:33:36Z","updated_at":"2019-11-05T16:33:36Z","author_association":"CONTRIBUTOR","body":"thanks @nishantmonu51 and @clintropolis , I will have the spelling build fixed and then merge once that is successful.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549901339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549904438","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-549904438","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":549904438,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTkwNDQzOA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T16:40:41Z","updated_at":"2019-11-05T20:09:02Z","author_association":"CONTRIBUTOR","body":"@clintropolis thanks for all the benchmarks, I haven't had the opportunity to look at the new developments yet but get back to reviewing this week.\r\n\r\none thing, I am not sure if taken care or not, many people run the druid processes inside docker containers where Runtime.getRuntime().availableProcessors() returns the available processors from host and not from the \"container\". ( https://bugs.openjdk.java.net/browse/JDK-8140793 , I think it has been changed in jdk10) .  Given the sensitivity of performance to availableProcessors() returned value, it might be good to make that area a bit configurable if not already. I will hopefully offer more specific suggestion when reviewing again.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549904438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549914815","html_url":"https://github.com/apache/druid/pull/8802#issuecomment-549914815","issue_url":"https://api.github.com/repos/apache/druid/issues/8802","id":549914815,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTkxNDgxNQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T17:04:22Z","updated_at":"2019-11-05T17:04:22Z","author_association":"CONTRIBUTOR","body":"TeamCity build appears to have failed for a totally unrelated reason\r\n```\r\n[16:44:48]org.apache.druid:druid-console (3m:01s)\r\n[16:46:24][org.apache.druid:druid-console] [BABEL] Note: The code generator has deoptimised the styling of /mnt/agent/work/9f653ecb5b5406e8/web-console/node_modules/brace/index.js as it exceeds the max of 500KB.\r\n[17:01:17]Process exited with code 1\r\n```\r\nretrying that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549914815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549966959","html_url":"https://github.com/apache/druid/pull/8578#issuecomment-549966959","issue_url":"https://api.github.com/repos/apache/druid/issues/8578","id":549966959,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk2Njk1OQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T18:54:35Z","updated_at":"2019-11-05T18:55:24Z","author_association":"MEMBER","body":">@clintropolis thanks for all the benchmarks, I haven't had the opportunity to look at the new developments yet but get back to reviewing this week.\r\n\r\nYeah, no problem, thanks for asking the hard questions to make me collect them, the result is the PR is in a better state than before them :metal:. The production part of the code hasn't really changed much in the last couple of weeks other than a few lines to change behavior of the parallelism computing method, and mostly changes to the default values.\r\n\r\n>Given the sensitivity of performance to availableProcessors() returned value, it might be good to make that area a bit configurable if not already. I will hopefully offer more specific suggestion when reviewing again.\r\n\r\nThis stuff should all be controllable via configs, `druid.processing.merge.pool.parallelism` to control the FJP pool size, and `druid.merge.pool.defaultMaxQueryParallelism` to control individual query max parallelism (this one can also be set on the query context through `parallelMergeParallelism`).\r\n\r\nIn a follow-up I think I will also try to add additional information to the cluster tuning guide docs, since I have a pretty good idea how this implementation performs now which I think we can use to advise operators.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549966959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549985610","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549985610","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549985610,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk4NTYxMA==","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T19:38:47Z","updated_at":"2019-11-05T19:52:30Z","author_association":"MEMBER","body":"Cool heatmaps! Iteration should definitely perform better than calls to `contains` because it reduces the complexity of each call from logarithmic in the number of non empty 16 bit blocks to constant, obviously with a small set up cost. This is the same principle as #6764 which removes binary searches during bitmap construction.\r\n\r\nIt looks like the operation in question (`VectorSelectorUtils.populateNullVector`) is actually simulating the extraction of a mask from the bitmap at the offset of the current vector. Perhaps, with the ability to skip to the next non empty vector (given a vector width), it would be quite easy to implement this as an iterator which returns masks on each call to `next`. Perhaps you could plug this in to Druid's vectorized query engine. cc @lemire.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549985610/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549995118","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549995118","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549995118,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk5NTExOA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:02:00Z","updated_at":"2019-11-05T20:02:00Z","author_association":"MEMBER","body":">I'm curious what\r\npercentage of the entire cost for processing a row a null check would be so\r\nwe can have a good idea of what % overhead we're talking about.\r\n\r\nThe last 3 animations show the estimated per row cost in nanoseconds for each of the 3 strategies. I will summarize:\r\n* `get` - most of the numbers look to be in the 10-25ns per row range (higher at low selectivity where it matters most)\r\n* `IntIterator` - about half are under 10ns per row (at low selectivity), this is definitely the best, but at super high selectivities (.1% of rows selected) with very dense bitmaps it climbs to over a couple of microseconds per row\r\n* `PeekableIntIterator` - about half are between 10-15ns per row (at low selectivity), most below 25ns, but also has more overhead with dense bitmaps at very high selectivity but only climbs to about 50-60ns per row in the worst case.\r\n\r\nTo me it kind of seems like a toss up to me which is better between using the `PeekableIntIterator` and the plain `IntIterator`, it almost seems worth it to eat the slow per row times at high selectivity in exchange for that 5ns per row at low selectivity, but both approaches fair better at low selectivity than using `get`, so I went more conservative and used the `PeekableIntIterator` for now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549995118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/549997171","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-549997171","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":549997171,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk5NzE3MQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:07:05Z","updated_at":"2019-11-05T20:07:05Z","author_association":"MEMBER","body":">It looks like the operation in question (VectorSelectorUtils.populateNullVector) is actually simulating the extraction of a mask from the bitmap at the offset of the current vector. Perhaps, with the ability to skip to the next non empty vector (given a vector width), it would be quite easy to implement this as an iterator which returns masks on each call to next. \r\n\r\nThat sounds nice. I was planning on digging into this for future work to see if I could improve the null vector construction, but even just using the iterator should be an improvement over the existing code, so I didn't investigate that as part of this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/549997171/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550001537","html_url":"https://github.com/apache/druid/pull/8808#issuecomment-550001537","issue_url":"https://api.github.com/repos/apache/druid/issues/8808","id":550001537,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAwMTUzNw==","user":{"login":"LoriLori","id":7611225,"node_id":"MDQ6VXNlcjc2MTEyMjU=","avatar_url":"https://avatars.githubusercontent.com/u/7611225?v=4","gravatar_id":"","url":"https://api.github.com/users/LoriLori","html_url":"https://github.com/LoriLori","followers_url":"https://api.github.com/users/LoriLori/followers","following_url":"https://api.github.com/users/LoriLori/following{/other_user}","gists_url":"https://api.github.com/users/LoriLori/gists{/gist_id}","starred_url":"https://api.github.com/users/LoriLori/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LoriLori/subscriptions","organizations_url":"https://api.github.com/users/LoriLori/orgs","repos_url":"https://api.github.com/users/LoriLori/repos","events_url":"https://api.github.com/users/LoriLori/events{/privacy}","received_events_url":"https://api.github.com/users/LoriLori/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:18:14Z","updated_at":"2019-11-05T20:18:14Z","author_association":"NONE","body":"I am learning from better developers and was thinking about contract of logger and how would it could be solved should it be inmemorylogger be used somewhere else some day.\r\nIsn't copy on write an overhead and a bit teaching inappropriate use of copy on write?\r\nIsn't logEvents.toArray() atomic  appropriate? \r\nreturn Collections.unmodifiableList(Arrays.asList((LogEvent[]) logEvents.toArray()));\r\nCode readability is lower and would require a comment maybe.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550001537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550010108","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550010108","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550010108,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAxMDEwOA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:40:05Z","updated_at":"2019-11-05T20:40:05Z","author_association":"CONTRIBUTOR","body":"+1 after CI.\r\n\r\nLGTM and Teamcity are failing because of the missing libthrift-0.5.0-1 jar. I think we can solve this by simply updating the version of `scrooge-maven-plugin` which is using that versino of libthrift.\r\n\r\nThis PR will make Travis failed because it's not updating `licences.yaml`. I will raise a PR to fix that shortly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550010108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550016704","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550016704","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550016704,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAxNjcwNA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:57:52Z","updated_at":"2019-11-05T21:00:58Z","author_association":"CONTRIBUTOR","body":"`scrooge-maven-plugin` is already using Thrift 0.10.0. The old version `4.11.0` of `scrooge-maven-plugin` is indeed using `libthrift-0.5.0-1 jar`. I've rebased onto master.\r\n\r\nWhy is this a development blocker?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550016704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550018795","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550018795","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550018795,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAxODc5NQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:03:30Z","updated_at":"2019-11-05T21:03:30Z","author_association":"MEMBER","body":">Why is this a development blocker?\r\n\r\nThe old version of `scrooge-maven-plugin` uses a super old forked version of libthrift for some reason that isn't on maven central, and seems to have recently stopped working for teamcity and lgtm CI checks, meaning no PRs are passing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550018795/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550019038","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550019038","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550019038,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAxOTAzOA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:04:12Z","updated_at":"2019-11-05T21:05:57Z","author_association":"MEMBER","body":">This PR will make Travis failed because it's not updating licences.yaml.\r\n\r\nIt actually might not, the old version doesn't appear to be in `licenses.yaml`, though maybe it should be since there is a `NOTICE` file, https://github.com/apache/thrift/blob/master/NOTICE.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550019038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550022104","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550022104","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550022104,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAyMjEwNA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:12:27Z","updated_at":"2019-11-05T21:12:27Z","author_association":"CONTRIBUTOR","body":"Thanks, updating scrooge should fix the dependency on the ancient version of libthrift indeed. Jenkins is running on my fork as well: https://travis-ci.org/Fokko/druid/builds/607854795 The one on Apache is still pending due to capacity issues.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550022104/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550024263","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550024263","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550024263,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAyNDI2Mw==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:17:39Z","updated_at":"2019-11-05T21:17:39Z","author_association":"MEMBER","body":">though maybe it should be since there is a NOTICE file, https://github.com/apache/thrift/blob/master/NOTICE.\r\n\r\nResponding to myself, but I don't think we need to worry about updating `licenses.yaml` in this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550024263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029100","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-550029100","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":550029100,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAyOTEwMA==","user":{"login":"jnaous","id":2042890,"node_id":"MDQ6VXNlcjIwNDI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2042890?v=4","gravatar_id":"","url":"https://api.github.com/users/jnaous","html_url":"https://github.com/jnaous","followers_url":"https://api.github.com/users/jnaous/followers","following_url":"https://api.github.com/users/jnaous/following{/other_user}","gists_url":"https://api.github.com/users/jnaous/gists{/gist_id}","starred_url":"https://api.github.com/users/jnaous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnaous/subscriptions","organizations_url":"https://api.github.com/users/jnaous/orgs","repos_url":"https://api.github.com/users/jnaous/repos","events_url":"https://api.github.com/users/jnaous/events{/privacy}","received_events_url":"https://api.github.com/users/jnaous/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:29:11Z","updated_at":"2019-11-05T21:29:11Z","author_association":"CONTRIBUTOR","body":"Sorry my question wasn't clear. I meant in terms of the cost of the full\noperation on a row. For example, if we're doing a longSum operation on a\ncolumn, what would the cost per row be, and what would the percentage\noverhead of this check be?\n\nOn Tue, Nov 5, 2019 at 12:02 PM Clint Wylie <notifications@github.com>\nwrote:\n\n> I'm curious what\n> percentage of the entire cost for processing a row a null check would be so\n> we can have a good idea of what % overhead we're talking about.\n>\n> The last 3 animations show the estimated per row cost in nanoseconds for\n> each of the 3 strategies. I will summarize:\n>\n>    - get - most of the numbers look to be in the 10-25ns per row range\n>    (higher at low selectivity where it matters most)\n>    - IntIterator - about half are under 10ns per row (at low\n>    selectivity), this is definitely the best, but at super high selectivities\n>    (.1% of rows selected) with very dense bitmaps it climbs to over a couple\n>    of microseconds per row\n>    - PeekableIntIterator - about half are between 10-15ns per row (at low\n>    selectivity), most below 25ns, but also has more overhead with dense\n>    bitmaps at very high selectivity but only climbs to about 50-60ns per row\n>    in the worst case.\n>\n> To me it kind of seems like a toss up to me which is better between using\n> the PeekableIntIterator and the plain IntIterator, it almost seems worth\n> it to eat the slow per row times at high selectivity in exchange for that\n> 5ns per row at low selectivity, but both approaches fair better at low\n> selectivity than using get, so I went more conservative and used the\n> PeekableIntIterator for now.\n>\n> —\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/pull/8822?email_source=notifications&email_token=AAPSYCU2SL3SCDUBZKTMBZ3QSHGMHA5CNFSM4JI4LCNKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEDEEE3Q#issuecomment-549995118>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAPSYCSJAKFZOTCZLBN7VPDQSHGMHANCNFSM4JI4LCNA>\n> .\n>\n\n\n-- \nJad Naous\nImply | VP R&D\n650-521-3425\njad.naous@imply.io\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029229","html_url":"https://github.com/apache/druid/issues/8824#issuecomment-550029229","issue_url":"https://api.github.com/repos/apache/druid/issues/8824","id":550029229,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAyOTIyOQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:29:29Z","updated_at":"2019-11-05T21:29:29Z","author_association":"MEMBER","body":"[Looking closer at that build log](https://teamcity.jetbrains.com/viewLog.html?buildId=2618987&buildTypeId=OpenSourceProjects_Druid_InspectionsPullRequests&tab=buildLog&_focus=12467), it looks like it's related to the same libthrift problem affecting all the other PRs which should be resolved by #8419.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029911","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-550029911","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":550029911,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAyOTkxMQ==","user":{"login":"lemire","id":391987,"node_id":"MDQ6VXNlcjM5MTk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/391987?v=4","gravatar_id":"","url":"https://api.github.com/users/lemire","html_url":"https://github.com/lemire","followers_url":"https://api.github.com/users/lemire/followers","following_url":"https://api.github.com/users/lemire/following{/other_user}","gists_url":"https://api.github.com/users/lemire/gists{/gist_id}","starred_url":"https://api.github.com/users/lemire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemire/subscriptions","organizations_url":"https://api.github.com/users/lemire/orgs","repos_url":"https://api.github.com/users/lemire/repos","events_url":"https://api.github.com/users/lemire/events{/privacy}","received_events_url":"https://api.github.com/users/lemire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:31:14Z","updated_at":"2019-11-05T21:31:14Z","author_association":"NONE","body":"The plots are great indeed. Bravo!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550029911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550030106","html_url":"https://github.com/apache/druid/pull/8822#issuecomment-550030106","issue_url":"https://api.github.com/repos/apache/druid/issues/8822","id":550030106,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAzMDEwNg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T21:31:43Z","updated_at":"2019-11-05T21:31:43Z","author_association":"MEMBER","body":">For example, if we're doing a longSum operation on a\r\ncolumn, what would the cost per row be, and what would the percentage\r\noverhead of this check be?\r\n\r\nThe benchmark added in this PR can't determine that, all I can provide is the fixed cost per row of having nulls. That seems useful to know, but also time intensive so I might not get to it as part of this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550030106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/550073283","html_url":"https://github.com/apache/druid/pull/8419#issuecomment-550073283","issue_url":"https://api.github.com/repos/apache/druid/issues/8419","id":550073283,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDA3MzI4Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T23:38:45Z","updated_at":"2019-11-05T23:38:45Z","author_association":"CONTRIBUTOR","body":"The LGTM is failing with the same error even after I restarted once. Since TeamCity looks fine, I think it's an issue with LGTM (maybe it's caching something). I'll merge this PR shortly and will see other builds succeed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/550073283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]