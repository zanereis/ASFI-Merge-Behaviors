[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903093340","html_url":"https://github.com/apache/iceberg/issues/2918#issuecomment-903093340","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2918","id":903093340,"node_id":"IC_kwDOCW7NX8411Bxc","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T10:03:17Z","updated_at":"2021-08-21T10:03:30Z","author_association":"CONTRIBUTOR","body":"> I am not familiar with SQL or CDC parts of Flink. So the binlog is not first shipped to Kafka first here, right? Flink CDC source directly read binlog from MySQL?\r\n\r\nYes, you are right, flink-cdc-connector will directly read binlog from MySQL.\r\n\r\n> Personally, I don't see too much benefit of just scale up the parallelism for the IcebergStreamWriter operator. All the extra network shuffle/rebalance can be expensive too. I do see the need to scale up the job parallelism with higher traffic. hence I am wondering if we can also scale up the Flink CDC source operator along with other operators so that we can keep the chaining behavior.\r\n\r\nActually I encountered this problem when I scale up the job parallelism, and that is the Case2 above. In some situation, we can not scale up the cdc source opr, such as flink-cdc-connector the source parallelism will always be 1. And I don't think we should not depend on keep src parallelism equal to FlinkSink to guarantee result correctness.\r\n\r\n> As you said already, this only works if the hash shuffle (based on the primary key) is the only network shuffle before the IcebergStreamWriter operator. That is why I have some reservations of putting this in the Flink Iceberg sink. This won't work if there is some other network shuffle before the Flink sink, which is outside of the control of the sink. Hence I am wondering if this should be handled outside of the Flink sink and we should just document the expected behavior of the input data to the Flink Iceberg sink.\r\n\r\nIn CDC case, ff there is some other network shuffle(not base on the primary key) before the FlinkSink, that will lead to cdc record disorder, and yes, we could not get the correct result, because that is out of the control of the FlinkSink. But I think that is user's fault, in CDC case, user should make sure cdc data order correct and send to downstream. \r\n\r\nBesides, we should also to consider the flink default network shuffle and could not manually control network shuffle(such as FlinkSQL, we could not easily to control network shuffle between two opr) before the FlinkSink situation. I think that is Iceberg should resolve, and don't need user to do this manually. User only need to setting correct `equalityFieldColumns` and send cdc/upsert data to FlinkSink, and Iceberg will handle the rest of the work well. @stevenzwu ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903093340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903094697","html_url":"https://github.com/apache/iceberg/pull/2898#issuecomment-903094697","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2898","id":903094697,"node_id":"IC_kwDOCW7NX8411CGp","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T10:15:55Z","updated_at":"2021-08-21T10:15:55Z","author_association":"CONTRIBUTOR","body":"> @Reo-LEI I left a comment in the issue #2918. Let's continue the problem discussion there.\r\n> \r\n> You probably want to rebase the PR properly. right now, it shows 1,000+ files modified.\r\n\r\nMy mistake, I have been fix that. @stevenzwu ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903094697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903139812","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-903139812","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":903139812,"node_id":"IC_kwDOCW7NX8411NHk","user":{"login":"smallx","id":16517035,"node_id":"MDQ6VXNlcjE2NTE3MDM1","avatar_url":"https://avatars.githubusercontent.com/u/16517035?v=4","gravatar_id":"","url":"https://api.github.com/users/smallx","html_url":"https://github.com/smallx","followers_url":"https://api.github.com/users/smallx/followers","following_url":"https://api.github.com/users/smallx/following{/other_user}","gists_url":"https://api.github.com/users/smallx/gists{/gist_id}","starred_url":"https://api.github.com/users/smallx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smallx/subscriptions","organizations_url":"https://api.github.com/users/smallx/orgs","repos_url":"https://api.github.com/users/smallx/repos","events_url":"https://api.github.com/users/smallx/events{/privacy}","received_events_url":"https://api.github.com/users/smallx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T16:19:18Z","updated_at":"2021-08-21T16:19:18Z","author_association":"CONTRIBUTOR","body":"Please help me to run github workflows, thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903139812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903174335","html_url":"https://github.com/apache/iceberg/issues/3005#issuecomment-903174335","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3005","id":903174335,"node_id":"IC_kwDOCW7NX8411Vi_","user":{"login":"tweise","id":263695,"node_id":"MDQ6VXNlcjI2MzY5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/263695?v=4","gravatar_id":"","url":"https://api.github.com/users/tweise","html_url":"https://github.com/tweise","followers_url":"https://api.github.com/users/tweise/followers","following_url":"https://api.github.com/users/tweise/following{/other_user}","gists_url":"https://api.github.com/users/tweise/gists{/gist_id}","starred_url":"https://api.github.com/users/tweise/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tweise/subscriptions","organizations_url":"https://api.github.com/users/tweise/orgs","repos_url":"https://api.github.com/users/tweise/repos","events_url":"https://api.github.com/users/tweise/events{/privacy}","received_events_url":"https://api.github.com/users/tweise/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T20:45:37Z","updated_at":"2021-08-21T20:45:37Z","author_association":"NONE","body":"```\r\ncreateRecord:217, Schema (org.apache.avro)\r\nstruct:114, TypeToSchema (org.apache.iceberg.avro)\r\nstruct:34, TypeToSchema (org.apache.iceberg.avro)\r\nvisit:364, TypeUtil (org.apache.iceberg.types)\r\nconvert:77, AvroSchemaUtil (org.apache.iceberg.avro)\r\nconvert:69, AvroSchemaUtil (org.apache.iceberg.avro)\r\nrecord:105, BuildAvroProjection (org.apache.iceberg.avro)\r\nrecord:42, BuildAvroProjection (org.apache.iceberg.avro)\r\nvisit:51, AvroCustomOrderSchemaVisitor (org.apache.iceberg.avro)\r\nbuildAvroProjection:105, AvroSchemaUtil (org.apache.iceberg.avro)\r\n```\r\n\r\nhttps://github.com/apache/iceberg/blob/apache-iceberg-0.12.0/core/src/main/java/org/apache/iceberg/avro/TypeToSchema.java#L114\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903174335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903179526","html_url":"https://github.com/apache/iceberg/pull/2866#issuecomment-903179526","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2866","id":903179526,"node_id":"IC_kwDOCW7NX8411W0G","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T21:40:15Z","updated_at":"2021-08-21T21:40:50Z","author_association":"COLLABORATOR","body":"@TGooch44  can you take a look and let me know if there are any additional comments on it? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903179526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903183796","html_url":"https://github.com/apache/iceberg/pull/2908#issuecomment-903183796","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2908","id":903183796,"node_id":"IC_kwDOCW7NX8411X20","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T22:30:45Z","updated_at":"2021-08-21T22:30:56Z","author_association":"COLLABORATOR","body":"> A few comments below. I: think the original commit for the PR (binary and fixed types) has been lost as this is all decimal and time arithmetic functions now.\r\n\r\n@rymurr Sorry about the confusion. The recent commits to address the comments by refactoring transform_util produced a lot of changes and then `identity` change is not obvious but it is still there.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903183796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903184118","html_url":"https://github.com/apache/iceberg/pull/2910#issuecomment-903184118","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2910","id":903184118,"node_id":"IC_kwDOCW7NX8411X72","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T22:34:46Z","updated_at":"2021-08-21T22:34:46Z","author_association":"COLLABORATOR","body":"Hi @rymurr  seems both PRs edit Dates class. As you have already reviewed the other one, let's finalize that one first and then rebase this one.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903184118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903286093","html_url":"https://github.com/apache/iceberg/pull/2998#issuecomment-903286093","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2998","id":903286093,"node_id":"IC_kwDOCW7NX8411w1N","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T15:27:22Z","updated_at":"2021-08-22T15:27:22Z","author_association":"CONTRIBUTOR","body":"@cwsteinbach, can you please add a description to this PR?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903286093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903340648","html_url":"https://github.com/apache/iceberg/pull/3004#issuecomment-903340648","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3004","id":903340648,"node_id":"IC_kwDOCW7NX8411-Jo","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T22:38:06Z","updated_at":"2021-08-22T23:36:23Z","author_association":"CONTRIBUTOR","body":"I just noticed a typo in the file name for the workflow.\r\n\r\nCurrent file name is `cancel-dupliate-workflow-runs.yml`, missing the `c` in `duplicate`. If we merge this, let's not do so until that's updated. But not updating for now to avoid making the current discussion outdated.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903340648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903344864","html_url":"https://github.com/apache/iceberg/issues/3006#issuecomment-903344864","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3006","id":903344864,"node_id":"IC_kwDOCW7NX8411_Lg","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T23:10:41Z","updated_at":"2021-08-22T23:11:15Z","author_association":"CONTRIBUTOR","body":"I merged this change into my local fork, and the labeler still ran as expected:\r\n\r\nHere are the permissions [I granted to the labeler in my fork.](https://github.com/kbendick/iceberg/blob/af2e930007b292f864c8d7ba4244011e046661f9/.github/workflows/labeler.yml#L23-L25)\r\n\r\nExample of labeler running with above permissions already merged in (note only merged in actions will run - not one that's part of a PR): https://github.com/kbendick/iceberg/pull/55","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903344864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903346889","html_url":"https://github.com/apache/iceberg/pull/3004#issuecomment-903346889","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3004","id":903346889,"node_id":"IC_kwDOCW7NX8411_rJ","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T23:23:24Z","updated_at":"2021-08-22T23:36:36Z","author_association":"CONTRIBUTOR","body":"The previous PR CI run failed due to a hive metastore connection issue. WIll close / reopen after further discussion / review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903346889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903348550","html_url":"https://github.com/apache/iceberg/issues/3006#issuecomment-903348550","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3006","id":903348550,"node_id":"IC_kwDOCW7NX8412AFG","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T23:35:02Z","updated_at":"2021-08-22T23:35:02Z","author_association":"CONTRIBUTOR","body":"The full documentation on the `permission` section is located here: https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#permissions\r\n\r\nSeems that it mostly applies to forks, but that's where we'd be most concerned with somebody trying to gain access to a token (however short lived they are).\r\n\r\nGiven that this one is the example and is confirmed to still work, I think it's a good place to begin experimenting with this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903348550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903349461","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-903349461","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":903349461,"node_id":"IC_kwDOCW7NX8412ATV","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T23:42:04Z","updated_at":"2021-08-22T23:55:03Z","author_association":"CONTRIBUTOR","body":"Can this be done using a `try-with-resources` block instead?\r\n\r\nThe reason I mention `try-with-resources` is that we had to allow adding shutdown hooks, which as you've pointed out, can potentially cause memory leaks. While you've taken the time to work around this, others might not.\r\n\r\nIf it cannot be done with `try-with-resources`, can you let us know why not?\r\n\r\nUnfortunately I don't think I can get your github workflow to run as I don't believe I have that permission. Sorry! But I do think using `try-with-resources` would be all around better if possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903349461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903375852","html_url":"https://github.com/apache/iceberg/pull/2998#issuecomment-903375852","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2998","id":903375852,"node_id":"IC_kwDOCW7NX8412Gvs","user":{"login":"cwsteinbach","id":229846,"node_id":"MDQ6VXNlcjIyOTg0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/229846?v=4","gravatar_id":"","url":"https://api.github.com/users/cwsteinbach","html_url":"https://github.com/cwsteinbach","followers_url":"https://api.github.com/users/cwsteinbach/followers","following_url":"https://api.github.com/users/cwsteinbach/following{/other_user}","gists_url":"https://api.github.com/users/cwsteinbach/gists{/gist_id}","starred_url":"https://api.github.com/users/cwsteinbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwsteinbach/subscriptions","organizations_url":"https://api.github.com/users/cwsteinbach/orgs","repos_url":"https://api.github.com/users/cwsteinbach/repos","events_url":"https://api.github.com/users/cwsteinbach/events{/privacy}","received_events_url":"https://api.github.com/users/cwsteinbach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T01:23:56Z","updated_at":"2021-08-23T01:23:56Z","author_association":"CONTRIBUTOR","body":"Closing this PR in favor of #3008.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903375852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903407782","html_url":"https://github.com/apache/iceberg/issues/2918#issuecomment-903407782","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2918","id":903407782,"node_id":"IC_kwDOCW7NX8412Oim","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T03:09:26Z","updated_at":"2021-08-23T03:09:26Z","author_association":"CONTRIBUTOR","body":"@Reo-LEI Thanks a lot for the detailed explanations. I got the problem and motivation for this change. \r\n\r\n> Case2: x != y == z\r\n\r\nThis PR change the parallelism of of the upstream operator to force x=y. To me, it is dangerous for FlinkSink to modify sth that doesn't own. It violates the principle of ownership/isolation. I would argue that for the CDC upsert case, job parallelism should be set to the CDC source parallelism (x). It doesn't make sense to have a different job parallelism (y) than CDC source parallelism (x). and then have the FlinkSink to do some magic to override the parallelism of an upstream operator that it doesn't own.\r\n\r\n> Case3: x == y != z\r\n\r\nThis can happen if we need an higher parallelism for the Flink writer. I can see that we may want to handle this case in the FlinkSink. I am wondering if we should add a new `equalityKeysHash`  to the `DistributionMode`.\r\n\r\nHowever, I am personally not sure how valuable this setup will be. This assumes that Flink writers are the bottleneck and the job throughput can improve significantly with higher Iceberg writer parallelism.\r\n\r\n> Case4: x != y != z\r\n\r\nit 's a combination of 2 and 3. so individual arguments apply separately here.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903407782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903412789","html_url":"https://github.com/apache/iceberg/issues/2527#issuecomment-903412789","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2527","id":903412789,"node_id":"IC_kwDOCW7NX8412Pw1","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T03:22:45Z","updated_at":"2021-08-23T03:22:45Z","author_association":"MEMBER","body":"Spark 3.2 is coming (RC phase now), does Iceberg have a timeline for Spark 3.2 support?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903412789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903461057","html_url":"https://github.com/apache/iceberg/issues/2527#issuecomment-903461057","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2527","id":903461057,"node_id":"IC_kwDOCW7NX8412bjB","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T05:46:05Z","updated_at":"2021-08-23T05:46:05Z","author_association":"CONTRIBUTOR","body":"We will start the work for supporting Spark 3.2 as soon as it is available. I'll also take care of implementing dynamic filtering.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903461057/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903623533","html_url":"https://github.com/apache/iceberg/issues/2468#issuecomment-903623533","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2468","id":903623533,"node_id":"IC_kwDOCW7NX8413DNt","user":{"login":"erictan90","id":39320470,"node_id":"MDQ6VXNlcjM5MzIwNDcw","avatar_url":"https://avatars.githubusercontent.com/u/39320470?v=4","gravatar_id":"","url":"https://api.github.com/users/erictan90","html_url":"https://github.com/erictan90","followers_url":"https://api.github.com/users/erictan90/followers","following_url":"https://api.github.com/users/erictan90/following{/other_user}","gists_url":"https://api.github.com/users/erictan90/gists{/gist_id}","starred_url":"https://api.github.com/users/erictan90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erictan90/subscriptions","organizations_url":"https://api.github.com/users/erictan90/orgs","repos_url":"https://api.github.com/users/erictan90/repos","events_url":"https://api.github.com/users/erictan90/events{/privacy}","received_events_url":"https://api.github.com/users/erictan90/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T10:02:56Z","updated_at":"2021-08-23T10:02:56Z","author_association":"NONE","body":"having the same problem with flink-1.12.1 and runtime-0.12.0,\r\nswitch back to flink-1.11.4 and runtime-0.11.1 then it's fine.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903623533/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903826338","html_url":"https://github.com/apache/iceberg/pull/2863#issuecomment-903826338","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2863","id":903826338,"node_id":"IC_kwDOCW7NX84130ui","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T14:28:51Z","updated_at":"2021-08-23T14:28:51Z","author_association":"CONTRIBUTOR","body":"This PR have been open for some time, I think this feature is very importent for user, and just waiting someone to review and merge that. Has anybody to take a look of this? @rdblue @openinx @aokolnychyi @stevenzwu @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903826338/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903851627","html_url":"https://github.com/apache/iceberg/issues/3010#issuecomment-903851627","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3010","id":903851627,"node_id":"IC_kwDOCW7NX841365r","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T15:00:03Z","updated_at":"2021-08-23T15:00:03Z","author_association":"MEMBER","body":"The underlying error incase you didn't see is \r\n```Cannot find catalog plugin class for catalog 'spark_catalog': org.apache.iceberg.spark.SparkSessionCatalog```\r\n\r\nWhich means that the iceberg-spark3-runtime jar wasn't actually put on the classpath. I would check the startup log for the thrift server and make sure that the process was able to correctly connect to maven and get the required binaries. I double checked the binaries this morning and they are ok, so my guess is there is an issue with connectivity of this particular thirft-server process. \r\n\r\nOther possibilities include some unmatched double quote or something in the cli command which would cause it to combine some of the conf options although my brief look  didn't spot anything. The fact that it picks up spark_catalog correctly does mean it at least read that property correctly and independently.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903851627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903903645","html_url":"https://github.com/apache/iceberg/pull/3012#issuecomment-903903645","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3012","id":903903645,"node_id":"IC_kwDOCW7NX8414Hmd","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T16:01:26Z","updated_at":"2021-08-23T16:01:26Z","author_association":"CONTRIBUTOR","body":"@moon-fall, can you please add a description for this PR?\r\n\r\nAlso, it looks like this changes the intended behavior. We purposely wrote the entire row to delete files. It's reasonable to write just the equality delete columns, but merging this would break people that want the entire row. Can you find a good way to configure this and make it optional rather than changing the default behavior?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903903645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903906994","html_url":"https://github.com/apache/iceberg/pull/3007#issuecomment-903906994","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3007","id":903906994,"node_id":"IC_kwDOCW7NX8414Iay","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T16:03:41Z","updated_at":"2021-08-23T16:03:41Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903906994/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903927045","html_url":"https://github.com/apache/iceberg/pull/2965#issuecomment-903927045","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2965","id":903927045,"node_id":"IC_kwDOCW7NX8414NUF","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T16:27:49Z","updated_at":"2021-08-23T16:27:49Z","author_association":"CONTRIBUTOR","body":"Thanks, @jackye1995!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903927045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903932242","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-903932242","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":903932242,"node_id":"IC_kwDOCW7NX8414OlS","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T16:34:55Z","updated_at":"2021-08-23T16:34:55Z","author_association":"CONTRIBUTOR","body":"\r\n> ```\r\n> Benchmark                                                                       Mode  Cnt   Score   Error  Units\r\n> TaskWriterParquetBenchmark.writePartitionedDataNewFanoutWriter                    ss    5  10.432 Â± 0.382   s/op\r\n> ```\r\n\r\nWould it worth to add this benchmark to the codebase?\r\nI need to check again, but I might have to change the Spark Orc writer-s, and I would like to make sure that the performance remains the same, so having a good benchmark/ baseline would be good.\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903932242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903937976","html_url":"https://github.com/apache/iceberg/pull/2961#issuecomment-903937976","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2961","id":903937976,"node_id":"IC_kwDOCW7NX8414P-4","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T16:43:09Z","updated_at":"2021-08-23T16:43:09Z","author_association":"CONTRIBUTOR","body":"I agree with much of what @rymurr said. I think it is good that snapshots are immutable. I think of the tags (and later, branches) feature as a way of referring to snapshots and keeping track of them, just like references in git.\r\n\r\nFor the spec, what I've been thinking is to add a new map that tracks snapshots with names as keys and an object of data. Something like this:\r\n\r\n```\r\n  \"named-snapshots\": {\r\n    \"current\": { \"snapshot-id\": 1234..., \"type\": \"branch\" },\r\n    \"dev\": { \"snapshot-id\": 1235..., \"type\": \"branch\" },\r\n    \"monthly-2021-06-01\": { \"snapshot-id\": 1233..., \"type\": \"tag\", \"lifecycle\": \"snapshot\" },\r\n    \"audit-2021-q2\": { \"snapshot-id\": 1232..., \"type\": \"tag\", \"lifecycle\": \"independent\" }\r\n  }\r\n```\r\n\r\nThings to note about this example:\r\n* The current version is a normal branch. We'd need to keep `current-version-id` until v3\r\n* The \"type\" determines what can be done. Branches can be updated just like \"current\" and tags are static\r\n* Tags need information about lifecycle. Some tags are just convenience names that should be removed when a snapshot is expired (lifecycle=snapshot) but others are snapshots that should be retained forever (lifecycle=independent)\r\n* Using a JSON object for the tag/branch metadata allows us to evolve it more easily, unlike `map<string, long>`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903937976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903950996","html_url":"https://github.com/apache/iceberg/pull/2961#issuecomment-903950996","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2961","id":903950996,"node_id":"IC_kwDOCW7NX8414TKU","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T17:02:10Z","updated_at":"2021-08-23T17:02:10Z","author_association":"CONTRIBUTOR","body":"@rdblue thanks for the suggestion!\r\n\r\nOne thing around the immutable nature of snapshot I thought about is that, in encryption we still have the need to add the ability to rotate key. The encryption metadata or its location will likely be a part of snapshot which will change after rotation. This goes to the point I was discussing above, I think snapshot content is of course immutable, but I am not sure if we can continue to keep properties describing the snapshot immutable.\r\n\r\nFor lifecycle, yes I was thinking about adding this as a part of a Tag object, but if we go with placing it in table metadata it will be the way you described.\r\n\r\nFor JSON object instead of map, yes If it is in table metadata it will be an object similar to how we implement other fields. I was just trying to simplify the idea.\r\n\r\nFor the branch example you gave, could you elaborate more about its semantics and usage? I don't see how it would be used without having a complete DAG of commits, and how its relationship would be with the Nessie project.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/903950996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904162653","html_url":"https://github.com/apache/iceberg/pull/3008#issuecomment-904162653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3008","id":904162653,"node_id":"IC_kwDOCW7NX8415G1d","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T22:01:14Z","updated_at":"2021-08-23T22:01:14Z","author_association":"CONTRIBUTOR","body":"Can you also remove the site deploy tasks from gradle since this replaces them?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904162653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904180068","html_url":"https://github.com/apache/iceberg/issues/3014#issuecomment-904180068","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3014","id":904180068,"node_id":"IC_kwDOCW7NX8415LFk","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T22:35:31Z","updated_at":"2021-08-23T22:35:31Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer can you assign this to me, and timebox it till Thursday?  Wanna take a look at iceberg code, but don't want to block it if I get occupied by other things","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904180068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904203379","html_url":"https://github.com/apache/iceberg/issues/3014#issuecomment-904203379","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3014","id":904203379,"node_id":"IC_kwDOCW7NX8415Qxz","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T23:31:47Z","updated_at":"2021-08-23T23:31:58Z","author_association":"MEMBER","body":"Done! Let me know if anything is unclear","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904203379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904217481","html_url":"https://github.com/apache/iceberg/pull/2820#issuecomment-904217481","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2820","id":904217481,"node_id":"IC_kwDOCW7NX8415UOJ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T00:06:31Z","updated_at":"2021-08-24T00:06:31Z","author_association":"CONTRIBUTOR","body":"I tried to convert some of these classes to Java today and didn't get anywhere. Some of the traits we need to implement just don't exist for some reason and I think it's probably better just to do it this way.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904217481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904218332","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-904218332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":904218332,"node_id":"IC_kwDOCW7NX8415Ubc","user":{"login":"huaxingao","id":13592258,"node_id":"MDQ6VXNlcjEzNTkyMjU4","avatar_url":"https://avatars.githubusercontent.com/u/13592258?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxingao","html_url":"https://github.com/huaxingao","followers_url":"https://api.github.com/users/huaxingao/followers","following_url":"https://api.github.com/users/huaxingao/following{/other_user}","gists_url":"https://api.github.com/users/huaxingao/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxingao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxingao/subscriptions","organizations_url":"https://api.github.com/users/huaxingao/orgs","repos_url":"https://api.github.com/users/huaxingao/repos","events_url":"https://api.github.com/users/huaxingao/events{/privacy}","received_events_url":"https://api.github.com/users/huaxingao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T00:08:35Z","updated_at":"2021-08-24T00:08:35Z","author_association":"CONTRIBUTOR","body":"cc @ggershinsky @jackye1995\r\nThe proposed syntax is  `ALTER TABLE table ENCRYPTED WITH KEK|MEK BY DATAFILE KEY key-id` in https://docs.google.com/document/d/1kkcjr9KrlB9QagRX3ToulG_Rf-65NMSlVANheDNzJq4/edit#heading=h.5e5qu1qyfmhm, but this was changed to `ALTER TABLE table ENCRYPTED WITH KEK|MEK BY TABLE KEY key-id` per Gidon's suggestion.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904218332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904221679","html_url":"https://github.com/apache/iceberg/pull/2965#issuecomment-904221679","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2965","id":904221679,"node_id":"IC_kwDOCW7NX8415VPv","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T00:15:46Z","updated_at":"2021-08-24T00:15:46Z","author_association":"CONTRIBUTOR","body":"Thanks for approving! @flyrain great, let's bring this up in the next community meeting then. Meanwhile I still need to catch up with your discussion on dev list ð ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904221679/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904243775","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-904243775","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":904243775,"node_id":"IC_kwDOCW7NX8415ao_","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T01:18:21Z","updated_at":"2021-08-24T01:18:21Z","author_association":"CONTRIBUTOR","body":"@pvary, I'll add tests and benchmarks once I split this into smaller PRs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904243775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904258100","html_url":"https://github.com/apache/iceberg/pull/3015#issuecomment-904258100","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3015","id":904258100,"node_id":"IC_kwDOCW7NX8415eI0","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T01:55:28Z","updated_at":"2021-08-24T01:55:28Z","author_association":"MEMBER","body":"@rymurr I think you were also interested in this","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904258100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904294912","html_url":"https://github.com/apache/iceberg/issues/3016#issuecomment-904294912","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3016","id":904294912,"node_id":"IC_kwDOCW7NX8415nIA","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T03:32:13Z","updated_at":"2021-08-24T03:32:13Z","author_association":"MEMBER","body":"If \"id\" is not a partition column then you need the row-level delete operations which are only available if you turn on the Spark3 Extensions. \r\n\r\n```spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions```\r\n\r\nThis will enable copy-on-write deletes which can change your tables at the row level.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904294912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904295471","html_url":"https://github.com/apache/iceberg/issues/3016#issuecomment-904295471","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3016","id":904295471,"node_id":"IC_kwDOCW7NX8415nQv","user":{"login":"ocean-zhc","id":46189785,"node_id":"MDQ6VXNlcjQ2MTg5Nzg1","avatar_url":"https://avatars.githubusercontent.com/u/46189785?v=4","gravatar_id":"","url":"https://api.github.com/users/ocean-zhc","html_url":"https://github.com/ocean-zhc","followers_url":"https://api.github.com/users/ocean-zhc/followers","following_url":"https://api.github.com/users/ocean-zhc/following{/other_user}","gists_url":"https://api.github.com/users/ocean-zhc/gists{/gist_id}","starred_url":"https://api.github.com/users/ocean-zhc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ocean-zhc/subscriptions","organizations_url":"https://api.github.com/users/ocean-zhc/orgs","repos_url":"https://api.github.com/users/ocean-zhc/repos","events_url":"https://api.github.com/users/ocean-zhc/events{/privacy}","received_events_url":"https://api.github.com/users/ocean-zhc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T03:34:04Z","updated_at":"2021-08-24T03:34:04Z","author_association":"NONE","body":"Thank you very much for your answer. Before this answer, I added the SQL extension and this problem has been solved. Thanks again!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904295471/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904335864","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-904335864","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":904335864,"node_id":"IC_kwDOCW7NX8415xH4","user":{"login":"smallx","id":16517035,"node_id":"MDQ6VXNlcjE2NTE3MDM1","avatar_url":"https://avatars.githubusercontent.com/u/16517035?v=4","gravatar_id":"","url":"https://api.github.com/users/smallx","html_url":"https://github.com/smallx","followers_url":"https://api.github.com/users/smallx/followers","following_url":"https://api.github.com/users/smallx/following{/other_user}","gists_url":"https://api.github.com/users/smallx/gists{/gist_id}","starred_url":"https://api.github.com/users/smallx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smallx/subscriptions","organizations_url":"https://api.github.com/users/smallx/orgs","repos_url":"https://api.github.com/users/smallx/repos","events_url":"https://api.github.com/users/smallx/events{/privacy}","received_events_url":"https://api.github.com/users/smallx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T05:33:37Z","updated_at":"2021-08-24T05:42:56Z","author_association":"CONTRIBUTOR","body":"thanks @kbendick \r\n\r\n`try-with-resources` is just a syntactic sugar. `try-with-resources` block and `try-finally` block are the same at the bytecode level. These code block may not end normally if the thread that executing these code is terminated.\r\n\r\nRefer to the Java documentation:\r\n- https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\r\n- https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.3.1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904335864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904343633","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-904343633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":904343633,"node_id":"IC_kwDOCW7NX8415zBR","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T05:53:02Z","updated_at":"2021-08-24T05:53:02Z","author_association":"CONTRIBUTOR","body":"> @pvary, I'll add tests and benchmarks once I split this into smaller PRs.\r\n\r\n@aokolnychyi, sounds good, thanks! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904343633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904418059","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-904418059","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":904418059,"node_id":"IC_kwDOCW7NX8416FML","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T08:05:56Z","updated_at":"2021-08-24T08:05:56Z","author_association":"CONTRIBUTOR","body":"Does this solve the same problem as #2785?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904418059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904425776","html_url":"https://github.com/apache/iceberg/pull/2680#issuecomment-904425776","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2680","id":904425776,"node_id":"IC_kwDOCW7NX8416HEw","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T08:16:35Z","updated_at":"2021-08-24T08:16:35Z","author_association":"CONTRIBUTOR","body":"I think the `StructSet` in `DeleteFilter` should also be replaced.https://github.com/apache/iceberg/blob/master/data/src/main/java/org/apache/iceberg/data/DeleteFilter.java#L137","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904425776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904437489","html_url":"https://github.com/apache/iceberg/pull/3012#issuecomment-904437489","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3012","id":904437489,"node_id":"IC_kwDOCW7NX8416J7x","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T08:33:32Z","updated_at":"2021-08-24T08:33:32Z","author_association":"CONTRIBUTOR","body":"I think the entire row is required. As https://github.com/apache/iceberg/issues/360#issuecomment-653532308  mentioned, when reading the format v2 table by Flink streaming, we can read the equality file first. In our implementation, we read the equality file as a data file, and we can get the entire row in the equality file. It is useful.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904437489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904641948","html_url":"https://github.com/apache/iceberg/pull/2933#issuecomment-904641948","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2933","id":904641948,"node_id":"IC_kwDOCW7NX841672c","user":{"login":"mayursrivastava","id":8659624,"node_id":"MDQ6VXNlcjg2NTk2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8659624?v=4","gravatar_id":"","url":"https://api.github.com/users/mayursrivastava","html_url":"https://github.com/mayursrivastava","followers_url":"https://api.github.com/users/mayursrivastava/followers","following_url":"https://api.github.com/users/mayursrivastava/following{/other_user}","gists_url":"https://api.github.com/users/mayursrivastava/gists{/gist_id}","starred_url":"https://api.github.com/users/mayursrivastava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayursrivastava/subscriptions","organizations_url":"https://api.github.com/users/mayursrivastava/orgs","repos_url":"https://api.github.com/users/mayursrivastava/repos","events_url":"https://api.github.com/users/mayursrivastava/events{/privacy}","received_events_url":"https://api.github.com/users/mayursrivastava/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T13:27:08Z","updated_at":"2021-08-24T13:27:08Z","author_association":"CONTRIBUTOR","body":"Hi @rdblue, is this pr good to go? One of the tests timed out. Is it possible for admins to rerun it or should I make an amend to the commit and force push (as recommended earlier on this thread)?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904641948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904671365","html_url":"https://github.com/apache/iceberg/issues/3018#issuecomment-904671365","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3018","id":904671365,"node_id":"IC_kwDOCW7NX8417DCF","user":{"login":"massquantity","id":28751760,"node_id":"MDQ6VXNlcjI4NzUxNzYw","avatar_url":"https://avatars.githubusercontent.com/u/28751760?v=4","gravatar_id":"","url":"https://api.github.com/users/massquantity","html_url":"https://github.com/massquantity","followers_url":"https://api.github.com/users/massquantity/followers","following_url":"https://api.github.com/users/massquantity/following{/other_user}","gists_url":"https://api.github.com/users/massquantity/gists{/gist_id}","starred_url":"https://api.github.com/users/massquantity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massquantity/subscriptions","organizations_url":"https://api.github.com/users/massquantity/orgs","repos_url":"https://api.github.com/users/massquantity/repos","events_url":"https://api.github.com/users/massquantity/events{/privacy}","received_events_url":"https://api.github.com/users/massquantity/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T14:03:26Z","updated_at":"2021-08-24T14:03:26Z","author_association":"NONE","body":"It turns out that by adding the Spark SQL extensions, this feature can be achieved. \r\n`--conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions`\r\n\r\nAlso the version of Spark matters. Iceberg seems not fully compatible with Spark 3.1.2, which is lastest version, and it's better to use version 3.0.3.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904671365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904686910","html_url":"https://github.com/apache/iceberg/issues/3018#issuecomment-904686910","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3018","id":904686910,"node_id":"IC_kwDOCW7NX8417G0-","user":{"login":"massquantity","id":28751760,"node_id":"MDQ6VXNlcjI4NzUxNzYw","avatar_url":"https://avatars.githubusercontent.com/u/28751760?v=4","gravatar_id":"","url":"https://api.github.com/users/massquantity","html_url":"https://github.com/massquantity","followers_url":"https://api.github.com/users/massquantity/followers","following_url":"https://api.github.com/users/massquantity/following{/other_user}","gists_url":"https://api.github.com/users/massquantity/gists{/gist_id}","starred_url":"https://api.github.com/users/massquantity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massquantity/subscriptions","organizations_url":"https://api.github.com/users/massquantity/orgs","repos_url":"https://api.github.com/users/massquantity/repos","events_url":"https://api.github.com/users/massquantity/events{/privacy}","received_events_url":"https://api.github.com/users/massquantity/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T14:21:07Z","updated_at":"2021-08-24T14:26:39Z","author_association":"NONE","body":"However, there is one more little issue. Although now I can use `MERGE INTO` in spark shell, spark SQL shell and pyspark shell, it doesn't work in normal python shell. After installing pyspark from pip(`pip install pyspark`) and starting a SparkSession with sql extensions, it raises errors on normal queries.\r\n\r\n```python\r\nspark = SparkSession\r\n  .builder\r\n  .config(\"spark.sql.extensions\", \"org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions\")\r\n  .getOrCreate()\r\n\r\ndf = spark.sql(\"SELECT * FROM lake_catalog.database.table\")\r\n```\r\n```shell\r\n---------------------------------------------------------------------------\r\nPy4JJavaError                             Traceback (most recent call last)\r\n<timed exec> in <module>\r\n\r\n/usr/local/lib/python3.7/dist-packages/pyspark/sql/session.py in sql(self, sqlQuery)\r\n    721         [Row(f1=1, f2='row1'), Row(f1=2, f2='row2'), Row(f1=3, f2='row3')]\r\n    722         \"\"\"\r\n--> 723         return DataFrame(self._jsparkSession.sql(sqlQuery), self._wrapped)\r\n    724 \r\n    725     def table(self, tableName):\r\n\r\n/usr/local/lib/python3.7/dist-packages/py4j/java_gateway.py in __call__(self, *args)\r\n   1303         answer = self.gateway_client.send_command(command)\r\n   1304         return_value = get_return_value(\r\n-> 1305             answer, self.gateway_client, self.target_id, self.name)\r\n   1306 \r\n   1307         for temp_arg in temp_args:\r\n\r\n/usr/local/lib/python3.7/dist-packages/pyspark/sql/utils.py in deco(*a, **kw)\r\n    109     def deco(*a, **kw):\r\n    110         try:\r\n--> 111             return f(*a, **kw)\r\n    112         except py4j.protocol.Py4JJavaError as e:\r\n    113             converted = convert_exception(e.java_exception)\r\n\r\n/usr/local/lib/python3.7/dist-packages/py4j/protocol.py in get_return_value(answer, gateway_client, target_id, name)\r\n    326                 raise Py4JJavaError(\r\n    327                     \"An error occurred while calling {0}{1}{2}.\\n\".\r\n--> 328                     format(target_id, \".\", name), value)\r\n    329             else:\r\n    330                 raise Py4JError(\r\n\r\nPy4JJavaError: An error occurred while calling o79.sql.\r\n: java.lang.NoSuchMethodError: 'void org.apache.spark.sql.internal.VariableSubstitution.<init>(org.apache.spark.sql.internal.SQLConf)'\r\n\tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.substitutor$lzycompute(IcebergSparkSqlExtensionsParser.scala:39)\r\n\tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.substitutor(IcebergSparkSqlExtensionsParser.scala:39)\r\n\tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.parsePlan(IcebergSparkSqlExtensionsParser.scala:96)\r\n\tat org.apache.spark.sql.SparkSession.$anonfun$sql$2(SparkSession.scala:616)\r\n\tat org.apache.spark.sql.catalyst.QueryPlanningTracker.measurePhase(QueryPlanningTracker.scala:111)\r\n\tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:616)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:613)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\r\n\tat py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\r\n\tat py4j.Gateway.invoke(Gateway.java:282)\r\n\tat py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\r\n\tat py4j.commands.CallCommand.execute(CallCommand.java:79)\r\n\tat py4j.GatewayConnection.run(GatewayConnection.java:238)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904686910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904708016","html_url":"https://github.com/apache/iceberg/issues/3018#issuecomment-904708016","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3018","id":904708016,"node_id":"IC_kwDOCW7NX8417L-w","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T14:46:26Z","updated_at":"2021-08-24T14:46:26Z","author_association":"MEMBER","body":"Looks like a version mismatch with the Pyspark Spark version and the version of the runtime extension \n\nSent from my iPhone\n\n> On Aug 24, 2021, at 9:21 AM, massquantity ***@***.***> wrote:\n> \n> ï»¿\n> However, there is one more little issue. Although now I can use MERGE INTO in spark shell, spark SQL shell and pyspark shell, it doesn't work in normal python shell. After installing pyspark from pip(pip install pyspark) and starting a SparkSession with sql extensions, it has a problem with normal queries.\n> \n> spark = SparkSession\n>   .builder\n>   .config(\"spark.sql.extensions\", \"org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions\")\n>   .getOrCreate()\n> \n> df = spark.sql(\"SELECT * FROM lake_catalog.database.table\")\n> ---------------------------------------------------------------------------\n> Py4JJavaError                             Traceback (most recent call last)\n> <timed exec> in <module>\n> \n> /usr/local/lib/python3.7/dist-packages/pyspark/sql/session.py in sql(self, sqlQuery)\n>     721         [Row(f1=1, f2='row1'), Row(f1=2, f2='row2'), Row(f1=3, f2='row3')]\n>     722         \"\"\"\n> --> 723         return DataFrame(self._jsparkSession.sql(sqlQuery), self._wrapped)\n>     724 \n>     725     def table(self, tableName):\n> \n> /usr/local/lib/python3.7/dist-packages/py4j/java_gateway.py in __call__(self, *args)\n>    1303         answer = self.gateway_client.send_command(command)\n>    1304         return_value = get_return_value(\n> -> 1305             answer, self.gateway_client, self.target_id, self.name)\n>    1306 \n>    1307         for temp_arg in temp_args:\n> \n> /usr/local/lib/python3.7/dist-packages/pyspark/sql/utils.py in deco(*a, **kw)\n>     109     def deco(*a, **kw):\n>     110         try:\n> --> 111             return f(*a, **kw)\n>     112         except py4j.protocol.Py4JJavaError as e:\n>     113             converted = convert_exception(e.java_exception)\n> \n> /usr/local/lib/python3.7/dist-packages/py4j/protocol.py in get_return_value(answer, gateway_client, target_id, name)\n>     326                 raise Py4JJavaError(\n>     327                     \"An error occurred while calling {0}{1}{2}.\\n\".\n> --> 328                     format(target_id, \".\", name), value)\n>     329             else:\n>     330                 raise Py4JError(\n> \n> Py4JJavaError: An error occurred while calling o79.sql.\n> : java.lang.NoSuchMethodError: 'void org.apache.spark.sql.internal.VariableSubstitution.<init>(org.apache.spark.sql.internal.SQLConf)'\n> \tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.substitutor$lzycompute(IcebergSparkSqlExtensionsParser.scala:39)\n> \tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.substitutor(IcebergSparkSqlExtensionsParser.scala:39)\n> \tat org.apache.spark.sql.catalyst.parser.extensions.IcebergSparkSqlExtensionsParser.parsePlan(IcebergSparkSqlExtensionsParser.scala:96)\n> \tat org.apache.spark.sql.SparkSession.$anonfun$sql$2(SparkSession.scala:616)\n> \tat org.apache.spark.sql.catalyst.QueryPlanningTracker.measurePhase(QueryPlanningTracker.scala:111)\n> \tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:616)\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\n> \tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:613)\n> \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n> \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n> \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n> \tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\n> \tat py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\n> \tat py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\n> \tat py4j.Gateway.invoke(Gateway.java:282)\n> \tat py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n> \tat py4j.commands.CallCommand.execute(CallCommand.java:79)\n> \tat py4j.GatewayConnection.run(GatewayConnection.java:238)\n> \tat java.base/java.lang.Thread.run(Unknown Source)\n> â\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904708016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904747064","html_url":"https://github.com/apache/iceberg/pull/3012#issuecomment-904747064","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3012","id":904747064,"node_id":"IC_kwDOCW7NX8417Vg4","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T15:32:06Z","updated_at":"2021-08-24T15:32:06Z","author_association":"CONTRIBUTOR","body":"@coolderli, the format supports writing just the delete columns. Whether that is a good idea depends on the use case. I think we can support this if people have a use case for it, but it shouldn't be the default.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904747064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904762627","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-904762627","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":904762627,"node_id":"IC_kwDOCW7NX8417ZUD","user":{"login":"smallx","id":16517035,"node_id":"MDQ6VXNlcjE2NTE3MDM1","avatar_url":"https://avatars.githubusercontent.com/u/16517035?v=4","gravatar_id":"","url":"https://api.github.com/users/smallx","html_url":"https://github.com/smallx","followers_url":"https://api.github.com/users/smallx/followers","following_url":"https://api.github.com/users/smallx/following{/other_user}","gists_url":"https://api.github.com/users/smallx/gists{/gist_id}","starred_url":"https://api.github.com/users/smallx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smallx/subscriptions","organizations_url":"https://api.github.com/users/smallx/orgs","repos_url":"https://api.github.com/users/smallx/repos","events_url":"https://api.github.com/users/smallx/events{/privacy}","received_events_url":"https://api.github.com/users/smallx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T15:51:24Z","updated_at":"2021-08-24T15:51:24Z","author_association":"CONTRIBUTOR","body":"> Does this solve the same problem as #2785?\r\n\r\nOh, I haven't found #2785 before. It's similar to my problem, but not the same.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904762627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904794157","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-904794157","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":904794157,"node_id":"IC_kwDOCW7NX8417hAt","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T16:30:19Z","updated_at":"2021-08-24T16:30:19Z","author_association":"CONTRIBUTOR","body":"@rdblue @openinx, do you are agree with the direction?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/904794157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905036298","html_url":"https://github.com/apache/iceberg/issues/2962#issuecomment-905036298","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2962","id":905036298,"node_id":"IC_kwDOCW7NX8418cIK","user":{"login":"hankfanchiu","id":13294681,"node_id":"MDQ6VXNlcjEzMjk0Njgx","avatar_url":"https://avatars.githubusercontent.com/u/13294681?v=4","gravatar_id":"","url":"https://api.github.com/users/hankfanchiu","html_url":"https://github.com/hankfanchiu","followers_url":"https://api.github.com/users/hankfanchiu/followers","following_url":"https://api.github.com/users/hankfanchiu/following{/other_user}","gists_url":"https://api.github.com/users/hankfanchiu/gists{/gist_id}","starred_url":"https://api.github.com/users/hankfanchiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankfanchiu/subscriptions","organizations_url":"https://api.github.com/users/hankfanchiu/orgs","repos_url":"https://api.github.com/users/hankfanchiu/repos","events_url":"https://api.github.com/users/hankfanchiu/events{/privacy}","received_events_url":"https://api.github.com/users/hankfanchiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T23:12:54Z","updated_at":"2021-08-24T23:14:18Z","author_association":"NONE","body":"We've also encountered this issue, after updating our internal fork from 0.9.0 to 0.12.0.\r\n\r\nComparing the Parquet schemas of the outputs written with Iceberg 0.9.0 and with Iceberg 0.12.0, we see that only the name of the middle level was changed from `map` (Iceberg 0.9.0, Parquet 1.11.0) to `key_value` (Iceberg 0.12.0, Parquet 1.12.0), e.g.:\r\n\r\n```diff\r\n@@ -1,6 +1,6 @@\r\n   optional group my_optional_map (MAP) = 9 {\r\n-    repeated group map {\r\n+    repeated group key_value {\r\n       required binary key (STRING) = 13;\r\n       required group value = 14 {\r\n         optional group values (LIST) = 15 {\r\n```\r\n\r\nAs a temporary workaround, while still on Iceberg 0.12.0, we've patched our fork by downgrading the version of Parquet from 1.12.0 back to 1.11.0.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905036298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905056415","html_url":"https://github.com/apache/iceberg/pull/3008#issuecomment-905056415","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3008","id":905056415,"node_id":"IC_kwDOCW7NX8418hCf","user":{"login":"cwsteinbach","id":229846,"node_id":"MDQ6VXNlcjIyOTg0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/229846?v=4","gravatar_id":"","url":"https://api.github.com/users/cwsteinbach","html_url":"https://github.com/cwsteinbach","followers_url":"https://api.github.com/users/cwsteinbach/followers","following_url":"https://api.github.com/users/cwsteinbach/following{/other_user}","gists_url":"https://api.github.com/users/cwsteinbach/gists{/gist_id}","starred_url":"https://api.github.com/users/cwsteinbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwsteinbach/subscriptions","organizations_url":"https://api.github.com/users/cwsteinbach/orgs","repos_url":"https://api.github.com/users/cwsteinbach/repos","events_url":"https://api.github.com/users/cwsteinbach/events{/privacy}","received_events_url":"https://api.github.com/users/cwsteinbach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T00:07:46Z","updated_at":"2021-08-25T00:07:46Z","author_association":"CONTRIBUTOR","body":"@kbendick @jackye1995 @rdblue I decided that fixing the `deploySite` Gradle task makes more sense than replacing it with a new shell script. Consequently, in the latest version of this patch I have removed `dev/deploySite.sh` and added changes to the `deploySite` task. Please let me know if you approve of this approach. If so, I will then update the commit message and title of this PR to reflect these changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905056415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905150619","html_url":"https://github.com/apache/iceberg/pull/3012#issuecomment-905150619","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3012","id":905150619,"node_id":"IC_kwDOCW7NX84184Cb","user":{"login":"moon-fall","id":7753372,"node_id":"MDQ6VXNlcjc3NTMzNzI=","avatar_url":"https://avatars.githubusercontent.com/u/7753372?v=4","gravatar_id":"","url":"https://api.github.com/users/moon-fall","html_url":"https://github.com/moon-fall","followers_url":"https://api.github.com/users/moon-fall/followers","following_url":"https://api.github.com/users/moon-fall/following{/other_user}","gists_url":"https://api.github.com/users/moon-fall/gists{/gist_id}","starred_url":"https://api.github.com/users/moon-fall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moon-fall/subscriptions","organizations_url":"https://api.github.com/users/moon-fall/orgs","repos_url":"https://api.github.com/users/moon-fall/repos","events_url":"https://api.github.com/users/moon-fall/events{/privacy}","received_events_url":"https://api.github.com/users/moon-fall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T03:20:26Z","updated_at":"2021-08-25T03:20:26Z","author_association":"CONTRIBUTOR","body":"> @moon-fall, can you please add a description for this PR?\r\n> \r\n> Also, it looks like this changes the intended behavior. We purposely wrote the entire row to delete files. It's reasonable to write just the equality delete columns, but merging this would break people that want the entire row. Can you find a good way to configure this and make it optional rather than changing the default behavior?\r\n\r\nokï¼i have edited the description and i will modify the code to add the configure later.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905150619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905157151","html_url":"https://github.com/apache/iceberg/issues/3018#issuecomment-905157151","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3018","id":905157151,"node_id":"IC_kwDOCW7NX84185of","user":{"login":"massquantity","id":28751760,"node_id":"MDQ6VXNlcjI4NzUxNzYw","avatar_url":"https://avatars.githubusercontent.com/u/28751760?v=4","gravatar_id":"","url":"https://api.github.com/users/massquantity","html_url":"https://github.com/massquantity","followers_url":"https://api.github.com/users/massquantity/followers","following_url":"https://api.github.com/users/massquantity/following{/other_user}","gists_url":"https://api.github.com/users/massquantity/gists{/gist_id}","starred_url":"https://api.github.com/users/massquantity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massquantity/subscriptions","organizations_url":"https://api.github.com/users/massquantity/orgs","repos_url":"https://api.github.com/users/massquantity/repos","events_url":"https://api.github.com/users/massquantity/events{/privacy}","received_events_url":"https://api.github.com/users/massquantity/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T03:40:06Z","updated_at":"2021-08-25T03:40:06Z","author_association":"NONE","body":"Yeah, I'll try harder on these versions...  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905157151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905446130","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-905446130","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":905446130,"node_id":"IC_kwDOCW7NX841-ALy","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T12:13:27Z","updated_at":"2021-08-25T12:13:27Z","author_association":"CONTRIBUTOR","body":"@smallx: Seems that the test were timeouted after 360m. Could you please check if this was caused your PR?\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905446130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905447447","html_url":"https://github.com/apache/iceberg/pull/3021#issuecomment-905447447","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3021","id":905447447,"node_id":"IC_kwDOCW7NX841-AgX","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T12:15:24Z","updated_at":"2021-08-25T12:15:24Z","author_association":"CONTRIBUTOR","body":"Thanks @szehon-ho for the fix!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905447447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905528965","html_url":"https://github.com/apache/iceberg/issues/2484#issuecomment-905528965","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2484","id":905528965,"node_id":"IC_kwDOCW7NX841-UaF","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T14:02:42Z","updated_at":"2021-08-25T14:02:42Z","author_association":"CONTRIBUTOR","body":"addressed this in https://github.com/apache/iceberg/pull/3024. @mayursrivastava would you like to review the PR?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905528965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905545720","html_url":"https://github.com/apache/iceberg/issues/2484#issuecomment-905545720","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2484","id":905545720,"node_id":"IC_kwDOCW7NX841-Yf4","user":{"login":"mayursrivastava","id":8659624,"node_id":"MDQ6VXNlcjg2NTk2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8659624?v=4","gravatar_id":"","url":"https://api.github.com/users/mayursrivastava","html_url":"https://github.com/mayursrivastava","followers_url":"https://api.github.com/users/mayursrivastava/followers","following_url":"https://api.github.com/users/mayursrivastava/following{/other_user}","gists_url":"https://api.github.com/users/mayursrivastava/gists{/gist_id}","starred_url":"https://api.github.com/users/mayursrivastava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayursrivastava/subscriptions","organizations_url":"https://api.github.com/users/mayursrivastava/orgs","repos_url":"https://api.github.com/users/mayursrivastava/repos","events_url":"https://api.github.com/users/mayursrivastava/events{/privacy}","received_events_url":"https://api.github.com/users/mayursrivastava/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T14:22:33Z","updated_at":"2021-08-25T14:22:33Z","author_association":"CONTRIBUTOR","body":"Thanks @nastra, please add me as a reviewer.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905545720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905639037","html_url":"https://github.com/apache/iceberg/pull/3008#issuecomment-905639037","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3008","id":905639037,"node_id":"IC_kwDOCW7NX841-vR9","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T15:49:50Z","updated_at":"2021-08-25T15:49:50Z","author_association":"CONTRIBUTOR","body":"Can you update the PR title and description? Looks like those are out of date.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905639037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905709983","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-905709983","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":905709983,"node_id":"IC_kwDOCW7NX841_Amf","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T16:57:18Z","updated_at":"2021-08-25T16:57:18Z","author_association":"CONTRIBUTOR","body":"I'd like to understand more about the reason behind adding this extension so early. My understanding is that most features needed to support this is not implemented in Iceberg yet, and Spark SQL extension is typically the last step after everything is ready.\r\n\r\nI was pulled to first focus on the Trino and PrestoDB Iceberg connector work in the past few months so I did not follow up too much on this area, do we already have all the building pieces to make this work? If not, I would propose we focus on those aspects first before adding the SQL extension, as the syntax might change if the base implementation changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905709983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905824545","html_url":"https://github.com/apache/iceberg/issues/1598#issuecomment-905824545","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1598","id":905824545,"node_id":"IC_kwDOCW7NX841_ckh","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T19:47:54Z","updated_at":"2021-08-25T19:47:54Z","author_association":"CONTRIBUTOR","body":"This was released in 0.11.0","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905824545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905824858","html_url":"https://github.com/apache/iceberg/issues/1601#issuecomment-905824858","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1601","id":905824858,"node_id":"IC_kwDOCW7NX841_cpa","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T19:48:22Z","updated_at":"2021-08-25T19:48:22Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer, are there any new procedures that we don't have documented? I think we added a couple (import files?) in the 0.12.0 release.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905824858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905825132","html_url":"https://github.com/apache/iceberg/issues/1768#issuecomment-905825132","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1768","id":905825132,"node_id":"IC_kwDOCW7NX841_cts","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T19:48:47Z","updated_at":"2021-08-25T19:48:47Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, is this done?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905825132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905863665","html_url":"https://github.com/apache/iceberg/pull/2826#issuecomment-905863665","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2826","id":905863665,"node_id":"IC_kwDOCW7NX841_mHx","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T20:49:44Z","updated_at":"2021-08-25T20:49:44Z","author_association":"CONTRIBUTOR","body":"Do we need to check in `gradle-wrapper.jar`? Wasn't it downloaded before?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905863665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905864464","html_url":"https://github.com/apache/iceberg/pull/2826#issuecomment-905864464","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2826","id":905864464,"node_id":"IC_kwDOCW7NX841_mUQ","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T20:51:03Z","updated_at":"2021-08-25T20:51:03Z","author_association":"CONTRIBUTOR","body":"@rdblue, could you check if your comments were resolved?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905864464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905866352","html_url":"https://github.com/apache/iceberg/pull/2826#issuecomment-905866352","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2826","id":905866352,"node_id":"IC_kwDOCW7NX841_mxw","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T20:54:07Z","updated_at":"2021-08-25T20:54:07Z","author_association":"CONTRIBUTOR","body":"This generally looks good to me. We are changing a lot in terms of dependencies so it is hard to spot everything. I left a few questions but other than that, I'd support getting this in.\r\n\r\nThis was change clearly required a substantial amount of work. Thanks, @nastra!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905866352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905879411","html_url":"https://github.com/apache/iceberg/issues/3025#issuecomment-905879411","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3025","id":905879411,"node_id":"IC_kwDOCW7NX841_p9z","user":{"login":"dmgcodevil","id":1413873,"node_id":"MDQ6VXNlcjE0MTM4NzM=","avatar_url":"https://avatars.githubusercontent.com/u/1413873?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgcodevil","html_url":"https://github.com/dmgcodevil","followers_url":"https://api.github.com/users/dmgcodevil/followers","following_url":"https://api.github.com/users/dmgcodevil/following{/other_user}","gists_url":"https://api.github.com/users/dmgcodevil/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgcodevil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgcodevil/subscriptions","organizations_url":"https://api.github.com/users/dmgcodevil/orgs","repos_url":"https://api.github.com/users/dmgcodevil/repos","events_url":"https://api.github.com/users/dmgcodevil/events{/privacy}","received_events_url":"https://api.github.com/users/dmgcodevil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T21:13:16Z","updated_at":"2021-08-25T21:13:16Z","author_association":"CONTRIBUTOR","body":"Look like ids reassigned here https://github.com/apache/iceberg/blob/0b2f0657037c7a5be685ba5f082ba1cc1a145fa1/core/src/main/java/org/apache/iceberg/TableMetadata.java#L98-L99","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/905879411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906057365","html_url":"https://github.com/apache/iceberg/issues/3026#issuecomment-906057365","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3026","id":906057365,"node_id":"IC_kwDOCW7NX842AVaV","user":{"login":"EricJoy2048","id":32193458,"node_id":"MDQ6VXNlcjMyMTkzNDU4","avatar_url":"https://avatars.githubusercontent.com/u/32193458?v=4","gravatar_id":"","url":"https://api.github.com/users/EricJoy2048","html_url":"https://github.com/EricJoy2048","followers_url":"https://api.github.com/users/EricJoy2048/followers","following_url":"https://api.github.com/users/EricJoy2048/following{/other_user}","gists_url":"https://api.github.com/users/EricJoy2048/gists{/gist_id}","starred_url":"https://api.github.com/users/EricJoy2048/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EricJoy2048/subscriptions","organizations_url":"https://api.github.com/users/EricJoy2048/orgs","repos_url":"https://api.github.com/users/EricJoy2048/repos","events_url":"https://api.github.com/users/EricJoy2048/events{/privacy}","received_events_url":"https://api.github.com/users/EricJoy2048/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T03:09:36Z","updated_at":"2021-08-26T03:09:36Z","author_association":"MEMBER","body":"I found a same issue at here :\r\nhttps://github.com/apache/iceberg/issues/2993","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906057365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906069269","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-906069269","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":906069269,"node_id":"IC_kwDOCW7NX842AYUV","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T03:44:00Z","updated_at":"2021-08-26T03:44:00Z","author_association":"MEMBER","body":"This tends to get fixed by building the project and then refreshing the IDE. Before the project has been built the shaded libraries aren't accessible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906069269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906097823","html_url":"https://github.com/apache/iceberg/pull/3004#issuecomment-906097823","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3004","id":906097823,"node_id":"IC_kwDOCW7NX842AfSf","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T05:05:54Z","updated_at":"2021-08-26T05:05:54Z","author_association":"CONTRIBUTOR","body":"Hey @rdblue, I've been out sick the past few days, but are we planning on merging this as discussed offline?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906097823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906098262","html_url":"https://github.com/apache/iceberg/pull/3004#issuecomment-906098262","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3004","id":906098262,"node_id":"IC_kwDOCW7NX842AfZW","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T05:06:54Z","updated_at":"2021-08-26T05:06:54Z","author_association":"CONTRIBUTOR","body":"> Hey @rdblue, I've been out sick the past few days, but are we planning on merging this as discussed offline?\r\n\r\nOh, just realized I need to change the file name ð ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906098262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906118522","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-906118522","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":906118522,"node_id":"IC_kwDOCW7NX842AkV6","user":{"login":"smallx","id":16517035,"node_id":"MDQ6VXNlcjE2NTE3MDM1","avatar_url":"https://avatars.githubusercontent.com/u/16517035?v=4","gravatar_id":"","url":"https://api.github.com/users/smallx","html_url":"https://github.com/smallx","followers_url":"https://api.github.com/users/smallx/followers","following_url":"https://api.github.com/users/smallx/following{/other_user}","gists_url":"https://api.github.com/users/smallx/gists{/gist_id}","starred_url":"https://api.github.com/users/smallx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smallx/subscriptions","organizations_url":"https://api.github.com/users/smallx/orgs","repos_url":"https://api.github.com/users/smallx/repos","events_url":"https://api.github.com/users/smallx/events{/privacy}","received_events_url":"https://api.github.com/users/smallx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T06:00:37Z","updated_at":"2021-08-26T06:00:37Z","author_association":"CONTRIBUTOR","body":"> @smallx: Seems that the test were timeouted after 360m. Could you please check if this was caused your PR?\r\n> \r\n> Thanks,\r\n> Peter\r\n\r\n@pvary I found that other PR have similar timeout. So, it should not be caused by my PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906118522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906126358","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-906126358","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":906126358,"node_id":"IC_kwDOCW7NX842AmQW","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T06:15:57Z","updated_at":"2021-08-26T06:15:57Z","author_association":"CONTRIBUTOR","body":"> I'd like to understand more about the reason behind adding this extension so early. My understanding is that most features needed to support this is not implemented in Iceberg yet, and Spark SQL extension is typically the last step after everything is ready.\r\n> \r\n> I was pulled to first focus on the Trino and PrestoDB Iceberg connector work in the past few months so I did not follow up too much on this area, do we already have all the building pieces to make this work? If not, I would propose we focus on those aspects first before adding the SQL extension, as the syntax might change if the base implementation changes.\r\n\r\n@huaxingao as you mentioned that your next planned PR is to add the implementation, do you want to create one PR that has both of them (i.e. this work and the work from the next PR), and then create a separate PR for the work needed to implement it? That way you can more easily test this end to end (and keep the work you have), but ensure that we have the building blocks in place to do this (in case any syntax changes or anything are needed as @jackye1995 mentioned).\r\n\r\nWe can then have a working end to end implementation, to satisfy any concerns about any potential missing pieces, and use this PR as the last PR that's merged in (you can keep this branch as the main branch for demoing both PRs if you'd like).\r\n\r\nJust my 2 cents on a path forward to continue your work on this while considering Jack's concern ð ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906126358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906136723","html_url":"https://github.com/apache/iceberg/pull/2826#issuecomment-906136723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2826","id":906136723,"node_id":"IC_kwDOCW7NX842AoyT","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T06:38:36Z","updated_at":"2021-08-26T06:38:36Z","author_association":"CONTRIBUTOR","body":"> Do we need to check in `gradle-wrapper.jar`? Wasn't it downloaded before?\r\n\r\nI checked the history and the wrapper jar was removed from the project https://github.com/apache/iceberg/pull/639. However, according to the [Gradle docs](https://docs.gradle.org/current/userguide/gradle_wrapper.html#sec:adding_wrapper) it's expected that all of the wrapper files (including the jar) end up in source control and get replaced in source control once an upgrade of Gradle is done.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906136723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906226578","html_url":"https://github.com/apache/iceberg/issues/2468#issuecomment-906226578","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2468","id":906226578,"node_id":"IC_kwDOCW7NX842A-uS","user":{"login":"asnowfox","id":44358181,"node_id":"MDQ6VXNlcjQ0MzU4MTgx","avatar_url":"https://avatars.githubusercontent.com/u/44358181?v=4","gravatar_id":"","url":"https://api.github.com/users/asnowfox","html_url":"https://github.com/asnowfox","followers_url":"https://api.github.com/users/asnowfox/followers","following_url":"https://api.github.com/users/asnowfox/following{/other_user}","gists_url":"https://api.github.com/users/asnowfox/gists{/gist_id}","starred_url":"https://api.github.com/users/asnowfox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asnowfox/subscriptions","organizations_url":"https://api.github.com/users/asnowfox/orgs","repos_url":"https://api.github.com/users/asnowfox/repos","events_url":"https://api.github.com/users/asnowfox/events{/privacy}","received_events_url":"https://api.github.com/users/asnowfox/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T09:01:56Z","updated_at":"2021-08-26T09:03:46Z","author_association":"NONE","body":"I think I found the reason of this problem. in DynConstructors.java which borrowed from parquet-common, the ClassLoader in Builder is a loader of currentThread, looks like this\r\n```\r\npublic static class Builder {\r\n    private final Class<?> baseClass;\r\n    private ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n    private Ctor ctor = null;\r\n    private Map<String, Throwable> problems = new HashMap<String, Throwable>();\r\n\r\n    public Builder(Class<?> baseClass) {\r\n      this.baseClass = baseClass;\r\n    }\r\n\r\n    public Builder() {\r\n      this.baseClass = null;\r\n    }\r\n......\r\n```\r\nSo,  when during runtime, the dynamic class is loaded by current thread, and the base class/interface is not  loaded by current thread. it will have the cast Exception.\r\n\r\nsolution:\r\n```\r\npublic static class Builder {\r\n    private final Class<?> baseClass;\r\n    private ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n    private Ctor ctor = null;\r\n    private Map<String, Throwable> problems = new HashMap<String, Throwable>();\r\n\r\n    public Builder(Class<?> baseClass) {\r\n      this.baseClass = baseClass;\r\n      this.loader = this.baseClass.getClassLoader();\r\n    }\r\n\r\n    public Builder() {\r\n      this.baseClass = null;\r\n    }\r\n......\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906226578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906317437","html_url":"https://github.com/apache/iceberg/pull/3000#issuecomment-906317437","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3000","id":906317437,"node_id":"IC_kwDOCW7NX842BU59","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T11:20:43Z","updated_at":"2021-08-26T11:20:51Z","author_association":"CONTRIBUTOR","body":"> > @smallx: Seems that the test were timeouted after 360m. Could you please check if this was caused your PR?\r\n> > Thanks,\r\n> > Peter\r\n> \r\n> @pvary I found that other PR have similar timeout. So, it should not be caused by my PR.\r\n\r\nIs this problem fixed on those? If so, we might want to rebase and rerun the tests. We need green run to push the changes","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906317437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906326785","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-906326785","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":906326785,"node_id":"IC_kwDOCW7NX842BXMB","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T11:35:35Z","updated_at":"2021-08-26T11:35:35Z","author_association":"CONTRIBUTOR","body":"I would recommend against retrying flaky tests.\r\nIn Hive we spent some time on cleaning flaky tests several years ago, and in almost all of the cases it turned out to be a bug which only manifested in some edge cases.\r\nIMHO we should fix, or disable the flaky tests and not waste resources on running them and creating a false security that the code is tested.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906326785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906334320","html_url":"https://github.com/apache/iceberg/issues/3033#issuecomment-906334320","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3033","id":906334320,"node_id":"IC_kwDOCW7NX842BZBw","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T11:42:58Z","updated_at":"2021-08-26T11:42:58Z","author_association":"CONTRIBUTOR","body":"I think this is the problem:\r\n```\r\nStdErr [com.google.common.base.internal.Finalizer] WARN com.jolbox.bonecp.ConnectionPartition - BoneCP detected an unclosed connection and will now attempt to close it for you. You should be closing this connection in your application - enable connectionWatch for additional debugging assistance or set disableConnectionTracking to true to disable this feature entirely.\r\n```\r\n\r\nWe may want to find out what causing this issue","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906334320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906415591","html_url":"https://github.com/apache/iceberg/issues/3022#issuecomment-906415591","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3022","id":906415591,"node_id":"IC_kwDOCW7NX842Bs3n","user":{"login":"massquantity","id":28751760,"node_id":"MDQ6VXNlcjI4NzUxNzYw","avatar_url":"https://avatars.githubusercontent.com/u/28751760?v=4","gravatar_id":"","url":"https://api.github.com/users/massquantity","html_url":"https://github.com/massquantity","followers_url":"https://api.github.com/users/massquantity/followers","following_url":"https://api.github.com/users/massquantity/following{/other_user}","gists_url":"https://api.github.com/users/massquantity/gists{/gist_id}","starred_url":"https://api.github.com/users/massquantity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massquantity/subscriptions","organizations_url":"https://api.github.com/users/massquantity/orgs","repos_url":"https://api.github.com/users/massquantity/repos","events_url":"https://api.github.com/users/massquantity/events{/privacy}","received_events_url":"https://api.github.com/users/massquantity/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T13:29:55Z","updated_at":"2021-08-27T02:58:37Z","author_association":"NONE","body":"By adding the three jars (`iceberg-flink-runtime-0.12.0.jar`, `bundle-2.15.40.jar` and `url-connection-client-2.15.40.jar`) into `flink_home/lib` folder, things started to work in pyflink 1.12.4.\r\n\r\nAnother caveat is that if one wants to append data to the existing table, pyflink installed from pip may not work either. In this case, running flink job from command line is an option: `./bin/flink run --python xxx.py`. See [Command-Line Interface](https://ci.apache.org/projects/flink/flink-docs-release-1.12/deployment/cli.html).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906415591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906516209","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-906516209","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":906516209,"node_id":"IC_kwDOCW7NX842CFbx","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T15:31:22Z","updated_at":"2021-08-26T15:31:22Z","author_association":"CONTRIBUTOR","body":"I strongly agree with @pvary. Flaky tests should be considered bugs in themselves.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906516209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906532093","html_url":"https://github.com/apache/iceberg/pull/3004#issuecomment-906532093","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3004","id":906532093,"node_id":"IC_kwDOCW7NX842CJT9","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T15:51:14Z","updated_at":"2021-08-26T15:51:14Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906532093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906550923","html_url":"https://github.com/apache/iceberg/issues/1601#issuecomment-906550923","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1601","id":906550923,"node_id":"IC_kwDOCW7NX842CN6L","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T16:14:24Z","updated_at":"2021-08-26T16:14:24Z","author_association":"MEMBER","body":"Yep definitely, also we have a bug in the docs since I wrote some examples using spark expressions which aren't supported by the OSS parser :( \r\n\r\nWe are also missing:\r\nAddFilesProcedure as you noted","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906550923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906622768","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-906622768","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":906622768,"node_id":"IC_kwDOCW7NX842Cfcw","user":{"login":"huaxingao","id":13592258,"node_id":"MDQ6VXNlcjEzNTkyMjU4","avatar_url":"https://avatars.githubusercontent.com/u/13592258?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxingao","html_url":"https://github.com/huaxingao","followers_url":"https://api.github.com/users/huaxingao/followers","following_url":"https://api.github.com/users/huaxingao/following{/other_user}","gists_url":"https://api.github.com/users/huaxingao/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxingao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxingao/subscriptions","organizations_url":"https://api.github.com/users/huaxingao/orgs","repos_url":"https://api.github.com/users/huaxingao/repos","events_url":"https://api.github.com/users/huaxingao/events{/privacy}","received_events_url":"https://api.github.com/users/huaxingao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T17:59:11Z","updated_at":"2021-08-26T17:59:11Z","author_association":"CONTRIBUTOR","body":"@jackye1995 \r\n> I'd like to understand more about the reason behind adding this extension so early ...\r\n\r\nThe reason I am working on this extension is because Gidon wants me to start trying this new SQL syntax. I guess if we are not going to release iceberg soon, it is OK to add the new SQL syntax now so we have the building blocks. If we need to modify the syntax later on, we can just change the code a little to make it work. I am also OK to wait until all the encryption implementation is ready.\r\n\r\n@kbendick Thanks for your suggestion! I can probably combine this PR and next PR (which has the implementation of creating the encryption key, etc). \r\n\r\nLet's discuss more about this after Gidon comes back from vacation.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906622768/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906623255","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-906623255","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":906623255,"node_id":"IC_kwDOCW7NX842CfkX","user":{"login":"huaxingao","id":13592258,"node_id":"MDQ6VXNlcjEzNTkyMjU4","avatar_url":"https://avatars.githubusercontent.com/u/13592258?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxingao","html_url":"https://github.com/huaxingao","followers_url":"https://api.github.com/users/huaxingao/followers","following_url":"https://api.github.com/users/huaxingao/following{/other_user}","gists_url":"https://api.github.com/users/huaxingao/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxingao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxingao/subscriptions","organizations_url":"https://api.github.com/users/huaxingao/orgs","repos_url":"https://api.github.com/users/huaxingao/repos","events_url":"https://api.github.com/users/huaxingao/events{/privacy}","received_events_url":"https://api.github.com/users/huaxingao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T17:59:56Z","updated_at":"2021-08-26T17:59:56Z","author_association":"CONTRIBUTOR","body":"also cc @RussellSpitzer @aokolnychyi ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906623255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906704153","html_url":"https://github.com/apache/iceberg/pull/3008#issuecomment-906704153","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3008","id":906704153,"node_id":"IC_kwDOCW7NX842CzUZ","user":{"login":"cwsteinbach","id":229846,"node_id":"MDQ6VXNlcjIyOTg0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/229846?v=4","gravatar_id":"","url":"https://api.github.com/users/cwsteinbach","html_url":"https://github.com/cwsteinbach","followers_url":"https://api.github.com/users/cwsteinbach/followers","following_url":"https://api.github.com/users/cwsteinbach/following{/other_user}","gists_url":"https://api.github.com/users/cwsteinbach/gists{/gist_id}","starred_url":"https://api.github.com/users/cwsteinbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwsteinbach/subscriptions","organizations_url":"https://api.github.com/users/cwsteinbach/orgs","repos_url":"https://api.github.com/users/cwsteinbach/repos","events_url":"https://api.github.com/users/cwsteinbach/events{/privacy}","received_events_url":"https://api.github.com/users/cwsteinbach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T20:02:14Z","updated_at":"2021-08-26T20:02:14Z","author_association":"CONTRIBUTOR","body":"@rdblue I updated the description.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906704153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906766290","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906766290","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906766290,"node_id":"IC_kwDOCW7NX842DCfS","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T21:48:51Z","updated_at":"2021-08-26T21:48:51Z","author_association":"CONTRIBUTOR","body":"I am interested in this as well, is there any work being done in this space?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906766290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906794720","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906794720","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906794720,"node_id":"IC_kwDOCW7NX842DJbg","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T22:51:59Z","updated_at":"2021-08-26T22:51:59Z","author_association":"CONTRIBUTOR","body":"We talked about this recently in Slack. An alternative that I like is adding a BLOB type to the spec that is backed by a file. Then each unstructured file is represented by a row in a table that can contain metadata, and isn't just a file reference in an Iceberg manifest file.\r\n\r\nI think using a BLOB type is a simpler path to managing unstructured data collections and end up delivering more features.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906794720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906802774","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906802774","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906802774,"node_id":"IC_kwDOCW7NX842DLZW","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T23:10:46Z","updated_at":"2021-08-26T23:10:46Z","author_association":"CONTRIBUTOR","body":"I think that makes sense. The readers will then return just the file names?\nJust curious, what type of metadata would one want to store for each file?\nWould metadata be a specific type or like a dictionary?\n\nIs the discussion on Apache slack? I could not find the thread with a few\nkeyword searches like blob and unstructured data ð.\n\nOn Thu, Aug 26, 2021 at 3:52 PM Ryan Blue ***@***.***> wrote:\n\n> We talked about this recently in Slack. An alternative that I like is\n> adding a BLOB type to the spec that is backed by a file. Then each\n> unstructured file is represented by a row in a table that can contain\n> metadata, and isn't just a file reference in an Iceberg manifest file.\n>\n> I think using a BLOB type is a simpler path to managing unstructured data\n> collections and end up delivering more features.\n>\n> â\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/issues/859#issuecomment-906794720>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABFQCZPQMGUKSPZUM4GFFODT63ARVANCNFSM4LRCNE2Q>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n-- \n- Ashish\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906802774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906815813","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906815813","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906815813,"node_id":"IC_kwDOCW7NX842DOlF","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T23:45:42Z","updated_at":"2021-08-26T23:45:42Z","author_association":"MEMBER","body":"I remember this, I forgot to note that I talked with the group internally who wanted this support. They basically had built very similar tooling although were building compressed binaries of all the files in a given addition to the table. So you could build a dataset by indicating which compressed binaries had the files you wanted along with the read offsets.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906815813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906816031","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906816031","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906816031,"node_id":"IC_kwDOCW7NX842DOof","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T23:46:23Z","updated_at":"2021-08-26T23:46:23Z","author_association":"MEMBER","body":"Discussion was in the non-apache Slack\r\n\r\nhttps://apache-iceberg.slack.com/archives/C025PH0G1D4/p1628242403033700","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906816031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906838745","html_url":"https://github.com/apache/iceberg/issues/859#issuecomment-906838745","issue_url":"https://api.github.com/repos/apache/iceberg/issues/859","id":906838745,"node_id":"IC_kwDOCW7NX842DULZ","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T00:47:52Z","updated_at":"2021-08-27T00:47:52Z","author_association":"CONTRIBUTOR","body":"Ah interesting, just joined the slack channel and found the thread, will\nfollow up there.\n\nBest Regards,\nAshish\n\n\nOn Thu, Aug 26, 2021 at 4:46 PM Russell Spitzer ***@***.***>\nwrote:\n\n> Discussion was in the non-apache Slack\n>\n> https://apache-iceberg.slack.com/archives/C025PH0G1D4/p1628242403033700\n>\n> â\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/issues/859#issuecomment-906816031>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABFQCZMH3MNL7NKIVVTLSC3T63G5TANCNFSM4LRCNE2Q>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906838745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906896926","html_url":"https://github.com/apache/iceberg/pull/3034#issuecomment-906896926","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3034","id":906896926,"node_id":"IC_kwDOCW7NX842DiYe","user":{"login":"hehuiyuan","id":18002496,"node_id":"MDQ6VXNlcjE4MDAyNDk2","avatar_url":"https://avatars.githubusercontent.com/u/18002496?v=4","gravatar_id":"","url":"https://api.github.com/users/hehuiyuan","html_url":"https://github.com/hehuiyuan","followers_url":"https://api.github.com/users/hehuiyuan/followers","following_url":"https://api.github.com/users/hehuiyuan/following{/other_user}","gists_url":"https://api.github.com/users/hehuiyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/hehuiyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hehuiyuan/subscriptions","organizations_url":"https://api.github.com/users/hehuiyuan/orgs","repos_url":"https://api.github.com/users/hehuiyuan/repos","events_url":"https://api.github.com/users/hehuiyuan/events{/privacy}","received_events_url":"https://api.github.com/users/hehuiyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:27:45Z","updated_at":"2021-08-27T03:28:39Z","author_association":"NONE","body":"Hi @JingsongLi @openinx ,  do you have any suggestions for this issueï¼","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906896926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906932513","html_url":"https://github.com/apache/iceberg/pull/3038#issuecomment-906932513","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3038","id":906932513,"node_id":"IC_kwDOCW7NX842DrEh","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T05:16:21Z","updated_at":"2021-08-27T05:16:21Z","author_association":"CONTRIBUTOR","body":"Here is a part of the optimized logical plan for a TPC-DS query (q18) on V1 tables:\r\n```\r\n+- Project [c_customer_sk#50, c_current_cdemo_sk#52, c_current_addr_sk#54, c_birth_year#63], Statistics(sizeInBytes=2.7 MiB)\r\n   +- Filter (((c_birth_month#62 IN (1,6,8,9,12,2) AND isnotnull(c_customer_sk#50)) AND isnotnull(c_current_cdemo_sk#52)) AND isnotnull(c_current_addr_sk#54)), Statistics(sizeInBytes=25.5 MiB)\r\n      +- Relation[c_customer_sk#50,c_customer_id#51,c_current_cdemo_sk#52,c_current_hdemo_sk#53,c_current_addr_sk#54,c_first_shipto_date_sk#55,c_first_sales_date_sk#56,c_salutation#57,c_first_name#58,c_last_name#59,c_preferred_cust_flag#60,c_birth_day#61,c_birth_month#62,c_birth_year#63,c_birth_country#64,c_login#65,c_email_address#66,c_last_review_date#67] parquet, Statistics(sizeInBytes=25.5 MiB)\r\n```\r\nThe customer table is 25.5 MiB but the Project plan (4 columns of the 18 columns of the customer table) is small enough to be broadcast.\r\nHere is the equivalent snippet for Iceberg tables before this change:\r\n```\r\n+- Project [c_customer_sk#59, c_current_cdemo_sk#61, c_current_addr_sk#63, c_birth_year#72], Statistics(sizeInBytes=21.9 MiB)\r\n   +- Filter (((c_birth_month#71 IN (1,6,8,9,12,2) AND isnotnull(c_customer_sk#59)) AND isnotnull(c_current_cdemo_sk#61)) AND isnotnull(c_current_addr_sk#63)), Statistics(sizeInBytes=25.5 MiB)\r\n      +- RelationV2[c_customer_sk#59, c_current_cdemo_sk#61, c_current_addr_sk#63, c_birth_month#71, c_birth_year#72] spark_catalog.tpcds_10_iceberg.customer, Statistics(sizeInBytes=25.5 MiB, rowCount=5.00E+5)\r\n```\r\nA read schema of 5 columns has already been pushed down to the Iceberg customer table, but the statistics for it is the full 25.5 MiB for the table. Consequently, the Project plan, which is estimated basically using the ratio of the size of the 4 columns to the size of the 5 columns times the 25.5 MiB, is too big to be broadcast.\r\nWith this change, the equivalent snippet becomes:\r\n```\r\n+- Project [c_customer_sk#59, c_current_cdemo_sk#61, c_current_addr_sk#63, c_birth_year#72], Statistics(sizeInBytes=2.0 MiB)\r\n   +- Filter (((c_birth_month#71 IN (1,6,8,9,12,2) AND isnotnull(c_customer_sk#59)) AND isnotnull(c_current_cdemo_sk#61)) AND isnotnull(c_current_addr_sk#63)), Statistics(sizeInBytes=2.4 MiB)\r\n      +- RelationV2[c_customer_sk#59, c_current_cdemo_sk#61, c_current_addr_sk#63, c_birth_month#71, c_birth_year#72] spark_catalog.tpcds_10_iceberg.customer, Statistics(sizeInBytes=2.4 MiB, rowCount=5.00E+5)\r\n```\r\nHere the statistics for the Iceberg customer table is adjusted according to read schema and is now 2.4 MiB, and the estimate for the Project adjusts it by the ratio of the size of the 4 columns to the size of the 5 columns, making it 2.0 MiB, and it can be broadcast.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906932513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906975677","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-906975677","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":906975677,"node_id":"IC_kwDOCW7NX842D1m9","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T07:03:10Z","updated_at":"2021-08-27T07:03:10Z","author_association":"CONTRIBUTOR","body":"I absolutely agree with you that flaky tests should be treated like bugs. The reason I brought up this retrying is that non-committers need to seek help from committers to restart CI when it fails due to potential flakiness in other parts that they haven't touched. Therefore it seemed reasonable to me to let CI run through and retry those flaky ones (and report them).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906975677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906989575","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-906989575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":906989575,"node_id":"IC_kwDOCW7NX842D5AH","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T07:26:55Z","updated_at":"2021-08-27T07:26:55Z","author_association":"CONTRIBUTOR","body":"How do we want to treat test failures in the future? Do we want to open a ticket when somebody runs into a non-related failing test + disable the test in the meantime until it's fixed?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906989575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906998384","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-906998384","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":906998384,"node_id":"IC_kwDOCW7NX842D7Jw","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T07:42:57Z","updated_at":"2021-08-27T07:42:57Z","author_association":"CONTRIBUTOR","body":"> How do we want to treat test failures in the future? Do we want to open a ticket when somebody runs into a non-related failing test + disable the test in the meantime until it's fixed?\r\n\r\nWe have a smaller, more tighter knit community here, and we usually were able to discuss and fix the issues as they were surfaced. Usually if someone found an issue, then they tried to fix it, or wrote to the dev list / created an issue and we were able to fix those without a formal process.\r\n\r\nIn Hive we have much bigger codebase and bigger number of contributors, so we have a more formal process:\r\n- We have a jenkins job which runs a specific test case 100 times, and if any of the runs fail we call the test flaky - we use it to confirm a flaky tests\r\n- If a test is confirmed flaky, we disable it (even without test runs)\r\n- We create a jira \"Reenable flaky test: ....\" and try to ping users who were working on the tests lately\r\n\r\nOTOH if we have a better codebase, like we have here in Iceberg, we might be better off identifying the commit which caused the flakiness and reverting it (or if the issue is not caused by the test, then fixing the bug).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/906998384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907199158","html_url":"https://github.com/apache/iceberg/issues/3042#issuecomment-907199158","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3042","id":907199158,"node_id":"IC_kwDOCW7NX842EsK2","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:22:01Z","updated_at":"2021-08-27T13:22:01Z","author_association":"MEMBER","body":"https://iceberg.apache.org/spark-procedures/#table-migration","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907199158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907203894","html_url":"https://github.com/apache/iceberg/issues/3042#issuecomment-907203894","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3042","id":907203894,"node_id":"IC_kwDOCW7NX842EtU2","user":{"login":"RamakrishnaChilaka","id":49393831,"node_id":"MDQ6VXNlcjQ5MzkzODMx","avatar_url":"https://avatars.githubusercontent.com/u/49393831?v=4","gravatar_id":"","url":"https://api.github.com/users/RamakrishnaChilaka","html_url":"https://github.com/RamakrishnaChilaka","followers_url":"https://api.github.com/users/RamakrishnaChilaka/followers","following_url":"https://api.github.com/users/RamakrishnaChilaka/following{/other_user}","gists_url":"https://api.github.com/users/RamakrishnaChilaka/gists{/gist_id}","starred_url":"https://api.github.com/users/RamakrishnaChilaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RamakrishnaChilaka/subscriptions","organizations_url":"https://api.github.com/users/RamakrishnaChilaka/orgs","repos_url":"https://api.github.com/users/RamakrishnaChilaka/repos","events_url":"https://api.github.com/users/RamakrishnaChilaka/events{/privacy}","received_events_url":"https://api.github.com/users/RamakrishnaChilaka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:29:09Z","updated_at":"2021-08-27T13:29:09Z","author_association":"NONE","body":"@RussellSpitzer , Thanks for this, I was wondering if we can write a dataframe in iceberg format into a folder ? please help. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907203894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907205576","html_url":"https://github.com/apache/iceberg/issues/3042#issuecomment-907205576","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3042","id":907205576,"node_id":"IC_kwDOCW7NX842EtvI","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:31:40Z","updated_at":"2021-08-27T13:31:40Z","author_association":"MEMBER","body":"Not sure exactly what you mean.\r\n\r\nIceberg tables have configurable location so you can put them wherever you like.\r\n\r\nThe link I provided above will let you migrate an existing Spark Compatible hive or pure file based table into an Iceberg table in the same location. Once the table is an iceberg table you can write to it with the \"Iceberg\" format in Spark or using the Spark3 DSV2 Catalog api.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907205576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907277450","html_url":"https://github.com/apache/iceberg/pull/2989#issuecomment-907277450","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2989","id":907277450,"node_id":"IC_kwDOCW7NX842E_SK","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T15:15:27Z","updated_at":"2021-08-27T15:15:27Z","author_association":"COLLABORATOR","body":"@stevenzwu thanks for the review.  I put back the one-file-per-partition, per commit/checkpoint.  Also I added some test cleanup as well in the failure case.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907277450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907300833","html_url":"https://github.com/apache/iceberg/pull/3038#issuecomment-907300833","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3038","id":907300833,"node_id":"IC_kwDOCW7NX842FE_h","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T15:51:18Z","updated_at":"2021-08-27T15:51:18Z","author_association":"CONTRIBUTOR","body":"@rdblue, @aokolnychyi, can you please review this? Can you also please enlighten me why we use record count * row size as the estimate for partitioned tables without filter expressions, but file sizes for unpartitioned tables or partitioned tables with filter expressions? Should we use the record count * row size everywhere?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907300833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907488427","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-907488427","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":907488427,"node_id":"IC_kwDOCW7NX842Fyyr","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T21:33:26Z","updated_at":"2021-08-27T21:33:26Z","author_association":"CONTRIBUTOR","body":"> How do we want to treat test failures in the future? Do we want to open a ticket when somebody runs into a non-related failing test + disable the test in the meantime until it's fixed?\r\n\r\nWanted to point out that I _believe_ CI can be forced to rerun by closing and reopening the PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907488427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]