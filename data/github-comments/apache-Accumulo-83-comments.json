[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059441564","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1059441564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1059441564,"node_id":"IC_kwDOACaFSM4_Jcuc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-04T19:11:47Z","updated_at":"2022-03-04T19:11:47Z","author_association":"CONTRIBUTOR","body":"> I'm not seeing the link between the code and the compaction not showing up in ZK.\r\n\r\nYeah I don't know how the `FileCompactor` was running without starting a FATE Tx. I am doing some tracing through the code, which is way more complicated in 2.1 and this is as far as I got:\r\n<pre>\r\nInternalCompactionExecutor.submit()\r\n- new InternalJob\r\n- threadPool.execute(internalJob);\r\nInternalJob\r\n- compactable.compact()\r\nCompactableImpl.compact()\r\n- stats = CompactableUtils.compact(tablet, job, cInfo, compactEnv, compactFiles, tmpFileName);\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059441564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059793157","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1059793157","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1059793157,"node_id":"IC_kwDOACaFSM4_KykF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-05T16:35:33Z","updated_at":"2022-03-05T16:35:33Z","author_association":"MEMBER","body":"> > I'm not seeing the link between the code and the compaction not showing up in ZK.\r\n> \r\n> Yeah I don't know how the `FileCompactor` was running without starting a FATE Tx. I am doing some tracing through the code, which is way more complicated in 2.1 and this is as far as I got:\r\n\r\nI thought FaTE was only used to coordinate/schedule user-initiated compactions. Regular compactions due to a trigger in the compaction strategy inside a tserver shouldn't need FaTE to compact. The tserver can handle those on their own. Did something change in this regard? Or am I misunderstanding how this is supposed to work? Was this apparent bug observed for a user-initiated compaction?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059793157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059825271","html_url":"https://github.com/apache/accumulo/pull/2541#issuecomment-1059825271","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2541","id":1059825271,"node_id":"IC_kwDOACaFSM4_K6Z3","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-05T20:13:56Z","updated_at":"2022-03-05T20:13:56Z","author_association":"CONTRIBUTOR","body":"Just to note, most of the suggestions for `FateCommand` will be altered quite a bit in #2215. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059825271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059845842","html_url":"https://github.com/apache/accumulo/pull/2541#issuecomment-1059845842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2541","id":1059845842,"node_id":"IC_kwDOACaFSM4_K_bS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-05T22:56:13Z","updated_at":"2022-03-05T22:56:13Z","author_association":"MEMBER","body":"> Just to note, most of the suggestions for `FateCommand` will be altered quite a bit in #2215.\r\n\r\nShould this be collapsed into that, then? Do we still need this if it's going to be superseded by that? @milleruntime , thoughts?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059845842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059969929","html_url":"https://github.com/apache/accumulo/pull/2541#issuecomment-1059969929","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2541","id":1059969929,"node_id":"IC_kwDOACaFSM4_LduJ","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-06T14:10:55Z","updated_at":"2022-03-06T18:32:04Z","author_association":"CONTRIBUTOR","body":"> Should this be collapsed into that, then? Do we still need this if it's going to be superseded by that?\r\n\r\nThe other changes in this PR, specifically the test, are still valuable to have. I am currently working on incorporating changes from this PR into #2215. This PR can be merged in first and then it should be a smooth transition to #2215. Converting the test to work with the API additions in #2215 has taken longer than expected. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1059969929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060695879","html_url":"https://github.com/apache/accumulo/issues/2474#issuecomment-1060695879","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2474","id":1060695879,"node_id":"IC_kwDOACaFSM4_OO9H","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T13:36:47Z","updated_at":"2022-03-07T13:36:47Z","author_association":"CONTRIBUTOR","body":"I think if we inserted a `sync` [here](https://github.com/apache/accumulo/blob/main/test/src/main/java/org/apache/accumulo/test/fate/zookeeper/FateIT.java#L152), that might solve the problem.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060695879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060713495","html_url":"https://github.com/apache/accumulo/issues/2474#issuecomment-1060713495","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2474","id":1060713495,"node_id":"IC_kwDOACaFSM4_OTQX","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T13:56:10Z","updated_at":"2022-03-07T13:56:10Z","author_association":"MEMBER","body":"I'm pretty sure we'd have to do it before each call to get the status, since the status is updated in a separate thread by a different ZK client. However, we don't need to have all the lines I had. I was told that the path parameter wasn't really used, but from my experimentation, it seemed that the path did need to exist at least. So, using one sync call to the \"/\" path should suffice inside the get status method.\r\n\r\n> I could be mis-remembering - but fateTransactionStatus is for metrics. (added 1.10?)\r\n\r\nIt might be used for that, but in this test, it's being used to check for expected progress through the FaTE lifecycle.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060713495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060718396","html_url":"https://github.com/apache/accumulo/issues/2474#issuecomment-1060718396","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2474","id":1060718396,"node_id":"IC_kwDOACaFSM4_OUc8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T14:01:20Z","updated_at":"2022-03-07T14:01:20Z","author_association":"CONTRIBUTOR","body":"> I'm pretty sure we'd have to do it before each call to get the status\r\n\r\n Agreed, I just saw it fail when checking the status the 3rd time, which means it found the node the first two times, but not the third.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060718396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060736248","html_url":"https://github.com/apache/accumulo/issues/2474#issuecomment-1060736248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2474","id":1060736248,"node_id":"IC_kwDOACaFSM4_OYz4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T14:18:55Z","updated_at":"2022-03-07T14:18:55Z","author_association":"CONTRIBUTOR","body":"So, I changed the test method to:\r\n\r\n```\r\n  private static TStatus getTxStatus(ZooReaderWriter zrw, long txid)\r\n      throws KeeperException, InterruptedException {\r\n    String txdir = String.format(\"%s%s/tx_%016x\", ZK_ROOT, Constants.ZFATE, txid);\r\n    zrw.getZooKeeper().sync(txdir, null, null);\r\n    return TStatus.valueOf(new String(zrw.getData(txdir), UTF_8));\r\n  }\r\n```\r\n\r\nSubsequent tests both succeeded and failed. Looking at the `sync` javadoc, it's asynchronous. :-(","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060736248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060847304","html_url":"https://github.com/apache/accumulo/pull/2546#issuecomment-1060847304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2546","id":1060847304,"node_id":"IC_kwDOACaFSM4_Oz7I","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T16:00:40Z","updated_at":"2022-03-07T16:00:40Z","author_association":"CONTRIBUTOR","body":"Related to #2474 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060847304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060939313","html_url":"https://github.com/apache/accumulo/pull/2537#issuecomment-1060939313","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2537","id":1060939313,"node_id":"IC_kwDOACaFSM4_PKYx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T17:27:43Z","updated_at":"2022-03-07T17:27:43Z","author_association":"CONTRIBUTOR","body":"Without the log4j-test.properties file I am not seeing logs if I run tests in an IDE.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1060939313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061002507","html_url":"https://github.com/apache/accumulo/issues/946#issuecomment-1061002507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/946","id":1061002507,"node_id":"IC_kwDOACaFSM4_PZ0L","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T18:34:30Z","updated_at":"2022-03-07T18:34:30Z","author_association":"CONTRIBUTOR","body":"#2524 added the monitoring of critical background threads, throwing an Error in the event that a critical background thread terminated abnormally. @EdColeman  - do you think #2524 and the other merged PRs linked here are sufficient to close this issue?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061002507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061061376","html_url":"https://github.com/apache/accumulo/issues/946#issuecomment-1061061376","issue_url":"https://api.github.com/repos/apache/accumulo/issues/946","id":1061061376,"node_id":"IC_kwDOACaFSM4_PoMA","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T19:38:06Z","updated_at":"2022-03-07T19:38:06Z","author_association":"CONTRIBUTOR","body":"This was originally proposed as metrics / monitoring at a level such that operator and app developers could gain insight into overall health and trends.  Having the threads throw exceptions is great. But, this was more directed to allowing monitoring and trending of higher level functions - things that could be using multiple threads.  @keith-turner provided some concrete examples. Knowing that the expected threads in the TabletGroupWatcher are running and possibly timing how long each run takes would allow metrics alerting and trending.\r\n\r\nThis is speculation and more of an description of something desired rather than a concrete example that I know happens.  But assume that the thread handling user tablet assignments gets stuck or dies - if the manager keeps running then that is going to eventually be noticed through secondary effects - maybe its FATEs on table creates hang and backup or fail? Or its splits that start failing,...  Exposing that function as a reportable metric could allow intervention sooner - or maybe it could be trended and if the thread starts taking longer and longer to run one could look what has changed and fix something before it falls over.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061061376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061224067","html_url":"https://github.com/apache/accumulo/pull/2475#issuecomment-1061224067","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2475","id":1061224067,"node_id":"IC_kwDOACaFSM4_QP6D","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-07T22:55:18Z","updated_at":"2022-03-07T22:55:18Z","author_association":"CONTRIBUTOR","body":"> @keith-turner I ran into a dependency snag. The FateCommand uses a bunch of Fate types and is in the Shell package. Moving the Fate stuff to manager, breaks this. I don't know of a good solution other than rewrite FateCommand and make new types that use API. Any ideas?\r\n\r\n@milleruntime I missed this comment.  I have not looked at this in a while, I can take a fresh look at it.  Is this PR in a state where you want a review or are you still changing some things?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061224067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061714928","html_url":"https://github.com/apache/accumulo/pull/2475#issuecomment-1061714928","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2475","id":1061714928,"node_id":"IC_kwDOACaFSM4_SHvw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T12:14:30Z","updated_at":"2022-03-08T12:14:30Z","author_association":"CONTRIBUTOR","body":"> > @keith-turner I ran into a dependency snag. The FateCommand uses a bunch of Fate types and is in the Shell package. Moving the Fate stuff to manager, breaks this. I don't know of a good solution other than rewrite FateCommand and make new types that use API. Any ideas?\r\n> \r\n> @milleruntime I missed this comment. I have not looked at this in a while, I can take a fresh look at it. Is this PR in a state where you want a review or are you still changing some things?\r\n\r\nYeah it is in a good state, if you want to take a look at it. This PR isn't a priority though as it will probably have to go into 3.0. I pulled some of these changes out into https://github.com/apache/accumulo/pull/2541. Also, @Manno15 is working on changes here: https://github.com/apache/accumulo/pull/2215, which should be able to get into 2.1 but have some new API additions you might want to look at as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061714928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061791145","html_url":"https://github.com/apache/accumulo/issues/2474#issuecomment-1061791145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2474","id":1061791145,"node_id":"IC_kwDOACaFSM4_SaWp","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T13:43:34Z","updated_at":"2022-03-08T13:43:34Z","author_association":"MEMBER","body":"> So, I changed the test method to:\r\n> \r\n> ```\r\n>   private static TStatus getTxStatus(ZooReaderWriter zrw, long txid)\r\n>       throws KeeperException, InterruptedException {\r\n>     String txdir = String.format(\"%s%s/tx_%016x\", ZK_ROOT, Constants.ZFATE, txid);\r\n>     zrw.getZooKeeper().sync(txdir, null, null);\r\n>     return TStatus.valueOf(new String(zrw.getData(txdir), UTF_8));\r\n>   }\r\n> ```\r\n> \r\n> Subsequent tests both succeeded and failed. Looking at the `sync` javadoc, it's asynchronous. :-(\r\n\r\nRight, so, we gotta create a callback to sync the sync :smiley_cat:\r\nI forgot to mention that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061791145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061817465","html_url":"https://github.com/apache/accumulo/pull/2537#issuecomment-1061817465","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2537","id":1061817465,"node_id":"IC_kwDOACaFSM4_Sgx5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T14:09:23Z","updated_at":"2022-03-08T14:09:23Z","author_association":"MEMBER","body":"> Without the log4j-test.properties file I am not seeing logs if I run tests in an IDE.\r\n\r\nThanks @EdColeman . Fixed differently in #2548 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061817465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061822359","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1061822359","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1061822359,"node_id":"IC_kwDOACaFSM4_Sh-X","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T14:14:33Z","updated_at":"2022-03-08T14:14:33Z","author_association":"CONTRIBUTOR","body":"> I thought FaTE was only used to coordinate/schedule user-initiated compactions. Regular compactions due to a trigger in the compaction strategy inside a tserver shouldn't need FaTE to compact. The tserver can handle those on their own. Did something change in this regard? Or am I misunderstanding how this is supposed to work?\r\n\r\nNo, you are correct. \r\n\r\n> Was this apparent bug observed for a user-initiated compaction?\r\n\r\nI am pretty sure it was a user compaction, with the testing I was doing. But it is possible it was a system compaction.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061822359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061906696","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1061906696","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1061906696,"node_id":"IC_kwDOACaFSM4_S2kI","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T15:33:51Z","updated_at":"2022-03-08T15:33:51Z","author_association":"CONTRIBUTOR","body":"OK I think I know what is going on. Steps to reproduce (still not sure if there is a bug though)\r\n\r\n1. Create CI table with SlowIterator configured on MajC and test jar copied into accumulo lib\r\n2. Ingest some data (enough to trigger system compact)\r\n3. From the shell, run `compact -t ci`\r\n4. Run `listcompactions` to see that there are only system compactions running\r\n5. Run `fate print` to see the fate TX has started for the user compaction\r\n\r\nCI table config:\r\n<pre>\r\ntserver.compaction.major.service.cs1.planner.opts.executors=[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\ntable      | table.iterator.majc.slow .................. | 1,org.apache.accumulo.test.functional.SlowIterator\r\ntable      | table.iterator.majc.slow.opt.sleepTime .... | 5\r\n</pre>\r\nEach of the 2 tservers has 10 MajC compactions running on each, with 8 queued each (according to the Monitor). But its more like 24 according to `listcompactions` and the logs.\r\n<pre>\r\n10:27:46 {test-jar} ~/workspace/uno/install/logs/accumulo$ grep \"tablet.files\" *.log | grep \"Compacting 1\" | grep small | wc -l\r\n16\r\n10:27:59 {test-jar} ~/workspace/uno/install/logs/accumulo$ grep \"tablet.files\" *.log | grep \"Compacting 1\" | grep medium | wc -l\r\n8\r\n</pre>\r\n\r\nSo it looks like the user compaction gets thrown in the pot with all of the waiting system compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061906696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061919955","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1061919955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1061919955,"node_id":"IC_kwDOACaFSM4_S5zT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T15:45:32Z","updated_at":"2022-03-08T15:45:32Z","author_association":"CONTRIBUTOR","body":"The user compaction eventually makes it through:\r\n<pre>\r\nroot@uno> listcompactions\r\n SERVER               | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\n ip-10-113-12-25:9997 |    40m58s |  FULL | SYSTEM |  475K |  475K |              ci | 1<;79999999999999a5                      |     5 |   /1/default_tablet/A000001q.rf_tmp |        [] | {}\r\n ip-10-113-12-25:9997 |    40m19s | MAJOR | SYSTEM |  469K |  469K |              ci | 1;266666666666666a;2000000000000003      |     5 |        /1/t-000005m/C000002q.rf_tmp |        [] | {}\r\n ip-10-113-12-25:9997 |    40m17s | MAJOR | SYSTEM |  469K |  469K |              ci | 1;733333333333333e;6cccccccccccccd7      |     5 |        /1/t-000005y/C000002t.rf_tmp |        [] | {}\r\n ip-10-113-12-25:9997 |  12s128ms | MAJOR |   USER | 2.05K | 2.05K |              ci | 1;666666666666667;6000000000000009       |    10 |        /1/t-000005w/C00000it.rf_tmp |        [] | {}\r\nip-10-113-12-25:10000 |     2m45s | MAJOR |   USER | 31.7K | 31.7K |              ci | 1;399999999999999f;3333333333333338      |    10 |        /1/t-000005p/C00000fj.rf_tmp |        [] | {}\r\nip-10-113-12-25:10000 |     2m16s | MAJOR |   USER | 26.6K | 26.6K |              ci | 1;1333333333333335;0cccccccccccccce      |    10 |        /1/t-000005j/C00000fk.rf_tmp |        [] | {}\r\nip-10-113-12-25:10000 |      2m3s | MAJOR |   USER | 23.6K | 23.6K |              ci | 1;4000000000000006;399999999999999f      |    10 |        /1/t-000005q/C00000fl.rf_tmp |        [] | {}\r\nip-10-113-12-25:10000 |     1m43s | MAJOR |   USER | 19.5K | 19.5K |              ci | 1;59999999999999a2;533333333333333b      |    10 |        /1/t-000005u/C00000fm.rf_tmp |        [] | {}\r\nroot@uno> fate print\r\n2022-03-08T10:44:29,015 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mike/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\ntxid: 7bd4ad2463222699  status: IN_PROGRESS         op: CompactRange     locked: [R:+default, R:1] locking: []              top: CompactionDriver created: 2022-03-08T15:10:15.416Z\r\n 1 transactions\r\nroot@uno> \r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061919955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061934662","html_url":"https://github.com/apache/accumulo/pull/2546#issuecomment-1061934662","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2546","id":1061934662,"node_id":"IC_kwDOACaFSM4_S9ZG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T15:59:23Z","updated_at":"2022-03-08T15:59:23Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #2550 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061934662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061976510","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1061976510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1061976510,"node_id":"IC_kwDOACaFSM4_THm-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T16:40:02Z","updated_at":"2022-03-08T16:40:02Z","author_association":"CONTRIBUTOR","body":"I think I'm still unsure of what you were expecting to see that you are not seeing. If you want to test the user compaction without having to deal with the system compactions, just set the compaction ratio really high.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1061976510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062054623","html_url":"https://github.com/apache/accumulo/issues/2544#issuecomment-1062054623","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2544","id":1062054623,"node_id":"IC_kwDOACaFSM4_Tarf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T18:01:01Z","updated_at":"2022-03-08T18:01:01Z","author_association":"CONTRIBUTOR","body":"> I think I'm still unsure of what you were expecting to see that you are not seeing. If you want to test the user compaction without having to deal with the system compactions, just set the compaction ratio really high.\r\n\r\nThere isn't a bug. It would be nice to have some insight into the queued compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062054623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062239639","html_url":"https://github.com/apache/accumulo/pull/2475#issuecomment-1062239639","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2475","id":1062239639,"node_id":"IC_kwDOACaFSM4_UH2X","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-08T21:40:37Z","updated_at":"2022-03-08T21:40:37Z","author_association":"CONTRIBUTOR","body":"> > > @keith-turner I ran into a dependency snag. The FateCommand uses a bunch of Fate types and is in the Shell package. Moving the Fate stuff to manager, breaks this. I don't know of a good solution other than rewrite FateCommand and make new types that use API. Any ideas?\r\n> > \r\n> > \r\n> > @milleruntime I missed this comment. I have not looked at this in a while, I can take a fresh look at it. Is this PR in a state where you want a review or are you still changing some things?\r\n> \r\n> Yeah it is in a good state, if you want to take a look at it. This PR isn't a priority though as it will probably have to go into 3.0. I pulled some of these changes out into #2541. Also, @Manno15 is working on changes here: #2215, which should be able to get into 2.1 but have some new API additions you might want to look at as well.\r\n\r\nIf you want to wait for me to merge the latest changes in main, I am working on that now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062239639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062471775","html_url":"https://github.com/apache/accumulo/pull/2553#issuecomment-1062471775","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2553","id":1062471775,"node_id":"IC_kwDOACaFSM4_VAhf","user":{"login":"Codegass","id":10063370,"node_id":"MDQ6VXNlcjEwMDYzMzcw","avatar_url":"https://avatars.githubusercontent.com/u/10063370?v=4","gravatar_id":"","url":"https://api.github.com/users/Codegass","html_url":"https://github.com/Codegass","followers_url":"https://api.github.com/users/Codegass/followers","following_url":"https://api.github.com/users/Codegass/following{/other_user}","gists_url":"https://api.github.com/users/Codegass/gists{/gist_id}","starred_url":"https://api.github.com/users/Codegass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Codegass/subscriptions","organizations_url":"https://api.github.com/users/Codegass/orgs","repos_url":"https://api.github.com/users/Codegass/repos","events_url":"https://api.github.com/users/Codegass/events{/privacy}","received_events_url":"https://api.github.com/users/Codegass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T01:49:46Z","updated_at":"2022-03-09T02:09:32Z","author_association":"NONE","body":"> The benefit to these changes is not clear. It's a large change with very little benefit. The motivation seems highly subjective.\r\n\r\n@ctubbsii Thanks for the reply!\r\n\r\nThe motivation is to simplify this complicated test case and improve the readability for each test scenario. The original case is close to 100 lines of code. After refactoring, each new test case that split from the original case is simple and has a coherent goal. Each case has only about 15 lines of code and describes the test purpose in their test name.\r\n\r\nIn addition, each test case now will only fail due to one reason, the original test case could fail due to 10 reasons. When using this in the CI\\CD check, debug will be more straightforward. (Don't need to run the CI multiple times to locate every defect.)\r\n\r\nThis refactor splitting the test case is a time one effort, but it may benefit in the long term for the maintenance. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062471775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062504128","html_url":"https://github.com/apache/accumulo/pull/2553#issuecomment-1062504128","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2553","id":1062504128,"node_id":"IC_kwDOACaFSM4_VIbA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T02:55:42Z","updated_at":"2022-03-09T03:09:11Z","author_association":"MEMBER","body":"> > The benefit to these changes is not clear. It's a large change with very little benefit. The motivation seems highly subjective.\r\n> \r\n> The motivation is to simplify this complicated test case and improve the readability for each test scenario. The original case is close to 100 lines of code. After refactoring, each new test case that split from the original case is simple and has a coherent goal. Each case has only about 15 lines of code and describes the test purpose in their test name.\r\n\r\nYou changed 46 lines of code into 174 lines of code. The original code covered a bunch of trivial cases around a single method. That was more than sufficient, and it was sufficiently readable for its purpose as-is.\r\n\r\nYes, each new test is simpler on its own and covers a more granular test case, but that's not really all that beneficial. We care about test coverage, but we don't have a need for every test case to be that granular. We have thousands of test cases... if we were to break them all into this level of granularity, our code would become indiscriminately large and unwieldy.\r\n\r\n> In addition, each test case now will only fail due to one reason, the original test case could fail due to 10 reasons. When using this in the CI\\CD check, debug will be more straightforward. (Don't need to run the CI multiple times to locate every defect.)\r\n\r\nThis test never fails. Optimizing for failure makes no sense here. Debugging these has never been a problem. This test continues to exist to notify us of regressions. If it fails for any one of the 10 reasons, JUnit tells us the exact line number where it failed. That's more than sufficient to track it down in this case. I have literally spent more time reviewing this PR than I have spent debugging this test since it was added.\r\n\r\n> This refactor splitting the test case is a time one effort,\r\n\r\nIt's a huge and unnecessary one-time effort that doesn't benefit the project. But also, it's not a one-time effort. You also tried to do a similar change in PR #2540 that you subsequently closed (perhaps because you deleted your branch and it auto-closed?) and several other similar changes in branches in your fork (https://github.com/Codegass/accumulo/branches) preparing for other similar pull requests. These improvements don't seem to be part of any coherent plan to make substantive improvements to Accumulo. They appear to be arbitrarily conforming to an arbitrary style of unit test organization that has little to do with Accumulo's needs.\r\n\r\n>  but it may benefit in the long term for the maintenance.\r\n\r\nI'm very confident that no, it won't. At best, it will be neutral. But, at worst, accepting it would encourage more of these kinds of changes that don't really benefit the project, and waste developer time and resources to review.\r\n\r\n\r\nWe greatly appreciate that you have an interest in contributing to the project. Even though my words may sound harsh, I genuinely mean that. We always need motivated people, and you certainly seem motivated. But, I don't think we need changes like this. There's simply nobody vying for this kind of change. It's not needed, and it creates more work for the project developers to review, verify, and approve, with no clear substantive benefit to the project.\r\n\r\nIf you wish to contribute to this project, then instead of contributing changes like these, please consider investigating some of the open issues, or signing up for our mailing list and asking the community what kind of changes they believe would benefit the project, as a way to get started. If you think you have a good idea that isn't an existing issue, feel free to open a discussion thread on the mailing list to get feedback before you start on any big changes.\r\n\r\nAnd please, if you contribute further, please make sure your code actually builds before submitting a pull request. These changes fail at the compile step of our GitHub Actions checks. Those checks can run in your fork before submitting the PR, if you aren't able to run a build on a local development machine. The basic command to make sure everything builds and packages correctly in Maven would be: `mvn package -DskipTests`. If files are reformatted during this step, then make sure to check those in and include those changes in your contribution.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062504128/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062505934","html_url":"https://github.com/apache/accumulo/pull/2553#issuecomment-1062505934","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2553","id":1062505934,"node_id":"IC_kwDOACaFSM4_VI3O","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T03:00:08Z","updated_at":"2022-03-09T03:00:08Z","author_association":"MEMBER","body":"I'm going to close this PR based on my above comments. If other PMC members feel these changes are desired, please feel free to re-open.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062505934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062511352","html_url":"https://github.com/apache/accumulo/pull/2553#issuecomment-1062511352","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2553","id":1062511352,"node_id":"IC_kwDOACaFSM4_VKL4","user":{"login":"Codegass","id":10063370,"node_id":"MDQ6VXNlcjEwMDYzMzcw","avatar_url":"https://avatars.githubusercontent.com/u/10063370?v=4","gravatar_id":"","url":"https://api.github.com/users/Codegass","html_url":"https://github.com/Codegass","followers_url":"https://api.github.com/users/Codegass/followers","following_url":"https://api.github.com/users/Codegass/following{/other_user}","gists_url":"https://api.github.com/users/Codegass/gists{/gist_id}","starred_url":"https://api.github.com/users/Codegass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Codegass/subscriptions","organizations_url":"https://api.github.com/users/Codegass/orgs","repos_url":"https://api.github.com/users/Codegass/repos","events_url":"https://api.github.com/users/Codegass/events{/privacy}","received_events_url":"https://api.github.com/users/Codegass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T03:12:17Z","updated_at":"2022-03-09T03:12:17Z","author_association":"NONE","body":"Thanks for the reply, it is very helpful for me to understand the whole picture of the project contribution and the maintainer's concern , I will take time to re-think about the refactor-pr. \r\n\r\nHope I can contribute the proper one in the near future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062511352/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062594002","html_url":"https://github.com/apache/accumulo/issues/2555#issuecomment-1062594002","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2555","id":1062594002,"node_id":"IC_kwDOACaFSM4_VeXS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T06:24:56Z","updated_at":"2022-03-09T06:24:56Z","author_association":"MEMBER","body":"I don't know about ShellServerIT, but I looked into RowHashIT, and ended up filing a bug upstream at [SUREFIRE-2035](https://issues.apache.org/jira/browse/SUREFIRE-2035) with an explanation of why I think this is happening.\r\n\r\nRowHashIT launches a new process using `RowHash.main()` and the current test's class path. Here's the stack trace in the launched process that shows it is unable to find the classes that are in the main jar artifact for this module... something that should definitely be available on the test class path:\r\n\r\n```java\r\n[main] WARN  org.apache.accumulo.start.classloader.AccumuloClassLoader [] - 'general.classpaths' is deprecated but was set to '/home/christopher/git/apache/accumulo/accumulo/hadoop-mapreduce/target/mini-tests/org.apache.accumulo.hadoop.its.mapreduce.RowHashIT_test/lib/[^.].*[.]jar' \r\n[org.apache.accumulo.hadoop.its.mapreduce.RowHashIT$RowHash] ERROR org.apache.accumulo.start.Main [] - Thread 'org.apache.accumulo.hadoop.its.mapreduce.RowHashIT$RowHash' died.\r\njava.lang.NoClassDefFoundError: org/apache/accumulo/hadoopImpl/mapreduce/lib/MapReduceClientOpts       \r\n  at java.lang.ClassLoader.defineClass1(Native Method) ~[?:?]                                          \r\n  at java.lang.ClassLoader.defineClass(ClassLoader.java:1017) ~[?:?]                                   \r\n  at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174) ~[?:?]                    \r\n  at jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800) ~[?:?]            \r\n  at jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698) ~[?:?]\r\n  at jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[?:?]        \r\n  at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[?:?]              \r\n  at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[?:?]           \r\n  at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?]                                      \r\n  at org.apache.accumulo.hadoop.its.mapreduce.RowHashIT$RowHash.run(RowHashIT.java:145) ~[test-classes/:?]\r\n  at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76) ~[hadoop-client-api-3.3.0.jar:?]        \r\n  at org.apache.accumulo.hadoop.its.mapreduce.RowHashIT$RowHash.main(RowHashIT.java:172) ~[test-classes/:?]\r\n  at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]                       \r\n  at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]  \r\n  at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n  at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]                                           \r\n  at org.apache.accumulo.start.Main.lambda$execMainClass$1(Main.java:163) ~[accumulo-start-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n  at java.lang.Thread.run(Thread.java:829) ~[?:?]                                                      \r\nCaused by: java.lang.ClassNotFoundException: org.apache.accumulo.hadoopImpl.mapreduce.lib.MapReduceClientOpts\r\n  at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581) ~[?:?]              \r\n  at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[?:?]           \r\n  at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?]                                      \r\n  ... 18 more   \r\n```\r\n\r\nI set up a few strategic `System.err.println(System.getProperty(\"java.class.path\"));` lines and was able to confirm that `accumulo-hadoop-mapreduce-2.1.0-SNAPSHOT.jar` is on the class path for 3.0.0-M4, but not for 3.0.0-M5. I have no idea why, or even how the tests still work without the main jar on the class path. I think maven-failsafe-plugin is doing something funny with its own class loader to filter out the main jar artifact for the module and provide those classes through its own class loader... or something crazy like that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1062594002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063172826","html_url":"https://github.com/apache/accumulo/pull/2549#issuecomment-1063172826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2549","id":1063172826,"node_id":"IC_kwDOACaFSM4_Xrra","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T17:24:48Z","updated_at":"2022-03-09T17:24:48Z","author_association":"MEMBER","body":"LGTM. I have verified all tests pass.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063172826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063285030","html_url":"https://github.com/apache/accumulo/pull/2557#issuecomment-1063285030","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2557","id":1063285030,"node_id":"IC_kwDOACaFSM4_YHEm","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T19:33:20Z","updated_at":"2022-03-09T19:33:20Z","author_association":"CONTRIBUTOR","body":"I mistakenly thought the FutureReturnValueIgnored pattern was an ErrorProne error by default, but it is actually just a warning. But it is a warning we wish to check for, therefore the line cannot be removed. The PR will be close without implementation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063285030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063318686","html_url":"https://github.com/apache/accumulo/pull/2558#issuecomment-1063318686","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2558","id":1063318686,"node_id":"IC_kwDOACaFSM4_YPSe","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T20:07:10Z","updated_at":"2022-03-09T20:08:00Z","author_association":"CONTRIBUTOR","body":"I put this PR in as a consideration as I am trying to remove ErrorProne errors without having to put an exception in the configuration. In order to do so, instances of method that are non-void must either use/check the return value or specifically acknowlege the return values are unused. \r\n\r\nIf this PR add too much 'wordiness' to the code then we can continue to keep the two checks turned off within the ErrorProne configuration and ignore this PR. \r\n\r\nLet me know your thoughts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063318686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063352976","html_url":"https://github.com/apache/accumulo/pull/2556#issuecomment-1063352976","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2556","id":1063352976,"node_id":"IC_kwDOACaFSM4_YXqQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T20:42:47Z","updated_at":"2022-03-09T20:42:47Z","author_association":"MEMBER","body":"@jmark99 I don't think you ever answered my question at https://github.com/apache/accumulo/pull/2551#discussion_r822894763 or when I made the same observation earlier at https://github.com/apache/accumulo/pull/2551#discussion_r821784698\r\nThere are still no test cases where `null` is used as the host, and I'm not sure if this comparator will handle that case very nicely.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1063352976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064115545","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1064115545","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1064115545,"node_id":"IC_kwDOACaFSM4_bR1Z","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T14:21:49Z","updated_at":"2022-03-10T14:25:33Z","author_association":"CONTRIBUTOR","body":"The latest commit fixed the new merge conflicts. This PR is now more a WIP. Several changes to FateCommand has happened and this will need to be further tested to make sure everything still works. Also, the `FateCommandTest` needs further changes due to the API changes and removal of `SiteConfiguration` from FateCommand. It might make sense for the test to be moved to an IT.  Thoughts on the test @milleruntime? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064115545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064125492","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1064125492","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1064125492,"node_id":"IC_kwDOACaFSM4_bUQ0","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T14:31:19Z","updated_at":"2022-03-10T14:31:19Z","author_association":"CONTRIBUTOR","body":"The build errors are because I have parts of the test commented out for the moment. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064125492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064134839","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1064134839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1064134839,"node_id":"IC_kwDOACaFSM4_bWi3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T14:40:49Z","updated_at":"2022-03-10T14:40:49Z","author_association":"CONTRIBUTOR","body":"> The latest commit fixed the new merge conflicts. This PR is now more a WIP. Several changes to FateCommand has happened and this will need to be further tested to make sure everything still works. Also, the `FateCommandTest` needs further changes due to the API changes and removal of `SiteConfiguration` from FateCommand. It might make sense for the test to be moved to an IT. Thoughts on the test @milleruntime?\r\n\r\nPossibly. But I just created `FateCommandTest` to have as a unit test since we had nothing before. I have more changes with my refactor in https://github.com/apache/accumulo/pull/2475","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064134839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064239146","html_url":"https://github.com/apache/accumulo/issues/2561#issuecomment-1064239146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2561","id":1064239146,"node_id":"IC_kwDOACaFSM4_bwAq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T16:18:50Z","updated_at":"2022-03-10T16:18:50Z","author_association":"CONTRIBUTOR","body":"IIRC, the thing that is queued is that a tablet needs compacting. The actual details, which files are going to be compacted, are determined later when it's going to be run. Something to keep in mind is that if external compactions are enabled, then a queued compaction on a tserver may not get run on the tserver.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064239146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064261066","html_url":"https://github.com/apache/accumulo/pull/2562#issuecomment-1064261066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2562","id":1064261066,"node_id":"IC_kwDOACaFSM4_b1XK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T16:32:56Z","updated_at":"2022-03-10T16:32:56Z","author_association":"CONTRIBUTOR","body":"Output looks like:\r\n```\r\nusage: fate [-?] [-cancel <txid> | -delete <txid> | -dump <txid> | -fail <txid> | -list <txid> | -print <txid>]     [-np]  [-s <arg>] [-t <arg>]\r\ndescription: manage FATE transactions\r\n  -?,--help                             display this help\r\n  -cancel,--cancel-submitted <txid>     cancel new or submitted FaTE transactions\r\n  -delete,--delete <txid>               delete locks associated with FaTE transactions (requires Manager to be down)\r\n  -dump,--dump <txid>                   dump FaTE transaction information details\r\n  -fail,--fail <txid>                   Transition FaTE transaction status to FAILED_IN_PROGRESS (requires Manager to be down)\r\n  -list,--list <txid>                   print FaTE transaction information\r\n  -np,--no-pagination                   disables pagination of output\r\n  -print,--print <txid>                 print FaTE transaction information\r\n  -s,--secret <arg>                     specify the instance secret to use\r\n  -t,--status-type <arg>                filter 'print' on the transaction status type(s) {NEW, SUBMITTED, IN_PROGRESS, FAILED_IN_PROGRESS, FAILED, SUCCESSFUL}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064261066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064298149","html_url":"https://github.com/apache/accumulo/issues/2555#issuecomment-1064298149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2555","id":1064298149,"node_id":"IC_kwDOACaFSM4_b-al","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T17:09:39Z","updated_at":"2022-03-10T17:11:18Z","author_association":"MEMBER","body":"So, with M4, I was able to get the changed tests from #2545 to run with surefire by adding the `junit-jupiter-engine` dependency to the accumulo-test pom. With that change, everything seems to be working as expected so this isn't a pressing issue at the moment. It would probably be good to upgrade to M5 at some point regardless though to maybe this ticket should stay open.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064298149/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064472281","html_url":"https://github.com/apache/accumulo/pull/2545#issuecomment-1064472281","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2545","id":1064472281,"node_id":"IC_kwDOACaFSM4_co7Z","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-10T20:25:58Z","updated_at":"2022-03-10T20:25:58Z","author_association":"MEMBER","body":"I think this is ready for review. As far as I can tell, everything works as before with all tests passing. I know this is a huge PR to review so this might help when looking through:\r\n\r\n> Here are some quick notes that might help to reference for those who work on the migration or for reviewers.\r\n> \r\n> | JUnit4  | JUnit5  |\r\n> | ----------- | ----------- |\r\n> | `@Test` | `@Test` |\r\n> | `@Before` | `@BeforeEach` |\r\n> | `@After` | `@AfterEach` |\r\n> | `@BeforeClass` | `@BeforeAll` |\r\n> | `@AfterClass` | `AfterAll` |\r\n> | `@Ignore` | `@Disable` |\r\n> | `@Category` | `@Tag` |\r\n> \r\n> | | JUnit4  | JUnit5  |\r\n> | ----------- | ----------- | ----------- |\r\n> | Testing class package | `org.junit` | `org.junit.jupiter.api` |\r\n> | Assertions class | `Assert` | `Assertions` |\r\n> \r\n> `TemporaryFolder` was removed and instead a `File` or `Path` is used in JUnit5 with the `@TempDir` annotation.\r\n> \r\n> Additionally, the order of parameters in assert statements has changed. The optional message is now the last parameter rather than the first parameter. e.g. `assertTrue(\"should be equal\", 1==3)` becomes `assertTrue(1==3, \"should be equal\")`\r\n\r\n_Originally posted by @DomGarguilo in https://github.com/apache/accumulo/issues/2441#issuecomment-1041908425_\r\n\r\nIn addition to the things mentioned above, `@Category` has been replaced with `@Tag` which no longer requires an interface so those were deleted as well. This slightly changes how groups of tests are run. for example to run all tests annotated with the `ZooKeeperTestingServerTests` tag, you would run `mvn clean verify -Dtest=foo -Dfailsafe.groups=ZooKeeperTestingServerTests -Dspotbugs.skip` where as previously you would have to specify the category package i.e., `mvn clean verify -Dtest=foo -Dfailsafe.groups=org.apache.accumulo.test.categories.ZooKeeperTestingServerTests -Dspotbugs.skip`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1064472281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065295371","html_url":"https://github.com/apache/accumulo/issues/2561#issuecomment-1065295371","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2561","id":1065295371,"node_id":"IC_kwDOACaFSM4_fx4L","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-11T16:49:29Z","updated_at":"2022-03-11T16:49:29Z","author_association":"CONTRIBUTOR","body":"Per executor metrics for running and queued are emitted for each tserver.  I think that is done by [this code](https://github.com/apache/accumulo/blob/main/server/tserver/src/main/java/org/apache/accumulo/tserver/metrics/CompactionExecutorsMetrics.java).  The blog post about external compactions plotted these metrics in the [ingest section](https://accumulo.apache.org/blog/2021/07/08/external-compactions.html#ingesting-data), in that section look for the compaction queued plot and the description under it.  We also have documentation that [briefly mentions these metrics exists](https://github.com/apache/accumulo-website/blob/next-release/_docs-2/administration/compaction.md#metrics), however it does not give any information about how to use them. Would these metrics meet your needs?  If your are looking for detailed info about what is qeueud (like tablets and files to compact, which subject to change at any time before it runs like Dave mentioned) then would possibly need new APIs to expose this information to the shell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065295371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065315737","html_url":"https://github.com/apache/accumulo/issues/2561#issuecomment-1065315737","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2561","id":1065315737,"node_id":"IC_kwDOACaFSM4_f22Z","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-11T17:14:09Z","updated_at":"2022-03-11T17:14:09Z","author_association":"CONTRIBUTOR","body":"+1 for leveraging metrics.  If this information is useful (and I think it is) making it externally available via metrics makes it possible for monitoring, alerting and possibly trending.  While it could be useful to have the values available via the shell during troubleshooting and development - operators should not need to use the shell to perform routine monitoring.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065315737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065368402","html_url":"https://github.com/apache/accumulo/pull/2558#issuecomment-1065368402","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2558","id":1065368402,"node_id":"IC_kwDOACaFSM4_gDtS","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-11T18:21:33Z","updated_at":"2022-03-11T18:21:33Z","author_association":"CONTRIBUTOR","body":"With the current changes it is possible to remove the EP exceptions in the configuration for both CheckReturnValue error and ReturnValueIgnored warning. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1065368402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1067883187","html_url":"https://github.com/apache/accumulo/pull/2346#issuecomment-1067883187","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2346","id":1067883187,"node_id":"IC_kwDOACaFSM4_ppqz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T11:30:41Z","updated_at":"2022-03-15T11:30:41Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of #2554 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1067883187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1067885376","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-1067885376","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":1067885376,"node_id":"IC_kwDOACaFSM4_pqNA","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T11:33:32Z","updated_at":"2022-03-15T11:33:32Z","author_association":"CONTRIBUTOR","body":"#2554 includes a change in 2.1.0 that provides a default UncaughtExceptionHandler in the client that only logs exceptions / errors, it does not terminate the VM like the AccumuloUncaughtExceptionHandler does on the server side. #2554 also provides the user the ability to supply their own UncaughtExceptionHandler implementation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1067885376/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068002926","html_url":"https://github.com/apache/accumulo/pull/2565#issuecomment-1068002926","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2565","id":1068002926,"node_id":"IC_kwDOACaFSM4_qG5u","user":{"login":"AlbertWhitlock","id":40367659,"node_id":"MDQ6VXNlcjQwMzY3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/40367659?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbertWhitlock","html_url":"https://github.com/AlbertWhitlock","followers_url":"https://api.github.com/users/AlbertWhitlock/followers","following_url":"https://api.github.com/users/AlbertWhitlock/following{/other_user}","gists_url":"https://api.github.com/users/AlbertWhitlock/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbertWhitlock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbertWhitlock/subscriptions","organizations_url":"https://api.github.com/users/AlbertWhitlock/orgs","repos_url":"https://api.github.com/users/AlbertWhitlock/repos","events_url":"https://api.github.com/users/AlbertWhitlock/events{/privacy}","received_events_url":"https://api.github.com/users/AlbertWhitlock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T13:41:45Z","updated_at":"2022-03-15T13:41:45Z","author_association":"CONTRIBUTOR","body":"I reviewed all the changes in this PR. They all look right to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068002926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068077058","html_url":"https://github.com/apache/accumulo/pull/2563#issuecomment-1068077058","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2563","id":1068077058,"node_id":"IC_kwDOACaFSM4_qZAC","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T14:51:12Z","updated_at":"2022-03-15T14:51:12Z","author_association":"CONTRIBUTOR","body":"You guys OK with this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068077058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068145637","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1068145637","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1068145637,"node_id":"IC_kwDOACaFSM4_qpvl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T15:48:09Z","updated_at":"2022-03-15T15:48:09Z","author_association":"CONTRIBUTOR","body":"The error printed is a new consistency check added in 2.1. I think it was added in #2320 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068145637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068313033","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1068313033","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1068313033,"node_id":"IC_kwDOACaFSM4_rSnJ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T18:20:31Z","updated_at":"2022-03-15T18:20:31Z","author_association":"CONTRIBUTOR","body":"Saw this error again with another table and with the metadata table. `Data files in !0;~< differ from in-memory data`\r\nIs this a problem? I am not sure. Maybe it should just be a warning.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068313033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068341990","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1068341990","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1068341990,"node_id":"IC_kwDOACaFSM4_rZrm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T18:50:16Z","updated_at":"2022-03-15T18:50:16Z","author_association":"MEMBER","body":"Have you been able to determine what circumstances cause them to be inconsistent? Is it just routine after a compaction? Is it consistent eventually? If they aren't consistent, which side has the missing references?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068341990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068415311","html_url":"https://github.com/apache/accumulo/pull/2568#issuecomment-1068415311","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2568","id":1068415311,"node_id":"IC_kwDOACaFSM4_rrlP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T20:02:50Z","updated_at":"2022-03-15T20:02:50Z","author_association":"MEMBER","body":"I found this test failure after #2554 was merged, because the thread pools for cleaning up were relocated to the client context, and the scanner was attempted to be closed (with a try-with-resources block) after the CleanUp utility closed the Connector in this test.\r\n\r\nReading the comments in the ScannerIterator close method, I was able to see that the purpose of these thread pools for the cleanup tasks is so closing these objects doesn't block. However, I'm not sure why that is necessary. I think this might have been written by @keith-turner , so perhaps he has some insight on why these must not block.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068415311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068553396","html_url":"https://github.com/apache/accumulo/pull/2568#issuecomment-1068553396","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2568","id":1068553396,"node_id":"IC_kwDOACaFSM4_sNS0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T23:14:31Z","updated_at":"2022-03-15T23:14:31Z","author_association":"MEMBER","body":"Responding to self:\r\n> However, I'm not sure why that is necessary. I think this might have been written by @keith-turner , so perhaps he has some insight on why these must not block.\r\n\r\nI was in a rush when I sent my earlier comment, so I'm not sure I was clear. Unless there's a really good reason, I'd be okay with making close block to dramatically simplify this code. I don't think that would be a problem because, if a user wanted a scanner to close in the background, they could always do that themselves. If that was the case, then correctness and resource management for that background close would be their responsibility. That said, I think this PR is sufficient for now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068553396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068620459","html_url":"https://github.com/apache/accumulo/pull/2568#issuecomment-1068620459","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2568","id":1068620459,"node_id":"IC_kwDOACaFSM4_sdqr","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T01:02:53Z","updated_at":"2022-03-16T01:02:53Z","author_association":"MEMBER","body":"All ITs passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1068620459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069024735","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069024735","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069024735,"node_id":"IC_kwDOACaFSM4_uAXf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T11:29:14Z","updated_at":"2022-03-16T11:29:14Z","author_association":"CONTRIBUTOR","body":"> Have you been able to determine what circumstances cause them to be inconsistent? \r\n\r\nNot exactly. It seems like this happened once resources got constrained. There is a chance it is related to this: https://github.com/apache/accumulo-testing/issues/196. I don't think it is a coincidence that the same table (multi_ip_10_113_12_25_17) that was the destination of the copyTool and took forever to copy was also the one that had this problem. The Copy started at `8:47:12`. It was taking a while but finished at `09:26:53`.\r\n\r\n> Is it just routine after a compaction? \r\n\r\nNo, I wouldn't call it routine behavior but I don't know if it is a problem. That tablet flushed and compacted successfully multiple times before that error.\r\n\r\n> Is it consistent eventually? If they aren't consistent, which side has the missing references?\r\n\r\nThe table seems to be functioning properly. But this isn't CI so I don't have a way to verify that no data was lost. I was thinking of adding a scanner node to the MultiTable test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069024735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069175637","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069175637","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069175637,"node_id":"IC_kwDOACaFSM4_ulNV","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T14:13:24Z","updated_at":"2022-03-16T14:13:24Z","author_association":"CONTRIBUTOR","body":"OK here is what was going on:\r\n<pre>\r\n2022-03-15T09:17:50,676 [memory.LargestFirstMemoryManager] DEBUG: COMPACTING 28;7;6  total = 272,062,261 ingestMemory = 90,808,517\r\ntserver1.log:2022-03-15T09:17:50,471 [tablet.Tablet] ERROR: Data files in 28;7;6 differ from in-memory data ...\r\ntserver1.log:2022-03-15T09:17:50,655 [tablet.files] DEBUG: Flushed 28;7;6 created hdfs://localhost:8020/accumulo/tables/28/t-00002pt/F00004hu.rf from [memory]\r\n</pre>\r\n\r\nThe reason for the difference between in-memory and on disk is because the file (F00004hu.rf) had not been flushed yet. Looking at the difference in the logs between the 2 sets of files (there were 160 r-files in each set), the second set of files (memory) was missing the file. In other words, the file was on disk but not in memory.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069175637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069192364","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069192364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069192364,"node_id":"IC_kwDOACaFSM4_upSs","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T14:29:52Z","updated_at":"2022-03-16T14:29:52Z","author_association":"MEMBER","body":"So, the tablet is responsible for handling the flush, so it is creating the file, so it should know about it already, but perhaps not in the \"in-memory\" structure that is being checked by this consistency check. It seems there's a deficiency in the consistency check and that check needs to be improved to include any other files the tablet knows about elsewhere in the tserver's in-memory structures.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069192364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069222310","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069222310","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069222310,"node_id":"IC_kwDOACaFSM4_uwmm","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T14:59:40Z","updated_at":"2022-03-16T14:59:40Z","author_association":"CONTRIBUTOR","body":"> So, the tablet is responsible for handling the flush, so it is creating the file, so it should know about it already, but perhaps not in the \"in-memory\" structure that is being checked by this consistency check. It seems there's a deficiency in the consistency check and that check needs to be improved to include any other files the tablet knows about elsewhere in the tserver's in-memory structures.\r\n\r\nYeah it seems like the new consistency check could be better. I am not sure how to do that though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069222310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069225905","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069225905","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069225905,"node_id":"IC_kwDOACaFSM4_uxex","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T15:02:58Z","updated_at":"2022-03-16T15:02:58Z","author_association":"MEMBER","body":"> Yeah it seems like the new consistency check could be better. I am not sure how to do that though.\r\n\r\nI'm not sure either, but I would start by trying to figure out where in the tserver code does it already have a record about the file being flushed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069225905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069228967","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1069228967","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1069228967,"node_id":"IC_kwDOACaFSM4_uyOn","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T15:06:04Z","updated_at":"2022-03-16T15:06:04Z","author_association":"CONTRIBUTOR","body":"> > Yeah it seems like the new consistency check could be better. I am not sure how to do that though.\r\n> \r\n> I'm not sure either, but I would start by trying to figure out where in the tserver code does it already have a record about the file being flushed.\r\n\r\nI pinged @keith-turner to see if he had any thoughts. I probably won't get to look at this until later in the week. I still think it should be a blocker though for 2.1. I would imagine this error happening a lot on a very active cluster. Plus the error sounds scary :fearful: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069228967/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069351375","html_url":"https://github.com/apache/accumulo/pull/2324#issuecomment-1069351375","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2324","id":1069351375,"node_id":"IC_kwDOACaFSM4_vQHP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T16:54:49Z","updated_at":"2022-03-16T16:54:49Z","author_association":"MEMBER","body":"This is replaced with #2569 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069351375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069408071","html_url":"https://github.com/apache/accumulo/pull/2545#issuecomment-1069408071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2545","id":1069408071,"node_id":"IC_kwDOACaFSM4_vd9H","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T18:14:16Z","updated_at":"2022-03-16T18:14:16Z","author_association":"MEMBER","body":"@ctubbsii I think I addressed all the comments you had in [c150728](https://github.com/apache/accumulo/pull/2545/commits/c1507285b4f52785d4c3e4b9fc6ab3ad17b32185)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069408071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069591446","html_url":"https://github.com/apache/accumulo/pull/2545#issuecomment-1069591446","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2545","id":1069591446,"node_id":"IC_kwDOACaFSM4_wKuW","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T20:26:23Z","updated_at":"2022-03-16T20:26:23Z","author_association":"MEMBER","body":"> I think this is all good now, but I want to run my own full IT build before it is merged, just to be sure.\r\n\r\nSounds good. Thanks for your review and feel free to merge this PR after your testing, if you would like to.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069591446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069681295","html_url":"https://github.com/apache/accumulo/issues/1647#issuecomment-1069681295","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1647","id":1069681295,"node_id":"IC_kwDOACaFSM4_wgqP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-16T22:06:51Z","updated_at":"2022-03-16T22:06:51Z","author_association":"MEMBER","body":"> Should this ticket be closed/renamed? The referenced failing tests were removed in [aef266c](https://github.com/apache/accumulo/commit/aef266c31c8a0dfbec163135c5a21606aa038344).\r\n\r\nCreated #2570","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1069681295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1070900506","html_url":"https://github.com/apache/accumulo/issues/2567#issuecomment-1070900506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2567","id":1070900506,"node_id":"IC_kwDOACaFSM4_1KUa","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T13:02:51Z","updated_at":"2022-03-17T16:05:31Z","author_association":"CONTRIBUTOR","body":"It could be that we are just doing the check too often. We are currently calling it in 2 places:\r\n\r\n- [Tablet.closeConsistencyCheck()](https://github.com/apache/accumulo/blob/6f8be5c9f26676712eb417db69ea1938380f4ff3/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L1422) \r\n- TabletServer.run() -> [some checking thread()](https://github.com/apache/accumulo/blob/dca3ae8d056a24510aa9d86347d9d6338613c4b3/server/tserver/src/main/java/org/apache/accumulo/tserver/TabletServer.java#L830)\r\n\r\nEdit: It seems likes  the error mostly occurs during the tserver thread check. I am doing more testing with RW trying to reproduce it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1070900506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071022457","html_url":"https://github.com/apache/accumulo/pull/2572#issuecomment-1071022457","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2572","id":1071022457,"node_id":"IC_kwDOACaFSM4_1oF5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:05:51Z","updated_at":"2022-03-17T16:05:51Z","author_association":"MEMBER","body":"We're only using it for the assertion checks, not running tests here. So, I'm not surprised it still worked, but I am surprised that JUnit4 was still on the class path somehow for this module.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071022457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071025073","html_url":"https://github.com/apache/accumulo/pull/2572#issuecomment-1071025073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2572","id":1071025073,"node_id":"IC_kwDOACaFSM4_1oux","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:07:58Z","updated_at":"2022-03-17T16:07:58Z","author_association":"MEMBER","body":"> but I am surprised that JUnit4 was still on the class path somehow for this module.\r\n\r\nMe too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071025073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071026794","html_url":"https://github.com/apache/accumulo/pull/2552#issuecomment-1071026794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2552","id":1071026794,"node_id":"IC_kwDOACaFSM4_1pJq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:09:21Z","updated_at":"2022-03-17T16:09:21Z","author_association":"MEMBER","body":"@milleruntime Was this closed because it was superseded by a different change, or because it's not needed, or something else?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071026794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071033562","html_url":"https://github.com/apache/accumulo/pull/2552#issuecomment-1071033562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2552","id":1071033562,"node_id":"IC_kwDOACaFSM4_1qza","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:14:48Z","updated_at":"2022-03-17T16:14:48Z","author_association":"CONTRIBUTOR","body":"> @milleruntime Was this closed because it was superseded by a different change, or because it's not needed, or something else?\r\n\r\nIt's not needed. And the uncertainty of what is going on with that Lambda.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071033562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071048567","html_url":"https://github.com/apache/accumulo/pull/2573#issuecomment-1071048567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2573","id":1071048567,"node_id":"IC_kwDOACaFSM4_1ud3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:25:56Z","updated_at":"2022-03-17T16:25:56Z","author_association":"CONTRIBUTOR","body":"Do we want to remove it in 3.0?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071048567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071053854","html_url":"https://github.com/apache/accumulo/pull/2573#issuecomment-1071053854","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2573","id":1071053854,"node_id":"IC_kwDOACaFSM4_1vwe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T16:30:22Z","updated_at":"2022-03-17T16:30:22Z","author_association":"CONTRIBUTOR","body":"Not sure, but when we do, it's easily identifiable.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071053854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071102403","html_url":"https://github.com/apache/accumulo/pull/2574#issuecomment-1071102403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2574","id":1071102403,"node_id":"IC_kwDOACaFSM4_17nD","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T17:09:46Z","updated_at":"2022-03-17T17:16:02Z","author_association":"CONTRIBUTOR","body":"The diffs for this are much easier to look at when hiding whitespace diffs.  @milleruntime I think this may fix the problem you saw in #2567, but I am not completely sure yet.  I want to come back and review it myself in a few days.  My goal in this PR was to detect changes for not just updating of the java map of files but also overlapping writes to the metadata table.  As you identified in the issue, the existing code only detects changes to the java map but it does not detect overlapping writes to the metadata table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071102403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071334109","html_url":"https://github.com/apache/accumulo/pull/2575#issuecomment-1071334109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2575","id":1071334109,"node_id":"IC_kwDOACaFSM4_20Ld","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T20:04:57Z","updated_at":"2022-03-17T20:04:57Z","author_association":"CONTRIBUTOR","body":"Looks OK. Would be nice to add a Test to FateCommandTest for `fate print`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071334109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071503602","html_url":"https://github.com/apache/accumulo/pull/2575#issuecomment-1071503602","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2575","id":1071503602,"node_id":"IC_kwDOACaFSM4_3djy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T21:11:30Z","updated_at":"2022-03-17T21:11:30Z","author_association":"MEMBER","body":"Which prior changes should these have been associated with? Can you mention the commit or issue/PR number in the body of this commit log when you merge?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071503602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071709682","html_url":"https://github.com/apache/accumulo/pull/2574#issuecomment-1071709682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2574","id":1071709682,"node_id":"IC_kwDOACaFSM4_4P3y","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-17T22:43:28Z","updated_at":"2022-03-17T22:43:28Z","author_association":"CONTRIBUTOR","body":"Before merging this thinking next week of adding some trace level logging of the counts and running this to see if things are really working as intended.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1071709682/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072318444","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072318444","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072318444,"node_id":"IC_kwDOACaFSM4_6kfs","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T11:23:24Z","updated_at":"2022-03-18T11:23:24Z","author_association":"CONTRIBUTOR","body":"This would be useful if exposed as a metric as well as any logging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072318444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072357427","html_url":"https://github.com/apache/accumulo/pull/2575#issuecomment-1072357427","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2575","id":1072357427,"node_id":"IC_kwDOACaFSM4_6uAz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T12:18:49Z","updated_at":"2022-03-18T12:18:49Z","author_association":"CONTRIBUTOR","body":"Yeah, sorry, will do. I was putting something up quickly for Mike, he ran into an issue while testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072357427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072469256","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072469256","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072469256,"node_id":"IC_kwDOACaFSM4_7JUI","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T14:33:21Z","updated_at":"2022-03-18T14:33:21Z","author_association":"MEMBER","body":"I like the idea of exposing as metrics. As a warning log, I'm not so sure. A lot of this depends on hardware, or varies significantly with user design/load. Trying to determine heuristically when to warn and provide hints to users about the possible causes seems like a lot of complexity that is very subjective, somewhat arbitrary, and likely flaky. I would definitely prefer the metrics route, though. Then users will be empowered with the tools they need to notice the impact on performance that any change they make in their deployments might cause.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072469256/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072503507","html_url":"https://github.com/apache/accumulo/pull/2575#issuecomment-1072503507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2575","id":1072503507,"node_id":"IC_kwDOACaFSM4_7RrT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T15:10:00Z","updated_at":"2022-03-18T15:10:00Z","author_association":"CONTRIBUTOR","body":"I did think of one thing. You could use `assertThrows()` to catch the exceptions, when they are thrown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072503507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072511031","html_url":"https://github.com/apache/accumulo/pull/2575#issuecomment-1072511031","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2575","id":1072511031,"node_id":"IC_kwDOACaFSM4_7Tg3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T15:17:17Z","updated_at":"2022-03-18T15:17:17Z","author_association":"CONTRIBUTOR","body":"> You could use assertThrows() to catch the exceptions, when they are thrown.\r\n\r\nI'm not following - I'm not catching any exceptions in the test. There is some error information printed to output, but no error is thrown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072511031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072518596","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072518596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072518596,"node_id":"IC_kwDOACaFSM4_7VXE","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T15:25:41Z","updated_at":"2022-03-18T15:25:41Z","author_association":"CONTRIBUTOR","body":"I don't know how to expose metrics in Ample. Any ideas? I think the best place would be to do in `TabletsMetadata`. Something like:\r\n```\r\nprivate TabletsMetadata buildNonRoot(AccumuloClient client) {\r\nInstant scanStart = Instant.ofEpochMilli(System.currentTimeMillis());\r\ntry {\r\n...\r\n } finally {\r\n  Instant scanEnd = Instant.ofEpochMilli(System.currentTimeMillis());\r\n }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072518596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072524017","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072524017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072524017,"node_id":"IC_kwDOACaFSM4_7Wrx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T15:31:37Z","updated_at":"2022-03-18T15:31:37Z","author_association":"CONTRIBUTOR","body":"Another option may be to add a scheduled thread in manager that does the scan - it is tangentially related to the monitor critical threads issue (https://github.com/apache/accumulo/issues/946) - mainly because being able to scan the metadata table is sort of critical.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072524017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072598441","html_url":"https://github.com/apache/accumulo/pull/2579#issuecomment-1072598441","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2579","id":1072598441,"node_id":"IC_kwDOACaFSM4_7o2p","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T16:51:40Z","updated_at":"2022-03-18T16:51:40Z","author_association":"CONTRIBUTOR","body":"1) Would DurationFormatter be a more descriptive name?\r\n2) Using apache commons DurationFormatUtils could allow most (if not all) of this code to be removed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072598441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072603489","html_url":"https://github.com/apache/accumulo/pull/2579#issuecomment-1072603489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2579","id":1072603489,"node_id":"IC_kwDOACaFSM4_7qFh","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T16:55:43Z","updated_at":"2022-03-18T16:55:43Z","author_association":"MEMBER","body":"Are there tests for this code?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072603489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072760603","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1072760603","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1072760603,"node_id":"IC_kwDOACaFSM4_8Qcb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T20:06:56Z","updated_at":"2022-03-18T20:06:56Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I made updates to ScanServerIT.testScanServerBusy in 39a9e5e. It's still not working as I would expect. I do see `ScanServerBusyException` being thrown on the server side, and I do see `2022-03-18T19:55:52,100 [clientImpl.ThriftScanner] TRACE: Scan failed, scan server was busy (1<<,ip-127.0.0.1:44375,10001a2e9b20005)` in the log on the client side. The client side error gets logged a couple of times, then it appears that both scans are running and returning data even though I set `Property.TSERV_SCAN_EXECUTORS_DEFAULT_THREADS` to `1` in the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072760603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072839802","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072839802","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072839802,"node_id":"IC_kwDOACaFSM4_8jx6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T21:44:41Z","updated_at":"2022-03-18T21:44:41Z","author_association":"MEMBER","body":"If you just want timing, wrapping with trace would probably be better than metrics. I don't know where the dividing line is, but I imagine metrics to be something like ops/sec, or counts of ops, or averages, rather than simple timing of calls.\r\n\r\nSo, the above sample code might be suitable for metrics, as a starting point for pushing to a metric that averages. (but don't use `System.currentTimeMillis()`, because that's clock time, and not suitable for durations).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072839802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072848670","html_url":"https://github.com/apache/accumulo/issues/2577#issuecomment-1072848670","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2577","id":1072848670,"node_id":"IC_kwDOACaFSM4_8l8e","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-18T22:04:05Z","updated_at":"2022-03-18T22:04:05Z","author_association":"CONTRIBUTOR","body":"Micrometer has a FunctionTimer that provides a count and the total latency - that allows the back end metrics system to reason about the rate and latency.  By monitoring the count you can determine liveliness and also track the latency.\r\n\r\nEquivalent to using a counter incremented each metadata scan and a counter that sums the time for each scan.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1072848670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073011230","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1073011230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1073011230,"node_id":"IC_kwDOACaFSM4_9Noe","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-19T13:34:22Z","updated_at":"2022-03-19T13:34:22Z","author_association":"CONTRIBUTOR","body":"@dlmarion I merged in your changes in #2575. Let me know I missed anything. I am still working on adapting the tests from the previous changes as well. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073011230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073873020","html_url":"https://github.com/apache/accumulo/pull/2579#issuecomment-1073873020","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2579","id":1073873020,"node_id":"IC_kwDOACaFSM5AAgB8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-21T13:07:38Z","updated_at":"2022-03-21T13:07:38Z","author_association":"CONTRIBUTOR","body":"> 1. Would DurationFormatter be a more descriptive name?\r\n\r\n:man_shrugging: \r\n\r\n> 2. Using apache commons DurationFormatUtils could allow most (if not all) of this code to be removed.\r\n\r\nI will check it out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073873020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073873952","html_url":"https://github.com/apache/accumulo/pull/2579#issuecomment-1073873952","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2579","id":1073873952,"node_id":"IC_kwDOACaFSM5AAgQg","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-21T13:08:09Z","updated_at":"2022-03-21T13:08:09Z","author_association":"CONTRIBUTOR","body":"> Are there tests for this code?\r\n\r\nNo. I started to write one but was going to do that as a follow on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1073873952/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1074142862","html_url":"https://github.com/apache/accumulo/pull/2574#issuecomment-1074142862","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2574","id":1074142862,"node_id":"IC_kwDOACaFSM5ABh6O","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-21T16:45:44Z","updated_at":"2022-03-21T16:45:44Z","author_association":"CONTRIBUTOR","body":"After adding logging in 472012b I tried running this code locally with continuous ingest and trace level logging for the Tablet enabled.  I saw the following in the logs for a single tablet.  For the test I locally modified the tserver code to run the check every 5 seconds.  I reviewed the code and I am happy with it.  @ctubbsii any interest in looking at it again before I merge?\r\n\r\n```\r\n$ grep AMCC tserver.log | grep \"1;2000\"\r\n2022-03-21T12:29:45,049 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:0,finishedCount:0]\r\n2022-03-21T12:29:50,064 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:0,finishedCount:0]\r\n2022-03-21T12:29:55,110 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:0,finishedCount:0]\r\n2022-03-21T12:30:00,164 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:0,finishedCount:0]\r\n2022-03-21T12:30:05,183 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:1,finishedCount:1]\r\n2022-03-21T12:30:10,209 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:2,finishedCount:2]\r\n2022-03-21T12:30:15,219 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:3,finishedCount:3]\r\n2022-03-21T12:30:20,255 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:3,finishedCount:3]\r\n2022-03-21T12:30:25,396 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:4,finishedCount:4]\r\n2022-03-21T12:30:30,415 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:5,finishedCount:5]\r\n2022-03-21T12:30:35,424 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:6,finishedCount:6]\r\n2022-03-21T12:30:40,433 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:7,finishedCount:7]\r\n2022-03-21T12:30:45,442 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:7,finishedCount:7]\r\n2022-03-21T12:30:50,508 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:8,finishedCount:8]\r\n2022-03-21T12:30:55,551 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:9,finishedCount:9]\r\n2022-03-21T12:31:00,636 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:10,finishedCount:10]\r\n2022-03-21T12:31:05,651 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:11,finishedCount:11]\r\n2022-03-21T12:31:10,661 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c may have been updating its metadata while it was being read for check, so skipping check [startedCount:12,finishedCount:11] [startedCount:12,finishedCount:11]\r\n2022-03-21T12:31:15,670 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:12,finishedCount:12]\r\n2022-03-21T12:31:20,688 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:13,finishedCount:13]\r\n2022-03-21T12:31:25,722 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:13,finishedCount:13]\r\n2022-03-21T12:31:30,775 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:14,finishedCount:14]\r\n2022-03-21T12:31:35,819 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:15,finishedCount:15]\r\n2022-03-21T12:31:40,859 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:16,finishedCount:16]\r\n2022-03-21T12:31:45,898 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:16,finishedCount:16]\r\n2022-03-21T12:31:50,978 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:17,finishedCount:17]\r\n2022-03-21T12:31:56,024 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:18,finishedCount:18]\r\n2022-03-21T12:32:01,041 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c may have been updating its metadata while it was being read for check, so skipping check [startedCount:19,finishedCount:18] [startedCount:19,finishedCount:18]\r\n2022-03-21T12:32:06,063 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:20,finishedCount:20]\r\n2022-03-21T12:32:11,113 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:20,finishedCount:20]\r\n2022-03-21T12:32:16,124 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:21,finishedCount:21]\r\n2022-03-21T12:32:21,156 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:21,finishedCount:21]\r\n2022-03-21T12:32:26,182 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:23,finishedCount:23]\r\n2022-03-21T12:32:31,190 [tablet.Tablet] TRACE: AMCC Tablet 1;2000000000000003;199999999999999c files in memory are same as in metadata table [startedCount:24,finishedCount:24]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1074142862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075464957","html_url":"https://github.com/apache/accumulo/issues/946#issuecomment-1075464957","issue_url":"https://api.github.com/repos/apache/accumulo/issues/946","id":1075464957,"node_id":"IC_kwDOACaFSM5AGkr9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-22T18:11:42Z","updated_at":"2022-03-22T18:11:42Z","author_association":"CONTRIBUTOR","body":"I thought a good place to do one of these was at the new consistency check thread. See https://github.com/apache/accumulo/pull/2583","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075464957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075529206","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1075529206","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1075529206,"node_id":"IC_kwDOACaFSM5AG0X2","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-22T19:10:18Z","updated_at":"2022-03-22T19:10:18Z","author_association":"CONTRIBUTOR","body":"I did some quick testing locally using Uno and CI and this seems like a good gauge for general cluster performance. With the cluster sitting idle, scan times were in the range of 7 - 10 ms. With CI running, the times were around 200 - 400 ms. I modified the thread checker time to check every minute.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075529206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075584456","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1075584456","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1075584456,"node_id":"IC_kwDOACaFSM5AHB3I","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-22T20:01:23Z","updated_at":"2022-03-22T20:01:23Z","author_association":"CONTRIBUTOR","body":"Exposing this through metrics rather than tracing would provide better utility for OPs to monitor, alert and trend.  \r\n\r\nTracing would be helpful if times could be correlated with other activities - but I am not sure that is possible. First, this is running as its own thread, without a parent as part of some other activity, The other issue this will only be a periodic snapshot and not have insight into global activities - and even if it did, I don't know how that would be expressed. \r\n\r\nFor example, if during bulk ingest or maybe metadata table compaction it may be \"normal\" if the scan time increased from a baseline \"idle\".","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1075584456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076222342","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1076222342","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1076222342,"node_id":"IC_kwDOACaFSM5AJdmG","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-23T10:48:22Z","updated_at":"2022-03-23T10:48:22Z","author_association":"CONTRIBUTOR","body":"> Exposing this through metrics rather than tracing would provide better utility for OPs to monitor, alert and trend.\r\n\r\nOPs? I don't know metrics code, any tips how to do this in the tserver?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076222342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076255248","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1076255248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1076255248,"node_id":"IC_kwDOACaFSM5AJloQ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-23T11:22:31Z","updated_at":"2022-03-23T12:14:53Z","author_association":"CONTRIBUTOR","body":"I was thinking that it might be nice to make the consistency check frequency configurable (something like `tserver.health.check.frequency` with the default 30-60mins). Having it check more often on a  tserver would be a nice health check when debugging. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076255248/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076448080","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1076448080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1076448080,"node_id":"IC_kwDOACaFSM5AKUtQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-23T14:34:02Z","updated_at":"2022-03-23T14:34:49Z","author_association":"CONTRIBUTOR","body":"This seems like a good short term way to get a sense of metadata table read performance.  Longer term it may be better to instrument the scanner and batch scanner to support emitting metrics.  Maybe the scanner and batch scanner could have a client property with a value that is a list of tables they would emit metrics for.  Then this could be flipped on and we could see metadata table read performance from across the cluster in a metrics system. \r\n\r\nIf this more general solution was ever implemented it would be good to remove this code.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1076448080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1077611507","html_url":"https://github.com/apache/accumulo/pull/2583#issuecomment-1077611507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2583","id":1077611507,"node_id":"IC_kwDOACaFSM5AOwvz","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-24T13:10:54Z","updated_at":"2022-03-24T13:10:54Z","author_association":"CONTRIBUTOR","body":"@keith-turner @ctubbsii I think this PR is good to go.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1077611507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079044488","html_url":"https://github.com/apache/accumulo/issues/2506#issuecomment-1079044488","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2506","id":1079044488,"node_id":"IC_kwDOACaFSM5AUOmI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-25T13:46:21Z","updated_at":"2022-03-25T13:46:21Z","author_association":"CONTRIBUTOR","body":"@milleruntime  - I wonder if the issue is that the Problem key is being removed from the WeakHashMap in ThrottledBalancerProblemReporter.problemReportTimes by the garbage collector, so ThrottledBalancerProblemReporter.reportProblem is always going to report the problem.  Changing the map type, as a test, should confirm whether or not this is the case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079044488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079122209","html_url":"https://github.com/apache/accumulo/issues/2529#issuecomment-1079122209","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2529","id":1079122209,"node_id":"IC_kwDOACaFSM5AUhkh","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-25T15:08:23Z","updated_at":"2022-03-25T15:08:23Z","author_association":"CONTRIBUTOR","body":"I don't have any ideas how to make this better.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079122209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079158933","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1079158933","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1079158933,"node_id":"IC_kwDOACaFSM5AUqiV","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-25T15:48:39Z","updated_at":"2022-03-25T15:50:51Z","author_association":"CONTRIBUTOR","body":"I fired up this PR in Uno with some data to test how many watchers we spawn. Comparing against main with the same data this is what I saw:\r\n<pre>\r\nmain: Total watches:717\r\ned's: Total watches:212\r\n</pre>\r\n\r\nSo we are looking great so far. I didn't see any nodes for individual table properties. I did notice that there are still a lot of watches under table names, namespaces and state. I am wondering where they are coming from. Maybe the `TableManager`? \r\n<pre>\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/namespaces/+accumulo/name\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/+r/namespace\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/namespaces/+default/name\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/3/name\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/3/namespace\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/+r/state\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/+rep/state\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/1/state\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/2/namespace\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/+rep/namespace\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/3/state\r\n        /accumulo/6f221757-f8a0-4a24-8fe5-71142b0332d0/tables/!0/name\r\n</pre>\r\n\r\nHere is the output from the 2 different installs. \r\n[watches-main.txt](https://github.com/apache/accumulo/files/8351968/watches-main.txt)\r\n[watches-single-prop.txt](https://github.com/apache/accumulo/files/8351972/watches-single-prop.txt)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1079158933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]