[{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512603685","html_url":"https://github.com/openzipkin/zipkin/issues/2680#issuecomment-512603685","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2680","id":512603685,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYwMzY4NQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T23:19:10Z","updated_at":"2019-07-17T23:19:10Z","author_association":"MEMBER","body":"yes but it would be custom, making a java library with some extension loading stuff. Is there a reason you are pinned to 2.12.6?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512603685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512614832","html_url":"https://github.com/openzipkin/zipkin/issues/2681#issuecomment-512614832","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2681","id":512614832,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYxNDgzMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T00:12:48Z","updated_at":"2019-07-18T00:12:48Z","author_association":"MEMBER","body":"wrong repo","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512614832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512618819","html_url":"https://github.com/openzipkin/zipkin/issues/2680#issuecomment-512618819","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2680","id":512618819,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYxODgxOQ==","user":{"login":"GavinLin168","id":17762508,"node_id":"MDQ6VXNlcjE3NzYyNTA4","avatar_url":"https://avatars.githubusercontent.com/u/17762508?v=4","gravatar_id":"","url":"https://api.github.com/users/GavinLin168","html_url":"https://github.com/GavinLin168","followers_url":"https://api.github.com/users/GavinLin168/followers","following_url":"https://api.github.com/users/GavinLin168/following{/other_user}","gists_url":"https://api.github.com/users/GavinLin168/gists{/gist_id}","starred_url":"https://api.github.com/users/GavinLin168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GavinLin168/subscriptions","organizations_url":"https://api.github.com/users/GavinLin168/orgs","repos_url":"https://api.github.com/users/GavinLin168/repos","events_url":"https://api.github.com/users/GavinLin168/events{/privacy}","received_events_url":"https://api.github.com/users/GavinLin168/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T00:34:26Z","updated_at":"2019-07-18T00:34:26Z","author_association":"NONE","body":"@adriancole we are using zipkin 2.12.6 in our uat/prod  for several months. I am not so clearly about \"a java library with some extension loading stuff\" , any guide for this ? thanks!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512618819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512622492","html_url":"https://github.com/openzipkin/zipkin/issues/2680#issuecomment-512622492","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2680","id":512622492,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYyMjQ5Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T00:55:26Z","updated_at":"2019-07-18T00:55:26Z","author_association":"MEMBER","body":"ok in exchange for this workaround please plan to upgrade at some point. deal? :) \r\n\r\nhttps://gist.github.com/adriancole/e47ba194b2559031ae2c3723fdfd5984","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512622492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512633086","html_url":"https://github.com/openzipkin/zipkin/pull/2677#issuecomment-512633086","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2677","id":512633086,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYzMzA4Ng==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T01:53:32Z","updated_at":"2019-07-18T01:53:43Z","author_association":"MEMBER","body":"@adriancole \r\nYes, correct.\r\nAnd this improves performance by avoiding calling `/api/v2/trace` API in trace page if not needed.\r\nIn other words, reuse results of `/api/v2/traces` API in the individual trace page.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512633086/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512643912","html_url":"https://github.com/openzipkin/zipkin/issues/2680#issuecomment-512643912","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2680","id":512643912,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY0MzkxMg==","user":{"login":"GavinLin168","id":17762508,"node_id":"MDQ6VXNlcjE3NzYyNTA4","avatar_url":"https://avatars.githubusercontent.com/u/17762508?v=4","gravatar_id":"","url":"https://api.github.com/users/GavinLin168","html_url":"https://github.com/GavinLin168","followers_url":"https://api.github.com/users/GavinLin168/followers","following_url":"https://api.github.com/users/GavinLin168/following{/other_user}","gists_url":"https://api.github.com/users/GavinLin168/gists{/gist_id}","starred_url":"https://api.github.com/users/GavinLin168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GavinLin168/subscriptions","organizations_url":"https://api.github.com/users/GavinLin168/orgs","repos_url":"https://api.github.com/users/GavinLin168/repos","events_url":"https://api.github.com/users/GavinLin168/events{/privacy}","received_events_url":"https://api.github.com/users/GavinLin168/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T02:50:10Z","updated_at":"2019-07-18T02:50:10Z","author_association":"NONE","body":"@adriancole thanks very much. it works","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512643912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512646164","html_url":"https://github.com/openzipkin/zipkin/issues/2622#issuecomment-512646164","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2622","id":512646164,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY0NjE2NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T03:02:18Z","updated_at":"2019-07-18T03:02:18Z","author_association":"MEMBER","body":"Some notes from discussion with @tacigar \r\n\r\nI have service graph now, but I cannot tell if there is a problem with one node behavior\r\nif I want to understand behavior of a single machine in a service, I cannot do this today.\r\nthis is because the edges are aggregatate (parent, child, count), based on service name, not any other information in the endpoint such as IP address.\r\n\r\nThis can make certain problems difficult to understand, such as if one node in a service is running the wrong code, or if a new version of code only deployed to one node is causing a problem.\r\n\r\nSo, if I have a way to classify by another means, I can identify this type of behavior. For example, IP address. {(parent, ip), (child, ip), count)  the dependency link has one more qualifier than before, for this example IP address.\r\n\r\nThere are now many more nodes.. because what was before just service-service is now (service,ip) -> (service, ip). Inside one trace, this could be fine because maybe not that many combinations\r\n\r\n\r\nIP is just an example, user may want to explore by site tag like cluster or department or something else. The difference between this and normal dependency graph is we generate the links in javascript. This means we can aggregate by anything, not just service but also custom tag (like http.route).","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512646164/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512647549","html_url":"https://github.com/openzipkin/zipkin/pull/2656#issuecomment-512647549","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2656","id":512647549,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY0NzU0OQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T03:10:24Z","updated_at":"2019-07-18T03:10:24Z","author_association":"MEMBER","body":"Yes, this is still WIP.\r\nI noticed that I should do #2677 first...","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512647549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512701749","html_url":"https://github.com/openzipkin/zipkin/pull/2677#issuecomment-512701749","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2677","id":512701749,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjcwMTc0OQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T07:36:23Z","updated_at":"2019-07-18T07:36:23Z","author_association":"MEMBER","body":"PTAL ðŸ™‡","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512701749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512710208","html_url":"https://github.com/openzipkin/zipkin/pull/2410#issuecomment-512710208","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2410","id":512710208,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjcxMDIwOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T08:03:21Z","updated_at":"2019-07-18T08:03:21Z","author_association":"MEMBER","body":"is this resurrectable or too drifted to continue without fresh start?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512710208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512714909","html_url":"https://github.com/openzipkin/zipkin/pull/2410#issuecomment-512714909","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2410","id":512714909,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjcxNDkwOQ==","user":{"login":"zeagord","id":4723376,"node_id":"MDQ6VXNlcjQ3MjMzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4723376?v=4","gravatar_id":"","url":"https://api.github.com/users/zeagord","html_url":"https://github.com/zeagord","followers_url":"https://api.github.com/users/zeagord/followers","following_url":"https://api.github.com/users/zeagord/following{/other_user}","gists_url":"https://api.github.com/users/zeagord/gists{/gist_id}","starred_url":"https://api.github.com/users/zeagord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeagord/subscriptions","organizations_url":"https://api.github.com/users/zeagord/orgs","repos_url":"https://api.github.com/users/zeagord/repos","events_url":"https://api.github.com/users/zeagord/events{/privacy}","received_events_url":"https://api.github.com/users/zeagord/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T08:17:23Z","updated_at":"2019-07-18T08:17:23Z","author_association":"MEMBER","body":"Definitely possible, it will be a bit of a rework. I will start once the pending UI items finished.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512714909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512726607","html_url":"https://github.com/openzipkin/zipkin/pull/2682#issuecomment-512726607","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2682","id":512726607,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjcyNjYwNw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T08:51:26Z","updated_at":"2019-07-18T08:51:26Z","author_association":"MEMBER","body":"still works :P","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512726607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512753711","html_url":"https://github.com/openzipkin/zipkin/pull/2654#issuecomment-512753711","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2654","id":512753711,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjc1MzcxMQ==","user":{"login":"JohnLBergqvist","id":31512273,"node_id":"MDQ6VXNlcjMxNTEyMjcz","avatar_url":"https://avatars.githubusercontent.com/u/31512273?v=4","gravatar_id":"","url":"https://api.github.com/users/JohnLBergqvist","html_url":"https://github.com/JohnLBergqvist","followers_url":"https://api.github.com/users/JohnLBergqvist/followers","following_url":"https://api.github.com/users/JohnLBergqvist/following{/other_user}","gists_url":"https://api.github.com/users/JohnLBergqvist/gists{/gist_id}","starred_url":"https://api.github.com/users/JohnLBergqvist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohnLBergqvist/subscriptions","organizations_url":"https://api.github.com/users/JohnLBergqvist/orgs","repos_url":"https://api.github.com/users/JohnLBergqvist/repos","events_url":"https://api.github.com/users/JohnLBergqvist/events{/privacy}","received_events_url":"https://api.github.com/users/JohnLBergqvist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T10:09:15Z","updated_at":"2019-07-18T10:09:15Z","author_association":"NONE","body":"@adriancole \r\nMany thanks for your feedback. We're constantly improving our product, so this kind of feedback is very valuable to us.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/512753711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513049791","html_url":"https://github.com/openzipkin/zipkin/issues/2685#issuecomment-513049791","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2685","id":513049791,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA0OTc5MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T01:06:15Z","updated_at":"2019-07-19T01:06:15Z","author_association":"MEMBER","body":"Ex the part to remove is the expansion here. You'll notice it is only luck that the traces of interest (expanded) are with only one trace between them. In simple traces like from zipkin server, only 4-7 spans, this looks benign, but you could imagine LINE and others have 800 span traces, so expanding them inline is not that useful.\r\n\r\n<img width=\"1012\" alt=\"Screenshot 2019-07-19 at 10 04 36 AM\" src=\"https://user-images.githubusercontent.com/64215/61501932-a4a33680-aa0c-11e9-8627-d0e441d19507.png\">\r\n\r\n\r\ncc also @bulicekj","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513049791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513109072","html_url":"https://github.com/openzipkin/zipkin/issues/2685#issuecomment-513109072","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2685","id":513109072,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzEwOTA3Mg==","user":{"login":"jorgheymans","id":193792,"node_id":"MDQ6VXNlcjE5Mzc5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/193792?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgheymans","html_url":"https://github.com/jorgheymans","followers_url":"https://api.github.com/users/jorgheymans/followers","following_url":"https://api.github.com/users/jorgheymans/following{/other_user}","gists_url":"https://api.github.com/users/jorgheymans/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgheymans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgheymans/subscriptions","organizations_url":"https://api.github.com/users/jorgheymans/orgs","repos_url":"https://api.github.com/users/jorgheymans/repos","events_url":"https://api.github.com/users/jorgheymans/events{/privacy}","received_events_url":"https://api.github.com/users/jorgheymans/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T06:28:50Z","updated_at":"2019-07-19T06:28:50Z","author_association":"CONTRIBUTOR","body":"+1 because less screen overload.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513109072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513122254","html_url":"https://github.com/openzipkin/zipkin/pull/2687#issuecomment-513122254","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2687","id":513122254,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzEyMjI1NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T07:20:45Z","updated_at":"2019-07-19T07:20:45Z","author_association":"MEMBER","body":"ps there's a lot of history about ES_MAX_REQUESTS and why we moved to throttling instead. the short story is that the backlog in ES is unrelated to the concurrent connection count. It is the backlog that's the problem and you can overrun that with very few connections.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513122254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513412841","html_url":"https://github.com/openzipkin/zipkin/pull/2691#issuecomment-513412841","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2691","id":513412841,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQxMjg0MQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T23:42:45Z","updated_at":"2019-07-19T23:42:45Z","author_association":"MEMBER","body":"> I want to show root span information in search result list in Discover page (in #2656).\r\n\r\nLike this...\r\n\r\n<img width=\"1000\" alt=\"root\" src=\"https://user-images.githubusercontent.com/19551419/61570861-50f72280-aaca-11e9-8e35-26cdfce0da80.png\">\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513412841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513414883","html_url":"https://github.com/openzipkin/zipkin/pull/2692#issuecomment-513414883","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2692","id":513414883,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQxNDg4Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T23:58:49Z","updated_at":"2019-07-19T23:58:49Z","author_association":"MEMBER","body":"probably hard to start a test if one doesn't exist, but now would be a good time to add a test. our old codebase zipkin-ui got into a critical spot once where we had to do a lot of backfilling of tests and still never caught up.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513414883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513416241","html_url":"https://github.com/openzipkin/zipkin/pull/2692#issuecomment-513416241","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2692","id":513416241,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQxNjI0MQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T00:09:37Z","updated_at":"2019-07-20T00:09:37Z","author_association":"MEMBER","body":"OK, I'll add tests.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513416241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443115","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513443115","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513443115,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0MzExNQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T06:58:31Z","updated_at":"2019-07-20T06:58:31Z","author_association":"MEMBER","body":"actually if you hit anything except the health endpoint first, it puts things into an unusable state. I think @anuraaga has some change in mind to fall back to unhealth checked names when health checking isn't complete yet. We need to solve this one way or another before release as when it is bad, most commands will return 503 and it isn't possible even to control-c out of it.\r\n\r\n```\r\n2019-07-20 15:54:08.774  WARN 39062 --- [-worker-nio-2-1] z.s.i.BodyIsExceptionMessage             : Unexpected error handling request.\r\n\r\ncom.linecorp.armeria.client.endpoint.EndpointGroupException: HealthCheckedEndpointGroup(all:], healthy:]) is empty\r\n\tat com.linecorp.armeria.client.endpoint.RoundRobinStrategy$RoundRobinSelector.select(RoundRobinStrategy.java:65) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.endpoint.EndpointGroupRegistry.selectNode(EndpointGroupRegistry.java:120) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.Endpoint.resolve(Endpoint.java:215) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.HttpClientDelegate.execute(HttpClientDelegate.java:61) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.HttpClientDelegate.execute(HttpClientDelegate.java:42) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.encoding.HttpDecodingClient.execute(HttpDecodingClient.java:92) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.encoding.HttpDecodingClient.execute(HttpDecodingClient.java:39) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.logging.LoggingClient.execute(LoggingClient.java:172) ~[armeria-0.88.0.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.lambda$execute$0(RawContentLoggingClient.java:53) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1106) ~[?:?]\r\n\tat java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2235) ~[?:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.execute(RawContentLoggingClient.java:48) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.execute(RawContentLoggingClient.java:30) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat com.linecorp.armeria.internal.ClientUtil.executeWithFallback(ClientUtil.java:42) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.UserClient.execute(UserClient.java:159) ~[armeria-0.88.0.jar!/:?]\r\n\tat com.linecorp.armeria.client.DefaultHttpClient.execute(DefaultHttpClient.java:61) ~[armeria-0.88.0.jar!/:?]\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443272","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513443272","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513443272,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0MzI3Mg==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:01:24Z","updated_at":"2019-07-20T07:01:24Z","author_association":"CONTRIBUTOR","body":"This happened because we moved the `await` out of `httpObject` into `check` I guess. I think I was expecting the `Storage` abstraction to call `check()` before issuing queries / spans, etc. Do you think such a change would make sense? ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443680","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513443680","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513443680,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0MzY4MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:09:00Z","updated_at":"2019-07-20T07:09:00Z","author_association":"MEMBER","body":"I think before we made a call to ensure the index templates existed before proceeding. if the health check is now a dependency, then it should be a dependency of checking for index templates.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443777","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513443777","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513443777,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0Mzc3Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:10:26Z","updated_at":"2019-07-20T07:10:26Z","author_association":"MEMBER","body":"I also think we will need to have a switch to turn off health checks because we may not have found all the quirks. we will want to be able to release zipkin soon, and there have been many odd things that seem to imply better safe to be able to either opt-into health checking or at least opt out of it.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443871","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513443871","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513443871,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0Mzg3MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:12:21Z","updated_at":"2019-07-20T07:12:21Z","author_association":"MEMBER","body":"for example I get these quirks even on my laptop, which seems off. I think it is because of use of \"localhost\" which then trips it into health checking loop. If there's only one IP resolved maybe better to not have health checking as an in-band requirement.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513443871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444051","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513444051","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513444051,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NDA1MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:15:31Z","updated_at":"2019-07-20T07:15:31Z","author_association":"MEMBER","body":"by in-band what I mean is that usually we don't require commands to route through the health checking device. We do have initialization dependencies, like make sure schema can be installed, but every thing I've run into about health check so far is red herring. I feel like we may have a catastrophe if we enable this by default to point where people won't want to upgrade. It might be better to make this opt-in until it isn't causing a lot of delay startup or hanging shutdown etc.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444170","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513444170","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513444170,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NDE3MA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:17:44Z","updated_at":"2019-07-20T07:17:44Z","author_association":"CONTRIBUTOR","body":"Yeah I think opt-in should be good until https://github.com/line/armeria/issues/1910 - hopefully that solves all the quirks","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444254","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513444254","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513444254,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NDI1NA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:18:55Z","updated_at":"2019-07-20T07:18:55Z","author_association":"CONTRIBUTOR","body":"Though one thing, before that we should track down why an exception causes the server to hang - I think that would happen for any exception, here it just happens to be `EndpointGroupException`","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444254/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444368","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513444368","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513444368,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NDM2OA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:20:29Z","updated_at":"2019-07-20T07:20:29Z","author_association":"MEMBER","body":"one way is to allow \"untrusted connection\" until health check boots up as it takes a while anyway. I think this is a good idea regardless of adding a switch to disable things. Primarily because the timeouts we are hitting are way longer than normal ES stuff. If we have some tuning to do, we should do that in the background until things are not eggshell.\r\n\r\nex. first version has health checking opt-in and then after we prove it is stable etc, we have health checking enabled by default. I think we can get some sites like LINE to test with health check and show it is stable for example, but usually we have chicken egg problem with testing.\r\n\r\nBy disabling health check we can also get to the bottom of what all the hanging is about, as I've not even gotten reliable tracing in order yet.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444801","html_url":"https://github.com/openzipkin/zipkin/pull/2694#issuecomment-513444801","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2694","id":513444801,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NDgwMQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:27:20Z","updated_at":"2019-07-20T07:27:20Z","author_association":"CONTRIBUTOR","body":"I guess since with this change it will always fallback when there are no health checked endpoints, maybe we don't need an extra flag.\r\n\r\nAlso we might be seeing some non-IOException causing hangs","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513444801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513445399","html_url":"https://github.com/openzipkin/zipkin/pull/2694#issuecomment-513445399","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2694","id":513445399,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NTM5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T07:36:45Z","updated_at":"2019-07-20T07:36:45Z","author_association":"MEMBER","body":"> I guess since with this change it will always fallback when there are no\n> health checked endpoints, maybe we don't need an extra flag.\n>\n> Also we might be seeing some non-IOException causing hangs\n>\n\nI'm happy if hangs go away. Main thing is master isn't shippable until we\ncan get hang-free.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513445399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513447077","html_url":"https://github.com/openzipkin/zipkin/pull/2693#issuecomment-513447077","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2693","id":513447077,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0NzA3Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:05:40Z","updated_at":"2019-07-20T08:05:40Z","author_association":"MEMBER","body":"I plan to merge this on green because the code around logging may change a bit once I refactor some complexity in http call cloning","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513447077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448644","html_url":"https://github.com/openzipkin/zipkin/issues/2695#issuecomment-513448644","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2695","id":513448644,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0ODY0NA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:31:20Z","updated_at":"2019-07-20T08:31:20Z","author_association":"CONTRIBUTOR","body":"I think this is clearest if we add a logging parameter to the `ElasticsearchStorage` constructor so it can make sure to handle it appropriately (otherwise I guess we would need to add a qualifier to distinguish `Consumer<ClientBuilderOptions>`). Does that sound reasonable?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448941","html_url":"https://github.com/openzipkin/zipkin/pull/2693#issuecomment-513448941","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2693","id":513448941,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0ODk0MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:35:56Z","updated_at":"2019-07-20T08:35:56Z","author_association":"MEMBER","body":"thanks for all the hints. one type isnt an interface so it cant be a\nlambda. I can try to refactor it back but it was awaiting the input stream\nchange on httpdata\n\nOn Sat, Jul 20, 2019, 5:22 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> *@anuraaga* commented on this pull request.\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/BodyConverters.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572172>:\n>\n> > -        @Override\n> -        public List<String> convert(ByteBuffer content) throws IOException {\n> -          return collectValuesNamed(JsonSerializers.jsonParser(content), \"key\");\n> -        }\n> -      };\n> -  static final HttpCall.BodyConverter<List<Span>> SPANS =\n> -      SearchResultConverter.create(JsonSerializers.SPAN_PARSER);\n> -  static final HttpCall.BodyConverter<List<DependencyLink>> DEPENDENCY_LINKS =\n> -      new SearchResultConverter<DependencyLink>(JsonSerializers.DEPENDENCY_LINK_PARSER) {\n> -        @Override\n> -        public List<DependencyLink> convert(ByteBuffer content) throws IOException {\n> -          List<DependencyLink> result = super.convert(content);\n> -          return result.isEmpty() ? result : DependencyLinker.merge(result);\n> -        }\n> -      };\n> +  static final BodyConverter<Object> NULL = new BodyConverter<Object>() {\n>\n> Just wondering, what do you think about using lambdas?\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/SearchResultConverter.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572327>:\n>\n> >\n>      List<T> result = new ArrayList<>();\n>      while (hits.nextToken() != JsonToken.END_ARRAY) {\n>        JsonParser source = enterPath(hits, \"_source\");\n> -      if (source != null) {\n> -        result.add(adapter.parse(source));\n> -      }\n> -      hits.nextToken();\n>\n> Ah yup\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonReaders.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572360>:\n>\n> > @@ -101,5 +99,24 @@ static void visitNextOrSkip(JsonParser parser, String name, Set<String> result)\n>      }\n>    }\n>\n> -  JsonReaders() {}\n> +  static boolean checkStartObject(JsonParser parser, boolean shouldThrow) throws IOException {\n> +    try {\n> +      JsonToken currentToken = parser.currentToken();\n> +      // The parser may not be at a token, yet. If that's the case advance.\n> +      if (currentToken == null) currentToken = parser.nextToken();\n> +\n> +      // If we are still not at the expected token, we could be an another or an empty body.\n> +      if (currentToken == JsonToken.START_OBJECT) return true;\n> +      if (shouldThrow) {\n> +        throw new IllegalArgumentException(\"Expected start object, was \" + currentToken);\n> +      }\n> +      return false;\n> +    } catch (JsonParseException e) { // likely not json\n>\n> catch Throwable? When methods shouldn't throw, like where shouldThrow is\n> false here, it's easy to end up with a hang because an exception type\n> changed.\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572376>:\n>\n> > @@ -522,4 +499,22 @@ static boolean isIpAddress(String address) {\n>\n>    ElasticsearchStorage() {\n>    }\n> +\n> +  static final BodyConverter<CheckResult> READ_STATUS = new BodyConverter<CheckResult> (){\n> +    @Override public CheckResult convert(HttpData body) throws IOException {\n> +      String result = body.toStringUtf8();\n> +      JsonParser status = enterPath(JSON_FACTORY.createParser(result), \"status\");\n> +      if (status == null) {\n> +        throw new IllegalArgumentException(\"Health status couldn't be read \" + result);\n> +      }\n> +      if (\"RED\".equalsIgnoreCase(status.getText())) {\n> +        return CheckResult.failed(new IllegalStateException(\"Health status is RED\"));\n> +      }\n> +      return CheckResult.OK;\n> +    }\n> +\n> +    @Override  public String toString() {\n>\n> Extra space\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572553>:\n>\n> > @@ -522,4 +499,22 @@ static boolean isIpAddress(String address) {\n>\n>    ElasticsearchStorage() {\n>    }\n> +\n> +  static final BodyConverter<CheckResult> READ_STATUS = new BodyConverter<CheckResult> (){\n> +    @Override public CheckResult convert(HttpData body) throws IOException {\n> +      String result = body.toStringUtf8();\n>\n> I sort of wanted to untie these parsers from armeria or netty by using\n> ByteBuffer but I guess it's ok. In that case, I'd pass in ByteBuf instead\n> of HttpData since it's more flexible. e.g., a little better to do\n> something like this to minimize copies for the success case.\n>\n> try (ByteBufInputStream stream = new ByteBufInputStream(buf.slice(), true)) {\n>   JsonParser status = enterPath(JSON_FACTORY.createParser(result), \"status\");\n>   if (status == null) {\n>     throw new IllegalArgumentException(\"Health status couldn't be read \" + buf.toString(UTF_8));\n>   }\n> }\n>\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/JsonReaders.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572580>:\n>\n> > @@ -101,5 +99,24 @@ static void visitNextOrSkip(JsonParser parser, String name, Set<String> result)\n>      }\n>    }\n>\n> -  JsonReaders() {}\n> +  static boolean checkStartObject(JsonParser parser, boolean shouldThrow) throws IOException {\n> +    try {\n> +      JsonToken currentToken = parser.currentToken();\n> +      // The parser may not be at a token, yet. If that's the case advance.\n> +      if (currentToken == null) currentToken = parser.nextToken();\n>\n> Yeah was thinking about this - this is good\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572597>:\n>\n> >  public final class HttpCall<V> extends Call.Base<V> {\n>\n> -  public interface BodyConverter<V> {\n> -    V convert(ByteBuffer content) throws IOException;\n> +  public static abstract class BodyConverter<V> {\n> +    /** Most convert with {@link HttpData#toStringUtf8()} or {@link #toInputStream(HttpData)} */\n> +    public abstract V convert(HttpData content) throws IOException;\n> +\n> +    // TODO: once https://github.com/line/armeria/issues/1918 is done, switch back to an interface\n>\n> Since this is java 8, stick with being an interface and use a default\n> method?\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572612>:\n>\n> >  public final class HttpCall<V> extends Call.Base<V> {\n>\n> -  public interface BodyConverter<V> {\n> -    V convert(ByteBuffer content) throws IOException;\n> +  public static abstract class BodyConverter<V> {\n> +    /** Most convert with {@link HttpData#toStringUtf8()} or {@link #toInputStream(HttpData)} */\n> +    public abstract V convert(HttpData content) throws IOException;\n> +\n> +    // TODO: once https://github.com/line/armeria/issues/1918 is done, switch back to an interface\n> +    /** Use this when you don't need a string or only need to read the response once. */\n> +    protected InputStream toInputStream(HttpData content) {\n> +      if (content instanceof ByteBufHolder) {\n> +        return new ByteBufferBackedInputStream(((ByteBufHolder) content).content().nioBuffer());\n>\n> return new ByteBufInputStream(content.content())\n>\n> Without setting true it won't release, and it's the same semantics with\n> slightly better performance.\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/HttpCallTest.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305572666>:\n>\n> > -    } catch (IllegalStateException expected) {\n> -      assertThat(expected).isInstanceOf(IllegalStateException.class);\n> +      failBecauseExceptionWasNotThrown(RuntimeException.class);\n> +    } catch (RuntimeException expected) {\n> +      assertThat(expected).hasMessage(\"response for / failed: 500 Internal Server Error\");\n> +    }\n> +  }\n> +\n> +  @Test public void executionException_404() throws Exception {\n> +    MOCK_RESPONSE.set(AggregatedHttpResponse.of(HttpStatus.NOT_FOUND));\n> +\n> +    Call<?> call = http.newCall(REQUEST, BodyConverters.NULL);\n> +\n> +    try {\n> +      call.execute();\n> +      failBecauseExceptionWasNotThrown(FileNotFoundException.class);\n>\n> assertThatThrownBy more readable\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/2693?email_source=notifications&email_token=AAAPVV5NW4LP44V4SRJSFHTQALDNDA5CNFSM4IFNWDL2YY3PNVWWK3TUL52HS4DFWFIHK3DMKJSXC5LFON2FEZLWNFSXPKTDN5WW2ZLOORPWSZGOB7B4N5Y#pullrequestreview-264488695>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV2GEBOA477ANT3BJLLQALDNDANCNFSM4IFNWDLQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448993","html_url":"https://github.com/openzipkin/zipkin/pull/2696#issuecomment-513448993","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2696","id":513448993,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0ODk5Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:36:52Z","updated_at":"2019-07-20T08:36:52Z","author_association":"MEMBER","body":"thanks.. good eye. I will also make a test to prove it.\n\nOn Sat, Jul 20, 2019, 5:33 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> *@anuraaga* commented on this pull request.\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.java\n> <https://github.com/openzipkin/zipkin/pull/2696#discussion_r305572968>:\n>\n> >          }\n> +        if (value != null) callback.onSuccess(value);\n>\n> Think this needs to go right below line 91. parseResponse can return null\n> (line 133), which will cause this future to never complete.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/2696?email_source=notifications&email_token=AAAPVV3FBPYTHEMODEDT4CTQALEWVA5CNFSM4IFN5LG2YY3PNVWWK3TUL52HS4DFWFIHK3DMKJSXC5LFON2FEZLWNFSXPKTDN5WW2ZLOORPWSZGOB7B4UJI#pullrequestreview-264489509>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV34MSFA323H6WBFI43QALEWVANCNFSM4IFN5LGQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513448993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513449520","html_url":"https://github.com/openzipkin/zipkin/pull/2694#issuecomment-513449520","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2694","id":513449520,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0OTUyMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:43:59Z","updated_at":"2019-07-20T08:43:59Z","author_association":"MEMBER","body":"merge when ready.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513449520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513449819","html_url":"https://github.com/openzipkin/zipkin/pull/2696#issuecomment-513449819","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2696","id":513449819,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ0OTgxOQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T08:46:16Z","updated_at":"2019-07-20T08:46:16Z","author_association":"CONTRIBUTOR","body":"Took care of it so it can get back to the CI","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513449819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513451475","html_url":"https://github.com/openzipkin/zipkin/issues/2697#issuecomment-513451475","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2697","id":513451475,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ1MTQ3NQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T09:13:55Z","updated_at":"2019-07-20T09:13:55Z","author_association":"MEMBER","body":"PS I do think we all should be able to learn this stuff as we inherit this complexity also helping people trace things in brave for example. It isn't bad to have the complexity but it is bad to have complexity without skills. that's what I mean by upping our game.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513451475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453575","html_url":"https://github.com/openzipkin/zipkin/issues/2695#issuecomment-513453575","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2695","id":513453575,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ1MzU3NQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T09:47:58Z","updated_at":"2019-07-20T09:47:58Z","author_association":"MEMBER","body":"sounds good to me\n\nOn Sat, Jul 20, 2019, 5:31 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> I think this is clearest if we add a logging parameter to the\n> ElasticsearchStorage constructor so it can make sure to handle it\n> appropriately (otherwise I guess we would need to add a qualifier to\n> distinguish Consumer<ClientBuilderOptions>). Does that sound reasonable?\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/issues/2695?email_source=notifications&email_token=AAAPVV3T5HWQCXKEY2BS3MLQALENTA5CNFSM4IFN2RZ2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2NJVRA#issuecomment-513448644>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV2VORUPHJJRP63Z2ETQALENTANCNFSM4IFN2RZQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453638","html_url":"https://github.com/openzipkin/zipkin/pull/2696#issuecomment-513453638","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2696","id":513453638,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ1MzYzOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T09:48:57Z","updated_at":"2019-07-20T09:48:57Z","author_association":"MEMBER","body":"thanks. actually I need to pause until monday so if you want to merge\nwithout tests I can backfill monday\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453680","html_url":"https://github.com/openzipkin/zipkin/pull/2693#issuecomment-513453680","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2693","id":513453680,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ1MzY4MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T09:49:39Z","updated_at":"2019-07-20T09:49:39Z","author_association":"MEMBER","body":"thanks\n\nOn Sat, Jul 20, 2019, 6:08 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> *@anuraaga* commented on this pull request.\n> ------------------------------\n>\n> In\n> zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.java\n> <https://github.com/openzipkin/zipkin/pull/2693#discussion_r305573777>:\n>\n> > @@ -522,4 +499,22 @@ static boolean isIpAddress(String address) {\n>\n>    ElasticsearchStorage() {\n>    }\n> +\n> +  static final BodyConverter<CheckResult> READ_STATUS = new BodyConverter<CheckResult> (){\n> +    @Override public CheckResult convert(HttpData body) throws IOException {\n> +      String result = body.toStringUtf8();\n>\n> Just for reference, it'd be Unpooled.wrappedBuffer(content.array()) but\n> yeah no worries. I agree we should keep the netty in one place as much as\n> possible, have some ideas on achieving both will explore them later.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/2693?email_source=notifications&email_token=AAAPVV3F5D72ZKAIIXV4UZTQALIYZA5CNFSM4IFNWDL2YY3PNVWWK3TUL52HS4DFWFIHK3DMKJSXC5LFON2FEZLWNFSXPKTDN5WW2ZLOORPWSZGOB7B43OI#discussion_r305573777>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV4WZEPWOIPTMR2DAQLQALIYZANCNFSM4IFNWDLQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453785","html_url":"https://github.com/openzipkin/zipkin/pull/2696#issuecomment-513453785","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2696","id":513453785,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzQ1Mzc4NQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-20T09:51:33Z","updated_at":"2019-07-20T09:51:33Z","author_association":"CONTRIBUTOR","body":"There are tests :)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513453785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513597680","html_url":"https://github.com/openzipkin/zipkin/issues/2674#issuecomment-513597680","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2674","id":513597680,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU5NzY4MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T23:41:16Z","updated_at":"2019-07-21T23:41:16Z","author_association":"MEMBER","body":"here's a more recent stack trace of the \"initial request not falling back to well known addresses\" problem off off @kojilin's branch of 0.89\r\n\r\n```\r\n2019-07-22 08:36:58.160  WARN 58431 --- [-worker-nio-2-1] z.s.i.BodyIsExceptionMessage             : Unexpected error handling request.\r\n\r\ncom.linecorp.armeria.client.endpoint.EndpointGroupException: com.linecorp.armeria.client.endpoint.OrElseEndpointGroup@49f257c5 is empty\r\n\tat com.linecorp.armeria.client.endpoint.RoundRobinStrategy$RoundRobinSelector.select(RoundRobinStrategy.java:65) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.endpoint.EndpointGroupRegistry.selectNode(EndpointGroupRegistry.java:120) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.Endpoint.resolve(Endpoint.java:215) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.HttpClientDelegate.execute(HttpClientDelegate.java:61) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.HttpClientDelegate.execute(HttpClientDelegate.java:42) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.encoding.HttpDecodingClient.execute(HttpDecodingClient.java:92) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.encoding.HttpDecodingClient.execute(HttpDecodingClient.java:39) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.logging.LoggingClient.execute(LoggingClient.java:172) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.lambda$execute$0(RawContentLoggingClient.java:53) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1106) ~[?:?]\r\n\tat java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2235) ~[?:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.execute(RawContentLoggingClient.java:48) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.RawContentLoggingClient.execute(RawContentLoggingClient.java:30) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat com.linecorp.armeria.client.brave.BraveClient.execute(BraveClient.java:152) ~[armeria-brave-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.brave.BraveClient.execute(BraveClient.java:56) ~[armeria-brave-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.internal.ClientUtil.executeWithFallback(ClientUtil.java:42) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.UserClient.execute(UserClient.java:159) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.DefaultHttpClient.execute(DefaultHttpClient.java:61) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.DefaultHttpClient.execute(DefaultHttpClient.java:78) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat com.linecorp.armeria.client.DefaultHttpClient.execute(DefaultHttpClient.java:74) ~[armeria-zipkin-armeria-0.21.2.Final-gb1aa67a-1413.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.HttpCall.sendRequest(HttpCall.java:133) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.elasticsearch.internal.client.HttpCall.doExecute(HttpCall.java:96) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.Call$Base.execute(Call.java:380) ~[zipkin-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.elasticsearch.VersionSpecificTemplates.getVersion(VersionSpecificTemplates.java:224) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n\tat zipkin2.elasticsearch.VersionSpecificTemplates.get(VersionSpecificTemplates.java:190) ~[zipkin-storage-elasticsearch-2.15.1-SNAPSHOT.jar!/:?]\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513597680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598153","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513598153","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513598153,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU5ODE1Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T23:48:09Z","updated_at":"2019-07-21T23:48:09Z","author_association":"MEMBER","body":"@anuraaga I assigned to you as I'm mostly offline today and I don't think we should release the server while we get hung requests. Especially doing this on POST is dangerous because it can tie up reporter threads on clients until their timeout.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598362","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513598362","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513598362,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU5ODM2Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T23:51:32Z","updated_at":"2019-07-21T23:51:32Z","author_association":"MEMBER","body":"ps when we get to this spot, you can only `kill -9` the server\r\n\r\n```\r\n2019-07-22 08:44:58.370  WARN 59222 --- [-worker-nio-2-6] c.l.a.i.a.DefaultExceptionHandler        : [id: 0x5ff10303, L:0.0.0.0/0.0.0.0:9411 ! R:/0:0:0:0:0:0:0:1:58882][h1c://macbook-pro-7.local:9411/api/v2/traces#GET] Unhandled exception from an annotated service:\r\n\r\ncom.linecorp.armeria.common.stream.AbortedStreamException: null\r\n\r\n^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C^C\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598456","html_url":"https://github.com/openzipkin/zipkin/issues/2697#issuecomment-513598456","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2697","id":513598456,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU5ODQ1Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T23:53:09Z","updated_at":"2019-07-21T23:53:09Z","author_association":"MEMBER","body":"here is an example of hung requests. While this is probably a bug, it is the sort of thing that we should have some notes about in the \"don't panic\" guide. Because we have been looking carefully at code and yet somehow get to a place where server can't even stop. We need some tips on places to look when we accidentally make some small problem that causes this.\r\n\r\nhttps://github.com/openzipkin/zipkin/issues/2699","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598624","html_url":"https://github.com/openzipkin/zipkin/pull/2700#issuecomment-513598624","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2700","id":513598624,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU5ODYyNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T23:55:56Z","updated_at":"2019-07-21T23:55:56Z","author_association":"MEMBER","body":"To try:\r\n\r\n```bash\r\nTAG=new-armeria-tracer-SNAPSHOT\r\ncurl -sSL https://jitpack.io/com/github/openzipkin/zipkin/zipkin-server/${TAG}/zipkin-server-${TAG}-exec.jar > zipkin.jar\r\nSELF_TRACING_ENABLED=true ES_HTTP_LOGGING=body STORAGE_TYPE=elasticsearch java -jar zipkin.jar\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513598624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513600528","html_url":"https://github.com/openzipkin/zipkin/issues/2695#issuecomment-513600528","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2695","id":513600528,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYwMDUyOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T00:20:56Z","updated_at":"2019-07-22T00:20:56Z","author_association":"MEMBER","body":"also we should not use tracing either on health check I think.\r\n\r\n```\r\n {startTime=2019-07-22T00:20:03.556Z(1563754803556371), length=0B, duration=354Âµs(354750ns), scheme=none+h1c, headers=[:method=GET, :path=/_cluster/health, :authority=localhost:9200, :scheme=http, x-b3-traceid=779bbdc81c3d74e4, x-b3-spanid=779bbdc81c3d74e4, x-b3-sampled=0, user-agent=armeria/unknown]}\r\n2019-07-22 09:20:03.559  INFO 64325 --- [-worker-nio-4-3] c.l.a.c.l.LoggingClient                  : Response: {startTime=2019-07-22T00:20:03.558Z(1563754803558768), length=397B, duration=301Âµs(301329ns), headers=[:status=200, content-type=application/json; charset=UTF-8, content-length=397], content={\"cluster_name\":\"CollectorDBCluster\",\"status\":\"yellow\",\"timed_out\":false,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":10,\"active_shards\":10,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":10,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":0,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":0,\"active_shards_percent_as_number\":50.0}}\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513600528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513621248","html_url":"https://github.com/openzipkin/zipkin/pull/2700#issuecomment-513621248","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2700","id":513621248,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyMTI0OA==","user":{"login":"trustin","id":173918,"node_id":"MDQ6VXNlcjE3MzkxOA==","avatar_url":"https://avatars.githubusercontent.com/u/173918?v=4","gravatar_id":"","url":"https://api.github.com/users/trustin","html_url":"https://github.com/trustin","followers_url":"https://api.github.com/users/trustin/followers","following_url":"https://api.github.com/users/trustin/following{/other_user}","gists_url":"https://api.github.com/users/trustin/gists{/gist_id}","starred_url":"https://api.github.com/users/trustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trustin/subscriptions","organizations_url":"https://api.github.com/users/trustin/orgs","repos_url":"https://api.github.com/users/trustin/repos","events_url":"https://api.github.com/users/trustin/events{/privacy}","received_events_url":"https://api.github.com/users/trustin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T02:53:32Z","updated_at":"2019-07-22T02:53:32Z","author_association":"NONE","body":"Thanks a log, @adriancole !","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513621248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513621668","html_url":"https://github.com/openzipkin/zipkin/pull/2677#issuecomment-513621668","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2677","id":513621668,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyMTY2OA==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T02:56:14Z","updated_at":"2019-07-22T02:56:14Z","author_association":"MEMBER","body":"PTAL","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513621668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513623765","html_url":"https://github.com/openzipkin/zipkin/pull/2691#issuecomment-513623765","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2691","id":513623765,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyMzc2NQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:10:02Z","updated_at":"2019-07-22T03:10:02Z","author_association":"MEMBER","body":"PTAL","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513623765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513624292","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513624292","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513624292,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyNDI5Mg==","user":{"login":"trustin","id":173918,"node_id":"MDQ6VXNlcjE3MzkxOA==","avatar_url":"https://avatars.githubusercontent.com/u/173918?v=4","gravatar_id":"","url":"https://api.github.com/users/trustin","html_url":"https://github.com/trustin","followers_url":"https://api.github.com/users/trustin/followers","following_url":"https://api.github.com/users/trustin/following{/other_user}","gists_url":"https://api.github.com/users/trustin/gists{/gist_id}","starred_url":"https://api.github.com/users/trustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trustin/subscriptions","organizations_url":"https://api.github.com/users/trustin/orgs","repos_url":"https://api.github.com/users/trustin/repos","events_url":"https://api.github.com/users/trustin/events{/privacy}","received_events_url":"https://api.github.com/users/trustin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:13:39Z","updated_at":"2019-07-22T03:13:39Z","author_association":"NONE","body":"Looks like you're blocking an event loop:\r\n\r\n```\r\n\"armeria-common-worker-nio-2-4\" #38 daemon prio=5 os_prio=31 cpu=15.51ms elapsed=30.84s tid=0x00007fc8faa5e000 nid=0x8503 waiting for monitor entry  [0x000070000e5bd000]\r\n   java.lang.Thread.State: BLOCKED (on object monitor)\r\n\tat zipkin2.elasticsearch.AutoValue_ElasticsearchStorage.ensureIndexTemplates(AutoValue_ElasticsearchStorage.java:36)\r\n\t- waiting to lock <0x0000000705c23e68> (a zipkin2.elasticsearch.AutoValue_ElasticsearchStorage)\r\n\tat zipkin2.elasticsearch.ElasticsearchStorage.spanConsumer(ElasticsearchStorage.java:284)\r\n\tat zipkin2.collector.Collector.store(Collector.java:178)\r\n\tat zipkin2.collector.Collector.accept(Collector.java:124)\r\n\tat zipkin2.server.internal.ZipkinHttpCollector.lambda$validateAndStoreSpans$0(ZipkinHttpCollector.java:162)\r\n\tat zipkin2.server.internal.ZipkinHttpCollector$$Lambda$869/0x00000008006a4840.apply(Unknown Source)\r\n\tat java.util.concurrent.CompletableFuture.uniHandle(java.base@11.0.3/CompletableFuture.java:930)\r\n\tat java.util.concurrent.CompletableFuture$UniHandle.tryFire(java.base@11.0.3/CompletableFuture.java:907)\r\n\tat java.util.concurrent.CompletableFuture$Completion.run(java.base@11.0.3/CompletableFuture.java:478)\r\n\tat com.linecorp.armeria.common.AbstractRequestContext.lambda$makeContextAware$1(AbstractRequestContext.java:69)\r\n\tat com.linecorp.armeria.common.AbstractRequestContext$$Lambda$879/0x00000008006a1c40.run(Unknown Source)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:515)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.lang.Thread.run(java.base@11.0.3/Thread.java:834)\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513624292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513629849","html_url":"https://github.com/openzipkin/zipkin/pull/2677#issuecomment-513629849","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2677","id":513629849,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyOTg0OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:48:49Z","updated_at":"2019-07-22T03:48:49Z","author_association":"MEMBER","body":"thanks much!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513629849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513630078","html_url":"https://github.com/openzipkin/zipkin/issues/2646#issuecomment-513630078","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2646","id":513630078,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYzMDA3OA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:50:20Z","updated_at":"2019-07-22T03:50:20Z","author_association":"MEMBER","body":"we have a pending pull request on zipkin-aws, now. thanks. I don't think there's any decision left as we've already made it, so closing this.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513630078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513630599","html_url":"https://github.com/openzipkin/zipkin/pull/2691#issuecomment-513630599","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2691","id":513630599,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYzMDU5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:53:37Z","updated_at":"2019-07-22T03:53:37Z","author_association":"MEMBER","body":"looks good. if we want to later change the headless/incomplete root span name, we have a test to change!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513630599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513631218","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513631218","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513631218,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYzMTIxOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:57:36Z","updated_at":"2019-07-22T03:57:36Z","author_association":"MEMBER","body":"Thanks, so we do want commands to block until the template is correct. However, we don't want to block the server's ability to process requests or shutdown.\r\n\r\nI'm guessing here we shouldn't be using eventLoop?\r\nhttps://github.com/openzipkin/zipkin/blob/master/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpCollector.java#L110-L113\r\n\r\nor is it that contextAwareExecutor is not something that will unblock the event loop?\r\nhttps://github.com/openzipkin/zipkin/blob/master/zipkin-server/src/main/java/zipkin2/server/internal/ZipkinHttpCollector.java#L168","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513631218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513635732","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513635732","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513635732,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYzNTczMg==","user":{"login":"trustin","id":173918,"node_id":"MDQ6VXNlcjE3MzkxOA==","avatar_url":"https://avatars.githubusercontent.com/u/173918?v=4","gravatar_id":"","url":"https://api.github.com/users/trustin","html_url":"https://github.com/trustin","followers_url":"https://api.github.com/users/trustin/followers","following_url":"https://api.github.com/users/trustin/following{/other_user}","gists_url":"https://api.github.com/users/trustin/gists{/gist_id}","starred_url":"https://api.github.com/users/trustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trustin/subscriptions","organizations_url":"https://api.github.com/users/trustin/orgs","repos_url":"https://api.github.com/users/trustin/repos","events_url":"https://api.github.com/users/trustin/events{/privacy}","received_events_url":"https://api.github.com/users/trustin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T04:28:43Z","updated_at":"2019-07-22T04:28:43Z","author_association":"NONE","body":"If you want to wait until `ensureIndexTemplates()` completes, you need to make sure it is run from a non-eventloop thread, such as `ctx.blockingTaskExecutor()`.\r\n\r\n`ctx.contextAwareExecutor()` (or `contextAwareEventLoop()` is just a decorated version of `ctx.eventLoop()` which sets a thread-local context. You might want to use `ctx.makeContextAware(ctx.blockingTaskExecutor())` if you want to make `blockingTaskExecutor()` context-aware.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513635732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513639112","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513639112","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513639112,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYzOTExMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T04:50:11Z","updated_at":"2019-07-22T04:50:11Z","author_association":"MEMBER","body":"thanks for the tips trustin! I am boarding a flight now but this is great.\n\nOn Mon, Jul 22, 2019, 1:28 PM Trustin Lee <notifications@github.com> wrote:\n\n> If you want to wait until ensureIndexTemplates() completes, you need to\n> make sure it is run from a non-eventloop thread, such as\n> ctx.blockingTaskExecutor().\n>\n> ctx.contextAwareExecutor() (or contextAwareEventLoop() is just a\n> decorated version of ctx.eventLoop() which sets a thread-local context.\n> You might want to use ctx.makeContextAware(ctx.blockingTaskExecutor()) if\n> you want to make blockingTaskExecutor() context-aware.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/issues/2699?email_source=notifications&email_token=AAAPVV6WDS7QKXVX7BZKMCLQAUZP3A5CNFSM4IFTYDLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2OXLFA#issuecomment-513635732>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV3VHYSE6CYUIMWNBELQAUZP3ANCNFSM4IFTYDLA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513639112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513665433","html_url":"https://github.com/openzipkin/zipkin/pull/2703#issuecomment-513665433","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2703","id":513665433,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY2NTQzMw==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T06:57:11Z","updated_at":"2019-07-22T06:57:11Z","author_association":"CONTRIBUTOR","body":"I initially tried an approach of eagerly initializing storage to get the blocking out of the way, but it means storage has to be up before zipkin server, which I guess we don't require.\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513665433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513666762","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513666762","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513666762,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY2Njc2Mg==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:02:04Z","updated_at":"2019-07-22T07:02:04Z","author_association":"CONTRIBUTOR","body":"For a bit more info, I think the deadlock happens when resolving DNS for the blocking HTTP request - we happen to be using a separate worker group for our client factory so usually requests would not actually deadlock. But our dns endpoint group is not configured with an event loop and uses the default - this is why even `orElse` didn't help here, because while the fallback isn't health checked, it is using DNS on a blocked event loop.\r\n\r\nFor now #2703 moves our span logic off of the event loop - going forward we'll want to see how we can make our async APIs actually async.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513666762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513678220","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513678220","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513678220,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY3ODIyMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:41:10Z","updated_at":"2019-07-22T07:41:10Z","author_association":"MEMBER","body":"ps on the \"really async\" part let's not get too zealous. there is a lot of\nvalue ensuring that the index template is actually installed. if that\nimplies blocking so be it.\n\nOn Mon, Jul 22, 2019, 4:02 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> For a bit more info, I think the deadlock happens when resolving DNS for\n> the blocking HTTP request - we happen to be using a separate worker group\n> for our client factory so usually requests would not actually deadlock. But\n> our dns endpoint group is not configured with an event loop and uses the\n> default - this is why even orElse didn't help here, because while the\n> fallback isn't health checked, it is using DNS on a blocked event loop.\n>\n> For now #2703 <https://github.com/openzipkin/zipkin/pull/2703> moves our\n> span logic off of the event loop - going forward we'll want to see how we\n> can make our async APIs actually async.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/issues/2699?email_source=notifications&email_token=AAAPVV5TDKS6K2TWMIADW4DQAVLO5A5CNFSM4IFTYDLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2O65SQ#issuecomment-513666762>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV3QKINIYIA7P73MT3LQAVLO5ANCNFSM4IFTYDLA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513678220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513678492","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513678492","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513678492,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY3ODQ5Mg==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:42:04Z","updated_at":"2019-07-22T07:42:04Z","author_association":"CONTRIBUTOR","body":"async means running multiple calls in order using `Call` and `Call.map`, not just removing the code completely ;)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513678492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513680900","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513680900","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513680900,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY4MDkwMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:49:30Z","updated_at":"2019-07-22T07:49:30Z","author_association":"MEMBER","body":"ok I am mainly just on edge because our server isnt stable and really hard\nto debug now. i really dont want any goal to be made which puts us in a\nplace where we can recreate this circumstance easily. of the million\ndefinitions of async the one i am concerned with is a goal of async which\nimplies someone might accidentally sit on the event loop. we have several\nexternal storage modules and their health checks work in many ways. just\nwant to be able to release software again\n\nOn Mon, Jul 22, 2019, 4:42 PM Anuraag Agrawal <notifications@github.com>\nwrote:\n\n> async means running multiple calls in order using Call and Call.map, not\n> just removing the code completely ;)\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/issues/2699?email_source=notifications&email_token=AAAPVVZDVFP2IYEQK37EWQDQAVQE3A5CNFSM4IFTYDLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2PBZHA#issuecomment-513678492>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV37FJICEMMUPSXBR3DQAVQE3ANCNFSM4IFTYDLA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513680900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513682885","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513682885","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513682885,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY4Mjg4NQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:55:38Z","updated_at":"2019-07-22T07:55:38Z","author_association":"MEMBER","body":"one thing we did recently was make sure calls to execute directly through a\nbase storage integration test. this was indirectly added during the\nthrottling work because the in memory storage was executing inline at call\nconstruction time. blocking during call.enqueue is going to be possible\nespecially in third party.\n\nuntil we can detect this and issue big warning, it is probably better to\nnot rely on enqueue being non blocking if the alternative is a server you\ncant ctrl c out of and not know why.\n\nOn Mon, Jul 22, 2019, 4:49 PM Adrian Cole <adrian.f.cole@gmail.com> wrote:\n\n> ok I am mainly just on edge because our server isnt stable and really hard\n> to debug now. i really dont want any goal to be made which puts us in a\n> place where we can recreate this circumstance easily. of the million\n> definitions of async the one i am concerned with is a goal of async which\n> implies someone might accidentally sit on the event loop. we have several\n> external storage modules and their health checks work in many ways. just\n> want to be able to release software again\n>\n> On Mon, Jul 22, 2019, 4:42 PM Anuraag Agrawal <notifications@github.com>\n> wrote:\n>\n>> async means running multiple calls in order using Call and Call.map, not\n>> just removing the code completely ;)\n>>\n>> â€”\n>> You are receiving this because you authored the thread.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/openzipkin/zipkin/issues/2699?email_source=notifications&email_token=AAAPVVZDVFP2IYEQK37EWQDQAVQE3A5CNFSM4IFTYDLKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2PBZHA#issuecomment-513678492>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AAAPVV37FJICEMMUPSXBR3DQAVQE3ANCNFSM4IFTYDLA>\n>> .\n>>\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513682885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513684981","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513684981","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513684981,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY4NDk4MQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T08:01:50Z","updated_at":"2019-07-22T08:01:50Z","author_association":"CONTRIBUTOR","body":"It makes sense to keep things simple, especially given external composability, so keeping business logic on blocking executor threads makes sense too. Forget I ever mentioned async :P But I'd say in that case, our goal should be to remove the `enqueue` family of methods at some point - methods taking callbacks are a sign that they won't block the calling thread, but if that is actually possible, `execute` captures the fact that it may block more clearly and is easier to use to boot.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513684981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513690356","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513690356","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513690356,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY5MDM1Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T08:18:25Z","updated_at":"2019-07-22T08:18:25Z","author_association":"MEMBER","body":"rag it isnt that they shouldn't be async it is that the repercussions\nshouldn't change from meh to catastrophe in a minor release.\n\nbreaking api to remove async adds massive work everywhere and we are\nforever stuck in infrastructure thrash as it is.\n\nthis is why I would suggest we be tolerant and then go and make things\nnicer.\n\nif we run in a mode that has catastrophic effects if async isnt really\nasync or not async enough. that mode must be optional because there is no\nway we can support otherwise and the act of support isnt optional.\n\nif it is a new version completely of the runtime.. fair game but in that\ncase if breaking api everywhere that is exactly the time to let async work\nproperly vs the other way around.\n\nIn brown field we have to transition and be careful about how we treat new\nstrictness. opt in like a new method that suggests super async not more\nthan 10us blocking or whatever the new contract is.. knowing that\ncontract.. testing that contract then leveraging it.\n\nhope this makes sense.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513690356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513695446","html_url":"https://github.com/openzipkin/zipkin/issues/2699#issuecomment-513695446","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2699","id":513695446,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY5NTQ0Ng==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T08:32:33Z","updated_at":"2019-07-22T08:32:33Z","author_association":"CONTRIBUTOR","body":"Right we're on the same page - we wouldn't ever want to make a big API change in either direction in a minor release. Hence #2703 - and while I was planning on migrating other APIs to be on the event loop thinking enqueue doesn't block, now I know not to try that. \r\n\r\nThis discussion is just to record options for where we may want to go at some point and hopefully providing extra knowledge and context for concepts used in Armeria along the way. ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513695446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513712050","html_url":"https://github.com/openzipkin/zipkin/issues/2451#issuecomment-513712050","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2451","id":513712050,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzcxMjA1MA==","user":{"login":"shakuzen","id":8924140,"node_id":"MDQ6VXNlcjg5MjQxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/8924140?v=4","gravatar_id":"","url":"https://api.github.com/users/shakuzen","html_url":"https://github.com/shakuzen","followers_url":"https://api.github.com/users/shakuzen/followers","following_url":"https://api.github.com/users/shakuzen/following{/other_user}","gists_url":"https://api.github.com/users/shakuzen/gists{/gist_id}","starred_url":"https://api.github.com/users/shakuzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shakuzen/subscriptions","organizations_url":"https://api.github.com/users/shakuzen/orgs","repos_url":"https://api.github.com/users/shakuzen/repos","events_url":"https://api.github.com/users/shakuzen/events{/privacy}","received_events_url":"https://api.github.com/users/shakuzen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T09:19:16Z","updated_at":"2019-07-22T09:19:16Z","author_association":"MEMBER","body":"Just for tracking purposes, I believe it was #2633 that introduced Material UI","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513712050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513717831","html_url":"https://github.com/openzipkin/zipkin/pull/2677#issuecomment-513717831","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2677","id":513717831,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzcxNzgzMQ==","user":{"login":"shakuzen","id":8924140,"node_id":"MDQ6VXNlcjg5MjQxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/8924140?v=4","gravatar_id":"","url":"https://api.github.com/users/shakuzen","html_url":"https://github.com/shakuzen","followers_url":"https://api.github.com/users/shakuzen/followers","following_url":"https://api.github.com/users/shakuzen/following{/other_user}","gists_url":"https://api.github.com/users/shakuzen/gists{/gist_id}","starred_url":"https://api.github.com/users/shakuzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shakuzen/subscriptions","organizations_url":"https://api.github.com/users/shakuzen/orgs","repos_url":"https://api.github.com/users/shakuzen/repos","events_url":"https://api.github.com/users/shakuzen/events{/privacy}","received_events_url":"https://api.github.com/users/shakuzen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T09:35:40Z","updated_at":"2019-07-22T09:35:40Z","author_association":"MEMBER","body":"> And this improves performance by avoiding calling `/api/v2/trace` API in trace page if not needed.\r\n> In other words, reuse results of `/api/v2/traces` API in the individual trace page.\r\n\r\nI haven't thoroughly checked the implementation (sorry), but I'm wondering if a user wants to get the latest data from `/api/v2/trace` on the trace view screen, is there a way to do this? Does refreshing the web page do that? I can imagine in the case that the trace is in-progress when returned in the search results, a user will want a way to get the up-to-date trace data in the trace detail view.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513717831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513728756","html_url":"https://github.com/openzipkin/zipkin/issues/2701#issuecomment-513728756","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2701","id":513728756,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzcyODc1Ng==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T10:06:30Z","updated_at":"2019-07-22T10:06:30Z","author_association":"MEMBER","body":"I wonder if all users are using zipkin-dependencies spark jobs...","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513728756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513837155","html_url":"https://github.com/openzipkin/zipkin/issues/2701#issuecomment-513837155","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2701","id":513837155,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzgzNzE1NQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T15:18:53Z","updated_at":"2019-07-22T15:18:53Z","author_association":"MEMBER","body":"for this I mean aggregate the traces returned by /api/v2/traces in\njavascript, via a port of DependencyLinker. In this way spark doesn't\nmatter.\n\nOn Mon, Jul 22, 2019 at 7:06 PM tacigar <notifications@github.com> wrote:\n\n> I wonder if all users are using zipkin-dependencies spark jobs...\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/issues/2701?email_source=notifications&email_token=AAAPVV7LXYQPBMI4QSVZNTTQAWBCRA5CNFSM4IFUTU62YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2POB5A#issuecomment-513728756>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV2EKY3YUVJQBG6WIQLQAWBCRANCNFSM4IFUTU6Q>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/513837155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514028727","html_url":"https://github.com/openzipkin/zipkin/issues/2701#issuecomment-514028727","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2701","id":514028727,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDAyODcyNw==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T02:31:24Z","updated_at":"2019-07-23T02:31:24Z","author_association":"MEMBER","body":"Ah, I see!\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514028727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514093286","html_url":"https://github.com/openzipkin/zipkin/pull/2704#issuecomment-514093286","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2704","id":514093286,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDA5MzI4Ng==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T07:42:59Z","updated_at":"2019-07-23T07:42:59Z","author_association":"MEMBER","body":"I think a threshold is not useful...\r\nIf the user want to refresh search results, the user only push Enter key.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514093286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514104933","html_url":"https://github.com/openzipkin/zipkin/pull/2690#issuecomment-514104933","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2690","id":514104933,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDEwNDkzMw==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T08:17:44Z","updated_at":"2019-07-23T08:18:05Z","author_association":"MEMBER","body":"@adriancole \r\nPlease review ðŸ™‡ \r\nI want this PR merged before continuing #2656.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514104933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514108250","html_url":"https://github.com/openzipkin/zipkin/pull/2704#issuecomment-514108250","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2704","id":514108250,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDEwODI1MA==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T08:27:01Z","updated_at":"2019-07-23T08:27:01Z","author_association":"MEMBER","body":"PTAL ðŸ™‡ ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514108250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514137806","html_url":"https://github.com/openzipkin/zipkin/pull/2690#issuecomment-514137806","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2690","id":514137806,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDEzNzgwNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T09:47:47Z","updated_at":"2019-07-23T09:47:47Z","author_association":"MEMBER","body":"sorry I looked at this earlier and thought I clicked approve! thanks for the ping","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514137806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514138260","html_url":"https://github.com/openzipkin/zipkin/pull/2704#issuecomment-514138260","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2704","id":514138260,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDEzODI2MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T09:49:02Z","updated_at":"2019-07-23T09:49:02Z","author_association":"MEMBER","body":"agree about press enter is intuitive. thanks for thinking about it!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514138260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514166732","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514166732","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514166732,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDE2NjczMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T11:16:24Z","updated_at":"2019-07-23T11:16:24Z","author_association":"MEMBER","body":"keeping busy huh Rag? :)\r\n\r\nthis is great. I had been interested in junit 5 for a while. have you tried single test mvn syntax? that was one thing we needed the weird static stuff for. hopefully it works without dancing now","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514166732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514500139","html_url":"https://github.com/openzipkin/zipkin/pull/2687#issuecomment-514500139","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2687","id":514500139,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwMDEzOQ==","user":{"login":"shakuzen","id":8924140,"node_id":"MDQ6VXNlcjg5MjQxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/8924140?v=4","gravatar_id":"","url":"https://api.github.com/users/shakuzen","html_url":"https://github.com/shakuzen","followers_url":"https://api.github.com/users/shakuzen/followers","following_url":"https://api.github.com/users/shakuzen/following{/other_user}","gists_url":"https://api.github.com/users/shakuzen/gists{/gist_id}","starred_url":"https://api.github.com/users/shakuzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shakuzen/subscriptions","organizations_url":"https://api.github.com/users/shakuzen/orgs","repos_url":"https://api.github.com/users/shakuzen/repos","events_url":"https://api.github.com/users/shakuzen/events{/privacy}","received_events_url":"https://api.github.com/users/shakuzen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:34:00Z","updated_at":"2019-07-24T06:34:00Z","author_association":"MEMBER","body":"Just leaving a note that we should mention the removal of ES_MAX_REQUESTS in the release notes so users of this have more visibility.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514500139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514501007","html_url":"https://github.com/openzipkin/zipkin/pull/2687#issuecomment-514501007","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2687","id":514501007,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwMTAwNw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:37:27Z","updated_at":"2019-07-24T06:37:27Z","author_association":"MEMBER","body":"agreed. I'll own this part\n\nOn Wed, Jul 24, 2019 at 3:34 PM Tommy Ludwig <notifications@github.com>\nwrote:\n\n> Just leaving a note that we should mention the removal of ES_MAX_REQUESTS\n> in the release notes so users of this have more visibility.\n>\n> â€”\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/2687?email_source=notifications&email_token=AAAPVV3ATFVDUMIVZZOXPEDQA7ZVVA5CNFSM4IFDEHI2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2VKMKY#issuecomment-514500139>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV6HV6DHKRKVTGBWKC3QA7ZVVANCNFSM4IFDEHIQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514501007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514501243","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514501243","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514501243,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwMTI0Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:38:26Z","updated_at":"2019-07-24T06:38:26Z","author_association":"MEMBER","body":"I'm going to look at travis carefully now","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514501243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514503949","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514503949","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514503949,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwMzk0OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:49:35Z","updated_at":"2019-07-24T06:52:40Z","author_association":"MEMBER","body":"Looks like cassandra is running less tests than before. I'll look into this more carefully.\r\n\r\n\r\nzipkin\r\n\r\nbefore:\r\n```\r\n[INFO] Tests run: 81, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.024 s - in zipkin2.storage.ITInMemoryStorage\r\n```\r\n\r\nafter:\r\n```\r\n[^[[1;34mINFO^[[m] ^[[1;32mTests run: ^[[0;1;32m81^[[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.14 s - in zipkin2.storage.^[[1mITInMemoryStorage^[[m\r\n```\r\n\r\nzipkin-storage-cassandra\r\n\r\nbefore:\r\n```\r\n[WARNING] Tests run: 94, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 452.874 s - in zipkin2.storage.cassandra.ITCassandraStorage\r\n```\r\n\r\nafter:\r\n```\r\n[^[[1;33mWARNING^[[m] ^[[1;33mTests run: 85, Failures: 0, Errors: 0, Skipped: 1^[[m\r\n```\r\n\r\nzipkin-storage-cassandra-v1\r\n\r\nbefore:\r\n```\r\n[WARNING] Tests run: 90, Failures: 0, Errors: 0, Skipped: 8, Time elapsed: 389.756 s - in zipkin2.storage.cassandra.v1.ITCassandraStorage\r\n```\r\n\r\nafter:\r\n```\r\n[^[[1;33mWARNING^[[m] ^[[1;33mTests run: 83, Failures: 0, Errors: 0, Skipped: 8^[[m\r\n```\r\n\r\n\r\n\r\nzipkin-storage-elasticsearch\r\n\r\nbefore:\r\n```\r\n[INFO] Tests run: 162, Failures: 0, Errors: 0, Skipped: 0\r\n```\r\n\r\nafter:\r\n```\r\n[^[[1;34mINFO^[[m] ^[[1;32mTests run: 162, Failures: 0, Errors: 0, Skipped: 0^[[m\r\n```\r\n\r\nzipkin-storage-mysql-v1\r\n\r\nbefore:\r\n```\r\n[WARNING] Tests run: 107, Failures: 0, Errors: 0, Skipped: 1\r\n```\r\n\r\nafter:\r\n```\r\n[^[[1;33mWARNING^[[m] ^[[1;33mTests run: 107, Failures: 0, Errors: 0, Skipped: 1^[[m\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514503949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514505936","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514505936","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514505936,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwNTkzNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:57:27Z","updated_at":"2019-07-24T06:57:27Z","author_association":"MEMBER","body":"difference in zipkin-storage-cassandra-v1 is accounted for due to Disabled vs Ignore annotations","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514505936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509134","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514509134","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514509134,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwOTEzNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:09:04Z","updated_at":"2019-07-24T07:09:04Z","author_association":"MEMBER","body":"it looks like ITEnsureSchema and ITSpanConsumer in cassandra and cassandra-v1 aren't yet ported so the tests aren't being executed.\r\n\r\n@anuraaga do you have cycles to port these?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509561","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514509561","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514509561,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwOTU2MQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:10:39Z","updated_at":"2019-07-24T07:10:39Z","author_association":"CONTRIBUTOR","body":"Yup sorry for missing they weren't executing, should be ready in a bit.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509758","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514509758","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514509758,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUwOTc1OA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:11:27Z","updated_at":"2019-07-24T07:11:27Z","author_association":"MEMBER","body":"no worries. because we intentionally don't break build on integration tests being skipped it is easy to not notice","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514509758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514511660","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514511660","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514511660,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUxMTY2MA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:18:27Z","updated_at":"2019-07-24T07:18:27Z","author_association":"CONTRIBUTOR","body":"Ok missed tests ported and made the index names based on the test name","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514511660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514514143","html_url":"https://github.com/openzipkin/zipkin/pull/2668#issuecomment-514514143","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2668","id":514514143,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUxNDE0Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:27:07Z","updated_at":"2019-07-24T07:27:07Z","author_association":"MEMBER","body":"> Sleuth defaults to 10% sampling. Do you mean changing that default\n> sampling from 10% to 1 trace per second?\n>\n\nsleuth defaults aren't really important to us. yes, this is 1 trace per\nsecond for self-tracing zipkin itself. percentage is a bad choice because\nstorage requests can amplify. we need a rate limit approach for\nself-tracing when also tracing writes.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514514143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514514290","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514514290","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514514290,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUxNDI5MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:27:32Z","updated_at":"2019-07-24T07:27:32Z","author_association":"MEMBER","body":"thanks tons. will merge on green after checking the travis logs","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514514290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514523312","html_url":"https://github.com/openzipkin/zipkin/pull/2656#issuecomment-514523312","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2656","id":514523312,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDUyMzMxMg==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T07:56:44Z","updated_at":"2019-07-24T07:56:44Z","author_association":"MEMBER","body":"I'll add unit tests.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514523312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514548841","html_url":"https://github.com/openzipkin/zipkin/pull/2656#issuecomment-514548841","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2656","id":514548841,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU0ODg0MQ==","user":{"login":"tacigar","id":19551419,"node_id":"MDQ6VXNlcjE5NTUxNDE5","avatar_url":"https://avatars.githubusercontent.com/u/19551419?v=4","gravatar_id":"","url":"https://api.github.com/users/tacigar","html_url":"https://github.com/tacigar","followers_url":"https://api.github.com/users/tacigar/followers","following_url":"https://api.github.com/users/tacigar/following{/other_user}","gists_url":"https://api.github.com/users/tacigar/gists{/gist_id}","starred_url":"https://api.github.com/users/tacigar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tacigar/subscriptions","organizations_url":"https://api.github.com/users/tacigar/orgs","repos_url":"https://api.github.com/users/tacigar/repos","events_url":"https://api.github.com/users/tacigar/events{/privacy}","received_events_url":"https://api.github.com/users/tacigar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T09:10:59Z","updated_at":"2019-07-24T09:10:59Z","author_association":"MEMBER","body":"Current state:\r\n\r\n![search-page](https://user-images.githubusercontent.com/19551419/61780868-4b893780-ae3e-11e9-9d08-25d4b9620d37.gif)\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514548841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514549628","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514549628","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514549628,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU0OTYyOA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T09:13:08Z","updated_at":"2019-07-24T09:13:08Z","author_association":"CONTRIBUTOR","body":"After fixing the missed import statement change on one of them, looks like the numbers match up","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514549628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514554940","html_url":"https://github.com/openzipkin/zipkin/pull/2705#issuecomment-514554940","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2705","id":514554940,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU1NDk0MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T09:27:40Z","updated_at":"2019-07-24T09:27:40Z","author_association":"MEMBER","body":"thanks tons. you bought back a lot of build time. cant wait to read the travis publish master before and after!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514554940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514557076","html_url":"https://github.com/openzipkin/zipkin/pull/2656#issuecomment-514557076","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2656","id":514557076,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU1NzA3Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T09:33:17Z","updated_at":"2019-07-24T09:33:17Z","author_association":"MEMBER","body":"cool client side service filter!\n\nOn Wed, Jul 24, 2019, 5:11 PM tacigar <notifications@github.com> wrote:\n\n> Current state:\n>\n> [image: search-page]\n> <https://user-images.githubusercontent.com/19551419/61780868-4b893780-ae3e-11e9-9d08-25d4b9620d37.gif>\n>\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/2656?email_source=notifications&email_token=AAAPVV5QJGOOLKEWBGYSG63QBAMCLA5CNFSM4H7LVXQ2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2VWI2I#issuecomment-514548841>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAPVV425NXAQZZTDT4SODDQBAMCLANCNFSM4H7LVXQQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514557076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514574403","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514574403","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514574403,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU3NDQwMw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T10:22:18Z","updated_at":"2019-07-24T10:22:18Z","author_association":"MEMBER","body":"travis should check this 10-15m faster than before!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514574403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514581013","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514581013","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514581013,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU4MTAxMw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T10:44:30Z","updated_at":"2019-07-24T10:44:30Z","author_association":"MEMBER","body":"If it isn't practical to decouple the health check http config from the real http config, probably the better choice would be to have the health check config use tracing, but still unsampled. We can switch the headers to b3 single to lower the impact also. I want to be conscious of the amount of energy spent on health checking elasticsearch, which is more than some of our storage impls get at all :P","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514581013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514581521","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514581521","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514581521,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU4MTUyMQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T10:46:14Z","updated_at":"2019-07-24T10:46:14Z","author_association":"MEMBER","body":"basically the most annoying thing is health checks polluting the output of ES_HTTP_LOGGING. by reverting the tracing back where it was, we can still accomplish the more important and visible change.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514581521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514590514","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514590514","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514590514,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU5MDUxNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T11:16:56Z","updated_at":"2019-07-24T11:16:56Z","author_association":"MEMBER","body":"The combo of what you did here moving logging, and being less verbose in b3 headers via https://github.com/openzipkin/zipkin/pull/2707 should be enough I think. Let's revert the tracing part and get this merged?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514590514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514592893","html_url":"https://github.com/openzipkin/zipkin/pull/2707#issuecomment-514592893","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2707","id":514592893,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU5Mjg5Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T11:25:28Z","updated_at":"2019-07-24T11:25:28Z","author_association":"MEMBER","body":"https://github.com/openzipkin/brave/issues/949 is related","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514592893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514601915","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514601915","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514601915,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDYwMTkxNQ==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T11:58:33Z","updated_at":"2019-07-24T11:58:33Z","author_association":"CONTRIBUTOR","body":"Yup will clean it up by tomorrow. Also realized that IIUC https://github.com/openzipkin/zipkin/pull/2700 should prevent the health check from being sampled since health check isn't in the context of a server request","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514601915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514607257","html_url":"https://github.com/openzipkin/zipkin/pull/2706#issuecomment-514607257","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/2706","id":514607257,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDYwNzI1Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T12:16:58Z","updated_at":"2019-07-24T12:16:58Z","author_association":"MEMBER","body":"Yup will clean it up by tomorrow. Also realized that IIUC #2700\n> <https://github.com/openzipkin/zipkin/pull/2700> should prevent the\n> health check from being sampled since health check isn't in the context of\n> a server request\n>\n\nright it will prevent it from being sampled, but for consistency we still\npropagate sampled=0 downstream :P Thanks for plugging along, Rag!\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/514607257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]