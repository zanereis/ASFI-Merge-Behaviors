[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2242851074","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2242851074","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2242851074,"node_id":"IC_kwDOACaFSM6FrzEC","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T12:35:30Z","updated_at":"2024-07-22T12:36:57Z","author_association":"CONTRIBUTOR","body":"@meatballspaghetti - I think you should rebase these changes onto `main`. Reason being that `ArrayByteSequence.reset` will be added in 3.1 (#4735) and overlaps the functionality of `setArray` and `setLength`. I think when you rebase onto `main`, your additions may not be needed at all. I think MutableByteSequence can probably be deleted and the other classes fixed to use the existing ArrayByteSequence methods. I don't think that the `isMutable` member variable needs to be added as it gives a false sense of immutability. Some of the constructors in ArrayByteSequence retain a reference to the underlying byte[] instead of copying it. If that underlying byte[] changes, then the contents of this ArrayByteSequence change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2242851074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2242873893","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2242873893","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2242873893,"node_id":"IC_kwDOACaFSM6Fr4ol","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T12:47:01Z","updated_at":"2024-07-22T12:47:01Z","author_association":"CONTRIBUTOR","body":"> @meatballspaghetti - I think you should rebase these changes onto `main`. Reason being that `ArrayByteSequence.reset` will be added in 3.1 (#4735) and overlaps the functionality of `setArray` and `setLength`. I think when you rebase onto `main`, your additions may not be needed at all. I think MutableByteSequence can probably be deleted and the other classes fixed to use the existing ArrayByteSequence methods. I don't think that the `isMutable` member variable needs to be added as it gives a false sense of immutability. Some of the constructors in ArrayByteSequence retain a reference to the underlying byte[] instead of copying it. If that underlying byte[] changes, then the contents of this ArrayByteSequence change.\r\n\r\nOkay, makes sense. I'll switch to `main` and move forward with just the deletion of `MutableByteSequence`, without the additions from this branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2242873893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243412557","html_url":"https://github.com/apache/accumulo/issues/4423#issuecomment-2243412557","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4423","id":2243412557,"node_id":"IC_kwDOACaFSM6Ft8JN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T16:58:05Z","updated_at":"2024-07-22T16:58:05Z","author_association":"CONTRIBUTOR","body":"Looking at the code, it appears that the places where this could occur are only in the TableConfiguration constructor when calling `createScanDispatcher` and `createCompactionDispatcher`. In both cases they are calling `Property.createTableInstanceFromPropertyName` and passing in `null` for the default instance. However, for both properties being referenced default property class names are documented, just not being used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243412557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243435557","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2243435557","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2243435557,"node_id":"IC_kwDOACaFSM6FuBwl","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T17:11:31Z","updated_at":"2024-07-22T17:11:31Z","author_association":"CONTRIBUTOR","body":"Updated to change base branch to `main` and remove previous constructor additions. All previous references to `MutableByteSequence` now replaced with `ArrayByteSequence`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243435557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243512124","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2243512124","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2243512124,"node_id":"IC_kwDOACaFSM6FuUc8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T17:58:05Z","updated_at":"2024-07-22T17:58:05Z","author_association":"CONTRIBUTOR","body":"> It looks like since derivation is skipped for the null case, then the previous computed result will continue to get used. That doesn't seem right to me. If the derivation results in null, wouldn't that mean that some configuration changed that invalidated the previously computed result? Shouldn't the deriver itself be updated to compute the default instance as the new value in the null case and cache the null result?\r\n\r\nIf the configuration is updated, and the property type is a class name, then null causes an error. The Deriver interface does not include enough information to know whether or not a null return type is valid, or might cause an error. In the case of the two properties in TableConfiguration, a null value here will cause an error because a class name is expected. The API documentation says, \"When configuration is not changing, keeps returning the same object.\" Maybe the javadoc should be updated to say something about null values.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243512124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243759821","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2243759821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2243759821,"node_id":"IC_kwDOACaFSM6FvQ7N","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T20:29:18Z","updated_at":"2024-07-22T20:29:18Z","author_association":"CONTRIBUTOR","body":"> Maybe the javadoc should be updated to say something about null values.\r\n\r\nDo you think it would make sense to have the javadoc mention that null return values are not expected and make the impl throw an exception if one is seen (could throw an exception instead of log a warn)?  This would solve the problem mentioned that can not differentiate between null because of an error or an expected null.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243759821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243777661","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2243777661","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2243777661,"node_id":"IC_kwDOACaFSM6FvVR9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T20:41:02Z","updated_at":"2024-07-22T20:41:02Z","author_association":"CONTRIBUTOR","body":"> > Maybe the javadoc should be updated to say something about null values.\r\n> \r\n> Do you think it would make sense to have the javadoc mention that null return values are not expected and make the impl throw an exception if one is seen (could throw an exception instead of log a warn)? This would solve the problem mentioned that can not differentiate between null because of an error or an expected null.\r\n\r\nI had the changes in 6f1303b staged before I read your comment. So I pushed them, but can change them if you like. I just made a note in the javadoc that if the converter returns null the previous value is used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243777661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243911968","html_url":"https://github.com/apache/accumulo/issues/4706#issuecomment-2243911968","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4706","id":2243911968,"node_id":"IC_kwDOACaFSM6Fv2Eg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-22T22:23:35Z","updated_at":"2024-07-22T22:23:35Z","author_association":"CONTRIBUTOR","body":"Completed by #4728","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2243911968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2244069615","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2244069615","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2244069615,"node_id":"IC_kwDOACaFSM6Fwcjv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T01:14:58Z","updated_at":"2024-07-23T01:15:47Z","author_association":"CONTRIBUTOR","body":"> I had the changes in https://github.com/apache/accumulo/commit/6f1303b656c9c3746031fbd51a39329038ef2753 staged before I read your comment. So I pushed them, but can change them if you like. I just made a note in the javadoc that if the converter returns null the previous value is used.\r\n\r\nI don't have any recommendations at the moment. Was poking around in the code trying to understand what is going on.\r\n\r\nLooking in the code found that pattern that the scan and compaction dispatchers on failure will fall back to the default services, like the following code.\r\n\r\nhttps://github.com/apache/accumulo/blob/0e7417d0369aca85e149563cc52ad7c9108dfe6d/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L1520-L1525\r\n\r\nSo it seems some code was relying on the nulls for compaction, but maybe not for scans not sure.  \r\n\r\nThe following were some situations I was thinking through when looking at the code.\r\n\r\n  * User configures an invalid class name for a compaction dispatcher or scan dispatcher.  In this case,  I think the code before and after the changes in this PR would probably fall back to the default services/executors.\r\n  * User configures a valid class name for a dispatcher, however there is a transient classloader problem where the class can not be created.  Not sure about what would happen before these changes.  After these changes the code may stick with the default impls that were passed to Property.createTableInstanceFromPropertyName even after the transient class loader issue resolves itself.  Not sure what it would do before these changes.\r\n  * User configures a valid class name for a dispatcher and the class is loaded ok, but it throws an error in init.  I think before and after these changes this will cause an exception to percolate up.  So its seems the code goes through a lot of trouble to handle one error (class loading or class not found) and fall back to defaults, but for another type of error it just lets it fly.\r\n\r\nBased on this https://github.com/apache/accumulo/issues/4423#issuecomment-2243412557 I was only looking at the scan and compaction dispatch when analyzing the code. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2244069615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245023645","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2245023645","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2245023645,"node_id":"IC_kwDOACaFSM6F0Fed","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T11:50:49Z","updated_at":"2024-07-23T11:50:49Z","author_association":"CONTRIBUTOR","body":">Here is an update to the current state of things.\r\n> ...\r\n> Follow on Work:\r\n>  * Add support for using a random port with gRPC when setting the port to 0.\r\n>  * Explore supporting kerberos and ssl w/ grpc\r\n>  * Explore how to implement tracing with gRPC.\r\n>  * Investigate error and exception handling with gRPC.\r\n>  * Investigate any other properties that need to be customized for the gRPC server and clients.\r\n\r\nI feel like we put the cart before the horse here. These items tagged for follow-on work are actually foundational things that, IMO, should be designed and tested first. I think the work that you have done here is useful to show that grpc can be used, but I'm not convinced that this is the starting point for the introduction of grpc into the codebase.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245023645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245050098","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2245050098","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2245050098,"node_id":"IC_kwDOACaFSM6F0L7y","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T12:02:27Z","updated_at":"2024-07-23T12:04:16Z","author_association":"CONTRIBUTOR","body":"> I feel like we put the cart before the horse here. These items tagged for follow-on work are actually foundational things that, IMO, should be designed and tested first. I think the work that you have done here is useful to show that grpc can be used, but I'm not convinced that this is the starting point for the introduction of grpc into the codebase.\r\n\r\nSo to clarify, follow on work are of course foundational things and need to be done before anything could be released. It's not that they are not important, it's that this PR is already 100 files changed and enormous and I don't think we should try and jam everything into one PR or you end up trying to review too much. \r\n\r\n@keith-turner and I talked about creating another branch like no-chop merge but we didn't really think it would be a huge deal to just merge things into elasticity as long as the build works. However it would certainly be possible to just create another branch like we did with no-chop merge and have multiple PRs against that first before merging into back into elasticity.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245050098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245358935","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2245358935","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2245358935,"node_id":"IC_kwDOACaFSM6F1XVX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T14:07:02Z","updated_at":"2024-07-23T14:07:02Z","author_association":"CONTRIBUTOR","body":"> So to clarify, follow on work are of course foundational things and need to be done before anything could be released.\r\n\r\nIMO, I think the foundation work should be done before this is merged, not released. The implementation of the foundation work may change the approach taken in this PR.\r\n\r\n> It's not that they are not important, it's that this PR is already 100 files changed and enormous and I don't think we should try and jam everything into one PR or you end up trying to review too much.\r\n> \r\n> @keith-turner and I talked about creating another branch like no-chop merge but we didn't really think it would be a huge deal to just merge things into elasticity as long as the build works. However it would certainly be possible to just create another branch like we did with no-chop merge and have multiple PRs against that first before merging into back into elasticity.\r\n\r\nI have no issue with a long-lived feature branch, much like elasticity, for the grpc work. I don't these changes should be merged into elasticity at this time.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245358935/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245497320","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2245497320","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2245497320,"node_id":"IC_kwDOACaFSM6F15Ho","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T15:01:18Z","updated_at":"2024-07-23T15:01:43Z","author_association":"CONTRIBUTOR","body":"If no one has any objections i can create a feature branch (i'll probably just call it `grpc` unless someone has a better name) so this can be merged sooner rather than later and then we can continue on with the follow on work to get it into a state before it goes into elasticity. It will also allow others to submit PRs as well against it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245497320/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245545606","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2245545606","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2245545606,"node_id":"IC_kwDOACaFSM6F2E6G","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T15:20:34Z","updated_at":"2024-07-23T15:20:34Z","author_association":"CONTRIBUTOR","body":"> > The following were some situations I was thinking through when looking at the code.\r\n> \r\n> * User configures an invalid class name for a compaction dispatcher or scan dispatcher.  In this case,  I think the code before and after the changes in this PR would probably fall back to the default services/executors.\r\n-  Yes this behavior happens today, the class is not able to be found and the compaction dispatcher will drop back to the default. \r\n\r\n> * User configures a valid class name for a dispatcher, however there is a transient classloader problem where the class can not be created.  Not sure about what would happen before these changes.  After these changes the code may stick with the default impls that were passed to Property.createTableInstanceFromPropertyName even after the transient class loader issue resolves itself.  Not sure what it would do before these changes.\r\n- Based on previous testing, it appeared that the Deriver would store a nil object that's returned from the classloader. Because the property in the configuration never changed, it would never attempt to reload the class. \r\n\r\n> * User configures a valid class name for a dispatcher and the class is loaded ok, but it throws an error in init.  I think before and after these changes this will cause an exception to percolate up.  So its seems the code goes through a lot of trouble to handle one error (class loading or class not found) and fall back to defaults, but for another type of error it just lets it fly.\r\n\r\nError on init seems to be an okay pattern for failure because we cannot guarantee the creation order of properties. \r\nIn that case, there is nothing wrong with the original class but there is something wrong with the configuration of that class. #4338 may help to improve validation in future cases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245545606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245560611","html_url":"https://github.com/apache/accumulo/issues/4493#issuecomment-2245560611","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4493","id":2245560611,"node_id":"IC_kwDOACaFSM6F2Ikj","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T15:27:15Z","updated_at":"2024-07-23T15:27:15Z","author_association":"CONTRIBUTOR","body":"The work for 2.1 was completed for this issue. Moved this to 3.1 milestone.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245560611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245575274","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2245575274","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2245575274,"node_id":"IC_kwDOACaFSM6F2MJq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T15:33:05Z","updated_at":"2024-07-23T15:33:05Z","author_association":"CONTRIBUTOR","body":"I think given the comments above regarding classloader configuration changes, I'm going to change this PR to *not* return the prior property value (in this case a class) and instead throw an error. By returning the prior class value and silently succeeding we are giving the impression that we are doing the correct thing that the user intended, but in reality we are not. Specifically for classes that are used for iterators and such this could lead to incorrect results or unintended consequences. It's likely safer and more correct to just fail.\r\n\r\nIf the Deriver had more information about the type of object that the converter function was going to return, then we might be able to do some validation in the Deriver code.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245575274/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245819614","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2245819614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2245819614,"node_id":"IC_kwDOACaFSM6F3Hze","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T17:22:27Z","updated_at":"2024-07-23T17:22:27Z","author_association":"CONTRIBUTOR","body":"Was trying to think through potential problems with the change in behavior for 2.1 to throw an exception on null.\r\nThe old code would basically ignore some errors and keep going. Now it will not do that which is fine.  Could check if these new changes impact more than the misconfigured table, which could be done through tests.  For example if table A has dispatcher plugins configured that do not exist that may render table A non functional for compaction and/or scan.  However if table B has properly configured dispatchers, it should still be able to compact and/or scan.  This could be follow on work does not need to hold up this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245819614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245827380","html_url":"https://github.com/apache/accumulo/pull/4747#issuecomment-2245827380","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4747","id":2245827380,"node_id":"IC_kwDOACaFSM6F3Js0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T17:26:34Z","updated_at":"2024-07-23T17:26:34Z","author_association":"MEMBER","body":"It looks like we still need log4j-1.2-api on the classpath for hadoop minicluster's runtime. So, I'll have to re-add that back in for any tests or mini accumulo that use it before this can be merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245827380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245880910","html_url":"https://github.com/apache/accumulo/pull/4746#issuecomment-2245880910","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4746","id":2245880910,"node_id":"IC_kwDOACaFSM6F3WxO","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T17:52:07Z","updated_at":"2024-07-23T17:52:07Z","author_association":"CONTRIBUTOR","body":"The error return seems good! \r\n \r\nI started thinking about the default class changes and I think @keith-turner is right in that it could mask issues.\r\nWe might just be able to handle additional logging or have the default implementation stuff exist at a different level.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245880910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245927457","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2245927457","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2245927457,"node_id":"IC_kwDOACaFSM6F3iIh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T18:10:46Z","updated_at":"2024-07-23T18:10:46Z","author_association":"CONTRIBUTOR","body":"> If no one has any objections i can create a feature branch (i'll probably just call it grpc unless someone has a better name) \r\n\r\nI think a feature branch would be good, can move faster.  naming it grpc SGTM","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245927457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245955688","html_url":"https://github.com/apache/accumulo/issues/3791#issuecomment-2245955688","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3791","id":2245955688,"node_id":"IC_kwDOACaFSM6F3pBo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T18:27:28Z","updated_at":"2024-07-23T18:27:28Z","author_association":"CONTRIBUTOR","body":"FWIW - As this is a configurable property, and #3873 just changes the default value from `1G` to `Integer.toString(Integer.MAX_VALUE)`, this may not need to be a blocker for 2.1.3. I think it's more of a nice to have when it's ready.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2245955688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246036407","html_url":"https://github.com/apache/accumulo/pull/4524#issuecomment-2246036407","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4524","id":2246036407,"node_id":"IC_kwDOACaFSM6F38u3","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-23T19:00:11Z","updated_at":"2024-07-23T19:07:18Z","author_association":"MEMBER","body":"@keith-turner, @DomGarguilo \r\nI have addressed all of the review changes, and this PR is ready for re-review. However, some tests are no longer passing (e.g., ComprehensiveIT). I believe this is an issue with my new implementation of createAndReserve. I believe the issue is with the UserFateStore implementation, but could be both. Posting this new commit now to get the other changes out, and to potentially receive feedback on what might be wrong with createAndReserve(). I will continue to look into what the issue might be in the meantime. Please take a look at my new review comments and my new commit message","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246036407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246663586","html_url":"https://github.com/apache/accumulo/issues/4710#issuecomment-2246663586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4710","id":2246663586,"node_id":"IC_kwDOACaFSM6F6V2i","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T01:06:35Z","updated_at":"2024-07-24T01:06:35Z","author_association":"CONTRIBUTOR","body":"Ran ComprehensiveFlakyAmpleIT w/ coverage and look at areas that were not covered.  Found the following high level areas so far\r\n\r\n * volume replacement\r\n * concurrent user compactions on same tablet -- USER_COMPACTION_REQUESTED\r\n * unload ondemand tablet in tablet server \r\n * walog recovery","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246663586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246813908","html_url":"https://github.com/apache/accumulo/pull/4747#issuecomment-2246813908","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4747","id":2246813908,"node_id":"IC_kwDOACaFSM6F66jU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T03:55:31Z","updated_at":"2024-07-24T03:55:31Z","author_association":"MEMBER","body":"It looks like I fixed all the issues with the dependencies, so I'll merge this now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246813908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246970355","html_url":"https://github.com/apache/accumulo/issues/3529#issuecomment-2246970355","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3529","id":2246970355,"node_id":"IC_kwDOACaFSM6F7gvz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T06:01:29Z","updated_at":"2024-07-24T06:01:29Z","author_association":"MEMBER","body":"To properly fix #3873's handling of deprecated properties, and detection of whether the new property is actually set by the user or not, we need to fix this first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2246970355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247331856","html_url":"https://github.com/apache/accumulo/issues/3791#issuecomment-2247331856","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3791","id":2247331856,"node_id":"IC_kwDOACaFSM6F85AQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T09:16:25Z","updated_at":"2024-07-24T09:16:25Z","author_association":"MEMBER","body":"I have a completed fix for this and all the related issues, but it depends on a related fix for how isPropertySet works (or rather, doesn't work) for fixed properties, which applies to these max message properties, and affects how deprecating the properties needs to be handled. That related fix is in #4752 and needs to be merged first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247331856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247762511","html_url":"https://github.com/apache/accumulo/issues/4573#issuecomment-2247762511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4573","id":2247762511,"node_id":"IC_kwDOACaFSM6F-iJP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T12:16:07Z","updated_at":"2024-07-24T12:16:07Z","author_association":"CONTRIBUTOR","body":"@gwynlionhart - just curious, did you happen to test the code in the PR, or just review it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247762511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247769325","html_url":"https://github.com/apache/accumulo/issues/4573#issuecomment-2247769325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4573","id":2247769325,"node_id":"IC_kwDOACaFSM6F-jzt","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T12:19:31Z","updated_at":"2024-07-24T12:19:31Z","author_association":"MEMBER","body":"> @gwynlionhart - just curious, did you happen to test the code in the PR, or just review it?\r\n\r\n@dlmarion They actually provided test code to verify it works as expected. I adapted that code into a unit test which I've now added to my PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2247769325/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248021122","html_url":"https://github.com/apache/accumulo/pull/3873#issuecomment-2248021122","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3873","id":2248021122,"node_id":"IC_kwDOACaFSM6F_hSC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T13:54:16Z","updated_at":"2024-07-24T13:54:16Z","author_association":"MEMBER","body":"@dlmarion This is ready for review. I updated the PR description at the top. In particular, I want to draw your attention to the decision that should be made to either drop the experimental properties, or have them go through deprecation as well. I dropped them in this PR, but I can restore them if anybody feels like we need to keep them, deprecated, for the remainder of the 2.1 lifecycle.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248021122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248354333","html_url":"https://github.com/apache/accumulo/issues/4753#issuecomment-2248354333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4753","id":2248354333,"node_id":"IC_kwDOACaFSM6GAyod","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T15:49:47Z","updated_at":"2024-07-24T15:49:47Z","author_association":"CONTRIBUTOR","body":"Relevant changes were made in #4207 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248354333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248722982","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2248722982","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2248722982,"node_id":"IC_kwDOACaFSM6GCMom","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T19:09:41Z","updated_at":"2024-07-24T19:09:41Z","author_association":"CONTRIBUTOR","body":"@meatballspaghetti - looks like there is a conflict in the reset method. You will need to merge `main` into your feature branch, resolve conflicts, and re-push.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248722982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248727207","html_url":"https://github.com/apache/accumulo/pull/3873#issuecomment-2248727207","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3873","id":2248727207,"node_id":"IC_kwDOACaFSM6GCNqn","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T19:12:29Z","updated_at":"2024-07-24T19:12:29Z","author_association":"CONTRIBUTOR","body":"> @dlmarion This is ready for review. I updated the PR description at the top. In particular, I want to draw your attention to the decision that should be made to either drop the experimental properties, or have them go through deprecation as well. I dropped them in this PR, but I can restore them if anybody feels like we need to keep them, deprecated, for the remainder of the 2.1 lifecycle.\r\n\r\nI have no issue with removing them as long as it doesn't break any user that may have them in their configuration.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248727207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248733902","html_url":"https://github.com/apache/accumulo/pull/4524#issuecomment-2248733902","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4524","id":2248733902,"node_id":"IC_kwDOACaFSM6GCPTO","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T19:16:59Z","updated_at":"2024-07-24T19:16:59Z","author_association":"MEMBER","body":"I have found and addressed the bug in my most recent commit. This PR is now ready for full review.\r\nThe tests verified to still pass: the sunny day tests, all fate tests (ZooMutatorIT, FateMutatorImplIT, UserFateStoreIT, FateInterleavingIT, FateIT, FateOpsCommandsIT, ComprehensiveFlakyFateIT, DeleteRowsFlakyFateIT, ManagerRepoIT, and MultipleStoresIT (new test added)) except FateStoreIT. FateStoreIT reflects a method that has been removed in this PR, and want to receive feedback about the removal of this method before changes are made to this test. Have a \"TODO 4131\" marking this so this is not forgotten.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248733902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248773120","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2248773120","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2248773120,"node_id":"IC_kwDOACaFSM6GCY4A","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T19:43:25Z","updated_at":"2024-07-24T19:43:25Z","author_association":"CONTRIBUTOR","body":"> @meatballspaghetti - looks like there is a conflict in the reset method. You will need to merge `main` into your feature branch, resolve conflicts, and re-push.\r\n\r\nDone.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248773120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248845706","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2248845706","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2248845706,"node_id":"IC_kwDOACaFSM6GCqmK","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T20:30:03Z","updated_at":"2024-07-24T20:30:03Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 - Has any work been done on this? I can take a look at working on it if you didn't start yet","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248845706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248854690","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2248854690","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2248854690,"node_id":"IC_kwDOACaFSM6GCsyi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T20:36:09Z","updated_at":"2024-07-24T20:36:09Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 - based on your last comment, this can be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248854690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248878758","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2248878758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2248878758,"node_id":"IC_kwDOACaFSM6GCyqm","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T20:52:56Z","updated_at":"2024-07-24T20:52:56Z","author_association":"MEMBER","body":"@cshannon that would be great. I had tried to fix this in PR https://github.com/apache/accumulo/pull/4696 but ran into an issue (noted in the PR) I couldn't resolve and hadn't gotten back to it since.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248878758/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248883603","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2248883603","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2248883603,"node_id":"IC_kwDOACaFSM6GCz2T","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-24T20:56:15Z","updated_at":"2024-07-24T20:56:15Z","author_association":"CONTRIBUTOR","body":"Sounds good, I will take a look this week.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2248883603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249123851","html_url":"https://github.com/apache/accumulo/issues/4758#issuecomment-2249123851","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4758","id":2249123851,"node_id":"IC_kwDOACaFSM6GDugL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T00:43:08Z","updated_at":"2024-07-25T00:43:08Z","author_association":"MEMBER","body":"@keith-turner I believe I've already implemented this in [PropertyType](https://github.com/apache/accumulo/blob/bb9a967f5608986ef92d1299426c437750dfb7aa/core/src/main/java/org/apache/accumulo/core/conf/PropertyType.java) with the validation of various types using numeric bounds. All the relevant types are covered, as far as I can tell. `ConfigurationTypeHelper` just helps parse them, but doesn't actually enforce the type constraints. That's done by `PropertyType`. If there's something that we've overlooked, we can reopen this, but I don't think there's anything to do here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249123851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249133790","html_url":"https://github.com/apache/accumulo/pull/3873#issuecomment-2249133790","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3873","id":2249133790,"node_id":"IC_kwDOACaFSM6GDw7e","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T00:54:56Z","updated_at":"2024-07-25T00:54:56Z","author_association":"MEMBER","body":"> I have no issue with removing them as long as it doesn't break any user that may have them in their configuration.\r\n\r\nIn my mind, users have already accepted the risks by choosing to engage with features marked \"experimental\". We've already signaled that a break might occur if they grow to depend on an experimental feature. That's the purpose of signaling with the experimental flag. However, I think the risks of breakage here are very small. That said, it really depends on what \"break\" means for a particular user. If it means that they were expecting message sizes to be limited by a strict upper bound, this change will \"break\" them in that sense (because it changes the default in most cases to a much larger value than anything the user might have set in a property that is now ignored). Similarly, if the user is monitoring for errors or warnings about unrecognized properties in the system configuration, or has scripts to set the property, which is now no longer a valid system configuration, then that could be considered a break because they won't be able to set that property in ZK anymore. But I think these are stretching what it means to be \"broken\". In the typical case, this will relieve users from the burden of setting any value at all here, that they might have previously had to do to increase it from the default.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249133790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249403440","html_url":"https://github.com/apache/accumulo/issues/4532#issuecomment-2249403440","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4532","id":2249403440,"node_id":"IC_kwDOACaFSM6GEyww","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T04:55:06Z","updated_at":"2024-07-25T04:55:06Z","author_association":"MEMBER","body":"This issue is marked for 2.1.3, but the linked PR is for 4.0.0. There are some open unanswered questions about backporting something for 2.1. I'm re-opening this until that question is answered and the ticket's milestone is properly marked based on the answer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2249403440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250120576","html_url":"https://github.com/apache/accumulo/issues/4532#issuecomment-2250120576","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4532","id":2250120576,"node_id":"IC_kwDOACaFSM6GHh2A","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T11:39:10Z","updated_at":"2024-07-25T11:39:10Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - #4638 was merged into 4.0.0 and follow-on PR #4671 backported it to 2.1. #4671 could be named better, but it appropriately marked for the 2.1.3 milestone. I don't think there is more to do here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250120576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250181639","html_url":"https://github.com/apache/accumulo/pull/4751#issuecomment-2250181639","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4751","id":2250181639,"node_id":"IC_kwDOACaFSM6GHwwH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T12:15:09Z","updated_at":"2024-07-25T12:15:09Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I don't think this is working as some of the ITs are failing. It looks like the ITs that are failing are timing out trying to delete the table at the end of the test method. `ShellServerIT.listCompactions` is one of the tests that is failing. I was able to grab a stack trace of the TabletServer right before the test method timed out and it looks like the minor compaction thread can't complete because it's trying to acquire the lock, which has been acquired by the thread trying to unload the tablet.\r\n\r\n```\r\n\"Minor compacting 1<<\" #130 daemon prio=5 os_prio=0 cpu=9.44ms elapsed=58.20s tid=0x00007ff3ac059800 nid=0x4ffbb waiting on condition  [0x00007ff3be1e4000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.23/Native Method)\r\n        - parking to wait for  <0x00000000f248f910> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n        at java.util.concurrent.locks.LockSupport.park(java.base@11.0.23/LockSupport.java:194)\r\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(java.base@11.0.23/AbstractQueuedSynchronizer.java:885)\r\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(java.base@11.0.23/AbstractQueuedSynchronizer.java:917)\r\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@11.0.23/AbstractQueuedSynchronizer.java:1240)\r\n        at java.util.concurrent.locks.ReentrantLock.lock(java.base@11.0.23/ReentrantLock.java:267)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.lockLogLock(Tablet.java:1953)\r\n        at org.apache.accumulo.tserver.tablet.DatafileManager.bringMinorCompactionOnline(DatafileManager.java:351)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:506)\r\n        at org.apache.accumulo.tserver.tablet.MinorCompactionTask.run(MinorCompactionTask.java:112)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.23/ThreadPoolExecutor.java:1128)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.23/ThreadPoolExecutor.java:628)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.lang.Thread.run(java.base@11.0.23/Thread.java:829)\r\n\r\n\"tablet migration-Worker-1\" #135 daemon prio=5 os_prio=0 cpu=13.63ms elapsed=57.57s tid=0x00007ff390029800 nid=0x50018 in Object.wait()  [0x00007ff3bdee1000]\r\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n        at java.lang.Object.wait(java.base@11.0.23/Native Method)\r\n        - waiting on <no object reference available>\r\n        at org.apache.accumulo.tserver.tablet.TabletMemory.waitForMinC(TabletMemory.java:137)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.completeClose(Tablet.java:1073)\r\n        - waiting to re-lock in wait() <0x00000000f24909f0> (a org.apache.accumulo.tserver.tablet.Tablet)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.close(Tablet.java:908)\r\n        at org.apache.accumulo.tserver.UnloadTabletHandler.run(UnloadTabletHandler.java:91)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.23/ThreadPoolExecutor.java:1128)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.23/ThreadPoolExecutor.java:628)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.lang.Thread.run(java.base@11.0.23/Thread.java:829)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250181639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250190788","html_url":"https://github.com/apache/accumulo/issues/3759#issuecomment-2250190788","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3759","id":2250190788,"node_id":"IC_kwDOACaFSM6GHy_E","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T12:20:28Z","updated_at":"2024-07-25T12:20:28Z","author_association":"CONTRIBUTOR","body":"Re-opening due to possible issue found in #4751 . See https://github.com/apache/accumulo/pull/4751#issuecomment-2250181639.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250190788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250198631","html_url":"https://github.com/apache/accumulo/issues/4753#issuecomment-2250198631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4753","id":2250198631,"node_id":"IC_kwDOACaFSM6GH05n","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T12:24:50Z","updated_at":"2024-07-25T12:24:50Z","author_association":"CONTRIBUTOR","body":"Should this be a blocker for 2.1.3?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250198631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250216635","html_url":"https://github.com/apache/accumulo/issues/4753#issuecomment-2250216635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4753","id":2250216635,"node_id":"IC_kwDOACaFSM6GH5S7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T12:34:50Z","updated_at":"2024-07-25T12:34:50Z","author_association":"CONTRIBUTOR","body":"> Relevant changes were made in #4207\r\n\r\n#4207 was merged into elasticity and looks like it had code to close the iterators.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250216635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250223600","html_url":"https://github.com/apache/accumulo/issues/4753#issuecomment-2250223600","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4753","id":2250223600,"node_id":"IC_kwDOACaFSM6GH6_w","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T12:38:42Z","updated_at":"2024-07-25T12:38:42Z","author_association":"CONTRIBUTOR","body":"It looks like this originated [here](https://github.com/apache/accumulo/pull/1480/files#diff-89dbee5b05dbb869789bf8435c5aaab5911805df82944e36c9e00d526f20ec75), back in 2020. I don't think this is a blocker based on this information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250223600/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250276640","html_url":"https://github.com/apache/accumulo/issues/4756#issuecomment-2250276640","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4756","id":2250276640,"node_id":"IC_kwDOACaFSM6GIH8g","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T13:06:17Z","updated_at":"2024-07-25T13:06:17Z","author_association":"CONTRIBUTOR","body":"Is there a good way to determine which scan threads are running zombie scans? Interrupt is called on the thread, but I'm not sure that interrupt in a normal manner kills the thread. I'm assuming that the thread can be re-used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250276640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250303108","html_url":"https://github.com/apache/accumulo/issues/4756#issuecomment-2250303108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4756","id":2250303108,"node_id":"IC_kwDOACaFSM6GIOaE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T13:17:39Z","updated_at":"2024-07-25T13:17:39Z","author_association":"CONTRIBUTOR","body":"Looking at the javadoc for `Thread.interrupt` it looks like there is a case where an InterruptedException (or some other type of exception) is not thrown, but the thread's interrupted state is set. I'm thinking that `SortedKeyValueIterator.hasTop`, `SortedKeyValueIterator.seek` and `SortedKeyValueIterator.next` should check this via `Thread.interrupted` and if the result is `true`, then it should throw an Exception. If we changed these SKVI interface methods to have a default implementation that performed these checks, I'm not sure that there is a way to force all subclasses to call the superclass method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250303108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250472185","html_url":"https://github.com/apache/accumulo/pull/4761#issuecomment-2250472185","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4761","id":2250472185,"node_id":"IC_kwDOACaFSM6GI3r5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T14:30:01Z","updated_at":"2024-07-25T14:30:01Z","author_association":"CONTRIBUTOR","body":"This may also help the case where a user iterator is ignoring an InterruptedException.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250472185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250618527","html_url":"https://github.com/apache/accumulo/issues/4755#issuecomment-2250618527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4755","id":2250618527,"node_id":"IC_kwDOACaFSM6GJbaf","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T15:06:37Z","updated_at":"2024-07-25T15:06:37Z","author_association":"CONTRIBUTOR","body":"@ddanielr looking at the accumulo admin command usage states:\r\n\r\n```\r\nUsage: accumulo admin [options] [command] [command options]                                                                                       \r\n  Options:                                                                                                                                        \r\n    -auths, --auths                                                      \r\n      the authorizations to use when reading or writing                                                                                           \r\n      Default: <empty string>                                                                                                                     \r\n    -c, --config-file                                                                                                                             \r\n      Read the given client config file. If omitted, the classpath will be                                                                        \r\n      searched for file named accumulo-client.properties                 \r\n    -f, --force                                                          \r\n      force the given server to stop by removing its lock                                                                                         \r\n      Default: false                                                                                                                              \r\n    -h, -?, --help, -help    \r\n\t......\r\n```\r\n\t\r\nThe usage indicates that the help flags should appear between the `admin` and `command` values. None of the sub- commands themselves have any help flags listed. It appears the initial code only provided a help command for the overall admin command.\r\n\r\nI went through each sub-command and If you  execute each sub-command  using that format no errors are thrown, but rather the entire `accumulo admin`  help message is displayed.\r\n\r\nThe one exception is the  `randomizeVolumes` command. This command will throw an exception if the `-t <table>` info is not provided.\r\n\r\nI agree that it would nice if help info would be provided if a help flag was used anywhere on the command line, but I'm not sure if this is a bug or just a design choice that was made. I'm not sure how to best let the user know that the help flags should be earlier on the command line. Perhaps it should be considered an enhancement/improvement issue instead. What are your thoughts?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250618527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250646407","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2250646407","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2250646407,"node_id":"IC_kwDOACaFSM6GJiOH","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T15:16:33Z","updated_at":"2024-07-25T15:16:33Z","author_association":"MEMBER","body":"@dlmarion I would say that the above should be changed to avoid the same confusion in the future. The value is being logged every 1 second but only updated every 5 seconds which makes the logs misleading. I'll make a PR with this change then this issue can be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250646407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250744362","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2250744362","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2250744362,"node_id":"IC_kwDOACaFSM6GJ6Iq","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T15:46:29Z","updated_at":"2024-07-25T15:47:11Z","author_association":"MEMBER","body":"Looked into this again. Since I had last looked at this, this has been fixed. The logs now print every 10 seconds (previously 1 second) and are updated every 5 seconds, so this is fine. Closing this as complete","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2250744362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251008016","html_url":"https://github.com/apache/accumulo/issues/4710#issuecomment-2251008016","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4710","id":2251008016,"node_id":"IC_kwDOACaFSM6GK6gQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T17:11:52Z","updated_at":"2024-07-25T17:11:52Z","author_association":"CONTRIBUTOR","body":"While researching this noticed the volume replace condition update is checking the files it added are present on failure.  Because of race conditions they may have been added but not be present.  It should probably check the files it removed are not there to see if the update went through.  I plan to make this change when adding test for volume replacement, this is comment is a reminder to do that.\n\nhttps://github.com/apache/accumulo/blob/3ad9198a86ae9f8b2b24831f6593d33362f8088a/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L1051-L1053","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251008016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251086267","html_url":"https://github.com/apache/accumulo/pull/4751#issuecomment-2251086267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4751","id":2251086267,"node_id":"IC_kwDOACaFSM6GLNm7","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T17:55:51Z","updated_at":"2024-07-25T17:57:33Z","author_association":"CONTRIBUTOR","body":"@dlmarion  the stack traces are helpful.  I see what is going on, the close code is doing the following after this change\r\n\r\n 1. get logLock\r\n 2. get tablet lock\r\n 3. call wait on tablet lock which releases the lock to wait for any minor compactions that may be running.\r\n\r\nIn step 3 above it would ideally release the log lock (so that the minc its waiting on could complete), however I think that would be a large refactoring that could introduce more bugs.  Thinking of abandoning fixing this problem for 2.1 for now, will make a comment on the top level issue w/ more details.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251086267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251132771","html_url":"https://github.com/apache/accumulo/issues/3759#issuecomment-2251132771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3759","id":2251132771,"node_id":"IC_kwDOACaFSM6GLY9j","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T18:19:00Z","updated_at":"2024-07-25T18:19:00Z","author_association":"CONTRIBUTOR","body":"> Re-opening due to possible issue found in https://github.com/apache/accumulo/pull/4751 . See https://github.com/apache/accumulo/pull/4751#issuecomment-2250181639.\r\n\r\nI plan to revert the commit related to #4751 and move this issue to 4.0.0 milestone for now because I can not see how to fix this w/o a major refactoring of the tablet close code (the comments on #4751 provide some insight into one refactoring that is needed, but that may be the tip of an ice berg).  A major refactoring of the code could introduce new bugs and this bug probably has a low chance of happening, so it does not seem worth the risk to me in 2.1.X at the moment\r\n\r\nThe reason I am thinking moving this to 4.0.0 is because a lot of code was removed from the tablet server in 4.0.0 which makes a major refactoring of the Tablet code easier to do.  The issue   #3670 is already open for 4.0.0 and this bug could possibly be fixed as part of that cleanup or it could be done after that cleanup and would be much easier to do after a cleanup like #3670.\r\n\r\nIf we figure out a way to fix this in 2.1.X w/o rewriting large parts of the Tablet synchronization code, then this issue could be moved back to a 2.1.X milestone.\r\n\r\nThis bug involves two different kinds of locks, one is a Java lock object and the other is Java object monitor lock.  I was curious if jstack could detect deadlocks between these different kinds of locks.  Did a bit of searching and did not find anything definitive.  So wrote the following test program and for this jstack did detect the deadlock.  So its good to know if it does happen that jstack can detect it (at least w/ jdk 17).\r\n\r\n\r\n```java\r\npublic class TestLocks {\r\n    public static void main(String[] args) throws Exception {\r\n        ExecutorService executorService = Executors.newFixedThreadPool(2);\r\n\r\n        var logLock = new ReentrantLock();\r\n        var tablet = new HashMap<String,String>();\r\n\r\n        var future1 = executorService.submit(()-> {\r\n            // This simulates how Tablet close may acquire locks.\r\n            synchronized (tablet) {\r\n                Thread.sleep(5000);\r\n                logLock.lock();\r\n                System.out.println(\"1\");\r\n            }\r\n            return null;\r\n        });\r\n\r\n\r\n        var future2 = executorService.submit(()-> {\r\n            //This simulates how other code in Tablet outside of close will acquire locks\r\n            logLock.lock();\r\n            Thread.sleep(5000);\r\n            synchronized (tablet){\r\n                System.out.println(\"2\");\r\n            }\r\n            return null;\r\n        });\r\n\r\n        future1.get();\r\n        future2.get();\r\n    }\r\n}\r\n```\r\n\r\nThe following is the output of running jstack against the above program using OpenJDK17, so at least that version will detect deadlock between different lock types.\r\n\r\n```\r\nFound one Java-level deadlock:\r\n=============================\r\n\"pool-1-thread-1\":\r\n  waiting for ownable synchronizer 0x000000062ae3eed0, (a java.util.concurrent.locks.ReentrantLock$NonfairSync),\r\n  which is held by \"pool-1-thread-2\"\r\n\r\n\"pool-1-thread-2\":\r\n  waiting to lock monitor 0x00007562c4000fe0 (object 0x000000062ae3efd8, a java.util.HashMap),\r\n  which is held by \"pool-1-thread-1\"\r\n\r\nJava stack information for the threads listed above:\r\n===================================================\r\n\"pool-1-thread-1\":\r\n\tat jdk.internal.misc.Unsafe.park(java.base@17.0.11/Native Method)\r\n\t- parking to wait for  <0x000000062ae3eed0> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n\tat java.util.concurrent.locks.LockSupport.park(java.base@17.0.11/LockSupport.java:211)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@17.0.11/AbstractQueuedSynchronizer.java:715)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@17.0.11/AbstractQueuedSynchronizer.java:938)\r\n\tat java.util.concurrent.locks.ReentrantLock$Sync.lock(java.base@17.0.11/ReentrantLock.java:153)\r\n\tat java.util.concurrent.locks.ReentrantLock.lock(java.base@17.0.11/ReentrantLock.java:322)\r\n\tat org.apache.accumulo.server.TestLocks.lambda$main$0(TestLocks.java:19)\r\n\t- locked <0x000000062ae3efd8> (a java.util.HashMap)\r\n\tat org.apache.accumulo.server.TestLocks$$Lambda$14/0x0000756324001208.call(Unknown Source)\r\n\tat java.util.concurrent.FutureTask.run(java.base@17.0.11/FutureTask.java:264)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@17.0.11/ThreadPoolExecutor.java:1136)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@17.0.11/ThreadPoolExecutor.java:635)\r\n\tat java.lang.Thread.run(java.base@17.0.11/Thread.java:840)\r\n\"pool-1-thread-2\":\r\n\tat org.apache.accumulo.server.TestLocks.lambda$main$1(TestLocks.java:31)\r\n\t- waiting to lock <0x000000062ae3efd8> (a java.util.HashMap)\r\n\tat org.apache.accumulo.server.TestLocks$$Lambda$16/0x0000756324001430.call(Unknown Source)\r\n\tat java.util.concurrent.FutureTask.run(java.base@17.0.11/FutureTask.java:264)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@17.0.11/ThreadPoolExecutor.java:1136)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@17.0.11/ThreadPoolExecutor.java:635)\r\n\tat java.lang.Thread.run(java.base@17.0.11/Thread.java:840)\r\n\r\nFound 1 deadlock.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251132771/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251132879","html_url":"https://github.com/apache/accumulo/pull/4751#issuecomment-2251132879","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4751","id":2251132879,"node_id":"IC_kwDOACaFSM6GLY_P","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T18:19:04Z","updated_at":"2024-07-25T18:19:04Z","author_association":"CONTRIBUTOR","body":"> Thinking of abandoning fixing this problem for 2.1 for now, will make a comment on the top level issue w/ more details.\r\n\r\nSounds good, we'll need to revert this commit then.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251132879/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251247500","html_url":"https://github.com/apache/accumulo/issues/3759#issuecomment-2251247500","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3759","id":2251247500,"node_id":"IC_kwDOACaFSM6GL0-M","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T19:26:24Z","updated_at":"2024-07-25T19:26:24Z","author_association":"CONTRIBUTOR","body":"Reverted the changes from #4751 in 7efee59b45ccfd5010a45e30b148f6031b368417 and merged those changes up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251247500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251259108","html_url":"https://github.com/apache/accumulo/issues/3670#issuecomment-2251259108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3670","id":2251259108,"node_id":"IC_kwDOACaFSM6GL3zk","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T19:34:05Z","updated_at":"2024-07-25T19:34:05Z","author_association":"CONTRIBUTOR","body":"> Should this target an earlier branch? Maybe even a 2.1.x?\r\n\r\nIt would be more difficult to make this change in 2.1 because the Tablet has alot more code related to synchronizing compaction, splits, and bulk imports that does not exists in 4.0.0.  So I think its good to do the refactoring for 4.0.0 or later.  If any existing bugs are noticed during the refactoring, then those could possibly be fixed in 2.1.x.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251259108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251299058","html_url":"https://github.com/apache/accumulo/issues/4756#issuecomment-2251299058","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4756","id":2251299058,"node_id":"IC_kwDOACaFSM6GMBjy","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-25T20:01:17Z","updated_at":"2024-07-25T20:10:14Z","author_association":"CONTRIBUTOR","body":"> Is there a good way to determine which scan threads are running zombie scans?\r\n\r\nNot that I know of, I think some new code would need to be written.  We currently have Session objects that can get to a scan thread, but the session objects may be removed.  Tablets have an activeScans set that may offer a way to find threads, however if #4757 is implemented then Tablet objects could be removed.  So once the Tablet and Session are removed (no longer tracked by the tablet server) then a zombie scan thread would have nothing referencing it in the tablet server except for maybe the thread pool.  \r\n\r\nWe could add a tablet server level tracking object like the following.  Scans threads could add/remove their self in a try/finally block.   Periodically we could call countZombieScans() and update a gauge w/ the count.\r\n\r\n```java\r\n// track the running scans in the tablet server\r\nclass RunningScans {\r\n    Set<ScanSession> runningScans = new HashSet<>();\r\n\r\n    // TODO could return closeable that does the removal, would work well w/ try with resources\r\n    public sync void addScan(ScanSession scanSession) {\r\n           runningScans.add(scanSession);\r\n    }\r\n\r\n   public sync void removeScan(ScanSession scanSession) {\r\n      runningScans.remove(scanSession);\r\n   }\r\n  \r\n   public sync int countZombieScans(){\r\n      return runningScans.stream().filter(scanSessions->scanSession.state==REMOVED).count();\r\n   }\r\n\r\n   // could possibly make the list scan code call this and return information about zombie scans\r\n  public sync List<ScanSession> listZombieScans() {\r\n      return runningScans.stream().filter(scanSessions->scanSession.state==REMOVED).collect(toList());\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251299058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251879596","html_url":"https://github.com/apache/accumulo/pull/4430#issuecomment-2251879596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4430","id":2251879596,"node_id":"IC_kwDOACaFSM6GOPSs","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T03:09:25Z","updated_at":"2024-07-26T03:09:25Z","author_association":"CONTRIBUTOR","body":"Discussion was had regarding the scan server types and properties. \r\nClosing this WIP","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2251879596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252114480","html_url":"https://github.com/apache/accumulo/pull/4608#issuecomment-2252114480","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4608","id":2252114480,"node_id":"IC_kwDOACaFSM6GPIow","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T07:08:45Z","updated_at":"2024-07-26T07:09:40Z","author_association":"MEMBER","body":"Since the above message wasn't clear. This PR merged the change as afed773 into the elasticity branch, then was backported into the main branch for 3.1.0 as f2005ca by #4371 , which was then merged with `-sours` into the elasticity branch again, because the changes already existed there from this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252114480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252137188","html_url":"https://github.com/apache/accumulo/issues/4532#issuecomment-2252137188","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4532","id":2252137188,"node_id":"IC_kwDOACaFSM6GPOLk","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T07:25:31Z","updated_at":"2024-07-26T07:25:31Z","author_association":"MEMBER","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252137188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252194387","html_url":"https://github.com/apache/accumulo/issues/4749#issuecomment-2252194387","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4749","id":2252194387,"node_id":"IC_kwDOACaFSM6GPcJT","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T08:03:14Z","updated_at":"2024-07-26T08:03:14Z","author_association":"MEMBER","body":"@meatballspaghetti You might be interested in doing this one, since you're working on a related issue, #4745 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252194387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252196638","html_url":"https://github.com/apache/accumulo/issues/4469#issuecomment-2252196638","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4469","id":2252196638,"node_id":"IC_kwDOACaFSM6GPcse","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T08:04:35Z","updated_at":"2024-07-26T08:04:35Z","author_association":"MEMBER","body":"Closing due to lack of response, and it seems like this is fixed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252196638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252202486","html_url":"https://github.com/apache/accumulo/issues/4723#issuecomment-2252202486","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4723","id":2252202486,"node_id":"IC_kwDOACaFSM6GPeH2","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T08:08:04Z","updated_at":"2024-07-26T08:08:04Z","author_association":"MEMBER","body":"It's possible some of these can be updated without requiring a restart. That could benefit from a supplier, or some other internal reorganization. But one way to fix this in the near term is to add these to the \"fixed properties\" list so that the generated documentation for them will correctly indicate that they require a restart.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252202486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252219120","html_url":"https://github.com/apache/accumulo/issues/4698#issuecomment-2252219120","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4698","id":2252219120,"node_id":"IC_kwDOACaFSM6GPiLw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T08:18:13Z","updated_at":"2024-07-26T08:18:13Z","author_association":"MEMBER","body":"I think the best way to do this would be to remove all the names from under each table, and create a new single node (maybe per namespace?) that retains the table name mapping for all tables. Otherwise, it would be a nightmare to try to maintain consistency between the locations. I might be interested in working on this or helping direct somebody else. @meatballspaghetti recently asked me for ideas of what issues to work on, and might be interested in this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252219120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252260955","html_url":"https://github.com/apache/accumulo/issues/4595#issuecomment-2252260955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4595","id":2252260955,"node_id":"IC_kwDOACaFSM6GPsZb","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T08:43:21Z","updated_at":"2024-07-26T08:44:05Z","author_association":"MEMBER","body":"You are correct that the Hadoop CredentialProvider mechanism is not used for the SSL properties.\r\n\r\nHowever, I am not sure about implementing that feature.  I'm not very familiar with all the CredentialProvider mechanisms, but the one that I've interacted with (jceks file used for tests that I recently updated in #4580) isn't that secure. It is just a Java keystore that doesn't have a passphrase.. which is not much better than a plaintext file. Perhaps CredentialProvider has implementations that are more secure, or there's a way to securely pass a passphrase for the jceks file itself, but I'm not familiar with those methods at the moment.\r\n\r\nBy comparison, the whole point of these SSL properties is to allow you to store the relevant SSL/TLS certificates into a keystore. In other words, it seems to serve a similar purpose. It sounds like you're wanting to store the passphrase for the keystore holding the certs in a separate keystore holding the passphrase. But then, is that second keystore going to be encrypted? If so, where are you going to store the passphrase for that second keystore? Wouldn't you just have to pass that to CredentialProvider (assuming it even supports that, which as I said above, I'm not sure about)?\r\n\r\nI'm sure I have room to learn some more about how the CredentialProvider works, but without more information, it currently seems to me that it's [turtles all the way down](https://en.wikipedia.org/wiki/Turtles_all_the_way_down) and I don't see much point in adding code to support adding another layer. If there is a way to securely unlock an encrypted keystore without a keystore passphrase needing to be stored insecurely, perhaps the JSSE system properties (which these client properties are intended to mirror) support something more naturally, without using Hadoop's CredentialProvider in an insecure way? I'm not sure the answer, but it seems more worth pursuing that than it does adding an extra insecure layer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252260955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252290449","html_url":"https://github.com/apache/accumulo/pull/4338#issuecomment-2252290449","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4338","id":2252290449,"node_id":"IC_kwDOACaFSM6GPzmR","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T09:01:20Z","updated_at":"2024-07-26T09:01:20Z","author_association":"MEMBER","body":"> @keith-turner - I'm fine with closing this PR in favor of one you put up from your branch.\r\n\r\nClosing this based on this comment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252290449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252307319","html_url":"https://github.com/apache/accumulo/issues/4375#issuecomment-2252307319","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4375","id":2252307319,"node_id":"IC_kwDOACaFSM6GP3t3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T09:10:38Z","updated_at":"2024-07-26T09:10:38Z","author_association":"MEMBER","body":"Might be OBE. I haven't seen this in awhile.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252307319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252341820","html_url":"https://github.com/apache/accumulo/issues/4249#issuecomment-2252341820","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4249","id":2252341820,"node_id":"IC_kwDOACaFSM6GQAI8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T09:29:41Z","updated_at":"2024-07-26T09:29:41Z","author_association":"MEMBER","body":"Done in #4747 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252341820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252585589","html_url":"https://github.com/apache/accumulo/pull/4715#issuecomment-2252585589","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4715","id":2252585589,"node_id":"IC_kwDOACaFSM6GQ7p1","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T11:43:26Z","updated_at":"2024-07-26T11:43:26Z","author_association":"CONTRIBUTOR","body":"I created a new `grpc` feature branch that is based off elasticity and pushed that up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252585589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252631594","html_url":"https://github.com/apache/accumulo/pull/4691#issuecomment-2252631594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4691","id":2252631594,"node_id":"IC_kwDOACaFSM6GRG4q","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T12:11:34Z","updated_at":"2024-07-26T12:11:34Z","author_association":"MEMBER","body":"@ddanielr this change has caused some test failures in org.apache.accumulo.test.ScanServerMetadataEntriesIT","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252631594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252649993","html_url":"https://github.com/apache/accumulo/issues/4698#issuecomment-2252649993","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4698","id":2252649993,"node_id":"IC_kwDOACaFSM6GRLYJ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T12:22:14Z","updated_at":"2024-07-26T12:22:25Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - if you are interested in this then feel free to re-assign this issue to @meatballspaghetti or anyone else, I haven't started working on it and it's more of a nice to have feature for performance so there's no rush so I unassigned myself for now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252649993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252674707","html_url":"https://github.com/apache/accumulo/issues/4595#issuecomment-2252674707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4595","id":2252674707,"node_id":"IC_kwDOACaFSM6GRRaT","user":{"login":"gwynlionhart","id":92271840,"node_id":"U_kgDOBX_04A","avatar_url":"https://avatars.githubusercontent.com/u/92271840?v=4","gravatar_id":"","url":"https://api.github.com/users/gwynlionhart","html_url":"https://github.com/gwynlionhart","followers_url":"https://api.github.com/users/gwynlionhart/followers","following_url":"https://api.github.com/users/gwynlionhart/following{/other_user}","gists_url":"https://api.github.com/users/gwynlionhart/gists{/gist_id}","starred_url":"https://api.github.com/users/gwynlionhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwynlionhart/subscriptions","organizations_url":"https://api.github.com/users/gwynlionhart/orgs","repos_url":"https://api.github.com/users/gwynlionhart/repos","events_url":"https://api.github.com/users/gwynlionhart/events{/privacy}","received_events_url":"https://api.github.com/users/gwynlionhart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T12:36:43Z","updated_at":"2024-07-26T12:36:43Z","author_association":"NONE","body":"My main issue was that some SSL properties _are_ handled by the CredentialProvider. If you put the value for the property \"rpc.javax.net.ssl.trustStorePassword\" or \"rpc.javax.net.ssl.keyStorePassword\" into a Credential Provider, and you have the property general.security.credential.provider.paths set to point to that credentialprovider store (JCEKS in my example), then Accumulo will retrieve the password out of the JCEKS rather than expecting the property to be in the properties file.\r\n\r\nIn contrast (and where I thought an issue might be) is that the property \"ssl.truststore.password\" on the client side does not get treated in the same way. If you put that into the JCEKS, the Accumulo code doesn't find it, so it then looks in the properties file (where it also doesn't find it), then fails b/c it can't open the truststore.\r\n\r\nThe quickest workaround (which I did) is that even on the client side I put \"rpc.javax.net.ssl.trustStorePassword\" as the alias for the truststore password entry in the JCEKS. That property works even on the client side because in that ClientConfConverter it ends up converting \"ssl.truststore.password\" into \"rpc.javax.net.ssl.trustStorePassword\" anyway. But I originally thought it may be a bug that the property wasn't being found like the server side property was found. \r\n\r\nBut on the topic of security of the JCEKS: absolutely agree, not a long-term solution. I will be looking for a secure way to store the password for the user/root user/truststore/keystore in some other manner that doesn't amount to a plain text representation on the file system. Maybe implementing something off the CredentialProvider interface to grab passwords in some other secure manner\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252674707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252889477","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2252889477","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2252889477,"node_id":"IC_kwDOACaFSM6GSF2F","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T14:27:22Z","updated_at":"2024-07-26T14:27:22Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 - I started work on this, the issue you were having was because the fate store was trying to scan the table before the Manager had finished starting. The initial metrics update() was being called when registering metrics which is done on start up. The update needs to be delayed until after start is done and that unblocks things. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252889477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252934238","html_url":"https://github.com/apache/accumulo/issues/4749#issuecomment-2252934238","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4749","id":2252934238,"node_id":"IC_kwDOACaFSM6GSQxe","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T14:51:02Z","updated_at":"2024-07-26T14:51:02Z","author_association":"CONTRIBUTOR","body":"I can look into this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252934238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252942450","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2252942450","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2252942450,"node_id":"IC_kwDOACaFSM6GSSxy","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T14:55:36Z","updated_at":"2024-07-26T14:55:36Z","author_association":"MEMBER","body":"@cshannon ahh that makes sense... Good find","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252942450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252983420","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2252983420","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2252983420,"node_id":"IC_kwDOACaFSM6GScx8","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:18:16Z","updated_at":"2024-07-26T15:18:35Z","author_association":"CONTRIBUTOR","body":"@keith-turner - What do you think the scope of this should be? It would be relatively quick and not too much of a code change to just include the user fate metrics along with the ZK (meta) metrics (although there's no metrics ITs so might be nice to add some tests too). This of course would just show the totals but not split it up by type.\r\n\r\nAnother option and larger change would be to track metrics separately for the meta and the user fate stores. We would need to register the same gauges for the user store and probably add a tag to metrics that includes the store type.  We could in theory also have a 3rd set of metrics that combines both stores but I would imagine any tool that is being used to monitor and collect the metrics can just do the aggregation there so we wouldn't need to worry about that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252983420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252987354","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2252987354","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2252987354,"node_id":"IC_kwDOACaFSM6GSdva","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:19:56Z","updated_at":"2024-07-26T15:19:56Z","author_association":"MEMBER","body":"This looks like a very interesting ticket. I would be interested in working on this, if no one else has started\r\n@cshannon @keith-turner Were either of you planning or started working on this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252987354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252991478","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2252991478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2252991478,"node_id":"IC_kwDOACaFSM6GSev2","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:22:11Z","updated_at":"2024-07-26T15:22:11Z","author_association":"CONTRIBUTOR","body":"I was not planning to anytime soon as i'm going to likely be working on gRPC stuff for a while so feel free to take a look","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2252991478/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253004292","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2253004292","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2253004292,"node_id":"IC_kwDOACaFSM6GSh4E","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:29:22Z","updated_at":"2024-07-26T15:29:22Z","author_association":"CONTRIBUTOR","body":"> This looks like a very interesting ticket. I would be interested in working on this, if no one else has started\r\n@cshannon @keith-turner Were either of you planning or started working on this?\r\n\r\nNo I was not, but I had some half baked thoughts about it that I will try to write up in case they are useful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253004292/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253008622","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2253008622","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2253008622,"node_id":"IC_kwDOACaFSM6GSi7u","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:31:56Z","updated_at":"2024-07-26T15:31:56Z","author_association":"MEMBER","body":"That would be good, the more info the better","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253008622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253036351","html_url":"https://github.com/apache/accumulo/issues/4595#issuecomment-2253036351","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4595","id":2253036351,"node_id":"IC_kwDOACaFSM6GSps_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T15:47:54Z","updated_at":"2024-07-26T15:47:54Z","author_association":"MEMBER","body":"@gwynlionhart Which version of Accumulo are you using? And did this work in a previous version?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253036351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253079513","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2253079513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2253079513,"node_id":"IC_kwDOACaFSM6GS0PZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:14:59Z","updated_at":"2024-07-26T16:14:59Z","author_association":"MEMBER","body":"@kevinrr888 My suggestions would be:\r\n\r\n1. Don't duplicate other tooling, like metrics, log collection/analysis, etc.\r\n2. Stay under the Accumulo scope (don't try to identify problems with the whole system environment)\r\n3. Focus on detection, not automatic solutions: \"Observe and Report\"\r\n4. Use consistent terminology, and formatting\r\n5. Ensure output is machine-readable\r\n6. Chunk the reports into discrete and organized topics\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253079513/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253101413","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2253101413","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2253101413,"node_id":"IC_kwDOACaFSM6GS5ll","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:29:45Z","updated_at":"2024-07-26T16:44:44Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 here are some of the things I was thinking about.  \r\n\r\nEach check could have a well defined name that allows only that check to be run and that a user could list all possible checks.  Some checks may take a long time to run and if a user wants to run a specific check then they would not want to wait on everything.\r\n\r\nWas also thinking that internally the checks could all implement a similar interface and declare dependencies on other checks, allowing the dependencies to be run first. \r\n\r\n\r\nSo maybe we could have something like the following to list checks that could be run.\r\n\r\n```\r\naccumulo admin check list\r\n  Check Name        Description                                                                      Depends on\r\n\r\n  system_config     Validate the system config stored in zookeeper\r\n  root_metadata     Checks integrity of the root tablet metadata stored in zookeeper                  system_config \r\n  root_table        Scans all the tablet metadata stored in the root table and checks integrity      root_metadata \r\n  metadata_table    Scans all the tablet metadata stored in the metadata table and checks integrity  root_table\r\n  system_files      Checks that files in system tablet metadata exists in DFS                        root_table\r\n  user_files        Checks that files in user tablet metadata exists in DFS                          metadata_table\r\n```\r\n\r\nThen to run checks could do something like the following that starts running all checks following the dependency graph and does not run checks if their dependency check failed.  Was also thinking the command could print high level status to stdout and details about failures to stderr (so thinking details about the failure would go to check.log in example below).  Ideally what ends up in check.log would be some machine readable format like json, but not really sure how this would play out.\r\n\r\n```\r\naccumulo admin check run 2> check.log\r\n\r\n  Check Name       Status\r\n\r\n  system_config    OK\r\n  root_table       OK\r\n  root_metadata    OK\r\n  metadata_table   FAILED\r\n  system_files     OK\r\n  user_files       SKIPPED_DEPENDENCY_FAILED\r\n```\r\n\r\nCould somehow support a regex pattern for selecting checks to run using their well known names.\r\n\r\n```\r\naccumulo admin check run --name_pattern \"*.files\"  2>check.log\r\n\r\n  Check Name       Status\r\n\r\n  system_files     OK\r\n  user_files       OK\r\n```\r\n\r\n\r\nIn the code set of checks will be static, so we could use an enum to specify the top level set of all checks.  Then the list  and run commands could just operate on the all the enums.  The enum could offer method to get check objects and to get dependencies. Thinking the enum will make specifying the dependcy graph (which is also static) in code really easy.\r\n\r\n\r\n```\r\n// Not sure what to name thjs\r\nenum Check {\r\n   SYSTEM_CONFIG,\r\n   ROOT_TABLE,\r\n   ROOT_METADATA,\r\n   METADATA_TABLE,\r\n   SYSTEM_FILES,\r\n   USER_FILES;\r\n\r\n   // retunrs the list of other checks the check depends on\r\n    List<Check> getDependicies();\r\n\r\n    // returns a well defined interface for running a check\r\n    CheckRunner getCheckRunner();\r\n}\r\n\r\n```\r\n\r\nNot sure if this overall structure is workable.  If we can get a structure for the command laid down along with a few initial checks, then we can start adding more checks as individual PRs.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253101413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253115631","html_url":"https://github.com/apache/accumulo/issues/4516#issuecomment-2253115631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4516","id":2253115631,"node_id":"IC_kwDOACaFSM6GS9Dv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:39:36Z","updated_at":"2024-07-26T16:39:36Z","author_association":"MEMBER","body":"@keith-turner Is this still a problem?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253115631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253126525","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-2253126525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":2253126525,"node_id":"IC_kwDOACaFSM6GS_t9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:46:56Z","updated_at":"2024-07-26T16:46:56Z","author_association":"MEMBER","body":"@ivakegg Is this still an issue, or is that workaround fine?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253126525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253127915","html_url":"https://github.com/apache/accumulo/issues/4595#issuecomment-2253127915","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4595","id":2253127915,"node_id":"IC_kwDOACaFSM6GTADr","user":{"login":"gwynlionhart","id":92271840,"node_id":"U_kgDOBX_04A","avatar_url":"https://avatars.githubusercontent.com/u/92271840?v=4","gravatar_id":"","url":"https://api.github.com/users/gwynlionhart","html_url":"https://github.com/gwynlionhart","followers_url":"https://api.github.com/users/gwynlionhart/followers","following_url":"https://api.github.com/users/gwynlionhart/following{/other_user}","gists_url":"https://api.github.com/users/gwynlionhart/gists{/gist_id}","starred_url":"https://api.github.com/users/gwynlionhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwynlionhart/subscriptions","organizations_url":"https://api.github.com/users/gwynlionhart/orgs","repos_url":"https://api.github.com/users/gwynlionhart/repos","events_url":"https://api.github.com/users/gwynlionhart/events{/privacy}","received_events_url":"https://api.github.com/users/gwynlionhart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:47:56Z","updated_at":"2024-07-26T16:47:56Z","author_association":"NONE","body":"I previously was using Accumulo 1.10.2. At the time my accumulo.conf had the same-named properties as my server's accumulo-site.xml, so the JCEKS files for each had the same alias names for both server and client JCEKS files (the client had fewer properties of course, not needing the root user's password for example).\r\n\r\nWhen I upgraded to 2.1.2, I moved the client side from accumulo.conf to accumulo-client.properties and tried updating the property names in line with what the docs defined. Though in my original post aboveI did note that some properties are omitted from the documentation that ended up required for me, but that's a different issue. I also eventually stopped using accumulo-client.properties due to #4573 and the issue with CredentialProviderTokens, but will go back to the properties file when 2.1.3 releases with that fix.\r\n\r\nSo when I updated to using the accumulo-client.properties, I moved to using ssl.truststore.password and updated my JCEKS keystore to have that alias, but then I encountered issues arising from the Accumulo client not finding the truststore password during initialization. When I reverted the JCEKS file's alias for that entry back to \"rpc.javax.net.ssl.trustStorePassword\", then the client initialized correctly","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253127915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253139669","html_url":"https://github.com/apache/accumulo/issues/4687#issuecomment-2253139669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4687","id":2253139669,"node_id":"IC_kwDOACaFSM6GTC7V","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T16:56:10Z","updated_at":"2024-07-26T16:56:10Z","author_association":"MEMBER","body":"Thank you for this info\r\nAs you suggested, I can work on getting the structure laid out with the existing checks now done through this new `check` cmd as an initial PR, then go from there","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253139669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253223381","html_url":"https://github.com/apache/accumulo/pull/4468#issuecomment-2253223381","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4468","id":2253223381,"node_id":"IC_kwDOACaFSM6GTXXV","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T17:54:58Z","updated_at":"2024-07-26T17:54:58Z","author_association":"CONTRIBUTOR","body":"Changing the grep iterator to use an option for whether to match against the visibility is fine with me.  I think the shell should default that option to true.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253223381/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253237628","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2253237628","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2253237628,"node_id":"IC_kwDOACaFSM6GTa18","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:05:13Z","updated_at":"2024-07-26T18:05:13Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - What do you think the scope of this should be? It would be relatively quick and not too much of a code change to just include the user fate metrics along with the ZK (meta) metrics (although there's no metrics ITs so might be nice to add some tests too). This of course would just show the totals but not split it up by type.\r\n\r\nThere are two use cases where it seems splitting them could be helpful.  Metrics can be used to tune config, so for example could use the fate metrics to tune thread pool sizes for executing fate operations.  Metrics can be used to alert to problems, so it may be useful to know which store is having a problem.  Looking through the fate metrics, these use cases only need a subset of the metrics.  If we are going to provide two sets it probably easier to do it for all metrics.\r\n\r\n> in theory also have a 3rd set of metrics that combines both stores but I would imagine any tool that is being used to monitor and collect the metrics can just do the aggregation there so we wouldn't need to worry about that.\r\n\r\nYeah for that case could create an aggregate in the metric system.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253237628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253240994","html_url":"https://github.com/apache/accumulo/issues/4534#issuecomment-2253240994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4534","id":2253240994,"node_id":"IC_kwDOACaFSM6GTbqi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:07:34Z","updated_at":"2024-07-26T18:07:34Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - What do you think the scope of this should be? It would be relatively quick and not too much of a code change to just include the user fate metrics along with the ZK (meta) metrics (although there's no metrics ITs so might be nice to add some tests too). This of course would just show the totals but not split it up by type.\r\n\r\nAs a first pass we could get it working with a single set of metrics.  Its better to have something working rather than nothing.  And then possibly split in a follow on PR, but not sure if that makes sense to do things that way in terms of overall code changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253240994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253287394","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2253287394","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2253287394,"node_id":"IC_kwDOACaFSM6GTm_i","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:43:45Z","updated_at":"2024-07-26T18:43:45Z","author_association":"CONTRIBUTOR","body":"> Looks really good to me. The only other thing I'd suggest is maybe do a static import on Objects\r\n\r\nI would have done static import but I use 3 different bounds checking methods from Objects in this commit. Should I static import all 3 of them anyways, or leave as is?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253287394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253289233","html_url":"https://github.com/apache/accumulo/pull/4745#issuecomment-2253289233","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4745","id":2253289233,"node_id":"IC_kwDOACaFSM6GTncR","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:45:18Z","updated_at":"2024-07-26T18:45:18Z","author_association":"MEMBER","body":"> > Looks really good to me. The only other thing I'd suggest is maybe do a static import on Objects\r\n> \r\n> I would have done static import but I use 3 different bounds checking methods from Objects in this commit. Should I static import all 3 of them anyways, or leave as is?\r\n\r\nI think it's pretty much the same either way. It's fine to leave it as is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253289233/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253308424","html_url":"https://github.com/apache/accumulo/issues/4246#issuecomment-2253308424","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4246","id":2253308424,"node_id":"IC_kwDOACaFSM6GTsII","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T18:59:51Z","updated_at":"2024-07-26T18:59:51Z","author_association":"CONTRIBUTOR","body":"@cshannon - In #4160 the test `testCreateWithCollisionAndExceedRetryLimit` was added. Looking at the new FateStore implementations in `elasticity`, I don't see a retry. Is this issue OBE and can be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253308424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253351461","html_url":"https://github.com/apache/accumulo/issues/4246#issuecomment-2253351461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4246","id":2253351461,"node_id":"IC_kwDOACaFSM6GT2ol","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T19:34:24Z","updated_at":"2024-07-26T19:35:15Z","author_association":"CONTRIBUTOR","body":"> @cshannon - In #4160 the test `testCreateWithCollisionAndExceedRetryLimit` was added. Looking at the new FateStore implementations in `elasticity`, I don't see a retry. Is this issue OBE and can be closed?\n\nI'm not sure, it's been a really long time since I looked at this and this was something Dom added. I took a look and the test still exists in https://github.com/apache/accumulo/blob/elasticity/test/src/main/java/org/apache/accumulo/test/fate/user/UserFateStoreIT.java\n\nSo it seems like there's still a retry being tested","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253351461/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253389086","html_url":"https://github.com/apache/accumulo/issues/4246#issuecomment-2253389086","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4246","id":2253389086,"node_id":"IC_kwDOACaFSM6GT_0e","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T19:57:44Z","updated_at":"2024-07-26T19:57:44Z","author_association":"CONTRIBUTOR","body":"Looking at the history of this I found the following. \r\n\r\n * This issue was opened about a test the verifies the UserFateStore will retry when the random id it picked for a new fate id exists.  It retries up to 5 times and then fails, the test that only exists for UserFateStore checks this. \r\n * The MetaFateStore does not retry and does not have a test for the case of a collision.\r\n * These changes referenced in this issue were made before #4388 which changed the fate id type from 64bit to 128bit.  This change dramatically decreases the chance of collision to the point where maybe it should not be expected.\r\n\r\nWith the change from 64bit to 128bit wondering if instead of implementing and testing the behavior in both stores if we should simplify the expectation to fail on any collision (instead of allowing 5) and test that in both stores.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253389086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253400076","html_url":"https://github.com/apache/accumulo/pull/4767#issuecomment-2253400076","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4767","id":2253400076,"node_id":"IC_kwDOACaFSM6GUCgM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T19:59:57Z","updated_at":"2024-07-26T19:59:57Z","author_association":"CONTRIBUTOR","body":"Marked as draft because I'm not sure if there are more things I should be doing when clearing the queue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253400076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253416593","html_url":"https://github.com/apache/accumulo/issues/4246#issuecomment-2253416593","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4246","id":2253416593,"node_id":"IC_kwDOACaFSM6GUGiR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-26T20:04:09Z","updated_at":"2024-07-26T20:04:09Z","author_association":"CONTRIBUTOR","body":"> With the change from 64bit to 128bit wondering if instead of implementing and testing the behavior in both stores if we should simplify the expectation to fail on any collision (instead of allowing 5) and test that in both stores.\r\n\r\nWhat's the implication of a failure here. Does the user have to retry their fate transaction? If so, I'm not sure we want that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2253416593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]