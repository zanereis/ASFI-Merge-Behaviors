[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532124491","html_url":"https://github.com/apache/brpc/issues/847#issuecomment-532124491","issue_url":"https://api.github.com/repos/apache/brpc/issues/847","id":532124491,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjEyNDQ5MQ==","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T08:45:57Z","updated_at":"2019-09-17T08:45:57Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-brpc/blob/master/docs/cn/client.md#%E5%BC%82%E6%AD%A5%E8%AE%BF%E9%97%AE\r\n你在CallMethod之后就把response给析构了，那收到的请求往哪里写呢，自然会出现未定义行为","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532124491/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532270022","html_url":"https://github.com/apache/brpc/issues/847#issuecomment-532270022","issue_url":"https://api.github.com/repos/apache/brpc/issues/847","id":532270022,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjI3MDAyMg==","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T15:21:14Z","updated_at":"2019-09-17T15:21:14Z","author_association":"CONTRIBUTOR","body":"开了优化不会出现这个情况，不开会出现。\r\n\r\n> https://github.com/apache/incubator-brpc/blob/master/docs/cn/client.md#%E5%BC%82%E6%AD%A5%E8%AE%BF%E9%97%AE\r\n> 你在CallMethod之后就把response给析构了，那收到的请求往哪里写呢，自然会出现未定义行为\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532270022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533029772","html_url":"https://github.com/apache/brpc/issues/847#issuecomment-533029772","issue_url":"https://api.github.com/repos/apache/brpc/issues/847","id":533029772,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzAyOTc3Mg==","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T08:38:53Z","updated_at":"2019-09-19T08:38:53Z","author_association":"CONTRIBUTOR","body":"访问被释放的内存本身就是未定义行为，出现什么都不奇怪吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533029772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533387266","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533387266","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533387266,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM4NzI2Ng==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T03:13:32Z","updated_at":"2019-09-20T03:13:32Z","author_association":"CONTRIBUTOR","body":"单连接为啥还有空闲连接？ 单连接只有节点被naming service移除后自然会被关闭。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533387266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533387953","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533387953","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533387953,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM4Nzk1Mw==","user":{"login":"ufosky","id":801838,"node_id":"MDQ6VXNlcjgwMTgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/801838?v=4","gravatar_id":"","url":"https://api.github.com/users/ufosky","html_url":"https://github.com/ufosky","followers_url":"https://api.github.com/users/ufosky/followers","following_url":"https://api.github.com/users/ufosky/following{/other_user}","gists_url":"https://api.github.com/users/ufosky/gists{/gist_id}","starred_url":"https://api.github.com/users/ufosky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ufosky/subscriptions","organizations_url":"https://api.github.com/users/ufosky/orgs","repos_url":"https://api.github.com/users/ufosky/repos","events_url":"https://api.github.com/users/ufosky/events{/privacy}","received_events_url":"https://api.github.com/users/ufosky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T03:17:41Z","updated_at":"2019-09-20T03:17:41Z","author_association":"CONTRIBUTOR","body":"因为策略上的原因，需要在流量上升时用到某些节点，但是大部分时间应该是用不到的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533387953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533394558","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533394558","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533394558,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM5NDU1OA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T03:55:07Z","updated_at":"2019-09-20T03:55:07Z","author_association":"CONTRIBUTOR","body":"流量低的时候摘除这些backup节点就可以了。你们现在怎么管理？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533394558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533411904","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533411904","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533411904,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQxMTkwNA==","user":{"login":"ufosky","id":801838,"node_id":"MDQ6VXNlcjgwMTgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/801838?v=4","gravatar_id":"","url":"https://api.github.com/users/ufosky","html_url":"https://github.com/ufosky","followers_url":"https://api.github.com/users/ufosky/followers","following_url":"https://api.github.com/users/ufosky/following{/other_user}","gists_url":"https://api.github.com/users/ufosky/gists{/gist_id}","starred_url":"https://api.github.com/users/ufosky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ufosky/subscriptions","organizations_url":"https://api.github.com/users/ufosky/orgs","repos_url":"https://api.github.com/users/ufosky/repos","events_url":"https://api.github.com/users/ufosky/events{/privacy}","received_events_url":"https://api.github.com/users/ufosky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T05:31:00Z","updated_at":"2019-09-20T05:31:00Z","author_association":"CONTRIBUTOR","body":"backup节点也有另外的服务在用，就是说流量高的时候会分一部分流量到别的服务的节点，但平时都走正常节点，关闭不必要的连接","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533411904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533430037","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-533430037","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":533430037,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQzMDAzNw==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T06:45:35Z","updated_at":"2019-09-20T06:45:35Z","author_association":"NONE","body":"refer https://github.com/apache/incubator-brpc/issues/927\r\n可以在core文件中查看bthread栈的方法","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533430037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533451396","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-533451396","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":533451396,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ1MTM5Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T07:57:59Z","updated_at":"2019-09-20T07:57:59Z","author_association":"CONTRIBUTOR","body":"@lorinlee 上面提及的改进有进展么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533451396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533451725","html_url":"https://github.com/apache/brpc/issues/927#issuecomment-533451725","issue_url":"https://api.github.com/repos/apache/brpc/issues/927","id":533451725,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ1MTcyNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T07:59:02Z","updated_at":"2019-09-20T07:59:02Z","author_association":"CONTRIBUTOR","body":"原理和 #903 类似吗？你可以先贴出来，大家试用下也可以给点反馈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533451725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533455240","html_url":"https://github.com/apache/brpc/issues/928#issuecomment-533455240","issue_url":"https://api.github.com/repos/apache/brpc/issues/928","id":533455240,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ1NTI0MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T08:10:36Z","updated_at":"2019-09-20T08:10:36Z","author_association":"CONTRIBUTOR","body":"确认下访问模式是：curl访问A，A访问B？\r\ntls_bls是在切换时才同步的，同时不和local_storage保持同步是可能的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533455240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533456714","html_url":"https://github.com/apache/brpc/issues/928#issuecomment-533456714","issue_url":"https://api.github.com/repos/apache/brpc/issues/928","id":533456714,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ1NjcxNA==","user":{"login":"helloeveroneday","id":4447116,"node_id":"MDQ6VXNlcjQ0NDcxMTY=","avatar_url":"https://avatars.githubusercontent.com/u/4447116?v=4","gravatar_id":"","url":"https://api.github.com/users/helloeveroneday","html_url":"https://github.com/helloeveroneday","followers_url":"https://api.github.com/users/helloeveroneday/followers","following_url":"https://api.github.com/users/helloeveroneday/following{/other_user}","gists_url":"https://api.github.com/users/helloeveroneday/gists{/gist_id}","starred_url":"https://api.github.com/users/helloeveroneday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helloeveroneday/subscriptions","organizations_url":"https://api.github.com/users/helloeveroneday/orgs","repos_url":"https://api.github.com/users/helloeveroneday/repos","events_url":"https://api.github.com/users/helloeveroneday/events{/privacy}","received_events_url":"https://api.github.com/users/helloeveroneday/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T08:15:23Z","updated_at":"2019-09-20T08:17:08Z","author_association":"NONE","body":"确认是：curl访问A，A访问B\r\n暂时没找到 local_storage切换同步 tls_bls.rpcz_parent_span变量的代码，tls.rpcz_parent_span修改在bthread初始化之后。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533456714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533458987","html_url":"https://github.com/apache/brpc/issues/927#issuecomment-533458987","issue_url":"https://api.github.com/repos/apache/brpc/issues/927","id":533458987,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ1ODk4Nw==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T08:22:34Z","updated_at":"2019-09-20T08:22:34Z","author_association":"NONE","body":"903的原理应该是把所有的bthread寄存器找出来，主要是rsp和rip，然后设置某个线程的rsp和rip为要查看的bthread的rsp和rip，就可以执行where命令了。这个只能gdb attach到进程看，而且是有风险的，如果在修改了某个线程的rsp/rip信息后，gdb无法正常退出，进程就会crash。\r\n我的这个是针对core文件的工具，步骤比较繁琐。刚才忘记贴链接了，抱歉：\r\nhttps://github.com/hnwyllmm/coroutine_crash","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533458987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533481162","html_url":"https://github.com/apache/brpc/issues/928#issuecomment-533481162","issue_url":"https://api.github.com/repos/apache/brpc/issues/928","id":533481162,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4MTE2Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:28:50Z","updated_at":"2019-09-20T09:28:50Z","author_association":"CONTRIBUTOR","body":"[切换](https://github.com/apache/incubator-brpc/blob/master/src/bthread/task_group.cpp#L591)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533481162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533483484","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-533483484","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":533483484,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4MzQ4NA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:35:44Z","updated_at":"2019-09-20T09:35:44Z","author_association":"CONTRIBUTOR","body":"> @lorinlee 上面提及的改进有进展么？\r\n\r\n嗯嗯又更新了一版","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533483484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533484415","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533484415","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533484415,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4NDQxNQ==","user":{"login":"ufosky","id":801838,"node_id":"MDQ6VXNlcjgwMTgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/801838?v=4","gravatar_id":"","url":"https://api.github.com/users/ufosky","html_url":"https://github.com/ufosky","followers_url":"https://api.github.com/users/ufosky/followers","following_url":"https://api.github.com/users/ufosky/following{/other_user}","gists_url":"https://api.github.com/users/ufosky/gists{/gist_id}","starred_url":"https://api.github.com/users/ufosky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ufosky/subscriptions","organizations_url":"https://api.github.com/users/ufosky/orgs","repos_url":"https://api.github.com/users/ufosky/repos","events_url":"https://api.github.com/users/ufosky/events{/privacy}","received_events_url":"https://api.github.com/users/ufosky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:38:17Z","updated_at":"2019-09-20T09:38:17Z","author_association":"CONTRIBUTOR","body":"如果要让单连接模式可以关闭空闲连接，可以怎么实现？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533484415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533487177","html_url":"https://github.com/apache/brpc/issues/927#issuecomment-533487177","issue_url":"https://api.github.com/repos/apache/brpc/issues/927","id":533487177,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4NzE3Nw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:47:02Z","updated_at":"2019-09-20T09:47:02Z","author_association":"CONTRIBUTOR","body":"看了下找寄存器的方式是一样的，我在#903也加一个支持查看寄存器值的方法吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533487177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533488761","html_url":"https://github.com/apache/brpc/issues/928#issuecomment-533488761","issue_url":"https://api.github.com/repos/apache/brpc/issues/928","id":533488761,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4ODc2MQ==","user":{"login":"helloeveroneday","id":4447116,"node_id":"MDQ6VXNlcjQ0NDcxMTY=","avatar_url":"https://avatars.githubusercontent.com/u/4447116?v=4","gravatar_id":"","url":"https://api.github.com/users/helloeveroneday","html_url":"https://github.com/helloeveroneday","followers_url":"https://api.github.com/users/helloeveroneday/followers","following_url":"https://api.github.com/users/helloeveroneday/following{/other_user}","gists_url":"https://api.github.com/users/helloeveroneday/gists{/gist_id}","starred_url":"https://api.github.com/users/helloeveroneday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helloeveroneday/subscriptions","organizations_url":"https://api.github.com/users/helloeveroneday/orgs","repos_url":"https://api.github.com/users/helloeveroneday/repos","events_url":"https://api.github.com/users/helloeveroneday/events{/privacy}","received_events_url":"https://api.github.com/users/helloeveroneday/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:51:59Z","updated_at":"2019-09-20T09:52:43Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/4447116/65317891-3d059500-dbcf-11e9-85cc-feefc99cc0dd.png)\r\n* bthread copies tls_bls to its local_storage before switching to next bthread\r\n\r\n我的锅，目前我们使用的版本是2018 7月之前的版本，新版本已经修正。忽略","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533488761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533489447","html_url":"https://github.com/apache/brpc/issues/927#issuecomment-533489447","issue_url":"https://api.github.com/repos/apache/brpc/issues/927","id":533489447,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ4OTQ0Nw==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:54:02Z","updated_at":"2019-09-20T09:54:02Z","author_association":"NONE","body":"@lorinlee  我是看了你的python脚本才知道怎么遍历的^_^","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533489447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533493382","html_url":"https://github.com/apache/brpc/issues/927#issuecomment-533493382","issue_url":"https://api.github.com/repos/apache/brpc/issues/927","id":533493382,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ5MzM4Mg==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T10:05:59Z","updated_at":"2019-09-20T10:05:59Z","author_association":"CONTRIBUTOR","body":"> @lorinlee 我是看了你的python脚本才知道怎么遍历的^_^\r\n\r\n哈哈，我学习下怎么改core文件","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533493382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533944014","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533944014","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533944014,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzk0NDAxNA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T02:33:42Z","updated_at":"2019-09-23T02:33:42Z","author_association":"CONTRIBUTOR","body":"> 如果要让单连接模式可以关闭空闲连接，可以怎么实现？\r\n\r\n如果节点没有被ns移除，你们如何让他空闲下来的？（如何让lb不选择这些backup节点？）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533944014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533951655","html_url":"https://github.com/apache/brpc/issues/926#issuecomment-533951655","issue_url":"https://api.github.com/repos/apache/brpc/issues/926","id":533951655,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzk1MTY1NQ==","user":{"login":"ufosky","id":801838,"node_id":"MDQ6VXNlcjgwMTgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/801838?v=4","gravatar_id":"","url":"https://api.github.com/users/ufosky","html_url":"https://github.com/ufosky","followers_url":"https://api.github.com/users/ufosky/followers","following_url":"https://api.github.com/users/ufosky/following{/other_user}","gists_url":"https://api.github.com/users/ufosky/gists{/gist_id}","starred_url":"https://api.github.com/users/ufosky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ufosky/subscriptions","organizations_url":"https://api.github.com/users/ufosky/orgs","repos_url":"https://api.github.com/users/ufosky/repos","events_url":"https://api.github.com/users/ufosky/events{/privacy}","received_events_url":"https://api.github.com/users/ufosky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T03:45:14Z","updated_at":"2019-09-23T03:45:14Z","author_association":"CONTRIBUTOR","body":"使用SelectiveChannel将正常节点和备用节点放到不同的subchannel里面，然后通过策略让一般情况选择正常节点的subchannel，但是现在的问题是一旦备用节点的channel建立了连接，就一直不断开了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/533951655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/534501058","html_url":"https://github.com/apache/brpc/issues/925#issuecomment-534501058","issue_url":"https://api.github.com/repos/apache/brpc/issues/925","id":534501058,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDUwMTA1OA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-24T10:43:01Z","updated_at":"2019-09-24T10:43:01Z","author_association":"CONTRIBUTOR","body":"看起来分配不出内存、placement new返回了NULL、或者ObjectPoolValidator::validate检测结果是false都有可能会返回NULL","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/534501058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/535318141","html_url":"https://github.com/apache/brpc/pull/824#issuecomment-535318141","issue_url":"https://api.github.com/repos/apache/brpc/issues/824","id":535318141,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTMxODE0MQ==","user":{"login":"MR-workaholic","id":12267045,"node_id":"MDQ6VXNlcjEyMjY3MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/12267045?v=4","gravatar_id":"","url":"https://api.github.com/users/MR-workaholic","html_url":"https://github.com/MR-workaholic","followers_url":"https://api.github.com/users/MR-workaholic/followers","following_url":"https://api.github.com/users/MR-workaholic/following{/other_user}","gists_url":"https://api.github.com/users/MR-workaholic/gists{/gist_id}","starred_url":"https://api.github.com/users/MR-workaholic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MR-workaholic/subscriptions","organizations_url":"https://api.github.com/users/MR-workaholic/orgs","repos_url":"https://api.github.com/users/MR-workaholic/repos","events_url":"https://api.github.com/users/MR-workaholic/events{/privacy}","received_events_url":"https://api.github.com/users/MR-workaholic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-26T03:33:34Z","updated_at":"2019-09-26T03:33:34Z","author_association":"NONE","body":"想问问，这个提交是修复哪个问题的？我们在用LA的时候，遇到选服务失败的情况，是因为这个问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/535318141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/535387890","html_url":"https://github.com/apache/brpc/pull/824#issuecomment-535387890","issue_url":"https://api.github.com/repos/apache/brpc/issues/824","id":535387890,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTM4Nzg5MA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-26T07:59:43Z","updated_at":"2019-09-26T07:59:43Z","author_association":"MEMBER","body":"This pr fixed the issue that _base_weight is accidentally set to 0 and Disable() returns true since _base_weight is equal to 0. As a result, LALB would skip the server because it is 'disabled' which should not. If you run across selecting failure and use brpc before Jun, it may probably be caused by this issue. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/535387890/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536249218","html_url":"https://github.com/apache/brpc/issues/931#issuecomment-536249218","issue_url":"https://api.github.com/repos/apache/brpc/issues/931","id":536249218,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjI0OTIxOA==","user":{"login":"walterzhaoJR","id":22393698,"node_id":"MDQ6VXNlcjIyMzkzNjk4","avatar_url":"https://avatars.githubusercontent.com/u/22393698?v=4","gravatar_id":"","url":"https://api.github.com/users/walterzhaoJR","html_url":"https://github.com/walterzhaoJR","followers_url":"https://api.github.com/users/walterzhaoJR/followers","following_url":"https://api.github.com/users/walterzhaoJR/following{/other_user}","gists_url":"https://api.github.com/users/walterzhaoJR/gists{/gist_id}","starred_url":"https://api.github.com/users/walterzhaoJR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterzhaoJR/subscriptions","organizations_url":"https://api.github.com/users/walterzhaoJR/orgs","repos_url":"https://api.github.com/users/walterzhaoJR/repos","events_url":"https://api.github.com/users/walterzhaoJR/events{/privacy}","received_events_url":"https://api.github.com/users/walterzhaoJR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-29T05:00:10Z","updated_at":"2019-09-29T05:00:10Z","author_association":"NONE","body":"这样设置后，可以打印到日志文件，但是同时还会打印到终端，但是我想通过重定向输出来解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536249218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536250234","html_url":"https://github.com/apache/brpc/issues/931#issuecomment-536250234","issue_url":"https://api.github.com/repos/apache/brpc/issues/931","id":536250234,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjI1MDIzNA==","user":{"login":"walterzhaoJR","id":22393698,"node_id":"MDQ6VXNlcjIyMzkzNjk4","avatar_url":"https://avatars.githubusercontent.com/u/22393698?v=4","gravatar_id":"","url":"https://api.github.com/users/walterzhaoJR","html_url":"https://github.com/walterzhaoJR","followers_url":"https://api.github.com/users/walterzhaoJR/followers","following_url":"https://api.github.com/users/walterzhaoJR/following{/other_user}","gists_url":"https://api.github.com/users/walterzhaoJR/gists{/gist_id}","starred_url":"https://api.github.com/users/walterzhaoJR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterzhaoJR/subscriptions","organizations_url":"https://api.github.com/users/walterzhaoJR/orgs","repos_url":"https://api.github.com/users/walterzhaoJR/repos","events_url":"https://api.github.com/users/walterzhaoJR/events{/privacy}","received_events_url":"https://api.github.com/users/walterzhaoJR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-29T05:16:27Z","updated_at":"2019-09-29T05:16:27Z","author_association":"NONE","body":"这样设置就ok了\r\n![image](https://user-images.githubusercontent.com/22393698/65826631-55566d80-e2bb-11e9-9415-0584e8a0d499.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536250234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536269195","html_url":"https://github.com/apache/brpc/pull/932#issuecomment-536269195","issue_url":"https://api.github.com/repos/apache/brpc/issues/932","id":536269195,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjI2OTE5NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-29T08:29:57Z","updated_at":"2019-09-29T08:29:57Z","author_association":"CONTRIBUTOR","body":"那个位置就是\"original cap\"","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536269195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536294759","html_url":"https://github.com/apache/brpc/pull/932#issuecomment-536294759","issue_url":"https://api.github.com/repos/apache/brpc/issues/932","id":536294759,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjI5NDc1OQ==","user":{"login":"zexuan","id":6112909,"node_id":"MDQ6VXNlcjYxMTI5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6112909?v=4","gravatar_id":"","url":"https://api.github.com/users/zexuan","html_url":"https://github.com/zexuan","followers_url":"https://api.github.com/users/zexuan/followers","following_url":"https://api.github.com/users/zexuan/following{/other_user}","gists_url":"https://api.github.com/users/zexuan/gists{/gist_id}","starred_url":"https://api.github.com/users/zexuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zexuan/subscriptions","organizations_url":"https://api.github.com/users/zexuan/orgs","repos_url":"https://api.github.com/users/zexuan/repos","events_url":"https://api.github.com/users/zexuan/events{/privacy}","received_events_url":"https://api.github.com/users/zexuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-29T12:25:00Z","updated_at":"2019-09-29T12:25:00Z","author_association":"CONTRIBUTOR","body":"请问此处是因为版本升级，数据结构所有变化，对吗？同样的道理才有了：如果\"abi_check != 0\" ，表明是旧版本，会二进制不兼容？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536294759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536377792","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-536377792","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":536377792,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjM3Nzc5Mg==","user":{"login":"libratiger","id":870144,"node_id":"MDQ6VXNlcjg3MDE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/870144?v=4","gravatar_id":"","url":"https://api.github.com/users/libratiger","html_url":"https://github.com/libratiger","followers_url":"https://api.github.com/users/libratiger/followers","following_url":"https://api.github.com/users/libratiger/following{/other_user}","gists_url":"https://api.github.com/users/libratiger/gists{/gist_id}","starred_url":"https://api.github.com/users/libratiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libratiger/subscriptions","organizations_url":"https://api.github.com/users/libratiger/orgs","repos_url":"https://api.github.com/users/libratiger/repos","events_url":"https://api.github.com/users/libratiger/events{/privacy}","received_events_url":"https://api.github.com/users/libratiger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-30T02:40:54Z","updated_at":"2019-09-30T02:40:54Z","author_association":"NONE","body":"我也发现过这种情况，就是序列化和反序列化慢。我看了一下底层，都是调用的pb的反序列化，这个锅应该是pb的问题。\r\n\r\n如果自己比较明确数据格式的画，可以尝试streaming rpc，这个里面没有调用Pb的反序列化，brpc会把IOBuf交给用户来处理。\r\n\r\n但是brpc的streaming和grpc的差别好像很大，grpc不用改什么借口，但是brpc需要换成```StreamWrite```这些接口。这个文档也没有多说原因，如果能够补上会更好？@jamesge","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536377792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536379966","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-536379966","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":536379966,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjM3OTk2Ng==","user":{"login":"libratiger","id":870144,"node_id":"MDQ6VXNlcjg3MDE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/870144?v=4","gravatar_id":"","url":"https://api.github.com/users/libratiger","html_url":"https://github.com/libratiger","followers_url":"https://api.github.com/users/libratiger/followers","following_url":"https://api.github.com/users/libratiger/following{/other_user}","gists_url":"https://api.github.com/users/libratiger/gists{/gist_id}","starred_url":"https://api.github.com/users/libratiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libratiger/subscriptions","organizations_url":"https://api.github.com/users/libratiger/orgs","repos_url":"https://api.github.com/users/libratiger/repos","events_url":"https://api.github.com/users/libratiger/events{/privacy}","received_events_url":"https://api.github.com/users/libratiger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-30T02:52:35Z","updated_at":"2019-09-30T02:52:35Z","author_association":"NONE","body":"@gxkevin 你后来有其他的优化吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536379966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536381763","html_url":"https://github.com/apache/brpc/issues/690#issuecomment-536381763","issue_url":"https://api.github.com/repos/apache/brpc/issues/690","id":536381763,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjM4MTc2Mw==","user":{"login":"loginhel","id":14918453,"node_id":"MDQ6VXNlcjE0OTE4NDUz","avatar_url":"https://avatars.githubusercontent.com/u/14918453?v=4","gravatar_id":"","url":"https://api.github.com/users/loginhel","html_url":"https://github.com/loginhel","followers_url":"https://api.github.com/users/loginhel/followers","following_url":"https://api.github.com/users/loginhel/following{/other_user}","gists_url":"https://api.github.com/users/loginhel/gists{/gist_id}","starred_url":"https://api.github.com/users/loginhel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loginhel/subscriptions","organizations_url":"https://api.github.com/users/loginhel/orgs","repos_url":"https://api.github.com/users/loginhel/repos","events_url":"https://api.github.com/users/loginhel/events{/privacy}","received_events_url":"https://api.github.com/users/loginhel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-30T03:03:05Z","updated_at":"2019-09-30T03:03:05Z","author_association":"NONE","body":"    找到原因了，因为libtcmalloc.so与libtcmalloc_and_profiler.so同时连接到同一个程序中时，启动会报那个Check failed错误。\r\n    我的情况是，直接拉取leveldb的master分支代码，然后编译，默认情况下leveldb会把tcmalloc动态库连接到libleveldb.so，而libbrpc.so又连接了leveldb的so，导致libbrpc.so链接了libtcmalloc.so。\r\n    而在echo例子开启DBRPC_ENABLE_CPU_PROFILER时，又会链接上libtcmalloc_and_profiler.so，最终echo例子同时链接了libtcmalloc.so与libtcmalloc_and_profiler.so，启动报错。\r\n    解决方法：把leveldb的CMakeList.txt中开启tcmalloc的配置注释掉，重新编译安装leveldb库，然后再重新编译安装brpc动态库，最后重新生成echo例子，可以跑起来了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536381763/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536404149","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-536404149","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":536404149,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQwNDE0OQ==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-30T05:14:10Z","updated_at":"2019-09-30T05:14:10Z","author_association":"NONE","body":"用map结构很难保证效率吧，repeated都还好，效率非常高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536404149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536405150","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-536405150","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":536405150,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQwNTE1MA==","user":{"login":"libratiger","id":870144,"node_id":"MDQ6VXNlcjg3MDE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/870144?v=4","gravatar_id":"","url":"https://api.github.com/users/libratiger","html_url":"https://github.com/libratiger","followers_url":"https://api.github.com/users/libratiger/followers","following_url":"https://api.github.com/users/libratiger/following{/other_user}","gists_url":"https://api.github.com/users/libratiger/gists{/gist_id}","starred_url":"https://api.github.com/users/libratiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libratiger/subscriptions","organizations_url":"https://api.github.com/users/libratiger/orgs","repos_url":"https://api.github.com/users/libratiger/repos","events_url":"https://api.github.com/users/libratiger/events{/privacy}","received_events_url":"https://api.github.com/users/libratiger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-30T05:20:05Z","updated_at":"2019-09-30T05:20:05Z","author_association":"NONE","body":"@hnwyllmm 你有benchmark对比过吗？我觉得两者都快不了，不过从原理上理解，repeated应该是会快一点。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536405150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536826032","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-536826032","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":536826032,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjgyNjAzMg==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-01T02:00:34Z","updated_at":"2019-10-01T02:00:34Z","author_association":"NONE","body":"我们公司有一个序列化sdl，拿来跟pb对比过，列表模式性能pb稍快，map pb稍快。少量字段的数据结构，每秒百万最少的。所以你还是再考虑下map能不能优化掉。还有，用自己解析的二进制结构，不好做扩展，不过也看自己业务模式。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/536826032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/538848139","html_url":"https://github.com/apache/brpc/issues/935#issuecomment-538848139","issue_url":"https://api.github.com/repos/apache/brpc/issues/935","id":538848139,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg0ODEzOQ==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T05:45:11Z","updated_at":"2019-10-07T05:45:11Z","author_association":"NONE","body":"TCP可以支持吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/538848139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539286264","html_url":"https://github.com/apache/brpc/pull/824#issuecomment-539286264","issue_url":"https://api.github.com/repos/apache/brpc/issues/824","id":539286264,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTI4NjI2NA==","user":{"login":"MR-workaholic","id":12267045,"node_id":"MDQ6VXNlcjEyMjY3MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/12267045?v=4","gravatar_id":"","url":"https://api.github.com/users/MR-workaholic","html_url":"https://github.com/MR-workaholic","followers_url":"https://api.github.com/users/MR-workaholic/followers","following_url":"https://api.github.com/users/MR-workaholic/following{/other_user}","gists_url":"https://api.github.com/users/MR-workaholic/gists{/gist_id}","starred_url":"https://api.github.com/users/MR-workaholic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MR-workaholic/subscriptions","organizations_url":"https://api.github.com/users/MR-workaholic/orgs","repos_url":"https://api.github.com/users/MR-workaholic/repos","events_url":"https://api.github.com/users/MR-workaholic/events{/privacy}","received_events_url":"https://api.github.com/users/MR-workaholic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T02:34:23Z","updated_at":"2019-10-08T02:34:23Z","author_association":"NONE","body":"@zyearn 哪具体哪些情况会出现\"_base_weight is accidentally set to 0\"？看代码，下游服务出现超长延时或者每个服务的平均weight小于1才会出现这种情况。而且“每个服务的平均weight小于1”会出现吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539286264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539297450","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-539297450","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":539297450,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTI5NzQ1MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T03:25:54Z","updated_at":"2019-10-08T03:26:04Z","author_association":"CONTRIBUTOR","body":"@libratiger \r\n> 如果自己比较明确数据格式的画，可以尝试streaming rpc，这个里面没有调用Pb的反序列化，brpc会把IOBuf交给用户来处理。\r\n\r\n碰到这种场景，一般用http + body是pb更合理一些，brpc中的streaming rpc是解决有序传输和处理问题，grpc层面的streaming目前brpc并不支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539297450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539301544","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-539301544","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":539301544,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTMwMTU0NA==","user":{"login":"libratiger","id":870144,"node_id":"MDQ6VXNlcjg3MDE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/870144?v=4","gravatar_id":"","url":"https://api.github.com/users/libratiger","html_url":"https://github.com/libratiger","followers_url":"https://api.github.com/users/libratiger/followers","following_url":"https://api.github.com/users/libratiger/following{/other_user}","gists_url":"https://api.github.com/users/libratiger/gists{/gist_id}","starred_url":"https://api.github.com/users/libratiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libratiger/subscriptions","organizations_url":"https://api.github.com/users/libratiger/orgs","repos_url":"https://api.github.com/users/libratiger/repos","events_url":"https://api.github.com/users/libratiger/events{/privacy}","received_events_url":"https://api.github.com/users/libratiger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T03:45:10Z","updated_at":"2019-10-08T03:45:10Z","author_association":"NONE","body":"> @libratiger\r\n> \r\n> > 如果自己比较明确数据格式的画，可以尝试streaming rpc，这个里面没有调用Pb的反序列化，brpc会把IOBuf交给用户来处理。\r\n> \r\n> 碰到这种场景，一般用http + body是pb更合理一些，brpc中的streaming rpc是解决有序传输和处理问题，grpc层面的streaming目前brpc并不支持。\r\n\r\n\r\n嗯，我理解streaming rpc的设计不是干这个事的，但是我看如果把IOBuf交给用户来处理的画，应该是会比使用pb更加高效，可以减少反序列化的开销，尤其是用户自己知道格式的情况下。\r\n\r\n\r\nbtw: brpc有对pb, http+body这种的性能对比吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539301544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539302178","html_url":"https://github.com/apache/brpc/issues/933#issuecomment-539302178","issue_url":"https://api.github.com/repos/apache/brpc/issues/933","id":539302178,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTMwMjE3OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T03:47:44Z","updated_at":"2019-10-08T03:47:44Z","author_association":"CONTRIBUTOR","body":"目前不支持上传超大文件(持续传输)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539302178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539303038","html_url":"https://github.com/apache/brpc/issues/935#issuecomment-539303038","issue_url":"https://api.github.com/repos/apache/brpc/issues/935","id":539303038,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTMwMzAzOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T03:51:35Z","updated_at":"2019-10-08T03:51:35Z","author_association":"CONTRIBUTOR","body":"Channel创建时可以指定ip。如果你需要获得某次访问选择的机器的话，调用Controller::remote_side()","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539303038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539306279","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539306279","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539306279,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTMwNjI3OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T04:03:34Z","updated_at":"2019-10-08T06:04:58Z","author_association":"CONTRIBUTOR","body":"这个错误的表面原因是[连续3次](https://github.com/apache/incubator-brpc/blob/fc07b7bf45c4b2aa90ae5c832f3b48a8da124640/src/brpc/socket.cpp#L93)连接超时触发熔断，client会对那个server[每隔3秒](https://github.com/apache/incubator-brpc/blob/fc07b7bf45c4b2aa90ae5c832f3b48a8da124640/src/brpc/socket_map.cpp#L35)做健康检查，直到连上或机器被移除为止。这个功能的动机是防止持续访问频繁失联的机器。\"连续3次连接超时\"还是比较强的限制，只要中间任何一次成功了，就会从头算起，如果觉得这个还松，可以继续调大。调到很大的数值就相当于取消了这个功能。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539306279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539317987","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539317987","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539317987,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTMxNzk4Nw==","user":{"login":"ilixiaocui","id":15689619,"node_id":"MDQ6VXNlcjE1Njg5NjE5","avatar_url":"https://avatars.githubusercontent.com/u/15689619?v=4","gravatar_id":"","url":"https://api.github.com/users/ilixiaocui","html_url":"https://github.com/ilixiaocui","followers_url":"https://api.github.com/users/ilixiaocui/followers","following_url":"https://api.github.com/users/ilixiaocui/following{/other_user}","gists_url":"https://api.github.com/users/ilixiaocui/gists{/gist_id}","starred_url":"https://api.github.com/users/ilixiaocui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilixiaocui/subscriptions","organizations_url":"https://api.github.com/users/ilixiaocui/orgs","repos_url":"https://api.github.com/users/ilixiaocui/repos","events_url":"https://api.github.com/users/ilixiaocui/events{/privacy}","received_events_url":"https://api.github.com/users/ilixiaocui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T04:37:22Z","updated_at":"2019-10-08T04:38:37Z","author_association":"NONE","body":"> 这个错误的表面原因是[连续3次](https://github.com/apache/incubator-brpc/blob/fc07b7bf45c4b2aa90ae5c832f3b48a8da124640/src/brpc/socket.cpp#L93)rpc超时触发熔断，client会对那个server[每隔3秒](https://github.com/apache/incubator-brpc/blob/fc07b7bf45c4b2aa90ae5c832f3b48a8da124640/src/brpc/socket_map.cpp#L35)做健康检查，直到连上或机器被移除为止。这个功能的动机是防止持续访问频繁失联的机器。\"连续3次超时\"还是比较强的限制，只要中间任何一次成功了，就会从头算起，如果觉得这个还松，可以继续调大。调到很大的数值就相当于取消了这个功能。\r\n\r\n有疑问的地方在于server端是正常提供服务的，其他rpc请求都正常响应，这个rpc偶尔会出现这种错误。这个原因要怎么排查呢？\r\n\r\n还有就是这个timeout是说请求并未到达server端 还是说 server端收到请求但处理超时了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539317987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539350676","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539350676","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539350676,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM1MDY3Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T06:05:24Z","updated_at":"2019-10-08T06:05:24Z","author_association":"CONTRIBUTOR","body":"检查下日志中是否有连续的Connection timed out","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539350676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539351202","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539351202","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539351202,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM1MTIwMg==","user":{"login":"ilixiaocui","id":15689619,"node_id":"MDQ6VXNlcjE1Njg5NjE5","avatar_url":"https://avatars.githubusercontent.com/u/15689619?v=4","gravatar_id":"","url":"https://api.github.com/users/ilixiaocui","html_url":"https://github.com/ilixiaocui","followers_url":"https://api.github.com/users/ilixiaocui/followers","following_url":"https://api.github.com/users/ilixiaocui/following{/other_user}","gists_url":"https://api.github.com/users/ilixiaocui/gists{/gist_id}","starred_url":"https://api.github.com/users/ilixiaocui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilixiaocui/subscriptions","organizations_url":"https://api.github.com/users/ilixiaocui/orgs","repos_url":"https://api.github.com/users/ilixiaocui/repos","events_url":"https://api.github.com/users/ilixiaocui/events{/privacy}","received_events_url":"https://api.github.com/users/ilixiaocui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T06:06:36Z","updated_at":"2019-10-08T06:06:36Z","author_association":"NONE","body":"> 检查下日志中是否有连续的Connection timed out\r\n\r\n没有连续的。偶尔出现一下，我们这边是每隔10s发送一次，本次失败，下次就成功了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539351202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539357347","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539357347","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539357347,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM1NzM0Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T06:20:25Z","updated_at":"2019-10-08T06:20:25Z","author_association":"CONTRIBUTOR","body":"用的什么负载均衡方式？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539357347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539359483","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539359483","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539359483,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM1OTQ4Mw==","user":{"login":"ilixiaocui","id":15689619,"node_id":"MDQ6VXNlcjE1Njg5NjE5","avatar_url":"https://avatars.githubusercontent.com/u/15689619?v=4","gravatar_id":"","url":"https://api.github.com/users/ilixiaocui","html_url":"https://github.com/ilixiaocui","followers_url":"https://api.github.com/users/ilixiaocui/followers","following_url":"https://api.github.com/users/ilixiaocui/following{/other_user}","gists_url":"https://api.github.com/users/ilixiaocui/gists{/gist_id}","starred_url":"https://api.github.com/users/ilixiaocui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilixiaocui/subscriptions","organizations_url":"https://api.github.com/users/ilixiaocui/orgs","repos_url":"https://api.github.com/users/ilixiaocui/repos","events_url":"https://api.github.com/users/ilixiaocui/events{/privacy}","received_events_url":"https://api.github.com/users/ilixiaocui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T06:26:18Z","updated_at":"2019-10-08T06:26:18Z","author_association":"NONE","body":"没有负载均衡。我们是一个分布式存储系统，由元数据节点mds和各存储节点组成。各存储节点每隔10s向mds发送心跳。假期期间发现某些存储节点发送心跳偶尔出现失败的情况，且失败的errcode和text都相同。查看metric发现mds的实际实用的线程数量较小，cpu压力也很小，按道理来说不会出现超时的情况","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539359483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539370334","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539370334","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539370334,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM3MDMzNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T06:58:58Z","updated_at":"2019-10-08T06:58:58Z","author_association":"CONTRIBUTOR","body":"mds只是一台机器，client通过ip去访问它么？如果是这样的话，只能解释为，mds偶尔断线导致的健康检查，下面日志中应该有Checking开头，指向10.198.136.132:6666的内容","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539370334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539372348","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539372348","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539372348,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM3MjM0OA==","user":{"login":"ilixiaocui","id":15689619,"node_id":"MDQ6VXNlcjE1Njg5NjE5","avatar_url":"https://avatars.githubusercontent.com/u/15689619?v=4","gravatar_id":"","url":"https://api.github.com/users/ilixiaocui","html_url":"https://github.com/ilixiaocui","followers_url":"https://api.github.com/users/ilixiaocui/followers","following_url":"https://api.github.com/users/ilixiaocui/following{/other_user}","gists_url":"https://api.github.com/users/ilixiaocui/gists{/gist_id}","starred_url":"https://api.github.com/users/ilixiaocui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilixiaocui/subscriptions","organizations_url":"https://api.github.com/users/ilixiaocui/orgs","repos_url":"https://api.github.com/users/ilixiaocui/repos","events_url":"https://api.github.com/users/ilixiaocui/events{/privacy}","received_events_url":"https://api.github.com/users/ilixiaocui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T07:04:23Z","updated_at":"2019-10-08T07:04:23Z","author_association":"NONE","body":"> mds只是一台机器，client通过ip去访问它么？如果是这样的话，只能解释为，mds偶尔断线导致的健康检查，下面日志中应该有Checking开头，指向10.198.136.132:6666的内容\r\n\r\n1. checking开头的相关日志是在存储节点日志中还是mds中？\r\n2. 看了存储节点的metric, 发现在timeout的时候存储节点上的load或者cpu或者读写延迟会飙高一下，这会不会导致这种错误的产生？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539372348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539377750","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539377750","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539377750,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM3Nzc1MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T07:16:44Z","updated_at":"2019-10-08T07:16:44Z","author_association":"CONTRIBUTOR","body":"1. 存储节点\r\n2. 有可能。client端由于cpu不足而得不到及时运行也可能导致超时","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539377750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539380834","html_url":"https://github.com/apache/brpc/issues/936#issuecomment-539380834","issue_url":"https://api.github.com/repos/apache/brpc/issues/936","id":539380834,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTM4MDgzNA==","user":{"login":"ilixiaocui","id":15689619,"node_id":"MDQ6VXNlcjE1Njg5NjE5","avatar_url":"https://avatars.githubusercontent.com/u/15689619?v=4","gravatar_id":"","url":"https://api.github.com/users/ilixiaocui","html_url":"https://github.com/ilixiaocui","followers_url":"https://api.github.com/users/ilixiaocui/followers","following_url":"https://api.github.com/users/ilixiaocui/following{/other_user}","gists_url":"https://api.github.com/users/ilixiaocui/gists{/gist_id}","starred_url":"https://api.github.com/users/ilixiaocui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilixiaocui/subscriptions","organizations_url":"https://api.github.com/users/ilixiaocui/orgs","repos_url":"https://api.github.com/users/ilixiaocui/repos","events_url":"https://api.github.com/users/ilixiaocui/events{/privacy}","received_events_url":"https://api.github.com/users/ilixiaocui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T07:23:10Z","updated_at":"2019-10-08T07:23:10Z","author_association":"NONE","body":"> 1. 存储节点\r\n> 2. 有可能。client端由于cpu不足而得不到及时运行也可能导致超时\r\n\r\n> 1. 存储节点\r\n> 2. 有可能。client端由于cpu不足而得不到及时运行也可能导致超时\r\n\r\n没有找到checking相关的日志","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539380834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539922756","html_url":"https://github.com/apache/brpc/pull/938#issuecomment-539922756","issue_url":"https://api.github.com/repos/apache/brpc/issues/938","id":539922756,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTkyMjc1Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T09:37:02Z","updated_at":"2019-10-09T09:37:02Z","author_association":"CONTRIBUTOR","body":"1. 看下错误的build，不是所有文件的注释都是#。\r\n2. 去掉第一行的#，和其他文件的开头保持一致。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539922756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539924045","html_url":"https://github.com/apache/brpc/pull/938#issuecomment-539924045","issue_url":"https://api.github.com/repos/apache/brpc/issues/938","id":539924045,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTkyNDA0NQ==","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T09:40:29Z","updated_at":"2019-10-09T09:40:29Z","author_association":"MEMBER","body":"Sorry for that, please rollback.\r\nI will try to fix it later.\r\n\r\n\r\n发件人: Ge Jun <notifications@github.com>\r\n答复: apache/incubator-brpc <reply@reply.github.com>\r\n日期: 2019年10月9日 星期三 下午5:38\r\n收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com>\r\n抄送: \"Tan,Zhongyi\" <tanzhongyi@baidu.com>, Author <author@noreply.github.com>\r\n主题: Re: [apache/incubator-brpc] add license header for make, dockerfile,etc (#938)\r\n\r\n\r\n  1.  看下错误的build，不是所有文件的注释都是#。\r\n  2.  去掉第一行的#，和其他文件的开头保持一致。\r\n\r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub<https://github.com/apache/incubator-brpc/pull/938?email_source=notifications&email_token=AEZ6YDTNDZGMRSRMBIGXFELQNWQ63A5CNFSM4I634HDKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEAXJCRA#issuecomment-539922756>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AEZ6YDVXBMIJLYUIJKZLZJLQNWQ63ANCNFSM4I634HDA>.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/539924045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/541292413","html_url":"https://github.com/apache/brpc/pull/937#issuecomment-541292413","issue_url":"https://api.github.com/repos/apache/brpc/issues/937","id":541292413,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTI5MjQxMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-12T06:41:51Z","updated_at":"2019-10-12T06:41:51Z","author_association":"CONTRIBUTOR","body":"The failed CI is being debugged and seemingly has nothing to do with the change, merge this PR first.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/541292413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544435521","html_url":"https://github.com/apache/brpc/issues/943#issuecomment-544435521","issue_url":"https://api.github.com/repos/apache/brpc/issues/943","id":544435521,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQzNTUyMQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T09:40:42Z","updated_at":"2023-08-11T09:14:54Z","author_association":"MEMBER","body":"对端在断网后，健康检查每隔一段时间会去检测是否正常 https://github.com/apache/incubator-brpc/blob/master/docs/cn/client.md#%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544435521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544463272","html_url":"https://github.com/apache/brpc/issues/943#issuecomment-544463272","issue_url":"https://api.github.com/repos/apache/brpc/issues/943","id":544463272,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQ2MzI3Mg==","user":{"login":"m200972391","id":12232542,"node_id":"MDQ6VXNlcjEyMjMyNTQy","avatar_url":"https://avatars.githubusercontent.com/u/12232542?v=4","gravatar_id":"","url":"https://api.github.com/users/m200972391","html_url":"https://github.com/m200972391","followers_url":"https://api.github.com/users/m200972391/followers","following_url":"https://api.github.com/users/m200972391/following{/other_user}","gists_url":"https://api.github.com/users/m200972391/gists{/gist_id}","starred_url":"https://api.github.com/users/m200972391/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m200972391/subscriptions","organizations_url":"https://api.github.com/users/m200972391/orgs","repos_url":"https://api.github.com/users/m200972391/repos","events_url":"https://api.github.com/users/m200972391/events{/privacy}","received_events_url":"https://api.github.com/users/m200972391/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T10:59:55Z","updated_at":"2019-10-21T10:59:55Z","author_association":"NONE","body":"谢谢回复。health_check_interval 健康检查的时间是3秒钟，网络恢复之后，有时候会持续四五十秒还在返回E112的错误，还有其他的什么机制可能让客户端返回E112错误么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544463272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544569743","html_url":"https://github.com/apache/brpc/issues/943#issuecomment-544569743","issue_url":"https://api.github.com/repos/apache/brpc/issues/943","id":544569743,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU2OTc0Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T15:30:47Z","updated_at":"2019-10-21T15:30:47Z","author_association":"CONTRIBUTOR","body":"@m200972391 你看看日志中是否有Checking开头(及对应ip)的日志，看看断网，第一次返回E112错误，Checking日志，恢复等时间点的关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544569743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544773086","html_url":"https://github.com/apache/brpc/issues/943#issuecomment-544773086","issue_url":"https://api.github.com/repos/apache/brpc/issues/943","id":544773086,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDc3MzA4Ng==","user":{"login":"m200972391","id":12232542,"node_id":"MDQ6VXNlcjEyMjMyNTQy","avatar_url":"https://avatars.githubusercontent.com/u/12232542?v=4","gravatar_id":"","url":"https://api.github.com/users/m200972391","html_url":"https://github.com/m200972391","followers_url":"https://api.github.com/users/m200972391/followers","following_url":"https://api.github.com/users/m200972391/following{/other_user}","gists_url":"https://api.github.com/users/m200972391/gists{/gist_id}","starred_url":"https://api.github.com/users/m200972391/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m200972391/subscriptions","organizations_url":"https://api.github.com/users/m200972391/orgs","repos_url":"https://api.github.com/users/m200972391/repos","events_url":"https://api.github.com/users/m200972391/events{/privacy}","received_events_url":"https://api.github.com/users/m200972391/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-22T01:29:30Z","updated_at":"2019-10-22T01:29:30Z","author_association":"NONE","body":"我调试了一下，应该是版本比较老，我的版本中CheckHealth函数中的connect函数没有加超时，谢谢两位回复。@jamesge @zyearn","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/544773086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545433894","html_url":"https://github.com/apache/brpc/issues/234#issuecomment-545433894","issue_url":"https://api.github.com/repos/apache/brpc/issues/234","id":545433894,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTQzMzg5NA==","user":{"login":"0x007004","id":13299372,"node_id":"MDQ6VXNlcjEzMjk5Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/13299372?v=4","gravatar_id":"","url":"https://api.github.com/users/0x007004","html_url":"https://github.com/0x007004","followers_url":"https://api.github.com/users/0x007004/followers","following_url":"https://api.github.com/users/0x007004/following{/other_user}","gists_url":"https://api.github.com/users/0x007004/gists{/gist_id}","starred_url":"https://api.github.com/users/0x007004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x007004/subscriptions","organizations_url":"https://api.github.com/users/0x007004/orgs","repos_url":"https://api.github.com/users/0x007004/repos","events_url":"https://api.github.com/users/0x007004/events{/privacy}","received_events_url":"https://api.github.com/users/0x007004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T13:06:06Z","updated_at":"2019-10-23T13:06:06Z","author_association":"NONE","body":"growth 是不是表示最大值啊？ \r\n\r\n比如：第一天我把内存分配的特别大，程序一直运行，第二天再次看一下growth的指标，并且做diff发现输出的是\"no node print\"。没明白growth的原理，如果只考虑malloc不管free,这个growth看到的内存应该是一直上涨的状况才对啊(一天比一天大)。  \r\n\r\n看这个的起因是线上的服务内存突然暴涨 之后又降了回来， 用涨之前和涨之后的growth做了一下diff ，生成diff的图表示的意义没想明白，来这里请教一下..\r\n\r\n@jamesge @gydong 有时间的时候麻烦解答一下,感谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545433894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545498840","html_url":"https://github.com/apache/brpc/issues/234#issuecomment-545498840","issue_url":"https://api.github.com/repos/apache/brpc/issues/234","id":545498840,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTQ5ODg0MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T15:25:47Z","updated_at":"2019-10-23T15:32:45Z","author_association":"CONTRIBUTOR","body":"和malloc的具体实现有关，tcmalloc中的growth是只计算向系统申请的部分，所以malloc复用内存的部分不会计入growth。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545498840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545707567","html_url":"https://github.com/apache/brpc/issues/234#issuecomment-545707567","issue_url":"https://api.github.com/repos/apache/brpc/issues/234","id":545707567,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTcwNzU2Nw==","user":{"login":"0x007004","id":13299372,"node_id":"MDQ6VXNlcjEzMjk5Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/13299372?v=4","gravatar_id":"","url":"https://api.github.com/users/0x007004","html_url":"https://github.com/0x007004","followers_url":"https://api.github.com/users/0x007004/followers","following_url":"https://api.github.com/users/0x007004/following{/other_user}","gists_url":"https://api.github.com/users/0x007004/gists{/gist_id}","starred_url":"https://api.github.com/users/0x007004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x007004/subscriptions","organizations_url":"https://api.github.com/users/0x007004/orgs","repos_url":"https://api.github.com/users/0x007004/repos","events_url":"https://api.github.com/users/0x007004/events{/privacy}","received_events_url":"https://api.github.com/users/0x007004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T01:55:42Z","updated_at":"2019-10-24T01:55:42Z","author_association":"NONE","body":"哦 , 明白了, 谢谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545707567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545730269","html_url":"https://github.com/apache/brpc/issues/234#issuecomment-545730269","issue_url":"https://api.github.com/repos/apache/brpc/issues/234","id":545730269,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTczMDI2OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T03:45:25Z","updated_at":"2019-10-24T03:45:25Z","author_association":"CONTRIBUTOR","body":"FYI @yuinm https://github.com/gperftools/gperftools/blob/f47a52ce85c3d8d559aaae7b7a426c359fbca225/src/page_heap.cc#L644 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545730269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545846471","html_url":"https://github.com/apache/brpc/issues/944#issuecomment-545846471","issue_url":"https://api.github.com/repos/apache/brpc/issues/944","id":545846471,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTg0NjQ3MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T10:05:17Z","updated_at":"2019-10-24T10:05:17Z","author_association":"CONTRIBUTOR","body":"可能和格式有关，导致fscanf失败，可以贴一下io文件的内容，看看是怎么对不上的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/545846471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546171330","html_url":"https://github.com/apache/brpc/issues/234#issuecomment-546171330","issue_url":"https://api.github.com/repos/apache/brpc/issues/234","id":546171330,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE3MTMzMA==","user":{"login":"0x007004","id":13299372,"node_id":"MDQ6VXNlcjEzMjk5Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/13299372?v=4","gravatar_id":"","url":"https://api.github.com/users/0x007004","html_url":"https://github.com/0x007004","followers_url":"https://api.github.com/users/0x007004/followers","following_url":"https://api.github.com/users/0x007004/following{/other_user}","gists_url":"https://api.github.com/users/0x007004/gists{/gist_id}","starred_url":"https://api.github.com/users/0x007004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x007004/subscriptions","organizations_url":"https://api.github.com/users/0x007004/orgs","repos_url":"https://api.github.com/users/0x007004/repos","events_url":"https://api.github.com/users/0x007004/events{/privacy}","received_events_url":"https://api.github.com/users/0x007004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T02:14:44Z","updated_at":"2019-10-25T02:14:44Z","author_association":"NONE","body":"好的， 我去研究下..","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546171330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546775327","html_url":"https://github.com/apache/brpc/issues/948#issuecomment-546775327","issue_url":"https://api.github.com/repos/apache/brpc/issues/948","id":546775327,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njc3NTMyNw==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T03:15:47Z","updated_at":"2019-10-28T03:15:47Z","author_association":"CONTRIBUTOR","body":"bthread_worker_usage 多大？看起来是有锁阻塞。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546775327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546776478","html_url":"https://github.com/apache/brpc/issues/948#issuecomment-546776478","issue_url":"https://api.github.com/repos/apache/brpc/issues/948","id":546776478,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njc3NjQ3OA==","user":{"login":"wzw921026","id":15108642,"node_id":"MDQ6VXNlcjE1MTA4NjQy","avatar_url":"https://avatars.githubusercontent.com/u/15108642?v=4","gravatar_id":"","url":"https://api.github.com/users/wzw921026","html_url":"https://github.com/wzw921026","followers_url":"https://api.github.com/users/wzw921026/followers","following_url":"https://api.github.com/users/wzw921026/following{/other_user}","gists_url":"https://api.github.com/users/wzw921026/gists{/gist_id}","starred_url":"https://api.github.com/users/wzw921026/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzw921026/subscriptions","organizations_url":"https://api.github.com/users/wzw921026/orgs","repos_url":"https://api.github.com/users/wzw921026/repos","events_url":"https://api.github.com/users/wzw921026/events{/privacy}","received_events_url":"https://api.github.com/users/wzw921026/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T03:23:08Z","updated_at":"2019-10-28T03:24:32Z","author_association":"NONE","body":"bthread_worker_count : 49\r\nbthread_worker_usage : 33.0149\r\n\r\n是大量超时时候的数据\r\ncpu数据\r\n    3557  11.4%  11.4%    13886  44.5% snappy::SnappyDecompressor::DecompressAllTags\r\n    3310  10.6%  22.0%     5767  18.5% snappy::::IncrementalCopy\r\n    2453   7.9%  29.9%     2453   7.9% snappy::::UnalignedCopy64\r\n    1417   4.5%  34.4%     7895  25.3% snappy::SnappyArrayWriter::AppendFromSelf\r\n    1276   4.1%  38.5%     1276   4.1% memcpy","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/546776478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548209393","html_url":"https://github.com/apache/brpc/issues/949#issuecomment-548209393","issue_url":"https://api.github.com/repos/apache/brpc/issues/949","id":548209393,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIwOTM5Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T04:10:44Z","updated_at":"2019-10-31T04:11:03Z","author_association":"CONTRIBUTOR","body":"目前没有已知问题，包括wait处醒来立刻析构CV（在处理好和notify的竞争的前提下）应该也没有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548209393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548230987","html_url":"https://github.com/apache/brpc/issues/949#issuecomment-548230987","issue_url":"https://api.github.com/repos/apache/brpc/issues/949","id":548230987,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODIzMDk4Nw==","user":{"login":"lijianSE","id":7636904,"node_id":"MDQ6VXNlcjc2MzY5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7636904?v=4","gravatar_id":"","url":"https://api.github.com/users/lijianSE","html_url":"https://github.com/lijianSE","followers_url":"https://api.github.com/users/lijianSE/followers","following_url":"https://api.github.com/users/lijianSE/following{/other_user}","gists_url":"https://api.github.com/users/lijianSE/gists{/gist_id}","starred_url":"https://api.github.com/users/lijianSE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lijianSE/subscriptions","organizations_url":"https://api.github.com/users/lijianSE/orgs","repos_url":"https://api.github.com/users/lijianSE/repos","events_url":"https://api.github.com/users/lijianSE/events{/privacy}","received_events_url":"https://api.github.com/users/lijianSE/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T06:14:02Z","updated_at":"2019-10-31T06:14:02Z","author_association":"NONE","body":"好的，谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548230987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548653816","html_url":"https://github.com/apache/brpc/issues/951#issuecomment-548653816","issue_url":"https://api.github.com/repos/apache/brpc/issues/951","id":548653816,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODY1MzgxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T03:35:04Z","updated_at":"2019-11-01T03:35:04Z","author_association":"CONTRIBUTOR","body":"没有支持计划，在brpc中使用thrift协议不需要使用这个","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548653816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548679685","html_url":"https://github.com/apache/brpc/issues/951#issuecomment-548679685","issue_url":"https://api.github.com/repos/apache/brpc/issues/951","id":548679685,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODY3OTY4NQ==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T06:16:29Z","updated_at":"2019-11-01T06:16:29Z","author_association":"NONE","body":"对，这里是想要实现brpc-thrift和原生thrift-server的tbuffered方式通信","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548679685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548731679","html_url":"https://github.com/apache/brpc/issues/954#issuecomment-548731679","issue_url":"https://api.github.com/repos/apache/brpc/issues/954","id":548731679,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODczMTY3OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T09:57:30Z","updated_at":"2019-11-01T09:59:45Z","author_association":"CONTRIBUTOR","body":"如果只是简单二进制传输协议+protobuf序列化的payload，支持难度会很低。但看起来是自有idl的，会很麻烦。brpc的百度内部版是支持百度内部idl的(非pb)，但需要详细了解idl的二进制格式并写一个复杂的pb插件，并在proto文件定义一些解决差异化问题的options，整体非常繁琐，开源部分不会考虑做此种支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/548731679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549212599","html_url":"https://github.com/apache/brpc/issues/957#issuecomment-549212599","issue_url":"https://api.github.com/repos/apache/brpc/issues/957","id":549212599,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTIxMjU5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T03:06:51Z","updated_at":"2019-11-04T03:06:51Z","author_association":"CONTRIBUTOR","body":"如何复现？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549212599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549219289","html_url":"https://github.com/apache/brpc/issues/955#issuecomment-549219289","issue_url":"https://api.github.com/repos/apache/brpc/issues/955","id":549219289,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTIxOTI4OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T04:03:09Z","updated_at":"2019-11-04T04:03:09Z","author_association":"CONTRIBUTOR","body":"感谢报告问题，已修复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549219289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549220251","html_url":"https://github.com/apache/brpc/issues/956#issuecomment-549220251","issue_url":"https://api.github.com/repos/apache/brpc/issues/956","id":549220251,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTIyMDI1MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T04:12:06Z","updated_at":"2019-11-04T04:12:06Z","author_association":"CONTRIBUTOR","body":"确实是可以的，不过目前brpc的场景中几乎不会退出pthread（才会导致LocalPool析构），这个修改很难验证实际效果。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549220251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549790432","html_url":"https://github.com/apache/brpc/issues/956#issuecomment-549790432","issue_url":"https://api.github.com/repos/apache/brpc/issues/956","id":549790432,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTc5MDQzMg==","user":{"login":"tesla1995","id":11598872,"node_id":"MDQ6VXNlcjExNTk4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/11598872?v=4","gravatar_id":"","url":"https://api.github.com/users/tesla1995","html_url":"https://github.com/tesla1995","followers_url":"https://api.github.com/users/tesla1995/followers","following_url":"https://api.github.com/users/tesla1995/following{/other_user}","gists_url":"https://api.github.com/users/tesla1995/gists{/gist_id}","starred_url":"https://api.github.com/users/tesla1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesla1995/subscriptions","organizations_url":"https://api.github.com/users/tesla1995/orgs","repos_url":"https://api.github.com/users/tesla1995/repos","events_url":"https://api.github.com/users/tesla1995/events{/privacy}","received_events_url":"https://api.github.com/users/tesla1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T11:49:50Z","updated_at":"2019-11-05T11:52:55Z","author_association":"NONE","body":"> 确实是可以的，不过目前brpc的场景中几乎不会退出pthread（才会导致LocalPool析构），这个修改很难验证实际效果。\r\n\r\n如果不是pthread频繁创建、退出的场景，确实没修改的必要。另外，brpc中很多地方使用了原子指令编程技术，很难看懂。我想请教下原子指令编程的学习方法和怎么验证原子指令编程的正确性。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/549790432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550120879","html_url":"https://github.com/apache/brpc/issues/956#issuecomment-550120879","issue_url":"https://api.github.com/repos/apache/brpc/issues/956","id":550120879,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDEyMDg3OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T03:03:08Z","updated_at":"2019-11-06T03:03:08Z","author_association":"CONTRIBUTOR","body":"学习资料很多建议搜索，验证可以用Thread Sanitizer(tsan)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550120879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550206974","html_url":"https://github.com/apache/brpc/pull/960#issuecomment-550206974","issue_url":"https://api.github.com/repos/apache/brpc/issues/960","id":550206974,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDIwNjk3NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T08:45:42Z","updated_at":"2019-11-06T08:45:42Z","author_association":"CONTRIBUTOR","body":"感谢你的贡献，这个pr要先做如下的准备工作：\r\n* 删除所有和支持thrift compact无关的改动，包括对格式的调整。如果确实需要调整，可以另起pr\r\n* 在thrift 0.9.7-0.11.0上都能编译、运行相应的example/UT。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550206974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550255265","html_url":"https://github.com/apache/brpc/issues/744#issuecomment-550255265","issue_url":"https://api.github.com/repos/apache/brpc/issues/744","id":550255265,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDI1NTI2NQ==","user":{"login":"zgmsk","id":44423147,"node_id":"MDQ6VXNlcjQ0NDIzMTQ3","avatar_url":"https://avatars.githubusercontent.com/u/44423147?v=4","gravatar_id":"","url":"https://api.github.com/users/zgmsk","html_url":"https://github.com/zgmsk","followers_url":"https://api.github.com/users/zgmsk/followers","following_url":"https://api.github.com/users/zgmsk/following{/other_user}","gists_url":"https://api.github.com/users/zgmsk/gists{/gist_id}","starred_url":"https://api.github.com/users/zgmsk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zgmsk/subscriptions","organizations_url":"https://api.github.com/users/zgmsk/orgs","repos_url":"https://api.github.com/users/zgmsk/repos","events_url":"https://api.github.com/users/zgmsk/events{/privacy}","received_events_url":"https://api.github.com/users/zgmsk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T10:48:22Z","updated_at":"2019-11-06T10:48:22Z","author_association":"NONE","body":"这个问题怎么解决的呢@haolujun\r\n\r\n我这边也遇到这个问题，不过是偶发，并能自己恢复，我的并发比较高，QPS  15W 左右","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550255265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550255667","html_url":"https://github.com/apache/brpc/issues/744#issuecomment-550255667","issue_url":"https://api.github.com/repos/apache/brpc/issues/744","id":550255667,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDI1NTY2Nw==","user":{"login":"zgmsk","id":44423147,"node_id":"MDQ6VXNlcjQ0NDIzMTQ3","avatar_url":"https://avatars.githubusercontent.com/u/44423147?v=4","gravatar_id":"","url":"https://api.github.com/users/zgmsk","html_url":"https://github.com/zgmsk","followers_url":"https://api.github.com/users/zgmsk/followers","following_url":"https://api.github.com/users/zgmsk/following{/other_user}","gists_url":"https://api.github.com/users/zgmsk/gists{/gist_id}","starred_url":"https://api.github.com/users/zgmsk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zgmsk/subscriptions","organizations_url":"https://api.github.com/users/zgmsk/orgs","repos_url":"https://api.github.com/users/zgmsk/repos","events_url":"https://api.github.com/users/zgmsk/events{/privacy}","received_events_url":"https://api.github.com/users/zgmsk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T10:49:27Z","updated_at":"2019-11-06T10:49:27Z","author_association":"NONE","body":"百度的大神们帮忙解答一下吧。。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550255667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550292689","html_url":"https://github.com/apache/brpc/issues/956#issuecomment-550292689","issue_url":"https://api.github.com/repos/apache/brpc/issues/956","id":550292689,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDI5MjY4OQ==","user":{"login":"tesla1995","id":11598872,"node_id":"MDQ6VXNlcjExNTk4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/11598872?v=4","gravatar_id":"","url":"https://api.github.com/users/tesla1995","html_url":"https://github.com/tesla1995","followers_url":"https://api.github.com/users/tesla1995/followers","following_url":"https://api.github.com/users/tesla1995/following{/other_user}","gists_url":"https://api.github.com/users/tesla1995/gists{/gist_id}","starred_url":"https://api.github.com/users/tesla1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesla1995/subscriptions","organizations_url":"https://api.github.com/users/tesla1995/orgs","repos_url":"https://api.github.com/users/tesla1995/repos","events_url":"https://api.github.com/users/tesla1995/events{/privacy}","received_events_url":"https://api.github.com/users/tesla1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T12:42:39Z","updated_at":"2019-11-06T12:42:39Z","author_association":"NONE","body":"> 学习资料很多建议搜索，验证可以用Thread Sanitizer(tsan)\r\n\r\n多谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550292689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550594678","html_url":"https://github.com/apache/brpc/issues/961#issuecomment-550594678","issue_url":"https://api.github.com/repos/apache/brpc/issues/961","id":550594678,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU5NDY3OA==","user":{"login":"fixee","id":3875826,"node_id":"MDQ6VXNlcjM4NzU4MjY=","avatar_url":"https://avatars.githubusercontent.com/u/3875826?v=4","gravatar_id":"","url":"https://api.github.com/users/fixee","html_url":"https://github.com/fixee","followers_url":"https://api.github.com/users/fixee/followers","following_url":"https://api.github.com/users/fixee/following{/other_user}","gists_url":"https://api.github.com/users/fixee/gists{/gist_id}","starred_url":"https://api.github.com/users/fixee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fixee/subscriptions","organizations_url":"https://api.github.com/users/fixee/orgs","repos_url":"https://api.github.com/users/fixee/repos","events_url":"https://api.github.com/users/fixee/events{/privacy}","received_events_url":"https://api.github.com/users/fixee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T02:41:14Z","updated_at":"2019-11-07T02:41:14Z","author_association":"NONE","body":"检查了一下， 各个分支都调用了done->Run() 所以应该排除 未调用done->Run() 这一条原因","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550594678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550598763","html_url":"https://github.com/apache/brpc/issues/961#issuecomment-550598763","issue_url":"https://api.github.com/repos/apache/brpc/issues/961","id":550598763,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU5ODc2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T02:59:17Z","updated_at":"2019-11-07T02:59:17Z","author_association":"CONTRIBUTOR","body":"这些现象说明大概率还是done->Run()漏了，建议再检查一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/550598763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551058254","html_url":"https://github.com/apache/brpc/issues/961#issuecomment-551058254","issue_url":"https://api.github.com/repos/apache/brpc/issues/961","id":551058254,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTA1ODI1NA==","user":{"login":"fixee","id":3875826,"node_id":"MDQ6VXNlcjM4NzU4MjY=","avatar_url":"https://avatars.githubusercontent.com/u/3875826?v=4","gravatar_id":"","url":"https://api.github.com/users/fixee","html_url":"https://github.com/fixee","followers_url":"https://api.github.com/users/fixee/followers","following_url":"https://api.github.com/users/fixee/following{/other_user}","gists_url":"https://api.github.com/users/fixee/gists{/gist_id}","starred_url":"https://api.github.com/users/fixee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fixee/subscriptions","organizations_url":"https://api.github.com/users/fixee/orgs","repos_url":"https://api.github.com/users/fixee/repos","events_url":"https://api.github.com/users/fixee/events{/privacy}","received_events_url":"https://api.github.com/users/fixee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T12:25:00Z","updated_at":"2019-11-07T12:25:00Z","author_association":"NONE","body":"worker线程：\r\n#0  0x00007f60a1032bf9 in syscall () from /lib64/libc.so.6\r\n#1  0x00007f60a3d1c382 in construct<butil::ResourcePoolFreeChunk<bthread::Id, 0ul>*, butil::ResourcePoolFreeChunk<bthread::Id, 0ul>* const&> (__p=0xfffffffffffffe00, this=0x7f5747a0d050) at /usr/include/c++/4.8.2/ext/new_allocator.h:120\r\n#2  _S_construct<butil::ResourcePoolFreeChunk<bthread::Id, 0ul>*, butil::ResourcePoolFreeChunk<bthread::Id, 0ul>* const&> (__p=0xfffffffffffffe00, __a=...) at /usr/include/c++/4.8.2/bits/alloc_traits.h:254\r\n#3  construct<butil::ResourcePoolFreeChunk<bthread::Id, 0ul>*, butil::ResourcePoolFreeChunk<bthread::Id, 0ul>* const&> (__p=0xfffffffffffffe00, __a=...) at /usr/include/c++/4.8.2/bits/alloc_traits.h:393\r\n#4  push_back (__x=@0x7f57491fe6a0: 0x0, this=0x7f5747a0d050) at /usr/include/c++/4.8.2/bits/stl_vector.h:905\r\n#5  push_free_chunk (c=..., this=0x7f5747a0d050) at /home/jenkins/workspace/brpc/src/butil/resource_pool_inl.h:534\r\n#6  return_resource (id=..., this=0x7f5747a0d000) at /home/jenkins/workspace/brpc/src/butil/resource_pool_inl.h:231\r\n#7  return_resource (id=..., this=<optimized out>) at /home/jenkins/workspace/brpc/src/butil/resource_pool_inl.h:306\r\n#8  return_resource<bthread::Id> (id=...) at /home/jenkins/workspace/brpc/src/butil/resource_pool.h:115\r\n#9  bthread_id_unlock_and_destroy (id=...) at /home/jenkins/workspace/brpc/src/bthread/id.cpp:634\r\n#10 0x00007f60a3d1e9bb in set_data (data=<optimized out>, key=..., this=<optimized out>) at /home/jenkins/workspace/brpc/src/bthread/key.cpp:194\r\n#11 bthread_keytable_pool_reserve (pool=0x7f5fb5777580, nfree=<optimized out>, key=..., ctor=<optimized out>, ctor_args=<optimized out>) at /home/jenkins/workspace/brpc/src/bthread/key.cpp:362\r\n#12 0x00007f60a3d0a2e6 in ~lock_guard (this=<synthetic pointer>, __in_chrg=<optimized out>) at /home/jenkins/workspace/brpc/src/butil/scoped_lock.h:172\r\n#13 get_or_new_local_pool (this=<optimized out>) at /home/jenkins/workspace/brpc/src/butil/object_pool_inl.h:392\r\n#14 return_object (ptr=<optimized out>, this=<optimized out>) at /home/jenkins/workspace/brpc/src/butil/object_pool_inl.h:250\r\n#15 return_object<bthread::StackFactory<bthread::LargeStackClass>::Wrapper> (ptr=<optimized out>) at /home/jenkins/workspace/brpc/src/butil/object_pool.h:93\r\n#16 return_stack (sc=<optimized out>) at /home/jenkins/workspace/brpc/src/bthread/stack_inl.h:72\r\n#17 bthread::return_stack (s=<optimized out>) at /home/jenkins/workspace/brpc/src/bthread/stack_inl.h:122\r\n#18 0x00007f60a1309dc5 in start_thread () from /lib64/libpthread.so.0\r\n#19 0x00007f60a103873d in clone () from /lib64/libc.so.6\r\n\r\n\r\n\r\nmain  线程：\r\n#0  0x00007f60a130d6d5 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\r\n#1  0x00007f60a3db31f8 in brpc::Socket::Write (this=<optimized out>, msg=..., options_in=<optimized out>) at /home/jenkins/workspace/brpc/src/brpc/socket.cpp:1535\r\n#2  0x00007f60a3dc9121 in http_request (this=0x7ffdd9d26f40) at /home/jenkins/workspace/brpc/src/brpc/controller.h:211\r\n#3  brpc::VarsService::default_method (this=<optimized out>, cntl_base=0x7ffdd9d26f40, done=0x1) at /home/jenkins/workspace/brpc/src/brpc/builtin/vars_service.cpp:341\r\n#4  0x0000000000437434 in util::Util::RunUntilSendQuit(brpc::Server&, std::function<void ()>, std::function<void ()>) (server=..., before=..., after=...) at /home/work/buildspace/aa2f735022/src/util.cpp:64\r\n#5  0x000000000042ed66 in main (argc=1, argv=0x7ffdd9d27690) at /home/work/buildspace/aa2f735022/src/server.cpp:191\r\n\r\n上面贴了pstack产出的两个线程的调用栈， @jamesge 大神能帮忙看看吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551058254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551363155","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551363155","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551363155,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM2MzE1NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T02:58:19Z","updated_at":"2019-11-08T02:58:19Z","author_association":"CONTRIBUTOR","body":"有具体的错误日志么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551363155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551366875","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551366875","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551366875,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM2Njg3NQ==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T03:17:33Z","updated_at":"2019-11-08T03:17:33Z","author_association":"NONE","body":"谢谢回复，具体的一些情况如下：\r\n\r\n\r\n具体的操作是：\r\n2019-11-07 20:17:56&nbsp; &nbsp; &nbsp;远端服务10.12.145.207:12306 core掉（grpc server）\r\n开始出现大量的超时\r\n2019-11-07 20:18:05&nbsp; &nbsp; &nbsp;名字服务（自己实现的）发现10.12.145.207:12306心跳超时，本地关掉连接（代码实现的时候，stub和channel 都是调用析构函数进行对象回收，没有close之类的接口）。\r\n错误一直持续\r\n\r\n\r\n在server端，请求是正常的（server端有其他服务也在使用），而且出问题的机器也不是全部失败，就是失败率很高，20%左右\r\n\r\n\r\n其中一台机器（一半的机器有问题）出问题时的日志：\r\n\r\n\r\n[2019-11-07 20:17:00.865998][17804][connection_pool.cc:54] Sync connection pool size: 1\r\n[2019-11-07 20:17:01.633376][ 1152][forward_table_data_manager.h:389] Current consume msg_count=5250000\r\n[2019-11-07 20:17:14.881232][20310][connection_pool.cc:54] Sync connection pool size: 1\r\n[2019-11-07 20:17:19.816668][ 1234][forward_table_data_manager.h:229] Message is HEART_BEAT, timestamp=1573129039\r\n[2019-11-07 20:17:24.024580][ 1260][http2_rpc_protocol.cpp:206] Unknown setting, id=65027 value=1\r\n[2019-11-07 20:17:25.304358][ 1152][forward_table_data_manager.h:389] Current consume msg_count=5260000\r\n[2019-11-07 20:17:26.629755][ 1288][http2_rpc_protocol.cpp:206] Unknown setting, id=65027 value=1\r\n[2019-11-07 20:17:28.404240][22809][connection_pool.cc:54] Sync connection pool size: 1\r\n[2019-11-07 20:17:41.649389][25284][connection_pool.cc:54] Sync connection pool size: 1\r\n[2019-11-07 20:17:49.494298][ 1152][forward_table_data_manager.h:389] Current consume msg_count=5270000\r\n[2019-11-07 20:17:55.607590][27801][connection_pool.cc:54] Sync connection pool size: 1\r\n[2019-11-07 20:17:57.247980][&nbsp; 876][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.207:12306\r\n[2019-11-07 20:17:57.468590][&nbsp; 401][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.207:12306\r\n[2019-11-07 20:17:58.866565][ 1273][creative_service.cc:190] wait future in FetchCreative timeout\r\n[2019-11-07 20:17:58.851737][&nbsp; 957][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.229:12306\r\n[2019-11-07 20:17:58.851717][&nbsp; 524][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.29:12306\r\n[2019-11-07 20:17:58.618955][&nbsp; 458][remote_call.cc:107] Call failed. error code=[E111]Fail to connect Socket{id=8590041217 addr=10.12.145.207:12306} (0x0x7fabd6180840): Connection refused [R1][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R2][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R3][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890\r\n[2019-11-07 20:17:58.851699][&nbsp; 453][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.183:12306\r\n[2019-11-07 20:17:58.719017][ 1260][socket.cpp:2260] Checking Socket{id=8589934890 addr=10.12.145.207:12306} (0x7fb17e6f5fc0)\r\n[2019-11-07 20:17:58.501103][ 1277][input_messenger.cpp:212] Fail to read from Socket{id=8589934884 fd=351 addr=10.12.145.207:12306:42632} (0x7fb17e6f53c0): Connection reset by peer [104]\r\n[2019-11-07 20:17:58.982826][&nbsp; 878][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.113:12306\r\n[2019-11-07 20:17:58.851709][&nbsp; 914][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.13:12306\r\n[2019-11-07 20:17:58.984495][&nbsp; 953][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.203.127:12306\r\n[2019-11-07 20:17:58.859853][&nbsp; 710][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.219:12306\r\n[2019-11-07 20:17:58.984462][ 1110][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.247.59:12306\r\n[2019-11-07 20:17:58.982813][&nbsp; 623][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.97:12306\r\n[2019-11-07 20:17:58.325278][ 1023][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.207:12306\r\n[2019-11-07 20:17:58.993119][&nbsp; 534][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.220.121:12306\r\n[2019-11-07 20:17:58.853020][&nbsp; 647][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.1:12306\r\n[2019-11-07 20:17:58.860050][&nbsp; 715][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.105:12306\r\n[2019-11-07 20:17:58.011910][&nbsp; 330][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.207:12306\r\n[2019-11-07 20:17:58.851717][&nbsp; 723][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.247.49:12306\r\n[2019-11-07 20:17:58.984458][ 1024][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.224.99:12306\r\n[2019-11-07 20:17:59.258399][ 1025][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.29:12306\r\n[2019-11-07 20:17:59.889668][ 1039][remote_call.cc:107] Call failed. error code=[E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R1][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R2][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R3][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890\r\n[2019-11-07 20:17:59.632350][&nbsp; 978][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.234.55:12306\r\n[2019-11-07 20:17:59.632324][&nbsp; 849][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.145:12306\r\n[2019-11-07 20:17:59.254508][&nbsp; 328][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.227.123:12306\r\n[2019-11-07 20:17:59.258391][&nbsp; 382][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.105:12306\r\n[2019-11-07 20:17:59.258401][&nbsp; 928][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.229:12306\r\n[2019-11-07 20:17:59.885679][&nbsp; 658][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.103:12306\r\n[2019-11-07 20:17:59.885681][ 1031][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.246.125:12306\r\n[2019-11-07 20:17:59.632336][&nbsp; 959][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.247.131:12306\r\n[2019-11-07 20:17:59.254518][&nbsp; 569][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.168.119:12306\r\n[2019-11-07 20:17:59.258436][&nbsp; 868][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.13:12306\r\n[2019-11-07 20:17:59.259838][ 1047][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.219:12306\r\n[2019-11-07 20:17:59.258409][&nbsp; 753][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.247.49:12306\r\n[2019-11-07 20:17:59.632362][&nbsp; 654][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.199.108:12306\r\n[2019-11-07 20:17:59.258385][ 1018][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.183:12306\r\n[2019-11-07 20:17:59.635424][ 1088][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.225.185:12306\r\n[2019-11-07 20:17:59.933835][&nbsp; 994][remote_call.cc:107] Call failed. error code=[E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R1][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R2][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R3][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890\r\n[2019-11-07 20:17:59.632350][&nbsp; 571][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.233.3:12306\r\n[2019-11-07 20:17:59.885679][&nbsp; 973][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.177:12306\r\n[2019-11-07 20:17:59.885661][&nbsp; 549][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.233.165:12306\r\n[2019-11-07 20:17:59.632359][&nbsp; 611][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.189:12306\r\n[2019-11-07 20:17:59.012722][&nbsp; 738][remote_call.cc:107] Call failed. error code=[E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R1][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R2][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890 [R3][E112]Not connected to 10.12.145.207:12306 yet, server_id=8589934890\r\n[2019-11-07 20:17:59.258451][ 1114][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.1:12306\r\n[2019-11-07 20:17:59.254487][&nbsp; 843][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.147.131:12306\r\n[2019-11-07 20:17:59.254508][&nbsp; 701][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.168.85:12306\r\n\r\n...\r\n[2019-11-07 20:26:36.016777][&nbsp; 659][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.160.237:12306\r\n[2019-11-07 20:26:36.016753][ 1057][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.217:12306\r\n[2019-11-07 20:26:36.002652][&nbsp; 761][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.161.223:12306\r\n[2019-11-07 20:26:36.284142][&nbsp; 949][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.224.96:12306\r\n[2019-11-07 20:26:36.002652][&nbsp; 824][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.161.235:12306\r\n[2019-11-07 20:26:36.284214][&nbsp; 984][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.169.173:12306\r\n[2019-11-07 20:26:36.019434][&nbsp; 668][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.180.37:12306\r\n[2019-11-07 20:26:36.005793][&nbsp; 605][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.21:12306\r\n[2019-11-07 20:26:36.284135][&nbsp; 733][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.199.73:12306\r\n[2019-11-07 20:26:36.016758][&nbsp; 578][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.199.34:12306\r\n[2019-11-07 20:26:35.855804][&nbsp; 908][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.131:12306\r\n[2019-11-07 20:26:36.285341][&nbsp; 988][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.144.95:12306\r\n[2019-11-07 20:26:36.024909][&nbsp; 580][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.246.147:12306\r\n[2019-11-07 20:26:36.016813][&nbsp; 461][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.160.89:12306\r\n[2019-11-07 20:26:36.285405][&nbsp; 690][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.246.195:12306\r\n[2019-11-07 20:26:36.284118][&nbsp; 757][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.243:12306\r\n[2019-11-07 20:26:36.549294][ 1015][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.170.103:12306\r\n[2019-11-07 20:26:36.549294][&nbsp; 870][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.171.13:12306\r\n[2019-11-07 20:26:36.549311][&nbsp; 398][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.247.49:12306\r\n[2019-11-07 20:26:36.858644][ 1042][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.145.205:12306\r\n[2019-11-07 20:26:37.267210][&nbsp; 322][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.226.47:12306\r\n[2019-11-07 20:26:36.861842][&nbsp; 758][remote_call.cc:107] Call failed. error code=[E1008]Reached timeout=120ms @10.12.169.91:12306\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:&nbsp;\"Ge Jun\"<notifications@github.com&gt;;\r\n发送时间:&nbsp;2019年11月8日(星期五) 上午10:59\r\n收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;;\r\n抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;;\r\n主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962)\r\n\r\n\r\n\r\n\r\n有具体的错误日志么？\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551366875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551367616","html_url":"https://github.com/apache/brpc/pull/960#issuecomment-551367616","issue_url":"https://api.github.com/repos/apache/brpc/issues/960","id":551367616,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM2NzYxNg==","user":{"login":"ZhangYaoFu","id":10679482,"node_id":"MDQ6VXNlcjEwNjc5NDgy","avatar_url":"https://avatars.githubusercontent.com/u/10679482?v=4","gravatar_id":"","url":"https://api.github.com/users/ZhangYaoFu","html_url":"https://github.com/ZhangYaoFu","followers_url":"https://api.github.com/users/ZhangYaoFu/followers","following_url":"https://api.github.com/users/ZhangYaoFu/following{/other_user}","gists_url":"https://api.github.com/users/ZhangYaoFu/gists{/gist_id}","starred_url":"https://api.github.com/users/ZhangYaoFu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZhangYaoFu/subscriptions","organizations_url":"https://api.github.com/users/ZhangYaoFu/orgs","repos_url":"https://api.github.com/users/ZhangYaoFu/repos","events_url":"https://api.github.com/users/ZhangYaoFu/events{/privacy}","received_events_url":"https://api.github.com/users/ZhangYaoFu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T03:21:08Z","updated_at":"2019-11-08T03:21:08Z","author_association":"NONE","body":"> 感谢你的贡献，这个pr要先做如下的准备工作：\r\n> \r\n> * 删除所有和支持thrift compact无关的改动，包括对格式的调整。如果确实需要调整，可以另起pr\r\n> * 在thrift 0.9.7-0.11.0上都能编译、运行相应的example/UT。\r\n\r\n*已删除无关的格式调整。\r\n*在thrift 0.9.3 0.10.0 0.11.0 这三个版本上已验证可编译并运行相应的example/UT。\r\n辛苦大佬有空帮忙review下~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551367616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551369166","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551369166","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551369166,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM2OTE2Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T03:28:56Z","updated_at":"2019-11-08T03:28:56Z","author_association":"CONTRIBUTOR","body":"“10.12.145.207:12306”在日志中基本是正常的，可以理解为开始coredump时仍没有进行到关闭连接这步，所以会触发一些超时，关闭连接后client探测到后转为\"Not connected to\"，应该是在做健康检查了，周围应该Checking开头的日志（除非把健康检查关了）\r\n\r\n下面其他节点的超时看上去似乎和上面这个core关系不大，那些日志的间隔频率也不是很密集，看上去更像是网络、机器、服务etc出现了抖动","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551369166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551369956","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551369956","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551369956,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM2OTk1Ng==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T03:32:59Z","updated_at":"2019-11-08T03:32:59Z","author_association":"NONE","body":"是的，现在不清楚为什么一个server节点出问题，会影响访问其他server节点，这个比较费解。另外，这个服务还会访问其他类型的服务，有些也使用brpc接口，那些服务也超时了，而且只能通过重启恢复\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:&nbsp;\"Ge Jun\"<notifications@github.com&gt;;\r\n发送时间:&nbsp;2019年11月8日(星期五) 中午11:29\r\n收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;;\r\n抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;;\r\n主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962)\r\n\r\n\r\n\r\n\r\n“10.12.145.207:12306”在日志中基本是正常的，可以理解为开始coredump时仍没有进行到关闭连接这步，所以会触发一些超时，关闭连接后client探测到后转为\"Not connected to\"，应该是在做健康检查了，周围应该Checking开头的日志（除非把健康检查关了）\r\n \r\n下面其他节点的超时看上去似乎和上面这个core关系不大，那些日志的间隔频率也不是很密集，看上去更像是网络、机器、服务etc出现了抖动\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551369956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551377542","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551377542","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551377542,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM3NzU0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T04:16:50Z","updated_at":"2019-11-08T04:16:50Z","author_association":"CONTRIBUTOR","body":"client所在的这个服务A在各种指标上有异常么？是否监控了出问题时段的bvar","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551377542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551381616","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-551381616","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":551381616,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTM4MTYxNg==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T04:39:10Z","updated_at":"2019-11-08T04:39:10Z","author_association":"NONE","body":"bvar没有开，监控是只有超时率。我们先线下做个测试，不断模拟服务节点异常，看看能不能复现，看看能不能采集下现场。谢谢了\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:&nbsp;\"Ge Jun\"<notifications@github.com&gt;;\r\n发送时间:&nbsp;2019年11月8日(星期五) 中午12:17\r\n收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;;\r\n抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;;\r\n主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962)\r\n\r\n\r\n\r\n\r\nclient所在的这个服务A在各种指标上有异常么？是否监控了出问题时段的bvar\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551381616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551615622","html_url":"https://github.com/apache/brpc/pull/960#issuecomment-551615622","issue_url":"https://api.github.com/repos/apache/brpc/issues/960","id":551615622,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTYxNTYyMg==","user":{"login":"ZhangYaoFu","id":10679482,"node_id":"MDQ6VXNlcjEwNjc5NDgy","avatar_url":"https://avatars.githubusercontent.com/u/10679482?v=4","gravatar_id":"","url":"https://api.github.com/users/ZhangYaoFu","html_url":"https://github.com/ZhangYaoFu","followers_url":"https://api.github.com/users/ZhangYaoFu/followers","following_url":"https://api.github.com/users/ZhangYaoFu/following{/other_user}","gists_url":"https://api.github.com/users/ZhangYaoFu/gists{/gist_id}","starred_url":"https://api.github.com/users/ZhangYaoFu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZhangYaoFu/subscriptions","organizations_url":"https://api.github.com/users/ZhangYaoFu/orgs","repos_url":"https://api.github.com/users/ZhangYaoFu/repos","events_url":"https://api.github.com/users/ZhangYaoFu/events{/privacy}","received_events_url":"https://api.github.com/users/ZhangYaoFu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-08T11:22:42Z","updated_at":"2019-11-08T11:22:42Z","author_association":"NONE","body":"  @jamesge 戈神，CI单测失败的现象我在本地无法复现，而且本次修改也没有改过bvar相关的代码，请教下有可能是环境或者哪里有问题么？\r\n![image](https://user-images.githubusercontent.com/10679482/68473031-de6aa800-025c-11ea-8366-9d8fe5ed3aa9.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/551615622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552081747","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-552081747","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":552081747,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjA4MTc0Nw==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T09:17:24Z","updated_at":"2019-11-09T09:17:24Z","author_association":"NONE","body":"线下复现，应该是死锁了。 测试的时候，进程X是个brpc server（其他服务会调用它），收到请求之后，会调用brpc client访问一些依赖服务。\r\n\r\n\r\n多次捕捉现场的时候，确认 发送给进程X的所有请求都被refuse了，X调用远端服务也没有收到任何请求了，但是从堆栈上看，这些请求并没有返回。\r\n\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:&nbsp;\"Ge Jun\"<notifications@github.com&gt;;\r\n发送时间:&nbsp;2019年11月8日(星期五) 中午12:17\r\n收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;;\r\n抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;;\r\n主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962)\r\n\r\n\r\n\r\n\r\nclient所在的这个服务A在各种指标上有异常么？是否监控了出问题时段的bvar\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552081747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552082459","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-552082459","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":552082459,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjA4MjQ1OQ==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T09:28:22Z","updated_at":"2019-11-09T09:28:22Z","author_association":"NONE","body":"应该是超时没生效，死锁了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552082459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552372924","html_url":"https://github.com/apache/brpc/issues/550#issuecomment-552372924","issue_url":"https://api.github.com/repos/apache/brpc/issues/550","id":552372924,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjM3MjkyNA==","user":{"login":"hexiecs","id":12725406,"node_id":"MDQ6VXNlcjEyNzI1NDA2","avatar_url":"https://avatars.githubusercontent.com/u/12725406?v=4","gravatar_id":"","url":"https://api.github.com/users/hexiecs","html_url":"https://github.com/hexiecs","followers_url":"https://api.github.com/users/hexiecs/followers","following_url":"https://api.github.com/users/hexiecs/following{/other_user}","gists_url":"https://api.github.com/users/hexiecs/gists{/gist_id}","starred_url":"https://api.github.com/users/hexiecs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexiecs/subscriptions","organizations_url":"https://api.github.com/users/hexiecs/orgs","repos_url":"https://api.github.com/users/hexiecs/repos","events_url":"https://api.github.com/users/hexiecs/events{/privacy}","received_events_url":"https://api.github.com/users/hexiecs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T09:56:16Z","updated_at":"2019-11-11T09:56:16Z","author_association":"NONE","body":"> **执行make时，报如下错误。**\r\n> <命令行>:0:11: 错误：‘gflags’未声明\r\n> src/butil/logging.cc:1387:50: 附注：in expansion of macro ‘GFLAGS_NS’\r\n> const bool ALLOW_UNUSED validate_vmodule_dummy = GFLAGS_NS::RegisterFlagValidator(\r\n> ^\r\n> <命令行>:0:11: 错误：‘gflags’未声明\r\n> src/butil/logging.cc:1417:44: 附注：in expansion of macro ‘GFLAGS_NS’\r\n> const bool ALLOW_UNUSED validate_v_dummy = GFLAGS_NS::RegisterFlagValidator(\r\n> ^\r\n> <命令行>:0:11: 错误：‘gflags’未声明\r\n> src/butil/logging.cc:1425:5: 附注：in expansion of macro ‘GFLAGS_NS’\r\n> GFLAGS_NS::RegisterFlagValidator(&FLAGS_crash_on_fatal_log, PassValidate);\r\n> ^\r\n> <命令行>:0:11: 错误：‘gflags’未声明\r\n> src/butil/logging.cc:1428:5: 附注：in expansion of macro ‘GFLAGS_NS’\r\n> GFLAGS_NS::RegisterFlagValidator(&FLAGS_print_stack_on_check, PassValidate);\r\n> ^\r\n> <命令行>:0:11: 错误：‘gflags’未声明\r\n> src/butil/logging.cc:1434:50: 附注：in expansion of macro ‘GFLAGS_NS’\r\n> const bool ALLOW_UNUSED validate_min_log_level = GFLAGS_NS::RegisterFlagValidator(\r\n> ^\r\n> make: *** [src/butil/logging.o] 错误 1\r\n\r\n请问这个问题有解决吗? 我使用config_brpc.sh编译也遇到了同样的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552372924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552373904","html_url":"https://github.com/apache/brpc/issues/550#issuecomment-552373904","issue_url":"https://api.github.com/repos/apache/brpc/issues/550","id":552373904,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjM3MzkwNA==","user":{"login":"jiapengwen","id":20416066,"node_id":"MDQ6VXNlcjIwNDE2MDY2","avatar_url":"https://avatars.githubusercontent.com/u/20416066?v=4","gravatar_id":"","url":"https://api.github.com/users/jiapengwen","html_url":"https://github.com/jiapengwen","followers_url":"https://api.github.com/users/jiapengwen/followers","following_url":"https://api.github.com/users/jiapengwen/following{/other_user}","gists_url":"https://api.github.com/users/jiapengwen/gists{/gist_id}","starred_url":"https://api.github.com/users/jiapengwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiapengwen/subscriptions","organizations_url":"https://api.github.com/users/jiapengwen/orgs","repos_url":"https://api.github.com/users/jiapengwen/repos","events_url":"https://api.github.com/users/jiapengwen/events{/privacy}","received_events_url":"https://api.github.com/users/jiapengwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T09:58:54Z","updated_at":"2019-11-11T09:58:54Z","author_association":"NONE","body":"建议你看下 gflag 怎么使用的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552373904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552375287","html_url":"https://github.com/apache/brpc/issues/550#issuecomment-552375287","issue_url":"https://api.github.com/repos/apache/brpc/issues/550","id":552375287,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjM3NTI4Nw==","user":{"login":"hexiecs","id":12725406,"node_id":"MDQ6VXNlcjEyNzI1NDA2","avatar_url":"https://avatars.githubusercontent.com/u/12725406?v=4","gravatar_id":"","url":"https://api.github.com/users/hexiecs","html_url":"https://github.com/hexiecs","followers_url":"https://api.github.com/users/hexiecs/followers","following_url":"https://api.github.com/users/hexiecs/following{/other_user}","gists_url":"https://api.github.com/users/hexiecs/gists{/gist_id}","starred_url":"https://api.github.com/users/hexiecs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hexiecs/subscriptions","organizations_url":"https://api.github.com/users/hexiecs/orgs","repos_url":"https://api.github.com/users/hexiecs/repos","events_url":"https://api.github.com/users/hexiecs/events{/privacy}","received_events_url":"https://api.github.com/users/hexiecs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T10:02:43Z","updated_at":"2019-11-11T10:02:43Z","author_association":"NONE","body":"> 建议你看下 gflag 怎么使用的\r\n\r\n这是个编译问题，跟使用有关吗?你最后是怎么解决的?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552375287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552377082","html_url":"https://github.com/apache/brpc/issues/550#issuecomment-552377082","issue_url":"https://api.github.com/repos/apache/brpc/issues/550","id":552377082,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjM3NzA4Mg==","user":{"login":"jiapengwen","id":20416066,"node_id":"MDQ6VXNlcjIwNDE2MDY2","avatar_url":"https://avatars.githubusercontent.com/u/20416066?v=4","gravatar_id":"","url":"https://api.github.com/users/jiapengwen","html_url":"https://github.com/jiapengwen","followers_url":"https://api.github.com/users/jiapengwen/followers","following_url":"https://api.github.com/users/jiapengwen/following{/other_user}","gists_url":"https://api.github.com/users/jiapengwen/gists{/gist_id}","starred_url":"https://api.github.com/users/jiapengwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiapengwen/subscriptions","organizations_url":"https://api.github.com/users/jiapengwen/orgs","repos_url":"https://api.github.com/users/jiapengwen/repos","events_url":"https://api.github.com/users/jiapengwen/events{/privacy}","received_events_url":"https://api.github.com/users/jiapengwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T10:07:29Z","updated_at":"2019-11-11T10:07:29Z","author_association":"NONE","body":"我后来是安装新版本的依赖解决的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/552377082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553272854","html_url":"https://github.com/apache/brpc/issues/208#issuecomment-553272854","issue_url":"https://api.github.com/repos/apache/brpc/issues/208","id":553272854,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzI3Mjg1NA==","user":{"login":"xmm1989218","id":983106,"node_id":"MDQ6VXNlcjk4MzEwNg==","avatar_url":"https://avatars.githubusercontent.com/u/983106?v=4","gravatar_id":"","url":"https://api.github.com/users/xmm1989218","html_url":"https://github.com/xmm1989218","followers_url":"https://api.github.com/users/xmm1989218/followers","following_url":"https://api.github.com/users/xmm1989218/following{/other_user}","gists_url":"https://api.github.com/users/xmm1989218/gists{/gist_id}","starred_url":"https://api.github.com/users/xmm1989218/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xmm1989218/subscriptions","organizations_url":"https://api.github.com/users/xmm1989218/orgs","repos_url":"https://api.github.com/users/xmm1989218/repos","events_url":"https://api.github.com/users/xmm1989218/events{/privacy}","received_events_url":"https://api.github.com/users/xmm1989218/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T07:19:38Z","updated_at":"2019-11-13T07:19:38Z","author_association":"NONE","body":"这个啥时候会解决么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553272854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553353696","html_url":"https://github.com/apache/brpc/issues/208#issuecomment-553353696","issue_url":"https://api.github.com/repos/apache/brpc/issues/208","id":553353696,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzM1MzY5Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T11:03:08Z","updated_at":"2019-11-13T11:03:08Z","author_association":"CONTRIBUTOR","body":"你在什么场景中会依赖这点？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553353696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553742982","html_url":"https://github.com/apache/brpc/pull/966#issuecomment-553742982","issue_url":"https://api.github.com/repos/apache/brpc/issues/966","id":553742982,"node_id":"MDEyOklzc3VlQ29tbWVudDU1Mzc0Mjk4Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-14T06:19:04Z","updated_at":"2019-11-14T06:19:04Z","author_association":"CONTRIBUTOR","body":"what's the version of your clang?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/553742982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]