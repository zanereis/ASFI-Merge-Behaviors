[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712377184","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-712377184","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":712377184,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjM3NzE4NA==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T18:58:08Z","updated_at":"2020-10-19T18:58:08Z","author_association":"NONE","body":"@bvaradar  I can provide all the SQL's in Postgres which I'm using to reproduce this though : \r\n\r\n```\r\nDROP TABLE public.motor_crash_violation_incidents;\r\n\r\nCREATE TABLE public.motor_crash_violation_incidents (\r\n\tinc_id serial ,\r\n\t\"year\" int4 NULL,\r\n\tviolation_desc varchar(100) NULL,\r\n\tviolation_code varchar(20) NULL,\r\n\tcase_individual_id int4 NULL,\r\n\tflag varchar(1) NULL,\r\n\tlast_modified_ts timestamp not NULL,\r\n\tCONSTRAINT motor_crash_violation_incidents_pkey PRIMARY KEY (inc_id)\r\n);\r\n\r\nALTER TABLE public.motor_crash_violation_incidents REPLICA IDENTITY FULL;\r\n```\r\nInsert records : \r\n\r\n```\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(1, 2016, 'DRIVING WHILE INTOXICATED', '11923', 17475366, 'I', '2020-09-24 11:03:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(3, 2016, 'AGGRAVATED UNLIC OPER 2ND/PREV CONV', '5112A1', 17475367, 'U', '2020-09-24 15:00:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(4, 2019, 'AGGRAVATED UNLIC OPER 2ND/PREV', '5112A2', 17475368, 'I', '2019-09-24 15:00:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(2, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '2180F', 17475569, 'U', '2020-09-29 11:00:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(9, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475573, 'I', '2020-09-29 11:00:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(10, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180D', 17475574, 'I', '2020-09-29 11:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(11, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180D', 17475574, 'I', '2020-09-29 12:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(12, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 13:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(13, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 14:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(34, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 15:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(35, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 16:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(36, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 17:00:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(37, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180E', 17475574, 'I', '2020-09-29 17:10:00.000');\r\ncommit;\r\nINSERT INTO public.motor_crash_violation_incidents\r\n(inc_id, \"year\", violation_desc, violation_code, case_individual_id, flag, last_modified_ts)\r\nVALUES(38, 2020, 'UNREASONABLE SPEED/SPECIAL HAZARDS', '1180D', 17475574, 'I', '2020-09-29 18:00:00.000');\r\ncommit;\r\n```\r\n\r\nIssue Delete : \r\n\r\n```\r\nDELETE FROM public.motor_crash_violation_incidents\r\nWHERE inc_id=3;\r\n```\r\n\r\n\r\n\r\nThese changes are automatically picked by the Confluent Kafka's Postgres Debezium Connector and written to topic","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712377184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712391147","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-712391147","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":712391147,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjM5MTE0Nw==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T19:24:40Z","updated_at":"2021-01-04T22:31:18Z","author_association":"CONTRIBUTOR","body":"@bschell @vinothchandar to make clear, just wondering what is the exact goal for this pr? Do we want to make Hudi support both compile & run with spark 3 or we want to make Hudi compile with spark 2 and then run with spark3?\r\n\r\nIdeally we should make Hudi both compile and run with Spark3. But current code change cannot compile with spark 3.\r\n\r\nRun\r\n\r\n```\r\nmvn clean install -DskipTests -DskipITs -Dspark.version=3.0.0 -Pscala-2.12\r\n```\r\n\r\nreturns\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:testCompile (default-testCompile) on project hudi-client: Compilation failure\r\n[ERROR] /Users/wenningd/workplace/hudi/hudi-client/src/test/java/org/apache/hudi/testutils/SparkDatasetTestUtils.java:[146,27] cannot find symbol\r\n[ERROR]   symbol:   method toRow(org.apache.spark.sql.Row)\r\n[ERROR]   location: variable encoder of type org.apache.spark.sql.catalyst.encoders.ExpressionEncoder\r\n[ERROR] \r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712391147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712404711","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-712404711","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":712404711,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQwNDcxMQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T19:51:51Z","updated_at":"2020-10-19T19:57:21Z","author_association":"NONE","body":"Not sure if this is gonna be of any help but attaching the latest logs. I can see this messages towards the end\r\n```\r\nat scala.collection.Iterator$class.isEmpty(Iterator.scala:331)\r\nat scala.collection.AbstractIterator.isEmpty(Iterator.scala:1334)\r\nat org.apache.hudi.AvroConversionUtils$$anonfun$2.apply(AvroConversionUtils.scala:46)\r\nat org.apache.hudi.AvroConversionUtils$$anonfun$2.apply(AvroConversionUtils.scala:45)\r\n\r\n```\r\n[o.log](https://github.com/apache/hudi/files/5404352/o.log)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712404711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712449097","html_url":"https://github.com/apache/hudi/pull/2189#issuecomment-712449097","issue_url":"https://api.github.com/repos/apache/hudi/issues/2189","id":712449097,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQ0OTA5Nw==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T21:20:38Z","updated_at":"2020-10-19T21:20:38Z","author_association":"MEMBER","body":"@vinothchandar  Some more updates from my side. PTAL.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712449097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712453460","html_url":"https://github.com/apache/hudi/issues/2057#issuecomment-712453460","issue_url":"https://api.github.com/repos/apache/hudi/issues/2057","id":712453460,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQ1MzQ2MA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T21:29:57Z","updated_at":"2020-10-19T21:29:57Z","author_association":"CONTRIBUTOR","body":"> > @umehrot2 Could the IOException be due to #2089 ?\r\n> \r\n> I'm not entirely sure if it's related to this issue as the steps to reproduce is different, but the thing I see in common is that both issues are referencing a MOR table. I don't get this issue when my table is COW.\r\n\r\n@n3nash @WTa-hash Apologies for the late response here. I think we need the full stack trace here to be able to debug this. Looking at https://github.com/apache/hudi/blob/release-0.6.0/hudi-common/src/main/java/org/apache/hudi/common/table/log/AbstractHoodieLogRecordScanner.java#L244 it seems that the full exception is only logged at the executors. So, either the executor logs should be checked to see the full trace, or change the line here to throw the actual exception back to the driver. If this is still happening, you can also open a jira with some basic reproduction steps if possible. I do not personally think that it would be related to #2089 but we cannot be certain without seeing the full exception.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712453460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712454567","html_url":"https://github.com/apache/hudi/issues/2057#issuecomment-712454567","issue_url":"https://api.github.com/repos/apache/hudi/issues/2057","id":712454567,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjQ1NDU2Nw==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T21:32:21Z","updated_at":"2020-10-19T21:32:21Z","author_association":"CONTRIBUTOR","body":"> @umehrot2 It looks like for 0.6.0 where this issue is fixed, @WTa-hash is seeing the exception `java.lang.NoSuchMethodError: org.apache.spark.sql.execution.datasources.PartitionedFile.` originating from `at org.apache.hudi.MergeOnReadSnapshotRelation.buildFileIndex(MergeOnReadSnapshotRelation.scala:142) `. Any ideas if this is wrong spark versions ?\r\n\r\n@n3nash this issue is because of EMR environment. The jar @WTa-hash was building for 0.6.0 is not compiled against EMR's spark version. EMR has its own spark with various modifications. This issue should not be there in emr-5.31.0 where hudi 0.6.0 is officially supported. No need to replace that jar's there. The jar's we provide there are compiled against our own spark and it fixes this issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712454567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712505539","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-712505539","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":712505539,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjUwNTUzOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T00:00:17Z","updated_at":"2020-10-20T00:00:17Z","author_association":"MEMBER","body":">we want to make Hudi compile with spark 2 and then run with spark3?\r\n\r\nthis was the intention. but as @bschell pointed out some classes have changed and we need to make parts of `hudi-spark` modular and plugin spark version specific implementations. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712505539/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712536085","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-712536085","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":712536085,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjUzNjA4NQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T01:46:41Z","updated_at":"2020-10-20T01:46:41Z","author_association":"CONTRIBUTOR","body":"> @lw309637554 looks like comments from @pratyakshsharma were addressed. sorry about the delay. merging now. Thank you @lw309637554 for adding the cases!\r\n\r\nThanks ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712536085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712564198","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-712564198","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":712564198,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjU2NDE5OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T03:25:14Z","updated_at":"2020-10-20T03:25:14Z","author_association":"CONTRIBUTOR","body":"@SteNicholas @leesf : Does this essentially mean we no longer support small file handling for \"inserts\" ? \r\nIf user doesn't essentially care about duplicates, I agree that we need to have same behavior w/o small file handling. Instead of this approach, can we create a new type of Write Handle which looks like MergeHandle but does not merge but rather appends records and creates a new version of Parquet file. You can then use this Handle instead of UpdateHandle when pure insert operation type is used.\r\n\r\ncc @vinothchandar \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712564198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712566489","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-712566489","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":712566489,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjU2NjQ4OQ==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T03:33:04Z","updated_at":"2020-10-20T11:42:44Z","author_association":"MEMBER","body":"> @SteNicholas @leesf : Does this essentially mean we no longer support small file handling for \"inserts\" ?\r\n> If user doesn't essentially care about duplicates, I agree that we need to have same behavior w/o small file handling. Instead of this approach, can we create a new type of Write Handle which looks like MergeHandle but does not merge but rather appends records and creates a new version of Parquet file. You can then use this Handle instead of UpdateHandle when pure insert operation type is used.\r\n> \r\n> cc @vinothchandar\r\n\r\nYes, user doesn't essentially care about duplicates for small files and the same behavior w/o small file handling makes sense.\r\n@vinothchandar What do you think about?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712566489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712585912","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-712585912","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":712585912,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjU4NTkxMg==","user":{"login":"rahulpoptani","id":20492557,"node_id":"MDQ6VXNlcjIwNDkyNTU3","avatar_url":"https://avatars.githubusercontent.com/u/20492557?v=4","gravatar_id":"","url":"https://api.github.com/users/rahulpoptani","html_url":"https://github.com/rahulpoptani","followers_url":"https://api.github.com/users/rahulpoptani/followers","following_url":"https://api.github.com/users/rahulpoptani/following{/other_user}","gists_url":"https://api.github.com/users/rahulpoptani/gists{/gist_id}","starred_url":"https://api.github.com/users/rahulpoptani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahulpoptani/subscriptions","organizations_url":"https://api.github.com/users/rahulpoptani/orgs","repos_url":"https://api.github.com/users/rahulpoptani/repos","events_url":"https://api.github.com/users/rahulpoptani/events{/privacy}","received_events_url":"https://api.github.com/users/rahulpoptani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T04:47:58Z","updated_at":"2020-10-20T04:47:58Z","author_association":"NONE","body":"I used a different environment where I used Spark 2.4.5 with Scala 2.12 and I was able to successfully perform Insert/Upsert/Deletes and Read on Merge-On-Read table type.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712585912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712624370","html_url":"https://github.com/apache/hudi/issues/661#issuecomment-712624370","issue_url":"https://api.github.com/repos/apache/hudi/issues/661","id":712624370,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjYyNDM3MA==","user":{"login":"Akshay2Agarwal","id":11676397,"node_id":"MDQ6VXNlcjExNjc2Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/11676397?v=4","gravatar_id":"","url":"https://api.github.com/users/Akshay2Agarwal","html_url":"https://github.com/Akshay2Agarwal","followers_url":"https://api.github.com/users/Akshay2Agarwal/followers","following_url":"https://api.github.com/users/Akshay2Agarwal/following{/other_user}","gists_url":"https://api.github.com/users/Akshay2Agarwal/gists{/gist_id}","starred_url":"https://api.github.com/users/Akshay2Agarwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Akshay2Agarwal/subscriptions","organizations_url":"https://api.github.com/users/Akshay2Agarwal/orgs","repos_url":"https://api.github.com/users/Akshay2Agarwal/repos","events_url":"https://api.github.com/users/Akshay2Agarwal/events{/privacy}","received_events_url":"https://api.github.com/users/Akshay2Agarwal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T06:26:28Z","updated_at":"2020-10-20T06:27:31Z","author_association":"NONE","body":"[Grofers](https://grofers.com/) has integrated hudi in its central pipelines for replicating backend database CDC into the warehouse. We have also published the [blog](https://lambda.grofers.com/origins-of-data-lake-at-grofers-6c011f94b86c) around its integration in our data platform.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712624370/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712676325","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-712676325","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":712676325,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjY3NjMyNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T08:11:26Z","updated_at":"2020-10-20T08:11:26Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : THis turned out to be unrelated to Hudi. I tested with the debezium local setup. Debezium is writing 2 kafka records for each delete records with one of the record having value set to \"null\". You can inspect the kafka  topic using kafka-avro-console-consumer. This \"null\" record is causing the spark row encoding to fail.\r\n\r\n\r\nroot@schemaregistry:/# kafka-avro-console-consumer --bootstrap-server kafka:9092 --topic debezium.public.motor_crash_violation_incidents --offset 'earliest' --partition 0 -property schema.registry.url=http://localhost:8085 --property print.key=true\r\n```\r\n{\"inc_id\":3}\t{\"before\":{\"debezium.public.motor_crash_violation_incidents.Value\":{\"inc_id\":3,\"year\":{\"int\":2016},\"violation_desc\":{\"string\":\"AGGRAVATED UNLIC OPER 2ND/PREV CONV\"},\"violation_code\":{\"string\":\"5112A1\"},\"case_individual_id\":{\"int\":17475367},\"flag\":{\"string\":\"U\"},\"last_modified_ts\":1600959600000000}},\"after\":null,\"source\":{\"version\":\"1.3.0.Final\",\"connector\":\"postgresql\",\"name\":\"debezium\",\"ts_ms\":1603179674623,\"snapshot\":{\"string\":\"false\"},\"db\":\"debezium\",\"schema\":\"public\",\"table\":\"motor_crash_violation_incidents\",\"txId\":{\"long\":638},\"lsn\":{\"long\":34213136},\"xmin\":null},\"op\":\"d\",\"ts_ms\":{\"long\":1603179675108},\"transaction\":null}\r\n{\"inc_id\":3}\tnull\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712676325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712680562","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-712680562","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":712680562,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjY4MDU2Mg==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T08:19:13Z","updated_at":"2020-10-20T08:22:47Z","author_association":"NONE","body":"@bvaradar Yes I think thats the tombstone event. You can disable it with configs. I believe \n\ntombstones.on.delete = false","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712680562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712708891","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-712708891","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":712708891,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjcwODg5MQ==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T09:08:52Z","updated_at":"2020-10-20T09:08:52Z","author_association":"MEMBER","body":"Moved to rfc-15 branch with another PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712708891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712788169","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-712788169","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":712788169,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjc4ODE2OQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T11:37:21Z","updated_at":"2020-10-20T11:37:21Z","author_association":"CONTRIBUTOR","body":"Okay, I will PR later ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712788169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712900520","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-712900520","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":712900520,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjkwMDUyMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T14:37:05Z","updated_at":"2020-10-20T14:37:05Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : Let us know after you update the debezium setting if things work fine end to end.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712900520/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712920514","html_url":"https://github.com/apache/hudi/pull/2136#issuecomment-712920514","issue_url":"https://api.github.com/repos/apache/hudi/issues/2136","id":712920514,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjkyMDUxNA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T15:05:59Z","updated_at":"2020-10-20T15:05:59Z","author_association":"CONTRIBUTOR","body":"@vinothchandar please help to review again ,thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/712920514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713049606","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-713049606","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":713049606,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzA0OTYwNg==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T18:21:48Z","updated_at":"2020-10-20T18:32:27Z","author_association":"CONTRIBUTOR","body":"> Got hive class error\r\n> \r\n> ```\r\n> Exception in thread \"main\" java.lang.NoSuchMethodError: org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(Lorg/apache/hadoop/hive/conf/HiveConf;Lorg/apache/hadoop/hive/metastore/HiveMetaHookLoader;Ljava/util/concurrent/ConcurrentHashMap;Ljava/lang/String;Z)Lorg/apache/hadoop/hive/metastore/IMetaStoreClient;\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.createMetaStoreClient(Hive.java:3600)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3652)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.getMSC(Hive.java:3632)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.getAllFunctions(Hive.java:3894)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.reloadFunctions(Hive.java:248)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.registerAllFunctionsOnce(Hive.java:231)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.<init>(Hive.java:388)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.create(Hive.java:332)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.getInternal(Hive.java:312)\r\n> \tat org.apache.hadoop.hive.ql.metadata.Hive.get(Hive.java:288)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.client(HiveClientImpl.scala:260)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.$anonfun$withHiveState$1(HiveClientImpl.scala:286)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.liftedTree1$1(HiveClientImpl.scala:227)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.retryLocked(HiveClientImpl.scala:226)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.withHiveState(HiveClientImpl.scala:276)\r\n> \tat org.apache.spark.sql.hive.client.HiveClientImpl.databaseExists(HiveClientImpl.scala:389)\r\n> \tat org.apache.spark.sql.hive.HiveExternalCatalog.$anonfun$databaseExists$1(HiveExternalCatalog.scala:221)\r\n> \tat scala.runtime.java8.JFunction0$mcZ$sp.apply(JFunction0$mcZ$sp.java:23)\r\n> \tat org.apache.spark.sql.hive.HiveExternalCatalog.withClient(HiveExternalCatalog.scala:99)\r\n> \tat org.apache.spark.sql.hive.HiveExternalCatalog.databaseExists(HiveExternalCatalog.scala:221)\r\n> \tat org.apache.spark.sql.internal.SharedState.externalCatalog$lzycompute(SharedState.scala:137)\r\n> \tat org.apache.spark.sql.internal.SharedState.externalCatalog(SharedState.scala:127)\r\n> \tat org.apache.spark.sql.internal.SharedState.globalTempViewManager$lzycompute(SharedState.scala:157)\r\n> \tat org.apache.spark.sql.internal.SharedState.globalTempViewManager(SharedState.scala:155)\r\n> \tat org.apache.spark.sql.hive.HiveSessionStateBuilder.$anonfun$catalog$2(HiveSessionStateBuilder.scala:59)\r\n> \tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.globalTempViewManager$lzycompute(SessionCatalog.scala:93)\r\n> \tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.globalTempViewManager(SessionCatalog.scala:93)\r\n> \tat org.apache.spark.sql.catalyst.catalog.SessionCatalog.createDatabase(SessionCatalog.scala:206)\r\n> \tat org.apache.spark.sql.execution.command.CreateDatabaseCommand.run(ddl.scala:81)\r\n> \tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n> \tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n> \tat org.apache.spark.sql.execution.command.ExecutedCommandExec.executeCollect(commands.scala:79)\r\n> \tat org.apache.spark.sql.Dataset.$anonfun$logicalPlan$1(Dataset.scala:229)\r\n> \tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3616)\r\n> \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:100)\r\n> \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:160)\r\n> \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:87)\r\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n> \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n> \tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3614)\r\n> \tat org.apache.spark.sql.Dataset.<init>(Dataset.scala:229)\r\n> \tat org.apache.spark.sql.Dataset$.$anonfun$ofRows$2(Dataset.scala:100)\r\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n> \tat org.apache.spark.sql.Dataset$.ofRows(Dataset.scala:97)\r\n> \tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:606)\r\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:763)\r\n> \tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:601)\r\n> \tat bb.gtd.de.CanalJsonToOds$.initSchema(CanalJsonToOds.scala:81)\r\n> \tat bb.gtd.de.CanalJsonToOds$.delayedEndpoint$bb$gtd$de$CanalJsonToOds$1(CanalJsonToOds.scala:42)\r\n> \tat bb.gtd.de.CanalJsonToOds$delayedInit$body.apply(CanalJsonToOds.scala:11)\r\n> \tat scala.Function0.apply$mcV$sp(Function0.scala:39)\r\n> \tat scala.Function0.apply$mcV$sp$(Function0.scala:39)\r\n> \tat scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:17)\r\n> \tat scala.App.$anonfun$main$1$adapted(App.scala:80)\r\n> \tat scala.collection.immutable.List.foreach(List.scala:431)\r\n> \tat scala.App.main(App.scala:80)\r\n> \tat scala.App.main$(App.scala:78)\r\n> \tat bb.gtd.de.CanalJsonToOds$.main(CanalJsonToOds.scala:11)\r\n> \tat bb.gtd.de.CanalJsonToOds.main(CanalJsonToOds.scala)\r\n> 20/10/14 15:18:12 INFO SparkContext: Invoking stop() from shutdown hook\r\n> 20/10/14 15:18:12 INFO AbstractConnector: Stopped Spark@64b31700{HTTP/1.1,[http/1.1]}{0.0.0.0:4041}\r\n> 20/10/14 15:18:12 INFO SparkUI: Stopped Spark web UI at http://192.168.200.57:4041\r\n> 20/10/14 15:18:12 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n> 20/10/14 15:18:12 INFO MemoryStore: MemoryStore cleared\r\n> 20/10/14 15:18:12 INFO BlockManager: BlockManager stopped\r\n> 20/10/14 15:18:12 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n> 20/10/14 15:18:12 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n> 20/10/14 15:18:12 INFO SparkContext: Successfully stopped SparkContext\r\n> 20/10/14 15:18:12 INFO ShutdownHookManager: Shutdown hook called\r\n> 20/10/14 15:18:12 INFO ShutdownHookManager: Deleting directory /private/var/folders/vv/5d3clfpj22q_c12ghwdnpfl80000gn/T/spark-a0c47cb6-1512-4f8c-8d10-38e58796fed6\r\n> Disconnected from the target VM, address: '127.0.0.1:50019', transport: 'socket'\r\n> ```\r\n\r\nI suspect that this is because Spark 3.0.0 uses Hive [2.3.7](https://github.com/apache/spark/blob/v3.0.0/pom.xml#L130) but Spark 2.x uses Hive [1.2.1.spark2](https://github.com/apache/spark/blob/v2.4.0/pom.xml#L129) and this causes some API conflict. \r\n\r\nLooks like this signature: ```org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.getProxy(Lorg/apache/hadoop/hive/conf/HiveConf;Lorg/apache/hadoop/hive/metastore/HiveMetaHookLoader;Ljava/util/concurrent/ConcurrentHashMap;Ljava/lang/String;Z)``` only exists in Hive ```1.2.1.spark2```: https://github.com/JoshRosen/hive/blob/release-1.2.1-spark2/metastore/src/java/org/apache/hadoop/hive/metastore/RetryingMetaStoreClient.java#L101 but no longer exists in Hive ```2.3.7```: https://github.com/apache/hive/blob/rel/release-2.3.7/metastore/src/java/org/apache/hadoop/hive/metastore/RetryingMetaStoreClient.java.\r\n\r\nIf we compile with Spark 2 and then run with Spark 3, we might run into this kind of issue.\r\n\r\nBut I didn't see any Hudi class in the error stack, can you provide more information about this error?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713049606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713185450","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-713185450","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":713185450,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzE4NTQ1MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T22:54:26Z","updated_at":"2020-10-20T22:54:26Z","author_association":"MEMBER","body":"This could be related to #1760 being worked on. i.e not working with spark3","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713185450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713192778","html_url":"https://github.com/apache/hudi/pull/1484#issuecomment-713192778","issue_url":"https://api.github.com/repos/apache/hudi/issues/1484","id":713192778,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzE5Mjc3OA==","user":{"login":"v3nkatesh","id":33071342,"node_id":"MDQ6VXNlcjMzMDcxMzQy","avatar_url":"https://avatars.githubusercontent.com/u/33071342?v=4","gravatar_id":"","url":"https://api.github.com/users/v3nkatesh","html_url":"https://github.com/v3nkatesh","followers_url":"https://api.github.com/users/v3nkatesh/followers","following_url":"https://api.github.com/users/v3nkatesh/following{/other_user}","gists_url":"https://api.github.com/users/v3nkatesh/gists{/gist_id}","starred_url":"https://api.github.com/users/v3nkatesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v3nkatesh/subscriptions","organizations_url":"https://api.github.com/users/v3nkatesh/orgs","repos_url":"https://api.github.com/users/v3nkatesh/repos","events_url":"https://api.github.com/users/v3nkatesh/events{/privacy}","received_events_url":"https://api.github.com/users/v3nkatesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T23:15:46Z","updated_at":"2020-10-20T23:15:46Z","author_association":"CONTRIBUTOR","body":"> @n3nash I tried to rebase this and noticed that the custom ratelimiter is still a reuse from Guava. Are we still pursuing this PR?\r\n\r\nSry for the delay folks, I just came back from my break. @vinothchandar [latest RateLimiter clss](https://github.com/apache/hudi/pull/1484/files#diff-30c718dda91817a69efbd57e3e5a499cc3776975d6e3bc8e8f4b1cb0528b91a6R1) is not based on Guava. Let me know","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713192778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713197963","html_url":"https://github.com/apache/hudi/issues/661#issuecomment-713197963","issue_url":"https://api.github.com/repos/apache/hudi/issues/661","id":713197963,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzE5Nzk2Mw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T23:32:04Z","updated_at":"2020-10-20T23:41:00Z","author_association":"MEMBER","body":"@Akshay2Agarwal  Thanks! updating here #2191. Blog is great. Let me tweet/share as well. Thanks! do you have twitter handle? (nvm found it) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713197963/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713266011","html_url":"https://github.com/apache/hudi/pull/2160#issuecomment-713266011","issue_url":"https://api.github.com/repos/apache/hudi/issues/2160","id":713266011,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzI2NjAxMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T03:09:01Z","updated_at":"2020-10-21T03:09:01Z","author_association":"MEMBER","body":"@umehrot2 are you able to revieew this? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713266011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713277243","html_url":"https://github.com/apache/hudi/issues/2162#issuecomment-713277243","issue_url":"https://api.github.com/repos/apache/hudi/issues/2162","id":713277243,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzI3NzI0Mw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T03:39:05Z","updated_at":"2020-10-21T03:39:05Z","author_association":"CONTRIBUTOR","body":"I will do PR today","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713277243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713294221","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-713294221","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":713294221,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzI5NDIyMQ==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T04:29:50Z","updated_at":"2020-10-21T04:31:55Z","author_association":"CONTRIBUTOR","body":"> @bschell : For running integration tests with hudi packages built with scala 2.12, we just need to change scripts/run_travis_tests.sh. The docker container should automatically load those jars for running integration tests.\r\n> \r\n> ```diff\r\n> index 63fb959c..b77b4f64 100755\r\n> --- a/scripts/run_travis_tests.sh\r\n> +++ b/scripts/run_travis_tests.sh\r\n> @@ -35,7 +35,7 @@ elif [ \"$mode\" = \"integration\" ]; then\r\n>    export SPARK_HOME=$PWD/spark-${sparkVersion}-bin-hadoop${hadoopVersion}\r\n>    mkdir /tmp/spark-events/\r\n>    echo \"Running Integration Tests\"\r\n> -  mvn verify -Pintegration-tests -B\r\n> +  mvn verify -Pintegration-tests -Dscala-2.12 -B\r\n>  else\r\n>    echo \"Unknown mode $mode\"\r\n>    exit 1\r\n> ```\r\n\r\nIs this a permanent change or we just try to run test here? @bschell @vinothchandar @bvaradar \r\n\r\nI ran into a scala class not found error when running docker integ testing for Hudi:\r\n\r\n```\r\n20/10/21 00:04:17 WARN SparkContext: Using an existing SparkContext; some configuration may not take effect.\r\nException in thread \"main\" java.lang.NoSuchMethodError: scala.collection.JavaConversions$.deprecated$u0020asScalaIterator(Ljava/util/Iterator;)Lscala/collection/Iterator;\r\n\tat org.apache.hudi.IncrementalRelation.<init>(IncrementalRelation.scala:78)\r\n\tat org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:95)\r\n\tat org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:51)\r\n\tat org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:318)\r\n\tat org.apache.spark.sql.DataFrameReader.loadV1Source(DataFrameReader.scala:223)\r\n\tat org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:211)\r\n\tat org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:178)\r\n\tat org.apache.hudi.utilities.sources.HoodieIncrSource.fetchNextBatch(HoodieIncrSource.java:122)\r\n\tat org.apache.hudi.utilities.sources.RowSource.fetchNewData(RowSource.java:43)\r\n\tat org.apache.hudi.utilities.sources.Source.fetchNext(Source.java:75)\r\n\tat org.apache.hudi.utilities.deltastreamer.SourceFormatAdapter.fetchNewDataInAvroFormat(SourceFormatAdapter.java:68)\r\n\tat org.apache.hudi.utilities.deltastreamer.DeltaSync.readFromSource(DeltaSync.java:364)\r\n\tat org.apache.hudi.utilities.deltastreamer.DeltaSync.syncOnce(DeltaSync.java:253)\r\n\tat org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer.lambda$sync$2(HoodieDeltaStreamer.java:163)\r\n\tat org.apache.hudi.common.util.Option.ifPresent(Option.java:96)\r\n\tat org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer.sync(HoodieDeltaStreamer.java:161)\r\n\tat org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer.main(HoodieDeltaStreamer.java:466)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n\tat org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:845)\r\n\tat org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:161)\r\n\tat org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:184)\r\n\tat org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:86)\r\n\tat org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:920)\r\n\tat org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:929)\r\n\tat org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n```\r\n\r\nI suspect that although Hudi is able to pick the ```hudi-spark_2.12-bundle.jar``` but since the docker environment still uses spark_2.11, so there's still some conflict between scala 2.11 & 2.12.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713294221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713305298","html_url":"https://github.com/apache/hudi/issues/2186#issuecomment-713305298","issue_url":"https://api.github.com/repos/apache/hudi/issues/2186","id":713305298,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzMwNTI5OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T05:04:27Z","updated_at":"2020-10-21T05:04:27Z","author_association":"CONTRIBUTOR","body":"cc @n3nash who is rethinking schema management in Hudi.\r\n\r\n1. Regarding schema evolution, Hudi uses avro schema compatibility rules. For example, new fields must be nullable, columns cannot be deleted...\r\n2. https://github.com/apache/hudi/issues/1977 should give context around AWS Glue support (cc @umehrot2 )\r\n3.  Yeah, I am assuming you are referring to cleaner retentions. Commits happen before cleaning. Any failed commits will not cause any side-effects.\r\n4.  For Incremental pull to work, you need to employ soft-deletes only with tombstones general pattern. You can retain hudi key but null out other columns (nullable) or obfuscate. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713305298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713308713","html_url":"https://github.com/apache/hudi/issues/2186#issuecomment-713308713","issue_url":"https://api.github.com/repos/apache/hudi/issues/2186","id":713308713,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzMwODcxMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T05:15:51Z","updated_at":"2020-10-21T05:15:51Z","author_association":"MEMBER","body":"Good to see if we can update our FAQ with these questions? :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713308713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713333465","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-713333465","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":713333465,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzMzMzQ2NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T06:16:27Z","updated_at":"2020-10-21T06:16:36Z","author_association":"MEMBER","body":">If user doesn't essentially care about duplicates, I agree that we need to have same behavior w/o small file handling.\r\n\r\nI don't follow this actually. I understand that this fixes the issue that an insert be treated as an update, if the user generates the same key. (but I think of it more as a misuse of key i.e its the user's responsibility to generate unique keys and this wont happen). Nonetheless, this might be a valid mode to have for users who can't bother to create unique keys. but like said above, it would be nice to retain small file handling, while just allowing duplicates through a separate IOHandle/flag? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713333465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713335563","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-713335563","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":713335563,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzMzNTU2Mw==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T06:19:46Z","updated_at":"2020-10-21T06:19:46Z","author_association":"MEMBER","body":"> > If user doesn't essentially care about duplicates, I agree that we need to have same behavior w/o small file handling.\r\n> \r\n> I don't follow this actually. I understand that this fixes the issue that an insert be treated as an update, if the user generates the same key. (but I think of it more as a misuse of key i.e its the user's responsibility to generate unique keys and this wont happen). Nonetheless, this might be a valid mode to have for users who can't bother to create unique keys. but like said above, it would be nice to retain small file handling, while just allowing duplicates through a separate IOHandle/flag?\r\n\r\n@vinothchandar I agree with the point that allowing duplicates through a separate IOHandle/flag. I would like to invoke a different IOHandle to HoodieMergeHandle to allow duplicates. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713335563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713336588","html_url":"https://github.com/apache/hudi/pull/2152#issuecomment-713336588","issue_url":"https://api.github.com/repos/apache/hudi/issues/2152","id":713336588,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzMzNjU4OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T06:21:24Z","updated_at":"2020-10-21T06:21:24Z","author_association":"MEMBER","body":"@bvaradar is this related to spark streaming somehow? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713336588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713354497","html_url":"https://github.com/apache/hudi/pull/2136#issuecomment-713354497","issue_url":"https://api.github.com/repos/apache/hudi/issues/2136","id":713354497,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzM1NDQ5Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T06:59:30Z","updated_at":"2020-10-21T06:59:30Z","author_association":"MEMBER","body":"@lw309637554 will do in the next 1-2 days. thanks for your patience","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713354497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713414467","html_url":"https://github.com/apache/hudi/issues/2149#issuecomment-713414467","issue_url":"https://api.github.com/repos/apache/hudi/issues/2149","id":713414467,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzQxNDQ2Nw==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T08:49:08Z","updated_at":"2020-10-21T08:49:08Z","author_association":"NONE","body":"@bvaradar You are correct. It worked fine once the config was added. For some reason , kafkacat was not showing up the tombstone record . ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713414467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713434086","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-713434086","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":713434086,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzQzNDA4Ng==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T09:21:41Z","updated_at":"2022-03-28T15:17:39Z","author_association":"NONE","body":"sorry for delay;\r\n\r\nHere some tips about what i did : \r\n\r\n```\r\n    val df = SparkUtils.getStream(sparkSession,config).option(\"subscribe\", table.name).load()\r\n\r\n    val df2 = df\r\n      .withColumn(\"deser_value\",Deserializer.deser(table.name,config.getRegistryProps)(col(\"value\")))\r\n      .withColumn(\"parsed_value\",from_json(col(\"deser_value\"),sru.getLastestSchema(table.name).dataType))\r\n\r\n\r\n    val df_upsert = df2.select(\"parsed_value\")\r\n      .select(\r\n        col(\"parsed_value.after.*\"),\r\n        col(\"parsed_value.ts_ms\"),\r\n        col(\"parsed_value.op\"),\r\n        col(\"parsed_value.before.\"+table.pk).as(\"id_before\")\r\n      )\r\n      .withColumn(table.pk,when(col(\"op\") === 'd',col(\"id_before\")).otherwise(col(table.pk))).drop(\"id_before\")\r\n      .filter(col(table.pk).isNotNull)\r\n      .withColumn(\"_hoodie_is_deleted\",when(col(\"op\") === 'd' , true).otherwise(false))\r\n\r\n\r\n      df_upsert.writeStream\r\n        .trigger(Trigger.ProcessingTime(\"120 seconds\"))\r\n        .foreachBatch((df,id) => {\r\n            df.write.format(\"org.apache.hudi\")\r\n              .options(HudiUtils.getHudiOptions(table))\r\n              .options(HudiUtils.getHiveSyncOptions(table.name))\r\n              .options(HudiUtils.getCompactionOptions)\r\n              .mode(SaveMode.Append)\r\n              .save(config.pathConf.outputPath + \"/out/\" + table.name )\r\n        })\r\n        .option(\"checkpointLocation\",config.pathConf.outputPath + \"/checkpoint/\" + table.name)\r\n        .start()\r\n```\r\n\r\n```\r\nobject HudiUtils {\r\n\r\n  def  getHudiOptions(table:Table) : Map[String,String] ={\r\n    Map(\r\n      TABLE_TYPE_OPT_KEY -> \"MERGE_ON_READ\",\r\n      PRECOMBINE_FIELD_OPT_KEY -> \"ts_ms\",\r\n      RECORDKEY_FIELD_OPT_KEY -> table.pk,\r\n      OPERATION_OPT_KEY -> \"upsert\",\r\n      KEYGENERATOR_CLASS_OPT_KEY-> \"org.apache.hudi.keygen.NonpartitionedKeyGenerator\",\r\n      TABLE_NAME_OPT_KEY -> (\"hudi_\" + table.name),\r\n      \"hoodie.table.name\" -> (\"hudi_\" + table.name),\r\n      \"hoodie.upsert.shuffle.parallelism\"->  \"6\",\r\n      \"hoodie.insert.shuffle.parallelism\"-> \"6\",\r\n      \"hoodie.bulkinsert.shuffle.parallelism\"-> \"6\",\r\n      \"hoodie.parquet.small.file.limit\" -> \"4194304\"\r\n    )\r\n  }\r\n\r\n  def getCompactionOptions : Map[String,String] = {\r\n\r\n    Map(\r\n      \"hoodie.compact.inline\" -> \"true\",\r\n      \"hoodie.compact.inline.max.delta.commits\" -> \"10\",\r\n      \"hoodie.cleaner.commits.retained\" -> \"10\",\r\n      \"hoodie.cleaner.fileversions.retained\" -> \"10\",\r\n      \"hoodie.keep.min.commits\" -> \"12\",\r\n      \"hoodie.keep.max.commits\" -> \"13\"\r\n      //\"hoodie.clean.async\" -> \"false\",\r\n      //\"hoodie.clean.automatic\" ->\"true\",\r\n      //\"hoodie.parquet.compression.codec\" -> \"snappy\"\r\n    )\r\n  }\r\n\r\n  def getHiveSyncOptions(tableName:String) : Map[String,String] = {\r\n    Map(\r\n      HIVE_SYNC_ENABLED_OPT_KEY -> \"true\",\r\n      HIVE_USE_JDBC_OPT_KEY -> \"false\",\r\n      HIVE_DATABASE_OPT_KEY -> \"raw_eu_hudi\",\r\n      HIVE_URL_OPT_KEY -> \"thrift://x\",\r\n      HIVE_PARTITION_EXTRACTOR_CLASS_OPT_KEY-> \"org.apache.hudi.hive.NonPartitionedExtractor\",\r\n      HIVE_TABLE_OPT_KEY -> tableName.split(\"\\\\.\").drop(1).mkString(\"_\")\r\n    )\r\n  }\r\n}\r\n```\r\n\r\n\r\n```\r\nobject Deserializer extends Serializable {\r\n\r\n  def deser(topic:String,props:Map[String,String]) = udf((input: Array[Byte]) => deserializeMessage(props,topic,input))\r\n\r\n  val valueDeserializer = new KafkaAvroDeserializer()\r\n\r\n  private def deserializeMessage(props:Map[String,String],topic:String,input: Array[Byte]): String = {\r\n    try {\r\n      valueDeserializer.configure(props.asJava,false)\r\n      valueDeserializer.deserialize(topic, input).asInstanceOf[GenericRecord].toString\r\n    } catch {\r\n      case e: Exception => {\r\n        e.printStackTrace()\r\n        null\r\n      }\r\n    }\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713434086/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713435043","html_url":"https://github.com/apache/hudi/issues/2175#issuecomment-713435043","issue_url":"https://api.github.com/repos/apache/hudi/issues/2175","id":713435043,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzQzNTA0Mw==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T09:23:10Z","updated_at":"2020-10-21T09:23:10Z","author_association":"NONE","body":"i'm able now to read around 500K message per sec. I need to optimise the hudi write part now. I'll open a new issue for that.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713435043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713538871","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-713538871","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":713538871,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzUzODg3MQ==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T12:38:41Z","updated_at":"2020-10-21T12:38:41Z","author_association":"NONE","body":"Even if i increase the record number per batch from 500K to 5M, hudi is still writing 5mb parquet file. But with 5M hudi write more files","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713538871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713553054","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-713553054","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":713553054,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzU1MzA1NA==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T13:02:56Z","updated_at":"2020-10-21T13:02:56Z","author_association":"NONE","body":"Here some metrics with 5.000.000 rows batch \r\n<img width=\"1400\" alt=\"Capture d’écran 2020-10-21 à 15 02 34\" src=\"https://user-images.githubusercontent.com/5584892/96723144-7ef2a300-13ae-11eb-8479-63704e84e654.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713553054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713557657","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-713557657","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":713557657,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzU1NzY1Nw==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T13:10:17Z","updated_at":"2020-10-21T14:14:04Z","author_association":"NONE","body":"First batch => 10min\r\nSecond batch => 20min\r\nThird one => 30min\r\n\r\n<img width=\"1411\" alt=\"Capture d’écran 2020-10-21 à 16 13 29\" src=\"https://user-images.githubusercontent.com/5584892/96732260-6c7d6700-13b8-11eb-9a65-224cb6eb1169.png\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713557657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713732423","html_url":"https://github.com/apache/hudi/issues/2186#issuecomment-713732423","issue_url":"https://api.github.com/repos/apache/hudi/issues/2186","id":713732423,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzczMjQyMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T17:24:28Z","updated_at":"2020-10-21T17:24:28Z","author_association":"CONTRIBUTOR","body":"Good point. Added FAQ sections for these questions in https://cwiki.apache.org/confluence/display/HUDI/FAQ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713732423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713993418","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-713993418","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":713993418,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzk5MzQxOA==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T23:40:16Z","updated_at":"2020-10-21T23:40:16Z","author_association":"CONTRIBUTOR","body":"Found another runtime error when updating MOR table:\r\n```\r\njava.lang.NoSuchMethodError: org.apache.spark.sql.execution.datasources.InMemoryFileIndex.<init>(Lorg/apache/spark/sql/SparkSession;Lscala/collection/Seq;Lscala/collection/immutable/Map;Lscala/Option;Lorg/apache/spark/sql/execution/datasources/FileStatusCache;)V\r\n  at org.apache.hudi.HoodieSparkUtils$.createInMemoryFileIndex(HoodieSparkUtils.scala:72)\r\n  at org.apache.hudi.MergeOnReadSnapshotRelation.buildFileIndex(MergeOnReadSnapshotRelation.scala:127)\r\n  at org.apache.hudi.MergeOnReadSnapshotRelation.<init>(MergeOnReadSnapshotRelation.scala:72)\r\n  at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:87)\r\n  at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:51)\r\n  at org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:339)\r\n  at org.apache.spark.sql.DataFrameReader.loadV1Source(DataFrameReader.scala:279)\r\n  at org.apache.spark.sql.DataFrameReader.$anonfun$load$2(DataFrameReader.scala:268)\r\n  at scala.Option.getOrElse(Option.scala:189)\r\n  at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:268)\r\n  at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:214)\r\n  ... 57 elided\r\n```\r\n\r\nThis is because the signature of ```org.apache.spark.sql.execution.datasources.InMemoryFileIndex.<init>``` is different between spark 2.4.4 & spark 3.0.0.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/713993418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714095249","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-714095249","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":714095249,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDA5NTI0OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T00:57:33Z","updated_at":"2020-10-22T00:57:33Z","author_association":"CONTRIBUTOR","body":"@spyzzz : Few questions:\r\n1. Does your record key have any ordering or is it UUID ?\r\n2.  Your average record size seems to be around 100 bytes. So, you can try setting hoodie.copyonwrite.record.size.estimate=100. This needs to be done the first time you write.\r\n3. Can you attach .commit file in .hoodie folder corresponding to the commits where you observed the difference.\r\n4. Is the file listing that you attached in the description complete ? From what I read, it looks like small file handling did not kick in and there were only inserts. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714095249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714132688","html_url":"https://github.com/apache/hudi/pull/2152#issuecomment-714132688","issue_url":"https://api.github.com/repos/apache/hudi/issues/2152","id":714132688,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDEzMjY4OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T01:21:57Z","updated_at":"2020-10-22T01:21:57Z","author_association":"CONTRIBUTOR","body":"@vinothchandar : No, this is not related to structured streaming.\r\n\r\n@n3nash : I did not use this metrics framework in my testing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714132688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714181644","html_url":"https://github.com/apache/hudi/pull/2194#issuecomment-714181644","issue_url":"https://api.github.com/repos/apache/hudi/issues/2194","id":714181644,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDE4MTY0NA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T02:29:40Z","updated_at":"2020-10-22T02:32:20Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2194?src=pr&el=h1) Report\n> Merging [#2194](https://codecov.io/gh/apache/hudi/pull/2194?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/49407169ac1711c0babb77fb3014473c0b236edd?el=desc) will **decrease** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2194/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2194?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2194      +/-   ##\n============================================\n- Coverage     53.70%   53.67%   -0.03%     \n+ Complexity     2850     2849       -1     \n============================================\n  Files           359      359              \n  Lines         16565    16565              \n  Branches       1782     1782              \n============================================\n- Hits           8896     8892       -4     \n- Misses         6912     6916       +4     \n  Partials        757      757              \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.69% <ø> (-0.05%)` | `1794.00 <ø> (-1.00)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.95% <ø> (ø)` | `304.00 <ø> (ø)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.09% <ø> (ø)` | `327.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2194?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/hudi/pull/2194/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `79.31% <0.00%> (-10.35%)` | `15.00% <0.00%> (-1.00%)` | |\n| [...e/hudi/common/table/log/HoodieLogFormatWriter.java](https://codecov.io/gh/apache/hudi/pull/2194/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9Ib29kaWVMb2dGb3JtYXRXcml0ZXIuamF2YQ==) | `77.67% <0.00%> (-0.90%)` | `22.00% <0.00%> (ø%)` | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714181644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714190414","html_url":"https://github.com/apache/hudi/pull/2194#issuecomment-714190414","issue_url":"https://api.github.com/repos/apache/hudi/issues/2194","id":714190414,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDE5MDQxNA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T03:02:05Z","updated_at":"2020-10-22T03:02:05Z","author_association":"CONTRIBUTOR","body":"@yanghua please take a look when free","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714190414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714215694","html_url":"https://github.com/apache/hudi/issues/2186#issuecomment-714215694","issue_url":"https://api.github.com/repos/apache/hudi/issues/2186","id":714215694,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDIxNTY5NA==","user":{"login":"reena-cs","id":18308856,"node_id":"MDQ6VXNlcjE4MzA4ODU2","avatar_url":"https://avatars.githubusercontent.com/u/18308856?v=4","gravatar_id":"","url":"https://api.github.com/users/reena-cs","html_url":"https://github.com/reena-cs","followers_url":"https://api.github.com/users/reena-cs/followers","following_url":"https://api.github.com/users/reena-cs/following{/other_user}","gists_url":"https://api.github.com/users/reena-cs/gists{/gist_id}","starred_url":"https://api.github.com/users/reena-cs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reena-cs/subscriptions","organizations_url":"https://api.github.com/users/reena-cs/orgs","repos_url":"https://api.github.com/users/reena-cs/repos","events_url":"https://api.github.com/users/reena-cs/events{/privacy}","received_events_url":"https://api.github.com/users/reena-cs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T04:26:54Z","updated_at":"2020-10-22T04:26:54Z","author_association":"NONE","body":"Thanks a lot @bvaradar and @vinothchandar  for the taking your time to answer my questions, it helped a lot . Closing this issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714215694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714236090","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-714236090","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":714236090,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDIzNjA5MA==","user":{"login":"rahulpoptani","id":20492557,"node_id":"MDQ6VXNlcjIwNDkyNTU3","avatar_url":"https://avatars.githubusercontent.com/u/20492557?v=4","gravatar_id":"","url":"https://api.github.com/users/rahulpoptani","html_url":"https://github.com/rahulpoptani","followers_url":"https://api.github.com/users/rahulpoptani/followers","following_url":"https://api.github.com/users/rahulpoptani/following{/other_user}","gists_url":"https://api.github.com/users/rahulpoptani/gists{/gist_id}","starred_url":"https://api.github.com/users/rahulpoptani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahulpoptani/subscriptions","organizations_url":"https://api.github.com/users/rahulpoptani/orgs","repos_url":"https://api.github.com/users/rahulpoptani/repos","events_url":"https://api.github.com/users/rahulpoptani/events{/privacy}","received_events_url":"https://api.github.com/users/rahulpoptani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T05:22:56Z","updated_at":"2020-10-22T05:22:56Z","author_association":"NONE","body":"@vinothchandar We are actually trying to read using Spark 2.x . I'm not sure how it's linked to 1760. This error we are getting only in Databricks, and not in other environments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714236090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714269266","html_url":"https://github.com/apache/hudi/pull/2152#issuecomment-714269266","issue_url":"https://api.github.com/repos/apache/hudi/issues/2152","id":714269266,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDI2OTI2Ng==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T06:42:54Z","updated_at":"2020-10-22T06:42:54Z","author_association":"MEMBER","body":"@n3nash PTAL again.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714269266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714314739","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-714314739","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":714314739,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDMxNDczOQ==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T08:10:03Z","updated_at":"2020-10-22T08:16:24Z","author_association":"NONE","body":"Thanks @bvaradar  , here are my answer : \r\n\r\n1.  The PK is an INT ID\r\n2. Does hoodie.copyonwrite param has an effect on MOR Table ? cause i'm using MOR table\r\n3. \r\n-> file : \r\n[20201022073003.deltacommit.log](https://github.com/apache/hudi/files/5421245/20201022073003.deltacommit.log)\r\n\r\n![Capture d’écran 2020-10-22 à 10 05 57](https://user-images.githubusercontent.com/5584892/96843096-368ac200-144e-11eb-8e88-998b75aabe84.png)\r\n\r\nThis is the .hoodie state while third batch is running\r\n\r\n4. No its just a sample. There is more files, but they all close to 5MB. If i raise the record number in batch, the file size is not growing, but only the file number","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714314739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714318530","html_url":"https://github.com/apache/hudi/pull/2199#issuecomment-714318530","issue_url":"https://api.github.com/repos/apache/hudi/issues/2199","id":714318530,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDMxODUzMA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T08:16:43Z","updated_at":"2020-10-22T08:17:00Z","author_association":"CONTRIBUTOR","body":"before merge this, need first merge https://github.com/apache/hudi/pull/2196","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714318530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714356313","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-714356313","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":714356313,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDM1NjMxMw==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T09:19:11Z","updated_at":"2020-10-22T09:19:11Z","author_association":"NONE","body":"I tried with hoodie.copyonwrite.record.size.estimate=100. \r\n\r\nAnd its a little bit better, file size are now close de 60Mo instead of 5Mo\r\n\r\nAnd batch are faster : \r\n\r\n1 -> 10min (same)\r\n2 -> 11 min \r\n3 -> 17min \r\n\r\n<img width=\"1414\" alt=\"Capture d’écran 2020-10-22 à 11 17 46\" src=\"https://user-images.githubusercontent.com/5584892/96851511-66d75e00-1458-11eb-85e5-157cb40f6fad.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714356313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714801051","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-714801051","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":714801051,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDgwMTA1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T22:38:18Z","updated_at":"2020-10-22T22:38:18Z","author_association":"CONTRIBUTOR","body":"@spyzzz : I do see from the attached commit log that the input batch has only inserts. Do you expect this to be the case ? If so, you can use \"INSERT\" operation type which will skip the index lookup completely. Also, it looks like you are doing inline compaction, you can try enabling async compaction but if this is pure inserts only, you can simply use COW mode\r\n\r\nRegarding file size, I dont see  small file handling kicking in : Can you explicity set \"hoodie.parquet.small.file.limit=104857600\" ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714801051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714801486","html_url":"https://github.com/apache/hudi/issues/2201#issuecomment-714801486","issue_url":"https://api.github.com/repos/apache/hudi/issues/2201","id":714801486,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDgwMTQ4Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T22:39:34Z","updated_at":"2020-10-22T22:39:34Z","author_association":"CONTRIBUTOR","body":"@n3nash : Would you be able to look and reply to this query ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/714801486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715125484","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-715125484","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":715125484,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTEyNTQ4NA==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T08:02:27Z","updated_at":"2020-10-23T08:03:54Z","author_association":"NONE","body":"For this POC use case i only had insert, but in production use i'll get update too, even if insert represent 99% of transaction , i've to assure that hudi table didn't get any duplicates for key. \r\n\r\nTo sum up the situation : i'll get multiple kafka topics filled by CDC débézium events (from mysql mainly). Its a kafka 2.6 with compaction, so at any time, i'll get at least one row per key so that at every moment all the mysql table row are avaible in this topics kafka. \r\n\r\nThe first synchronisation will be very heavy (that's what i'm trying to do with 10 or 100M records), but once the first big synchronisation done, i'll juste have to catch freshly new CDC events from each topics ( and here its like 10000 events per day mainly detele/update)\r\n\r\nMaybe i can try a first job with specific configuration to do the first big synchronisation, and then switch to another job to handle only CDC upsert/delete events, its possible because i'm using structured streaming with checkpooints.\r\n\r\nI tried to do a insert only job, but i've several micro batches, so i can't be sure there will be unique key in hudi table. If i do one big batch with all events and then use deduplicate with hudi its could be possible, but if i've table with 300M+ records, i'm not sure its the good way to go with a huge unique batch.\r\n\r\nHope the situation is clear.\r\n\r\n\r\n-> With hoodie.parquet.small.file.limit=104857600 no changes  still 4 files of 74.4Mb per 5M records\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715125484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715266205","html_url":"https://github.com/apache/hudi/pull/2136#issuecomment-715266205","issue_url":"https://api.github.com/repos/apache/hudi/issues/2136","id":715266205,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTI2NjIwNQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T10:51:18Z","updated_at":"2020-10-23T10:51:18Z","author_association":"CONTRIBUTOR","body":"> @lw309637554 will do in the next 1-2 days. thanks for your patience\r\n\r\nthanks ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715266205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715295493","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-715295493","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":715295493,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTI5NTQ5Mw==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T11:52:41Z","updated_at":"2020-10-23T11:52:41Z","author_association":"NONE","body":"Perf are little bit better with async compaction to true \r\n\r\n<img width=\"1315\" alt=\"Capture d’écran 2020-10-23 à 13 52 03\" src=\"https://user-images.githubusercontent.com/5584892/97000396-f2bfb780-1536-11eb-9c67-c362f05fc592.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715295493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715381186","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-715381186","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":715381186,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTM4MTE4Ng==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T14:35:39Z","updated_at":"2020-10-23T14:35:39Z","author_association":"CONTRIBUTOR","body":"@yanghua please take a look when free","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715381186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715447332","html_url":"https://github.com/apache/hudi/pull/2196#issuecomment-715447332","issue_url":"https://api.github.com/repos/apache/hudi/issues/2196","id":715447332,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTQ0NzMzMg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T16:32:14Z","updated_at":"2020-10-23T16:32:14Z","author_association":"MEMBER","body":"@n3nash you and satish can take this home","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715447332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715656656","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-715656656","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":715656656,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTY1NjY1Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T02:07:21Z","updated_at":"2020-10-24T02:07:21Z","author_association":"MEMBER","body":"@rahulpoptani sorry. Then I misread; I know we fixed some bundle issues jars built on master. Is that worth trying? [those were related to jetty use though","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715656656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715661099","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-715661099","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":715661099,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTY2MTA5OQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T02:46:30Z","updated_at":"2020-10-24T02:50:23Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2200?src=pr&el=h1) Report\n> Merging [#2200](https://codecov.io/gh/apache/hudi/pull/2200?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/14c4611857ea796b8d3aef96f867db9cd0ae31f7?el=desc) will **decrease** coverage by `0.54%`.\n> The diff coverage is `91.66%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2200/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2200?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2200      +/-   ##\n============================================\n- Coverage     53.68%   53.13%   -0.55%     \n+ Complexity     2849     2700     -149     \n============================================\n  Files           359      344      -15     \n  Lines         16565    15885     -680     \n  Branches       1782     1633     -149     \n============================================\n- Hits           8893     8441     -452     \n+ Misses         6915     6756     -159     \n+ Partials        757      688      -69     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.66% <ø> (-0.04%)` | `1794.00 <ø> (ø)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.91% <91.66%> (-0.04%)` | `155.00 <0.00> (-149.00)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.09% <ø> (ø)` | `327.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2200?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...org/apache/hudi/cli/commands/BootstrapCommand.java](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL0Jvb3RzdHJhcENvbW1hbmQuamF2YQ==) | `1.78% <ø> (ø)` | `1.00 <0.00> (ø)` | |\n| [...cala/org/apache/hudi/HoodieBootstrapRelation.scala](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllQm9vdHN0cmFwUmVsYXRpb24uc2NhbGE=) | `87.20% <ø> (ø)` | `15.00 <0.00> (ø)` | |\n| [...n/scala/org/apache/hudi/HoodieMergeOnReadRDD.scala](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllTWVyZ2VPblJlYWRSREQuc2NhbGE=) | `82.19% <ø> (ø)` | `10.00 <0.00> (ø)` | |\n| [...in/scala/org/apache/hudi/IncrementalRelation.scala](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSW5jcmVtZW50YWxSZWxhdGlvbi5zY2FsYQ==) | `76.19% <ø> (ø)` | `20.00 <0.00> (ø)` | |\n| [.../org/apache/hudi/MergeOnReadSnapshotRelation.scala](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvTWVyZ2VPblJlYWRTbmFwc2hvdFJlbGF0aW9uLnNjYWxh) | `90.80% <ø> (ø)` | `16.00 <0.00> (ø)` | |\n| [...in/java/org/apache/hudi/utilities/UtilHelpers.java](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL1V0aWxIZWxwZXJzLmphdmE=) | `64.19% <ø> (ø)` | `30.00 <0.00> (ø)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `70.54% <ø> (ø)` | `49.00 <0.00> (ø)` | |\n| [...i/utilities/deltastreamer/SourceFormatAdapter.java](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvU291cmNlRm9ybWF0QWRhcHRlci5qYXZh) | `86.48% <ø> (ø)` | `11.00 <0.00> (ø)` | |\n| [.../hudi/utilities/schema/RowBasedSchemaProvider.java](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9Sb3dCYXNlZFNjaGVtYVByb3ZpZGVyLmphdmE=) | `66.66% <ø> (ø)` | `2.00 <0.00> (ø)` | |\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3BhcmtTcWxXcml0ZXIuc2NhbGE=) | `50.95% <50.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| ... and [6 more](https://codecov.io/gh/apache/hudi/pull/2200/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715661099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715906430","html_url":"https://github.com/apache/hudi/pull/2199#issuecomment-715906430","issue_url":"https://api.github.com/repos/apache/hudi/issues/2199","id":715906430,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTkwNjQzMA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T12:15:15Z","updated_at":"2020-10-24T12:15:15Z","author_association":"CONTRIBUTOR","body":"@satishkotha @n3nash @bvaradar \r\nhi , the solution in this pull request just filter the commits between the  latest  replace commit and the end commit. \r\nBut compare to HoodieParquetRealtimeInputFormat , it use fsView.getLatestMergedFileSlicesBeforeOrOn to filter the not replace slice, if we should change spark incremental relation to use fsView.getLatestMergedFileSlicesBeforeOrOn ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715906430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715926815","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-715926815","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":715926815,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTkyNjgxNQ==","user":{"login":"BalaMahesh","id":25053668,"node_id":"MDQ6VXNlcjI1MDUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/25053668?v=4","gravatar_id":"","url":"https://api.github.com/users/BalaMahesh","html_url":"https://github.com/BalaMahesh","followers_url":"https://api.github.com/users/BalaMahesh/followers","following_url":"https://api.github.com/users/BalaMahesh/following{/other_user}","gists_url":"https://api.github.com/users/BalaMahesh/gists{/gist_id}","starred_url":"https://api.github.com/users/BalaMahesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalaMahesh/subscriptions","organizations_url":"https://api.github.com/users/BalaMahesh/orgs","repos_url":"https://api.github.com/users/BalaMahesh/repos","events_url":"https://api.github.com/users/BalaMahesh/events{/privacy}","received_events_url":"https://api.github.com/users/BalaMahesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T14:58:33Z","updated_at":"2020-10-24T14:58:33Z","author_association":"NONE","body":"Update 1: \r\n\r\nI have observed that if partition gets data in the next run, query is returning data. If any other partition has only 1 row, then this issue is happening with those partitions . Is there anything required to be changed in the hive ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715926815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715983082","html_url":"https://github.com/apache/hudi/pull/2205#issuecomment-715983082","issue_url":"https://api.github.com/repos/apache/hudi/issues/2205","id":715983082,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTk4MzA4Mg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T16:40:44Z","updated_at":"2020-10-24T16:41:51Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2205?src=pr&el=h1) Report\n> Merging [#2205](https://codecov.io/gh/apache/hudi/pull/2205?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/14c4611857ea796b8d3aef96f867db9cd0ae31f7?el=desc) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2205/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2205?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #2205   +/-   ##\n=========================================\n  Coverage     53.68%   53.68%           \n  Complexity     2849     2849           \n=========================================\n  Files           359      359           \n  Lines         16565    16565           \n  Branches       1782     1782           \n=========================================\n  Hits           8893     8893           \n  Misses         6915     6915           \n  Partials        757      757           \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.70% <ø> (ø)` | `1794.00 <ø> (ø)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.95% <ø> (ø)` | `304.00 <ø> (ø)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.09% <ø> (ø)` | `327.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/715983082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716054758","html_url":"https://github.com/apache/hudi/pull/2168#issuecomment-716054758","issue_url":"https://api.github.com/repos/apache/hudi/issues/2168","id":716054758,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA1NDc1OA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T21:02:51Z","updated_at":"2020-10-24T21:02:51Z","author_association":"CONTRIBUTOR","body":"@n3nash : Have fixed the patch to its completion. Please review when you can. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716054758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716057045","html_url":"https://github.com/apache/hudi/pull/2205#issuecomment-716057045","issue_url":"https://api.github.com/repos/apache/hudi/issues/2205","id":716057045,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA1NzA0NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T21:23:58Z","updated_at":"2020-10-24T21:23:58Z","author_association":"MEMBER","body":"@n3nash can you please take a pass at this. since we had some reason to exclude rollback back then? do you recall why","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716057045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716057557","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-716057557","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":716057557,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA1NzU1Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T21:27:57Z","updated_at":"2020-10-24T21:27:57Z","author_association":"MEMBER","body":"@wangxianghu High level question before I start reviewing in depth.\r\n\r\nDoes this change break existing custom KeyGenerator implementations. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716057557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716063130","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-716063130","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":716063130,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA2MzEzMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T22:23:43Z","updated_at":"2020-10-24T22:23:43Z","author_association":"MEMBER","body":"@SteNicholas Please ping me when this is ready again! If you can also update PR description withe new approach that would be great. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716063130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716065129","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-716065129","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":716065129,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA2NTEyOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T22:47:26Z","updated_at":"2020-10-24T22:47:42Z","author_association":"MEMBER","body":"@Karl-WangSK We need some more thinking to resolve the pending issues I think.\r\n\r\n>  Only the classes that I just added in this PR will take advantage of it.\r\n\r\nI am thinking about how we can safely make this the only API the Hudi code calls. TOL, existing payload classes will have just `precombine(payload)` defined and not the  new `preCombine(payload, schema)` API method. But, the default method will help existing payloads not break and work? (I think so. would be good to confirm) \r\n\r\n> But one problem is that all payload will parse the schema every record whether it needs or not.It will affect performance.\r\n\r\nNow, we can think about how to perf issue. We can parse it once on the driver and then send it across. but issue is `Schema` is not serializable. But I think we can solve this, by wrapping Schema in a `SerializableAvroSchema` class (see how its done in `SerializableConfiguration`). This way we will send a Schema as a string to the executor and then reconstruct the object again on the executor. \r\n\r\nAre you able to attempt this. (else I ll try. might take bit of time.please let me know) \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716065129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716069944","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-716069944","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":716069944,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA2OTk0NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-24T23:47:55Z","updated_at":"2020-10-24T23:47:55Z","author_association":"MEMBER","body":"I will let @yanghua  drive this!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716069944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716075816","html_url":"https://github.com/apache/hudi/pull/2190#issuecomment-716075816","issue_url":"https://api.github.com/repos/apache/hudi/issues/2190","id":716075816,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA3NTgxNg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T00:53:34Z","updated_at":"2020-10-25T00:53:34Z","author_association":"MEMBER","body":"I have rekicked the test. seems like a timeout. (AFAIK, the scenarios in integ test all do MOR with log files.) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716075816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716076506","html_url":"https://github.com/apache/hudi/pull/2045#issuecomment-716076506","issue_url":"https://api.github.com/repos/apache/hudi/issues/2045","id":716076506,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA3NjUwNg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T00:59:32Z","updated_at":"2020-10-25T00:59:32Z","author_association":"MEMBER","body":"@n3nash @nsivabalan one of you able to take this home? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716076506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716076733","html_url":"https://github.com/apache/hudi/pull/2141#issuecomment-716076733","issue_url":"https://api.github.com/repos/apache/hudi/issues/2141","id":716076733,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA3NjczMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T01:01:06Z","updated_at":"2020-10-25T01:01:06Z","author_association":"MEMBER","body":"cc @Karl-WangSK \r\n\r\n@bvaradar please see the other PR #2106 for a similar discussion.  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716076733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716078386","html_url":"https://github.com/apache/hudi/pull/2190#issuecomment-716078386","issue_url":"https://api.github.com/repos/apache/hudi/issues/2190","id":716078386,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA3ODM4Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T01:19:21Z","updated_at":"2020-10-25T01:20:13Z","author_association":"MEMBER","body":"Okay test fails again. @lw309637554 can you please investigate. \r\n\r\n```\r\n[ERROR] Errors: \r\n[ERROR]   ITTestHoodieDemo.testParquetDemo:110->testIncrementalSparkSQLQuery:424->ITTestBase.executeSparkSQLCommand:236->ITTestBase.executeCommandStringInDocker:209->ITTestBase.executeCommandInDocker:177 Â» Timeout\r\n[INFO] \r\n[ERROR] Tests run: 11, Failures: 4, Errors: 1, Skipped: 1\r\n```\r\n\r\nhttps://travis-ci.org/github/apache/hudi/jobs/737741946\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716078386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716079397","html_url":"https://github.com/apache/hudi/pull/2205#issuecomment-716079397","issue_url":"https://api.github.com/repos/apache/hudi/issues/2205","id":716079397,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA3OTM5Nw==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T01:34:34Z","updated_at":"2020-10-25T01:34:34Z","author_association":"CONTRIBUTOR","body":"> @n3nash can you please take a pass at this. since we had some reason to exclude rollback back then? do you recall why\r\n\r\n @vinothchandar @n3nash   i have some background .\r\n1. before https://github.com/apache/hudi/pull/1756/files have the comment \r\n   // TODO: Handle ROLLBACK_ACTION in future\r\n    // ROLLBACK_ACTION is currently not defined in HoodieActiveTimeline\r\n2. but i see ROLLBACK_ACTION define already in HoodieActiveTimeline. so we can add ROLLBACK_ACTION in archivelog\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716079397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716084752","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-716084752","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":716084752,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA4NDc1Mg==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T02:42:22Z","updated_at":"2020-10-25T02:57:25Z","author_association":"CONTRIBUTOR","body":"> @wangxianghu High level question before I start reviewing in depth.\r\n> \r\n> Does this change break existing custom KeyGenerator implementations.\r\n\r\n@vinothchandar \r\nit is the same as before.\r\njust extract a spark-independent version, wrap it as a spark one. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716084752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716095388","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-716095388","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":716095388,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjA5NTM4OA==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T05:12:14Z","updated_at":"2020-10-25T05:12:14Z","author_association":"MEMBER","body":"> @SteNicholas Please ping me when this is ready again! If you can also update PR description withe new approach that would be great.\r\n\r\n@vinothchandar I'm trying to allow duplicates through a separate IOHandle/flag.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716095388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716133477","html_url":"https://github.com/apache/hudi/pull/2049#issuecomment-716133477","issue_url":"https://api.github.com/repos/apache/hudi/issues/2049","id":716133477,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjEzMzQ3Nw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T11:37:35Z","updated_at":"2020-10-25T11:43:44Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2049?src=pr&el=h1) Report\n> Merging [#2049](https://codecov.io/gh/apache/hudi/pull/2049?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/a44f66869f1b938e83857ceaed9291eca9194f45?el=desc) will **increase** coverage by `0.06%`.\n> The diff coverage is `64.28%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2049/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2049?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2049      +/-   ##\n============================================\n+ Coverage     53.62%   53.68%   +0.06%     \n- Complexity     2848     2850       +2     \n============================================\n  Files           359      359              \n  Lines         16553    16574      +21     \n  Branches       1780     1784       +4     \n============================================\n+ Hits           8876     8898      +22     \n+ Misses         6918     6917       -1     \n  Partials        759      759              \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.70% <ø> (-0.03%)` | `1794.00 <ø> (-1.00)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.90% <64.28%> (+0.48%)` | `305.00 <1.00> (+1.00)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.09% <ø> (+0.01%)` | `327.00 <ø> (+2.00)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2049?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3BhcmtTcWxXcml0ZXIuc2NhbGE=) | `50.56% <0.00%> (-0.39%)` | `0.00 <0.00> (ø)` | |\n| [...org/apache/hudi/HoodieDatasetBulkInsertHelper.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9Ib29kaWVEYXRhc2V0QnVsa0luc2VydEhlbHBlci5qYXZh) | `94.11% <75.00%> (-2.86%)` | `3.00 <0.00> (ø)` | |\n| [...src/main/java/org/apache/hudi/DataSourceUtils.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9EYXRhU291cmNlVXRpbHMuamF2YQ==) | `46.84% <85.71%> (+2.08%)` | `23.00 <1.00> (+1.00)` | |\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `79.31% <0.00%> (-10.35%)` | `15.00% <0.00%> (-1.00%)` | |\n| [...in/java/org/apache/hudi/utilities/UtilHelpers.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL1V0aWxIZWxwZXJzLmphdmE=) | `64.19% <0.00%> (-0.40%)` | `30.00% <0.00%> (ø%)` | |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `69.23% <0.00%> (-0.32%)` | `18.00% <0.00%> (ø%)` | |\n| [...java/org/apache/hudi/common/fs/StorageSchemes.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL1N0b3JhZ2VTY2hlbWVzLmphdmE=) | `100.00% <0.00%> (ø)` | `10.00% <0.00%> (ø%)` | |\n| [...ava/org/apache/hudi/keygen/CustomKeyGenerator.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vQ3VzdG9tS2V5R2VuZXJhdG9yLmphdmE=) | `82.60% <0.00%> (ø)` | `16.00% <0.00%> (ø%)` | |\n| [...g/apache/hudi/utilities/sources/AvroDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb0RGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [...udi/utilities/sources/helpers/DFSPathSelector.java](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9ERlNQYXRoU2VsZWN0b3IuamF2YQ==) | `84.44% <0.00%> (+2.39%)` | `14.00% <0.00%> (+2.00%)` | |\n| ... and [1 more](https://codecov.io/gh/apache/hudi/pull/2049/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716133477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716167363","html_url":"https://github.com/apache/hudi/pull/2190#issuecomment-716167363","issue_url":"https://api.github.com/repos/apache/hudi/issues/2190","id":716167363,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjE2NzM2Mw==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-25T15:37:54Z","updated_at":"2020-10-25T15:37:54Z","author_association":"CONTRIBUTOR","body":"> Okay test fails again. @lw309637554 can you please investigate.\r\n> \r\n> ```\r\n> [ERROR] Errors: \r\n> [ERROR]   ITTestHoodieDemo.testParquetDemo:110->testIncrementalSparkSQLQuery:424->ITTestBase.executeSparkSQLCommand:236->ITTestBase.executeCommandStringInDocker:209->ITTestBase.executeCommandInDocker:177 Â» Timeout\r\n> [INFO] \r\n> [ERROR] Tests run: 11, Failures: 4, Errors: 1, Skipped: 1\r\n> ```\r\n> \r\n> https://travis-ci.org/github/apache/hudi/jobs/737741946\r\n\r\nokay","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716167363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716262613","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-716262613","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":716262613,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI2MjYxMw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T02:06:46Z","updated_at":"2020-10-26T02:06:46Z","author_association":"CONTRIBUTOR","body":"Sorry, I am late in reply, I will add unit tests soon\r\n@vinothchandar ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716262613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716290307","html_url":"https://github.com/apache/hudi/pull/2205#issuecomment-716290307","issue_url":"https://api.github.com/repos/apache/hudi/issues/2205","id":716290307,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI5MDMwNw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T04:04:11Z","updated_at":"2020-10-26T04:04:11Z","author_association":"CONTRIBUTOR","body":"@vinothchandar the reason is basically what @lw309637554 mentioned.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716290307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716293969","html_url":"https://github.com/apache/hudi/pull/2092#issuecomment-716293969","issue_url":"https://api.github.com/repos/apache/hudi/issues/2092","id":716293969,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI5Mzk2OQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T04:19:28Z","updated_at":"2020-10-26T04:22:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2092?src=pr&el=h1) Report\n> Merging [#2092](https://codecov.io/gh/apache/hudi/pull/2092?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/49e855c3488ebe53af3a72fc3b5a22ba47a45e01?el=desc) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2092/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2092?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #2092   +/-   ##\n=========================================\n  Coverage     53.68%   53.68%           \n  Complexity     2849     2849           \n=========================================\n  Files           359      359           \n  Lines         16565    16565           \n  Branches       1782     1782           \n=========================================\n  Hits           8893     8893           \n  Misses         6915     6915           \n  Partials        757      757           \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| #hudicli | `38.37% <ø> (ø)` | `193.00 <ø> (ø)` | |\n| #hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| #hudicommon | `54.70% <ø> (ø)` | `1794.00 <ø> (ø)` | |\n| #hudihadoopmr | `33.05% <ø> (ø)` | `181.00 <ø> (ø)` | |\n| #hudispark | `65.95% <ø> (ø)` | `304.00 <ø> (ø)` | |\n| #huditimelineservice | `62.29% <ø> (ø)` | `50.00 <ø> (ø)` | |\n| #hudiutilities | `70.09% <ø> (ø)` | `327.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716293969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716301612","html_url":"https://github.com/apache/hudi/issues/2207#issuecomment-716301612","issue_url":"https://api.github.com/repos/apache/hudi/issues/2207","id":716301612,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMwMTYxMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T04:51:57Z","updated_at":"2020-10-26T04:51:57Z","author_association":"CONTRIBUTOR","body":"@adnanhb : Concurrent writes are writes happening to the same dataset from different spark applications. In your case, without any additional information, I would guess increasing executors would greatly reduce the write time.  Please look at the following FAQ entries for more details -\r\n\r\nhttps://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-Whatperformance/ingestlatencycanIexpectforHudiwriting\r\n\r\nhttps://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-HowdoItoavoidcreatingtonsofsmallfiles","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716301612/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716320954","html_url":"https://github.com/apache/hudi/issues/2204#issuecomment-716320954","issue_url":"https://api.github.com/repos/apache/hudi/issues/2204","id":716320954,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMyMDk1NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:52:44Z","updated_at":"2020-10-26T05:52:44Z","author_association":"CONTRIBUTOR","body":"@BalaMahesh : Can you enable debug logging in hive and run the query and attach the full logs ?\r\n\r\nThanks,\r\nBalaji.V","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716320954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716322522","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-716322522","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":716322522,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMyMjUyMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:56:41Z","updated_at":"2020-10-26T05:56:41Z","author_association":"CONTRIBUTOR","body":"I have seen this issue when partitions are not registered correctly. Can you provide\r\n\r\n1. desc formatted tbl_name\r\n2. describe formatted tbl_name partition (<partition>)\r\n3. Full path of the directory of hudi dataset\r\n4. Full path of the partition of the hudi dataset\r\n5.  Directory listing of the partition \r\n6. Directory listing of .hoodie folder.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716322522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716324906","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-716324906","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":716324906,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMyNDkwNg==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T06:03:06Z","updated_at":"2020-10-26T06:03:06Z","author_association":"CONTRIBUTOR","body":"@wangxianghu Did you check if this PR changes some generator classes' package name? Some classes may exist in the doc.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716324906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716330903","html_url":"https://github.com/apache/hudi/pull/2200#issuecomment-716330903","issue_url":"https://api.github.com/repos/apache/hudi/issues/2200","id":716330903,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMzMDkwMw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T06:19:54Z","updated_at":"2020-10-26T06:19:54Z","author_association":"CONTRIBUTOR","body":"> @wangxianghu Did you check if this PR changes some generator classes' package name? Some classes may exist in the doc.\r\n\r\n@yanghua yes, it's changed.\r\nI have filed a ticket to update the doc(https://issues.apache.org/jira/browse/HUDI-913),  will push it after this pr landed","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716330903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716344693","html_url":"https://github.com/apache/hudi/issues/2204#issuecomment-716344693","issue_url":"https://api.github.com/repos/apache/hudi/issues/2204","id":716344693,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjM0NDY5Mw==","user":{"login":"BalaMahesh","id":25053668,"node_id":"MDQ6VXNlcjI1MDUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/25053668?v=4","gravatar_id":"","url":"https://api.github.com/users/BalaMahesh","html_url":"https://github.com/BalaMahesh","followers_url":"https://api.github.com/users/BalaMahesh/followers","following_url":"https://api.github.com/users/BalaMahesh/following{/other_user}","gists_url":"https://api.github.com/users/BalaMahesh/gists{/gist_id}","starred_url":"https://api.github.com/users/BalaMahesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalaMahesh/subscriptions","organizations_url":"https://api.github.com/users/BalaMahesh/orgs","repos_url":"https://api.github.com/users/BalaMahesh/repos","events_url":"https://api.github.com/users/BalaMahesh/events{/privacy}","received_events_url":"https://api.github.com/users/BalaMahesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T06:52:28Z","updated_at":"2020-10-26T06:52:28Z","author_association":"NONE","body":"I ran this on prod-env , it's not very direct to set the log level to debug and restart all the hive servers in prod . I have to do it in stage / local env to enable the log level to DEBUG mode and share the logs.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716344693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716358283","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-716358283","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":716358283,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjM1ODI4Mw==","user":{"login":"BalaMahesh","id":25053668,"node_id":"MDQ6VXNlcjI1MDUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/25053668?v=4","gravatar_id":"","url":"https://api.github.com/users/BalaMahesh","html_url":"https://github.com/BalaMahesh","followers_url":"https://api.github.com/users/BalaMahesh/followers","following_url":"https://api.github.com/users/BalaMahesh/following{/other_user}","gists_url":"https://api.github.com/users/BalaMahesh/gists{/gist_id}","starred_url":"https://api.github.com/users/BalaMahesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalaMahesh/subscriptions","organizations_url":"https://api.github.com/users/BalaMahesh/orgs","repos_url":"https://api.github.com/users/BalaMahesh/repos","events_url":"https://api.github.com/users/BalaMahesh/events{/privacy}","received_events_url":"https://api.github.com/users/BalaMahesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T07:19:51Z","updated_at":"2020-10-26T07:19:51Z","author_association":"NONE","body":"1)\r\ndesc formatted udfinfo_ro;\r\nOK\r\n# col_name            \tdata_type           \tcomment             \r\n\t \t \r\n_hoodie_commit_time \tstring              \t                    \r\n_hoodie_commit_seqno\tstring              \t                    \r\n_hoodie_record_key  \tstring              \t                    \r\n_hoodie_partition_path\tstring              \t                    \r\n_hoodie_file_name   \tstring              \t                          \t                    \r\nid                  \tbigint              \t                    \r\ncreated_at          \tstring              \t                    \r\nupdated_at          \tstring              \t                                 \t                    \r\ntenant_id           \tint                 \t                    \r\nudf1                \tstring              \t                    \r\nudf2                \tstring              \t                    \r\nudf3                \tstring              \t                    \r\nudf4                \tstring              \t                    \r\nudf5                \tstring              \t                                  \t                    \r\nisdeleted           \tint                 \t                    \r\n\t \t \r\n# Partition Information\t \t \r\n# col_name            \tdata_type           \tcomment             \r\n\t \t \r\ndt                  \tstring              \t                    \r\n\t \t \r\n# Detailed Table Information\t \t \r\nDatabase:           \thudi                \t \r\nOwner:              \tnull                \t \r\nCreateTime:         \tWed Oct 21 12:53:53 IST 2020\t \r\nLastAccessTime:     \tUNKNOWN             \t \r\nProtect Mode:       \tNone                \t \r\nRetention:          \t0                   \t \r\nLocation:           \ts3a://xxxx/test/hudi/data/platform/udfinfo\t \r\nTable Type:         \tEXTERNAL_TABLE      \t \r\nTable Parameters:\t \t \r\n\tEXTERNAL            \tTRUE                \r\n\tlast_commit_time_sync\t20201025012452      \r\n\ttransient_lastDdlTime\t1603265033          \r\n\t \t \r\n# Storage Information\t \t \r\nSerDe Library:      \torg.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\t \r\nInputFormat:        \torg.apache.hudi.hadoop.HoodieParquetInputFormat\t \r\nOutputFormat:       \torg.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\t \r\nCompressed:         \tNo                  \t \r\nNum Buckets:        \t-1                  \t \r\nBucket Columns:     \t[]                  \t \r\nSort Columns:       \t[]                  \t \r\nStorage Desc Params:\t \t \r\n\tserialization.format\t1      \r\n\r\n2) \r\nhive> describe formatted udfinfo_ro partition(dt=\"2020-04-04\");\r\nOK\r\n# col_name            \tdata_type           \tcomment             \r\n\t \t \r\n_hoodie_commit_time \tstring              \t                    \r\n_hoodie_commit_seqno\tstring              \t                    \r\n_hoodie_record_key  \tstring              \t                    \r\n_hoodie_partition_path\tstring              \t                    \r\n_hoodie_file_name   \tstring              \t                                \t                    \r\nid                  \tbigint              \t                    \r\ncreated_at          \tstring              \t                    \r\nupdated_at          \tstring              \t                               \t                    \r\ntenant_id           \tint                 \t                    \r\nudf1                \tstring              \t                    \r\nudf2                \tstring              \t                    \r\nudf3                \tstring              \t                    \r\nudf4                \tstring              \t                    \r\nudf5                \tstring              \t                               \t                    \r\nisdeleted           \tint                 \t                    \r\n\t \t \r\n# Partition Information\t \t \r\n# col_name            \tdata_type           \tcomment             \r\n\t \t \r\ndt                  \tstring              \t                    \r\n\t \t \r\n# Detailed Partition Information\t \t \r\nPartition Value:    \t[2020-04-04]        \t \r\nDatabase:           \thudi                \t \r\nTable:              \tudfinfo_ro\t \r\nCreateTime:         \tSat Oct 24 22:01:25 IST 2020\t \r\nLastAccessTime:     \tUNKNOWN             \t \r\nProtect Mode:       \tNone                \t \r\nLocation:           \ts3a://xxxx/test/hudi/data/platform/udfinfo/dt=2020-04-04\t \r\nPartition Parameters:\t \t \r\n\tCOLUMN_STATS_ACCURATE\tfalse               \r\n\tnumFiles            \t1                   \r\n\tnumRows             \t-1                  \r\n\trawDataSize         \t-1                  \r\n\ttotalSize           \t442191              \r\n\ttransient_lastDdlTime\t1603557085          \r\n\t \t \r\n# Storage Information\t \t \r\nSerDe Library:      \torg.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe\t \r\nInputFormat:        \torg.apache.hudi.hadoop.HoodieParquetInputFormat\t \r\nOutputFormat:       \torg.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat\t \r\nCompressed:         \tNo                  \t \r\nNum Buckets:        \t-1                  \t \r\nBucket Columns:     \t[]                  \t \r\nSort Columns:       \t[]                  \t \r\nStorage Desc Params:\t \t \r\n\tserialization.format\t1                   \r\n\r\n3)\r\ns3a://xxxx/test/hudi/data/platform/udfinfo/\r\n\r\n4)\r\ns3a://xxxx/test/hudi/data/platform/udfinfo/dt=2020-04-04\r\n\r\n5)\r\ndfs -ls s3a://xxx/test/hudi/data/platform/udfinfo/dt=2020-04-04;\r\nFound 2 items\r\n-rw-rw-rw-   1         93 2020-10-24 21:58 s3a://xxx/test/hudi/data/platform/udfinfo/dt=2020-04-04/.hoodie_partition_metadata\r\n-rw-rw-rw-   1     442191 2020-10-24 21:58 s3a://xxx/test/hudi/data/platform/udfinfo/dt=2020-04-04/472eea6d-b9d2-40b0-97b9-cf74e839faba-0_278-355-147155_20201024215013.parquet\r\n\r\n6)\r\n\r\ndrwxrwxrwx   -          0 1970-01-01 05:30 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/.aux\r\ndrwxrwxrwx   -          0 1970-01-01 05:30 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/.temp\r\n-rw-rw-rw-   1       1483 2020-10-22 22:42 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022224048.clean\r\n-rw-rw-rw-   1       1464 2020-10-22 22:42 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022224048.clean.inflight\r\n-rw-rw-rw-   1       1464 2020-10-22 22:42 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022224048.clean.requested\r\n-rw-rw-rw-   1       1483 2020-10-22 22:53 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225151.clean\r\n-rw-rw-rw-   1       1464 2020-10-22 22:53 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225151.clean.inflight\r\n-rw-rw-rw-   1       1464 2020-10-22 22:53 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225151.clean.requested\r\n-rw-rw-rw-   1       1483 2020-10-22 22:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225815.clean\r\n-rw-rw-rw-   1       1464 2020-10-22 22:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225815.clean.inflight\r\n-rw-rw-rw-   1       1464 2020-10-22 22:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201022225815.clean.requested\r\n-rw-rw-rw-   1       1483 2020-10-23 10:44 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023104241.clean\r\n-rw-rw-rw-   1       1464 2020-10-23 10:44 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023104241.clean.inflight\r\n-rw-rw-rw-   1       1464 2020-10-23 10:44 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023104241.clean.requested\r\n-rw-rw-rw-   1       1540 2020-10-23 15:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023152442.clean\r\n-rw-rw-rw-   1       1479 2020-10-23 15:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023152442.clean.inflight\r\n-rw-rw-rw-   1       1479 2020-10-23 15:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201023152442.clean.requested\r\n-rw-rw-rw-   1       1540 2020-10-24 06:11 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061034.clean\r\n-rw-rw-rw-   1       1479 2020-10-24 06:11 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061034.clean.inflight\r\n-rw-rw-rw-   1       1479 2020-10-24 06:11 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061034.clean.requested\r\n-rw-rw-rw-   1       1540 2020-10-24 06:14 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061308.clean\r\n-rw-rw-rw-   1       1479 2020-10-24 06:14 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061308.clean.inflight\r\n-rw-rw-rw-   1       1479 2020-10-24 06:14 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024061308.clean.requested\r\n-rw-rw-rw-   1       1540 2020-10-24 19:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024195819.clean\r\n-rw-rw-rw-   1       1479 2020-10-24 19:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024195819.clean.inflight\r\n-rw-rw-rw-   1       1479 2020-10-24 19:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024195819.clean.requested\r\n-rw-rw-rw-   1       1291 2020-10-24 20:11 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024201122.rollback\r\n-rw-rw-rw-   1          0 2020-10-24 20:11 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024201122.rollback.inflight\r\n-rw-rw-rw-   1      16590 2020-10-24 20:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024201124.clean\r\n-rw-rw-rw-   1       5440 2020-10-24 20:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024201124.clean.inflight\r\n-rw-rw-rw-   1       5440 2020-10-24 20:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024201124.clean.requested\r\n-rw-rw-rw-   1      24036 2020-10-24 20:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.clean\r\n-rw-rw-rw-   1       7521 2020-10-24 20:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.clean.inflight\r\n-rw-rw-rw-   1       7521 2020-10-24 20:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.clean.requested\r\n-rw-rw-rw-   1     247163 2020-10-24 20:33 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.deltacommit\r\n-rw-rw-rw-   1     188642 2020-10-24 20:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 20:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024202421.deltacommit.requested\r\n-rw-rw-rw-   1       8860 2020-10-24 20:38 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203445.commit\r\n-rw-rw-rw-   1          0 2020-10-24 20:36 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203445.compaction.inflight\r\n-rw-rw-rw-   1       5801 2020-10-24 20:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203445.compaction.requested\r\n-rw-rw-rw-   1      43009 2020-10-24 20:47 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.clean\r\n-rw-rw-rw-   1      23899 2020-10-24 20:47 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.clean.inflight\r\n-rw-rw-rw-   1      23899 2020-10-24 20:47 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.clean.requested\r\n-rw-rw-rw-   1     245876 2020-10-24 20:45 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.deltacommit\r\n-rw-rw-rw-   1     206099 2020-10-24 20:39 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 20:36 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024203654.deltacommit.requested\r\n-rw-rw-rw-   1      52387 2020-10-24 20:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.clean\r\n-rw-rw-rw-   1      31371 2020-10-24 20:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.clean.inflight\r\n-rw-rw-rw-   1      31371 2020-10-24 20:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.clean.requested\r\n-rw-rw-rw-   1     246364 2020-10-24 20:56 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.deltacommit\r\n-rw-rw-rw-   1     213359 2020-10-24 20:50 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 20:48 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024204818.deltacommit.requested\r\n-rw-rw-rw-   1      55001 2020-10-24 21:09 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.clean\r\n-rw-rw-rw-   1      31605 2020-10-24 21:09 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.clean.inflight\r\n-rw-rw-rw-   1      31605 2020-10-24 21:09 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.clean.requested\r\n-rw-rw-rw-   1     267488 2020-10-24 21:07 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.deltacommit\r\n-rw-rw-rw-   1     249627 2020-10-24 21:01 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 20:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024205856.deltacommit.requested\r\n-rw-rw-rw-   1      57377 2020-10-24 21:20 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.clean\r\n-rw-rw-rw-   1      32000 2020-10-24 21:20 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.clean.inflight\r\n-rw-rw-rw-   1      32000 2020-10-24 21:20 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.clean.requested\r\n-rw-rw-rw-   1     256334 2020-10-24 21:18 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.deltacommit\r\n-rw-rw-rw-   1     242389 2020-10-24 21:12 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 21:10 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024211018.deltacommit.requested\r\n-rw-rw-rw-   1      60122 2020-10-24 21:31 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.clean\r\n-rw-rw-rw-   1      33583 2020-10-24 21:31 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.clean.inflight\r\n-rw-rw-rw-   1      33583 2020-10-24 21:31 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.clean.requested\r\n-rw-rw-rw-   1     258241 2020-10-24 21:29 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.deltacommit\r\n-rw-rw-rw-   1     232275 2020-10-24 21:23 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 21:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024212109.deltacommit.requested\r\n-rw-rw-rw-   1     121261 2020-10-24 21:40 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213135.commit\r\n-rw-rw-rw-   1          0 2020-10-24 21:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213135.compaction.inflight\r\n-rw-rw-rw-   1      69629 2020-10-24 21:33 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213135.compaction.requested\r\n-rw-rw-rw-   1      75004 2020-10-24 21:49 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.clean\r\n-rw-rw-rw-   1      48155 2020-10-24 21:49 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.clean.inflight\r\n-rw-rw-rw-   1      48155 2020-10-24 21:49 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.clean.requested\r\n-rw-rw-rw-   1     278416 2020-10-24 21:47 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.deltacommit\r\n-rw-rw-rw-   1     261718 2020-10-24 21:41 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 21:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024213528.deltacommit.requested\r\n-rw-rw-rw-   1      70405 2020-10-24 22:00 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.clean\r\n-rw-rw-rw-   1      42191 2020-10-24 22:00 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.clean.inflight\r\n-rw-rw-rw-   1      42191 2020-10-24 22:00 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.clean.requested\r\n-rw-rw-rw-   1     256728 2020-10-24 21:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.deltacommit\r\n-rw-rw-rw-   1     252228 2020-10-24 21:52 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 21:50 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024215013.deltacommit.requested\r\n-rw-rw-rw-   1      67460 2020-10-24 22:12 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.clean\r\n-rw-rw-rw-   1      37774 2020-10-24 22:12 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.clean.inflight\r\n-rw-rw-rw-   1      37774 2020-10-24 22:12 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.clean.requested\r\n-rw-rw-rw-   1     270750 2020-10-24 22:10 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.deltacommit\r\n-rw-rw-rw-   1     258152 2020-10-24 22:04 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 22:01 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024220139.deltacommit.requested\r\n-rw-rw-rw-   1      69020 2020-10-24 22:23 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.clean\r\n-rw-rw-rw-   1      38429 2020-10-24 22:23 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.clean.inflight\r\n-rw-rw-rw-   1      38429 2020-10-24 22:23 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.clean.requested\r\n-rw-rw-rw-   1     260203 2020-10-24 22:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.deltacommit\r\n-rw-rw-rw-   1     247678 2020-10-24 22:15 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 22:13 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024221304.deltacommit.requested\r\n-rw-rw-rw-   1      68493 2020-10-24 22:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.clean\r\n-rw-rw-rw-   1      36710 2020-10-24 22:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.clean.inflight\r\n-rw-rw-rw-   1      36710 2020-10-24 22:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.clean.requested\r\n-rw-rw-rw-   1     280449 2020-10-24 22:32 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.deltacommit\r\n-rw-rw-rw-   1     271186 2020-10-24 22:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 22:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024222402.deltacommit.requested\r\n-rw-rw-rw-   1     232548 2020-10-24 22:45 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223531.commit\r\n-rw-rw-rw-   1          0 2020-10-24 22:37 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223531.compaction.inflight\r\n-rw-rw-rw-   1     129834 2020-10-24 22:37 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223531.compaction.requested\r\n-rw-rw-rw-   1     103805 2020-10-24 22:56 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.clean\r\n-rw-rw-rw-   1      72989 2020-10-24 22:55 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.clean.inflight\r\n-rw-rw-rw-   1      72989 2020-10-24 22:55 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.clean.requested\r\n-rw-rw-rw-   1     261991 2020-10-24 22:53 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.deltacommit\r\n-rw-rw-rw-   1     248191 2020-10-24 22:46 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 22:37 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024223749.deltacommit.requested\r\n-rw-rw-rw-   1      84058 2020-10-24 23:09 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.clean\r\n-rw-rw-rw-   1      51335 2020-10-24 23:08 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.clean.inflight\r\n-rw-rw-rw-   1      51335 2020-10-24 23:08 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.clean.requested\r\n-rw-rw-rw-   1     287687 2020-10-24 23:06 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.deltacommit\r\n-rw-rw-rw-   1     240213 2020-10-24 22:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 22:56 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024225618.deltacommit.requested\r\n-rw-rw-rw-   1      84696 2020-10-24 23:22 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.clean\r\n-rw-rw-rw-   1      51153 2020-10-24 23:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.clean.inflight\r\n-rw-rw-rw-   1      51153 2020-10-24 23:21 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.clean.requested\r\n-rw-rw-rw-   1     340344 2020-10-24 23:19 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.deltacommit\r\n-rw-rw-rw-   1     278295 2020-10-24 23:12 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 23:09 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024230917.deltacommit.requested\r\n-rw-rw-rw-   1      79696 2020-10-24 23:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.clean\r\n-rw-rw-rw-   1      45309 2020-10-24 23:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.clean.inflight\r\n-rw-rw-rw-   1      45309 2020-10-24 23:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.clean.requested\r\n-rw-rw-rw-   1     314247 2020-10-24 23:31 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.deltacommit\r\n-rw-rw-rw-   1     262662 2020-10-24 23:25 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 23:22 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024232220.deltacommit.requested\r\n-rw-rw-rw-   1      78586 2020-10-24 23:48 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.clean\r\n-rw-rw-rw-   1      43673 2020-10-24 23:48 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.clean.inflight\r\n-rw-rw-rw-   1      43673 2020-10-24 23:48 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.clean.requested\r\n-rw-rw-rw-   1     344478 2020-10-24 23:45 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.deltacommit\r\n-rw-rw-rw-   1     280170 2020-10-24 23:38 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 23:34 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024233457.deltacommit.requested\r\n-rw-rw-rw-   1     267181 2020-10-25 00:03 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024234832.commit\r\n-rw-rw-rw-   1          0 2020-10-24 23:51 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024234832.compaction.inflight\r\n-rw-rw-rw-   1     161578 2020-10-24 23:51 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024234832.compaction.requested\r\n-rw-rw-rw-   1     116432 2020-10-25 00:19 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.clean\r\n-rw-rw-rw-   1      82509 2020-10-25 00:18 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.clean.inflight\r\n-rw-rw-rw-   1      82509 2020-10-25 00:18 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.clean.requested\r\n-rw-rw-rw-   1     375112 2020-10-25 00:15 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.deltacommit\r\n-rw-rw-rw-   1     306974 2020-10-25 00:06 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-24 23:51 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201024235122.deltacommit.requested\r\n-rw-rw-rw-   1      85075 2020-10-25 00:39 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.clean\r\n-rw-rw-rw-   1      49052 2020-10-25 00:38 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.clean.inflight\r\n-rw-rw-rw-   1      49052 2020-10-25 00:38 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.clean.requested\r\n-rw-rw-rw-   1     347734 2020-10-25 00:35 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.deltacommit\r\n-rw-rw-rw-   1     308098 2020-10-25 00:26 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-25 00:19 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025001932.deltacommit.requested\r\n-rw-rw-rw-   1      90054 2020-10-25 01:01 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.clean\r\n-rw-rw-rw-   1      53688 2020-10-25 01:00 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.clean.inflight\r\n-rw-rw-rw-   1      53688 2020-10-25 01:00 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.clean.requested\r\n-rw-rw-rw-   1     356835 2020-10-25 00:57 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.deltacommit\r\n-rw-rw-rw-   1     317327 2020-10-25 00:47 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-25 00:39 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025003925.deltacommit.requested\r\n-rw-rw-rw-   1      83010 2020-10-25 01:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.clean\r\n-rw-rw-rw-   1      45704 2020-10-25 01:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.clean.inflight\r\n-rw-rw-rw-   1      45704 2020-10-25 01:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.clean.requested\r\n-rw-rw-rw-   1     322459 2020-10-25 01:20 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.deltacommit\r\n-rw-rw-rw-   1     286334 2020-10-25 01:10 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-25 01:01 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025010134.deltacommit.requested\r\n-rw-rw-rw-   1      90374 2020-10-25 01:55 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.clean\r\n-rw-rw-rw-   1      52922 2020-10-25 01:54 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.clean.inflight\r\n-rw-rw-rw-   1      52922 2020-10-25 01:54 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.clean.requested\r\n-rw-rw-rw-   1     332491 2020-10-25 01:50 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.deltacommit\r\n-rw-rw-rw-   1     292832 2020-10-25 01:36 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.deltacommit.inflight\r\n-rw-rw-rw-   1          0 2020-10-25 01:24 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025012452.deltacommit.requested\r\n-rw-rw-rw-   1          0 2020-10-25 01:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025015502.compaction.inflight\r\n-rw-rw-rw-   1     216721 2020-10-25 01:58 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025015502.compaction.requested\r\n-rw-rw-rw-   1          0 2020-10-25 01:59 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/20201025015904.deltacommit.requested\r\ndrwxrwxrwx   -          0 1970-01-01 05:30 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/archived\r\n-rw-rw-rw-   1        381 2020-10-21 12:50 s3a://xxxx/test/hudi/data/platform/udfinfo/.hoodie/hoodie.properties","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716358283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716615631","html_url":"https://github.com/apache/hudi/issues/2201#issuecomment-716615631","issue_url":"https://api.github.com/repos/apache/hudi/issues/2201","id":716615631,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjYxNTYzMQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T15:16:44Z","updated_at":"2020-10-26T15:16:44Z","author_association":"CONTRIBUTOR","body":"@getniz You can perform time-travel queries using _hoodie_commit_time and achieve your use case of Q1 inventory vs Q2 inventory. It would look something like this -> \r\n1) ingest_data_for_Q1 with some commit_time\r\n2) ingest_data_for_Q2 with some new commit_time\r\n3) Query against registered tables with begin & end commit instants to limit the data against the commit time\r\n\r\nUsing Spark\r\n\r\n```\r\nDataset<Row> hudiIncQueryDF = spark.read()\r\n     .format(\"org.apache.hudi\")\r\n     .option(DataSourceReadOptions.QUERY_TYPE_OPT_KEY(), DataSourceReadOptions.QUERY_TYPE_INCREMENTAL_OPT_VAL())\r\n     .option(DataSourceReadOptions.BEGIN_INSTANTTIME_OPT_KEY(), <beginInstantTime>)\r\n     .option(DataSourceReadOptions.END_INSTANTTIME_OPT_KEY(), <endInstantTime>)\r\n     .option(DataSourceReadOptions.INCR_PATH_GLOB_OPT_KEY(), \"/year=2020/month=*/day=*\") // Optional, use glob pattern if querying certain partitions\r\n     .load(tablePath); // For incremental query, pass in the root/base path of table\r\n     \r\nhudiIncQueryDF.createOrReplaceTempView(\"hudi_trips_incremental\")\r\nspark.sql(\"select `_hoodie_commit_time`, fare, begin_lon, begin_lat, ts from  hudi_trips_incremental where fare > 20.0\").show()\r\n```\r\nUsing Hive\r\n\r\n```\r\nhive_shell> set hoodie.source_table_name.consume.mode=incremental\r\nhive_shell> set hoodie.table_name.consume.start.timestamp=<beginInstantTime>\r\nconvert_endInstantTime_to_num_commits_to_read=5\r\nhive_shell> set hoodie.table_name.consume.max.commits=5\r\nhive_shell> select `_hoodie_commit_time`, fare, begin_lon, begin_lat, ts from  source_table_name where fare > 20.0\r\n```\r\n\r\nNow, if you have deletes, currently HUDI will only apply those changes to the latest \"view\" of this data. So, it will look like this\r\n4) ingest_data_for_deletes with some new commit_time\r\nNow, using this new commit_time you can time travel to Q1 or Q2 or (Q1+Q2+deletes). \r\n\r\nIs that what you're looking for ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716615631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716642421","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-716642421","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":716642421,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjY0MjQyMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T15:55:17Z","updated_at":"2020-10-26T15:55:17Z","author_association":"CONTRIBUTOR","body":"@BalaMahesh : Is your empty query of the form :  select * from _ro where dt=\"2020-04-04\" ?\r\n\r\nCan you also find the unique partition paths that is stored in Hudi - \"select dictinct(`_hoodie_partition_path`) from _ro\". Can you copy the output here. Does this match with the query filter you are passing ? Also, Are these values consistent with partition values in hive metastore ? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716642421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716713865","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-716713865","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":716713865,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjcxMzg2NQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T17:41:51Z","updated_at":"2020-10-26T17:41:51Z","author_association":"CONTRIBUTOR","body":"@spyzzz : Sorry for the delay. I guess the commit metadata that you pasted was part of the initial bootstrap of the rows sent by debezium. You have 2 kinds of workloads - \r\n1. Snapshot of the mysql table where there won't be duplicates but this will be throughput intensive.\r\n2. CDC of your mysql table containing new inserts/updates and deletes.\r\n\r\nThose are very different workloads with (1) happening only once (or whenever you need to re-bootstrap) and then (2) being the steady state. They need different different configurations for optimal performance  Insert vs upsert.  In the steady state (after initial snapshot), Are you able to see steady performance. Your last comment seems to indicate that the write time is holding up and not increasing. Is this correct ?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716713865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716757315","html_url":"https://github.com/apache/hudi/issues/2201#issuecomment-716757315","issue_url":"https://api.github.com/repos/apache/hudi/issues/2201","id":716757315,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjc1NzMxNQ==","user":{"login":"getniz","id":29088488,"node_id":"MDQ6VXNlcjI5MDg4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/29088488?v=4","gravatar_id":"","url":"https://api.github.com/users/getniz","html_url":"https://github.com/getniz","followers_url":"https://api.github.com/users/getniz/followers","following_url":"https://api.github.com/users/getniz/following{/other_user}","gists_url":"https://api.github.com/users/getniz/gists{/gist_id}","starred_url":"https://api.github.com/users/getniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/getniz/subscriptions","organizations_url":"https://api.github.com/users/getniz/orgs","repos_url":"https://api.github.com/users/getniz/repos","events_url":"https://api.github.com/users/getniz/events{/privacy}","received_events_url":"https://api.github.com/users/getniz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T18:58:40Z","updated_at":"2020-10-26T18:58:40Z","author_association":"NONE","body":"Thank you for the detail response @n3nash , in above  hive query is there a easy way to determine number of commits for a particular end timestamp. For deletes let me put an example here, assume I have 6 rows as below. If the record for Feb 2019 is deleted on May 2020. With that being said, If I run a report for Jan to Mar 2019 Sales vs Jan to Mar 2020 Sales will the Feb 2019 sales record be included in the total sales? Or it will consider the delete and the feb 2019 sales will be excluded in the total sales?  \r\nMonth|Yr|Sales|hoodie_commit_ts\r\nJan,2019,$9000,Feb 28\r\nFeb,2019,$5000,Mar 31\r\nMar,2019,$4000,Apr 30\r\nJan,2020,$3500,Feb 28\r\nFeb,2020,$2000,Mar 31\r\nMar,2020,$6000,Apr 30\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716757315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716762480","html_url":"https://github.com/apache/hudi/issues/2201#issuecomment-716762480","issue_url":"https://api.github.com/repos/apache/hudi/issues/2201","id":716762480,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjc2MjQ4MA==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T19:08:23Z","updated_at":"2020-10-26T19:08:23Z","author_association":"NONE","body":"@getniz are u looking for something like this? ```SELECT count(*) FROM my_table TIMESTAMP AS OF \"2019-01-01 01:30:00.000\"```. https://databricks.com/blog/2019/02/04/introducing-delta-time-travel-for-large-scale-data-lakes.html","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716762480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716798234","html_url":"https://github.com/apache/hudi/pull/2198#issuecomment-716798234","issue_url":"https://api.github.com/repos/apache/hudi/issues/2198","id":716798234,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjc5ODIzNA==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T20:17:15Z","updated_at":"2020-10-26T20:17:42Z","author_association":"CONTRIBUTOR","body":"@umehrot2 @vinothchandar Note that this PR just aims to show all the required changes we need to make to support 3 and it is not compatible with Spark2.\r\n\r\nI created a new PR which is compatible with both Spark 2 & Spark 3. Please check it here: https://github.com/apache/hudi/pull/2208.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716798234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716814642","html_url":"https://github.com/apache/hudi/issues/2193#issuecomment-716814642","issue_url":"https://api.github.com/repos/apache/hudi/issues/2193","id":716814642,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjgxNDY0Mg==","user":{"login":"spyzzz","id":5584892,"node_id":"MDQ6VXNlcjU1ODQ4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5584892?v=4","gravatar_id":"","url":"https://api.github.com/users/spyzzz","html_url":"https://github.com/spyzzz","followers_url":"https://api.github.com/users/spyzzz/followers","following_url":"https://api.github.com/users/spyzzz/following{/other_user}","gists_url":"https://api.github.com/users/spyzzz/gists{/gist_id}","starred_url":"https://api.github.com/users/spyzzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spyzzz/subscriptions","organizations_url":"https://api.github.com/users/spyzzz/orgs","repos_url":"https://api.github.com/users/spyzzz/repos","events_url":"https://api.github.com/users/spyzzz/events{/privacy}","received_events_url":"https://api.github.com/users/spyzzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T20:49:20Z","updated_at":"2020-10-26T20:49:20Z","author_association":"NONE","body":"Yes you're right, the metadata i gave you was from the initial boostraps. \r\n\r\nSo yes, i've two differents workloads, you sum'up it pretty cleary. Except that, for the (1) it might be possible to get update in the initial bootstrap (its wasnt the case for the files i gave you) but that's why i can't use BULK_INSERT mode. \r\nWith the fews configuration tips you gave me, i'm able to keep pretty linear time for each 5Millions rows batch so yes its better.\r\nI'm around 500K rows/min (i don't really know if its correct or not) with a 6 partitions kafka topics.\r\n\r\nFor the (2), in CDC mode yes, i've a lot less rows, but i've to do update pretty often (let says every 10min), I tried this afternoon, and i'm able to handle a 10min micro batch in 2min or so. (and the hudi output stay pretty acceptable, not too many files, every 10 delta file, hudi create a -40/70Mb parquet file \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716814642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716977933","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-716977933","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":716977933,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjk3NzkzMw==","user":{"login":"BalaMahesh","id":25053668,"node_id":"MDQ6VXNlcjI1MDUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/25053668?v=4","gravatar_id":"","url":"https://api.github.com/users/BalaMahesh","html_url":"https://github.com/BalaMahesh","followers_url":"https://api.github.com/users/BalaMahesh/followers","following_url":"https://api.github.com/users/BalaMahesh/following{/other_user}","gists_url":"https://api.github.com/users/BalaMahesh/gists{/gist_id}","starred_url":"https://api.github.com/users/BalaMahesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalaMahesh/subscriptions","organizations_url":"https://api.github.com/users/BalaMahesh/orgs","repos_url":"https://api.github.com/users/BalaMahesh/repos","events_url":"https://api.github.com/users/BalaMahesh/events{/privacy}","received_events_url":"https://api.github.com/users/BalaMahesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T04:46:22Z","updated_at":"2020-10-27T04:46:55Z","author_association":"NONE","body":"@bvaradar : Yes the query is in that form \r\n\r\nselect distinct(_hoodie_partition_path) from _ro : \r\nResult : \r\ndt=2020-03-13\r\ndt=2020-03-14\r\ndt=2020-03-15\r\ndt=2020-03-16\r\ndt=2020-03-17\r\ndt=2020-03-18\r\ndt=2020-03-19\r\ndt=2020-03-20\r\ndt=2020-03-21\r\ndt=2020-03-22\r\ndt=2020-03-23\r\ndt=2020-03-24\r\ndt=2020-03-26\r\ndt=2020-03-27\r\ndt=2020-04-01\r\ndt=2020-04-04\r\ndt=2020-04-09\r\ndt=2020-04-10\r\ndt=2020-04-11\r\ndt=2020-04-13\r\ndt=2020-04-20\r\ndt=2020-04-25\r\ndt=2020-04-27\r\ndt=2020-05-03\r\ndt=2020-05-04\r\ndt=2020-05-16\r\ndt=2020-05-17\r\ndt=2020-05-18\r\ndt=2020-05-19\r\ndt=2020-05-21\r\ndt=2020-05-22\r\ndt=2020-05-23\r\ndt=2020-05-25\r\ndt=2020-05-26\r\ndt=2020-05-27\r\ndt=2020-05-28\r\ndt=2020-05-29\r\ndt=2020-05-30\r\ndt=2020-05-31\r\ndt=2020-06-01\r\ndt=2020-06-02\r\ndt=2020-06-03\r\ndt=2020-06-04\r\n\r\nShow partitions : \r\n\r\nresult : \r\ndt=2020-03-13\r\ndt=2020-03-14\r\ndt=2020-03-15\r\ndt=2020-03-16\r\ndt=2020-03-17\r\ndt=2020-03-18\r\ndt=2020-03-19\r\ndt=2020-03-20\r\ndt=2020-03-21\r\ndt=2020-03-22\r\ndt=2020-03-23\r\ndt=2020-03-24\r\ndt=2020-03-26\r\ndt=2020-03-27\r\ndt=2020-04-01\r\ndt=2020-04-04\r\ndt=2020-04-09\r\ndt=2020-04-10\r\ndt=2020-04-11\r\ndt=2020-04-13\r\ndt=2020-04-20\r\ndt=2020-04-25\r\ndt=2020-04-27\r\ndt=2020-05-03\r\ndt=2020-05-04\r\ndt=2020-05-16\r\ndt=2020-05-17\r\ndt=2020-05-18\r\ndt=2020-05-19\r\ndt=2020-05-21\r\ndt=2020-05-22\r\ndt=2020-05-23\r\ndt=2020-05-25\r\ndt=2020-05-26\r\ndt=2020-05-27\r\ndt=2020-05-28\r\ndt=2020-05-29\r\ndt=2020-05-30\r\ndt=2020-05-31\r\ndt=2020-06-01\r\ndt=2020-06-02\r\ndt=2020-06-03\r\ndt=2020-06-04\r\n\r\nFrom the results I can see that there is consistency .\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/716977933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717046074","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-717046074","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":717046074,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzA0NjA3NA==","user":{"login":"rahulpoptani","id":20492557,"node_id":"MDQ6VXNlcjIwNDkyNTU3","avatar_url":"https://avatars.githubusercontent.com/u/20492557?v=4","gravatar_id":"","url":"https://api.github.com/users/rahulpoptani","html_url":"https://github.com/rahulpoptani","followers_url":"https://api.github.com/users/rahulpoptani/followers","following_url":"https://api.github.com/users/rahulpoptani/following{/other_user}","gists_url":"https://api.github.com/users/rahulpoptani/gists{/gist_id}","starred_url":"https://api.github.com/users/rahulpoptani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahulpoptani/subscriptions","organizations_url":"https://api.github.com/users/rahulpoptani/orgs","repos_url":"https://api.github.com/users/rahulpoptani/repos","events_url":"https://api.github.com/users/rahulpoptani/events{/privacy}","received_events_url":"https://api.github.com/users/rahulpoptani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T07:28:51Z","updated_at":"2020-10-27T07:28:51Z","author_association":"NONE","body":"@vinothchandar I'm not facing jetty issue but I gave the master built a try and got another issue while reading (both snapshot and read optimized)\r\nHere is the error:\r\n`java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/util/Bytes\r\n\tat org.apache.hudi.common.bootstrap.index.HFileBootstrapIndex.<clinit>(HFileBootstrapIndex.java:92)\r\n\tat java.lang.Class.forName0(Native Method)\r\n\tat java.lang.Class.forName(Class.java:264)\r\n\tat org.apache.hudi.common.util.ReflectionUtils.getClass(ReflectionUtils.java:53)\r\n\tat org.apache.hudi.common.util.ReflectionUtils.loadClass(ReflectionUtils.java:87)\r\n\tat org.apache.hudi.common.util.ReflectionUtils.loadClass(ReflectionUtils.java:98)\r\n\tat org.apache.hudi.common.bootstrap.index.BootstrapIndex.getBootstrapIndex(BootstrapIndex.java:159)\r\n\tat org.apache.hudi.common.table.view.AbstractTableFileSystemView.init(AbstractTableFileSystemView.java:100)\r\n\tat org.apache.hudi.common.table.view.HoodieTableFileSystemView.init(HoodieTableFileSystemView.java:95)\r\n\tat org.apache.hudi.common.table.view.HoodieTableFileSystemView.<init>(HoodieTableFileSystemView.java:89)\r\n\tat org.apache.hudi.common.table.view.HoodieTableFileSystemView.<init>(HoodieTableFileSystemView.java:80)\r\n\tat org.apache.hudi.common.table.view.HoodieTableFileSystemView.<init>(HoodieTableFileSystemView.java:130)\r\n\tat org.apache.hudi.hadoop.HoodieROTablePathFilter.accept(HoodieROTablePathFilter.java:167)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$$anonfun$16.apply(InMemoryFileIndex.scala:353)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$$anonfun$16.apply(InMemoryFileIndex.scala:353)\r\n\tat scala.collection.TraversableLike$$anonfun$filterImpl$1.apply(TraversableLike.scala:248)\r\n\tat scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\r\n\tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\r\n\tat scala.collection.TraversableLike$class.filterImpl(TraversableLike.scala:247)\r\n\tat scala.collection.TraversableLike$class.filter(TraversableLike.scala:259)\r\n\tat scala.collection.AbstractTraversable.filter(Traversable.scala:104)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$.org$apache$spark$sql$execution$datasources$InMemoryFileIndex$$listLeafFiles(InMemoryFileIndex.scala:353)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$$anonfun$bulkListLeafFiles$2.apply(InMemoryFileIndex.scala:264)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$$anonfun$bulkListLeafFiles$2.apply(InMemoryFileIndex.scala:263)\r\n\tat scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n\tat scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n\tat scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\r\n\tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\r\n\tat scala.collection.TraversableLike$class.map(TraversableLike.scala:234)\r\n\tat scala.collection.AbstractTraversable.map(Traversable.scala:104)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex$.bulkListLeafFiles(InMemoryFileIndex.scala:263)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex.listLeafFiles(InMemoryFileIndex.scala:130)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex.refresh0(InMemoryFileIndex.scala:94)\r\n\tat org.apache.spark.sql.execution.datasources.InMemoryFileIndex.<init>(InMemoryFileIndex.scala:70)\r\n\tat org.apache.spark.sql.execution.datasources.DataSource.org$apache$spark$sql$execution$datasources$DataSource$$createInMemoryFileIndex(DataSource.scala:589)\r\n\tat org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:419)\r\n\tat org.apache.hudi.DefaultSource.getBaseFileOnlyView(DefaultSource.scala:172)\r\n\tat org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:93)\r\n\tat org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:51)\r\n\tat org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:351)\r\n\tat org.apache.spark.sql.DataFrameReader.loadV1Source(DataFrameReader.scala:311)\r\n\tat org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:297)\r\n\tat org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:214)`\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717046074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717377743","html_url":"https://github.com/apache/hudi/issues/2180#issuecomment-717377743","issue_url":"https://api.github.com/repos/apache/hudi/issues/2180","id":717377743,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzM3Nzc0Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T16:48:26Z","updated_at":"2020-10-27T16:48:26Z","author_association":"CONTRIBUTOR","body":"@rahulpoptani : Are you using hudi-spark-bundle jar ? \r\n\r\ncc @rmpifer @umehrot2 @bhasudha  who have handled hbase shading recently. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717377743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717408603","html_url":"https://github.com/apache/hudi/issues/2203#issuecomment-717408603","issue_url":"https://api.github.com/repos/apache/hudi/issues/2203","id":717408603,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzQwODYwMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T17:37:38Z","updated_at":"2020-10-27T17:37:38Z","author_association":"CONTRIBUTOR","body":"@BalaMahesh : Yeah, they are both consistent. The usual suspects are all fine. The best way to debug is to have some kind of session logging enabled for this hive query and see what hive and hudi does. Another thing is to use spark to directly load the parquet file and look at the record contents to confirm if the parquet file has 1 record. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717408603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717643613","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-717643613","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":717643613,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzY0MzYxMw==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T01:49:41Z","updated_at":"2020-10-28T01:49:41Z","author_association":"CONTRIBUTOR","body":"> @Karl-WangSK We need some more thinking to resolve the pending issues I think.\r\n> \r\n> > Only the classes that I just added in this PR will take advantage of it.\r\n> \r\n> I am thinking about how we can safely make this the only API the Hudi code calls. TOL, existing payload classes will have just `precombine(payload)` defined and not the new `preCombine(payload, schema)` API method. But, the default method will help existing payloads not break and work? (I think so. would be good to confirm)\r\n> \r\n> > But one problem is that all payload will parse the schema every record whether it needs or not.It will affect performance.\r\n> \r\n> Now, we can think about how to perf issue. We can parse it once on the driver and then send it across. but issue is `Schema` is not serializable. But I think we can solve this, by wrapping Schema in a `SerializableAvroSchema` class (see how its done in `SerializableConfiguration`). This way we will send a Schema as a string to the executor and then reconstruct the object again on the executor.\r\n> \r\n> Are you able to attempt this. (else I ll try. might take bit of time.please let me know)\r\n\r\nI will try.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717643613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717655063","html_url":"https://github.com/apache/hudi/pull/2192#issuecomment-717655063","issue_url":"https://api.github.com/repos/apache/hudi/issues/2192","id":717655063,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzY1NTA2Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T02:29:16Z","updated_at":"2020-11-18T14:02:00Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2192?src=pr&el=h1) Report\n> Merging [#2192](https://codecov.io/gh/apache/hudi/pull/2192?src=pr&el=desc) (1e2bfd1) into [master](https://codecov.io/gh/apache/hudi/commit/7fa641ea9ad2318b185f8492964b30ebc90759b0?el=desc) (7fa641e) will **decrease** coverage by `43.27%`.\n> The diff coverage is `0.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2192/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2192?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #2192       +/-   ##\n=============================================\n- Coverage     53.62%   10.34%   -43.28%     \n+ Complexity     2848       48     -2800     \n=============================================\n  Files           359       51      -308     \n  Lines         16553     1788    -14765     \n  Branches       1780      213     -1567     \n=============================================\n- Hits           8876      185     -8691     \n+ Misses         6918     1590     -5328     \n+ Partials        759       13      -746     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudispark | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `10.34% <0.00%> (-59.74%)` | `0.00 <0.00> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2192?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...in/java/org/apache/hudi/utilities/UtilHelpers.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL1V0aWxIZWxwZXJzLmphdmE=) | `35.54% <0.00%> (-29.06%)` | `11.00 <0.00> (-19.00)` | |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `0.00% <ø> (-69.55%)` | `0.00 <0.00> (-18.00)` | |\n| [.../hudi/utilities/schema/SparkAvroPostProcessor.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TcGFya0F2cm9Qb3N0UHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-3.00%)` | |\n| [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-10.00%)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| ... and [341 more](https://codecov.io/gh/apache/hudi/pull/2192/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717655063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717667890","html_url":"https://github.com/apache/hudi/pull/2199#issuecomment-717667890","issue_url":"https://api.github.com/repos/apache/hudi/issues/2199","id":717667890,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzY2Nzg5MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T03:12:54Z","updated_at":"2020-10-28T03:12:54Z","author_association":"MEMBER","body":"@satishkotha @n3nash you guys can take this as well? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/717667890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]