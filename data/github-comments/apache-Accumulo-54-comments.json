[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/712868845","html_url":"https://github.com/apache/accumulo/pull/1738#issuecomment-712868845","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1738","id":712868845,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjg2ODg0NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T13:55:16Z","updated_at":"2020-10-20T15:44:30Z","author_association":"CONTRIBUTOR","body":"I pulled down these changes to test #1739 against and I am running into a bug trying to create a table with accumulo-testing. The second error message seems to be the cause.\r\nThe errors are: \r\n~~~\r\nException in thread \"main\" org.apache.accumulo.core.client.AccumuloException: Internal error processing executeFateOperation\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:403)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:355)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doTableFateOperation(TableOperationsImpl.java:1694)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.create(TableOperationsImpl.java:246)\r\n\tat org.apache.accumulo.testing.continuous.CreateTable.main(CreateTable.java:75)\r\nCaused by: org.apache.thrift.TApplicationException: Internal error processing executeFateOperation\r\n\tat org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79)\r\n\tat org.apache.accumulo.core.master.thrift.FateService$Client.recv_executeFateOperation(FateService.java:126)\r\n\tat org.apache.accumulo.core.master.thrift.FateService$Client.executeFateOperation(FateService.java:107)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.executeFateOperation(TableOperationsImpl.java:282)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:366)\r\n\r\n~~~\r\n\r\n~~~\r\njava.lang.IllegalArgumentException: Cannot prefix absolute path /tmp/fate-59b113bfcd65d4d9 with this volume\r\n\tat org.apache.accumulo.core.volume.VolumeImpl.prefixChild(VolumeImpl.java:127)\r\n\tat org.apache.accumulo.master.FateServiceHandler.mkTempDir(FateServiceHandler.java:811)\r\n\tat org.apache.accumulo.master.MasterClientServiceHandler.mkTempDir(MasterClientServiceHandler.java:104)\r\n\tat org.apache.accumulo.master.FateServiceHandler.executeFateOperation(FateServiceHandler.java:177)\r\n\tat org.apache.accumulo.master.MasterClientServiceHandler.executeFateOperation(MasterClientServiceHandler.java:104)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.apache.accumulo.server.rpc.HighlyAvailableServiceInvocationHandler.invoke(HighlyAvailableServiceInvocationHandler.java:57)\r\n\tat com.sun.proxy.$Proxy38.executeFateOperation(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.apache.accumulo.core.trace.TraceUtil.lambda$wrapService$6(TraceUtil.java:235)\r\n\tat com.sun.proxy.$Proxy38.executeFateOperation(Unknown Source)\r\n\tat org.apache.accumulo.core.master.thrift.FateService$Processor$executeFateOperation.getResult(FateService.java:453)\r\n\tat org.apache.accumulo.core.master.thrift.FateService$Processor$executeFateOperation.getResult(FateService.java:432)\r\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:38)\r\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\r\n\tat org.apache.accumulo.server.rpc.TimedProcessor.process(TimedProcessor.java:63)\r\n\tat org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:518)\r\n\tat org.apache.accumulo.server.rpc.CustomNonBlockingServer$CustomFrameBuffer.invoke(CustomNonBlockingServer.java:114)\r\n\tat org.apache.thrift.server.Invocation.run(Invocation.java:18)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.apache.accumulo.fate.util.LoggingRunnable.run(LoggingRunnable.java:37)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n~~~","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/712868845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/712951839","html_url":"https://github.com/apache/accumulo/pull/1738#issuecomment-712951839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1738","id":712951839,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjk1MTgzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T15:52:18Z","updated_at":"2020-10-20T15:52:18Z","author_association":"MEMBER","body":"> I pulled down these changes to test #1739 against and I am running into a bug trying to create a table with accumulo-testing. The second error message seems to be the cause.\r\n\r\nThanks for taking a look. I think this is the same error that's affecting the broken tests above. I will be working on fixing this today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/712951839/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713170867","html_url":"https://github.com/apache/accumulo/pull/1738#issuecomment-713170867","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1738","id":713170867,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzE3MDg2Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T22:14:20Z","updated_at":"2020-10-20T22:14:20Z","author_association":"MEMBER","body":"I believe I have fixed the bug. It was a trivial mistake of the type `var y = f(x); use x` should have been `var y = f(x); use y`. However, I took the opportunity to add some more test cases, and I fixed a problem with `VolumeImpl.toString()`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713170867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713418363","html_url":"https://github.com/apache/accumulo/pull/1738#issuecomment-713418363","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1738","id":713418363,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzQxODM2Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T08:55:39Z","updated_at":"2020-10-21T08:55:39Z","author_association":"MEMBER","body":"All ITs pass now. Merging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713418363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713607356","html_url":"https://github.com/apache/accumulo/pull/1715#issuecomment-713607356","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1715","id":713607356,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzYwNzM1Ng==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T14:12:31Z","updated_at":"2020-10-21T14:12:31Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I addressed some of the comments you made, others were OBE based on changes I made after the fact. Things are working now and this is out of draft state if you are interested in making another pass.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713607356/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713710763","html_url":"https://github.com/apache/accumulo/issues/1747#issuecomment-713710763","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1747","id":713710763,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzcxMDc2Mw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T16:47:22Z","updated_at":"2020-10-21T16:48:53Z","author_association":"CONTRIBUTOR","body":"Related `accumulo-classloaders` PR is https://github.com/apache/accumulo-classloaders/pull/3 and the test process is at https://github.com/dlmarion/accumulo-classloaders/blob/vfs-class-loaders/modules/vfs-class-loader/TESTING.md","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713710763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713876034","html_url":"https://github.com/apache/accumulo/pull/1649#issuecomment-713876034","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1649","id":713876034,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzg3NjAzNA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T21:03:21Z","updated_at":"2020-10-21T21:03:21Z","author_association":"CONTRIBUTOR","body":"@EdColeman @milleruntime @ctubbsii I would like to merge this before it ends up w/ conflicts.  I think I addressed all comments.  Did I miss anything or where there any other questions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713876034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713905190","html_url":"https://github.com/apache/accumulo/pull/1649#issuecomment-713905190","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1649","id":713905190,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzkwNTE5MA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T22:08:52Z","updated_at":"2020-10-21T22:08:52Z","author_association":"CONTRIBUTOR","body":"From what I had looked at, you answered the concerns that I had.  It seemed like you were going to try to manually examine the metrics emitted, do you have a chance?  More out of curiosity, I'm not suggesting that it needs to hold this up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/713905190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714560875","html_url":"https://github.com/apache/accumulo/pull/1596#issuecomment-714560875","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1596","id":714560875,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDU2MDg3NQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T15:09:07Z","updated_at":"2020-10-22T15:09:07Z","author_association":"CONTRIBUTOR","body":"I have 2 PRs in for Datawave where they are using IteratorUtil.loadIterators. Looking at how they were using the code, they were loading iterator classes via `Class.forName()` and initializing them. IMO, this can be closed and not merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714560875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714565022","html_url":"https://github.com/apache/accumulo/issues/1730#issuecomment-714565022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1730","id":714565022,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDU2NTAyMg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T15:15:26Z","updated_at":"2020-10-22T15:15:26Z","author_association":"CONTRIBUTOR","body":"In #1715 I modified how classes are loaded and all of the server side code uses [ClassLoaderUtil.loadClass()](https://github.com/apache/accumulo/pull/1715/files#diff-f8f44086240fb20a620240b6428fae288d4faf2851ddf348cf8e1c6e17edc693R25) which is not `synchonized`. If the table has a context defined, the `loadClass` operation is not `synchronized` either. Without a context the code still uses `AccumuloVFSClassLoader.loadClass` and will be `synchronized` until it's removal in a future release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714565022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714565226","html_url":"https://github.com/apache/accumulo/pull/1596#issuecomment-714565226","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1596","id":714565226,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDU2NTIyNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T15:15:45Z","updated_at":"2020-10-22T15:15:45Z","author_association":"MEMBER","body":"Based on @dlmarion 's comment about the status of Datawave, implying that they don't need this API, I'm closing this. We can re-open if it is determined that something like this would be clearly beneficial in the public API.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714565226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714578654","html_url":"https://github.com/apache/accumulo/issues/1742#issuecomment-714578654","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1742","id":714578654,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDU3ODY1NA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T15:36:33Z","updated_at":"2020-10-22T15:36:33Z","author_association":"CONTRIBUTOR","body":">  However, a Stream would only give us a stream of Entry<Key, Value>, and a forEach for that wouldn't be as useful as one with a BiConsumer\r\n\r\nGood point. BiConsumer is really nice and stream of Entry is a bit cumbersome.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714578654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714592428","html_url":"https://github.com/apache/accumulo/pull/1596#issuecomment-714592428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1596","id":714592428,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDU5MjQyOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T15:58:44Z","updated_at":"2020-10-22T15:58:44Z","author_association":"CONTRIBUTOR","body":"Thanks @dlmarion ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/714592428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/715625908","html_url":"https://github.com/apache/accumulo/pull/1751#issuecomment-715625908","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1751","id":715625908,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTYyNTkwOA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T23:05:47Z","updated_at":"2020-10-23T23:05:47Z","author_association":"CONTRIBUTOR","body":"Is the following the code you are trying to simplify?  \r\n\r\nhttps://github.com/apache/accumulo/blob/353c611891a8b88b307dcba5e884467d4191b1f2/server/manager/src/main/java/org/apache/accumulo/master/TabletGroupWatcher.java#L252-L343\r\n\r\nHow much of your goals could accomplished by replacing code blocks w/ functions like below?   I think you are also trying to simplify master.getGoalState() and possibly consolidate concerns that currently straddle master.getGoalState() and TabletGroupWatcher?  If that is true, then it seems like the following would not accomplish all of your goals.\r\n\r\n```java\r\n          if (goal == TabletGoalState.HOSTED) {\r\n            if (state != TabletState.HOSTED && !tls.walogs.isEmpty()) {\r\n              if (master.recoveryManager.recoverLogs(tls.extent, tls.walogs))\r\n                continue;\r\n            }\r\n            switch (state) {\r\n              case HOSTED:\r\n                if (server.equals(master.migrations.get(tls.extent)))\r\n                  master.migrations.remove(tls.extent);\r\n                break;\r\n              case ASSIGNED_TO_DEAD_SERVER:\r\n                hostTabletAssignedToDeadServer(...);\r\n                break;\r\n              case SUSPENDED:\r\n                hostSuspendedTablet(...);\r\n                break;\r\n              case UNASSIGNED:\r\n                hostUnassignedTablet(....);\r\n                break;\r\n              case ASSIGNED:\r\n                hostAssignedTablet(...);\r\n                break;\r\n            }\r\n          } else {\r\n            switch (state) {\r\n              case SUSPENDED:\r\n                unassignSuspendedTablet(...);\r\n                break;\r\n              case UNASSIGNED:\r\n                cancelOfflineTableMigrations(tls);\r\n                break;\r\n              case ASSIGNED_TO_DEAD_SERVER:\r\n                unassignAssignedToDeadServerTablet(...);\r\n                break;\r\n              case HOSTED:\r\n                unassignHostedTablet(....);\r\n                break;\r\n              case ASSIGNED:\r\n                break;\r\n            }\r\n          }\r\n          counts[state.ordinal()]++;\r\n        }\r\n```\r\n\r\nAs for the merge code, that code straddles FATE and the Tablet goal state code in a way that is hard to follow.  It may need improvement, but I am uncertain what the improvement is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/715625908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716658357","html_url":"https://github.com/apache/accumulo/pull/1752#issuecomment-716658357","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1752","id":716658357,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjY1ODM1Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T16:17:57Z","updated_at":"2020-10-26T16:17:57Z","author_association":"CONTRIBUTOR","body":"> It looks like the only action of this PR is to replace an enum type with a String type. I don't see the advantage of that. Concrete types gives us safety and prevent bugs. It is normal for us to have Thrift-type and a non-Thrift-type that we have to convert between, in order to avoid leaking Thrift types into our code. I'm not sure it's better to replace concrete types with String to avoid that redundancy.\r\n\r\nThe motivation for this change was to help with cleaning up all the enums in Master code.  I wasn't thrilled about this change, when I saw all that was required to remove the thrift enum.  I will close this for now and try to clean up the code without having to change the Thrift endpoint.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716658357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716664244","html_url":"https://github.com/apache/accumulo/pull/1751#issuecomment-716664244","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1751","id":716664244,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjY2NDI0NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T16:26:11Z","updated_at":"2020-10-26T16:26:11Z","author_association":"CONTRIBUTOR","body":"> Is the following the code you are trying to simplify?\r\n> \r\n> [TabletGroupWatcher link](https://github.com/apache/accumulo/blob/353c611891a8b88b307dcba5e884467d4191b1f2/server/manager/src/main/java/org/apache/accumulo/master/TabletGroupWatcher.java#L252-L343)\r\n\r\nYes that is where I started.\r\n\r\n> How much of your goals could accomplished by replacing code blocks w/ functions like below? \r\n\r\nThis is certainly an improvement.  We could make this change, regardless of any other refactoring I do.  It makes this code block easier to read at least.\r\n\r\n> I think you are also trying to simplify master.getGoalState() and possibly consolidate concerns that currently straddle master.getGoalState() and TabletGroupWatcher? If that is true, then it seems like the following would not accomplish all of your goals.\r\n\r\nCorrect.\r\n\r\n> As for the merge code, that code straddles FATE and the Tablet goal state code in a way that is hard to follow. It may need improvement, but I am uncertain what the improvement is.\r\n\r\nI agree.  I was aiming for a design that would allow adding more states to handle this code as well.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716664244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716727346","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-716727346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":716727346,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjcyNzM0Ng==","user":{"login":"cradal","id":20303105,"node_id":"MDQ6VXNlcjIwMzAzMTA1","avatar_url":"https://avatars.githubusercontent.com/u/20303105?v=4","gravatar_id":"","url":"https://api.github.com/users/cradal","html_url":"https://github.com/cradal","followers_url":"https://api.github.com/users/cradal/followers","following_url":"https://api.github.com/users/cradal/following{/other_user}","gists_url":"https://api.github.com/users/cradal/gists{/gist_id}","starred_url":"https://api.github.com/users/cradal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cradal/subscriptions","organizations_url":"https://api.github.com/users/cradal/orgs","repos_url":"https://api.github.com/users/cradal/repos","events_url":"https://api.github.com/users/cradal/events{/privacy}","received_events_url":"https://api.github.com/users/cradal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T18:03:51Z","updated_at":"2020-10-26T18:03:51Z","author_association":"CONTRIBUTOR","body":"Most recent push encapsulates Builder member vars and moves Builder class over to AmpleImpl. Refactored ZooKeeperInstance to use new AmpleImpl method. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/716727346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717367300","html_url":"https://github.com/apache/accumulo/issues/1750#issuecomment-717367300","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1750","id":717367300,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzM2NzMwMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T16:32:30Z","updated_at":"2020-10-27T16:32:30Z","author_association":"CONTRIBUTOR","body":"I think we are stuck with this enum for now since it is tied to the Thrift RPC.  Closing for now. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717367300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717505316","html_url":"https://github.com/apache/accumulo/pull/1754#issuecomment-717505316","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1754","id":717505316,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzUwNTMxNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T20:01:49Z","updated_at":"2020-10-27T20:01:49Z","author_association":"MEMBER","body":"Should probably backport this one to 1.10.1 also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717505316/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717626425","html_url":"https://github.com/apache/accumulo/pull/1755#issuecomment-717626425","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1755","id":717626425,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzYyNjQyNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T00:48:36Z","updated_at":"2020-10-28T00:48:36Z","author_association":"MEMBER","body":"All ITs passed (with once again, MetadataMaxFilesIT being the only flake: see #1574).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717626425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717627043","html_url":"https://github.com/apache/accumulo/pull/1459#issuecomment-717627043","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1459","id":717627043,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzYyNzA0Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T00:50:54Z","updated_at":"2020-10-28T00:50:54Z","author_association":"MEMBER","body":"This was superseded by #1755 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717627043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717632161","html_url":"https://github.com/apache/accumulo/issues/1007#issuecomment-717632161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1007","id":717632161,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzYzMjE2MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T01:08:05Z","updated_at":"2020-10-28T01:08:05Z","author_association":"MEMBER","body":"I have completed my refactor in #1755. After that is merged, this should be much easier to investigate.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717632161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717632990","html_url":"https://github.com/apache/accumulo/pull/1677#issuecomment-717632990","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1677","id":717632990,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzYzMjk5MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T01:10:46Z","updated_at":"2020-10-28T01:10:46Z","author_association":"MEMBER","body":"I have completed a refactor of some of the Zoo-related utilities in #1755 . After that PR is merged, it might be easier to identify alternate ways to address this. (Or, it may not be any help... I'm not sure. It's been awhile since I looked at this issue.)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717632990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717906594","html_url":"https://github.com/apache/accumulo/pull/1756#issuecomment-717906594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1756","id":717906594,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzkwNjU5NA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T12:41:16Z","updated_at":"2020-10-28T12:41:16Z","author_association":"CONTRIBUTOR","body":"Everything looks good. I tested it locally and confirmed that adding maven option `-Dsurefire.forkCount=` did correctly apply it to the command. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/717906594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718055073","html_url":"https://github.com/apache/accumulo/pull/1755#issuecomment-718055073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1755","id":718055073,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODA1NTA3Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T16:33:04Z","updated_at":"2020-10-28T16:33:04Z","author_association":"CONTRIBUTOR","body":"I took a quick look at this and I think the changes are solid but this PR is hard to review.  There is a lot of translating the code to lambdas combined with other changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718055073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718066920","html_url":"https://github.com/apache/accumulo/pull/1755#issuecomment-718066920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1755","id":718066920,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODA2NjkyMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T16:50:25Z","updated_at":"2020-10-28T16:50:25Z","author_association":"MEMBER","body":"> I took a quick look at this and I think the changes are solid but this PR is hard to review. There is a lot of translating the code to lambdas combined with other changes.\r\n\r\nYeah, I know it's a little hard to follow. It didn't seem possible to make these improvements while avoiding that. Thanks for taking a look.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718066920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718073544","html_url":"https://github.com/apache/accumulo/pull/1756#issuecomment-718073544","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1756","id":718073544,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODA3MzU0NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T17:00:15Z","updated_at":"2020-10-28T17:00:15Z","author_association":"MEMBER","body":"Merged to main in c4e47bab9d86eca894317efcb19fa11e6225425f","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718073544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718086806","html_url":"https://github.com/apache/accumulo/issues/1007#issuecomment-718086806","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1007","id":718086806,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODA4NjgwNg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T17:21:32Z","updated_at":"2020-10-28T17:21:32Z","author_association":"CONTRIBUTOR","body":"I can look at this as part of the configuration changes that I'm going to work on when my current task completes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718086806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718127854","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-718127854","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":718127854,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODEyNzg1NA==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T18:31:44Z","updated_at":"2020-10-28T18:31:44Z","author_association":"CONTRIBUTOR","body":"@keith-turner   Is this ticket still relevant base on your new updates to Compaction? If so, what components do I directly affect to accomplish the task? Plus, what was your expected result?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718127854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718234478","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-718234478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":718234478,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODIzNDQ3OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T22:02:40Z","updated_at":"2020-10-28T22:02:40Z","author_association":"MEMBER","body":"I ran into this old JIRA issue that seems to be the same issue: https://issues.apache.org/jira/browse/ACCUMULO-1708","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718234478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718248255","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-718248255","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":718248255,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODI0ODI1NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T22:37:17Z","updated_at":"2020-10-28T22:37:17Z","author_association":"MEMBER","body":"Another related JIRA issue: https://issues.apache.org/jira/browse/ACCUMULO-2495","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718248255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718769232","html_url":"https://github.com/apache/accumulo/issues/1753#issuecomment-718769232","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1753","id":718769232,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODc2OTIzMg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T13:55:54Z","updated_at":"2020-10-29T13:55:54Z","author_association":"CONTRIBUTOR","body":"It seems [ShutdownTserver.java](https://github.com/apache/accumulo/blob/c43471a725bc2259aa80d041d233997c8844c37a/server/manager/src/main/java/org/apache/accumulo/master/tserverOps/ShutdownTServer.java) is what is called right before this hangs. We wait for completion in [MasterClientServiceHandler.java](https://github.com/apache/accumulo/blob/f88cb3bcebb744d7d1f3150877243c756d717ddb/server/manager/src/main/java/org/apache/accumulo/master/MasterClientServiceHandler.java#L283) before proceeding which is where I expect the hangup to be. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718769232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718812425","html_url":"https://github.com/apache/accumulo/issues/1303#issuecomment-718812425","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1303","id":718812425,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODgxMjQyNQ==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T15:02:11Z","updated_at":"2020-10-29T15:02:11Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I would like to take a look at this. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718812425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718909089","html_url":"https://github.com/apache/accumulo/pull/1757#issuecomment-718909089","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1757","id":718909089,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODkwOTA4OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T17:33:52Z","updated_at":"2020-10-29T17:33:52Z","author_association":"CONTRIBUTOR","body":"There could be further improvements to the code that calls this new method (possibly replacing it altogether) but like all the parts that touch the metadata, its complex and needs to be handled carefully.  This PR was simply an improvement over the static method so we can avoid calls like `ServerAmpleImpl.createDeleteMutation()`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718909089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718911000","html_url":"https://github.com/apache/accumulo/issues/1753#issuecomment-718911000","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1753","id":718911000,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODkxMTAwMA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T17:37:12Z","updated_at":"2020-10-29T17:37:12Z","author_association":"CONTRIBUTOR","body":"My current solution is to check if there is more than one tablet server before attempting to shutdown each tserver. I put in a error log as well so the user knows that 'admin stop' cannot stop the last tserver. I believe [ShutdownTserver.java](https://github.com/apache/accumulo/blob/c43471a725bc2259aa80d041d233997c8844c37a/server/manager/src/main/java/org/apache/accumulo/master/tserverOps/ShutdownTServer.java) is only used by the Admin class so it should only affect this and not any other stop tserver method in accumulo. \r\n\r\nI will keep investgating this to find a better solution to how we should handle this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/718911000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719005102","html_url":"https://github.com/apache/accumulo/issues/1303#issuecomment-719005102","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1303","id":719005102,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTAwNTEwMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T20:33:27Z","updated_at":"2020-10-29T20:33:27Z","author_association":"CONTRIBUTOR","body":"I think the unique directory would have to be added to the destination path here: \r\nhttps://github.com/apache/accumulo/blob/3fd5cad92f9b63ac19e4466f3f2d5237b905262c/server/base/src/main/java/org/apache/accumulo/server/master/recovery/RecoveryPath.java#L45\r\n\r\nIt looks like that method `getRecoveryPath(Path walPath)` takes the WAL path and returns the recovery path for sorting.  So given something like:\r\n`source = hdfs:/accumulo/wal/ip-10-113-12-25+9997/bd9a7597-b51f-415a-9648-0363913749d0` \r\nit will return `dest = hdfs:/accumulo/recovery/bd9a7597-b51f-415a-9648-0363913749d0`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719005102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719056909","html_url":"https://github.com/apache/accumulo/pull/1755#issuecomment-719056909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1755","id":719056909,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTA1NjkwOQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T22:20:35Z","updated_at":"2020-10-29T22:20:35Z","author_association":"CONTRIBUTOR","body":"@ctubbsii this is a nice change. Removing all the passing of null is nice.  I noticed the mutation function is passed null,null in multiple places.  Was that something you looked into?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719056909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719120564","html_url":"https://github.com/apache/accumulo/pull/1755#issuecomment-719120564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1755","id":719120564,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTEyMDU2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T01:48:19Z","updated_at":"2020-10-30T01:48:19Z","author_association":"MEMBER","body":"> Was that something you looked into?\r\n\r\n@keith-turner No, it wasn't. However, taking a quick look yielded PR #1758 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719120564/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719120707","html_url":"https://github.com/apache/accumulo/pull/1758#issuecomment-719120707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1758","id":719120707,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTEyMDcwNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T01:49:00Z","updated_at":"2020-10-30T01:49:00Z","author_association":"MEMBER","body":"Something like this was hinted at in https://github.com/apache/accumulo/pull/1755#issuecomment-719056909","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719120707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719512364","html_url":"https://github.com/apache/accumulo/pull/1759#issuecomment-719512364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1759","id":719512364,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTUxMjM2NA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T12:00:29Z","updated_at":"2020-10-30T12:00:39Z","author_association":"CONTRIBUTOR","body":"Should I catch the Exception as well? I noticed on other spots that we didn't so I wasn't sure. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719512364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719653703","html_url":"https://github.com/apache/accumulo/pull/1757#issuecomment-719653703","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1757","id":719653703,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTY1MzcwMw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T16:24:58Z","updated_at":"2020-10-30T16:24:58Z","author_association":"CONTRIBUTOR","body":"> I think it would be nice goal to not have the Mutation type in Ample.\r\n\r\nI agree.  I will go ahead and merge this so improvements can continue to be made.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719653703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719659061","html_url":"https://github.com/apache/accumulo/pull/1751#issuecomment-719659061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1751","id":719659061,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTY1OTA2MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T16:33:58Z","updated_at":"2020-10-30T16:33:58Z","author_association":"CONTRIBUTOR","body":"After much pain looking at this code, I created #1761 with the best I can come up with for now. @keith-turner I incorporated some of your ideas into this change.  I will close this Draft design PR for now since #1761 may be the best that comes of it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719659061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719699881","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-719699881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":719699881,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTY5OTg4MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T17:43:45Z","updated_at":"2020-10-30T17:43:45Z","author_association":"CONTRIBUTOR","body":"Changed ticket to just an enhancement.  I had confused this command with the `du` command having issues, which already has a ticket.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719699881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719760322","html_url":"https://github.com/apache/accumulo/pull/1758#issuecomment-719760322","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1758","id":719760322,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTc2MDMyMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T19:45:09Z","updated_at":"2020-10-30T19:45:09Z","author_association":"MEMBER","body":"All ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719760322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719833073","html_url":"https://github.com/apache/accumulo/pull/1758#issuecomment-719833073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1758","id":719833073,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTgzMzA3Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T22:48:05Z","updated_at":"2020-10-30T22:48:05Z","author_association":"MEMBER","body":"My initial commit had `+55 −86` lines, but with the javadocs, now it's `+197 −189`. Oh well. Can't be helped. :smiley_cat: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719833073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719840126","html_url":"https://github.com/apache/accumulo/pull/1757#issuecomment-719840126","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1757","id":719840126,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg0MDEyNg==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T23:15:36Z","updated_at":"2020-10-30T23:15:36Z","author_association":"CONTRIBUTOR","body":"I created #1762 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719840126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719841712","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-719841712","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":719841712,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg0MTcxMg==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T23:21:41Z","updated_at":"2020-10-30T23:21:41Z","author_association":"CONTRIBUTOR","body":"I was looking at the code after seeing this issue and opened #1764 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719841712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719842714","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-719842714","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":719842714,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg0MjcxNA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-30T23:25:50Z","updated_at":"2020-10-30T23:25:50Z","author_association":"MEMBER","body":"@keith-turner Would this be a `good first issue`? It seems pretty straight-forward.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719842714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719877885","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-719877885","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":719877885,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg3Nzg4NQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-31T03:42:28Z","updated_at":"2020-10-31T03:46:30Z","author_association":"CONTRIBUTOR","body":"> @keith-turner Would this be a good first issue? It seems pretty straight-forward.\r\n\r\n@ctubbsii the following code calls getActiveCompactions().  The code is self contained, but it being in this iterator complicates parallelizing it a bit.\r\n\r\nhttps://github.com/apache/accumulo/blob/d820360b975de759b1575d68456e69c828225a85/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionIterator.java#L64\r\n\r\n\r\nI was thinking a parallel stream would be a simple way to parallelize it since a stream can be converted to an iterator.  However one slight wrinkle is that parallel streams use a JVM wide thread pool, so this is not good for I/O bound operations.  Parallel streams [can be made to use a custom thread pool](https://www.baeldung.com/java-8-parallel-streams-custom-threadpool#custom-thread-pool), but its cumbersome.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719877885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719878638","html_url":"https://github.com/apache/accumulo/pull/1759#issuecomment-719878638","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1759","id":719878638,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg3ODYzOA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-31T03:51:17Z","updated_at":"2020-10-31T03:51:17Z","author_association":"CONTRIBUTOR","body":"> There's also a similar issue in FinishCreateTable.cleanupSplitFiles, which can cause the table creation to fail, even if the table was, in fact, created.  Perhaps it'd be better to just log that error, instead of failing and rolling back the entire table creation? \r\n\r\nLogging an error in that case does seem better.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719878638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719879073","html_url":"https://github.com/apache/accumulo/pull/1759#issuecomment-719879073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1759","id":719879073,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg3OTA3Mw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-31T03:56:16Z","updated_at":"2020-10-31T03:56:16Z","author_association":"CONTRIBUTOR","body":"> Should I catch the Exception as well? I noticed on other spots that we didn't so I wasn't sure.\r\n\r\n@Manno15  based on the comment by @ctubbsii  I am thinking maybe in all of the places where this file is deleted that if it fails the exception should be caught and an error or warning logged.  So an exception is not thrown out of the operation if delete fails. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719879073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719885573","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-719885573","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":719885573,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTg4NTU3Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-31T05:05:21Z","updated_at":"2020-10-31T05:05:21Z","author_association":"MEMBER","body":"I [saw another way to do it with a custom executor](https://4comprehension.com/parallel-collection-processing-1/), rather than specifically requiring a ForkJoinPool:\r\n```java\r\nstream.map(i -> CompletableFuture.supplyAsync(() -> process(i), executor)).collect(\r\n  collectingAndThen(toList(), list -> list.stream().map(CompletableFuture::join).collect(toList()))\r\n);\r\n```\r\nThis submits all the tasks to an executor, then collects all the futures, then joins all the futures into the list of final results. Exception handling is tricky, but I imagine that it's tricky with parallel streams and ForkJoinPool also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/719885573/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720026699","html_url":"https://github.com/apache/accumulo/pull/1758#issuecomment-720026699","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1758","id":720026699,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDAyNjY5OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-01T04:40:25Z","updated_at":"2020-11-01T04:40:25Z","author_association":"MEMBER","body":"All ITs passed again after the latest changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720026699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720469627","html_url":"https://github.com/apache/accumulo/pull/1759#issuecomment-720469627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1759","id":720469627,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDQ2OTYyNw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-02T13:24:14Z","updated_at":"2020-11-02T13:24:14Z","author_association":"CONTRIBUTOR","body":"I'll add the requested changes. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720469627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720491835","html_url":"https://github.com/apache/accumulo/pull/1759#issuecomment-720491835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1759","id":720491835,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDQ5MTgzNQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-02T14:05:00Z","updated_at":"2020-11-02T14:10:38Z","author_association":"CONTRIBUTOR","body":"> There's also a similar issue in FinishCreateTable.cleanupSplitFiles, which can cause the table creation to fail, even if the table was, in fact, created.\r\n\r\n`FinishCreateTable.call` has the `tableInfo.getInitialSplitSize() > 0` check before calling `FinsihCreateTable.cleanupSplitFiles`. I don't think that one has the issue as the other two. I can still catch the exceptions just in case so we don't run into this predicament.   ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720491835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720496709","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-720496709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":720496709,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDQ5NjcwOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-02T14:13:41Z","updated_at":"2020-11-02T14:13:41Z","author_association":"CONTRIBUTOR","body":"> I was looking at the code after seeing this issue and opened #1764\r\n\r\nThanks, I was originally thinking this command was slow because of that impl.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720496709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720580299","html_url":"https://github.com/apache/accumulo/pull/1762#issuecomment-720580299","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1762","id":720580299,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDU4MDI5OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-02T16:30:35Z","updated_at":"2020-11-02T16:30:35Z","author_association":"CONTRIBUTOR","body":"It looks like you are also modifying the delete mutations to use a `batchWriter` instead?  Is there any follow on work that may need to be done for handling errors or failures?  I believe this is the RPC these deletes would eventually get to: https://github.com/apache/accumulo/blob/3fd5cad92f9b63ac19e4466f3f2d5237b905262c/core/src/main/java/org/apache/accumulo/core/clientImpl/Writer.java#L73 I am also wondering about the invalidation of the cache that happens here: https://github.com/apache/accumulo/blob/3fd5cad92f9b63ac19e4466f3f2d5237b905262c/core/src/main/java/org/apache/accumulo/core/clientImpl/Writer.java#L104-L115\r\n\r\nGood job cleaning up some of those original JIRA issues as well :wink: https://issues.apache.org/jira/browse/ACCUMULO-1294","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720580299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720685854","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-720685854","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":720685854,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDY4NTg1NA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-02T19:45:07Z","updated_at":"2020-11-02T20:07:33Z","author_association":"CONTRIBUTOR","body":"One possible way to implement this is :\r\n\r\n * Move the code in ActiveCompactionItertator that converts an ActiveCompaction object to a display string into a function called `String toDisplay(ActiveCompaction)`.\r\n * Replace this [line](https://github.com/apache/accumulo/blob/d820360b975de759b1575d68456e69c828225a85/shell/src/main/java/org/apache/accumulo/shell/commands/ListCompactionsCommand.java#L67) with a stream.\r\n * Remove the ActiveCompactionIterator class\r\n\r\nThe code for stream could look like the following.\r\n\r\n```java\r\n    String finalFilterText = filterText;\r\n    Predicate<String> textFilter = finalFilterText == null ? t -> true : t -> t.matches(finalFilterText);\r\n    \r\n    Comparator<ActiveCompaction> acComp =\r\n        Comparator.comparingLong(ActiveCompaction::getAge).reversed();\r\n\r\n    Iterator<String> activeCompactionIterator =\r\n        tservers.stream().map(tserver -> CompletableFuture.supplyAsync(() -> {\r\n          try {\r\n            return instanceOps.getActiveCompactions(tserver);\r\n          } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n        }, executor)).flatMap(cf -> cf.join().stream().sorted(acComp)).map(ac -> toDisplay(ac))\r\n            .filter(textFilter).iterator();\r\n\r\n```\r\n\r\nI am uncertain if the stream will have the same order as the current iterator class, I am not sure if tservers will stay grouped together in output  and if the age order created inside flatMap will be preserved.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720685854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720800489","html_url":"https://github.com/apache/accumulo/pull/1762#issuecomment-720800489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1762","id":720800489,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDgwMDQ4OQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T00:20:38Z","updated_at":"2020-11-03T00:20:38Z","author_association":"CONTRIBUTOR","body":"> Is there any follow on work that may need to be done for handling errors or failures?\r\n\r\nI don't think so,  the batch writer should retry on anything that it can and if it does not then it would be a bug in the batch writer.\r\n\r\n> I am also wondering about the invalidation of the cache that happens here:\r\n\r\nThe batch writer also invalidates the client side tablet location cache as needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720800489/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720809161","html_url":"https://github.com/apache/accumulo/pull/1762#issuecomment-720809161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1762","id":720809161,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDgwOTE2MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T00:48:26Z","updated_at":"2020-11-03T00:48:26Z","author_association":"MEMBER","body":"> Good job cleaning up some of those original JIRA issues as well  https://issues.apache.org/jira/browse/ACCUMULO-1294\r\n\r\nI didn't look at the contents of that JIRA, but noticed it was still open. If this issue covers it, please close that JIRA. :smiley_cat: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720809161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720844642","html_url":"https://github.com/apache/accumulo/pull/1649#issuecomment-720844642","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1649","id":720844642,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDg0NDY0Mg==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T01:37:20Z","updated_at":"2020-11-03T01:37:33Z","author_association":"CONTRIBUTOR","body":"Since this branch has been sitting for a while, locally I merged this branch to main and reran all ITs matching `*Compaction*IT*`.  The test were all a success.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/720844642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721309128","html_url":"https://github.com/apache/accumulo/issues/1609#issuecomment-721309128","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1609","id":721309128,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTMwOTEyOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T18:43:29Z","updated_at":"2020-11-03T18:43:29Z","author_association":"CONTRIBUTOR","body":"The autoformat is line wrapping your change in 79611ee.  Please fix the comment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721309128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721309388","html_url":"https://github.com/apache/accumulo/issues/1609#issuecomment-721309388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1609","id":721309388,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTMwOTM4OA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T18:43:59Z","updated_at":"2020-11-03T18:43:59Z","author_association":"CONTRIBUTOR","body":"> The autoformat is line wrapping your change in [79611ee](https://github.com/apache/accumulo/commit/79611eef97c07e3605c221812792644008e0c86a). Please fix the comment.\r\n\r\n@keith-turner ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721309388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721356544","html_url":"https://github.com/apache/accumulo/issues/1766#issuecomment-721356544","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1766","id":721356544,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTM1NjU0NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T20:25:12Z","updated_at":"2020-11-03T20:25:12Z","author_association":"CONTRIBUTOR","body":"From the tserver log when running IteratorEnvIT:\r\n```\r\njava.lang.UnsupportedOperationException: null\r\n        at org.apache.accumulo.core.iterators.IteratorEnvironment.getPluginEnv(IteratorEnvironment.java:180) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.test.IteratorEnvIT.testEnv(IteratorEnvIT.java:157) ~[classes/:?]\r\n        at org.apache.accumulo.test.IteratorEnvIT$ScanIter.init(IteratorEnvIT.java:78) ~[classes/:?]\r\n        at org.apache.accumulo.core.conf.IterConfigUtil.loadIterators(IterConfigUtil.java:221) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.ScanDataSource.createIterator(ScanDataSource.java:226) ~[accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.ScanDataSource.iterator(ScanDataSource.java:120) ~[accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.iteratorsImpl.system.SourceSwitchingIterator.seek(SourceSwitchingIterator.java:228) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.nextBatch(Tablet.java:706) ~[accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.Scanner.read(Scanner.java:108) ~[accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.scan.NextBatchTask.run(NextBatchTask.java:74) [accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.session.ScanSession$ScanMeasurer.run(ScanSession.java:54) [accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.htrace.wrappers.TraceRunnable.run(TraceRunnable.java:57) [htrace-core-3.2.0-incubating.jar:3.2.0-incubating]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721356544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721364684","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-721364684","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":721364684,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTM2NDY4NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T20:44:09Z","updated_at":"2020-11-03T20:44:09Z","author_association":"CONTRIBUTOR","body":"Is this change complete?  I would like to use this to read metadata in a new admin command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721364684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721430994","html_url":"https://github.com/apache/accumulo/pull/1767#issuecomment-721430994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1767","id":721430994,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTQzMDk5NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T23:38:11Z","updated_at":"2020-11-03T23:38:11Z","author_association":"MEMBER","body":"I was hoping to get this pushed before @keith-turner pushed 0168e8f9265696d4f6a00afcc9bd329bb0610a90 to see if I could get it to fail the build, but I didn't make it in time. I'm confident this works, though, because I can simulate it locally.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721430994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721493465","html_url":"https://github.com/apache/accumulo/issues/1766#issuecomment-721493465","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1766","id":721493465,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTQ5MzQ2NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T03:36:31Z","updated_at":"2020-11-04T03:36:31Z","author_association":"MEMBER","body":"This is a simple fix. I'll knock this out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721493465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721647325","html_url":"https://github.com/apache/accumulo/pull/1768#issuecomment-721647325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1768","id":721647325,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTY0NzMyNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T10:25:56Z","updated_at":"2020-11-04T10:25:56Z","author_association":"MEMBER","body":"All ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721647325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721759713","html_url":"https://github.com/apache/accumulo/issues/1766#issuecomment-721759713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1766","id":721759713,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTc1OTcxMw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T14:21:21Z","updated_at":"2020-11-04T14:21:21Z","author_association":"CONTRIBUTOR","body":"> This is a simple fix. I'll knock this out.\r\n\r\nThanks.  I was in the middle of a few other unrelated tasks and didn't want to get side tracked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721759713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721858439","html_url":"https://github.com/apache/accumulo/pull/1768#issuecomment-721858439","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1768","id":721858439,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTg1ODQzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T17:08:53Z","updated_at":"2020-11-04T17:08:53Z","author_association":"MEMBER","body":"> This is a solid fix for now but I am curious what we will do in the next version when we continue to clean up IteratorEnvironment, which is now part of the public API.\r\n\r\nWell, eventually, we'll drop the deprecated APIs, and move any implementation into the ones we're keeping. When that happens, the ServiceEnvironment will be redundant with the PluginEnvironment, and we can drop that interface too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721858439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721861746","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-721861746","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":721861746,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTg2MTc0Ng==","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T17:14:35Z","updated_at":"2020-11-04T17:16:55Z","author_association":"CONTRIBUTOR","body":"@tynyttie As far as I can tell this ticket is still relevant.  You would still be creating a CompactionSelector implementation as described and configuring this to be used on the table.  The expected result would be to \"ensure that compaction selector is retried when it throws an exception and a single exception does not cause compactions to hang.\"  So essentially you will need to verify that after a failed compaction, that a successful compaction is completed.  @keith-turner Any other guidance?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/721861746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722682591","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-722682591","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":722682591,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjY4MjU5MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T22:28:37Z","updated_at":"2020-11-05T22:28:37Z","author_association":"CONTRIBUTOR","body":"@keith-turner @ctubbsii I have been working on this as it seems like a very useful tool.  One of the issues I am running into is that the only way to get the current state of tablets is to use objects in the master and this introduces a dependency in the shell on accumulo-server-base.  There are other parts of the code that depend on accumulo-server-base, like the GC [here](https://github.com/apache/accumulo/blob/72e8bc41335ae542087cc70d80d2b7b7e8652575/server/gc/src/main/java/org/apache/accumulo/gc/GarbageCollectWriteAheadLogs.java#L95).  The information is coming from ZK and metadata so I was wondering if having something in Ample would be appropriate.  I am not sure what is the best solution.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722682591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722692609","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-722692609","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":722692609,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjY5MjYwOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T22:56:17Z","updated_at":"2020-11-05T22:56:17Z","author_association":"MEMBER","body":"Ampl might be okay for this. It might also be okay to have a public API for the shell to use.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722692609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722740061","html_url":"https://github.com/apache/accumulo/pull/1710#issuecomment-722740061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1710","id":722740061,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc0MDA2MQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T01:07:24Z","updated_at":"2020-11-06T01:07:24Z","author_association":"CONTRIBUTOR","body":"@tynyttie what type of test did you run?  Was there concurrent bulk import operations running?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722740061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722759100","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-722759100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":722759100,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc1OTEwMA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T01:56:42Z","updated_at":"2020-11-06T01:57:24Z","author_association":"CONTRIBUTOR","body":"@tynyttie I would add the test to the following class.\r\n\r\nhttps://github.com/apache/accumulo/blob/main/test/src/main/java/org/apache/accumulo/test/CompactionExecutorIT.java\r\n\r\nThe test could do something like the following.  Could create BuggySelector as a static public class in CompactionExecutorIT \r\n\r\n```java\r\n@Test\r\npublic void testBuggySelector(){\r\n     //TODO create table bst and Accumulo client\r\n\r\n    // add 3 files to table... \r\n    addFile(client, \"bst\", 1, 1000, false);\r\n    addFile(client, \"bst\", 1, 500, false)\r\n    addFile(client, \"bst\", 1, 250, false)\r\n \r\n  // get the current files\r\n   var files = getFiles(client, \"bst\");\r\n\r\n   // TODO somehow select a random subset of files from above set\r\n  randomSubset = ....\r\n  String rsl = .... somehow join randomSubset into a comma sep list\r\n\r\n  // configure compaction to use BuggySelector. BuggySelector should select the files passed in the option fileToCompact and it should sometimes randomly throw an exception.\r\n   var cc1 = new CompactionConfig()\r\n       .setSelector(\r\n           new PluginConfig(BuggySelector.class.getName(), Map.of(\"filesToCompact\", rls)))\r\n       .setWait(true);  \r\n   \r\n     client.tableOperations().compact(\"bst\", cc1);\r\n\r\n     var files2 = getFiles(client, \"bst\");\r\n     // TODO verify that files2 does not contain anything from randomSubset\r\n}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722759100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722760340","html_url":"https://github.com/apache/accumulo/pull/1767#issuecomment-722760340","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1767","id":722760340,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc2MDM0MA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T02:00:10Z","updated_at":"2020-11-06T02:00:10Z","author_association":"CONTRIBUTOR","body":"So if someone submits a PR that requires formatting changes, then it should now fail CI?  If so thats kinda awesome.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722760340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722763864","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-722763864","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":722763864,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc2Mzg2NA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T02:10:18Z","updated_at":"2020-11-06T02:10:18Z","author_association":"CONTRIBUTOR","body":"@milleruntime I suspect the code could be moved to accumulo core OR reimplemented in core (and existing code migrated to Ample). One possible way to add it to ample would be to modify TabletMetadata class to add a method like the following.\r\n\r\n```java\r\nTabletState getTabletState(Set<Location> liveTservers) {\r\n   //use tablet metadata + liveTservers to determine the state of this tablet.\r\n  // Location is an inner class TabletMetadata\r\n}\r\n```\r\n\r\nThen maybe Ample could have a getLiveTservers() method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722763864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722764991","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-722764991","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":722764991,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc2NDk5MQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T02:13:15Z","updated_at":"2020-11-06T02:13:15Z","author_association":"CONTRIBUTOR","body":"For my previous comment, the Location type will not really work for this case.  Need a type that just encapsulates `(server,session)` for the set of live tservers. TabletMetadata.Location has those plus LocationType, which makes no sense for a live tserver.   ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722764991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722785122","html_url":"https://github.com/apache/accumulo/pull/1767#issuecomment-722785122","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1767","id":722785122,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjc4NTEyMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T03:19:04Z","updated_at":"2020-11-06T03:19:04Z","author_association":"MEMBER","body":"> So if someone submits a PR that requires formatting changes, then it should now fail CI? If so thats kinda awesome.\r\n\r\nYep. :smiley_cat: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722785122/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722810021","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-722810021","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":722810021,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjgxMDAyMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T04:37:15Z","updated_at":"2020-11-06T04:37:15Z","author_association":"MEMBER","body":"> I am uncertain if the stream will have the same order as the current iterator class, I am not sure if tservers will stay grouped together in output and if the age order created inside flatMap will be preserved.\r\n\r\nIt looks like the order of this one will depend on which tservers respond first, but within a tserver, it looks like they'll still be grouped and ordered correctly within a tserver. They could be grouped and sorted by tserver with an intermediate multimap or something, though.\r\n\r\nWhile I don't think the flatMap will mess with the ordering, it does look like it will prevent parallelization, without using the collector strategy I mentioned above. Otherwise, the first item will call go through `map`, `flatMap`, `map`, `filter`, and `iterator` on the first call to `next` in the iterator... and the second one will wait until `next` is called again. This is what the collector strategy I posted above avoids... it ensures all of them are iterated, during the `collect` phase, and then operates on the collection with the `collectingAndThen` special-purpose collector.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/722810021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723115201","html_url":"https://github.com/apache/accumulo/issues/1764#issuecomment-723115201","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1764","id":723115201,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMzExNTIwMQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T14:40:10Z","updated_at":"2020-11-06T14:40:44Z","author_association":"CONTRIBUTOR","body":"> While I don't think the flatMap will mess with the ordering, it does look like it will prevent parallelization, without using the collector strategy I mentioned above.\r\n\r\nGood catch @ctubbsii, I was thinking the stream would buffer some between steps.   But there is no good reason the stream should do that.  I attempted to explicitly force buffering of all the futures in the stream below.\r\n\r\n```java\r\n    String finalFilterText = filterText;\r\n    Predicate<String> textFilter = finalFilterText == null ? t -> true : t -> t.matches(finalFilterText);\r\n    \r\n    Comparator<ActiveCompaction> acComp =\r\n        Comparator.comparingLong(ActiveCompaction::getAge).reversed();\r\n\r\n   // The following stream buffers all futures mid stream before proceeding to ensure all tservers are submitted to executor\r\n    Iterator<String> activeCompactionIterator =\r\n        tservers.stream().map(tserver -> CompletableFuture.supplyAsync(() -> {\r\n          try {\r\n            return instanceOps.getActiveCompactions(tserver);\r\n          } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n        }, executor)).collect(toList()).stream() \r\n             .flatMap(cf -> cf.join().stream().sorted(acComp)).map(ac -> toDisplay(ac))\r\n            .filter(textFilter).iterator();\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723115201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723145270","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-723145270","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":723145270,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMzE0NTI3MA==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T15:36:32Z","updated_at":"2020-11-06T15:36:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner Thank you for replying back to me. My issue is when the unchecked exception is thrown, where in Compaction Manger hierarchy should I appropriately handle it in order for Accumulo to re-kick and select a new compact-able? Should it be in the Compaction Manger Class, Compaction Executor class or Compaction Service class?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723145270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723359231","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-723359231","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":723359231,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMzM1OTIzMQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-07T00:32:10Z","updated_at":"2020-11-07T00:32:10Z","author_association":"CONTRIBUTOR","body":"> My issue is when the unchecked exception is thrown, where in Compaction Manger hierarchy should I appropriately handle it in order for Accumulo to re-kick and select a new compact-able?\r\n\r\n@tynyttie my hope is that it already works, but the test will let us know if it actually works.  The following code is where files are selected.\r\n\r\nhttps://github.com/apache/accumulo/blob/18ba45e144ea8213a9637fe36bf0d8a68c3f15f5/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L328\r\n\r\nIf an exception is thrown, the following should catch and hopefully reset things to a good state so that future compactions can run if an exception is not thrown.\r\n\r\nhttps://github.com/apache/accumulo/blob/18ba45e144ea8213a9637fe36bf0d8a68c3f15f5/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L353","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/723359231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724172837","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-724172837","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":724172837,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDE3MjgzNw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T17:53:12Z","updated_at":"2020-11-09T17:53:12Z","author_association":"CONTRIBUTOR","body":"> For my previous comment, the Location type will not really work for this case. Need a type that just encapsulates `(server,session)` for the set of live tservers. TabletMetadata.Location has those plus LocationType, which makes no sense for a live tserver.\r\n\r\nWhat do you think about a new type in core.metadata (similar to what I did for TabletFile) that could be used everywhere?  And would we want to keep the ZK session Id?  @EdColeman and I were talking about the usefulness of storing the internal session ID.  It seems like its used as a unique identifier of the ephemeral ZooLock for that tserver.  This is a separate issue but I don't think we would want to have the session in this new type.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724172837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724202681","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-724202681","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":724202681,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDIwMjY4MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T18:44:33Z","updated_at":"2020-11-09T18:44:33Z","author_association":"CONTRIBUTOR","body":"And I suppose it would need to replace this type here:\r\nhttps://github.com/apache/accumulo/blob/d1b06d317983d460039861d4ab462d5a65ca3c11/core/src/main/java/org/apache/accumulo/core/metadata/schema/Ample.java#L191","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724202681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724278849","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-724278849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":724278849,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDI3ODg0OQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T21:07:49Z","updated_at":"2020-11-09T21:09:38Z","author_association":"CONTRIBUTOR","body":">. What do you think about a new type in core.metadata (similar to what I did for TabletFile) that could be used everywhere? And would we want to keep the ZK session Id?\r\n\r\nI like that. That Location type in TabletMetadata could possibly extend it.  Not sure about ZK session id would have to look at it.  Using the same type to represent the same info throughout the code seems like a big win.  Seems like it can follow the pattern of add it and then later adapt code to use it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724278849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724283172","html_url":"https://github.com/apache/accumulo/issues/1317#issuecomment-724283172","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1317","id":724283172,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDI4MzE3Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T21:16:41Z","updated_at":"2020-11-09T21:16:57Z","author_association":"CONTRIBUTOR","body":"> > . What do you think about a new type in core.metadata (similar to what I did for TabletFile) that could be used everywhere? And would we want to keep the ZK session Id?\r\n> \r\n> I like that. That Location type in TabletMetadata could possibly extend it. Not sure about ZK session id would have to look at it. Using the same type to represent the same info throughout the code seems like a big win. Seems like it can follow the pattern of add it and then later adapt code to use it.\r\n\r\nInstead of a new type, since the class is much simpler than TabletFile, I am playing around with just moving TServerInstance from master to core and using it.  https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/master/state/TServerInstance.java","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724283172/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724923053","html_url":"https://github.com/apache/accumulo/pull/1771#issuecomment-724923053","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1771","id":724923053,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDkyMzA1Mw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T19:39:37Z","updated_at":"2020-11-10T19:39:37Z","author_association":"CONTRIBUTOR","body":"I realize this has been merged - but I have a more general question.  This is at least the third time that a table option has been added to a shell command (I added it for importdir, there was another, but I don't recall specifics) and then this one.  Would it be worth creating an issue and checking that we are consistent across all of the commands that operate on a table that they accept this as an option?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724923053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724960792","html_url":"https://github.com/apache/accumulo/pull/1771#issuecomment-724960792","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1771","id":724960792,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDk2MDc5Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-10T20:54:58Z","updated_at":"2020-11-10T20:54:58Z","author_association":"MEMBER","body":"@EdColeman I think that would be a reasonable thing to do if you want to pursue it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/724960792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726055015","html_url":"https://github.com/apache/accumulo/pull/1771#issuecomment-726055015","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1771","id":726055015,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjA1NTAxNQ==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T12:43:26Z","updated_at":"2020-11-12T13:05:49Z","author_association":"CONTRIBUTOR","body":"@EdColeman, I think that would be a good idea. Unless you wish to personally pursue it, I would be willing to take a look since I’m currently reviewing the Accumulo-examples code and coming across various commands that may need the option. Let me know which you would prefer.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726055015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726136025","html_url":"https://github.com/apache/accumulo/pull/1771#issuecomment-726136025","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1771","id":726136025,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjEzNjAyNQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T15:08:01Z","updated_at":"2020-11-12T15:08:01Z","author_association":"CONTRIBUTOR","body":"I do not mind at all! ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726136025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726151829","html_url":"https://github.com/apache/accumulo/pull/1771#issuecomment-726151829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1771","id":726151829,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjE1MTgyOQ==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T15:32:05Z","updated_at":"2020-11-12T15:32:05Z","author_association":"CONTRIBUTOR","body":"I created #1776 to address this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726151829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726175596","html_url":"https://github.com/apache/accumulo/pull/1774#issuecomment-726175596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1774","id":726175596,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjE3NTU5Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T16:10:05Z","updated_at":"2020-11-12T16:10:05Z","author_association":"CONTRIBUTOR","body":"> Aside from a few String-based concerns, my main concern with these changes is that \"location\" means too many different things. In some contexts, it means \"a specific tserver instance\", but in other contexts the same word \"location\" means \"host address and port\". It gets more complicated when we pass a location containing a location, or assign a location variable named loc to some tserver's location's location.\r\n> \r\n> In some places, it's very clear, we just mean \"host address and port (as a String)\". It might be nice to have that kind of clarity everywhere, instead of trying to figure out which \"location\" we mean every time we see it. This might just be a matter of choosing better variable and method names where these types are used, to accompany your effort to simplify the types/classes.\r\n\r\nI agree.  Your concerns with location terminology is prevalent everywhere across our code.  These changes were just a first pass, moving the master classes to core and combining the inner classes.  I can improve the methods in TServerInstance as well in this PR but I didn't want to make too many changes at once.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726175596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726199653","html_url":"https://github.com/apache/accumulo/pull/1774#issuecomment-726199653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1774","id":726199653,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjE5OTY1Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T16:49:13Z","updated_at":"2020-11-12T16:49:13Z","author_association":"CONTRIBUTOR","body":"I also realized that moving `TServerInstance` will most likely break serialization so we may have to do something in the upgrade code to prevent issues upgrading.  This class is weird though... there are `writeObject(out)` and `readObject(in)` methods which look similar to Thrift classes and the class starting with \"T\" make me think that maybe this was based on a thrift class at one point.  I had thought the \"T\" was for Tablet Server.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726199653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726288320","html_url":"https://github.com/apache/accumulo/pull/1774#issuecomment-726288320","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1774","id":726288320,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjI4ODMyMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T19:24:32Z","updated_at":"2020-11-12T19:24:32Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I renamed most of the methods in 6893e01 so the changes in this PR will be OK to stand on their own.  I definitely want to do more with these classes and continue to improve their uses, similar to the work I did with TabletFile.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726288320/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726299011","html_url":"https://github.com/apache/accumulo/issues/1777#issuecomment-726299011","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1777","id":726299011,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjI5OTAxMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T19:41:26Z","updated_at":"2020-11-12T19:41:26Z","author_association":"MEMBER","body":"This is a cluster-startup timing issue only, and depends on how the cluster is started. The monitor is doing the correct behavior today... the master isn't up, so it says it's not up. The monitor is not wrong about that.\r\n\r\nIf we introduce a small delay in the monitor before it starts up, that might be okay... but it should not wait indefinitely for the master to be available initially, because it may never be available.\r\n\r\nHowever, by doing so, we risk the monitor failing (or delaying) to report a valid problem when the monitor itself is restarted and the rest of the system is expected to be up. The monitor doesn't know what state the rest of the cluster is in, so it doesn't know if it is starting up alone or along with the rest of the cluster.\r\n\r\nSince cluster startup is more rare than individual node startup, I'm inclined to just not fix this issue... as it's reporting a valid transient issue. After all, it's not that hard to wait a few seconds and refresh.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726299011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726302290","html_url":"https://github.com/apache/accumulo/issues/1777#issuecomment-726302290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1777","id":726302290,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjMwMjI5MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T19:47:43Z","updated_at":"2020-11-12T19:47:43Z","author_association":"CONTRIBUTOR","body":"> This is a cluster-startup timing issue only, and depends on how the cluster is started. The monitor is doing the correct behavior today... the master isn't up, so it says it's not up. The monitor is not wrong about that.\r\n> \r\n> If we introduce a small delay in the monitor before it starts up, that might be okay... but it should not wait indefinitely for the master to be available initially, because it may never be available.\r\n> \r\n> However, by doing so, we risk the monitor failing (or delaying) to report a valid problem when the monitor itself is restarted and the rest of the system is expected to be up. The monitor doesn't know what state the rest of the cluster is in, so it doesn't know if it is starting up alone or along with the rest of the cluster.\r\n> \r\n> Since cluster startup is more rare than individual node startup, I'm inclined to just not fix this issue... as it's reporting a valid transient issue. After all, it's not that hard to wait a few seconds and refresh.\r\n\r\nThat is fair.  I just thought it might be nice to not have any errors show up on a perfectly clean cluster with no data.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726302290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726307960","html_url":"https://github.com/apache/accumulo/issues/1777#issuecomment-726307960","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1777","id":726307960,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjMwNzk2MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T19:59:09Z","updated_at":"2020-11-12T19:59:09Z","author_association":"MEMBER","body":"> That is fair. I just thought it might be nice to not have any errors show up on a perfectly clean cluster with no data.\r\n\r\nIt might be best to just modify the cluster management scripts you're using to wait a few seconds before starting up the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726307960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726310445","html_url":"https://github.com/apache/accumulo/issues/1777#issuecomment-726310445","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1777","id":726310445,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjMxMDQ0NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T20:03:37Z","updated_at":"2020-11-12T20:03:37Z","author_association":"CONTRIBUTOR","body":"Well @ctubbsii I was trying to create an easy issue for newcomers but you had to make me look into it and test it myself... https://github.com/apache/accumulo/pull/1778","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726310445/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726311659","html_url":"https://github.com/apache/accumulo/pull/1778#issuecomment-726311659","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1778","id":726311659,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjMxMTY1OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T20:05:59Z","updated_at":"2020-11-12T20:05:59Z","author_association":"MEMBER","body":"One reason why we might have wanted to start the monitor first, is to be able to receive any startup error logs from other services that get sent to the monitor. However, there's no guarantee we'd start up in time to catch those anyway, and the monitor log sink is not a replacement for logs on individual machines, so I think it makes sense to start the monitor last.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/726311659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]