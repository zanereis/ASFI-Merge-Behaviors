[{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542429399","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-542429399","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":542429399,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjQyOTM5OQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-15T22:20:31Z","updated_at":"2019-10-15T22:20:31Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1108/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542429399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542434645","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-542434645","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":542434645,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjQzNDY0NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-15T22:39:46Z","updated_at":"2019-10-15T22:39:46Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1109/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542434645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542860905","html_url":"https://github.com/apache/madlib/pull/452#issuecomment-542860905","issue_url":"https://api.github.com/repos/apache/madlib/issues/452","id":542860905,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mjg2MDkwNQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T19:43:28Z","updated_at":"2019-10-16T19:43:28Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1110/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/542860905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/543404812","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-543404812","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":543404812,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzQwNDgxMg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-17T23:22:00Z","updated_at":"2019-10-17T23:22:00Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1111/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/543404812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/543873378","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-543873378","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":543873378,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mzg3MzM3OA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T18:24:10Z","updated_at":"2019-10-18T18:24:10Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1112/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/543873378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544646689","html_url":"https://github.com/apache/madlib/pull/452#issuecomment-544646689","issue_url":"https://api.github.com/repos/apache/madlib/issues/452","id":544646689,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY0NjY4OQ==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T18:30:35Z","updated_at":"2019-10-21T18:30:35Z","author_association":"CONTRIBUTOR","body":"I have added a test with a special character in table name. \r\nI am not sure if we actually have a sql injection risk in this case. The very first case these user-defined strings get used in a sql query is in the table exists function. There, we put the string in quotes before checking against pg_namespace. Since it is treated as a string, not a sql command, I think the check will fail before we execute anything else.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544646689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544652681","html_url":"https://github.com/apache/madlib/pull/452#issuecomment-544652681","issue_url":"https://api.github.com/repos/apache/madlib/issues/452","id":544652681,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY1MjY4MQ==","user":{"login":"reductionista","id":2644901,"node_id":"MDQ6VXNlcjI2NDQ5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2644901?v=4","gravatar_id":"","url":"https://api.github.com/users/reductionista","html_url":"https://github.com/reductionista","followers_url":"https://api.github.com/users/reductionista/followers","following_url":"https://api.github.com/users/reductionista/following{/other_user}","gists_url":"https://api.github.com/users/reductionista/gists{/gist_id}","starred_url":"https://api.github.com/users/reductionista/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reductionista/subscriptions","organizations_url":"https://api.github.com/users/reductionista/orgs","repos_url":"https://api.github.com/users/reductionista/repos","events_url":"https://api.github.com/users/reductionista/events{/privacy}","received_events_url":"https://api.github.com/users/reductionista/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T18:45:21Z","updated_at":"2019-10-21T18:45:21Z","author_association":"CONTRIBUTOR","body":"> I have added a test with a special character in table name.\r\n> I am not sure if we actually have a sql injection risk in this case. The very first case these user-defined strings get used in a sql query is in the table exists function. There, we put the string in quotes before checking against pg_namespace. Since it is treated as a string, not a sql command, I think the check will fail before we execute anything else.\r\n\r\nAdding quotes manually will allow it to work with table names that have spaces, tabs, or capital letters in their name.  But it won't help guard against SQL injection, which usually works by the attacker ending the quotes and then inserting a command, then starting the quotes again later.   I think this is the main reason for the existence of the `quote_ident` function, since just using quotes would work to handle most other cases.  It also allows table names to have quotes in them, which doesn't work with manual quoting--but that's a fairly obscure use case that doesn't seem important to support.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544652681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544655559","html_url":"https://github.com/apache/madlib/pull/453#issuecomment-544655559","issue_url":"https://api.github.com/repos/apache/madlib/issues/453","id":544655559,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY1NTU1OQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T18:52:40Z","updated_at":"2019-10-21T18:52:40Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1113/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544655559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544670041","html_url":"https://github.com/apache/madlib/pull/452#issuecomment-544670041","issue_url":"https://api.github.com/repos/apache/madlib/issues/452","id":544670041,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY3MDA0MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T19:29:34Z","updated_at":"2019-10-21T19:29:34Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1114/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544670041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544687033","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-544687033","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":544687033,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY4NzAzMw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T20:11:40Z","updated_at":"2019-10-21T20:11:40Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1115/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/544687033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/545175641","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-545175641","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":545175641,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTE3NTY0MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-22T22:03:06Z","updated_at":"2019-10-22T22:03:06Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1116/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/545175641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/545565921","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-545565921","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":545565921,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTU2NTkyMQ==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T18:03:07Z","updated_at":"2019-10-23T18:03:07Z","author_association":"CONTRIBUTOR","body":"LGTM, left a few minor follow up comments. When you squash all the commits, just make sure that the commit message is verbose and explains the following\r\n1. why we removed image count from the multi model agg state and also had to add a final function\r\n1. motivation for removing json.dumps","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/545565921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546154433","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-546154433","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":546154433,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE1NDQzMw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T00:39:39Z","updated_at":"2019-10-25T00:39:39Z","author_association":"NONE","body":"(1)\r\nPlease add `num_iterations` to the output table.  This is needed now because\r\nwe have a perplexity tolerance, so training may not run the maximum number of iterations\r\nspecified.  The model table should look like:\r\n\r\n```\r\nmodel_table\r\n...\r\nmodel\tBIGINT[]. The encoded model ...etc...\r\nnum_iterations\tINTEGER. Number of iterations that training ran for,\r\nwhich may be less than the maximum value specified in the parameter 'iter_num' if\r\nthe perplexity tolerance was reached.\r\nperplexity\tDOUBLE PRECISION[] Array of ...etc....\r\n...\r\n```\r\n\r\n(2)\r\nThe parameter 'perplexity_tol' can be any value >= 0.0  Currently it errors out below a\r\nvalue of 0.1 which is not correct.  I may want to set it to 0.0 so that training runs\r\nfor the full number of iterations.  So please change it to error out if 'perplexity_tol'<0.\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table\r\n                         103,                     -- vocabulary size\r\n                         5,                       -- number of topics\r\n                         10,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         2,                       -- Evaluate perplexity every 2 iterations\r\n                         0.0                      -- Set tolerance to 0 so runs full number of iterations\r\n                       );\r\n```\r\nproduces\r\n```\r\nInternalError: (psycopg2.InternalError) plpy.Error: invalid argument: perplexity_tol should not be less than .1 (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"lda_train\", line 22, in <module>\r\n    voc_size, topic_num, iter_num, alpha, beta,evaluate_every , perplexity_tol)\r\n  PL/Python function \"lda_train\", line 519, in lda_train\r\n  PL/Python function \"lda_train\", line 96, in _assert\r\nPL/Python function \"lda_train\"\r\n [SQL: \"SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\\n                         'lda_output_data_perp',  -- readable output data table \\n                         103,                     -- vocabulary size\\n                         5,                       -- number of topics\\n                         10,                      -- number of iterations\\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\\n                         2,                       -- Evaluate perplexity every 2 iterations\\n                         0.0                      -- Set tolerance to 0 so runs full number of iterations\\n                       );\"]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546154433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546404245","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-546404245","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":546404245,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQwNDI0NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T15:38:50Z","updated_at":"2019-10-25T15:38:50Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1117/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546404245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546417538","html_url":"https://github.com/apache/madlib/pull/453#issuecomment-546417538","issue_url":"https://api.github.com/repos/apache/madlib/issues/453","id":546417538,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQxNzUzOA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T16:15:47Z","updated_at":"2019-10-25T16:15:47Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1118/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/546417538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547026743","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-547026743","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":547026743,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzAyNjc0Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T16:22:09Z","updated_at":"2019-10-28T16:36:38Z","author_association":"NONE","body":"(3)\r\nLast iteration value for perplexity does not match final perplexity value:\r\n\r\n```\r\nDROP TABLE IF EXISTS documents;\r\nCREATE TABLE documents(docid INT4, contents TEXT);\r\n\r\nINSERT INTO documents VALUES\r\n(0, 'Statistical topic models are a class of Bayesian latent variable models, originally developed for analyzing the semantic content of large document corpora.'),\r\n(1, 'By the late 1960s, the balance between pitching and hitting had swung in favor of the pitchers. In 1968 Carl Yastrzemski won the American League batting title with an average of just .301, the lowest in history.'),\r\n(2, 'Machine learning is closely related to and often overlaps with computational statistics; a discipline that also specializes in prediction-making. It has strong ties to mathematical optimization, which deliver methods, theory and application domains to the field.'),\r\n(3, 'California''s diverse geography ranges from the Sierra Nevada in the east to the Pacific Coast in the west, from the Redwood Douglas fir forests of the northwest, to the Mojave Desert areas in the southeast. The center of the state is dominated by the Central Valley, a major agricultural area.'),\r\n(4, 'One of the many applications of Bayes'' theorem is Bayesian inference, a particular approach to statistical inference. When applied, the probabilities involved in Bayes'' theorem may have different probability interpretations. With the Bayesian probability interpretation the theorem expresses how a degree of belief, expressed as a probability, should rationally change to account for availability of related evidence. Bayesian inference is fundamental to Bayesian statistics.'),\r\n(5, 'When data are unlabelled, supervised learning is not possible, and an unsupervised learning approach is required, which attempts to find natural clustering of the data to groups, and then map new data to these formed groups. The support-vector clustering algorithm, created by Hava Siegelmann and Vladimir Vapnik, applies the statistics of support vectors, developed in the support vector machines algorithm, to categorize unlabeled data, and is one of the most widely used clustering algorithms in industrial applications.'),\r\n(6, 'Deep learning architectures such as deep neural networks, deep belief networks, recurrent neural networks and convolutional neural networks have been applied to fields including computer vision, speech recognition, natural language processing, audio recognition, social network filtering, machine translation, bioinformatics, drug design, medical image analysis, material inspection and board game programs, where they have produced results comparable to and in some cases superior to human experts.'),\r\n(7, 'A multilayer perceptron is a class of feedforward artificial neural network. An MLP consists of at least three layers of nodes: an input layer, a hidden layer and an output layer. Except for the input nodes, each node is a neuron that uses a nonlinear activation function. MLP utilizes a supervised learning technique called backpropagation for training.'),\r\n(8, 'In mathematics, an ellipse is a plane curve surrounding two focal points, such that for all points on the curve, the sum of the two distances to the focal points is a constant.'),\r\n(9, 'In artificial neural networks, the activation function of a node defines the output of that node given an input or set of inputs.'),\r\n(10, 'In mathematics, graph theory is the study of graphs, which are mathematical structures used to model pairwise relations between objects. A graph in this context is made up of vertices (also called nodes or points) which are connected by edges (also called links or lines). A distinction is made between undirected graphs, where edges link two vertices symmetrically, and directed graphs, where edges link two vertices asymmetrically; see Graph (discrete mathematics) for more detailed definitions and for other variations in the types of graph that are commonly considered. Graphs are one of the prime objects of study in discrete mathematics.'),\r\n(11, 'A Rube Goldberg machine, named after cartoonist Rube Goldberg, is a machine intentionally designed to perform a simple task in an indirect and overly complicated way. Usually, these machines consist of a series of simple unrelated devices; the action of each triggers the initiation of the next, eventually resulting in achieving a stated goal.'),\r\n(12, 'In statistics, the logistic model (or logit model) is used to model the probability of a certain class or event existing such as pass/fail, win/lose, alive/dead or healthy/sick. This can be extended to model several classes of events such as determining whether an image contains a cat, dog, lion, etc... Each object being detected in the image would be assigned a probability between 0 and 1 and the sum adding to one.'),\r\n(13, 'k-means clustering is a method of vector quantization, originally from signal processing, that is popular for cluster analysis in data mining. k-means clustering aims to partition n observations into k clusters in which each observation belongs to the cluster with the nearest mean, serving as a prototype of the cluster.'),\r\n(14, 'In pattern recognition, the k-nearest neighbors algorithm (k-NN) is a non-parametric method used for classification and regression.');\r\n\r\n\r\nALTER TABLE documents ADD COLUMN words TEXT[];\r\n\r\nUPDATE documents SET words = \r\n    regexp_split_to_array(lower(\r\n    regexp_replace(contents, E'[,.;\\']','', 'g')\r\n    ), E'[\\\\s+]');\r\n\r\n\r\nDROP TABLE IF EXISTS documents_tf, documents_tf_vocabulary;\r\n\r\nSELECT madlib.term_frequency('documents',    -- input table\r\n                             'docid',        -- document id column\r\n                             'words',        -- vector of words in document\r\n                             'documents_tf', -- output documents table with term frequency\r\n                             TRUE);          -- TRUE to created vocabulary table\r\n```\r\n\r\nTrain\r\n\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table \r\n                         384,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         100,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         1,                       -- Evaluate perplexity every n iterations\r\n                         0.1                      -- Stopping perplexity tolerance\r\n                       );\r\n\r\nSELECT voc_size, topic_num, alpha, beta, perplexity, perplexity_iters from lda_model_perp;\r\n\r\n-[ RECORD 1 ]----+--------------------------------------------------------------------------------------------------\r\nvoc_size         | 384\r\ntopic_num        | 5\r\nalpha            | 5\r\nbeta             | 0.01\r\nperplexity       | {195.764020671,194.317808815,193.208428811,188.2838923,188.384646897,189.849099875,189.939592275}\r\nperplexity_iters | {1,2,3,4,5,6,7}\r\n```\r\n\r\nPredict on input data\r\n\r\n```\r\nDROP TABLE IF EXISTS outdata_predict_perp;\r\n\r\nSELECT madlib.lda_predict( 'documents_tf',          -- Document to predict\r\n                           'lda_model_perp',             -- LDA model from training\r\n                           'outdata_predict_perp'                \r\n                         );\r\n\r\nSELECT madlib.lda_get_perplexity( 'lda_model_perp',\r\n                                  'outdata_predict_perp'\r\n                                );\r\n\r\n-[ RECORD 1 ]------+-----------------\r\nlda_get_perplexity | 192.569799335159\r\n```\r\n\r\nI would expect this to be `189.939592275` which is the last value in the array for perplexity at iteration 7.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547026743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547026871","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-547026871","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":547026871,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzAyNjg3MQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T16:22:27Z","updated_at":"2019-10-28T16:22:27Z","author_association":"NONE","body":"(4)\r\nUnnecessary verbose output\r\n\r\n```\r\nDROP TABLE IF EXISTS documents_tf, documents_tf_vocabulary;\r\n\r\nSELECT madlib.term_frequency('documents',    -- input table\r\n                             'docid',        -- document id column\r\n                             'words',        -- vector of words in document\r\n                             'documents_tf', -- output documents table with term frequency\r\n                             TRUE);          -- TRUE to created vocabulary table\r\n```\r\nproduces\r\n```\r\nNOTICE:  Table doesn't have 'DISTRIBUTED BY' clause. Creating a NULL policy entry.\r\nCONTEXT:  SQL statement \"\r\n                 CREATE TABLE documents_tf_vocabulary AS\r\n                 SELECT (row_number() OVER (order by word))::INTEGER - 1 as wordid,\r\n                        word::TEXT\r\n                 FROM (\r\n                    SELECT distinct(words) as word\r\n                    FROM (\r\n                          SELECT unnest(words::TEXT[]) as words\r\n                          FROM documents\r\n                    ) q1\r\n                ) q2\r\n                \"\r\nPL/Python function \"term_frequency\"\r\nNOTICE:  One or more columns in the following table(s) do not have statistics: documents\r\nHINT:  For non-partitioned tables, run analyze <table_name>(<column_list>). For partitioned tables, run analyze rootpartition <table_name>(<column_list>). See log for columns missing statistics.\r\nCONTEXT:  SQL statement \"\r\n                 CREATE TABLE documents_tf_vocabulary AS\r\n                 SELECT (row_number() OVER (order by word))::INTEGER - 1 as wordid,\r\n                        word::TEXT\r\n                 FROM (\r\n                    SELECT distinct(words) as word\r\n                    FROM (\r\n                          SELECT unnest(words::TEXT[]) as words\r\n                          FROM documents\r\n                    ) q1\r\n                ) q2\r\n                \"\r\nPL/Python function \"term_frequency\"\r\nNOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'docid' as the Greenplum Database data distribution key for this table.\r\nHINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.\r\nCONTEXT:  SQL statement \"\r\n        CREATE TABLE documents_tf(\r\n            docid INTEGER,\r\n            wordid INTEGER,\r\n            count INTEGER\r\n        )\r\n        \"\r\nPL/Python function \"term_frequency\"\r\nNOTICE:  One or more columns in the following table(s) do not have statistics: documents\r\nHINT:  For non-partitioned tables, run analyze <table_name>(<column_list>). For partitioned tables, run analyze rootpartition <table_name>(<column_list>). See log for columns missing statistics.\r\nCONTEXT:  SQL statement \"\r\n        INSERT INTO documents_tf\r\n            SELECT docid, w.wordid as wordid, word_count as count\r\n            FROM (\r\n                SELECT docid, word::TEXT, count(*) as word_count\r\n                FROM\r\n                (\r\n                    SELECT docid, unnest(words::TEXT[]) as word\r\n                    FROM documents\r\n                    WHERE\r\n                        docid IS NOT NULL\r\n                ) q1\r\n                GROUP BY docid, word\r\n            ) q2\r\n            \r\n            , documents_tf_vocabulary as w\r\n            WHERE\r\n                q2.word = w.word\r\n            \r\n        \"\r\nPL/Python function \"term_frequency\"\r\n                                      term_frequency                                      \r\n------------------------------------------------------------------------------------------\r\n Term frequency output in table documents_tf, vocabulary in table documents_tf_vocabulary\r\n(1 row)\r\n\r\nTime: 206.233 ms\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547026871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547039410","html_url":"https://github.com/apache/madlib/pull/434#issuecomment-547039410","issue_url":"https://api.github.com/repos/apache/madlib/issues/434","id":547039410,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzAzOTQxMA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T16:48:19Z","updated_at":"2019-10-28T16:48:19Z","author_association":"NONE","body":"@khannaekta please merge","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547039410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547088215","html_url":"https://github.com/apache/madlib/pull/434#issuecomment-547088215","issue_url":"https://api.github.com/repos/apache/madlib/issues/434","id":547088215,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzA4ODIxNQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T18:37:56Z","updated_at":"2019-10-28T18:37:56Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1119/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547088215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547525859","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-547525859","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":547525859,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzUyNTg1OQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T16:59:32Z","updated_at":"2019-10-29T23:52:09Z","author_association":"NONE","body":"There are issues with (4) (5) (6) (7) (8) (9) (10) below that need to be looked at:\r\n\r\n(1)\r\n- iris data\r\n- 2 MLP models (1 and 2 hidden layers)\r\n\r\n```\r\nSELECT * FROM mst_table ORDER BY mst_key;\r\n\r\n mst_key | model_id |                                 compile_params                                  |      fit_params\r\n---------+----------+---------------------------------------------------------------------------------+-----------------------\r\n       1 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']   | batch_size=4,epochs=1\r\n       2 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']   | batch_size=8,epochs=1\r\n       3 |        1 | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       4 |        1 | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n       5 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       6 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n       7 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']   | batch_size=4,epochs=1\r\n       8 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']   | batch_size=8,epochs=1\r\n       9 |        2 | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n      10 |        2 | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n      11 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n      12 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n(12 rows)\r\n```\r\n\r\nTrain\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                              10,                     -- num_iterations\r\n                                              0                       -- use gpus\r\n                                             );\r\nSELECT * FROM iris_multi_model_info ORDER BY training_metrics_final DESC;\r\n\r\n-[ RECORD 1 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 3\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.15962290763855,0.171411037445068,0.154904842376709,0.151599884033203,0.160181999206543,0.152440071105957,0.223697900772095,0.156054973602295\r\n,0.202955007553101,0.152594089508057}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.975000023842\r\ntraining_loss_final      | 0.0928164944053\r\ntraining_metrics         | {0.675000011920929,0.875,0.725000023841858,0.975000023841858,0.966666638851166,0.983333349227905,0.975000023841858,0.975000023841858,0.88333332\r\n5386047,0.975000023841858}\r\ntraining_loss            | {0.520763278007507,0.379715353250504,0.406634271144867,0.182054653763771,0.14105860888958,0.108805403113365,0.109423443675041,0.101339735090733\r\n,0.215542033314705,0.0928164944052696}\r\nvalidation_metrics_final | 0.933333337307\r\nvalidation_loss_final    | 0.196297511458\r\nvalidation_metrics       | {0.733333349227905,0.899999976158142,0.766666650772095,0.933333337306976,0.899999976158142,0.966666638851166,0.933333337306976,0.93333333730697\r\n6,0.800000011920929,0.933333337306976}\r\nvalidation_loss          | {0.487521052360535,0.348948538303375,0.474558025598526,0.232045486569405,0.22162064909935,0.155132472515106,0.202082633972168,0.196883022785187\r\n,0.382103145122528,0.196297511458397}\r\n-[ RECORD 2 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 10\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.183917045593262,0.373061180114746,0.182140111923218,0.177560091018677,0.192739009857178,0.177842140197754,0.201126098632812,0.17956304550170\r\n9,0.437918901443481,0.184372901916504}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.966666638851\r\ntraining_loss_final      | 0.182971566916\r\ntraining_metrics         | {0.658333361148834,0.658333361148834,0.858333349227905,0.691666662693024,0.983333349227905,0.958333313465118,0.800000011920929,0.91666668653488\r\n2,0.958333313465118,0.966666638851166}\r\ntraining_loss            | {0.839326024055481,0.552537620067596,0.427368670701981,0.395185142755508,0.339115768671036,0.288732022047043,0.310250341892242,0.31521281599998\r\n5,0.203457966446877,0.182971566915512}\r\nvalidation_metrics_final | 0.933333337307\r\nvalidation_loss_final    | 0.21536397934\r\nvalidation_metrics       | {0.699999988079071,0.699999988079071,0.766666650772095,0.733333349227905,0.899999976158142,0.866666674613953,0.766666650772095,0.89999997615814\r\n2,0.833333313465118,0.933333337306976}\r\nvalidation_loss          | {0.841938138008118,0.521961748600006,0.390463948249817,0.383590310811996,0.336574584245682,0.328944146633148,0.382724314928055,0.32695025205612\r\n2,0.299405694007874,0.2153639793396}\r\n-[ RECORD 3 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 4\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.158810138702393,0.171705007553101,0.157279968261719,0.149960994720459,0.161519050598145,0.151033163070679,0.167169094085693,0.15194702148437\r\n5,0.181770086288452,0.160482168197632}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.933333337307\r\ntraining_loss_final      | 0.109170868993\r\ntraining_metrics         | {0.658333361148834,0.933333337306976,0.983333349227905,0.933333337306976,0.933333337306976,0.983333349227905,0.983333349227905,0.98333334922790\r\n5,0.991666674613953,0.933333337306976}\r\ntraining_loss            | {0.703937888145447,0.404870539903641,0.223930105566978,0.183146089315414,0.137469902634621,0.0971243679523468,0.0983915776014328,0.095256045460\r\n701,0.0844478830695152,0.109170868992805}\r\nvalidation_metrics_final | 0.933333337307\r\nvalidation_loss_final    | 0.140566334128\r\nvalidation_metrics       | {0.699999988079071,0.899999976158142,0.899999976158142,0.899999976158142,0.933333337306976,0.899999976158142,0.899999976158142,0.89999997615814\r\n2,0.966666638851166,0.933333337306976}\r\nvalidation_loss          | {0.648390173912048,0.386223673820496,0.268760353326797,0.211181059479713,0.171986550092697,0.192580834031105,0.217913091182709,0.21975873410701\r\n8,0.143908932805061,0.14056633412838}\r\n-[ RECORD 4 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 9\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.184342861175537,0.186679124832153,0.178445100784302,0.198610067367554,0.179869174957275,0.176558017730713,0.191009998321533,0.18026208877563\r\n5,0.191850900650024,0.180068969726562}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.933333337307\r\ntraining_loss_final      | 0.132100492716\r\ntraining_metrics         | {0.658333361148834,0.966666638851166,0.916666686534882,0.899999976158142,0.708333313465118,0.966666638851166,0.975000023841858,0.875,0.97500002\r\n3841858,0.933333337306976}\r\ntraining_loss            | {0.645366847515106,0.232219696044922,0.187613621354103,0.240386798977852,0.561961591243744,0.117926396429539,0.0994494929909706,0.2343605309724\r\n81,0.0802617892622948,0.132100492715836}\r\nvalidation_metrics_final | 0.899999976158\r\nvalidation_loss_final    | 0.159418046474\r\nvalidation_metrics       | {0.699999988079071,0.866666674613953,0.833333313465118,0.800000011920929,0.733333349227905,0.933333337306976,0.933333337306976,0.86666667461395\r\n3,0.966666638851166,0.899999976158142}\r\nvalidation_loss          | {0.614455163478851,0.268589198589325,0.27994567155838,0.367912858724594,0.662781298160553,0.164628267288208,0.192523822188377,0.292809307575226\r\n,0.132961437106133,0.159418046474457}\r\n-[ RECORD 5 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 5\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.177564144134521,0.156223058700562,0.154070854187012,0.161600112915039,0.150278091430664,0.164193868637085,0.155445098876953,0.17075300216674\r\n8,0.155435085296631,0.153830051422119}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.899999976158\r\ntraining_loss_final      | 0.44444206357\r\ntraining_metrics         | {0.708333313465118,0.658333361148834,0.658333361148834,0.658333361148834,0.675000011920929,0.708333313465118,0.708333313465118,0.75833332538604\r\n7,0.766666650772095,0.899999976158142}\r\ntraining_loss            | {0.771447777748108,0.682944893836975,0.630482733249664,0.594800889492035,0.564319252967834,0.533434450626373,0.50351870059967,0.481856644153595\r\n,0.46294954419136,0.444442063570023}\r\nvalidation_metrics_final | 0.833333313465\r\nvalidation_loss_final    | 0.424488693476\r\nvalidation_metrics       | {0.766666650772095,0.699999988079071,0.699999988079071,0.699999988079071,0.733333349227905,0.733333349227905,0.733333349227905,0.73333334922790\r\n5,0.733333349227905,0.833333313465118}\r\nvalidation_loss          | {0.759826004505157,0.662849307060242,0.604207634925842,0.569091618061066,0.536879122257233,0.504582524299622,0.477831065654755,0.45702105760574\r\n3,0.440479785203934,0.424488693475723}\r\n-[ RECORD 6 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 2\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.16278600692749,0.154292821884155,0.161294937133789,0.153645992279053,0.164122104644775,0.152410984039307,0.396697998046875,0.154489994049072\r\n,0.15544605255127,0.164608001708984}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.783333361149\r\ntraining_loss_final      | 0.442915290594\r\ntraining_metrics         | {0.349999994039536,0.516666650772095,0.975000023841858,0.791666686534882,0.883333325386047,0.949999988079071,0.966666638851166,0.91666668653488\r\n2,0.966666638851166,0.783333361148834}\r\ntraining_loss            | {1.17399632930756,0.733614087104797,0.312711358070374,0.494298249483109,0.256883263587952,0.230874612927437,0.164221689105034,0.264884918928146\r\n,0.129683092236519,0.442915290594101}\r\nvalidation_metrics_final | 0.766666650772\r\nvalidation_loss_final    | 0.658641517162\r\nvalidation_metrics       | {0.300000011920929,0.433333337306976,0.933333337306976,0.866666674613953,0.899999976158142,0.966666638851166,1,0.866666674613953,0.899999976158\r\n142,0.766666650772095}\r\nvalidation_loss          | {1.40960335731506,0.879667580127716,0.289381295442581,0.503752708435059,0.241700142621994,0.224781185388565,0.176762118935585,0.270557969808578\r\n,0.220981314778328,0.658641517162323}\r\n-[ RECORD 7 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 7\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.375895977020264,0.179503917694092,0.181375026702881,0.18864917755127,0.181995868682861,0.197070121765137,0.178755044937134,0.419157028198242\r\n,0.185692071914673,0.178522109985352}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.75\r\ntraining_loss_final      | 0.37944367528\r\ntraining_metrics         | {0.658333361148834,0.658333361148834,0.958333313465118,0.658333361148834,0.616666674613953,0.416666656732559,0.875,0.966666638851166,0.98333334\r\n9227905,0.75}\r\ntraining_loss            | {0.564021706581116,0.656923830509186,0.410611629486084,0.657700955867767,0.783278226852417,0.938268542289734,0.240705713629723,0.19149164855480\r\n2,0.188495144248009,0.379443675279617}\r\nvalidation_metrics_final | 0.733333349228\r\nvalidation_loss_final    | 0.440304368734\r\nvalidation_metrics       | {0.699999988079071,0.699999988079071,0.933333337306976,0.699999988079071,0.633333325386047,0.366666674613953,0.766666650772095,0.96666663885116\r\n6,0.899999976158142,0.733333349227905}\r\nvalidation_loss          | {0.518877744674683,0.581225216388702,0.369613200426102,0.575586378574371,0.760259926319122,1.11823546886444,0.337272256612778,0.201485335826874\r\n,0.231084078550339,0.44030436873436}\r\n-[ RECORD 8 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 11\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.185693979263306,0.176743030548096,0.208944082260132,0.177680969238281,0.188605070114136,0.179240942001343,0.469206094741821,0.18075394630432\r\n1,0.182642936706543,0.18809700012207}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.716666638851\r\ntraining_loss_final      | 0.49047088623\r\ntraining_metrics         | {0.341666668653488,0.341666668653488,0.366666674613953,0.883333325386047,0.783333361148834,0.658333361148834,0.658333361148834,0.66666668653488\r\n2,0.866666674613953,0.716666638851166}\r\ntraining_loss            | {1.10631430149078,1.00225436687469,0.952353298664093,0.879558265209198,0.816462278366089,0.759344756603241,0.688487946987152,0.61039125919342,0\r\n.543096899986267,0.490470886230469}\r\nvalidation_metrics_final | 0.766666650772\r\nvalidation_loss_final    | 0.471391111612\r\nvalidation_metrics       | {0.300000011920929,0.300000011920929,0.333333343267441,0.766666650772095,0.766666650772095,0.699999988079071,0.733333349227905,0.73333334922790\r\n5,0.766666650772095,0.766666650772095}\r\nvalidation_loss          | {1.18413507938385,1.03528475761414,0.984834551811218,0.890941798686981,0.828823924064636,0.763210475444794,0.687682032585144,0.596106350421906,\r\n0.527397036552429,0.47139111161232}\r\n-[ RECORD 9 ]------------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 1\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.155688047409058,0.162626981735229,0.157097101211548,0.175328969955444,0.151535987854004,0.382455110549927,0.155317068099976,0.15313291549682\r\n6,0.161896944046021,0.154218196868896}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.658333361149\r\ntraining_loss_final      | 0.506188511848\r\ntraining_metrics         | {0.658333361148834,0.583333313465118,0.658333361148834,0.808333337306976,0.583333313465118,0.983333349227905,0.975000023841858,0.85833334922790\r\n5,0.666666686534882,0.658333361148834}\r\ntraining_loss            | {0.634293258190155,0.62472277879715,0.491173326969147,0.325925976037979,0.834470629692078,0.270386427640915,0.137209206819534,0.237895086407661\r\n,0.488089859485626,0.50618851184845}\r\nvalidation_metrics_final | 0.699999988079\r\nvalidation_loss_final    | 0.437518566847\r\nvalidation_metrics       | {0.699999988079071,0.633333325386047,0.699999988079071,0.766666650772095,0.633333325386047,0.933333337306976,0.933333337306976,0.89999997615814\r\n2,0.699999988079071,0.699999988079071}\r\nvalidation_loss          | {0.570496320724487,0.620569884777069,0.43601530790329,0.389920294284821,1.09760916233063,0.271371573209763,0.166262924671173,0.227906361222267,\r\n0.429942190647125,0.437518566846848}\r\n-[ RECORD 10 ]-----------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 6\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.175873041152954,0.155245065689087,0.154464960098267,0.171594858169556,0.157553195953369,0.162687063217163,0.155516862869263,0.16730904579162\r\n6,0.156662940979004,0.396471977233887}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.508333325386\r\ntraining_loss_final      | 0.915417551994\r\ntraining_metrics         | {0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.308333337306976,0.324999988079071,0.341666668653488,0.34166666865348\r\n8,0.358333319425583,0.508333325386047}\r\ntraining_loss            | {2.13231420516968,1.79814553260803,1.51453709602356,1.26933741569519,1.15679371356964,1.07199251651764,1.01928377151489,0.978273630142212,0.942\r\n150175571442,0.915417551994324}\r\nvalidation_metrics_final | 0.600000023842\r\nvalidation_loss_final    | 0.93969720602\r\nvalidation_metrics       | {0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.333333343267441,0.333333343267441,0.300000011920929,0.30000001192092\r\n9,0.333333343267441,0.600000023841858}\r\nvalidation_loss          | {2.51236271858215,2.09125304222107,1.73099553585052,1.41019690036774,1.26361191272736,1.14860534667969,1.07588887214661,1.01970684528351,0.9719\r\n77055072784,0.939697206020355}\r\n-[ RECORD 11 ]-----------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 12\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.184770822525024,0.191632032394409,0.178493022918701,0.391031980514526,0.181709051132202,0.17969799041748,0.191845893859863,0.179744958877563\r\n,0.199568033218384,0.178317070007324}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.341666668653\r\ntraining_loss_final      | 1.09104967117\r\ntraining_metrics         | {0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.34166666865348\r\n8,0.341666668653488,0.341666668653488}\r\ntraining_loss            | {3.08191418647766,2.32425045967102,1.79031324386597,1.4521062374115,1.26406502723694,1.19002187252045,1.14052081108093,1.11407339572906,1.10518\r\n69392395,1.0910496711731}\r\nvalidation_metrics_final | 0.300000011921\r\nvalidation_loss_final    | 1.09330034256\r\nvalidation_metrics       | {0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.30000001192092\r\n9,0.300000011920929,0.300000011920929}\r\nvalidation_loss          | {3.12394428253174,2.34826755523682,1.7957478761673,1.44716620445251,1.25600838661194,1.18111801147461,1.13339793682098,1.11054337024689,1.10561\r\n001300812,1.09330034255981}\r\n-[ RECORD 12 ]-----------+------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------------------------------------\r\nmst_key                  | 8\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.270622968673706,0.18524694442749,0.178076028823853,0.200053930282593,0.178044080734253,0.198669195175171,0.180491924285889,0.182524919509888\r\n,0.186138868331909,0.175627946853638}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.341666668653\r\ntraining_loss_final      | 1.09889221191\r\ntraining_metrics         | {0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.341666668653488,0.34166666865348\r\n8,0.316666662693024,0.341666668653488}\r\ntraining_loss            | {1.09904658794403,1.10012602806091,1.10846817493439,1.09847903251648,1.10446727275848,1.10296499729156,1.097984790802,1.10039520263672,1.103934\r\n88407135,1.09889221191406}\r\nvalidation_metrics_final | 0.300000011921\r\nvalidation_loss_final    | 1.10708355904\r\nvalidation_metrics       | {0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.300000011920929,0.30000001192092\r\n9,0.400000005960464,0.300000011920929}\r\nvalidation_loss          | {1.10612213611603,1.11198484897614,1.12145566940308,1.10108768939972,1.09653890132904,1.12743330001831,1.10469746589661,1.11833906173706,1.0917\r\n9925918579,1.10708355903625}\r\n```\r\nseems OK\r\n\r\n\r\n(2)\r\nevaluate on test data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model',  -- model\r\n                                    'iris_test_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     9                   -- mst_key to use\r\n                                   );\r\nSELECT * FROM iris_validate;\r\n\r\n       loss        |      metric       | metrics_type\r\n-------------------+-------------------+--------------\r\n 0.159418046474457 | 0.899999976158142 | {accuracy}\r\n(1 row)\r\n```\r\n\r\nseems OK, matches final acc and loss for model 9 on validation data during training\r\n\r\n\r\n(3)\r\nevaluate on training data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model',  -- model\r\n                                    'iris_train_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     9                   -- mst_key to use\r\n                                   );\r\nSELECT * FROM iris_validate;\r\n\r\n       loss        |      metric       | metrics_type\r\n-------------------+-------------------+--------------\r\n 0.132100492715836 | 0.933333337306976 | {accuracy}\r\n(1 row)\r\n\r\n```\r\n\r\nseems OK, matches final acc and loss for model 9 on training data during training\r\n\r\n\r\n\r\n(4)\r\npredict on training data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_predict;\r\n\r\nSELECT madlib.madlib_keras_predict('iris_multi_model', -- model\r\n                                   'iris_train',  -- train_table\r\n                                   'id',         -- id column\r\n                                   'attributes', -- independent var\r\n                                   'iris_predict',  -- output table\r\n                                    'response',  -- prediction type\r\n                                    NULL,        -- use gpus\r\n                                    9            -- mst_key to use\r\n                                   );\r\n\r\nSELECT COUNT(*) FROM iris_predict JOIN iris_train USING (id)\r\nWHERE iris_predict.estimated_class_text != iris_train.class_text;\r\n\r\n\r\n count\r\n-------\r\n    34\r\n```\r\n\r\nerror %\r\n\r\n```\r\nSELECT round(count(*)*100/(150*0.8),2) as train_accuracy_percent from\r\n    (select iris_train.class_text as actual, iris_predict.estimated_class_text as estimated\r\n     from iris_predict inner join iris_train\r\n     on iris_train.id=iris_predict.id) q\r\nWHERE q.actual=q.estimated;\r\n\r\n train_accuracy_percent\r\n------------------------\r\n                  71.67\r\n```\r\n\r\nWhy is this not 0.933333337306976 ???\r\n\r\n\r\n(5)\r\npredict on test data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_predict;\r\n\r\nSELECT madlib.madlib_keras_predict('iris_multi_model', -- model\r\n                                   'iris_test',  -- test_table\r\n                                   'id',         -- id column\r\n                                   'attributes', -- independent var\r\n                                   'iris_predict',  -- output table\r\n                                    'response',  -- prediction type\r\n                                    NULL,        -- use gpus\r\n                                    9            -- mst_key to use\r\n                                   );\r\n\r\nSELECT COUNT(*) FROM iris_predict JOIN iris_test USING (id) \r\nWHERE iris_predict.estimated_class_text != iris_test.class_text;\r\n\r\n count \r\n-------\r\n     7\r\n(1 row)\r\n```\r\n\r\nas a %\r\n\r\n```\r\nSELECT round(count(*)*100/(150*0.2),2) as test_accuracy_percent from\r\n    (select iris_test.class_text as actual, iris_predict.estimated_class_text as estimated\r\n     from iris_predict inner join iris_test\r\n     on iris_test.id=iris_predict.id) q\r\nWHERE q.actual=q.estimated;\r\n\r\n test_accuracy_percent \r\n-----------------------\r\n                 76.67\r\n(1 row)\r\n```\r\n\r\nWhy is this not 0.899999976158142 ???\r\n\r\n\r\n(6)\r\npredict is giving warning errors which should be suppressed\r\n\r\n```\r\nWARNING:  column \"attributes_shape\" does not exist\r\nCONTEXT:  PL/Python function \"madlib_keras_predict\"\r\n madlib_keras_predict\r\n----------------------\r\n```\r\n\r\nPlease check other functions in this module to ensure the right level of console reporting is set.\r\n\r\n\r\n(7)\r\npick wrong model\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model',  -- model\r\n                                    'iris_test_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     999                   -- mst_key to use\r\n                                   );\r\n\r\nERROR:  plpy.Error: madlib_keras_evaluate error: Input table '__madlib_temp_tmp_view_summary39503791_1572367130_16846764__' is empty! (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_evaluate\", line 21, in <module>\r\n    return madlib_keras.evaluate(**globals())\r\n  PL/Python function \"madlib_keras_evaluate\", line 577, in evaluate\r\n  PL/Python function \"madlib_keras_evaluate\", line 628, in validate_evaluate\r\n  PL/Python function \"madlib_keras_evaluate\", line 59, in validate_predict_evaluate_tables\r\n  PL/Python function \"madlib_keras_evaluate\", line 218, in _validate_model_summary_tbl\r\n  PL/Python function \"madlib_keras_evaluate\", line 678, in input_tbl_valid\r\nPL/Python function \"madlib_keras_evaluate\"\r\n```\r\n\r\nThis error is misleading - should say that 999 is not a valid mst_key or model or whatever.\r\n\r\n\r\n(8)\r\ninput table does not exist\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model999',  -- model\r\n                                    'iris_test_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     9                   -- mst_key to use\r\n                                   );\r\n\r\nERROR:  NameError: global name 'module_name' is not defined (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_evaluate\", line 21, in <module>\r\n    return madlib_keras.evaluate(**globals())\r\n  PL/Python function \"madlib_keras_evaluate\", line 575, in evaluate\r\n  PL/Python function \"madlib_keras_evaluate\", line 237, in create_summary_view\r\nPL/Python function \"madlib_keras_evaluate\"\r\n```\r\n\r\nThis error is misleading - should say source table `iris_multi_model999` does not exist\r\n\r\n\r\n(9)\r\nplease do a general check that we are trapping input errors in the usual way for fit, predict and evaluate. I did not test them all.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547525859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547532304","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-547532304","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":547532304,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzUzMjMwNA==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T17:12:30Z","updated_at":"2019-10-29T17:12:30Z","author_association":"CONTRIBUTOR","body":"@orhankislal \r\n\r\n@khannaekta  has already fixed issue 6  ` predict is giving warning errors which should be suppressed`, the PR for which should be out soon. You don't have to fix that in this PR","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547532304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547549917","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-547549917","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":547549917,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzU0OTkxNw==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T17:51:25Z","updated_at":"2019-10-29T17:51:25Z","author_association":"MEMBER","body":"> DROP TABLE IF EXISTS documents_tf, documents_tf_vocabulary;\r\n> \r\n> SELECT madlib.term_frequency('documents',    -- input table\r\n>                              'docid',        -- document id column\r\n>                              'words',        -- vector of words in document\r\n>                              'documents_tf', -- output documents table with term frequency\r\n>                              TRUE);\r\n\r\n@fmcquillan99 I don't see a verbose output when I am running the above query. Are you running it in  GPDB or postgres?\r\n\r\n```\r\npostgres=# DROP TABLE IF EXISTS documents_tf, documents_tf_vocabulary;\r\nDROP TABLE\r\npostgres=# \r\npostgres=# SELECT madlib.term_frequency('documents',    -- input table\r\npostgres(#                              'docid',        -- document id column\r\npostgres(#                              'words',        -- vector of words in document\r\npostgres(#                              'documents_tf', -- output documents table with term frequency\r\npostgres(#                              TRUE);          \r\n                                      term_frequency                                      \r\n------------------------------------------------------------------------------------------\r\n Term frequency output in table documents_tf, vocabulary in table documents_tf_vocabulary\r\n(1 row)\r\n\r\npostgres=# \r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547549917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547560220","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-547560220","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":547560220,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzU2MDIyMA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T18:14:59Z","updated_at":"2019-10-29T18:14:59Z","author_association":"NONE","body":"@hpandeycodeit  I was running on GP5 from psql","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547560220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547654726","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-547654726","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":547654726,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzY1NDcyNg==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T22:20:00Z","updated_at":"2019-10-29T22:20:00Z","author_association":"MEMBER","body":"> @hpandeycodeit I was running on GP5 from psql\r\n\r\nSo this is not in LDA code. This is the part of GPDB 5. If a table does not have stats, it prints out the messages about the no stats. Once the stats are updated(run analyze on these tables), and run the above sql again,  these messages disappear. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547654726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547677448","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-547677448","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":547677448,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzY3NzQ0OA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T23:44:47Z","updated_at":"2019-10-29T23:53:15Z","author_association":"NONE","body":"(10)\r\nIn the model summary table, we don't need these 2 columns at all:\r\n```\r\n       Column        |            Type             | Modifiers \r\n---------------------+-----------------------------+-----------\r\n model               | text                        | \r\n model_info          | text                        | \r\n```","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/547677448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548055804","html_url":"https://github.com/apache/madlib/pull/454#issuecomment-548055804","issue_url":"https://api.github.com/repos/apache/madlib/issues/454","id":548055804,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA1NTgwNA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T18:38:21Z","updated_at":"2019-10-30T18:38:21Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1120/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548055804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548576089","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-548576089","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":548576089,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU3NjA4OQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T21:27:36Z","updated_at":"2019-10-31T21:27:36Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1121/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548576089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548587383","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-548587383","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":548587383,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODU4NzM4Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T22:03:41Z","updated_at":"2019-10-31T22:03:41Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1122/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548587383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548876785","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-548876785","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":548876785,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg3Njc4NQ==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:25:31Z","updated_at":"2019-11-01T17:25:31Z","author_association":"MEMBER","body":"@fmcquillan99, \r\n\r\nIn `lda_predict ` although the model table remains the same, it randomly initializes the output table. That is why we are seeing the difference in the perplexity values from what is calculated in `lda_train` vs `get_perplexity()`\r\n\r\nHowever, if the same output table(generated by `lda_train`) is passed to the `get_perplexity()` function, the perplexity values match. For eg: \r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table \r\n                         385,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         10,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         1,                       -- Evaluate perplexity every n iterations\r\n                         .2                      -- Stopping perplexity tolerance\r\n                       );\r\n\r\n```\r\n\r\nGenerates the following perplexity values with the last perplexity value **179.380131412**: \r\n\r\n```\r\npostgres=# select perplexity from lda_model_perp ;\r\n                                                                  perplexity                                                                  \r\n----------------------------------------------------------------------------------------------------------------------------------------------\r\n {196.940707618,193.245742228,191.155602156,185.314159394,182.901929923,187.283749958,186.944341124,185.508311039,185.72038473,179.380131412}\r\n(1 row)\r\n\r\n```\r\n\r\nNow running the `get_perplexity()` on the above-generated output table  `lda_output_data_perp` produces the following perplexity:\r\n\r\n```\r\npostgres=# SELECT madlib.lda_get_perplexity( 'lda_model_perp',\r\npostgres(#                                   'lda_output_data_perp'\r\npostgres(#                                 );\r\n lda_get_perplexity \r\n--------------------\r\n   179.380131412469\r\n```\r\n\r\nwhich matches the last perplexity value calculated by `lda_train`\r\n\r\nThanks! \r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548876785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548876910","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-548876910","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":548876910,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg3NjkxMA==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:25:55Z","updated_at":"2019-11-01T17:25:55Z","author_association":"MEMBER","body":"> (1)\r\n> Please add `num_iterations` to the output table. This is needed now because\r\n> we have a perplexity tolerance, so training may not run the maximum number of iterations\r\n> specified. The model table should look like:\r\n> \r\n> ```\r\n> model_table\r\n> ...\r\n> model\tBIGINT[]. The encoded model ...etc...\r\n> num_iterations\tINTEGER. Number of iterations that training ran for,\r\n> which may be less than the maximum value specified in the parameter 'iter_num' if\r\n> the perplexity tolerance was reached.\r\n> perplexity\tDOUBLE PRECISION[] Array of ...etc....\r\n> ...\r\n> ```\r\n> \r\n> (2)\r\n> The parameter 'perplexity_tol' can be any value >= 0.0 Currently it errors out below a\r\n> value of 0.1 which is not correct. I may want to set it to 0.0 so that training runs\r\n> for the full number of iterations. So please change it to error out if 'perplexity_tol'<0.\r\n> \r\n> ```\r\n> DROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n> \r\n> SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n>                          'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n>                          'lda_output_data_perp',  -- readable output data table\r\n>                          103,                     -- vocabulary size\r\n>                          5,                       -- number of topics\r\n>                          10,                      -- number of iterations\r\n>                          5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n>                          0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n>                          2,                       -- Evaluate perplexity every 2 iterations\r\n>                          0.0                      -- Set tolerance to 0 so runs full number of iterations\r\n>                        );\r\n> ```\r\n> \r\n> produces\r\n> \r\n> ```\r\n> InternalError: (psycopg2.InternalError) plpy.Error: invalid argument: perplexity_tol should not be less than .1 (plpython.c:5038)\r\n> CONTEXT:  Traceback (most recent call last):\r\n>   PL/Python function \"lda_train\", line 22, in <module>\r\n>     voc_size, topic_num, iter_num, alpha, beta,evaluate_every , perplexity_tol)\r\n>   PL/Python function \"lda_train\", line 519, in lda_train\r\n>   PL/Python function \"lda_train\", line 96, in _assert\r\n> PL/Python function \"lda_train\"\r\n>  [SQL: \"SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\\n                         'lda_output_data_perp',  -- readable output data table \\n                         103,                     -- vocabulary size\\n                         5,                       -- number of topics\\n                         10,                      -- number of iterations\\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\\n                         2,                       -- Evaluate perplexity every 2 iterations\\n                         0.0                      -- Set tolerance to 0 so runs full number of iterations\\n                       );\"]\r\n> ```\r\n\r\nThis is fixed. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548876910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548883081","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-548883081","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":548883081,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg4MzA4MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:41:58Z","updated_at":"2019-11-01T17:41:58Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1123/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548883081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548897385","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-548897385","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":548897385,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg5NzM4NQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T18:20:56Z","updated_at":"2019-11-01T18:20:56Z","author_association":"NONE","body":"(5) \r\niteration number does not match when early termination\r\n```madlib=# SELECT voc_size, topic_num, alpha, beta, num_iterations, perplexity, perplexity_iters from lda_model_perp;\r\n-[ RECORD 1 ]----+----------------------------------------------------------\r\nvoc_size         | 384\r\ntopic_num        | 5\r\nalpha            | 5\r\nbeta             | 0.01\r\nnum_iterations   | 5\r\nperplexity       | {199.746367293,193.662852162,190.782567914,189.245695537}\r\nperplexity_iters | {1,2,3,4}\r\n\r\nTime: 38.941 ms\r\n```\r\nI think `num_iterations ` should be 4 ?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548897385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548912324","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-548912324","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":548912324,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODkxMjMyNA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T19:02:16Z","updated_at":"2019-11-01T19:02:55Z","author_association":"NONE","body":"(6)  \r\nNULLs not being handled properly\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table \r\n                         384,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         20,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         NULL,                    -- Evaluate perplexity every n iterations\r\n                         NULL                     -- Stopping perplexity tolerance\r\n                       );\r\n\r\nInternalError: (psycopg2.InternalError) plpy.Error: invalid argument: perplexity_tol should not be less than 0 (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"lda_train\", line 22, in <module>\r\n    voc_size, topic_num, iter_num, alpha, beta,evaluate_every , perplexity_tol)\r\n  PL/Python function \"lda_train\", line 525, in lda_train\r\n  PL/Python function \"lda_train\", line 96, in _assert\r\nPL/Python function \"lda_train\"\r\n [SQL: \"SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\\n                         'lda_output_data_perp',  -- readable output data table \\n                         384,                     -- vocabulary size\\n                         5,                        -- number of topics\\n                         20,                      -- number of iterations\\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\\n                         NULL,                       -- Evaluate perplexity every n iterations\\n                         NULL                      -- Stopping perplexity tolerance\\n                       );\"]\r\n```\r\n\r\nPlease implement as per\r\n```\r\nevaluate_every (optional)\r\nINTEGER, default: 0. How often to evaluate perplexity. Set it to 0 or a negative number to not evaluate perplexity in training at all. Evaluating perplexity can help you check convergence during the training process, but it will also increase total training time. For example, evaluating perplexity in every iteration might increase training time up to two-fold.\r\nperplexity_tol (optional)\r\nDOUBLE PRECISION, default: 0.1. Perplexity tolerance to stop iteration. Only used when the parameter 'evaluate_every' is greater than 0.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548912324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548939087","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-548939087","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":548939087,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODkzOTA4Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T20:27:42Z","updated_at":"2019-11-01T20:27:42Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1124/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548939087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548977675","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-548977675","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":548977675,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODk3NzY3NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T22:57:42Z","updated_at":"2019-11-01T22:57:42Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1125/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/548977675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549470696","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-549470696","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":549470696,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTQ3MDY5Ng==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T17:52:01Z","updated_at":"2019-11-04T17:52:01Z","author_association":"NONE","body":"Please add a test so evaluate / predict match the accuracy from train, when fed the training data set.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549470696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549508646","html_url":"https://github.com/apache/madlib/pull/454#issuecomment-549508646","issue_url":"https://api.github.com/repos/apache/madlib/issues/454","id":549508646,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTUwODY0Ng==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T19:25:39Z","updated_at":"2019-11-04T19:25:39Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1126/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549508646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549540353","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-549540353","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":549540353,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTU0MDM1Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T20:49:09Z","updated_at":"2019-11-04T20:49:09Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1127/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549540353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549555785","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549555785","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549555785,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTU1NTc4NQ==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T21:29:55Z","updated_at":"2019-11-04T21:29:55Z","author_association":"MEMBER","body":"> (6)\r\n> NULLs not being handled properly\r\n> \r\n> ```\r\n> DROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n> \r\n> SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n>                          'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n>                          'lda_output_data_perp',  -- readable output data table \r\n>                          384,                     -- vocabulary size\r\n>                          5,                        -- number of topics\r\n>                          20,                      -- number of iterations\r\n>                          5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n>                          0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n>                          NULL,                    -- Evaluate perplexity every n iterations\r\n>                          NULL                     -- Stopping perplexity tolerance\r\n>                        );\r\n> \r\n> InternalError: (psycopg2.InternalError) plpy.Error: invalid argument: perplexity_tol should not be less than 0 (plpython.c:5038)\r\n> CONTEXT:  Traceback (most recent call last):\r\n>   PL/Python function \"lda_train\", line 22, in <module>\r\n>     voc_size, topic_num, iter_num, alpha, beta,evaluate_every , perplexity_tol)\r\n>   PL/Python function \"lda_train\", line 525, in lda_train\r\n>   PL/Python function \"lda_train\", line 96, in _assert\r\n> PL/Python function \"lda_train\"\r\n>  [SQL: \"SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\\n                         'lda_output_data_perp',  -- readable output data table \\n                         384,                     -- vocabulary size\\n                         5,                        -- number of topics\\n                         20,                      -- number of iterations\\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\\n                         NULL,                       -- Evaluate perplexity every n iterations\\n                         NULL                      -- Stopping perplexity tolerance\\n                       );\"]\r\n> ```\r\n> \r\n> Please implement as per\r\n> \r\n> ```\r\n> evaluate_every (optional)\r\n> INTEGER, default: 0. How often to evaluate perplexity. Set it to 0 or a negative number to not evaluate perplexity in training at all. Evaluating perplexity can help you check convergence during the training process, but it will also increase total training time. For example, evaluating perplexity in every iteration might increase training time up to two-fold.\r\n> perplexity_tol (optional)\r\n> DOUBLE PRECISION, default: 0.1. Perplexity tolerance to stop iteration. Only used when the parameter 'evaluate_every' is greater than 0.\r\n> ```\r\n\r\nFixed this and num_iterations. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549555785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549566751","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-549566751","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":549566751,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTU2Njc1MQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T21:59:52Z","updated_at":"2019-11-04T22:00:17Z","author_association":"NONE","body":"LGTM\r\n\r\nRetesting after last commits (4) (5) (6) (7) (8) (9) (10) below seems OK:\r\n\r\n(1) review after recent commit\r\nneeded to re-run to get new results:\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\n\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                              10,                     -- num_iterations\r\n                                              0,                     -- use gpus\r\n                                              'iris_test_packed'      -- validation dataset\r\n                                             );\r\n\r\nSELECT * FROM iris_multi_model_info ORDER BY training_metrics_final DESC;\r\n\r\n-[ RECORD 1 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 2\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.16501784324646,0.154597043991089,0.158796072006226,0.171799898147583,0.168801069259644,0.160946846008301,0.168446063995361,0.249520063400269,0.723811149597168,\r\n0.157901048660278}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.975000023842\r\ntraining_loss_final      | 0.184436321259\r\ntraining_metrics         | {0.666666686534882,0.708333313465118,0.975000023841858,0.975000023841858,0.458333343267441,0.666666686534882,0.666666686534882,0.716666638851166,0.816666662693024\r\n,0.975000023841858}\r\ntraining_loss            | {0.654977560043335,0.473680555820465,0.407350271940231,0.344571173191071,1.01371514797211,0.536512732505798,0.542378485202789,0.427120715379715,0.301178097724915,\r\n0.184436321258545}\r\nvalidation_metrics_final | 0.966666638851\r\nvalidation_loss_final    | 0.229953154922\r\nvalidation_metrics       | {0.666666686534882,0.633333325386047,0.933333337306976,0.933333337306976,0.333333343267441,0.666666686534882,0.666666686534882,0.666666686534882,0.800000011920929\r\n,0.966666638851166}\r\nvalidation_loss          | {0.632323026657104,0.544658362865448,0.475189208984375,0.403949052095413,1.15320909023285,0.571010947227478,0.57290381193161,0.472318321466446,0.329961955547333,0\r\n.229953154921532}\r\n-[ RECORD 2 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 6\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.151521921157837,0.170912981033325,0.162657022476196,0.154775142669678,0.152937889099121,0.15539813041687,0.167464017868042,0.155567169189453,0.182074785232544,\r\n0.164788961410522}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.933333337307\r\ntraining_loss_final      | 0.653343558311\r\ntraining_metrics         | {0.00833333376795053,0.133333340287209,0.358333319425583,0.491666674613953,0.75,0.958333313465118,0.958333313465118,0.949999988079071,0.908333361148834,0.93333333\r\n7306976}\r\ntraining_loss            | {1.24945497512817,1.10760903358459,1.04750990867615,0.997703850269318,0.913850665092468,0.828234732151031,0.770057380199432,0.728686928749084,0.687141954898834,0.\r\n653343558311462}\r\nvalidation_metrics_final | 0.833333313465\r\nvalidation_loss_final    | 0.668307900429\r\nvalidation_metrics       | {0,0.100000001490116,0.433333337306976,0.566666662693024,0.766666650772095,0.899999976158142,0.899999976158142,0.866666674613953,0.800000011920929,0.8333333134651\r\n18}\r\nvalidation_loss          | {1.30171895027161,1.11200094223022,1.03035044670105,1.00190925598145,0.922983944416046,0.828430116176605,0.771750569343567,0.736835598945618,0.698546707630157,0.6\r\n68307900428772}\r\n-[ RECORD 3 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 8\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.178833961486816,0.178119897842407,0.193637132644653,0.183725118637085,0.181838989257812,0.190093994140625,0.190335988998413,0.183039903640747,0.189705848693848\r\n,0.196530103683472}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.925000011921\r\ntraining_loss_final      | 0.191128313541\r\ntraining_metrics         | {0.675000011920929,0.699999988079071,0.708333313465118,0.850000023841858,0.691666662693024,0.966666638851166,0.949999988079071,0.858333349227905,0.766666650772095\r\n,0.925000011920929}\r\ntraining_loss            | {1.00050187110901,0.477404177188873,0.449770420789719,0.367935240268707,0.715284705162048,0.233321651816368,0.206968143582344,0.247707515954971,0.513520300388336,\r\n0.191128313541412}\r\nvalidation_metrics_final | 0.899999976158\r\nvalidation_loss_final    | 0.238029867411\r\nvalidation_metrics       | {0.566666662693024,0.666666686534882,0.666666686534882,0.833333313465118,0.566666662693024,0.966666638851166,0.933333337306976,0.866666674613953,0.699999988079071\r\n,0.899999976158142}\r\nvalidation_loss          | {1.10490369796753,0.515014708042145,0.473093926906586,0.429382801055908,0.964671075344086,0.282983720302582,0.234358683228493,0.304766476154327,0.506977200508118,\r\n0.23802986741066}\r\n-[ RECORD 4 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 9\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.179304122924805,0.177167892456055,0.197530031204224,0.186438083648682,0.183886051177979,0.179242849349976,0.261205911636353,0.180387020111084,0.190798997879028\r\n,0.199844121932983}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.925000011921\r\ntraining_loss_final      | 0.129962354898\r\ntraining_metrics         | {0.666666686534882,0.875,0.975000023841858,0.758333325386047,0.966666638851166,0.800000011920929,0.966666638851166,0.983333349227905,0.966666638851166,0.925000011\r\n920929}\r\ntraining_loss            | {0.631272912025452,0.311742216348648,0.201621904969215,0.389256983995438,0.119620576500893,0.486419379711151,0.105227634310722,0.0892100557684898,0.13771826028823\r\n9,0.129962354898453}\r\nvalidation_metrics_final | 1\r\nvalidation_loss_final    | 0.099272236228\r\nvalidation_metrics       | {0.666666686534882,0.833333313465118,0.966666638851166,0.733333349227905,0.899999976158142,0.733333349227905,0.899999976158142,0.966666638851166,0.866666674613953\r\n,1}\r\nvalidation_loss          | {0.655599772930145,0.343398422002792,0.23225425183773,0.460039615631104,0.179262787103653,0.432839661836624,0.164745837450027,0.110677324235439,0.236034005880356,\r\n0.0992722362279892}\r\n-[ RECORD 5 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 12\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.179224967956543,0.178079128265381,0.202226161956787,0.190601825714111,0.179889917373657,0.182010173797607,0.223275899887085,0.186384916305542,0.1926109790802,0\r\n.205245018005371}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.916666686535\r\ntraining_loss_final      | 0.557382702827\r\ntraining_metrics         | {0.400000005960464,0.466666668653488,0.641666650772095,0.758333325386047,0.850000023841858,0.875,0.866666674613953,0.908333361148834,0.908333361148834,0.916666686\r\n534882}\r\ntraining_loss            | {1.03677904605865,0.961223006248474,0.898576974868774,0.84269106388092,0.784159600734711,0.72914981842041,0.679587423801422,0.637798070907593,0.592370092868805,0.\r\n557382702827454}\r\nvalidation_metrics_final | 0.933333337307\r\nvalidation_loss_final    | 0.633718490601\r\nvalidation_metrics       | {0.233333334326744,0.333333343267441,0.433333337306976,0.666666686534882,0.800000011920929,0.933333337306976,1,0.933333337306976,0.966666638851166,0.9333333373069\r\n76}\r\nvalidation_loss          | {1.07957482337952,1.01587510108948,0.959396243095398,0.91132265329361,0.857007622718811,0.808456540107727,0.762722790241241,0.718301713466644,0.671158373355865,0.\r\n633718490600586}\r\n-[ RECORD 6 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 10\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.185405015945435,0.240031957626343,0.179027080535889,0.188817024230957,0.186041116714478,0.189532041549683,0.191230058670044,0.189625978469849,0.199972867965698\r\n,0.184904098510742}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.899999976158\r\ntraining_loss_final      | 0.202067151666\r\ntraining_metrics         | {0.691666662693024,0.675000011920929,0.691666662693024,0.875,0.899999976158142,0.983333349227905,0.983333349227905,0.908333361148834,0.933333337306976,0.899999976\r\n158142}\r\ntraining_loss            | {0.936435461044312,0.705836236476898,0.493957877159119,0.422138810157776,0.360373467206955,0.24227599799633,0.1996029317379,0.195797547698021,0.160537555813789,0.\r\n202067151665688}\r\nvalidation_metrics_final | 1\r\nvalidation_loss_final    | 0.204844340682\r\nvalidation_metrics       | {0.566666662693024,0.566666662693024,0.566666662693024,0.833333313465118,1,0.966666638851166,0.933333337306976,1,1,1}\r\nvalidation_loss          | {0.968072831630707,0.788067102432251,0.579671025276184,0.491580307483673,0.424855649471283,0.284231871366501,0.230658054351807,0.215303242206573,0.172062397003174\r\n,0.20484434068203}\r\n-[ RECORD 7 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 4\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=8,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.158287048339844,0.155457973480225,0.576164960861206,0.162032127380371,0.15852689743042,0.156464099884033,0.161139965057373,0.160786867141724,0.167949914932251,\r\n0.656886100769043}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.899999976158\r\ntraining_loss_final      | 0.169732123613\r\ntraining_metrics         | {0.666666686534882,0.666666686534882,0.816666662693024,0.991666674613953,0.741666674613953,0.899999976158142,0.925000011920929,0.741666674613953,0.983333349227905\r\n,0.899999976158142}\r\ntraining_loss            | {0.76077276468277,0.5220667719841,0.420222669839859,0.327254116535187,0.341780602931976,0.252596199512482,0.206999227404594,0.435290902853012,0.150588378310204,0.\r\n169732123613358}\r\nvalidation_metrics_final | 1\r\nvalidation_loss_final    | 0.175337061286\r\nvalidation_metrics       | {0.666666686534882,0.666666686534882,0.666666686534882,0.933333337306976,0.666666686534882,0.833333313465118,1,0.633333325386047,0.966666638851166,1}\r\nvalidation_loss          | {0.767970025539398,0.556378245353699,0.499317765235901,0.392887800931931,0.395217329263687,0.307017415761948,0.249646931886673,0.518399477005005,0.179019212722778\r\n,0.175337061285973}\r\n-[ RECORD 8 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 5\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.152910947799683,0.177506923675537,0.163512945175171,0.153976917266846,0.15569806098938,0.155301809310913,0.166845083236694,0.15528392791748,0.162101984024048,0\r\n.198511123657227}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.875\r\ntraining_loss_final      | 0.530299961567\r\ntraining_metrics         | {0.333333343267441,0.191666662693024,0.508333325386047,0.791666686534882,0.883333325386047,0.816666662693024,0.875,0.783333361148834,0.75,0.875}\r\ntraining_loss            | {1.42261958122253,1.11098456382751,0.942022323608398,0.839245975017548,0.778925061225891,0.719573795795441,0.665915071964264,0.617532074451447,0.570941388607025,0\r\n.530299961566925}\r\nvalidation_metrics_final | 0.866666674614\r\nvalidation_loss_final    | 0.546338915825\r\nvalidation_metrics       | {0.333333343267441,0.16666667163372,0.400000005960464,0.833333313465118,0.899999976158142,0.833333313465118,0.899999976158142,0.833333313465118,0.699999988079071,\r\n0.866666674613953}\r\nvalidation_loss          | {1.58205306529999,1.19787907600403,0.984605967998505,0.874651849269867,0.803973138332367,0.732114672660828,0.681202590465546,0.62757009267807,0.578481078147888,0.\r\n54633891582489}\r\n-[ RECORD 9 ]------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 3\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.155992031097412,0.153978109359741,0.572959899902344,0.162055015563965,0.155320167541504,0.156923055648804,0.163105964660645,0.161538124084473,0.168941020965576\r\n,0.654891967773438}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.824999988079\r\ntraining_loss_final      | 0.347870081663\r\ntraining_metrics         | {0.633333325386047,0.766666650772095,0.666666686534882,0.666666686534882,0.691666662693024,0.691666662693024,0.908333361148834,0.899999976158142,0.675000011920929\r\n,0.824999988079071}\r\ntraining_loss            | {0.815440833568573,0.520094633102417,0.449681550264359,0.457792103290558,0.437296599149704,0.43956533074379,0.400028377771378,0.407060354948044,0.410939812660217,\r\n0.347870081663132}\r\nvalidation_metrics_final | 0.800000011921\r\nvalidation_loss_final    | 0.418093115091\r\nvalidation_metrics       | {0.600000023841858,0.666666686534882,0.666666686534882,0.666666686534882,0.566666662693024,0.566666662693024,0.833333313465118,0.866666674613953,0.666666686534882\r\n,0.800000011920929}\r\nvalidation_loss          | {0.782467901706696,0.585534811019897,0.514401435852051,0.50047355890274,0.542211294174194,0.564250826835632,0.486649245023727,0.488315939903259,0.454440474510193,\r\n0.418093115091324}\r\n-[ RECORD 10 ]-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 1\r\nmodel_id                 | 1\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 0.7900390625\r\nmetrics_elapsed_time     | {0.154391050338745,0.155292987823486,0.166854858398438,0.157708883285522,0.15703010559082,0.15372896194458,0.161499977111816,0.15468692779541,0.163357973098755,0.\r\n166243076324463}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.716666638851\r\ntraining_loss_final      | 0.498635411263\r\ntraining_metrics         | {0.666666686534882,0.666666686534882,0.816666662693024,0.991666674613953,0.824999988079071,0.933333337306976,0.824999988079071,0.975000023841858,0.816666662693024\r\n,0.716666638851166}\r\ntraining_loss            | {0.597955822944641,0.43520125746727,0.371508300304413,0.0662390738725662,0.332939654588699,0.406542897224426,0.290035516023636,0.127334654331207,0.290014386177063\r\n,0.498635411262512}\r\nvalidation_metrics_final | 0.699999988079\r\nvalidation_loss_final    | 0.547126591206\r\nvalidation_metrics       | {0.666666686534882,0.666666686534882,0.800000011920929,0.933333337306976,0.800000011920929,1,0.766666650772095,0.933333337306976,0.833333313465118,0.6999999880790\r\n71}\r\nvalidation_loss          | {0.594180822372437,0.464261531829834,0.383160322904587,0.0937399193644524,0.414926111698151,0.368867307901382,0.376850306987762,0.15509657561779,0.317675232887268\r\n,0.547126591205597}\r\n-[ RECORD 11 ]-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 11\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.189064979553223,0.181553840637207,0.179675817489624,0.196763038635254,0.186076879501343,0.191986083984375,0.194756984710693,0.19181489944458,0.202284812927246,\r\n0.188621997833252}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.708333313465\r\ntraining_loss_final      | 0.781156182289\r\ntraining_metrics         | {0.333333343267441,0.333333343267441,0.333333343267441,0.308333337306976,0.333333343267441,0.333333343267441,0.474999994039536,0.758333325386047,0.75,0.7083333134\r\n65118}\r\ntraining_loss            | {1.1848406791687,1.14267539978027,1.11269533634186,1.09739363193512,1.09032690525055,1.08066284656525,1.06443786621094,0.940568923950195,0.859182178974152,0.78115\r\n6182289124}\r\nvalidation_metrics_final | 0.666666686535\r\nvalidation_loss_final    | 0.827600717545\r\nvalidation_metrics       | {0.333333343267441,0.333333343267441,0.333333343267441,0.300000011920929,0.333333343267441,0.333333343267441,0.566666662693024,0.766666650772095,0.866666674613953\r\n,0.666666686534882}\r\nvalidation_loss          | {1.15087306499481,1.12277579307556,1.10153806209564,1.09295105934143,1.08225655555725,1.07222008705139,1.05354011058807,0.967542886734009,0.901465713977814,0.8276\r\n00717544556}\r\n-[ RECORD 12 ]-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n--------------------\r\nmst_key                  | 7\r\nmodel_id                 | 2\r\ncompile_params           | loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']\r\nfit_params               | batch_size=4,epochs=1\r\nmodel_type               | madlib_keras\r\nmodel_size               | 1.2197265625\r\nmetrics_elapsed_time     | {0.178417921066284,0.60815691947937,0.202095985412598,0.178900003433228,0.18206000328064,0.181649923324585,0.191691875457764,0.182677984237671,0.183932065963745,0\r\n.189748048782349}\r\nmetrics_type             | {accuracy}\r\ntraining_metrics_final   | 0.358333319426\r\ntraining_loss_final      | 1.10466384888\r\ntraining_metrics         | {0.358333319425583,0.358333319425583,0.358333319425583,0.308333337306976,0.358333319425583,0.358333319425583,0.358333319425583,0.358333319425583,0.333333343267441\r\n,0.358333319425583}\r\ntraining_loss            | {1.10114789009094,1.10259783267975,1.09921455383301,1.1069358587265,1.09716868400574,1.10427033901215,1.0967606306076,1.10034203529358,1.09822237491608,1.10466384\r\n887695}\r\nvalidation_metrics_final | 0.233333334327\r\nvalidation_loss_final    | 1.14768576622\r\nvalidation_metrics       | {0.233333334326744,0.233333334326744,0.233333334326744,0.433333337306976,0.233333334326744,0.233333334326744,0.233333334326744,0.233333334326744,0.333333343267441\r\n,0.233333334326744}\r\nvalidation_loss          | {1.14770805835724,1.11313581466675,1.09988021850586,1.10149800777435,1.10710287094116,1.10837662220001,1.11643397808075,1.14481270313263,1.10837042331696,1.147685\r\n76622009}\r\n```\r\n\r\n(4) review after recent commit\r\npredict on training data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_predict;\r\n\r\nSELECT madlib.madlib_keras_predict('iris_multi_model', -- model\r\n                                   'iris_train',  -- train_table\r\n                                   'id',         -- id column\r\n                                   'attributes', -- independent var\r\n                                   'iris_predict',  -- output table\r\n                                    'response',  -- prediction type\r\n                                    NULL,        -- use gpus\r\n                                    2            -- mst_key to use\r\n                                   );\r\n\r\nSELECT COUNT(*) FROM iris_predict JOIN iris_train USING (id)\r\nWHERE iris_predict.estimated_class_text != iris_train.class_text;\r\n\r\n-[ RECORD 1 ]\r\ncount | 3\r\n```\r\n\r\nerror %\r\n\r\n```\r\nSELECT round(count(*)*100/(150*0.8),2) as train_accuracy_percent from\r\n    (select iris_train.class_text as actual, iris_predict.estimated_class_text as estimated\r\n     from iris_predict inner join iris_train\r\n     on iris_train.id=iris_predict.id) q\r\nWHERE q.actual=q.estimated;\r\n\r\n train_accuracy_percent \r\n------------------------\r\n                  97.50\r\n(1 row)\r\n\r\n```\r\nThis now matches\r\n```\r\ntraining_metrics_final   | 0.975000023842\r\n```\r\nfrom the training output table.\r\n\r\nOK\r\n\r\n\r\n(5) review after recent commit\r\npredict on test data\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_predict;\r\n\r\nSELECT madlib.madlib_keras_predict('iris_multi_model', -- model\r\n                                   'iris_test',  -- test_table\r\n                                   'id',         -- id column\r\n                                   'attributes', -- independent var\r\n                                   'iris_predict',  -- output table\r\n                                    'response',  -- prediction type\r\n                                    NULL,        -- use gpus\r\n                                    2            -- mst_key to use\r\n                                   );\r\n\r\nSELECT COUNT(*) FROM iris_predict JOIN iris_test USING (id)\r\nWHERE iris_predict.estimated_class_text != iris_test.class_text;\r\n\r\n count\r\n-------\r\n     1\r\n(1 row)\r\n```\r\n\r\nas a %\r\n\r\n```\r\nSELECT round(count(*)*100/(150*0.2),2) as test_accuracy_percent from\r\n    (select iris_test.class_text as actual, iris_predict.estimated_class_text as estimated\r\n     from iris_predict inner join iris_test\r\n     on iris_test.id=iris_predict.id) q\r\nWHERE q.actual=q.estimated;\r\n\r\n  test_accuracy_percent \r\n-----------------------\r\n                 96.67\r\n\r\n(1 row)\r\n```\r\nwhich matches:\r\n```\r\nvalidation_metrics_final | 0.966666638851\r\n```\r\nfrom the training output table.\r\n\r\nOK\r\n\r\n\r\n(7) review after last commit\r\npick wrong model\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model',  -- model\r\n                                    'iris_test_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     999                   -- mst_key to use\r\n                                   );\r\n\r\nERROR:  plpy.Error: madlib_keras_evaluate: mst_key 999 does not exist in the info table (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_evaluate\", line 21, in <module>\r\n    return madlib_keras.evaluate(**globals())\r\n  PL/Python function \"madlib_keras_evaluate\", line 575, in evaluate\r\n  PL/Python function \"madlib_keras_evaluate\", line 244, in create_summary_view\r\nPL/Python function \"madlib_keras_evaluate\"\r\n```\r\nwhich is a better message\r\n\r\nOK\r\n\r\n(8) review after last commit\r\ninput table does not exist\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_validate;\r\nSELECT madlib.madlib_keras_evaluate('iris_multi_model999',  -- model\r\n                                    'iris_test_packed',  -- test table\r\n                                    'iris_validate',     -- output table\r\n                                     NULL,               -- use gpus\r\n                                     2                   -- mst_key to use\r\n                                   );\r\n\r\nERROR:  plpy.Error: madlib_keras_evaluate: Missing summary and/or info tables for iris_multi_model999 (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_evaluate\", line 21, in <module>\r\n    return madlib_keras.evaluate(**globals())\r\n  PL/Python function \"madlib_keras_evaluate\", line 575, in evaluate\r\n  PL/Python function \"madlib_keras_evaluate\", line 237, in create_summary_view\r\nPL/Python function \"madlib_keras_evaluate\"\r\n```\r\nwhich is a better message\r\n\r\nOK\r\n\r\n(9) review after last commit:\r\nspot check on errors looks OK\r\n\r\n\r\n(10) review after last commit:\r\n\r\n```\r\nSELECT * FROM iris_multi_model_summary;\r\n\r\n-[ RECORD 1 ]-------+---------------------------------------------\r\nsource_table        | iris_train_packed\r\nvalidation_table    | iris_test_packed\r\ndependent_varname   | class_text\r\nindependent_varname | attributes\r\nmodel_arch_table    | model_arch_library\r\nnum_iterations      | 10\r\nstart_training_time | 2019-11-04 21:46:55.109008\r\nend_training_time   | 2019-11-04 21:49:41.586433\r\nmadlib_version      | 1.17-dev\r\nnum_classes         | 3\r\nclass_values        | {Iris-setosa,Iris-versicolor,Iris-virginica}\r\ndependent_vartype   | character varying\r\nnormalizing_const   | 1\r\n\r\n```\r\n\r\nOK","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549566751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549569697","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549569697","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549569697,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTU2OTY5Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T22:07:50Z","updated_at":"2019-11-04T22:07:50Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1128/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549569697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549600980","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549600980","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549600980,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTYwMDk4MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-04T23:56:19Z","updated_at":"2019-11-04T23:57:26Z","author_association":"NONE","body":"-----------------------------------------------------------------\r\n\r\nRe-test after latest commits\r\n\r\n\r\n\r\n(1)\r\nPlease add `num_iterations` to the output table.  This is needed now because\r\nwe have a perplexity tolerance, so training may not run the maximum number of iterations\r\nspecified.  The model table should look like:\r\n\r\n```\r\nmodel_table\r\n...\r\nmodel\tBIGINT[]. The encoded model ...etc...\r\nnum_iterations\tINTEGER. Number of iterations that training ran for,\r\nwhich may be less than the maximum value specified in the parameter 'iter_num' if\r\nthe perplexity tolerance was reached.\r\nperplexity\tDOUBLE PRECISION[] Array of ...etc....\r\n...\r\n```\r\n\r\nNow looks like:\r\n\r\n```\r\n-[ RECORD 1 ]----+--------------------------------------------\r\nvoc_size         | 384\r\ntopic_num        | 5\r\nalpha            | 5\r\nbeta             | 0.01\r\nnum_iterations   | 9\r\nperplexity       | {196.148467882,192.142777576,193.872066117}\r\nperplexity_iters | {3,6,9}\r\n```\r\n\r\nOK\r\n\r\n\r\n\r\n(2)\r\nThe parameter 'perplexity_tol' can be any value >= 0.0  Currently it errors out below a\r\nvalue of 0.1 which is not correct.  I may want to set it to 0.0 so that training runs\r\nfor the full number of iterations.  So please change it to error out if 'perplexity_tol'<0.\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table\r\n                         103,                     -- vocabulary size\r\n                         5,                       -- number of topics\r\n                         10,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         2,                       -- Evaluate perplexity every 2 iterations\r\n                         0.0                      -- Set tolerance to 0 so runs full number of iterations\r\n                       );\r\n```\r\nproduces\r\n```\r\n-[ RECORD 1 ]----+--------------------------------------------------------------------------------------------------------------------------------------------\r\nvoc_size         | 384\r\ntopic_num        | 5\r\nalpha            | 5\r\nbeta             | 0.01\r\nnum_iterations   | 20\r\nperplexity       | {191.992070922,188.198782019,187.433873268,184.973287318,184.491077644,176.27420008,180.63646659,180.456641184,179.574266867,179.152413582}\r\nperplexity_iters | {2,4,6,8,10,12,14,16,18,20}\r\n```\r\n\r\nOK\r\n\r\n(3)\r\nLast iteration value for perplexity doe not match final perplexity value:\r\n\r\n```\r\nDROP TABLE IF EXISTS documents;\r\nCREATE TABLE documents(docid INT4, contents TEXT);\r\n\r\nINSERT INTO documents VALUES\r\n(0, 'Statistical topic models are a class of Bayesian latent variable models, originally developed for analyzing the semantic content of large document corpora.'),\r\n(1, 'By the late 1960s, the balance between pitching and hitting had swung in favor of the pitchers. In 1968 Carl Yastrzemski won the American League batting title with an average of just .301, the lowest in history.'),\r\n(2, 'Machine learning is closely related to and often overlaps with computational statistics; a discipline that also specializes in prediction-making. It has strong ties to mathematical optimization, which deliver methods, theory and application domains to the field.'),\r\n(3, 'California''s diverse geography ranges from the Sierra Nevada in the east to the Pacific Coast in the west, from the Redwood Douglas fir forests of the northwest, to the Mojave Desert areas in the southeast. The center of the state is dominated by the Central Valley, a major agricultural area.'),\r\n(4, 'One of the many applications of Bayes'' theorem is Bayesian inference, a particular approach to statistical inference. When applied, the probabilities involved in Bayes'' theorem may have different probability interpretations. With the Bayesian probability interpretation the theorem expresses how a degree of belief, expressed as a probability, should rationally change to account for availability of related evidence. Bayesian inference is fundamental to Bayesian statistics.'),\r\n(5, 'When data are unlabelled, supervised learning is not possible, and an unsupervised learning approach is required, which attempts to find natural clustering of the data to groups, and then map new data to these formed groups. The support-vector clustering algorithm, created by Hava Siegelmann and Vladimir Vapnik, applies the statistics of support vectors, developed in the support vector machines algorithm, to categorize unlabeled data, and is one of the most widely used clustering algorithms in industrial applications.'),\r\n(6, 'Deep learning architectures such as deep neural networks, deep belief networks, recurrent neural networks and convolutional neural networks have been applied to fields including computer vision, speech recognition, natural language processing, audio recognition, social network filtering, machine translation, bioinformatics, drug design, medical image analysis, material inspection and board game programs, where they have produced results comparable to and in some cases superior to human experts.'),\r\n(7, 'A multilayer perceptron is a class of feedforward artificial neural network. An MLP consists of at least three layers of nodes: an input layer, a hidden layer and an output layer. Except for the input nodes, each node is a neuron that uses a nonlinear activation function. MLP utilizes a supervised learning technique called backpropagation for training.'),\r\n(8, 'In mathematics, an ellipse is a plane curve surrounding two focal points, such that for all points on the curve, the sum of the two distances to the focal points is a constant.'),\r\n(9, 'In artificial neural networks, the activation function of a node defines the output of that node given an input or set of inputs.'),\r\n(10, 'In mathematics, graph theory is the study of graphs, which are mathematical structures used to model pairwise relations between objects. A graph in this context is made up of vertices (also called nodes or points) which are connected by edges (also called links or lines). A distinction is made between undirected graphs, where edges link two vertices symmetrically, and directed graphs, where edges link two vertices asymmetrically; see Graph (discrete mathematics) for more detailed definitions and for other variations in the types of graph that are commonly considered. Graphs are one of the prime objects of study in discrete mathematics.'),\r\n(11, 'A Rube Goldberg machine, named after cartoonist Rube Goldberg, is a machine intentionally designed to perform a simple task in an indirect and overly complicated way. Usually, these machines consist of a series of simple unrelated devices; the action of each triggers the initiation of the next, eventually resulting in achieving a stated goal.'),\r\n(12, 'In statistics, the logistic model (or logit model) is used to model the probability of a certain class or event existing such as pass/fail, win/lose, alive/dead or healthy/sick. This can be extended to model several classes of events such as determining whether an image contains a cat, dog, lion, etc... Each object being detected in the image would be assigned a probability between 0 and 1 and the sum adding to one.'),\r\n(13, 'k-means clustering is a method of vector quantization, originally from signal processing, that is popular for cluster analysis in data mining. k-means clustering aims to partition n observations into k clusters in which each observation belongs to the cluster with the nearest mean, serving as a prototype of the cluster.'),\r\n(14, 'In pattern recognition, the k-nearest neighbors algorithm (k-NN) is a non-parametric method used for classification and regression.');\r\n\r\n\r\nALTER TABLE documents ADD COLUMN words TEXT[];\r\n\r\nUPDATE documents SET words =\r\n    regexp_split_to_array(lower(\r\n    regexp_replace(contents, E'[,.;\\']','', 'g')\r\n    ), E'[\\\\s+]');\r\n\r\n\r\nDROP TABLE IF EXISTS documents_tf, documents_tf_vocabulary;\r\n\r\nSELECT madlib.term_frequency('documents',    -- input table\r\n                             'docid',        -- document id column\r\n                             'words',        -- vector of words in document\r\n                             'documents_tf', -- output documents table with term frequency\r\n                             TRUE);          -- TRUE to created vocabulary table\r\n```\r\n\r\nTrain\r\n\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table\r\n                         384,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         100,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         1,                       -- Evaluate perplexity every n iterations\r\n                         0.1                      -- Stopping perplexity tolerance\r\n                       );\r\n\r\nSELECT voc_size, topic_num, alpha, beta, perplexity, perplexity_iters from lda_model_perp;\r\n\r\n-[ RECORD 1 ]----+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nvoc_size         | 384\r\ntopic_num        | 5\r\nalpha            | 5\r\nbeta             | 0.01\r\nnum_iterations   | 16\r\nperplexity       | {195.582090721,192.071728778,191.048336558,194.186905186,195.150503634,191.566207005,191.199131632,185.533220287,189.910983656,184.981903783,185.753724338,183.043524383,189.125703696,191.460991339,189.193774612,189.182916247}\r\nperplexity_iters | {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16}\r\n```\r\n\r\nPerplexity on input data\r\n\r\n```\r\nSELECT madlib.lda_get_perplexity( 'lda_model_perp',\r\n                                  'lda_output_data_perp'\r\n                                );\r\n\r\n lda_get_perplexity \r\n--------------------\r\n   189.182916246556\r\n(1 row)\r\n\r\n```\r\nwhich matches the last value in the array for the training function.\r\n\r\nOK\r\n\r\n\r\n\r\n(6) still has an issue\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table \r\n                         384,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         20,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         2                       -- Evaluate perplexity every n iterations\r\n\r\nDone.\r\n(psycopg2.ProgrammingError) function madlib.lda_train(unknown, unknown, unknown, integer, integer, integer, integer, numeric, integer) does not exist\r\nLINE 1: SELECT madlib.lda_train( 'documents_tf',          -- documen...\r\n               ^\r\nHINT:  No function matches the given name and argument types. You might need to add explicit type casts.\r\n [SQL: \"SELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\\n                         'lda_output_data_perp',  -- readable output data table \\n                         384,                     -- vocabulary size\\n                         5,                        -- number of topics\\n                         20,                      -- number of iterations\\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\\n                         2                       -- Evaluate perplexity every n iterations\\n                       );\"]\r\n```\r\n\r\nThis should be the same results as:\r\n\r\n```\r\nDROP TABLE IF EXISTS lda_model_perp, lda_output_data_perp;\r\n\r\nSELECT madlib.lda_train( 'documents_tf',          -- documents table in the form of term frequency\r\n                         'lda_model_perp',        -- model table created by LDA training (not human readable)\r\n                         'lda_output_data_perp',  -- readable output data table \r\n                         384,                     -- vocabulary size\r\n                         5,                        -- number of topics\r\n                         20,                      -- number of iterations\r\n                         5,                       -- Dirichlet prior for the per-doc topic multinomial (alpha)\r\n                         0.01,                    -- Dirichlet prior for the per-topic word multinomial (beta)\r\n                         2,                       -- Evaluate perplexity every n iterations\r\n                         NULL\r\n                       );\r\n```\r\nwhich actually does work if you put `NULL` for the last param.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549600980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549933550","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549933550","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549933550,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTkzMzU1MA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T17:42:57Z","updated_at":"2019-11-05T17:42:57Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1129/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549933550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549952751","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549952751","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549952751,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk1Mjc1MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T18:21:49Z","updated_at":"2019-11-05T18:21:49Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1130/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549952751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549959369","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549959369","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549959369,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk1OTM2OQ==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T18:36:52Z","updated_at":"2019-11-05T18:36:52Z","author_association":"MEMBER","body":"@fmcquillan99 Fixed the issue with the Null handling on the last param. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549959369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549962637","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549962637","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549962637,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk2MjYzNw==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T18:44:23Z","updated_at":"2019-11-05T18:44:23Z","author_association":"CONTRIBUTOR","body":"@hpandeycodeit \r\nWe should test cases for the following scenarios (not sure if we already have tests for some of these) :\r\n1. If evaluate_every <=0, assert that there are no perplexity values.\r\n1. If tolerance == 0, assert that we don't stop early.\r\n1. All permutations of the interface with evaluate_every and tolerance being passed as NULL and/or not passed at all to make sure we default the values as expected. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549962637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549968640","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549968640","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549968640,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk2ODY0MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T18:58:34Z","updated_at":"2019-11-05T18:58:34Z","author_association":"NONE","body":"I checked (6) after the last commit and it works now.\r\n\r\nSo LGTM on functionality.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549968640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549971419","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-549971419","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":549971419,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTk3MTQxOQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T19:04:59Z","updated_at":"2019-11-05T19:04:59Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1131/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/549971419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550008965","html_url":"https://github.com/apache/madlib/pull/451#issuecomment-550008965","issue_url":"https://api.github.com/repos/apache/madlib/issues/451","id":550008965,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDAwODk2NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T20:36:54Z","updated_at":"2019-11-05T20:36:54Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1132/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550008965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550043033","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-550043033","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":550043033,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDA0MzAzMw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-05T22:03:44Z","updated_at":"2019-11-05T22:03:44Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1133/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550043033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550132170","html_url":"https://github.com/apache/madlib/pull/454#issuecomment-550132170","issue_url":"https://api.github.com/repos/apache/madlib/issues/454","id":550132170,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDEzMjE3MA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T03:57:24Z","updated_at":"2019-11-06T03:57:24Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1134/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550132170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550480987","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-550480987","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":550480987,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDQ4MDk4Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T20:12:18Z","updated_at":"2019-11-06T20:12:18Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1135/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550480987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550493870","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-550493870","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":550493870,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDQ5Mzg3MA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T20:48:10Z","updated_at":"2019-11-06T20:48:10Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1136/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550493870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550506935","html_url":"https://github.com/apache/madlib/pull/454#issuecomment-550506935","issue_url":"https://api.github.com/repos/apache/madlib/issues/454","id":550506935,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDUwNjkzNQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T21:24:50Z","updated_at":"2019-11-06T21:24:50Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1137/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550506935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550529308","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-550529308","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":550529308,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDUyOTMwOA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T22:26:32Z","updated_at":"2019-11-07T00:38:35Z","author_association":"NONE","body":"```\r\nSELECT * FROM madlib.gpu_configuration();\r\n hostname |                                        gpu_descr                                         \r\n----------+------------------------------------------------------------------------------------------\r\n phoenix0 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix0 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix0 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix0 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix1 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix1 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix1 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix1 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix2 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix2 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix2 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix2 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix3 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix3 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix3 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix3 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix4 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix4 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix4 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix4 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n(20 rows)\r\n```\r\nOK\r\n\r\nHowever the below does not work:\r\n```\r\nCREATE TABLE gpu_resources AS \r\n        SELECT * FROM madlib.gpu_configuration();\r\n\r\nNOTICE:  Table doesn't have 'DISTRIBUTED BY' clause. Creating a NULL policy entry.\r\nERROR:  plpy.SPIError: function cannot execute on segment because it issues a non-SELECT statement  (entry db 10.138.0.41:5432 pid=16886)\r\nDETAIL:  \r\nTraceback (most recent call last):\r\n  PL/Python function \"gpu_configuration\", line 21, in <module>\r\n    with AOControl(False) and MinWarning(\"error\"):\r\n  PL/Python function \"gpu_configuration\", line 154, in __enter__\r\nPL/Python function \"gpu_configuration\"\r\nSQL function \"gpu_configuration\" statement 1\r\n```\r\nI think this is a problem, so I think we should create an output table instead of using a set returning function.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550529308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550551248","html_url":"https://github.com/apache/madlib/pull/456#issuecomment-550551248","issue_url":"https://api.github.com/repos/apache/madlib/issues/456","id":550551248,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU1MTI0OA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-06T23:40:02Z","updated_at":"2019-11-06T23:40:02Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1138/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550551248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550559189","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-550559189","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":550559189,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU1OTE4OQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T00:09:59Z","updated_at":"2019-11-07T00:09:59Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1139/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550559189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550573834","html_url":"https://github.com/apache/madlib/pull/457#issuecomment-550573834","issue_url":"https://api.github.com/repos/apache/madlib/issues/457","id":550573834,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU3MzgzNA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T01:11:35Z","updated_at":"2019-11-07T01:11:35Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1140/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550573834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550582388","html_url":"https://github.com/apache/madlib/pull/457#issuecomment-550582388","issue_url":"https://api.github.com/repos/apache/madlib/issues/457","id":550582388,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MDU4MjM4OA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T01:47:55Z","updated_at":"2019-11-07T01:47:55Z","author_association":"CONTRIBUTOR","body":"jenkins please retest this","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/550582388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551196322","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-551196322","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":551196322,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTE5NjMyMg==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T18:05:54Z","updated_at":"2019-11-07T18:05:54Z","author_association":"MEMBER","body":"> @hpandeycodeit\r\n> We should test cases for the following scenarios (not sure if we already have tests for some of these) :\r\n> \r\n> 1. If evaluate_every <=0, assert that there are no perplexity values.\r\n> 2. If tolerance == 0, assert that we don't stop early.\r\n> 3. All permutations of the interface with evaluate_every and tolerance being passed as NULL and/or not passed at all to make sure we default the values as expected.\r\n\r\nAdded the test cases for 2 and 3. There was already a test case covering scenario 1. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551196322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551209909","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-551209909","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":551209909,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTIwOTkwOQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T18:42:12Z","updated_at":"2019-11-07T18:42:12Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1141/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551209909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551227476","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-551227476","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":551227476,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTIyNzQ3Ng==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T19:27:16Z","updated_at":"2019-11-07T19:27:16Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1142/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551227476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551305519","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-551305519","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":551305519,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTMwNTUxOQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-07T22:59:57Z","updated_at":"2019-11-07T22:59:57Z","author_association":"NONE","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/551305519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552044978","html_url":"https://github.com/apache/madlib/pull/457#issuecomment-552044978","issue_url":"https://api.github.com/repos/apache/madlib/issues/457","id":552044978,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjA0NDk3OA==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T00:42:22Z","updated_at":"2019-11-09T00:43:37Z","author_association":"CONTRIBUTOR","body":"Jenkins: retest this please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552044978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552050093","html_url":"https://github.com/apache/madlib/pull/457#issuecomment-552050093","issue_url":"https://api.github.com/repos/apache/madlib/issues/457","id":552050093,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjA1MDA5Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T01:16:51Z","updated_at":"2019-11-09T01:16:51Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1143/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552050093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552053055","html_url":"https://github.com/apache/madlib/pull/458#issuecomment-552053055","issue_url":"https://api.github.com/repos/apache/madlib/issues/458","id":552053055,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjA1MzA1NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T01:43:18Z","updated_at":"2019-11-09T01:43:18Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1144/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552053055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552146181","html_url":"https://github.com/apache/madlib/pull/339#issuecomment-552146181","issue_url":"https://api.github.com/repos/apache/madlib/issues/339","id":552146181,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjE0NjE4MQ==","user":{"login":"IvanKonevJr","id":44673942,"node_id":"MDQ6VXNlcjQ0NjczOTQy","avatar_url":"https://avatars.githubusercontent.com/u/44673942?v=4","gravatar_id":"","url":"https://api.github.com/users/IvanKonevJr","html_url":"https://github.com/IvanKonevJr","followers_url":"https://api.github.com/users/IvanKonevJr/followers","following_url":"https://api.github.com/users/IvanKonevJr/following{/other_user}","gists_url":"https://api.github.com/users/IvanKonevJr/gists{/gist_id}","starred_url":"https://api.github.com/users/IvanKonevJr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IvanKonevJr/subscriptions","organizations_url":"https://api.github.com/users/IvanKonevJr/orgs","repos_url":"https://api.github.com/users/IvanKonevJr/repos","events_url":"https://api.github.com/users/IvanKonevJr/events{/privacy}","received_events_url":"https://api.github.com/users/IvanKonevJr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-09T23:13:49Z","updated_at":"2019-11-09T23:13:49Z","author_association":"NONE","body":"hello! i use PG12 and will try to modify python script but get error: SQLCommon.m4 not found - please add PG12 support","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552146181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552537734","html_url":"https://github.com/apache/madlib/pull/339#issuecomment-552537734","issue_url":"https://api.github.com/repos/apache/madlib/issues/339","id":552537734,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjUzNzczNA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T17:29:13Z","updated_at":"2019-11-11T17:30:17Z","author_association":"NONE","body":"I added a JIRA for this\r\nhttps://issues.apache.org/jira/browse/MADLIB-1391\r\n\r\nWe will get to it in the next release after 1.17","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552537734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552550243","html_url":"https://github.com/apache/madlib/pull/457#issuecomment-552550243","issue_url":"https://api.github.com/repos/apache/madlib/issues/457","id":552550243,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjU1MDI0Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T18:05:17Z","updated_at":"2019-11-11T18:22:28Z","author_association":"NONE","body":"(1)\r\nTrain result, validation loss per iteration:\r\n```\r\n[0.733925223350525, 0.501948714256287, 0.401886612176895, 0.494124263525009, 0.384743869304657, 0.300327688455582, 0.368834614753723, 0.319071084260941, 0.191268876194954, 0.173252046108246]\r\n```\r\n\r\nAfter transfer learning, seems like the loss on subsequent training picks up from where this ^^^ leaves off:\r\n```\r\n[0.16432112455368, 0.164827600121498, 0.15946963429451, 0.156749069690704, 0.144549146294594, 0.142323225736618, 0.138157039880753, 0.127701371908188, 0.127511203289032, 0.12169610708952]\r\n\r\n[0.151703342795372, 0.15974634885788, 0.0791483223438263, 0.0740548744797707, 0.0698189586400986, 0.0977403670549393, 0.0737137421965599, 0.0555036813020706, 0.0894732773303986, 0.102973714470863]\r\n\r\n[0.14056433737278, 0.115160055458546, 0.105597652494907, 0.0925526767969131, 0.0991481989622116, 0.0907492190599442, 0.10708586871624, 0.142711892724037, 0.0837283283472061, 0.0745012909173965]\r\netc\r\n```\r\nso that looks fine\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/552550243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553149776","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553149776","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553149776,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzE0OTc3Ng==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-12T22:38:09Z","updated_at":"2019-11-12T22:38:09Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1145/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553149776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553157780","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553157780","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553157780,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzE1Nzc4MA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-12T23:03:35Z","updated_at":"2019-11-12T23:03:35Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1146/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553157780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553172725","html_url":"https://github.com/apache/madlib/pull/339#issuecomment-553172725","issue_url":"https://api.github.com/repos/apache/madlib/issues/339","id":553172725,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzE3MjcyNQ==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-12T23:57:36Z","updated_at":"2019-11-12T23:57:36Z","author_association":"CONTRIBUTOR","body":"@LaoTsing You can either wait until the next release after 1.17 or the alternative is to make changes to the code to add support for pg12. It's best to wait for the official release which will be well tested. But if you can't wait and need to get it done before that, then you will have to make a few code changes including adding a couple of cmake files. \r\nIf you are interested in making the changes yourself, let us know and we can guide you through the process. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553172725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553189619","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553189619","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553189619,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzE4OTYxOQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T01:05:01Z","updated_at":"2019-11-13T01:05:01Z","author_association":"NONE","body":"acceptance tests\r\n\r\n(1)\r\ntf info\r\n\r\n```\r\nDROP TABLE IF EXISTS host_gpu_mapping;\r\nSELECT * FROM madlib.gpu_configuration('host_gpu_mapping');\r\nSELECT * FROM host_gpu_mapping ORDER BY hostname, gpu_descr;\r\n\r\n hostname |                                        gpu_descr\r\n----------+------------------------------------------------------------------------------------------\r\n phoenix0 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix0 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix0 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix0 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix1 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix1 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix3 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix3 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix3 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix3 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n phoenix4 | device: 0, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:04.0, compute capability: 6.0\r\n phoenix4 | device: 1, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:05.0, compute capability: 6.0\r\n phoenix4 | device: 2, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:06.0, compute capability: 6.0\r\n phoenix4 | device: 3, name: Tesla P100-PCIE-16GB, pci bus id: 0000:00:07.0, compute capability: 6.0\r\n(14 rows)\r\n```\r\nOK\r\n\r\n\r\n(2)\r\nnvidia-smi info\r\n\r\n```\r\nDROP TABLE IF EXISTS host_gpu_mapping_nvidia;\r\nSELECT * FROM madlib.gpu_configuration('host_gpu_mapping_nvidia', -- output table\r\n                                       'nvidia'                   -- source for GPU info\r\n                                       );\r\nSELECT * FROM host_gpu_mapping_nvidia ORDER BY hostname, gpu_descr;\r\n\r\n hostname |                                  gpu_descr\r\n----------+------------------------------------------------------------------------------\r\n phoenix0 | GPU 0: Tesla P100-PCIE-16GB (UUID: GPU-f2ccc77e-2501-f6ee-4754-069dda256fb2)\r\n phoenix0 | GPU 1: Tesla P100-PCIE-16GB (UUID: GPU-b1fc40ca-c7c6-bc86-f20f-6e9a62cda3f8)\r\n phoenix0 | GPU 2: Tesla P100-PCIE-16GB (UUID: GPU-d93bb21b-96f9-7c1d-3bab-cdd92b7bbc9d)\r\n phoenix0 | GPU 3: Tesla P100-PCIE-16GB (UUID: GPU-2d79c4a8-479e-2f33-39f8-3ba80b63f830)\r\n phoenix1 | GPU 0: Tesla P100-PCIE-16GB (UUID: GPU-0af6bb1e-5b5b-4988-ad3a-a917e9584702)\r\n phoenix1 | GPU 1: Tesla P100-PCIE-16GB (UUID: GPU-d824c976-a8aa-ef26-a13c-9a9a7fe86bfd)\r\n phoenix3 | GPU 0: Tesla P100-PCIE-16GB (UUID: GPU-3681d0b6-1ec6-0453-fd81-29d88e549cd9)\r\n phoenix3 | GPU 1: Tesla P100-PCIE-16GB (UUID: GPU-d4b1f2e7-b238-ac9a-bbfe-918adeb69472)\r\n phoenix3 | GPU 2: Tesla P100-PCIE-16GB (UUID: GPU-42a32ef1-a60c-e599-c8cf-0e669111ab6f)\r\n phoenix3 | GPU 3: Tesla P100-PCIE-16GB (UUID: GPU-1cce09c4-6856-8031-be0b-8e8bbf9a10f3)\r\n phoenix4 | GPU 0: Tesla P100-PCIE-16GB (UUID: GPU-a71bdc18-fdd5-ba25-617e-19b23cc8e827)\r\n phoenix4 | GPU 1: Tesla P100-PCIE-16GB (UUID: GPU-f9d13688-7fe6-a029-24d1-985a5659f18f)\r\n phoenix4 | GPU 2: Tesla P100-PCIE-16GB (UUID: GPU-06a7f54b-c07a-e87a-20d6-09bd99b19531)\r\n phoenix4 | GPU 3: Tesla P100-PCIE-16GB (UUID: GPU-af3b32f3-8bd9-cb75-a8fb-25253b9da926)\r\n(14 rows)\r\n```\r\nOK\r\n\r\n(3)\r\nget the list of segments on hosts with at least 1 GPU attached:\r\n\r\n```\r\nSELECT * FROM gp_segment_configuration WHERE role='p' AND content>=0 ORDER BY hostname, dbid;\r\n\r\n dbid | content | role | preferred_role | mode | status | port  | hostname | address  | replication_port\r\n------+---------+------+----------------+------+--------+-------+----------+----------+------------------\r\n    2 |       0 | p    | p              | c    | u      | 40000 | phoenix0 | phoenix0 |            70000\r\n    3 |       1 | p    | p              | c    | u      | 40001 | phoenix0 | phoenix0 |            70001\r\n    4 |       2 | p    | p              | c    | u      | 40002 | phoenix0 | phoenix0 |            70002\r\n    5 |       3 | p    | p              | c    | u      | 40003 | phoenix0 | phoenix0 |            70003\r\n    6 |       4 | p    | p              | c    | u      | 40000 | phoenix1 | phoenix1 |            70000\r\n    7 |       5 | p    | p              | c    | u      | 40001 | phoenix1 | phoenix1 |            70001\r\n    8 |       6 | p    | p              | c    | u      | 40002 | phoenix1 | phoenix1 |            70002\r\n    9 |       7 | p    | p              | c    | u      | 40003 | phoenix1 | phoenix1 |            70003\r\n   10 |       8 | p    | p              | c    | u      | 40000 | phoenix2 | phoenix2 |            70000\r\n   11 |       9 | p    | p              | c    | u      | 40001 | phoenix2 | phoenix2 |            70001\r\n   12 |      10 | p    | p              | c    | u      | 40002 | phoenix2 | phoenix2 |            70002\r\n   13 |      11 | p    | p              | c    | u      | 40003 | phoenix2 | phoenix2 |            70003\r\n   14 |      12 | p    | p              | c    | u      | 40000 | phoenix3 | phoenix3 |            70000\r\n   15 |      13 | p    | p              | c    | u      | 40001 | phoenix3 | phoenix3 |            70001\r\n   16 |      14 | p    | p              | c    | u      | 40002 | phoenix3 | phoenix3 |            70002\r\n   17 |      15 | p    | p              | c    | u      | 40003 | phoenix3 | phoenix3 |            70003\r\n   18 |      16 | p    | p              | c    | u      | 40000 | phoenix4 | phoenix4 |            70000\r\n   19 |      17 | p    | p              | c    | u      | 40001 | phoenix4 | phoenix4 |            70001\r\n   20 |      18 | p    | p              | c    | u      | 40002 | phoenix4 | phoenix4 |            70002\r\n   21 |      19 | p    | p              | c    | u      | 40003 | phoenix4 | phoenix4 |            70003\r\n(20 rows)\r\n\r\nDROP TABLE IF EXISTS segments_to_use;\r\nCREATE TABLE segments_to_use AS\r\n  SELECT DISTINCT dbid, hostname FROM gp_segment_configuration JOIN host_gpu_mapping_nvidia USING (hostname)\r\n  WHERE role='p' AND content>=0;\r\nSELECT * FROM segments_to_use ORDER BY hostname, dbid;\r\n\r\n dbid | hostname\r\n------+----------\r\n    2 | phoenix0\r\n    3 | phoenix0\r\n    4 | phoenix0\r\n    5 | phoenix0\r\n    6 | phoenix1\r\n    7 | phoenix1\r\n    8 | phoenix1\r\n    9 | phoenix1\r\n   14 | phoenix3\r\n   15 | phoenix3\r\n   16 | phoenix3\r\n   17 | phoenix3\r\n   18 | phoenix4\r\n   19 | phoenix4\r\n   20 | phoenix4\r\n   21 | phoenix4\r\n(16 rows)\r\n```\r\nOK\r\n\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553189619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553196653","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553196653","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553196653,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzE5NjY1Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T01:35:08Z","updated_at":"2019-11-13T01:35:08Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1147/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553196653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553208495","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553208495","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553208495,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzIwODQ5NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T02:25:02Z","updated_at":"2019-11-13T02:25:02Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1148/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553208495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553220434","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553220434","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553220434,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzIyMDQzNA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T03:19:35Z","updated_at":"2019-11-13T03:19:35Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1149/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553220434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553531652","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553531652","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553531652,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzUzMTY1Mg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T18:11:45Z","updated_at":"2019-11-13T18:11:45Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1150/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553531652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553532730","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553532730","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553532730,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzUzMjczMA==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T18:14:42Z","updated_at":"2019-11-13T18:14:42Z","author_association":"CONTRIBUTOR","body":"jenkins retest this please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553532730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553533491","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553533491","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553533491,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzUzMzQ5MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T18:16:36Z","updated_at":"2019-11-13T18:16:36Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1151/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553533491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553534501","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553534501","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553534501,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzUzNDUwMQ==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T18:19:16Z","updated_at":"2019-11-13T18:19:16Z","author_association":"CONTRIBUTOR","body":"jenkins retest this please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553534501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553543843","html_url":"https://github.com/apache/madlib/pull/455#issuecomment-553543843","issue_url":"https://api.github.com/repos/apache/madlib/issues/455","id":553543843,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzU0Mzg0Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-13T18:43:07Z","updated_at":"2019-11-13T18:43:07Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1152/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/553543843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/554039528","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-554039528","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":554039528,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NDAzOTUyOA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-14T19:22:15Z","updated_at":"2019-11-14T19:22:15Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1153/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/554039528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555179591","html_url":"https://github.com/apache/madlib/pull/432#issuecomment-555179591","issue_url":"https://api.github.com/repos/apache/madlib/issues/432","id":555179591,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTE3OTU5MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-18T19:48:17Z","updated_at":"2019-11-18T19:48:17Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1154/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555179591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555689753","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-555689753","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":555689753,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTY4OTc1Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-19T20:08:57Z","updated_at":"2019-11-19T20:08:57Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1155/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555689753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555705137","html_url":"https://github.com/apache/madlib/pull/460#issuecomment-555705137","issue_url":"https://api.github.com/repos/apache/madlib/issues/460","id":555705137,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTcwNTEzNw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-19T20:45:36Z","updated_at":"2019-11-19T20:45:36Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1156/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/555705137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/557690354","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-557690354","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":557690354,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NzY5MDM1NA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-22T20:53:56Z","updated_at":"2019-11-22T20:53:56Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1157/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/557690354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/557749546","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-557749546","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":557749546,"node_id":"MDEyOklzc3VlQ29tbWVudDU1Nzc0OTU0Ng==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-23T01:11:11Z","updated_at":"2019-11-23T01:12:12Z","author_association":"NONE","body":"Please review tests (0) and (5) which I think may need some changes.\r\n\r\n\r\n(0)\r\nI think `gpu_config` in the output table should be changed to `distribution_rules`\r\nto match the name of the input parameter.\r\n\r\n(1)\r\nCPUs only\r\n```\r\nDROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('image_data',         -- Source table\r\n                                        'image_data_packed',  -- Output table\r\n                                        'species',            -- Dependent variable\r\n                                        'rgb',                -- Independent variable\r\n                                        NULL,                 -- Buffer size\r\n                                        255,                   -- Normalizing constant\r\n                                        NULL,\r\n                                        'all_segments'\r\n                                        );\r\n\r\nSELECT * FROM image_data_packed_summary;\r\n\r\n-[ RECORD 1 ]-------+------------------\r\nsource_table        | image_data\r\noutput_table        | image_data_packed\r\ndependent_varname   | species\r\nindependent_varname | rgb\r\ndependent_vartype   | text\r\nclass_values        | {bird,cat,dog}\r\nbuffer_size         | 26\r\nnormalizing_const   | 255\r\nnum_classes         | 3\r\ngpu_config          | all_segments\r\n```\r\nOK\r\n\r\n\r\n(2)\r\ntable `xxx` exists but has wrong format for distribution table\r\n```\r\nDROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('image_data',         -- Source table\r\n                                        'image_data_packed',  -- Output table\r\n                                        'species',            -- Dependent variable\r\n                                        'rgb',                -- Independent variable\r\n                                        NULL,                 -- Buffer size\r\n                                        255,                   -- Normalizing constant\r\n                                        NULL,\r\n                                        'xxx'\r\n                                        );\r\n\r\nERROR:  plpy.Error: training_preprocessor_dl: segments_to_use table must contain dbib column (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"training_preprocessor_dl\", line 24, in <module>\r\n    training_preprocessor_obj.training_preprocessor_dl()\r\n  PL/Python function \"training_preprocessor_dl\", line 558, in training_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 271, in input_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 96, in _assert\r\nPL/Python function \"training_preprocessor_dl\"\r\n```\r\nOK\r\n\r\n\r\n(3)\r\ndistribution table `yyy` does not exit\r\n```\r\nDROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('image_data',         -- Source table\r\n                                        'image_data_packed',  -- Output table\r\n                                        'species',            -- Dependent variable\r\n                                        'rgb',                -- Independent variable\r\n                                        NULL,                 -- Buffer size\r\n                                        255,                   -- Normalizing constant\r\n                                        NULL,\r\n                                        'yyy'\r\n                                        );\r\n\r\nERROR:  plpy.Error: training_preprocessor_dl error: Input table 'yyy' does not exist. (plpython.c:5038)\r\nDETAIL:  segments_to_use table (yyy) doesn't exist.\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"training_preprocessor_dl\", line 24, in <module>\r\n    training_preprocessor_obj.training_preprocessor_dl()\r\n  PL/Python function \"training_preprocessor_dl\", line 558, in training_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 269, in input_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 674, in input_tbl_valid\r\nPL/Python function \"training_preprocessor_dl\"\r\n```\r\nOK\r\n\r\n\r\n(4)\r\nAsk for GPUs but no GPUs on cluster\r\n```\r\nDROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('image_data',         -- Source table\r\n                                        'image_data_packed',  -- Output table\r\n                                        'species',            -- Dependent variable\r\n                                        'rgb',                -- Independent variable\r\n                                        NULL,                 -- Buffer size\r\n                                        255,                   -- Normalizing constant\r\n                                        NULL,\r\n                                        'gpu_segments'\r\n                                        );\r\n\r\nERROR:  plpy.Error: training_preprocessor_dl: No GPUs configured on hosts. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"training_preprocessor_dl\", line 24, in <module>\r\n    training_preprocessor_obj.training_preprocessor_dl()\r\n  PL/Python function \"training_preprocessor_dl\", line 558, in training_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 243, in input_preprocessor_dl\r\nPL/Python function \"training_preprocessor_dl\"\r\n\r\n```\r\nOK\r\n\r\n\r\n(5)\r\nValid distribution table\r\n\r\n```\r\nDROP TABLE IF EXISTS segments_to_use;\r\nCREATE TABLE segments_to_use AS\r\n  SELECT DISTINCT dbid, hostname FROM gp_segment_configuration\r\n  WHERE role='p' AND content>=0;\r\nSELECT * FROM segments_to_use ORDER BY hostname, dbid;\r\n\r\n dbid |       hostname\r\n------+-----------------------\r\n    2 | pm-demo-machine-keras\r\n    3 | pm-demo-machine-keras\r\n(2 rows)\r\n\r\nDROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('image_data',         -- Source table\r\n                                        'image_data_packed',  -- Output table\r\n                                        'species',            -- Dependent variable\r\n                                        'rgb',                -- Independent variable\r\n                                        NULL,                 -- Buffer size\r\n                                        255,                   -- Normalizing constant\r\n                                        NULL,\r\n                                        'segments_to_use'\r\n                                        );\r\n\r\nSELECT * FROM image_data_packed_summary;\r\n\r\n-[ RECORD 1 ]-------+------------------\r\nsource_table        | image_data\r\noutput_table        | image_data_packed\r\ndependent_varname   | species\r\nindependent_varname | rgb\r\ndependent_vartype   | text\r\nclass_values        | {bird,cat,dog}\r\nbuffer_size         | 26\r\nnormalizing_const   | 255\r\nnum_classes         | 3\r\ngpu_config          | {0,1}\r\n```\r\nThe field `gpu_config` says `{0,1}` which does not match `dbid` of `{2,3}`. What is the `{0,1}` from?  I think we should report out `dbid` or else the user might get confused.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/557749546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558375862","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558375862","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558375862,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODM3NTg2Mg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-25T22:49:07Z","updated_at":"2019-11-25T22:49:07Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1158/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558375862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558418975","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558418975","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558418975,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODQxODk3NQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-26T01:37:31Z","updated_at":"2019-11-26T01:37:31Z","author_association":"NONE","body":"(6)\r\nI think it is good that we now have 2 output fields in the summary table:\r\n```\r\ndistribution_rules\r\n&\r\n__internal_gpu_config__\r\n```\r\n\r\nbut I would suggest the output should be:\r\n```\r\nif 'distribution_rules' = 'all_segments'\r\n\r\ndistribution_rules      | all_segments\r\n__internal_gpu_config__ | all_segments\r\n\r\n\r\nif 'distribution_rules' = 'gpu_segments'\r\n\r\ndistribution_rules      | {2,3,4,5,6,...} i.e., list out the dbids\r\n__internal_gpu_config__ | {0,1,2,3,4...} i.e., list out the content ids\r\n\r\n\r\nif 'distribution_rules' = name of a file containing the list of dbid to use\r\n\r\ndistribution_rules      | {2,3,4,5,6,...} i.e., list out the dbids\r\n__internal_gpu_config__ | {0,1,2,3,4...} i.e., list out the content ids","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558418975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558776267","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558776267","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558776267,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODc3NjI2Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-26T19:11:35Z","updated_at":"2019-11-26T19:11:35Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1159/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558776267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558860322","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558860322","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558860322,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODg2MDMyMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-26T23:24:40Z","updated_at":"2019-11-26T23:24:40Z","author_association":"NONE","body":"additionally I would suggest we sort the arrays ASC for `distribution_rules` and `__internal_gpu_config__` in the output file\r\n\r\n&\r\n\r\ncheck that the file in the `distribution_rules` in the input parameter are valid segments in `gp_segment_configuration WHERE role='p' AND content>=0`  i.e., not master","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558860322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558880230","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558880230","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558880230,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODg4MDIzMA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T00:54:10Z","updated_at":"2019-11-27T00:54:10Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1160/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558880230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558917862","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558917862","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558917862,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODkxNzg2Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T03:58:02Z","updated_at":"2019-11-27T05:16:22Z","author_association":"NONE","body":"It looks like it's almost there, the last thing to fix is:\r\n```\r\nmadlib=# SELECT * FROM segments_to_use ORDER BY hostname, dbid;\r\n dbid |       hostname        \r\n------+-----------------------\r\n    2 | pm-demo-machine-keras\r\n    2 | pm-demo-machine-keras\r\n    2 | pm-demo-machine-keras\r\n    2 | pm-demo-machine-keras\r\n    2 | pm-demo-machine-keras\r\n    3 | pm-demo-machine-keras\r\n(6 rows)\r\n```\r\nproduces\r\n```\r\nmadlib=# DROP TABLE IF EXISTS image_data_packed, image_data_packed_summary;                                                                         DROP TABLE\r\nTime: 22.951 ms\r\nmadlib=# SELECT madlib.training_preprocessor_dl('image_data',         -- Source table                                                                                                       'image_data_packed',  -- Output table                                                                                                               'species',            -- Dependent variable                                                                                                         'rgb',                -- Independent variable                                                                                                       NULL,                 -- Buffer size                                                                                                                255,                   -- Normalizing constant                                                                                                      NULL,                                                                                                                                               'segments_to_use'                                                                                                                                   );\r\n-[ RECORD 1 ]------------+-\r\ntraining_preprocessor_dl | \r\n\r\nTime: 2355.189 ms\r\nmadlib=# \r\nmadlib=# \r\nmadlib=# SELECT * FROM image_data_packed_summary;\r\n-[ RECORD 1 ]-----------+------------------\r\nsource_table            | image_data\r\noutput_table            | image_data_packed\r\ndependent_varname       | species\r\nindependent_varname     | rgb\r\ndependent_vartype       | text\r\nclass_values            | {bird,cat,dog}\r\nbuffer_size             | 26\r\nnormalizing_const       | 255\r\nnum_classes             | 3\r\ndistribution_rules      | {2,2,2,2,2,3}\r\n__internal_gpu_config__ | {0,0,0,0,0,1}\r\n```\r\nI'd suggest throwing an error if there is a duplicate row in the distribution table, rather than passing it through like this.\r\n\r\nBesides that\r\n\r\nLGTM\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558917862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558971983","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-558971983","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":558971983,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODk3MTk4Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T07:51:40Z","updated_at":"2019-11-27T07:51:40Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1161/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/558971983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/559172896","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-559172896","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":559172896,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTE3Mjg5Ng==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T17:01:44Z","updated_at":"2019-11-27T17:01:44Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1162/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/559172896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/559251495","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-559251495","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":559251495,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTI1MTQ5NQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-27T21:08:48Z","updated_at":"2019-11-27T21:08:48Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1163/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/559251495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560530001","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-560530001","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":560530001,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUzMDAwMQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T18:52:08Z","updated_at":"2019-12-02T18:53:35Z","author_association":"NONE","body":"Dup dbid's now being trapped\r\n```\r\nERROR:  plpy.Error: training_preprocessor_dl: distribution rules table contains duplicate dbids (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"training_preprocessor_dl\", line 24, in <module>\r\n    training_preprocessor_obj.training_preprocessor_dl()\r\n  PL/Python function \"training_preprocessor_dl\", line 593, in training_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 303, in input_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 125, in _validate_distribution_table\r\n  PL/Python function \"training_preprocessor_dl\", line 96, in _assert\r\nPL/Python function \"training_preprocessor_dl\"\r\n```\r\n\r\nso this PR LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560530001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560534523","html_url":"https://github.com/apache/madlib/pull/459#issuecomment-560534523","issue_url":"https://api.github.com/repos/apache/madlib/issues/459","id":560534523,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUzNDUyMw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T19:03:16Z","updated_at":"2019-12-02T19:03:16Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1164/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560534523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560549451","html_url":"https://github.com/apache/madlib/pull/461#issuecomment-560549451","issue_url":"https://api.github.com/repos/apache/madlib/issues/461","id":560549451,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDU0OTQ1MQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T19:40:35Z","updated_at":"2019-12-02T19:40:35Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1165/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560549451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560562642","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-560562642","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":560562642,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDU2MjY0Mg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T20:16:34Z","updated_at":"2019-12-02T20:16:34Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1166/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560562642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]