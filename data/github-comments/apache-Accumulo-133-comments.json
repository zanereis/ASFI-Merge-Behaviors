[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073301526","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2073301526","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2073301526,"node_id":"IC_kwDOACaFSM57lBIW","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T19:49:00Z","updated_at":"2024-04-23T19:49:51Z","author_association":"CONTRIBUTOR","body":"I can see #4488 being useful for something like status reporting - one example that I can think of would be something like a loop that checks status (say its tservers registered, compactions running,...) reporting 'okay' at an interval less that the loop frequency.  The loop frequency (to catch changes, issues) could help reduce noise in the logs.  Particularly if the log information was verbose (say it contains a snapshot of something) - the snapshot could be useful to know some state at a given time so that subsequent events could be pieced together.  \r\n\r\nWhat follows is me trying to understand what we are trying to solve, and explicitly stating it if helps others, apologizes if this is just repeating the obvious.\r\n\r\nFor the original issue, I think we need to step back and outline the requirements better.  Maybe along the lines of:\r\n - each message occurrence is logged when first seen.\r\n - subsequent occurrences of the \"same\" message are suppressed and only logged at N occurrences (or every T interval)\r\n - (optional) report number of times seen (or first seen) since last reported.\r\n \r\nWe also need to mind what each message occurrence means.   For example \"Tablets un-hosted\" if the message includes the tablet id - then each unique 'tablet x un-hosted, tablet y un-hosted' are unique messages.  In this case we would want to log the first occurrence of each, and not lump all un-hosted messages into the same pile.  We also would likely not want to just print the first N un-hosted messages and then suppress the rest for a given period (burst suppression?).\r\n\r\nThe cache solution seems to meet most of the requirements as long as the cache sizes can be bounded.  Caching seems most appropriate when there would be a limited, bounded number of messages that would be generated over the cache hold interval.  If a message was generated for every tablet of a large table, then either the cache could grow very large, or if we also limit the size (number of messages held) then it would bypass the suppression.  So many messages could be added that on the next round, the first messages would have been removed and considered as new again.\r\n\r\nIn general, would we be better off looking at the error handling side of things rather than focusing on the message?  The origin of the issue is something that is reporting as a warning - so that at a minimum, the first message should be logged.  Repeating at an interval would help to make sure that, if the problem persists, it makes it easier to discover in the logs.  Especially, if there could be a large gap when the issue occurred and when it is discovered as an issue.\r\n\r\nIn this case, if the compaction ratio and files available are incompatible - what, short of changing the ratio would change the situation?  How fast is that likely to change?  Would it be appropriate to reduce the check interval once the error has been detected - maybe with a back-off?  \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073301526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073344436","html_url":"https://github.com/apache/accumulo/pull/4488#issuecomment-2073344436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4488","id":2073344436,"node_id":"IC_kwDOACaFSM57lLm0","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T20:02:04Z","updated_at":"2024-04-23T20:02:04Z","author_association":"CONTRIBUTOR","body":"I added a more general comment on #4409, While this may be useful in some cases, I'm not sure it solves the original issue. \r\n\r\nMainly it seems that this would be hard to use when there is unique information in the message that should be passed along.  If we need to treat \"issue tablet x\" and \"issue tablet y\" as different messages and not as repeat occurrences of the same message, this seems to want to treat them the same.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073344436/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073360455","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2073360455","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2073360455,"node_id":"IC_kwDOACaFSM57lPhH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T20:10:50Z","updated_at":"2024-04-23T20:10:50Z","author_association":"CONTRIBUTOR","body":"> subsequent occurrences of the \"same\" message are suppressed and only logged at N occurrences\r\n\r\nI think I lost sight of this, suppressing exact duplicates. There is a similar todo in elasticity that talks about message spamming (below). I don't know if these requires duplicate suppression or not.\r\n\r\nhttps://github.com/apache/accumulo/blob/elasticity/server/base/src/main/java/org/apache/accumulo/server/compaction/CompactionJobGenerator.java#L94-L98","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073360455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073394909","html_url":"https://github.com/apache/accumulo/pull/4488#issuecomment-2073394909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4488","id":2073394909,"node_id":"IC_kwDOACaFSM57lX7d","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T20:31:53Z","updated_at":"2024-04-23T20:31:53Z","author_association":"CONTRIBUTOR","body":"In f679cd3 I modified the Logger to be based on a generic condition and added a time based implementation that uses a configuration property for the time interval. Like @EdColeman mentioned, not sure how useful this is, but I can envision wanting to log things in a server when some condition is true. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073394909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073417466","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2073417466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2073417466,"node_id":"IC_kwDOACaFSM57ldb6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T20:47:55Z","updated_at":"2024-04-23T20:47:55Z","author_association":"CONTRIBUTOR","body":"I'm still thinking that maybe the compaction is not making progress. I don't think there is good logging for this with compactions that run in the Tablet Server. IIRC, the way to tell if it's making progress is to check out the output file for the compaction in HDFS and see if its size is increasing. If nothing is getting written to the file for a long time, then either it's filtering out a lot of data, or it's waiting on input from HDFS.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073417466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073419896","html_url":"https://github.com/apache/accumulo/pull/4488#issuecomment-2073419896","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4488","id":2073419896,"node_id":"IC_kwDOACaFSM57leB4","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T20:49:40Z","updated_at":"2024-04-23T20:49:40Z","author_association":"CONTRIBUTOR","body":"Would there be any benefit of allowing the property to be dynamic and stored in ZooKeeper?  That would also require a watcher to react to updates - and that is likely to make using this class much harder, basically a server context would likely be required to get the instance / zoo reader / zoo watcher.  \r\n\r\nIt would really complicate the code, but would allow  things to be adjusted without restarting services.\r\n\r\nThe other draw-back would be because this is a general property, setting it will change all instances and it may be really hard to know what they are.\r\n\r\nOne alternative could be to use log4j and isLevelEnabled to toggle between messages and or message frequency.  Something like the following using a count, or could be modified to use a time.\r\n\r\n```\r\n   if(LOG.isTraceEnabled()){\r\n      LOG.trace(\"always log\");\r\n    } else if(LOG.isDebugEnabled() && (count++ % 10) == 0){\r\n      LOG.debug(\"log every 10\");\r\n    } else if(LOG.isInfoEnabled() && (count++ % 100) == 0) {\r\n      LOG.info(\"log every 100\");\r\n    }\r\n```\r\n\r\nThen, using named loggers and standard configuration, the level for that class could be dynamically adjusted at runtime on a named logger basis?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073419896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073447616","html_url":"https://github.com/apache/accumulo/pull/4489#issuecomment-2073447616","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4489","id":2073447616,"node_id":"IC_kwDOACaFSM57lkzA","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T21:08:40Z","updated_at":"2024-04-23T21:08:40Z","author_association":"CONTRIBUTOR","body":"The change itself looks fine.\r\n\r\nHow fast were the messages generated?  Wondering if this is another case where it would help to somehow track and generate messages at a lower rate (interval or every N).\r\n\r\nThe tipping point would be, without seeing these messages, can the compaction progress still be seen while its running to show that its likely working and making progress?  Basically issue #4485 seems to be calling for better status / logging of compaction progress - so with this at trace, would it cause the same type of hurdle to troubleshoot?  \r\n\r\n(This PR will not address the other issue, just pointing it out for consideration.)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073447616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073534093","html_url":"https://github.com/apache/accumulo/pull/4487#issuecomment-2073534093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4487","id":2073534093,"node_id":"IC_kwDOACaFSM57l56N","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T21:55:00Z","updated_at":"2024-04-23T21:55:00Z","author_association":"MEMBER","body":"It would be nice to have an extra attribute on each property that denoted these attributes, so we didn't have to maintain a separate list. I'm not sure that would be a huge improvement, but it might make it easier to keep up-to-date because we'd have to consciously think about these attributes when we create or modify properties, rather than having to add them to a separate hard-coded list somewhere else when they need to be updated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073534093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073544411","html_url":"https://github.com/apache/accumulo/pull/4468#issuecomment-2073544411","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4468","id":2073544411,"node_id":"IC_kwDOACaFSM57l8bb","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T22:00:41Z","updated_at":"2024-04-23T22:01:27Z","author_association":"MEMBER","body":"This is a change in behavior to an existing user-facing class, that will change the data returned. This was likely not done initially because visibilities are typically used as access control, not searchable user data. While there may be some applications for treating the content of visibilities as searchable user data, I don't think it's a typical use case.\r\n\r\nThis will very likely break existing applications. I think this needs to be reverted as-is. To protect existing use cases, an extra option can be added (off by default) to include visibilities in the matching.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073544411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2074786862","html_url":"https://github.com/apache/accumulo/pull/4488#issuecomment-2074786862","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4488","id":2074786862,"node_id":"IC_kwDOACaFSM57qrwu","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T12:04:36Z","updated_at":"2024-04-24T12:17:51Z","author_association":"CONTRIBUTOR","body":"> The other draw-back would be because this is a general property, setting it will change all instances and it may be really hard to know what they are.\r\n\r\nyeah, this is a problem. Currently there is no way to modify the properties of a single server at runtime for debug purposes. I think the standard way to do this is using JMX.\r\n\r\nWith JShell, manipulating JMX beans becomes easier I think.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2074786862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2074840925","html_url":"https://github.com/apache/accumulo/pull/4468#issuecomment-2074840925","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4468","id":2074840925,"node_id":"IC_kwDOACaFSM57q49d","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T12:32:41Z","updated_at":"2024-04-24T12:32:41Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Thanks for the feedback. I have to say though that I disagree.  While it may have been done as that isn't typically \"searchable user data\", I would argue you could also call this a bug as the grep command (and iterator) search every part of the key which is a byte array EXCEPT the visibility. Can you point me to documentation which specifies that the visibility is a special part of the key that should be treated differently in some cases? The data model page makes no such note. \r\n\r\nOn top of that, this PR came out of observing a user of accumulo frustrated as the grep they were running was not matching, when they expected that it would. Seems to me that the logical behavior is that it greps for everything, not that it excludes some parts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2074840925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075284928","html_url":"https://github.com/apache/accumulo/pull/4488#issuecomment-2075284928","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4488","id":2075284928,"node_id":"IC_kwDOACaFSM57slXA","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T15:55:04Z","updated_at":"2024-04-24T15:55:04Z","author_association":"CONTRIBUTOR","body":"I had an issue with the implementation regarding AbstractLogger implementing Serializable. I reworked the implementation and removed the Property. I also added @keith-turner's message deduplication implementation to this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075284928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075301941","html_url":"https://github.com/apache/accumulo/pull/4218#issuecomment-2075301941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4218","id":2075301941,"node_id":"IC_kwDOACaFSM57spg1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T16:03:29Z","updated_at":"2024-04-24T16:03:29Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #4459 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075301941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075380747","html_url":"https://github.com/apache/accumulo/pull/4490#issuecomment-2075380747","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4490","id":2075380747,"node_id":"IC_kwDOACaFSM57s8wL","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T16:33:10Z","updated_at":"2024-04-24T16:33:10Z","author_association":"CONTRIBUTOR","body":"I have not had a chance to test this change yet.  I made the change by reading the Map.merge() javadoc, would be good to get a double check of the use of Map.merge return value.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075380747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075451016","html_url":"https://github.com/apache/accumulo/pull/4489#issuecomment-2075451016","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4489","id":2075451016,"node_id":"IC_kwDOACaFSM57tN6I","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T17:15:15Z","updated_at":"2024-04-24T17:15:15Z","author_association":"MEMBER","body":"@dlmarion Would the extra insights be more suitable as metrics, or are these logs specifically useful because they contain something that isn't possible to communicate via metrics? I like the idea of a dedicated compaction status logger that could be configured to emit to a separate place, if one wished to do so. Maybe all that's needed here is to use a dedicated logger instead of the same one as the rest of the coordinator?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075451016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075467229","html_url":"https://github.com/apache/accumulo/pull/4489#issuecomment-2075467229","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4489","id":2075467229,"node_id":"IC_kwDOACaFSM57tR3d","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T17:25:24Z","updated_at":"2024-04-24T17:25:24Z","author_association":"CONTRIBUTOR","body":"> I think this status update information is useful. It provides insight that we never had with internal compactions. I would rather see a different logger being used, that gets directed to a different file. \r\n\r\nA named logger would be nice.  That strategy could also be useful for something else I wanted to do. I wanted to add some more detailed trace logging for when the coordinator collects info from tservers.  Having a named logger for that would be nice because then could turn on just that trace logging.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075467229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075468170","html_url":"https://github.com/apache/accumulo/pull/4489#issuecomment-2075468170","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4489","id":2075468170,"node_id":"IC_kwDOACaFSM57tSGK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T17:25:59Z","updated_at":"2024-04-24T17:25:59Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I don't think these log messages make sense as metrics because they are information about a specific transient event. The event is bound by the start and stop time, and you would need to add a tag to the metric with the external compaction id to find it. This would cause an issue because this would generate a ton of unique metrics.\r\n\r\nI think it's sufficient to add a different logger in the CompactionCoordinator for these messages, such as:\r\n```\r\n  private static final Logger LOG = LoggerFactory.getLogger(\"CompactionStatusLogger\");\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075468170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075536752","html_url":"https://github.com/apache/accumulo/pull/4468#issuecomment-2075536752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4468","id":2075536752,"node_id":"IC_kwDOACaFSM57ti1w","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T18:04:56Z","updated_at":"2024-04-24T18:04:56Z","author_association":"MEMBER","body":"> I would argue you could also call this a bug as the grep command (and iterator) search every part of the key which is a byte array EXCEPT the visibility. Can you point me to documentation which specifies that the visibility is a special part of the key that should be treated differently in some cases? The data model page makes no such note.\r\n\r\nEach piece of the key are inherently unique and special in the data model, but it's also flexible and you can certainly treat it like other fields, such as in your use case. My point wasn't that visibility must be treated special, but rather that it's also a valid use case if it is. The basis for my objection wasn't to preserve the existing use case, but to show that it's not necessarily a bug because both use cases are valid.\r\n\r\nTreating both use cases as valid, then this change will break some valid existing workflows. The severity of that breakage could range anywhere from \"harmless surprise\", to \"security-compromise\", depending on the additional data returned. I think we can satisfy both use cases, while avoiding making it a breaking change.\r\n\r\n> On top of that, this PR came out of observing a user of accumulo frustrated as the grep they were running was not matching, when they expected that it would. Seems to me that the logical behavior is that it greps for everything, not that it excludes some parts.\r\n\r\nIs the main frustration the use of grep in the shell, or is it the GrepIterator itself? I'm okay changing the behavior in the shell, which primarily is intended to support user-interactive ad-hoc workflows anyway. My concern is changing the default behavior of the GrepIterator when used directly in table configuration or as a scan-time iterator.\r\n\r\nA few things we could do to avoid breaking changes to the GrepIterator:\r\n\r\n1. Create a new iterator with new behavior (this gives the possibility for deprecating the old one, if we want to only have one, and wish to signal the change in behavior), or\r\n2. Add a matchOnVisibility option to existing iterator that is off by default  (my preference).\r\n\r\nFor the shell, where we don't care about changing behavior as much:\r\n\r\n1. Update the grep command in the shell to use the new iterator or new option and update the documentation (also, highlight the change in behavior in the release notes), and\r\n2. Maybe also add an option to toggle between the behaviors in the shell (I don't think this is necessary... changing the behavior in the shell is less a concern for me than breaking direct uses of the GrepIterator).\r\n\r\nChanging the behavior of the shell's grep command to make it more convenient can be done without changing the behavior of GrepIterator for existing workflows.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075536752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075686766","html_url":"https://github.com/apache/accumulo/pull/4489#issuecomment-2075686766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4489","id":2075686766,"node_id":"IC_kwDOACaFSM57uHdu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T19:29:12Z","updated_at":"2024-04-24T19:29:12Z","author_association":"CONTRIBUTOR","body":"> Looking again at the Compactor, it calls updateCompactionStatus with STARTED, SUCCEEDED, IN_PROGRESS, CANCELED, and FAILED. I wonder if only that method needs the different logger.\r\n\r\n@dlmarion made that change in 4aaaa18","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075686766/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075904697","html_url":"https://github.com/apache/accumulo/pull/4461#issuecomment-2075904697","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4461","id":2075904697,"node_id":"IC_kwDOACaFSM57u8q5","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-24T21:48:39Z","updated_at":"2024-04-24T21:48:39Z","author_association":"CONTRIBUTOR","body":"@keith-turner I believe this is up to date with your additions, if not we can add them before merge,  This was rebased with the other metric changes so the change-set is more reasonable to review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2075904697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2077039939","html_url":"https://github.com/apache/accumulo/issues/4231#issuecomment-2077039939","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4231","id":2077039939,"node_id":"IC_kwDOACaFSM57zR1D","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-25T12:14:21Z","updated_at":"2024-04-25T12:14:21Z","author_association":"CONTRIBUTOR","body":"Thanks @ArbaazKhan1 , this does look like a dupe of #4344. Closing this as the other issue has more detail.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2077039939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2077056168","html_url":"https://github.com/apache/accumulo/issues/4220#issuecomment-2077056168","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4220","id":2077056168,"node_id":"IC_kwDOACaFSM57zVyo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-25T12:22:51Z","updated_at":"2024-04-25T12:22:51Z","author_association":"CONTRIBUTOR","body":"In elasticity, I moved the Coordinator into the Manager in PR #3216. Someone could use this as a guide to account for all of the things that need to be changed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2077056168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079259096","html_url":"https://github.com/apache/accumulo/issues/4482#issuecomment-2079259096","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4482","id":2079259096,"node_id":"IC_kwDOACaFSM577vnY","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T12:07:06Z","updated_at":"2024-04-26T12:20:50Z","author_association":"CONTRIBUTOR","body":"I'm starting work on this now, this seems like it might be something we could do in main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079259096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079575032","html_url":"https://github.com/apache/accumulo/pull/4494#issuecomment-2079575032","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4494","id":2079575032,"node_id":"IC_kwDOACaFSM5788v4","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T15:05:48Z","updated_at":"2024-04-26T15:06:00Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I wasn't sure exactly if this was what you had in mind but I took an attempt at this. Mostly it's just a wrapper for the long time and provides some methods for comparing and serialization/deserialization. The `ManagerTime` class is still responsible for handling the computation of a new `SteadyTime` object based on a skew.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079575032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079797771","html_url":"https://github.com/apache/accumulo/pull/4371#issuecomment-2079797771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4371","id":2079797771,"node_id":"IC_kwDOACaFSM579zIL","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T17:28:34Z","updated_at":"2024-04-26T17:28:34Z","author_association":"MEMBER","body":"> > I've looked through the changes and they look okay - still trying to workout if the test issues that lead to the revert can be duplicated and assigned a reason.\r\n> \r\n> I also took a quick look at the older commit and could not find what the problem was. I suspect it some time unit conversion issue where the code does something like call sleep with a nanosecond value which basically asking the code sleep forever. However I could not find any issue like that when looking at the change.\r\n\r\nI am also not sure where the problem was coming from. Do you think its safe to merge this in and open a new ticket if that issue arises again? @EdColeman @keith-turner ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079797771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079923567","html_url":"https://github.com/apache/accumulo/pull/4486#issuecomment-2079923567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4486","id":2079923567,"node_id":"IC_kwDOACaFSM57-R1v","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T18:30:48Z","updated_at":"2024-04-26T18:30:48Z","author_association":"CONTRIBUTOR","body":"@dlmarion - A couple more things:\r\n\r\n1. I am going to open a PR with my branch against your PR to make it easier to look at, but I noticed that the testFiles() test inside AmpleConditionalWriterIT is failing with this change here (without my changes as well) so I wanted to look at that.\r\n2. I took a look at using BiFunction instead of two functions but I don't think that will work as that does the opposite of what we need. BiFunction takes 2 inputs and outputs 1 result but we need 1 input (the column) and to output 2 results (a key and value) that the iterator can concatenate transparently to the user when building the condition.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079923567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079942439","html_url":"https://github.com/apache/accumulo/issues/4492#issuecomment-2079942439","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4492","id":2079942439,"node_id":"IC_kwDOACaFSM57-Wcn","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T18:42:11Z","updated_at":"2024-04-26T18:42:11Z","author_association":"MEMBER","body":"I can start looking into this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079942439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079956686","html_url":"https://github.com/apache/accumulo/pull/4486#issuecomment-2079956686","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4486","id":2079956686,"node_id":"IC_kwDOACaFSM57-Z7O","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T18:53:18Z","updated_at":"2024-04-26T18:53:18Z","author_association":"CONTRIBUTOR","body":"I created a PR to your branch https://github.com/dlmarion/accumulo/pull/47\r\n\r\nIt fixes AmpleConditionalWriterIT as well, that test was failing because the changes here worked and the values were different. I updated the test to verify both the rejected and accepted case","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2079956686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2080094739","html_url":"https://github.com/apache/accumulo/pull/4497#issuecomment-2080094739","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4497","id":2080094739,"node_id":"IC_kwDOACaFSM57-7oT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T20:44:44Z","updated_at":"2024-04-26T20:44:44Z","author_association":"CONTRIBUTOR","body":"Marked this as draft because I have not tested it yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2080094739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2080195542","html_url":"https://github.com/apache/accumulo/pull/4484#issuecomment-2080195542","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4484","id":2080195542,"node_id":"IC_kwDOACaFSM57_UPW","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T22:31:51Z","updated_at":"2024-04-26T22:31:51Z","author_association":"CONTRIBUTOR","body":"@dlmarion - I'm not sure this would work but your comment about split points being situation dependent has me wondering if we should allow the calculation to be pluggable/configurable in some way so a user could tune it for their use case? It may not really work or be practical for a user to actually come up with a custom way to compute it so might just be best to leave it up to the system but figured I'd bring it up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2080195542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081167758","html_url":"https://github.com/apache/accumulo/pull/4494#issuecomment-2081167758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4494","id":2081167758,"node_id":"IC_kwDOACaFSM58DBmO","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-27T20:04:33Z","updated_at":"2024-04-27T20:10:35Z","author_association":"CONTRIBUTOR","body":"@keith-turner and @DomGarguilo - I spent quite a bit of time looking at this today to make sure the existing SteadyTime behavior was correct before making more changes and this seems like it will generally work ok. It works by just keeping track of the difference in elapsed time and tracks it across restarts and I verified that it works even with negative nano time (Which is allowed). As long as all the places that use `SteadyTime` just use it as a diff between the current nano time it should be ok.\r\n\r\nFor my latest updates, I looked at the `NanoTime` class as @DomGarguilo mentioned but did not use it and instead updated my PR to use `Duration` for both the `skewAmount` and `SteadyTime` as `NanoTime` didn't make sense in this case. \r\n\r\nNanoTime represents a wrapper around the current nano time of the system, but both of those other values represent something different. \r\n\r\n1. The `skewAmount` is the difference in time from previous manager runs to the current system time and can be negative or positive so it can be represented as just a Duration and no relation to the current time. It's not a perfect match for the Duration object as it's really an offset but by using a Duration instead of a long it makes some of the other computations easier when computing updates to the skew amount and computing SteadyTime. If desired, I can switch this value back to `AtomicLong`.\r\n2. `SteadyTime` represents the elapsed time since the system started running (across managers) and is always a positive elapsed duration so I also used a Duration and added a precondition check check to verify it's never negative when created as a negative value would break everything. In this case using Duration seems like a perfect match.\r\n\r\nAnyways, I think this is looking a lot better now. The SteadyTime object that is returned will always be guaranteed to be the positive estimated elasped time in nanos across managers. It also now supports getting the nanos and not just millis if places in the code that current use miillis prefer to use that.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081167758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081493208","html_url":"https://github.com/apache/accumulo/pull/4494#issuecomment-2081493208","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4494","id":2081493208,"node_id":"IC_kwDOACaFSM58ERDY","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-28T13:59:52Z","updated_at":"2024-04-28T13:59:52Z","author_association":"CONTRIBUTOR","body":"My latest update moves the SteadyTime object to the core module in the same package as NanoTime, I realized I needed to move this in order to make the class available when looking at passing it to the TabletManagementIterator (which is not in the manager module) for https://github.com/apache/accumulo/issues/4454","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081493208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081521588","html_url":"https://github.com/apache/accumulo/pull/4480#issuecomment-2081521588","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4480","id":2081521588,"node_id":"IC_kwDOACaFSM58EX-0","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-28T15:31:30Z","updated_at":"2024-04-28T15:31:30Z","author_association":"CONTRIBUTOR","body":"I started to work on a follow on to this PR in another branch that is based on the SteadyTime changes from #4494 and is here: https://github.com/cshannon/accumulo/commit/19977034c3f0fceb1a3cf0972195ad4fb459a484\r\n\r\nIt's not tested and just a rough draft of how we could possibly use SteadyTime. I was unsure about a couple of things, first the commit updates CompactionJobGenerator but I'm not sure if we need to also update CompactionCoordinator to use SteadyTime when dealing with selected files. Second, I wasn't sure if the expiration should be an independent check or tied to if compaction jobs have run (ie only expire if compaction jobs run is greater than 0","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2081521588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2082889007","html_url":"https://github.com/apache/accumulo/issues/4501#issuecomment-2082889007","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4501","id":2082889007,"node_id":"IC_kwDOACaFSM58Jl0v","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T14:22:47Z","updated_at":"2024-04-29T14:22:47Z","author_association":"MEMBER","body":"Did a quick search and found these mentions of hadoop metrics2 as well:\r\nhttps://github.com/apache/accumulo/blob/6d0b4768522187d8c43b9bf0850034d80a684235/core/src/main/java/org/apache/accumulo/core/conf/Property.java#L386-L387\r\n\r\nhttps://github.com/apache/accumulo/blob/6d0b4768522187d8c43b9bf0850034d80a684235/core/src/main/java/org/apache/accumulo/core/conf/Property.java#L928-L929\r\n\r\nThese could probably all be fixed in one PR","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2082889007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2082941512","html_url":"https://github.com/apache/accumulo/issues/4501#issuecomment-2082941512","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4501","id":2082941512,"node_id":"IC_kwDOACaFSM58JypI","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T14:46:06Z","updated_at":"2024-04-29T14:46:06Z","author_association":"CONTRIBUTOR","body":"MANAGER_FATE_METRICS_ENABLED and MANAGER_FATE_METRICS_ENABLED Look like they are unused and have been marked deprecated. If so, maybe they can be removed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2082941512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083353494","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2083353494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2083353494,"node_id":"IC_kwDOACaFSM58LXOW","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T18:10:11Z","updated_at":"2024-04-29T18:10:11Z","author_association":"CONTRIBUTOR","body":"I would love to have something in place to avoid compaction from holding up unloading of tablets.  Is this something that is relative easy to do?  This would save us from long shutdowns as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083353494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083452548","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2083452548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2083452548,"node_id":"IC_kwDOACaFSM58LvaE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T18:59:58Z","updated_at":"2024-04-29T18:59:58Z","author_association":"CONTRIBUTOR","body":"> Is this something that is relative easy to do?\r\n\r\nIt's not a switch that exists today. We would need to develop and test a solution. If you can identify which compactions are causing a tablet not to close, then you could run them as External Compactions. The existing codepath does not wait for the External Compactions to complete. It only waits for them if they are in the process of committing their changes to the tablet metadata.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083452548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083639339","html_url":"https://github.com/apache/accumulo/issues/4501#issuecomment-2083639339","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4501","id":2083639339,"node_id":"IC_kwDOACaFSM58MdAr","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T20:50:28Z","updated_at":"2024-04-29T20:50:28Z","author_association":"CONTRIBUTOR","body":"Fixed by #4503 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2083639339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2085933175","html_url":"https://github.com/apache/accumulo/pull/4506#issuecomment-2085933175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4506","id":2085933175,"node_id":"IC_kwDOACaFSM58VNB3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-30T16:40:56Z","updated_at":"2024-04-30T16:40:56Z","author_association":"CONTRIBUTOR","body":"This is a draft because the non-default scans are not being directed to the 2nd scan server. I'm wondering if it's a client timing issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2085933175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2085948905","html_url":"https://github.com/apache/accumulo/issues/4505#issuecomment-2085948905","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4505","id":2085948905,"node_id":"IC_kwDOACaFSM58VQ3p","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-30T16:45:14Z","updated_at":"2024-04-30T16:45:47Z","author_association":"MEMBER","body":"> and probably would be suitable to do in 2.1\r\n\r\nDid you mean \"would **not** be\"?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2085948905/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088424700","html_url":"https://github.com/apache/accumulo/pull/4510#issuecomment-2088424700","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4510","id":2088424700,"node_id":"IC_kwDOACaFSM58etT8","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T12:55:09Z","updated_at":"2024-05-01T12:55:09Z","author_association":"CONTRIBUTOR","body":"Old Ref: \r\n`~sservfile:/data/workspace/accumulo/test/target/mini-tests/` \r\nNew Ref: \r\n`~sserv5e6087acfile:/data/workspace/accumulo/test/target/`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088424700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088434657","html_url":"https://github.com/apache/accumulo/pull/4461#issuecomment-2088434657","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4461","id":2088434657,"node_id":"IC_kwDOACaFSM58evvh","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T13:04:35Z","updated_at":"2024-05-01T13:04:35Z","author_association":"CONTRIBUTOR","body":"Changes in 5dd3c2d311\r\n\r\n- Renames  String METRICS_SCAN_PREFIX from `accumulo.tserver.scans.` to `accumulo.scan.`  Service type (tserver, sserver) is available in the tags\r\n- Renames registration to reservation to reflect usage.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088434657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088595290","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088595290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088595290,"node_id":"IC_kwDOACaFSM58fW9a","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:00:54Z","updated_at":"2024-05-01T15:00:54Z","author_association":"CONTRIBUTOR","body":"Other than well defined Accumulo system tables (root, metadata,...) it is probably not a good idea to add unbounded tags. Systems that have large numbers of dynamic tables will have issues.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088595290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088626298","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088626298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088626298,"node_id":"IC_kwDOACaFSM58feh6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:22:41Z","updated_at":"2024-05-01T15:22:41Z","author_association":"CONTRIBUTOR","body":"The following may be relevant if something is done for this issue.\r\n\r\nhttps://docs.micrometer.io/micrometer/reference/concepts/meter-provider.html","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088626298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088632646","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088632646","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088632646,"node_id":"IC_kwDOACaFSM58fgFG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:27:04Z","updated_at":"2024-05-01T15:28:09Z","author_association":"CONTRIBUTOR","body":"> Other than well defined Accumulo system tables (root, metadata,...) it is probably not a good idea to add unbounded tags. Systems that have large numbers of dynamic tables will have issues.\r\n\r\nYeah there is big difference there.   The monitor metrics only track the tables that currently exist, it will not track any deleted tables.  Adding a table id tag for external metrics would cause the metrics system to have data for tables that no longer exists.  So that is a huge difference.  If anything is done twoards this, would probably need to only add tags for tables that are specified by a user. So could provide a configurable list of tables to tag and only add tags for tables in that list.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088632646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088636865","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088636865","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088636865,"node_id":"IC_kwDOACaFSM58fhHB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:29:59Z","updated_at":"2024-05-01T15:29:59Z","author_association":"CONTRIBUTOR","body":"> https://docs.micrometer.io/micrometer/reference/concepts/meter-provider.html\r\n\r\nI saw this as well. Additionally, there is a `MultiGauge`.\r\n\r\nIf we are going to do something that will dynamically create Meters, then we need to be sure to remove them (MeterRegistry.remove). Otherwise the process will continue to report the metrics for it's lifetime. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088636865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088638548","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088638548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088638548,"node_id":"IC_kwDOACaFSM58fhhU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:31:10Z","updated_at":"2024-05-01T15:31:10Z","author_association":"CONTRIBUTOR","body":"It may be more useful to tag the metrics with a table name instead of a table id.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088638548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088643490","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088643490","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088643490,"node_id":"IC_kwDOACaFSM58fiui","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:34:39Z","updated_at":"2024-05-01T15:34:39Z","author_association":"CONTRIBUTOR","body":"One way to think of it is that each tag will create a unique time-series in some (most?) back ends.  So, in addition to the number of metrics that are reported each interval, there can be negative impact to the collection / storage / display systems.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088643490/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088665774","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088665774","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088665774,"node_id":"IC_kwDOACaFSM58foKu","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T15:50:29Z","updated_at":"2024-05-01T15:50:29Z","author_association":"CONTRIBUTOR","body":"Would something like tracing work?  If we could activate / de-activate tracing on-demand, then it seems that maybe would could collect the needed values for profiling and then turn them off when not being used?  No idea what it would look like at this point.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088665774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088813510","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088813510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088813510,"node_id":"IC_kwDOACaFSM58gMPG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T17:33:20Z","updated_at":"2024-05-01T17:33:20Z","author_association":"CONTRIBUTOR","body":"> Would something like tracing work? \r\n\r\nIf tracing provided the level of information needed, then it could be enabled on a subset of the scan servers / tablet servers via settings in accumulo-env.sh. If there are problems with specific queries, those queries could be directed to specific scan servers via the resource group mechanism.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088813510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088824429","html_url":"https://github.com/apache/accumulo/pull/4513#issuecomment-2088824429","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4513","id":2088824429,"node_id":"IC_kwDOACaFSM58gO5t","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T17:41:47Z","updated_at":"2024-05-01T17:41:47Z","author_association":"CONTRIBUTOR","body":"MiniAccumuloClusterImpl.verifyUp (called from start) should throw an IllegalStateException if the expected processes are not running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088824429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088827307","html_url":"https://github.com/apache/accumulo/issues/4492#issuecomment-2088827307","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4492","id":2088827307,"node_id":"IC_kwDOACaFSM58gPmr","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T17:44:00Z","updated_at":"2024-05-01T17:44:00Z","author_association":"MEMBER","body":"> It should be possible to compute the hit ratio over time of each block cache using the metrics data.\r\n\r\n@keith-turner Is this something that you think should be done before or after the metric has been emitted? I am guessing we do **not** want to do any math on the block cache hits and cache requests and just emit them as they are, and then users can do the calculations as they want. Please correct me if I am wrong in assuming this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088827307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088850317","html_url":"https://github.com/apache/accumulo/issues/4262#issuecomment-2088850317","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4262","id":2088850317,"node_id":"IC_kwDOACaFSM58gVON","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:00:31Z","updated_at":"2024-05-01T18:00:31Z","author_association":"CONTRIBUTOR","body":"@EdColeman  - was this implemented in #4459 as part of the new MeterRegistryFactory SPI class? If so, can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088850317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088853125","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088853125","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088853125,"node_id":"IC_kwDOACaFSM58gV6F","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:02:39Z","updated_at":"2024-05-01T18:02:39Z","author_association":"CONTRIBUTOR","body":"> One way to think of it is that each tag will create a unique time-series in some (most?) back ends. So, in addition to the number of metrics that are reported each interval, there can be negative impact to the collection / storage / display systems.\r\n\r\nYeah, I think for this to be workable would need a user provided list of tables to tag.  This could be a metric property with a value of a list of table names or it could be a per table property that is a boolean.   So this would allow control over which tables are tagged.\r\n\r\n> Would something like tracing work?\r\n\r\nI think that would be out of scope of this issue.  This issue could be closed if its not something that seems workable.  This issue was about supporting current functionality of the monitor in an external metrics system.  Currently in the monitor if a table is clicked on it will show metrics that are per table and per tserver.  Also in the tables view in the monitor can see metrics like how many compactions are queued for a table and what the current ingest rate is for a table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088853125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088855397","html_url":"https://github.com/apache/accumulo/issues/4262#issuecomment-2088855397","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4262","id":2088855397,"node_id":"IC_kwDOACaFSM58gWdl","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:03:56Z","updated_at":"2024-05-01T18:03:56Z","author_association":"CONTRIBUTOR","body":"Completed with #4459 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088855397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088862188","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088862188","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088862188,"node_id":"IC_kwDOACaFSM58gYHs","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:08:58Z","updated_at":"2024-05-01T18:08:58Z","author_association":"CONTRIBUTOR","body":"> Yeah, I think for this to be workable would need a user provided list of tables to tag. This could be a metric property with a value of a list of table names or it could be a per table property that is a boolean. So this would allow control over which tables are tagged.\r\n\r\nThe code needs to be responsive to changes in the list so that processes don't need to be restarted for metrics to be enabled / disabled.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088862188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088865261","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088865261","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088865261,"node_id":"IC_kwDOACaFSM58gY3t","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:11:19Z","updated_at":"2024-05-01T18:11:19Z","author_association":"CONTRIBUTOR","body":"For example guidance, [Prometheus label guidelines](https://prometheus.io/docs/practices/instrumentation/#do-not-overuse-labels]) provides the following:,\r\n\r\n```\r\nAs a general guideline, try to keep the cardinality of your metrics below 10, and for metrics that exceed that, aim to limit them to a handful across your whole system. The vast majority of your metrics should have no labels.\r\n\r\nIf you have a metric that has a cardinality over 100 or the potential to grow that large, investigate alternate solutions such as reducing the number of dimensions or moving the analysis away from monitoring and to a general-purpose processing system.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088865261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088870320","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088870320","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088870320,"node_id":"IC_kwDOACaFSM58gaGw","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:15:10Z","updated_at":"2024-05-01T18:15:10Z","author_association":"CONTRIBUTOR","body":"> For example guidance, [Prometheus label guidelines](https://prometheus.io/docs/practices/instrumentation/#do-not-overuse-labels%5D) provides the following:,\r\n> \r\n> ```\r\n> As a general guideline, try to keep the cardinality of your metrics below 10, and for metrics that exceed that, aim to limit them to a handful across your whole system. The vast majority of your metrics should have no labels.\r\n> \r\n> If you have a metric that has a cardinality over 100 or the potential to grow that large, investigate alternate solutions such as reducing the number of dimensions or moving the analysis away from monitoring and to a general-purpose processing system.\r\n> ```\r\n\r\nThese guidelines aren't general time series database guidelines, right? They are based on the limitations of Prometheus?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088870320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088876727","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088876727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088876727,"node_id":"IC_kwDOACaFSM58gbq3","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:19:54Z","updated_at":"2024-05-01T18:19:54Z","author_association":"CONTRIBUTOR","body":"While those are specific to Prometheus - my understanding is that they apply generally across various metric systems.  There are similar limitations for things like InfluxDB and it all relates to unique tags (labels) creating a unique time-series.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088876727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088881202","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2088881202","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2088881202,"node_id":"IC_kwDOACaFSM58gcwy","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T18:23:20Z","updated_at":"2024-05-01T18:23:20Z","author_association":"CONTRIBUTOR","body":"Yeah, I get that total cardinality is an issue for most of the TSDBs, but I think limitations are different for each. My point was that we should not take the numbers from Prometheus as a hard limit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2088881202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089230387","html_url":"https://github.com/apache/accumulo/issues/4515#issuecomment-2089230387","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4515","id":2089230387,"node_id":"IC_kwDOACaFSM58hyAz","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T22:22:43Z","updated_at":"2024-05-01T22:22:43Z","author_association":"CONTRIBUTOR","body":"Is there any chance that you started the manager before the tservers (or at least most of them)?  If you start the tservers first, they will sit there waiting for assignments.  When the manager starts, it will assign the metadata table before user tables and usually seemed to get distributed as it was on shutdown.  \r\n\r\nIf you start the manager first, then as the tservers start, the manager will immediate begin assignments as soon as it sees the first tserver.  This usually ends up with the metadata and a large number of tablets assigned to one (or very few) tservers - the rebalancing then will take a long time before things get back to normal.\r\n\r\nThere is a property `MANAGER_STARTUP_TSERVER_AVAIL_MIN_COUNT` to wait for N tservers before assignments start can mitigate this.\r\n\r\nBalancing system tables separately would be a good feature, but there may be procedural things that can be done without code changes that help mitigate the issue from occurring.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089230387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089235594","html_url":"https://github.com/apache/accumulo/issues/4515#issuecomment-2089235594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4515","id":2089235594,"node_id":"IC_kwDOACaFSM58hzSK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T22:28:19Z","updated_at":"2024-05-01T22:28:19Z","author_association":"CONTRIBUTOR","body":"> Is there any chance that you started the manager before the tservers (or at least most of them)? \r\n\r\nStarted all tablet servers first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089235594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089263532","html_url":"https://github.com/apache/accumulo/pull/4497#issuecomment-2089263532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4497","id":2089263532,"node_id":"IC_kwDOACaFSM58h6Gs","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-01T23:01:31Z","updated_at":"2024-05-01T23:01:31Z","author_association":"CONTRIBUTOR","body":"Why was the logging left at warn?  If that's appropriate, it's fine, just wanted to check that reducing the severity level was not overlooked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2089263532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091381976","html_url":"https://github.com/apache/accumulo/issues/4509#issuecomment-2091381976","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4509","id":2091381976,"node_id":"IC_kwDOACaFSM58p_TY","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T19:27:09Z","updated_at":"2024-05-02T19:27:09Z","author_association":"MEMBER","body":"I can take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091381976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091413754","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2091413754","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2091413754,"node_id":"IC_kwDOACaFSM58qHD6","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T19:38:54Z","updated_at":"2024-05-02T19:38:54Z","author_association":"CONTRIBUTOR","body":"This is a general observation - prompted by this PR, but is more general.  \r\n\r\nWhat it the purpose of the html javadocs table?  From the description it is only for mapping old metrics names to new, but there are entries in there now that were not present in the old metrics system. So, it seems to have also become a place to document new metrics.\r\n\r\nIf the table is only for mapping changes, then this PR is correct to not add the new metrics to the table.\r\n\r\nIf the table has morphed into a way to document the available metrics so that they show up in documentation for user reference., then the new metric names and descriptions should be added to the table.  Also, the general description of the purpose of the table should be changed to state that it reflects all metrics and includes the mapping from old to new where appropriate.  \r\n\r\nI do not know how we wish to document the metrics - the table is one way, but it is tedious for developers to keep in sync.  The docs generated by the table do seem useful, I just don't know if this is the best way, or if we could find something that is easier to maintain. It does seem that we should provide documentation for the metric names.  \r\n\r\nWe should also determine how \"public\" as in public API are the metric names.  Similar to Properties, they are internal, so subject to change.  But, they are also used externally and changes could cause issues with scripts, or in the case of metrics tracking and post-processing.\r\n\r\nCurrently I have been changing the metric names to be more consistent and hopefully follow a standard convention.  Being that the 2.1 metrics are new and have not received a lot of scrutiny, changing non-public name seems like it would have minor impact now, but as the metrics are adopted more widely, changes, additions or deletions should at least be communicated - somehow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091413754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091484350","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2091484350","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2091484350,"node_id":"IC_kwDOACaFSM58qYS-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T20:18:21Z","updated_at":"2024-05-02T20:18:21Z","author_association":"CONTRIBUTOR","body":"Could move the cache type higher in the name. This brings the related data together when sorting names or using completion.\r\n\r\n```\r\naccumulo.blockcache.data.hitcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=253\r\naccumulo.blockcache.data.requestcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=287\r\naccumulo.blockcache.index.requestcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=32\r\naccumulo.blockcache.index.hitcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=4\r\naccumulo.blockcache.summary.requestcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=0\r\naccumulo.blockcache.summary.hitcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} value=0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091484350/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091489200","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2091489200","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2091489200,"node_id":"IC_kwDOACaFSM58qZew","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T20:21:09Z","updated_at":"2024-05-02T20:21:25Z","author_association":"CONTRIBUTOR","body":"In addition to the tablet sever, also need to register these new metrics in the scan server.  When registering in the scan server will need to pick up the resource group tag, which may happen automatically. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091489200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091744036","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2091744036","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2091744036,"node_id":"IC_kwDOACaFSM58rXsk","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T21:33:09Z","updated_at":"2024-05-02T21:33:09Z","author_association":"MEMBER","body":"> When registering in the scan server will need to pick up the resource group tag, which may happen automatically.\r\n\r\nI'm not sure I follow. Are you suggesting to add a `Tag` to the metrics that indicates the resource group name?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091744036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091888140","html_url":"https://github.com/apache/accumulo/pull/4461#issuecomment-2091888140","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4461","id":2091888140,"node_id":"IC_kwDOACaFSM58r64M","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T23:07:29Z","updated_at":"2024-05-02T23:07:29Z","author_association":"CONTRIBUTOR","body":"@EdColeman I was experimenting with these changes and I was not seeing the stats I expected from the cache.  Finally figured out that stats have to be enabled when building the cache, so pushed a change to do that in 3660ecd. \r\n\r\nI was using MetricsIT to experiment with these changes when trying to figure this out, can see those changes here b3fdae9630b9719f7b3fcd7f2e6fae664f2dd1a4 if interested.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091888140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091903378","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2091903378","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2091903378,"node_id":"IC_kwDOACaFSM58r-mS","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T23:27:48Z","updated_at":"2024-05-02T23:27:48Z","author_association":"CONTRIBUTOR","body":"PR #4461 adds the `resource.group` as a common tag - as long as you follow the same metrics init that you have in tserver the resource group should be automatically assigned.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2091903378/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2092991352","html_url":"https://github.com/apache/accumulo/issues/4521#issuecomment-2092991352","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4521","id":2092991352,"node_id":"IC_kwDOACaFSM58wIN4","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T13:11:20Z","updated_at":"2024-05-03T13:11:20Z","author_association":"CONTRIBUTOR","body":"This might work but definitely needs some experimenting as you said. I'm thinking through this and a concern I have with this approach is you might end up with similar churn as depending on the table balancer algorithm (whether it's the default `SimpleLoadBalancer` or something custom) and you could end up having to just repeatedly re-balance the same tables but of course that's probably the case today as well.\r\n\r\nI was trying to think through a worst case example, let's say you have a few tables and the balancing starts.\r\n\r\n1. Table A would be processed and find migrations so it would stop and balance A.\r\n2. It would run again and skip A and then go to table B and migrate Table B and stop.\r\n3. Third run starts and now table A needs balancing again after migrations from table B, so we rebalance A and start moving a subset of the same tablets we just moved and we stop.\r\n4. We run again and now A and B are ok but C needs balancing based on the table balancer, so it balances and stops.\r\n5. The next run now triggers a to need balancing again based on C moving and so forth.\r\n\r\nHow bad the churn is will depend on how likely the table balancing algorithm will re-trigger tables to rebalance again based on the future tables in the sorted order being balanced. The default `SimpleLoadBalancer` may not be that bad and this might work ok since it's just trying to spread things evenly so I think this is worth a try, but a custom balancer or other instances could be worse. Of course if someone wants to use a custom balancer then they would just keep this single table feature turned off.\r\n\r\nI think an interesting approach that would be nice if it wasn't too hard to implement would be to try and run the algorithm as a dry run without actually performing migrations and just gathering the list of migrations. Then you could take that set of migrations and run the algorithm again. You could have it configurable to run through some number of iterations before actually performing work. This may be a bigger change though and not sure what other consequences would occur but could also be worth a shot.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2092991352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093012145","html_url":"https://github.com/apache/accumulo/issues/4521#issuecomment-2093012145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4521","id":2093012145,"node_id":"IC_kwDOACaFSM58wNSx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T13:22:25Z","updated_at":"2024-05-03T13:22:25Z","author_association":"CONTRIBUTOR","body":"I was wondering if instead of going in a predictable order if the algorithm picked a random start point?  Maybe treat the list of tables (by id?) as a ring buffer, and then start somewhere random in the buffer and walk-through the candidates until you reach the start point?  This may help preventing getting stuck on tables that sort first.  \r\n\r\nAn alternative may be to gather a count of all tables that need migration and then work them off in order, starting with the largest counts.  Would this help it converge faster?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093012145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093012165","html_url":"https://github.com/apache/accumulo/issues/4521#issuecomment-2093012165","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4521","id":2093012165,"node_id":"IC_kwDOACaFSM58wNTF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T13:22:25Z","updated_at":"2024-05-03T13:22:25Z","author_association":"CONTRIBUTOR","body":"I'm working on a draft of this change now to use for testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093012165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093022635","html_url":"https://github.com/apache/accumulo/issues/4521#issuecomment-2093022635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4521","id":2093022635,"node_id":"IC_kwDOACaFSM58wP2r","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T13:27:57Z","updated_at":"2024-05-03T13:27:57Z","author_association":"CONTRIBUTOR","body":"Another \"feature\" may be to prioritize system tables - particularly the metadata table to make sure that the system tables are balanced first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093022635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093031881","html_url":"https://github.com/apache/accumulo/issues/4521#issuecomment-2093031881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4521","id":2093031881,"node_id":"IC_kwDOACaFSM58wSHJ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T13:32:46Z","updated_at":"2024-05-03T13:32:46Z","author_association":"CONTRIBUTOR","body":"@EdColeman - Those are some interesting ideas as well, I think this may be something where we just need to test a couple approaches and see what works the best","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093031881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093865815","html_url":"https://github.com/apache/accumulo/pull/4525#issuecomment-2093865815","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4525","id":2093865815,"node_id":"IC_kwDOACaFSM58zdtX","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T23:00:39Z","updated_at":"2024-05-03T23:00:39Z","author_association":"CONTRIBUTOR","body":"Looks like org.bouncycastle:bcprov-jdk18on is up-to-date now, so this is no longer needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093865815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":29110,"client_id":"Iv1.4f9a6346434f815e","slug":"dependabot","node_id":"MDM6QXBwMjkxMTA=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Dependabot","description":"","external_url":"https://dependabot-api.githubapp.com","html_url":"https://github.com/apps/dependabot","created_at":"2019-04-16T22:34:25Z","updated_at":"2024-03-20T21:06:35Z","permissions":{"actions":"read","checks":"write","contents":"write","issues":"write","members":"read","metadata":"read","pull_requests":"write","statuses":"read","vulnerability_alerts":"read","workflows":"write"},"events":["check_suite","issues","issue_comment","label","pull_request","pull_request_review","pull_request_review_comment","repository"]}},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093866338","html_url":"https://github.com/apache/accumulo/pull/4525#issuecomment-2093866338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4525","id":2093866338,"node_id":"IC_kwDOACaFSM58zd1i","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T23:01:18Z","updated_at":"2024-05-03T23:01:18Z","author_association":"CONTRIBUTOR","body":"Fixed with #4526 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2093866338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096193730","html_url":"https://github.com/apache/accumulo/pull/4510#issuecomment-2096193730","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4510","id":2096193730,"node_id":"IC_kwDOACaFSM588WDC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-06T14:38:16Z","updated_at":"2024-05-06T14:38:16Z","author_association":"CONTRIBUTOR","body":"Not sure these changes will handle the old format very well if seen.  This could lead to never deleting the old format and not considering the old format for GC purposes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096193730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096739546","html_url":"https://github.com/apache/accumulo/issues/4529#issuecomment-2096739546","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4529","id":2096739546,"node_id":"IC_kwDOACaFSM58-bTa","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-06T19:20:43Z","updated_at":"2024-05-06T19:20:43Z","author_association":"CONTRIBUTOR","body":"elasticity added at table for FATEs.  Maybe we would want a more general utility table instead of creating specific tables for each use?  Later, if performance showed that there is contention on the utility table, it could be then split into separate tables?\r\n\r\nUsing fewer tables may lead to easier management?   For example, if designated servers are used for the metadata table, it may be desirable to collocate the utility table(s) to the same servers.   This could come at the expense of more contention, but generally, the individual tables should be small relative to data tables, so there might not be a measurable impact if it was one table.\r\n\r\nIf a utility table is used, it may help if the design allowed for easy spiting by using variables / properties for the table name instead of them being hard coded?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096739546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096853560","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2096853560","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2096853560,"node_id":"IC_kwDOACaFSM58-3I4","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-06T20:30:43Z","updated_at":"2024-05-06T20:30:43Z","author_association":"MEMBER","body":"After changing to the `FunctionCounter`, the way they are displayed (by default at least) is as follows when set up to log:\r\n```\r\nMETRICS: 2024-05-06T16:26:53,938, accumulo.blockcache.data.hitcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} throughput=0.533333/s\r\nMETRICS: 2024-05-06T16:26:53,939, accumulo.blockcache.data.requestcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} throughput=0.6/s\r\nMETRICS: 2024-05-06T16:26:53,939, accumulo.blockcache.index.hitcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} throughput=1.2/s\r\nMETRICS: 2024-05-06T16:26:53,939, accumulo.blockcache.index.requestcount{host=localhost,instance.name=uno,port=9997,process.name=tserver} throughput=2.2/s\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096853560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096898644","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2096898644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2096898644,"node_id":"IC_kwDOACaFSM58_CJU","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-06T20:55:21Z","updated_at":"2024-05-06T20:55:21Z","author_association":"CONTRIBUTOR","body":"I confirmed that the MetricsIT passes with the current changes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2096898644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098420760","html_url":"https://github.com/apache/accumulo/issues/4462#issuecomment-2098420760","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4462","id":2098420760,"node_id":"IC_kwDOACaFSM59E1wY","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T13:32:37Z","updated_at":"2024-05-07T13:32:37Z","author_association":"MEMBER","body":"I can work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098420760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098536571","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2098536571","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2098536571,"node_id":"IC_kwDOACaFSM59FSB7","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T14:25:36Z","updated_at":"2024-05-07T14:25:36Z","author_association":"MEMBER","body":"I can look into this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098536571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098664125","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2098664125","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2098664125,"node_id":"IC_kwDOACaFSM59FxK9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T15:12:05Z","updated_at":"2024-05-07T15:12:05Z","author_association":"CONTRIBUTOR","body":"Wondering if the cache type should be a tag as opposed to being part of the metric name, but do not have a good sense of the pros and cons of that ATM.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098664125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098682368","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2098682368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2098682368,"node_id":"IC_kwDOACaFSM59F1oA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T15:17:26Z","updated_at":"2024-05-07T15:17:26Z","author_association":"CONTRIBUTOR","body":"@EdColeman I saw your question, I think there are some other metrics in Accumulo that are monotonically increasing that may be better suited as a FunctionCounter.  Not sure if those should be changed in 2.1 though.  For example `accumulo.tserver.scan.scanned.entries` may be a candidate for switching from a gauge to a function counter.  Also unrelated to FunctionCounter I noticed there are `accumulo.tserver.scan` and `accumulo.tserver.scans` prefixes for metrics.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098682368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098719562","html_url":"https://github.com/apache/accumulo/pull/4524#issuecomment-2098719562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4524","id":2098719562,"node_id":"IC_kwDOACaFSM59F-tK","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T15:28:24Z","updated_at":"2024-05-07T15:28:24Z","author_association":"MEMBER","body":"Marking this as ready for review, since it may not be reviewed otherwise","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2098719562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099095580","html_url":"https://github.com/apache/accumulo/issues/4492#issuecomment-2099095580","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4492","id":2099095580,"node_id":"IC_kwDOACaFSM59Hagc","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T18:51:47Z","updated_at":"2024-05-07T18:51:47Z","author_association":"MEMBER","body":"Closing via #4518 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099095580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099129751","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2099129751","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2099129751,"node_id":"IC_kwDOACaFSM59Hi2X","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T19:14:29Z","updated_at":"2024-05-07T19:14:29Z","author_association":"MEMBER","body":"> I noticed there are `accumulo.tserver.scan` and `accumulo.tserver.scans` prefixes for metrics.\r\n\r\n@keith-turner I can't find the `scans` in any metrics prefix. Where did you find that?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099129751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099130337","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2099130337","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2099130337,"node_id":"IC_kwDOACaFSM59Hi_h","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T19:14:53Z","updated_at":"2024-05-07T19:14:53Z","author_association":"CONTRIBUTOR","body":"> What it the purpose of the html javadocs table? From the description it is only for mapping old metrics names to new, but there are entries in there now that were not present in the old metrics system. So, it seems to have also become a place to document new metrics.\r\n\r\nThe HTML table was the simplest way that I could think of to document the metric name changes as we moved from Hadoop Metrics to Micrometer. I do agree that we need a good way of documenting them, especially since some of them may be used not just for monitoring, but resource control, in future versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099130337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099136152","html_url":"https://github.com/apache/accumulo/pull/4518#issuecomment-2099136152","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4518","id":2099136152,"node_id":"IC_kwDOACaFSM59HkaY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T19:18:33Z","updated_at":"2024-05-07T19:18:33Z","author_association":"CONTRIBUTOR","body":"> > I noticed there are `accumulo.tserver.scan` and `accumulo.tserver.scans` prefixes for metrics.\r\n> \r\n> @keith-turner I can't find the `scans` in any metrics prefix. Where did you find that?\r\n\r\nThese were changed in https://github.com/apache/accumulo/pull/4461. From `accumulo.tserver.scans` to `accumulo.scan`. I think we are moving towards removing the process name from the metric as it's already in the tags.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099136152/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099148487","html_url":"https://github.com/apache/accumulo/issues/4528#issuecomment-2099148487","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4528","id":2099148487,"node_id":"IC_kwDOACaFSM59HnbH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T19:27:01Z","updated_at":"2024-05-07T19:27:01Z","author_association":"CONTRIBUTOR","body":"Do we want to preclude users from being able to perform eventual scans on these tables? Just wondering if there is a use-case where this is needed and whether or not it could be enforced that eventual scans on the accumulo namespace are not allowed from within the server processes and utilities.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099148487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099167148","html_url":"https://github.com/apache/accumulo/issues/4529#issuecomment-2099167148","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4529","id":2099167148,"node_id":"IC_kwDOACaFSM59Hr-s","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T19:40:04Z","updated_at":"2024-05-07T19:40:04Z","author_association":"CONTRIBUTOR","body":"Is this related to, similar to, or a duplicate of, #4493 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099167148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099266711","html_url":"https://github.com/apache/accumulo/issues/4528#issuecomment-2099266711","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4528","id":2099266711,"node_id":"IC_kwDOACaFSM59IESX","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T20:37:12Z","updated_at":"2024-05-07T20:37:12Z","author_association":"CONTRIBUTOR","body":"@keith-turner brought up that maybe we want to block this for all users except the `system` user. \r\nWe might have a valid use-case for certain utility functions in accumulo that produce reports or metrics for troubleshooting that would run as the system user. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099266711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099341497","html_url":"https://github.com/apache/accumulo/pull/4531#issuecomment-2099341497","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4531","id":2099341497,"node_id":"IC_kwDOACaFSM59IWi5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T21:29:12Z","updated_at":"2024-05-07T21:29:12Z","author_association":"CONTRIBUTOR","body":"Still draft because I need to add some tests for this. The test changes as of now are cleanup of existing tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2099341497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100527501","html_url":"https://github.com/apache/accumulo/issues/4532#issuecomment-2100527501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4532","id":2100527501,"node_id":"IC_kwDOACaFSM59M4GN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T13:01:51Z","updated_at":"2024-05-08T13:01:51Z","author_association":"CONTRIBUTOR","body":"I think it makes sense for the ConfigurableScanServerSelector to wait for ScanServers to be available instead of immediately falling back to TabletServers. However, I think there should be a timeout set, I don't think the client should wait forever.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100527501/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100648413","html_url":"https://github.com/apache/accumulo/issues/4529#issuecomment-2100648413","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4529","id":2100648413,"node_id":"IC_kwDOACaFSM59NVnd","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T14:01:02Z","updated_at":"2024-05-08T14:01:02Z","author_association":"CONTRIBUTOR","body":"> Is this related to, similar to, or a duplicate of, #4493 ?\r\n\r\nIt's related to #4493. \r\n\r\nWe tested with the changes in #4510 and it increased scan server performance. \r\nOld Ref:\r\n~sservfile:/data/workspace/accumulo/test/target/mini-tests/\r\nNew Ref:\r\n~sserv5e6087acfile:/data/workspace/accumulo/test/target/\r\n\r\nFor this, it makes sense to drop the `~sserv` prefix.  \r\nProposed Ref:\r\n`5e6087acfile:/data/workspace/accumulo/test/target/`\r\n\r\nWe should probably figure out a way to split the scan server refs based on resource group name. \r\nThis would accomplish a couple of things. \r\n\r\n1. Allow tserver hosting resources to be dedicated to particular clients (scale a single resource group of scan servers and tservers) \r\n2. Scan server code would only need to scan for references in their relevant section of the table. \r\n3. The manager cleanup process for scan server refs could look at resource groups first and delete on that vs comparing each scan server UUID","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100648413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100651508","html_url":"https://github.com/apache/accumulo/issues/4529#issuecomment-2100651508","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4529","id":2100651508,"node_id":"IC_kwDOACaFSM59NWX0","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T14:02:32Z","updated_at":"2024-05-08T14:02:32Z","author_association":"CONTRIBUTOR","body":"I added the new FATE table in elasticity so I could work on this (it looks like targeting 3.1 ?) One thing is it looks like #4528 is still going to allow eventual scans by a system user so now sure how that impacts moving these refs to their own table.\r\n\r\nOthers can comment too but I don't think we need/want a general utility table. To me it seems like we already have a utility table...it's the metadata table. Anything that has a low amount of writes/contention can just be stored as metadata. The purpose of this new table is specifically there's too much contention on scan file refs so it makes sense that it's put into its own table and it can be split to optimize scan refs.\r\n\r\nSame for keeping FATE separate in elasticity, I think it should be its own table to handle the volume of FATE ops that will be happening.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100651508/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100669700","html_url":"https://github.com/apache/accumulo/issues/4529#issuecomment-2100669700","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4529","id":2100669700,"node_id":"IC_kwDOACaFSM59Na0E","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T14:06:04Z","updated_at":"2024-05-08T14:06:04Z","author_association":"CONTRIBUTOR","body":"So the reason #4528 was required was because we didn't want to have scan server refs end up on the root table for hitting the metadata table with an eventual scan. \r\n\r\nHowever, if all the scan server refs are moved to a separate table, then it doesn't matter as GC actions against the metadata and root table will still all look at the same scan server ref table. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2100669700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2101224458","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2101224458","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2101224458,"node_id":"IC_kwDOACaFSM59PiQK","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T18:52:06Z","updated_at":"2024-05-08T19:04:21Z","author_association":"MEMBER","body":"It seems like the METRICS are logged every second (configured by `cfg.setProperty(\"general.custom.metrics.opts.logging.step\", \"1s\");` in MetricsIT) but only updated every 5 seconds (configured by `private static final long DEFAULT_MIN_REFRESH_DELAY = TimeUnit.SECONDS.toMillis(5);` in FateMetrics). This makes it look like the METRICS values are wrong at the time they are logged in the MetricsIT. Since this is a fast test, increasing the update interval to every second, we can see values other than 0. Here's one set of the logged metrics for one cycle of logs showing a submitted transaction:\r\n\r\n```\r\n2024-05-07T16:05:07,695 [accumulo.METRICS] INFO : accumulo.fate.errors{host=groot,instance.name=miniInstance,port=35101,process.name=manager,type=zk.connection} value=0\r\n2024-05-07T16:05:07,695 [accumulo.METRICS] INFO : accumulo.fate.ops.activity{host=groot,instance.name=miniInstance,port=35101,process.name=manager} value=1\r\n2024-05-07T16:05:07,695 [accumulo.METRICS] INFO : accumulo.fate.ops.in.progress{host=groot,instance.name=miniInstance,port=35101,process.name=manager} value=1\r\n2024-05-07T16:05:07,696 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=failed_in_progress} value=0\r\n2024-05-07T16:05:07,696 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=in_progress} value=0\r\n2024-05-07T16:05:07,696 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=new} value=0\r\n2024-05-07T16:05:07,697 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=unknown} value=0\r\n2024-05-07T16:05:07,697 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=successful} value=0\r\n2024-05-07T16:05:07,697 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=failed} value=0\r\n2024-05-07T16:05:07,697 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=35101,process.name=manager,state=submitted} value=1\r\n```\r\n\r\nSo, it appears that the values of 0 are correct, they are just not updated as frequently as they are logged, making it seem like the count of 0 is more frequent than it actually is. Perhaps for this test we could increase the logging time to 5 seconds, or decrease the update time to 1 second so it is more clear in the logs what is actually happening at what time.\r\n\r\nOne thing I noticed when looking at this, `accumulo.fate.ops.in.progress` is a sum of all current txns (failed_in_progress, in_progress, new, unknown, successful, failed, and submitted). The \"in.progress\" may be a bit misleading since the \"in.progress\" in this case is different from the state \"in_progress\". Maybe something like `accumulo.fate.ops.total` or `accumulo.fate.ops.current.ops` would be clearer? Or maybe this was intended to only include txns that are in_progress? This doesn't seem to apply to `accumulo.fate.ops.in.progress.by.type` since this only includes those that are in_progress.\r\n\r\nAnother thing I noticed was it seems like the `accumulo.fate.ops.in.progress.by.type` metric is not reset from updates. For example, the following two cycles of logs are 1 second apart from each other:\r\n\r\n```\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.errors{host=groot,instance.name=miniInstance,port=34595,process.name=manager,type=zk.connection} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.ops.activity{host=groot,instance.name=miniInstance,port=34595,process.name=manager} value=3\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.ops.in.progress{host=groot,instance.name=miniInstance,port=34595,process.name=manager} value=1\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.ops.in.progress.by.type{host=groot,instance.name=miniInstance,op.type=TABLE_COMPACT,port=34595,process.name=manager} value=1\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=unknown} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=successful} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=failed} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=submitted} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=failed_in_progress} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=new} value=0\r\n2024-05-08T10:32:56,013 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=in_progress} value=1\r\n\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.errors{host=groot,instance.name=miniInstance,port=34595,process.name=manager,type=zk.connection} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.ops.activity{host=groot,instance.name=miniInstance,port=34595,process.name=manager} value=4\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.ops.in.progress{host=groot,instance.name=miniInstance,port=34595,process.name=manager} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.ops.in.progress.by.type{host=groot,instance.name=miniInstance,op.type=TABLE_COMPACT,port=34595,process.name=manager} value=1\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=unknown} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=successful} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=failed} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=submitted} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=failed_in_progress} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=new} value=0\r\n2024-05-08T10:32:57,014 [accumulo.METRICS] INFO : accumulo.fate.tx{host=groot,instance.name=miniInstance,port=34595,process.name=manager,state=in_progress} value=0\r\n```\r\n\r\nIn the first set of logs, 1 transaction is in_progress on TABLE_COMPACT, in the second set of logs, 0 transactions are in_progress but 1 is in progress doing op TABLE_COMPACT which doesn't make sense. Looking at the code and after some experimentation, it doesn't seem like this is an issue with seeing that transaction still in_progress in ZK, instead seems like it is just being logged again. I can't exactly narrow down why it's being logged again, I think someone more familiar with Metrics might be able to better understand.\r\n\r\nAnd one question, I noticed that these metrics are only obtained by looking at FATE transactions in ZK in elasticity (`List<AdminUtil.TransactionStatus> currFates = admin.getTransactionStatus(Map.of(FateInstanceType.META, metaFateStore), null, null, null);` in FateMetricValues). Should this also be looking at the UserFateStore/Accumulo FATE table for transactions? Or do we only care about META transactions here?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2101224458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2101242973","html_url":"https://github.com/apache/accumulo/issues/4498#issuecomment-2101242973","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4498","id":2101242973,"node_id":"IC_kwDOACaFSM59Pmxd","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-08T19:04:23Z","updated_at":"2024-05-08T19:04:23Z","author_association":"CONTRIBUTOR","body":"I believe the `accumulo.fate.ops.in.progress.by.type` were modeled on a monotonically increasing counter and then should not be reset.  Not sure about the reporting through.\r\n\r\nThe FATE metrics should provide a window / snapshot into system activity.  If the UserFateStore/FATE table is necessary for a complete view - then yes, it should be included.\r\n\r\nSince these were introduced in 1.10 the usage was to allow users to monitor system activity like bulk imports, create table, drop table  - knowing the number of transaction provides an quick view of the system heath. Knowing the type and step counts help isolate issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2101242973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]