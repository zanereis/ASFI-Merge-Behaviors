[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589502200","html_url":"https://github.com/apache/couchdb/issues/2221#issuecomment-589502200","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2221","id":589502200,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTUwMjIwMA==","user":{"login":"ashish9718","id":35861473,"node_id":"MDQ6VXNlcjM1ODYxNDcz","avatar_url":"https://avatars.githubusercontent.com/u/35861473?v=4","gravatar_id":"","url":"https://api.github.com/users/ashish9718","html_url":"https://github.com/ashish9718","followers_url":"https://api.github.com/users/ashish9718/followers","following_url":"https://api.github.com/users/ashish9718/following{/other_user}","gists_url":"https://api.github.com/users/ashish9718/gists{/gist_id}","starred_url":"https://api.github.com/users/ashish9718/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashish9718/subscriptions","organizations_url":"https://api.github.com/users/ashish9718/orgs","repos_url":"https://api.github.com/users/ashish9718/repos","events_url":"https://api.github.com/users/ashish9718/events{/privacy}","received_events_url":"https://api.github.com/users/ashish9718/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T05:15:15Z","updated_at":"2020-02-21T05:15:15Z","author_association":"NONE","body":"how can i solve this problem in android integrating paytm api in app\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589502200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589654745","html_url":"https://github.com/apache/couchdb/pull/2586#issuecomment-589654745","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2586","id":589654745,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTY1NDc0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T13:33:55Z","updated_at":"2020-02-21T13:33:55Z","author_association":"MEMBER","body":"@jjrodrig Please don't forget to also merge this to our `3.x` branch. (No requirement to merge to `3.0.x` as well.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589654745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590122745","html_url":"https://github.com/apache/couchdb/pull/2592#issuecomment-590122745","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2592","id":590122745,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDEyMjc0NQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-23T22:15:30Z","updated_at":"2020-02-23T22:15:30Z","author_association":"CONTRIBUTOR","body":"I think we'll also want these on master and maintenance branches, like the docs changes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590122745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590248646","html_url":"https://github.com/apache/couchdb/pull/2592#issuecomment-590248646","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2592","id":590248646,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDI0ODY0Ng==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-24T10:12:16Z","updated_at":"2020-02-24T10:12:16Z","author_association":"MEMBER","body":"@jaydoane could you target this against master. We can then rebase it onto the fdb branch later. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590248646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590279618","html_url":"https://github.com/apache/couchdb/pull/1638#issuecomment-590279618","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1638","id":590279618,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDI3OTYxOA==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-24T11:35:40Z","updated_at":"2020-02-24T11:35:40Z","author_association":"CONTRIBUTOR","body":"closing this until I have a few days free to work through it","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590279618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590550606","html_url":"https://github.com/apache/couchdb/pull/2571#issuecomment-590550606","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2571","id":590550606,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDU1MDYwNg==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-24T21:11:58Z","updated_at":"2020-02-24T21:11:58Z","author_association":"CONTRIBUTOR","body":"@davisp are you ok with this solution?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590550606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590747110","html_url":"https://github.com/apache/couchdb/pull/2593#issuecomment-590747110","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2593","id":590747110,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDc0NzExMA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T08:34:24Z","updated_at":"2020-02-25T08:34:24Z","author_association":"MEMBER","body":"Since this is already +1. I think you can just go ahead and merge into the the branch","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590747110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590747661","html_url":"https://github.com/apache/couchdb/pull/2593#issuecomment-590747661","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2593","id":590747661,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDc0NzY2MQ==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T08:35:55Z","updated_at":"2020-02-25T08:35:55Z","author_association":"CONTRIBUTOR","body":"Thanks @garrensmith ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590747661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590959775","html_url":"https://github.com/apache/couchdb/pull/2598#issuecomment-590959775","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2598","id":590959775,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDk1OTc3NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T16:53:49Z","updated_at":"2020-02-25T16:53:49Z","author_association":"CONTRIBUTOR","body":"Referring to the last discussion https://github.com/apache/couchdb/pull/2460#pullrequestreview-345631546 wonder if we could do anything else besides log error `couch_log`. End users might not have access to parse the logs.\r\n\r\nThere was some discussion on the ML about emitting error rows vs regular rows. Would that be viable? Or I was thinking of having a stats count for errors, say number of attempted but failed emits and a general reason for error `size_exceeded`. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/590959775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591107069","html_url":"https://github.com/apache/couchdb/pull/2585#issuecomment-591107069","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2585","id":591107069,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTEwNzA2OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T22:34:46Z","updated_at":"2020-02-25T22:34:46Z","author_association":"MEMBER","body":"Overall, this looks to be a really good first step getting mango updated for fdb. I've only had a few hours to spend reviewing this today and it'll take me a day or two to let it all soak in but there's a few things I'd like jot down while they're paged in.\r\n\r\nMy first major impression is that there's an awkward cross over between couch_views and the new mango fdb modules. AFAICT, this is mostly due to the way that mango jobs stop indexing once they reach the version stamp where they were created along with being able to just update a single document. It would seem to me that if we just added these two bits as optional features of couch_views it would slim down this entire PR considerably. It might also be worth getting the basic async-index-update mango working before jumping to having the single transaction updates. It feels as there's some criss cross between the changes for a new fdb combined with changes for the incremental updates that aren't quite gelled together.\r\n\r\nThe changes to fabric2_fdb need to be redone. There shouldn't be a single mention of mango in that module. There are a number of features that will want to know about db changes that should all share a single interface.\r\n\r\nFor the PR itself, this should definitely be split up into smaller chunks of logic that are described individually. The last one or two might be a fairly large commit but there's a lot of churn that could be processed more efficiently stepping through individual commits. If you need help on how to break down a large commit I'd happy to pair with you to show you the basic git commands for handling that.\r\n\r\nI really like your build status concept. I'd like to extend that for views as well to show initial build vs incremental update that would be useful for operators. Moving that status under a prefix would also give us the necessary structure for efficient view cleanups as well which I'm looking at working on next.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591107069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591253253","html_url":"https://github.com/apache/couchdb/pull/2592#issuecomment-591253253","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2592","id":591253253,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTI1MzI1Mw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T05:53:03Z","updated_at":"2020-02-26T05:53:03Z","author_association":"CONTRIBUTOR","body":"I couldn't figure out how to re-target to master without pulling in 150 other commits, so I just cherry picked onto a new branch and opened a [new PR](https://github.com/apache/couchdb/pull/2600)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591253253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591291514","html_url":"https://github.com/apache/couchdb/pull/2598#issuecomment-591291514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2598","id":591291514,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTI5MTUxNA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T08:02:35Z","updated_at":"2020-02-26T08:02:35Z","author_association":"MEMBER","body":"Thanks for the review @nickva I've made all the changes\r\n\r\nIn terms of logging the error. I've going with this approach for a two main reasons:\r\n\r\n1. It is the same as what views does already for when an error occurs while indexing a document in couch_js\r\n1. It should be straightforward for a user that is monitoring their logs to create some kind of event that is triggered when they get the size errors. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591291514/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591312830","html_url":"https://github.com/apache/couchdb/pull/2585#issuecomment-591312830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2585","id":591312830,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTMxMjgzMA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T08:58:14Z","updated_at":"2020-02-26T08:58:14Z","author_association":"MEMBER","body":"@davisp thanks for reviewing. Sorry I made a real mess with my commits and cheated a little and squashed into one. I've broken them up into a few commits. Its not perfect but breaks the context up a bit more and should make it easier to review. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591312830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591363118","html_url":"https://github.com/apache/couchdb/issues/2480#issuecomment-591363118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2480","id":591363118,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTM2MzExOA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T10:48:28Z","updated_at":"2020-02-26T10:53:01Z","author_association":"NONE","body":"This is reproducible for me (intermittently, but more often than not). Steps:\r\n\r\n1. `curl -X PUT -u 'u:p' 'http://localhost:5984/test2480?partitioned=true'`\r\n1. `curl -u 'u:p' -H 'Content-Type: application/json' -d '{\"keys\":[\"invalid\"]}' -v 'http://localhost:5984/test2480/_partition/a/_all_docs'`\r\n\r\nRepeat step 2 until the `* Excess found in a non pipelined read` message appears e.g.\r\n\r\n```\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (::1) port 5984 (#0)\r\n* Server auth using Basic with user '****'\r\n> POST /test2480/_partition/a/_all_docs HTTP/1.1\r\n> Host: localhost:5984\r\n> Authorization: Basic ****==\r\n> User-Agent: curl/7.64.1\r\n> Accept: */*\r\n> Content-Type: application/json\r\n> Content-Length: 20\r\n> \r\n* upload completely sent off: 20 out of 20 bytes\r\n< HTTP/1.1 400 Bad Request\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 73\r\n< Content-Type: application/json\r\n< Date: Wed, 26 Feb 2020 10:33:41 GMT\r\n< Server: CouchDB/3.0.0 (Erlang OTP/20)\r\n< X-Couch-Request-ID: 9c85a12afc\r\n< X-CouchDB-Body-Time: 0\r\n< \r\n* Excess found in a non pipelined read: excess = 63, size = 73, maxdownload = 73, bytecount = 0\r\n{\"error\":\"illegal_docid\",\"reason\":\"Doc id must be of form partition:id\"}\r\n* Connection #0 to host localhost left intact\r\n* Closing connection 0\r\n```\r\n\r\n For me the excess is 63 bytes and if I capture them with wireshark they are:\r\n```\r\n2c\r\n{\"total_rows\":0,\"offset\":null,\"rows\":[\r\n\r\n]}\r\n3\r\n);\r\n\r\n0\r\n\r\n\r\n```\r\n\r\nSo it looks like sometimes the view-like \"wrapper\" gets mangled into the error response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591363118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591569145","html_url":"https://github.com/apache/couchdb/issues/2480#issuecomment-591569145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2480","id":591569145,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTU2OTE0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T18:20:09Z","updated_at":"2020-02-26T19:35:41Z","author_association":"MEMBER","body":"[edited] Cannot reproduce on Windows. *CAN* reproduce on Linux. Interestingly, I can confirm this behaviour on both SM 1.8.5 and 60.\r\n\r\n```\r\n$ curl -u 'u:p' -H 'Content-Type: application/json' -d '{\"keys\":[\"invalid\"]}' -v 'http://localhost:15984/test2480/_partition/a/_all_docs'\r\n* Expire in 0 ms for 6 (transfer 0x56228db12e80)\r\n* Expire in 1 ms for 1 (transfer 0x56228db12e80)\r\n* Expire in 0 ms for 1 (transfer 0x56228db12e80)\r\n* Expire in 1 ms for 1 (transfer 0x56228db12e80)\r\n* Expire in 0 ms for 1 (transfer 0x56228db12e80)\r\n* Expire in 0 ms for 1 (transfer 0x56228db12e80)\r\n* Expire in 0 ms for 1 (transfer 0x56228db12e80)\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Expire in 149999 ms for 3 (transfer 0x56228db12e80)\r\n* Expire in 200 ms for 4 (transfer 0x56228db12e80)\r\n* connect to ::1 port 15984 failed: Connection refused\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Expire in 149999 ms for 3 (transfer 0x56228db12e80)\r\n* Connected to localhost (127.0.0.1) port 15984 (#0)\r\n* Server auth using Basic with user 'u'\r\n> POST /test2480/_partition/a/_all_docs HTTP/1.1\r\n> Host: localhost:15984\r\n> Authorization: Basic dTpw\r\n> User-Agent: curl/7.64.0\r\n> Accept: */*\r\n> Content-Type: application/json\r\n> Content-Length: 20\r\n>\r\n* upload completely sent off: 20 out of 20 bytes\r\n< HTTP/1.1 400 Bad Request\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 73\r\n< Content-Type: application/json\r\n< Date: Wed, 26 Feb 2020 18:52:27 GMT\r\n< Server: CouchDB/3.0.0-03a77db (Erlang OTP/20)\r\n< X-Couch-Request-ID: d842650a3e\r\n< X-CouchDB-Body-Time: 0\r\n<\r\n* Excess found in a non pipelined read: excess = 63, size = 73, maxdownload = 73, bytecount = 0\r\n{\"error\":\"illegal_docid\",\"reason\":\"Doc id must be of form partition:id\"}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591569145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591677431","html_url":"https://github.com/apache/couchdb/pull/2602#issuecomment-591677431","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2602","id":591677431,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTY3NzQzMQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T22:28:37Z","updated_at":"2020-02-26T22:28:37Z","author_association":"MEMBER","body":"Looks mostly good. We've got to go through the `Couch.login` calls in exunit tests and I have to fix chttpd_changes.erl since its based on a now outdated couch_changes.erl. Will get to that tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591677431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591683057","html_url":"https://github.com/apache/couchdb/issues/2603#issuecomment-591683057","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2603","id":591683057,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTY4MzA1Nw==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T22:44:23Z","updated_at":"2020-02-26T22:44:23Z","author_association":"NONE","body":"adding to compose 'environment ' section solved problem\r\n```\r\n db:        \r\n        image: apache/couchdb:3.0\r\n        restart: always   \r\n        volumes: \r\n            - ./etc:/opt/couchdb/etc/local.d  \r\n            - ./data:/opt/couchdb/data\r\n            - ./log:/opt/couchdb/var/log\r\n        ports:\r\n          - \"5984:5984\"\r\n        environment:\r\n          - 'COUCHDB_USER=admin'\r\n          - 'COUCHDB_PASSWORD=password' \r\n```\r\nstrange ... local.ini not checking for admins? though so v 2.3.1 have same behaviour\r\n   \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591683057/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591718469","html_url":"https://github.com/apache/couchdb/pull/2597#issuecomment-591718469","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2597","id":591718469,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTcxODQ2OQ==","user":{"login":"tsloughter","id":36227,"node_id":"MDQ6VXNlcjM2MjI3","avatar_url":"https://avatars.githubusercontent.com/u/36227?v=4","gravatar_id":"","url":"https://api.github.com/users/tsloughter","html_url":"https://github.com/tsloughter","followers_url":"https://api.github.com/users/tsloughter/followers","following_url":"https://api.github.com/users/tsloughter/following{/other_user}","gists_url":"https://api.github.com/users/tsloughter/gists{/gist_id}","starred_url":"https://api.github.com/users/tsloughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsloughter/subscriptions","organizations_url":"https://api.github.com/users/tsloughter/orgs","repos_url":"https://api.github.com/users/tsloughter/repos","events_url":"https://api.github.com/users/tsloughter/events{/privacy}","received_events_url":"https://api.github.com/users/tsloughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T00:44:43Z","updated_at":"2020-02-27T00:44:43Z","author_association":"NONE","body":"Why a custom header? W3C has a trace header https://www.w3.org/TR/trace-context/ and it is being supported by many languages and vendors in the OpenTracing/OpenCensus successor https://opentelemetry.io/, including Erlang/Elixir https://github.com/open-telemetry/opentelemetry-erlang-api/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591718469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591923435","html_url":"https://github.com/apache/couchdb/issues/2604#issuecomment-591923435","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2604","id":591923435,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTkyMzQzNQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T11:30:45Z","updated_at":"2020-02-27T11:30:45Z","author_association":"MEMBER","body":"There is a ticket in relation to this at https://github.com/apache/couchdb-docker/issues/8. I'm not particularly experienced with Docker Compose but the issue is that Clouseau and CouchDB need to share the same loopback network if running in different containers. This works on Kubernetes when both containers are in the same pod - I don't know if there's a way to do it in Docker Compose.\r\n\r\nAnother option is to use a combined container which includes both components. IBM publish one [here](https://hub.docker.com/r/ibmcom/couchdb3).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591923435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591981275","html_url":"https://github.com/apache/couchdb/pull/2597#issuecomment-591981275","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2597","id":591981275,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTk4MTI3NQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T13:51:33Z","updated_at":"2020-02-27T13:51:33Z","author_association":"CONTRIBUTOR","body":"Currently open tracing implementation in CouchDB supports B3 headers (see https://github.com/apache/couchdb/tree/prototype/fdb-layer/src/ctrace#b3-propagation). The B3 headers were invented by zipkin and ended up in some opentracing solutions.\r\n\r\nUnfortunately semantics of B3 headers doesn't allow expressing the following:\r\n* I want to trace this request but I don't have RootSpan please create it for me\r\n\r\nI was not aware that there is a concurrent W3C standard. It is probably quite new. Here is what I found on Jaeger page:\r\n```\r\nIn the future Jaeger will support the upcoming W3C Trace-Context specification.....\r\n```\r\n\r\nI briefly looked into W3C standard this morning. It doesn't look like there is a specific header which can be used to enable tracing without specifying root span at the same time. Although I admit my 15 min reading of the spec could miss it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591981275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591986140","html_url":"https://github.com/apache/couchdb/pull/2602#issuecomment-591986140","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2602","id":591986140,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTk4NjE0MA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T14:01:25Z","updated_at":"2020-02-27T14:01:25Z","author_association":"CONTRIBUTOR","body":"The `expect` argument is only used in `./test/elixir/test/auth_cache_test.exs`\r\n```\r\n./test/elixir/test/auth_cache_test.exs\r\n59:    resp = Couch.login(user, password, :fail)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/591986140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592020554","html_url":"https://github.com/apache/couchdb/pull/2597#issuecomment-592020554","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2597","id":592020554,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjAyMDU1NA==","user":{"login":"tsloughter","id":36227,"node_id":"MDQ6VXNlcjM2MjI3","avatar_url":"https://avatars.githubusercontent.com/u/36227?v=4","gravatar_id":"","url":"https://api.github.com/users/tsloughter","html_url":"https://github.com/tsloughter","followers_url":"https://api.github.com/users/tsloughter/followers","following_url":"https://api.github.com/users/tsloughter/following{/other_user}","gists_url":"https://api.github.com/users/tsloughter/gists{/gist_id}","starred_url":"https://api.github.com/users/tsloughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsloughter/subscriptions","organizations_url":"https://api.github.com/users/tsloughter/orgs","repos_url":"https://api.github.com/users/tsloughter/repos","events_url":"https://api.github.com/users/tsloughter/events{/privacy}","received_events_url":"https://api.github.com/users/tsloughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T15:26:03Z","updated_at":"2020-02-27T15:26:03Z","author_association":"NONE","body":"Ah ok, now I get what you are doing.\r\n\r\nFor B3 I think they actually have a \"debug\" header that you can send without id's that is meant to force a trace. But w3c traceheader I don't think has added such a feature yet.\r\n\r\nProbably no reason to depend on it for this simple case of forcing a trace with no root from the client.\r\n\r\nBut keep an eye on opentelemetry :), the spec and many of the clients (hopefully including the Erlang/Elixir library) will be going into beta in March. Can't tell what you use currently for tracing and reporting traces -- something custom and built-in? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592020554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592077661","html_url":"https://github.com/apache/couchdb/issues/2604#issuecomment-592077661","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2604","id":592077661,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjA3NzY2MQ==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T17:22:07Z","updated_at":"2020-02-27T17:22:07Z","author_association":"NONE","body":"thank you! \r\nibmcom/couchdb3 image useful for playground with full text search. but this image can't open databases created by apache/couchdb:3.0 image.\r\nmy docker compose file\r\n```\r\nversion: '3'\r\n\r\nservices:\r\n  db:\r\n        #ibmcom/couchdb3 treehouses/couchdb:2.3.1 apache/couchdb:3.0\r\n        image: ibmcom/couchdb3\r\n        restart: always   \r\n        volumes: \r\n            - ./etc:/opt/couchdb/etc/local.d  \r\n            - ./data:/opt/couchdb/data\r\n            - ./log:/opt/couchdb/var/log\r\n        ports:\r\n          - \"5984:5984\"\r\n        environment:\r\n          - 'COUCHDB_USER=admin'\r\n          - 'COUCHDB_PASSWORD=password'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592077661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592156881","html_url":"https://github.com/apache/couchdb/pull/2609#issuecomment-592156881","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2609","id":592156881,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE1Njg4MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T20:16:48Z","updated_at":"2020-02-27T20:16:48Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\n``` \r\nmake eunit apps=mem3 suites=mem3_sync_event_listener\r\n==> mem3 (compile)\r\n==> rel (compile)\r\n==> asf-master (compile)\r\n==> asf-master (setup_eunit)\r\n==> mem3 (eunit)\r\n======================== EUnit ========================\r\nmodule 'mem3_sync_event_listener'\r\n  Subscribe for configuration changes\r\n    mem3_sync_event_listener:267: should_set_sync_delay...[0.052 s] ok\r\n    mem3_sync_event_listener:275: should_set_sync_frequency...ok\r\n    mem3_sync_event_listener:283: should_restart_listener...[0.501 s] ok\r\n    mem3_sync_event_listener:292: should_terminate...[0.051 s] ok\r\n    [done in 0.774 s]\r\n  [done in 0.854 s]\r\n=======================================================\r\n  All 4 tests passed.\r\n==> rel (eunit)\r\n==> asf-master (eunit)\r\n```\r\n\r\nCan remove the ugly XKCD debug line if you want","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592156881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592157173","html_url":"https://github.com/apache/couchdb/pull/2609#issuecomment-592157173","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2609","id":592157173,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE1NzE3Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T20:17:30Z","updated_at":"2020-02-27T20:17:30Z","author_association":"MEMBER","body":"I think I'll leave it for awhile in case this doesn't fix things completely.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592157173/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592169555","html_url":"https://github.com/apache/couchdb/issues/2604#issuecomment-592169555","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2604","id":592169555,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE2OTU1NQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T20:48:25Z","updated_at":"2020-02-28T08:14:37Z","author_association":"MEMBER","body":"the ibm container runs CouchDB as uid 1001:1001 by default - the CouchDB community container runs Couch as uid  5984:5984, so you would need to set permissions on your mounted volumes appropriately. There shouldn't be any problem reading the database files when using appropriate permissions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592169555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592175520","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592175520","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592175520,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE3NTUyMA==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T21:03:38Z","updated_at":"2020-02-27T21:03:38Z","author_association":"CONTRIBUTOR","body":"Hi @dottorblaster \r\n\r\nThe test seems to be ok. Are you still working on it?\r\n\r\nPlease, remember to tag the form_submit.js as ported  by adding the following line as the first line of the js test. \r\n```\r\nreturn console.log('done in test/elixir/test/form_summit_test.exs');\r\n```\r\n\r\nand mark it as done in test/elixir/README.md\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592175520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592176176","html_url":"https://github.com/apache/couchdb/issues/2604#issuecomment-592176176","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2604","id":592176176,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE3NjE3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T21:05:16Z","updated_at":"2020-02-27T21:05:16Z","author_association":"MEMBER","body":"I think @willholley means that the Apache CouchDB container runs Couch as `5984:5984`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592176176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592190333","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592190333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592190333,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE5MDMzMw==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T21:40:47Z","updated_at":"2020-02-27T21:40:47Z","author_association":"MEMBER","body":"Hi @jjrodrig \r\n\r\nYeah it's still a WIP, I'm finalizing this PR right now, thanks for reviewing it in advance!\r\n\r\nI'll do it in a separate commit and ask for a review once I've done, thanks for warning me out on that, I wasn't up to date abotu that `return` statement","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592190333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592222087","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592222087","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592222087,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjIyMjA4Nw==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T23:02:33Z","updated_at":"2020-02-27T23:02:33Z","author_association":"CONTRIBUTOR","body":"Please, don't forget to merge this also in 3.x branch\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592222087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592321227","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592321227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592321227,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjMyMTIyNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T05:28:05Z","updated_at":"2020-02-28T05:28:05Z","author_association":"MEMBER","body":"@jjrodrig @dottorblaster It should hit all of: `master`, `3.x` and `3.0.x` please. Sorry, I know that's a lot of work, but we are planning a 3.0.1 release in the next week or two, and it'd be nice to include these improvements there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592321227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592334129","html_url":"https://github.com/apache/couchdb/issues/2612#issuecomment-592334129","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2612","id":592334129,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjMzNDEyOQ==","user":{"login":"nerdvegas","id":1632842,"node_id":"MDQ6VXNlcjE2MzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/1632842?v=4","gravatar_id":"","url":"https://api.github.com/users/nerdvegas","html_url":"https://github.com/nerdvegas","followers_url":"https://api.github.com/users/nerdvegas/followers","following_url":"https://api.github.com/users/nerdvegas/following{/other_user}","gists_url":"https://api.github.com/users/nerdvegas/gists{/gist_id}","starred_url":"https://api.github.com/users/nerdvegas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nerdvegas/subscriptions","organizations_url":"https://api.github.com/users/nerdvegas/orgs","repos_url":"https://api.github.com/users/nerdvegas/repos","events_url":"https://api.github.com/users/nerdvegas/events{/privacy}","received_events_url":"https://api.github.com/users/nerdvegas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T06:23:25Z","updated_at":"2020-02-28T06:24:27Z","author_association":"NONE","body":"I've just tried deleting the streaming replication jobs, and this appears to solve the problem. However, we need replication! When I recreate them, the problem reappears.\r\n\r\nThere is only a small amount of replication traffic though. Every few minutes there's a monitoring process that writes a test doc and checks to see if it successfully replicates to each remote cluster. We're only talking a handful of documents within a minute or two.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592334129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592334897","html_url":"https://github.com/apache/couchdb/issues/2489#issuecomment-592334897","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2489","id":592334897,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjMzNDg5Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T06:26:27Z","updated_at":"2020-02-28T06:26:27Z","author_association":"MEMBER","body":"Hopefully fixed by https://github.com/apache/couchdb/pull/2609","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592334897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592341806","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-592341806","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":592341806,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjM0MTgwNg==","user":{"login":"oldrich-svec","id":44394662,"node_id":"MDQ6VXNlcjQ0Mzk0NjYy","avatar_url":"https://avatars.githubusercontent.com/u/44394662?v=4","gravatar_id":"","url":"https://api.github.com/users/oldrich-svec","html_url":"https://github.com/oldrich-svec","followers_url":"https://api.github.com/users/oldrich-svec/followers","following_url":"https://api.github.com/users/oldrich-svec/following{/other_user}","gists_url":"https://api.github.com/users/oldrich-svec/gists{/gist_id}","starred_url":"https://api.github.com/users/oldrich-svec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oldrich-svec/subscriptions","organizations_url":"https://api.github.com/users/oldrich-svec/orgs","repos_url":"https://api.github.com/users/oldrich-svec/repos","events_url":"https://api.github.com/users/oldrich-svec/events{/privacy}","received_events_url":"https://api.github.com/users/oldrich-svec/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T06:40:52Z","updated_at":"2020-02-28T06:40:52Z","author_association":"NONE","body":"I also ended in the same trap on Windows Server 2019 + CouchDB 3.0.0. Maybe you could mention it in the upgrade guide?:\r\n\r\nhttps://docs.couchdb.org/en/stable/install/upgrading.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592341806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592392389","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592392389","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592392389,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjM5MjM4OQ==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T07:48:14Z","updated_at":"2020-02-28T07:48:14Z","author_association":"MEMBER","body":"@wohali @jjrodrig looks reasonable :-)\r\n\r\nWhat's the workflow? Should I create new PRs for this branch to hit `3.x` and `3.0.y`, or should I cherry pick my commits from master to those branches?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592392389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592400933","html_url":"https://github.com/apache/couchdb/issues/2604#issuecomment-592400933","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2604","id":592400933,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQwMDkzMw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T08:14:21Z","updated_at":"2020-02-28T08:14:21Z","author_association":"MEMBER","body":"ha yes - thanks for the catch @wohali ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592400933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592464389","html_url":"https://github.com/apache/couchdb/pull/2602#issuecomment-592464389","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2602","id":592464389,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQ2NDM4OQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T11:03:12Z","updated_at":"2020-02-28T11:03:59Z","author_association":"CONTRIBUTOR","body":"I propose following change:\r\n```\r\ndiff --git a/src/chttpd/test/exunit/tracing_test.exs b/src/chttpd/test/exunit/tracing_test.exs\r\nindex b50ef936e..f66fb87a2 100644\r\n--- a/src/chttpd/test/exunit/tracing_test.exs\r\n+++ b/src/chttpd/test/exunit/tracing_test.exs\r\n@@ -29,7 +29,7 @@ defmodule Couch.Test.OpenTracing do\r\n\r\n   setup context do\r\n     db_name = Utils.random_name(\"db\")\r\n-    session = Couch.login(context.base_url, context.user, context.pass)\r\n+    session = Couch.login(context.user, context.pass, base_url: context.base_url)\r\n\r\n     on_exit(fn ->\r\n       delete_db(session, db_name)\r\ndiff --git a/test/elixir/lib/couch.ex b/test/elixir/lib/couch.ex\r\nindex cf105c743..9b577e002 100644\r\n--- a/test/elixir/lib/couch.ex\r\n+++ b/test/elixir/lib/couch.ex\r\n@@ -3,7 +3,6 @@ defmodule Couch.Session do\r\n   CouchDB session helpers.\r\n   \"\"\"\r\n\r\n-  @enforce_keys [:cookie]\r\n   defstruct [:cookie, :error, :base_url]\r\n\r\n   def new(cookie, error \\\\ \"\") do\r\n@@ -165,26 +164,25 @@ defmodule Couch do\r\n     login(user, pass)\r\n   end\r\n\r\n-  def login(user, pass, expect \\\\ :success) do\r\n-    base_url = System.get_env(\"EX_COUCH_URL\") || \"http://127.0.0.1:15984\"\r\n-    login(base_url, user, pass, expect)\r\n-  end\r\n-\r\n-  def login(base_url, user, pass, expect \\\\ :success) do\r\n+  def login(user, pass, options \\\\ []) do\r\n+    options = options |> Enum.into(%{})\r\n+    base_url = Map.get_lazy(options, :base_url, fn ->\r\n+      System.get_env(\"EX_COUCH_URL\") || \"http://127.0.0.1:15984\"\r\n+    end)\r\n     resp = Couch.post(\r\n       \"/_session\",\r\n       body: %{:username => user, :password => pass},\r\n       base_url: base_url\r\n     )\r\n-\r\n-    if expect == :success do\r\n+    if Map.get(options, :expect, :success) == :success do\r\n       true = resp.body[\"ok\"]\r\n       cookie = resp.headers[:\"set-cookie\"]\r\n       [token | _] = String.split(cookie, \";\")\r\n-      %Couch.Session{cookie: token}\r\n+      %Couch.Session{cookie: token, base_url: base_url}\r\n     else\r\n       true = Map.has_key?(resp.body, \"error\")\r\n-      %Couch.Session{error: resp.body[\"error\"]}\r\n+      %Couch.Session{error: resp.body[\"error\"], base_url: base_url}\r\n     end\r\n   end\r\n+\r\n end\r\ndiff --git a/test/elixir/test/auth_cache_test.exs b/test/elixir/test/auth_cache_test.exs\r\nindex 2ba396de7..5582b2f96 100644\r\n--- a/test/elixir/test/auth_cache_test.exs\r\n+++ b/test/elixir/test/auth_cache_test.exs\r\n@@ -56,7 +56,7 @@ defmodule AuthCacheTest do\r\n   end\r\n\r\n   defp login_fail(user, password) do\r\n-    resp = Couch.login(user, password, :fail)\r\n+    resp = Couch.login(user, password, expect: :fail)\r\n     assert resp.error, \"Login error is expected.\"\r\n   end\r\n```\r\n\r\nUnfortunately I cannot test it. My attempts fail with:\r\n```\r\n==> chttpd (compile)\r\nsrc/couchdb/src/chttpd/src/chttpd_changes.erl:88: field seq_btree undefined in record mrview\r\nCompiling src/couchdb/src/chttpd/src/chttpd_changes.erl failed:\r\nERROR: compile failed while processing src/couchdb/src/chttpd: rebar_abort\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592464389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592578290","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592578290","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592578290,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjU3ODI5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T16:02:04Z","updated_at":"2020-02-28T16:02:04Z","author_association":"MEMBER","body":"Yes, 3 separate PRs required. Those other 2 branches are protected, you shouldn't be able to commit to them directly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592578290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592578837","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-592578837","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":592578837,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjU3ODgzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T16:03:12Z","updated_at":"2020-02-28T16:03:12Z","author_association":"MEMBER","body":"@oldrich-svec It's on the download page:\r\n\r\nhttps://neighbourhood.ie/download-apache-couchdb-win/\r\n\r\nAnd it's on the \"Installation on Windows page\":\r\n\r\nhttps://docs.couchdb.org/en/stable/install/windows.html\r\n\r\nDo you think we need it on the upgrading page, too?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592578837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592598456","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-592598456","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":592598456,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjU5ODQ1Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T16:48:04Z","updated_at":"2020-02-28T16:48:04Z","author_association":"MEMBER","body":"I've added a notice to the Release Notes page in https://github.com/apache/couchdb-documentation/pull/500\r\n\r\nThat will shortly show up on docs.couchdb.org (the RTD queue is busy).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592598456/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592663682","html_url":"https://github.com/apache/couchdb/issues/2613#issuecomment-592663682","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2613","id":592663682,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjY2MzY4Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T18:29:43Z","updated_at":"2020-02-28T18:29:43Z","author_association":"CONTRIBUTOR","body":"@ricellis \r\n\r\nThank you for your bug report.\r\n\r\nThis is a valid bug. It happens in this function:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_db_create.erl#L37\r\n\r\n\r\nTwo concurrent requests can both check that the db exists, that can return`false` for both so they then proceed to create the shard doc. One can succeed and the other will get a conflict.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592663682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592673764","html_url":"https://github.com/apache/couchdb/pull/2608#issuecomment-592673764","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2608","id":592673764,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjY3Mzc2NA==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T18:54:29Z","updated_at":"2020-02-28T18:54:29Z","author_association":"MEMBER","body":"@wohali going to do this in some time, thanks for showing me the way \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592673764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592696609","html_url":"https://github.com/apache/couchdb/pull/2602#issuecomment-592696609","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2602","id":592696609,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjY5NjYwOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T19:48:35Z","updated_at":"2020-02-28T19:48:35Z","author_association":"MEMBER","body":"@iilyak Thanks! I'm working on fixing that issue with the changes code. I'll pull your diff in once I've got that cleaned up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592696609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592753114","html_url":"https://github.com/apache/couchdb/issues/2612#issuecomment-592753114","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2612","id":592753114,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjc1MzExNA==","user":{"login":"nerdvegas","id":1632842,"node_id":"MDQ6VXNlcjE2MzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/1632842?v=4","gravatar_id":"","url":"https://api.github.com/users/nerdvegas","html_url":"https://github.com/nerdvegas","followers_url":"https://api.github.com/users/nerdvegas/followers","following_url":"https://api.github.com/users/nerdvegas/following{/other_user}","gists_url":"https://api.github.com/users/nerdvegas/gists{/gist_id}","starred_url":"https://api.github.com/users/nerdvegas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nerdvegas/subscriptions","organizations_url":"https://api.github.com/users/nerdvegas/orgs","repos_url":"https://api.github.com/users/nerdvegas/repos","events_url":"https://api.github.com/users/nerdvegas/events{/privacy}","received_events_url":"https://api.github.com/users/nerdvegas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T22:13:38Z","updated_at":"2020-02-28T22:13:38Z","author_association":"NONE","body":"I've found further info digging into the logs more.\r\n\r\nThe problematic _changes requests all come from one of the cluster nodes, which is hitting the other node's _changes endpoint. The situation is as shown below:\r\n\r\n```\r\n /----\\\r\n |    |\r\n |    (bad-resp-times)\r\n |    |\r\n |    v\r\ncouch01-----(bad-resp-times)------>couch02\r\n^                                    ^\r\n|                                    |\r\n|                                    |\r\n(good-resp-times)                    (good-resp-times)\r\n|                                    |\r\n|                                    |\r\nwebservice---------------------------/\r\n```\r\n\r\nNote also that couch01 has bad _changes response times too, _with requests from its own IP_.\r\n\r\nWhat I'm wondering is:\r\n* Why the bad response times only with requests from couch01?\r\n* Why does couch01 hit couch02 at all (is this an expected part of cluster operation? Is it related to replication?)\r\n* Why doesn't couch02 hit couch01?\r\n* Why is couch01 requesting changes feed from itself?\r\n\r\nThx\r\nAllan\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592753114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592760943","html_url":"https://github.com/apache/couchdb/issues/2612#issuecomment-592760943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2612","id":592760943,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjc2MDk0Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T22:36:05Z","updated_at":"2020-02-28T22:36:05Z","author_association":"CONTRIBUTOR","body":"`\r\n[notice] 2020-02-28T05:42:34.120799Z couchdb@10.7.65.122 <0.15451.0> 76934fa50d ******:5984 10.7.65.121 admin GET /configs/_changes?feed=continuous&style=all_docs&since=%221065727-g1AAAABWeJzLYWBgYMxgTmEQTs4vTc5ISXIwNNAz1zMz1TM0MswBSjIlMuSxMPwHgqwM5iQGAaf_uUBRdvMkQ0vDRDPs-rIAuoQWpw%22&timeout=10000 200 ok 16978\r\n`\r\n\r\n> The distribution of long response times looks a little odd. For example, I see a lot of response times of 10,003-10,005ms, almost as if there's been some sort of timeout at 10,000ms\r\n\r\nExactly. There is a timeout. What the timeout means is that as long there are changes on the source, it will stream them. There could be say 100M documents and they should all stream out. Then, after they are all done and the stream is all caught up, it will sleep / wait for 10 more seconds to see if there would be more changes coming. Then if there are no more changes, the feed will timeout and stop. The replicator will then start a new request from the last update sequence.\r\n\r\n\r\nThat timeout is part of the normal replication protocol.  When I measure requests latency for example I always exclude _changes feeds as they have these long running connections that skew the results.\r\n\r\nThat timeout parameter is also derived from a setting you can configure:\r\n\r\nhttps://docs.couchdb.org/en/stable/config/replicator.html#replicator/connection_timeout\r\n\r\n\r\nAnd it is `connection_timeout / 3`. If you know you only replicate locally, you can set that value to something lower. So example if it is set to 6000 (msec), then the `timeout` in the _changes requests will be 2000 msec which is 2 seconds. However that also means that idle replication will continuously restart their requests every 2 seconds which doesn't seem that great but if you want that it's something you can configure.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592760943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592765935","html_url":"https://github.com/apache/couchdb/issues/2612#issuecomment-592765935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2612","id":592765935,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjc2NTkzNQ==","user":{"login":"nerdvegas","id":1632842,"node_id":"MDQ6VXNlcjE2MzI4NDI=","avatar_url":"https://avatars.githubusercontent.com/u/1632842?v=4","gravatar_id":"","url":"https://api.github.com/users/nerdvegas","html_url":"https://github.com/nerdvegas","followers_url":"https://api.github.com/users/nerdvegas/followers","following_url":"https://api.github.com/users/nerdvegas/following{/other_user}","gists_url":"https://api.github.com/users/nerdvegas/gists{/gist_id}","starred_url":"https://api.github.com/users/nerdvegas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nerdvegas/subscriptions","organizations_url":"https://api.github.com/users/nerdvegas/orgs","repos_url":"https://api.github.com/users/nerdvegas/repos","events_url":"https://api.github.com/users/nerdvegas/events{/privacy}","received_events_url":"https://api.github.com/users/nerdvegas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-28T22:52:39Z","updated_at":"2020-02-28T22:52:39Z","author_association":"NONE","body":"Ah ok, well all is good if this is to be expected.\r\n\r\nHowever, is there any way I can remove the effect of _changes from the avg response times stats returned on _stats? This is throwing things off and it's why I noticed this in the first place; I'd really like to have response times stats for typical requests only.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592765935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592871357","html_url":"https://github.com/apache/couchdb/issues/2618#issuecomment-592871357","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2618","id":592871357,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjg3MTM1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-29T04:48:11Z","updated_at":"2020-02-29T04:48:11Z","author_association":"MEMBER","body":"Hi @hamedminaee ,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)\r\n\r\nThank you for using CouchDB!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592871357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592961539","html_url":"https://github.com/apache/couchdb/pull/2619#issuecomment-592961539","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2619","id":592961539,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjk2MTUzOQ==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-29T16:17:11Z","updated_at":"2020-02-29T16:17:11Z","author_association":"MEMBER","body":"(I wanted to approve instead I merged. I'm dumb)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592961539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592987828","html_url":"https://github.com/apache/couchdb/issues/2480#issuecomment-592987828","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2480","id":592987828,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjk4NzgyOA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-29T19:54:07Z","updated_at":"2020-02-29T19:54:07Z","author_association":"MEMBER","body":"fyi: it's intermittent because it depends on whether the fabric:get_doc_count response arrives before the ?MODULE, open_doc response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/592987828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593263398","html_url":"https://github.com/apache/couchdb/issues/2480#issuecomment-593263398","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2480","id":593263398,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzI2MzM5OA==","user":{"login":"vmatyus","id":26717393,"node_id":"MDQ6VXNlcjI2NzE3Mzkz","avatar_url":"https://avatars.githubusercontent.com/u/26717393?v=4","gravatar_id":"","url":"https://api.github.com/users/vmatyus","html_url":"https://github.com/vmatyus","followers_url":"https://api.github.com/users/vmatyus/followers","following_url":"https://api.github.com/users/vmatyus/following{/other_user}","gists_url":"https://api.github.com/users/vmatyus/gists{/gist_id}","starred_url":"https://api.github.com/users/vmatyus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmatyus/subscriptions","organizations_url":"https://api.github.com/users/vmatyus/orgs","repos_url":"https://api.github.com/users/vmatyus/repos","events_url":"https://api.github.com/users/vmatyus/events{/privacy}","received_events_url":"https://api.github.com/users/vmatyus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T07:40:36Z","updated_at":"2020-03-02T07:40:36Z","author_association":"NONE","body":"In my local development environment it is quite frequent. 1 of 10 times succeeds returning the body content, but it is indeed not deterministic, sometimes the 8th try succeeds. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593263398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593338317","html_url":"https://github.com/apache/couchdb/pull/2597#issuecomment-593338317","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2597","id":593338317,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzMzODMxNw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T10:41:57Z","updated_at":"2020-03-02T10:41:57Z","author_association":"CONTRIBUTOR","body":"> But keep an eye on opentelemetry :), the spec and many of the clients (hopefully including the Erlang/Elixir library) will be going into beta in March. \r\n\r\nThank you this is definitely good to know. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593338317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593407642","html_url":"https://github.com/apache/couchdb/issues/2621#issuecomment-593407642","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2621","id":593407642,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQwNzY0Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T13:41:37Z","updated_at":"2020-03-02T13:41:37Z","author_association":"MEMBER","body":"mango's \"list\" function lists the contents of the ddoc_cache which does not accurately represent the list of indexes. In my opinion ddoc_cache should only be used to speed up the loading of design documents on request, it's not appropriate to use it to make any claim about the current state of the database.\r\n\r\nOne of two paths suggest themselves;\r\n\r\n1) change mango list to query the database for the list of ddocs \r\n2) ensure there are bounds of how inaccurate the ddoc cache can get (will an index delete request trigger cache invalidation directly? are we waiting for the LRU to remove this item after a time delay or, worse, only when we hit capacity and must make space for a new ddoc?)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593407642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593489514","html_url":"https://github.com/apache/couchdb/issues/2623#issuecomment-593489514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2623","id":593489514,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQ4OTUxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:27:55Z","updated_at":"2020-03-02T16:27:55Z","author_association":"MEMBER","body":"@natcohen This is a breaking change in CouchDB 3.0 and expected:\r\n\r\n* http://docs.couchdb.org/en/stable/whatsnew/3.0.html\r\n* https://github.com/apache/couchdb/pull/2389\r\n\r\nIn the Debian installer, the `debconf` framework allows us to prompt the user at install time for the user, and place it in an `ini` file. Unfortunately, CentOS/RedHat have no such mechanism.\r\n\r\nTo work around this, add a section like the following to your `/opt/couchdb/etc/local.ini` file:\r\n\r\n```ini\r\n[admins]\r\nadmin = password\r\n```\r\n\r\nYou can then run `service start couchdb` and CouchDB will startup with your admin user.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593489514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593492249","html_url":"https://github.com/apache/couchdb/issues/2623#issuecomment-593492249","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2623","id":593492249,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQ5MjI0OQ==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:33:34Z","updated_at":"2020-03-02T16:33:34Z","author_association":"NONE","body":"Ok but then the doc should reflect that... Following this: https://docs.couchdb.org/en/stable/install/unix.html doesn't give a clue to what needs to be done.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593492249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593493609","html_url":"https://github.com/apache/couchdb/issues/2620#issuecomment-593493609","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2620","id":593493609,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQ5MzYwOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:36:00Z","updated_at":"2020-03-02T16:36:00Z","author_association":"MEMBER","body":"CouchDB is written in Erlang. Mango relies on the Erlang regular expression library, which itself is based on PCRE - but with some modifications.\r\n\r\nhttp://erlang.org/doc/man/re.html should give you a full reference.\r\n\r\nhttp://erlang.org/doc/man/re.html#internal-option-setting is the specific setting you were asking about.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593493609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593494943","html_url":"https://github.com/apache/couchdb/issues/2218#issuecomment-593494943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2218","id":593494943,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQ5NDk0Mw==","user":{"login":"djBo","id":931916,"node_id":"MDQ6VXNlcjkzMTkxNg==","avatar_url":"https://avatars.githubusercontent.com/u/931916?v=4","gravatar_id":"","url":"https://api.github.com/users/djBo","html_url":"https://github.com/djBo","followers_url":"https://api.github.com/users/djBo/followers","following_url":"https://api.github.com/users/djBo/following{/other_user}","gists_url":"https://api.github.com/users/djBo/gists{/gist_id}","starred_url":"https://api.github.com/users/djBo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djBo/subscriptions","organizations_url":"https://api.github.com/users/djBo/orgs","repos_url":"https://api.github.com/users/djBo/repos","events_url":"https://api.github.com/users/djBo/events{/privacy}","received_events_url":"https://api.github.com/users/djBo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:38:43Z","updated_at":"2020-03-02T16:38:43Z","author_association":"NONE","body":"Eventhough it is likely this will never be read, but where can I find the rationale behind deprecating shows, lists and the rewrite endpoint?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593494943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593497634","html_url":"https://github.com/apache/couchdb/issues/2623#issuecomment-593497634","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2623","id":593497634,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzQ5NzYzNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:44:08Z","updated_at":"2020-03-02T16:44:08Z","author_association":"MEMBER","body":"@natcohen Thanks - would you be willing to help us? We're always looking for support. \r\n\r\nFork https://github.com/apache/couchdb-documentation and make a pull request with the recommended change. We'll definitely take it!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593497634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593500410","html_url":"https://github.com/apache/couchdb/issues/2218#issuecomment-593500410","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2218","id":593500410,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzUwMDQxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T16:49:45Z","updated_at":"2020-03-02T16:49:45Z","author_association":"MEMBER","body":"@djBo The text below the index here is the shortest explanation: https://docs.couchdb.org/en/stable/ddocs/index.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593500410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593884319","html_url":"https://github.com/apache/couchdb/issues/2620#issuecomment-593884319","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2620","id":593884319,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mzg4NDMxOQ==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T10:43:39Z","updated_at":"2020-03-03T10:46:28Z","author_association":"NONE","body":"thank you.\r\n\r\nthis explains the missing piece, how to translate PCRE to Erlang CouchDB selector syntax.\r\nthere is a singular stackoverflow example that explains case insensitive (?i) \r\n\r\nbut now with the resources you linked to I see how to combine operators (?im-sx) \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593884319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593994933","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-593994933","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":593994933,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mzk5NDkzMw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T15:00:59Z","updated_at":"2020-03-03T15:00:59Z","author_association":"MEMBER","body":"Hi @natcohen, thanks for the report.\r\n\r\nThe distributed Erlang cookie can be set a few different ways. The `etc/vm.args` file has a line that starts with `-setcookie`; this is probably the one that's in effect. It defaults to the same `monster` value above.\r\n\r\nThe `-9` error looks like a problem with quoting in the shell. I'll confess that I tend to get that sort of thing working by trial and error  As a test you could remove the entire line:\r\n\r\n>          -XX:OnOutOfMemoryError=\\\"kill -9 %p\\\" \\\r\n\r\nand see if that gets you going.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593994933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593999710","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-593999710","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":593999710,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mzk5OTcxMA==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T15:10:21Z","updated_at":"2020-03-03T15:10:21Z","author_association":"NONE","body":"@kocolosk Great, without this line, it seems to work (I will do some tests).\r\n\r\nBTW, should we remove this line from the documentation? Also should we explain where this setcookie value is taken from?\r\n\r\nIn addition, once I run clouseau, do I have to restart CouchDB? Do I have to do anything within CouchDB (from the fresh install)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/593999710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594001594","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-594001594","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":594001594,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDAwMTU5NA==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T15:14:04Z","updated_at":"2020-03-03T15:14:18Z","author_association":"NONE","body":"It also works without escaping the scopes:\r\n\r\n```\r\n-XX:OnOutOfMemoryError=\"kill -9 %p\" \\\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594001594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594006362","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-594006362","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":594006362,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDAwNjM2Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T15:22:22Z","updated_at":"2020-03-03T15:22:22Z","author_association":"MEMBER","body":"You shouldn't need to restart CouchDB, any request that needs a Clouseau process will try to establish a connection to it if one does not already exist.\r\n\r\nI do think we could improve the documentation based on your experience, especially the bit about the Erlang magic cookie. I'm not sure about removing the `kill -9` direction altogether; it has been our recommended practice to set that flag to help the system quickly recover from any condition that could cause the JVM memory to balloon.\r\n\r\nIt'd be nice if we could find a way to make that easier to invoke, e.g. by including a script that starts / stops the Clouseau service. But I'm not sure anyone is ready to pick that up. Will need to give it some thought.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594006362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594061549","html_url":"https://github.com/apache/couchdb/pull/2585#issuecomment-594061549","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2585","id":594061549,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDA2MTU0OQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T17:09:10Z","updated_at":"2020-03-03T17:16:35Z","author_association":"CONTRIBUTOR","body":"Just started going over this PR. I noticed we're going through the EPI route for each doc update. Looks like Ken may be utilizing the EPI route as well.. Will it make more sense to plug in the hook into Ken later on as part of Ken's consolidated auto indexing scheme? \r\n\r\nI see work currently being done by @nickva in this regard: https://github.com/apache/couchdb/commit/b16c4a1069084e48d713125c4dc1c23d130499cf\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594061549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594086924","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-594086924","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":594086924,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDA4NjkyNA==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T18:04:00Z","updated_at":"2020-03-03T18:04:00Z","author_association":"NONE","body":"@kocolosk Thanks for your help!\r\n\r\nDoes it mean that escaping with backslashes depends on the server/OS? This could definitely be added to the documentation if we can  determine which OS require escaping","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594086924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594151499","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594151499","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594151499,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDE1MTQ5OQ==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T20:26:40Z","updated_at":"2020-03-03T20:26:40Z","author_association":"NONE","body":"Not sure what the problem is but no replications work... maybe the nginx proxy?\r\n\r\nEven local to local replication fails. It's using the https address in source and target but should maybe use localhost?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594151499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594161304","html_url":"https://github.com/apache/couchdb/pull/2585#issuecomment-594161304","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2585","id":594161304,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDE2MTMwNA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T20:49:40Z","updated_at":"2020-03-03T20:49:40Z","author_association":"MEMBER","body":"@tonysun83 Yeah, both of these are definitely touching on related bits triggering view work from the update loop. Whichever lands second will fixup things so there's a unified interface there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594161304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594169855","html_url":"https://github.com/apache/couchdb/issues/2630#issuecomment-594169855","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2630","id":594169855,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDE2OTg1NQ==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-03T21:09:20Z","updated_at":"2020-03-03T21:09:33Z","author_association":"NONE","body":"I will close this since it's not a real bug but more a documentation issue...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594169855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594309383","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594309383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594309383,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMwOTM4Mw==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T03:40:29Z","updated_at":"2020-03-04T03:40:29Z","author_association":"NONE","body":"Replications with same proxy config works correctly with couch 2.3.1 on both side?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594309383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594312736","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594312736","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594312736,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMxMjczNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T03:55:08Z","updated_at":"2020-03-04T03:55:08Z","author_association":"MEMBER","body":"@pavellzubkov How long did the problem persist?\r\n\r\n`ebusy` means the file was busy and in use. The error message suggests the compactor was finishing up compacting your view by swapping files around. It should have been a transient error.\r\n\r\n/cc @nickva ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594312736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594314786","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594314786","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594314786,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMxNDc4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T04:04:07Z","updated_at":"2020-03-04T04:04:07Z","author_association":"MEMBER","body":"Also, was this Docker container being hosted on Windows?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594314786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594317143","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594317143","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594317143,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMxNzE0Mw==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T04:14:41Z","updated_at":"2020-03-04T04:14:41Z","author_association":"NONE","body":"@wohali  i've observe this problem about half hour. in active tasks tab in fauxton i've seen freezing compacton task on one of shards. \r\nrecords from log file\r\n[lodjunk.txt](https://github.com/apache/couchdb/files/4284997/lodjunk.txt)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594317143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594320773","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594320773","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594320773,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDMyMDc3Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T04:30:28Z","updated_at":"2020-03-04T04:30:28Z","author_association":"MEMBER","body":"The error is coming from https://github.com/apache/couchdb/blob/master/src/couch_mrview/src/couch_mrview_compactor.erl#L232 which is where the compactor attempts to delete the index file after swapping.\r\n\r\nOne possible explanation is that you're running Docker on Windows, are mapping your data directory to a Windows file system, and something is still holding the file open. (File locking mechanisms on Windows differ from those on Unix.)\r\n\r\nIf this is Docker running on a Linux host, I'm not sure.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594320773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594355887","html_url":"https://github.com/apache/couchdb/pull/2628#issuecomment-594355887","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2628","id":594355887,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDM1NTg4Nw==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T06:49:03Z","updated_at":"2020-03-04T06:49:03Z","author_association":"CONTRIBUTOR","body":"Thanks @dottorblaster, the removal of the design_docs_query is also in this PR and the tests are moved into design_docs_query.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594355887/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594414798","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594414798","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594414798,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDQxNDc5OA==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T09:30:25Z","updated_at":"2020-03-04T09:30:25Z","author_association":"NONE","body":"Yes. Docker on windows host. thanks for answer.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594414798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594559544","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594559544","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594559544,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDU1OTU0NA==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T14:33:47Z","updated_at":"2020-03-04T14:33:47Z","author_association":"NONE","body":"CouchDB 2.3.1 already had issues with reverse proxies but I thought 3.0 had fixed them. What is the best practice for replicating through a reverse proxy? The UI doesn't work at all...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594559544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594600297","html_url":"https://github.com/apache/couchdb/issues/2612#issuecomment-594600297","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2612","id":594600297,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDYwMDI5Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T15:27:32Z","updated_at":"2020-03-04T15:27:32Z","author_association":"CONTRIBUTOR","body":"> However, is there any way I can remove the effect of _changes from the avg response times stats\r\n\r\nI was just doing in when monitoring the external (3rd party proxy) logs not anything in the core CouchDB code. So when building latency histograms I would say something like \"exclude _changes API calls\" as an extra step.\r\n\r\nI think the original question was answered. Should we close the, issue, what do to you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594600297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594608736","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594608736","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594608736,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDYwODczNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T15:38:20Z","updated_at":"2020-03-04T15:38:20Z","author_association":"CONTRIBUTOR","body":"There was a similar issue reported and I think it's related:\r\n\r\nhttps://github.com/apache/couchdb/issues/2594\r\n\r\nWe had figured out there that Fauxton grabs the URL from the browser's location and uses parts of for the \"local\" replications. I can see how proxies or container environments would interfere with that. As the URL the browser connect to the server might not be accessible for the server to connect to itself especially with `localhost` being used.\r\n\r\nTry to reproduce the issue outside Fauxton and just using the API directly.\r\n\r\nSomethings to keep in mind with a proxy:\r\n\r\n  * Make sure that it doesn't buffer requests, as say _changes feeds APIs need to stream data\r\n\r\n  * They may alter the `Set-Cookie` headers and prevent servers behind the reverse proxies to authenticate requests properly. To avoid the issue can switch to basic auth only by setting\r\n   ```\r\n  [replicator]\r\n  auth_plugins = couch_replicator_auth_noop\r\n   ```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594608736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594651010","html_url":"https://github.com/apache/couchdb/pull/2585#issuecomment-594651010","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2585","id":594651010,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY1MTAxMA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T16:41:12Z","updated_at":"2020-03-04T16:41:12Z","author_association":"CONTRIBUTOR","body":"> Just started going over this PR. I noticed we're going through the EPI route for each doc update. Looks like Ken may be utilizing the EPI route as well.. Will it make more sense to plug in the hook into Ken later on as part of Ken's consolidated auto indexing scheme?\r\n\r\nFrom EPI point of view it has a mode where it calls plugins one by one. So it is possible to have multiple plugins on the same extension hook.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594651010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594671012","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594671012","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594671012,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY3MTAxMg==","user":{"login":"AndyA","id":26065,"node_id":"MDQ6VXNlcjI2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/26065?v=4","gravatar_id":"","url":"https://api.github.com/users/AndyA","html_url":"https://github.com/AndyA","followers_url":"https://api.github.com/users/AndyA/followers","following_url":"https://api.github.com/users/AndyA/following{/other_user}","gists_url":"https://api.github.com/users/AndyA/gists{/gist_id}","starred_url":"https://api.github.com/users/AndyA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndyA/subscriptions","organizations_url":"https://api.github.com/users/AndyA/orgs","repos_url":"https://api.github.com/users/AndyA/repos","events_url":"https://api.github.com/users/AndyA/events{/privacy}","received_events_url":"https://api.github.com/users/AndyA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:12:16Z","updated_at":"2020-03-04T17:12:16Z","author_association":"NONE","body":"This is a breaking change for many users. I understand the implications of Admin Party so this change just breaks a bunch of working setups.\r\n\r\nWasn't the fact that it broke your own tests a bit of a clue? Why isn't there an easy way to disable the check?\r\n\r\nWould you accept a PR to make it possible to disable this check? I've tried setting `COUCHDB_TEST_ADMIN_PARTY_OVERRIDE=1` but that didn't seem to work for me. Will investigate further but using options intended for testing doesn't seem like a good idea long term.\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594671012/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594676419","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594676419","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594676419,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY3NjQxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:19:24Z","updated_at":"2020-03-04T17:19:24Z","author_association":"MEMBER","body":"@AndyA That's why this became 3.0, not 2.4. We introduced many breaking changes in 3.0, all of which are documented at http://docs.couchdb.org/en/stable/whatsnew/3.0.html#deprecated-feature-removal .\r\n\r\nThe lack of solid out-of-the-box security in CouchDB has been a concern for a very long time, expressed by many, and amplified by some high profile leaks of CouchDB-hosted data on the web. CouchDB 0.x was written in the spirit of an open web, open data, but as people started to rely on CouchDB for more secure needs, pressure increased on the project to move in this direction.\r\n\r\nWe wouldn't accept the proposed patch, sorry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594676419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594677754","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594677754","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594677754,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY3Nzc1NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:21:03Z","updated_at":"2020-03-04T17:21:03Z","author_association":"MEMBER","body":"Reopening because this may be a problem for Windows CouchDB servers. Thanks for the report.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594677754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594679206","html_url":"https://github.com/apache/couchdb/issues/2632#issuecomment-594679206","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2632","id":594679206,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY3OTIwNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:22:53Z","updated_at":"2020-03-04T17:22:53Z","author_association":"MEMBER","body":"Sorry, my mistake. Looking at this code, it's not changed in years - we probably have never been able to support Windows-hosted Docker containers where the data directory is mapped to a local file system under Windows.\r\n\r\nThis probably should be added to the Docker documentation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594679206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594689722","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594689722","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594689722,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY4OTcyMg==","user":{"login":"AndyA","id":26065,"node_id":"MDQ6VXNlcjI2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/26065?v=4","gravatar_id":"","url":"https://api.github.com/users/AndyA","html_url":"https://github.com/AndyA","followers_url":"https://api.github.com/users/AndyA/followers","following_url":"https://api.github.com/users/AndyA/following{/other_user}","gists_url":"https://api.github.com/users/AndyA/gists{/gist_id}","starred_url":"https://api.github.com/users/AndyA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndyA/subscriptions","organizations_url":"https://api.github.com/users/AndyA/orgs","repos_url":"https://api.github.com/users/AndyA/repos","events_url":"https://api.github.com/users/AndyA/events{/privacy}","received_events_url":"https://api.github.com/users/AndyA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:36:43Z","updated_at":"2020-03-04T17:36:43Z","author_association":"NONE","body":"Thanks @wohali. I understand the desire for this to be the default but don't see the downside to being able to disable it (with suitably dire warnings in the documentation).\r\n\r\nAs far as I can see the other breaking changes are mainly a concern for server admins. This potentially has far wider effects. We have many scripts that assume password free admin access all of which have to be fixed before we can move to 3.0.\r\n\r\n`we_understand_the_risks_and_we_still_want_to_party = \"I PROMISE NOT TO SUE\"`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594689722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594692428","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594692428","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594692428,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY5MjQyOA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:40:22Z","updated_at":"2020-03-04T17:40:22Z","author_association":"MEMBER","body":"You're welcome to stay on 2.x or maintain a custom patch. The project is not going to change course here. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594692428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594704468","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594704468","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594704468,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDcwNDQ2OA==","user":{"login":"AndyA","id":26065,"node_id":"MDQ6VXNlcjI2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/26065?v=4","gravatar_id":"","url":"https://api.github.com/users/AndyA","html_url":"https://github.com/AndyA","followers_url":"https://api.github.com/users/AndyA/followers","following_url":"https://api.github.com/users/AndyA/following{/other_user}","gists_url":"https://api.github.com/users/AndyA/gists{/gist_id}","starred_url":"https://api.github.com/users/AndyA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndyA/subscriptions","organizations_url":"https://api.github.com/users/AndyA/orgs","repos_url":"https://api.github.com/users/AndyA/repos","events_url":"https://api.github.com/users/AndyA/events{/privacy}","received_events_url":"https://api.github.com/users/AndyA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T17:53:52Z","updated_at":"2020-03-04T17:53:52Z","author_association":"NONE","body":"It seems that anyone who's installing from https://apache.bintray.com/couchdb-deb will have automatically received the breaking change.\r\n\r\nIs there a repo address that's pinned to 2.x?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594704468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594712040","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594712040","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594712040,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDcxMjA0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T18:03:15Z","updated_at":"2020-03-04T18:03:15Z","author_association":"MEMBER","body":"@AndyA Standard deploy practice should be:\r\n\r\n`apt install couchdb=2.3.1`\r\n\r\nIf you're not pinning your production environment to specific versions, you're going to get unexpected surprises :wink: ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594712040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594715585","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594715585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594715585,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDcxNTU4NQ==","user":{"login":"AndyA","id":26065,"node_id":"MDQ6VXNlcjI2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/26065?v=4","gravatar_id":"","url":"https://api.github.com/users/AndyA","html_url":"https://github.com/AndyA","followers_url":"https://api.github.com/users/AndyA/followers","following_url":"https://api.github.com/users/AndyA/following{/other_user}","gists_url":"https://api.github.com/users/AndyA/gists{/gist_id}","starred_url":"https://api.github.com/users/AndyA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndyA/subscriptions","organizations_url":"https://api.github.com/users/AndyA/orgs","repos_url":"https://api.github.com/users/AndyA/repos","events_url":"https://api.github.com/users/AndyA/events{/privacy}","received_events_url":"https://api.github.com/users/AndyA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T18:08:05Z","updated_at":"2020-03-04T18:08:05Z","author_association":"NONE","body":"Thanks.\r\n\r\nThis isn't production and I'm aware of how to pin a particular version :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594715585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594717140","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594717140","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594717140,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDcxNzE0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T18:09:59Z","updated_at":"2020-03-04T18:09:59Z","author_association":"MEMBER","body":"@AndyA Sorry about that. We're appreciative of your support of CouchDB over the years :)\r\n\r\nWe're not planning to separate out into different release streams for 3.x, but we probably will for CouchDB 4, since it's a complete replacement of the storage and clustering code.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594717140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594717822","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-594717822","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":594717822,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDcxNzgyMg==","user":{"login":"AndyA","id":26065,"node_id":"MDQ6VXNlcjI2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/26065?v=4","gravatar_id":"","url":"https://api.github.com/users/AndyA","html_url":"https://github.com/AndyA","followers_url":"https://api.github.com/users/AndyA/followers","following_url":"https://api.github.com/users/AndyA/following{/other_user}","gists_url":"https://api.github.com/users/AndyA/gists{/gist_id}","starred_url":"https://api.github.com/users/AndyA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndyA/subscriptions","organizations_url":"https://api.github.com/users/AndyA/orgs","repos_url":"https://api.github.com/users/AndyA/repos","events_url":"https://api.github.com/users/AndyA/events{/privacy}","received_events_url":"https://api.github.com/users/AndyA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T18:10:54Z","updated_at":"2020-03-04T18:10:54Z","author_association":"NONE","body":"Thanks @wohali :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594717822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594814112","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594814112","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594814112,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDgxNDExMg==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T20:21:55Z","updated_at":"2020-03-04T20:21:55Z","author_association":"NONE","body":"@nickva How can I do a basic auth? With https://admin:password@mycouch.com/mydb ?\r\n\r\nThat exposes the password...\r\n\r\nAlso, do you know if nginx alter the setcookie header by default? that would surprise me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594814112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594937197","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-594937197","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":594937197,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDkzNzE5Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-04T23:38:33Z","updated_at":"2020-03-04T23:38:33Z","author_association":"CONTRIBUTOR","body":"> Also, do you know if nginx alter the setcookie header by default? that would surprise me.\r\n\r\nI don't know much about nginx. Don't think it does it by default? But can certainly do it with various directives or settings.\r\n\r\n > How can I do a basic auth? With https://admin:password@mycouch.com/mydb ? That exposes the password...\r\n\r\nThe password would have to be sent to the `_session/` endpoint so it will be exposed just as well? Otherwise the connection to `mycouch.com` seems to be using TLS (https) and so the credentials would go over the encrypted TLS stream.\r\n\r\nWould you be able to share some logs (take care to remove credentials) and or more detailed proxy config files to reproduce the issue.\r\n\r\nAlso have you tried to reproduce it without Fauxton in the loop?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594937197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594986761","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-594986761","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":594986761,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDk4Njc2MQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T01:57:23Z","updated_at":"2020-03-05T01:57:23Z","author_association":"CONTRIBUTOR","body":"any other contributor is welcome to start with this. If not, I can do this. Just one information, we didn't keep all historical purge_infos and there is limit for purged-info https://docs.couchdb.org/en/stable/api/database/misc.html#db-purged-infos-limit. If the stored purged info exceeds limit and all related parties (such as internal replication, mrview, search index, etc) purged their own stuff, the purged info itself will be deleted permanently.  So the returned purge_info might not be complete.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/594986761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595268224","html_url":"https://github.com/apache/couchdb/pull/2636#issuecomment-595268224","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2636","id":595268224,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTI2ODIyNA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T14:50:51Z","updated_at":"2020-03-05T14:50:51Z","author_association":"MEMBER","body":"> +1. Not sure what's up with Jenkins, but `make check-fdb` passes locally.\r\n\r\nI don't think Jenkins is configured yet to run FDB","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595268224/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595299309","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-595299309","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":595299309,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTI5OTMwOQ==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T15:47:58Z","updated_at":"2020-03-05T15:47:58Z","author_association":"NONE","body":"So I have tried with basic auth for the remote server which is behind the reverse proxy and it works...\r\n\r\nWhen I say it exposes the password, I meant it exposes the clear password in the CouchDB replication document, not in the request!\r\n\r\nI have tried multiple configuration (source and/or target being behind nginx) but here is a simple example to reproduce the issue. Use your own computer with CouchDB installed (not behind a reverse proxy) as the source. On a remote server, install CouchDB and nginx. I use the following config to redirect the requests to the right port (I didn't test without ssl but I don't think it's different):\r\n\r\n```conf\r\nserver {\r\n    listen 443 ssl http2;\r\n    server_name db.address.com;\r\n\r\n    ssl_certificate /etc/letsencrypt/live/db.address.com/fullchain.pem;\r\n    ssl_certificate_key /etc/letsencrypt/live/db.address.com/privkey.pem;\r\n    ssl_trusted_certificate /etc/letsencrypt/live/db.address.com/chain.pem;\r\n    ssl_dhparam /etc/ssl/certs/dhparam.pem;\r\n\r\n    location / {\r\n        proxy_pass  http://127.0.0.1:5984;\r\n    }\r\n\r\n    error_page 404 /404.html;\r\n        location = /40x.html {\r\n    }\r\n\r\n    error_page 500 502 503 504 /50x.html;\r\n        location = /50x.html {\r\n    }\r\n}\r\n```\r\n\r\nTry to replicate from you local computer to the remote server with session","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595299309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595396794","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-595396794","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":595396794,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTM5Njc5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T19:11:15Z","updated_at":"2020-03-05T19:11:15Z","author_association":"MEMBER","body":"@natcohen Your proxy config is incomplete.\r\n\r\nSee our documentation here: https://docs.couchdb.org/en/stable/best-practices/reverse-proxies.html#reverse-proxying-with-nginx","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595396794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595419013","html_url":"https://github.com/apache/couchdb/issues/2626#issuecomment-595419013","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2626","id":595419013,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTQxOTAxMw==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T19:59:19Z","updated_at":"2020-03-05T19:59:19Z","author_association":"NONE","body":"@wohali Shame on me, I completely missed this part of the doc! Everything works except for the Fauxton issue mentioned by @nickva that grabs the url from the browser for localhost but it's already tracked in another thread!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595419013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595427326","html_url":"https://github.com/apache/couchdb/pull/2638#issuecomment-595427326","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2638","id":595427326,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTQyNzMyNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T20:18:54Z","updated_at":"2020-03-05T20:18:54Z","author_association":"MEMBER","body":"A note on the last line in @nickva's comment about view sizes. That last line that's a 0 is because the value sizes in the script exceed the thresholds added recently so no docs are included in the view which gives a size of 0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595427326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595490109","html_url":"https://github.com/apache/couchdb/issues/2639#issuecomment-595490109","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2639","id":595490109,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTQ5MDEwOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-05T23:03:49Z","updated_at":"2020-03-05T23:03:49Z","author_association":"MEMBER","body":"@razum2um There are packages published for amd64, ppc64el and arm64 for CouchDB 2.3.1 and 3.0.0, see: \r\n\r\nhttps://apache.bintray.com/couchdb-deb/pool/C/CouchDB/\r\n\r\nThese are published at present for debian only, not Ubuntu.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595490109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595596006","html_url":"https://github.com/apache/couchdb/issues/2639#issuecomment-595596006","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2639","id":595596006,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTU5NjAwNg==","user":{"login":"razum2um","id":122018,"node_id":"MDQ6VXNlcjEyMjAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/122018?v=4","gravatar_id":"","url":"https://api.github.com/users/razum2um","html_url":"https://github.com/razum2um","followers_url":"https://api.github.com/users/razum2um/followers","following_url":"https://api.github.com/users/razum2um/following{/other_user}","gists_url":"https://api.github.com/users/razum2um/gists{/gist_id}","starred_url":"https://api.github.com/users/razum2um/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/razum2um/subscriptions","organizations_url":"https://api.github.com/users/razum2um/orgs","repos_url":"https://api.github.com/users/razum2um/repos","events_url":"https://api.github.com/users/razum2um/events{/privacy}","received_events_url":"https://api.github.com/users/razum2um/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-06T04:36:14Z","updated_at":"2020-03-06T04:36:14Z","author_association":"NONE","body":"@wohali yep, sorry I meant ubuntu tree, namely bionic","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/595596006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]