[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757261958","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757261958","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757261958,"node_id":"IC_kwDOBhmkcs5ovbCG","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T09:32:49Z","updated_at":"2023-10-11T09:33:34Z","author_association":"MEMBER","body":"![image](https://github.com/apache/brpc/assets/1237906/9ef9f5ed-54b1-4b28-a868-b6af0a4ea875)\r\n\r\n在 wireshark 中勾选后可以使用相关字段进行过滤\r\n<img width=\"738\" alt=\"image\" src=\"https://github.com/apache/brpc/assets/1237906/815eb3c2-da6a-4741-b31c-5fb52e577dcd\">\r\n\r\n如： `pbf.brpc.StreamFrameMeta.stream_id == 2` 过滤指定流。\r\n![image](https://github.com/apache/brpc/assets/1237906/e0ccb20b-a62f-488e-ba5e-160099329c88)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757261958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757276330","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757276330","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757276330,"node_id":"IC_kwDOBhmkcs5oveiq","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T09:41:36Z","updated_at":"2023-10-11T09:41:36Z","author_association":"CONTRIBUTOR","body":"印象中，好像需要将pb文件放到指定位置？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757276330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757351948","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757351948","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757351948,"node_id":"IC_kwDOBhmkcs5ovxAM","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T10:28:52Z","updated_at":"2023-10-11T10:28:52Z","author_association":"MEMBER","body":"对，没有统一位置，得用户设置，然后把文件拷过去","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757351948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757545436","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757545436","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757545436,"node_id":"IC_kwDOBhmkcs5owgPc","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T12:04:23Z","updated_at":"2023-10-11T12:04:23Z","author_association":"CONTRIBUTOR","body":"body部分pb的解析，难点在于message不确定和message类型多样，这个能解决吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757545436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757879133","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757879133","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757879133,"node_id":"IC_kwDOBhmkcs5oxxtd","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T14:56:15Z","updated_at":"2023-10-11T14:56:15Z","author_association":"MEMBER","body":"rpc 部分根据 service name 和 method 应该可以确认 message 类型，streaming 部分不太好处理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757879133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757908451","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1757908451","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1757908451,"node_id":"IC_kwDOBhmkcs5ox43j","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T15:07:41Z","updated_at":"2023-10-11T15:07:41Z","author_association":"CONTRIBUTOR","body":"那可以先将rpc部分实现了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1757908451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759051407","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1759051407","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1759051407,"node_id":"IC_kwDOBhmkcs5o2P6P","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:06:50Z","updated_at":"2023-10-12T07:06:50Z","author_association":"CONTRIBUTOR","body":"> > 看原问题的日志，HealthCheck是在rpc失败后才启动的，不像有重试退避。\r\n> \r\n> 是的，我也觉得奇怪的点是重试期间没有发现对端起来。我是重定义的`GetBackoffTimeMs `,时间是一秒，`CanRetryBackoffInPthread`返回的也是`true`.\r\n\r\n是不是超时设置太短了？如果Retry backoff时间大于超时时间，则Retry backoff不生效","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759051407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759059114","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-1759059114","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":1759059114,"node_id":"IC_kwDOBhmkcs5o2Ryq","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:12:36Z","updated_at":"2023-10-12T07:12:36Z","author_association":"CONTRIBUTOR","body":"Could you describe what functionality this PR has implemented and the general implementation approach?(可以描述一下这个PR实现了什么功能，以及大致的实现思路吗？)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759059114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759088735","html_url":"https://github.com/apache/brpc/issues/2400#issuecomment-1759088735","issue_url":"https://api.github.com/repos/apache/brpc/issues/2400","id":1759088735,"node_id":"IC_kwDOBhmkcs5o2ZBf","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:35:04Z","updated_at":"2023-10-12T07:35:04Z","author_association":"CONTRIBUTOR","body":"circuit_breaker.isolation_duration_ms() 只是控制SetFailed()之后第一次健康检查的时间，后续的检查间隔还是由health_check_interval来控制","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759088735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759097365","html_url":"https://github.com/apache/brpc/issues/2400#issuecomment-1759097365","issue_url":"https://api.github.com/repos/apache/brpc/issues/2400","id":1759097365,"node_id":"IC_kwDOBhmkcs5o2bIV","user":{"login":"dandyhuang","id":12603054,"node_id":"MDQ6VXNlcjEyNjAzMDU0","avatar_url":"https://avatars.githubusercontent.com/u/12603054?v=4","gravatar_id":"","url":"https://api.github.com/users/dandyhuang","html_url":"https://github.com/dandyhuang","followers_url":"https://api.github.com/users/dandyhuang/followers","following_url":"https://api.github.com/users/dandyhuang/following{/other_user}","gists_url":"https://api.github.com/users/dandyhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/dandyhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dandyhuang/subscriptions","organizations_url":"https://api.github.com/users/dandyhuang/orgs","repos_url":"https://api.github.com/users/dandyhuang/repos","events_url":"https://api.github.com/users/dandyhuang/events{/privacy}","received_events_url":"https://api.github.com/users/dandyhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:40:46Z","updated_at":"2023-10-12T07:40:46Z","author_association":"NONE","body":"> circuit_breaker.isolation_duration_ms() 只是控制SetFailed()之后第一次健康检查的时间，后续的检查间隔还是由health_check_interval来控制\r\n\r\n为什么这么设计呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759097365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759102431","html_url":"https://github.com/apache/brpc/issues/2400#issuecomment-1759102431","issue_url":"https://api.github.com/repos/apache/brpc/issues/2400","id":1759102431,"node_id":"IC_kwDOBhmkcs5o2cXf","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:44:57Z","updated_at":"2023-10-12T07:44:57Z","author_association":"CONTRIBUTOR","body":"我理解这是为一种退避策略吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759102431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759105475","html_url":"https://github.com/apache/brpc/issues/2400#issuecomment-1759105475","issue_url":"https://api.github.com/repos/apache/brpc/issues/2400","id":1759105475,"node_id":"IC_kwDOBhmkcs5o2dHD","user":{"login":"dandyhuang","id":12603054,"node_id":"MDQ6VXNlcjEyNjAzMDU0","avatar_url":"https://avatars.githubusercontent.com/u/12603054?v=4","gravatar_id":"","url":"https://api.github.com/users/dandyhuang","html_url":"https://github.com/dandyhuang","followers_url":"https://api.github.com/users/dandyhuang/followers","following_url":"https://api.github.com/users/dandyhuang/following{/other_user}","gists_url":"https://api.github.com/users/dandyhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/dandyhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dandyhuang/subscriptions","organizations_url":"https://api.github.com/users/dandyhuang/orgs","repos_url":"https://api.github.com/users/dandyhuang/repos","events_url":"https://api.github.com/users/dandyhuang/events{/privacy}","received_events_url":"https://api.github.com/users/dandyhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:47:17Z","updated_at":"2023-10-12T07:47:17Z","author_association":"NONE","body":"> 我理解这是为一种退避策略吧\r\n\r\n我感觉是之前的隔离是不是漏改了这个。应该判断是隔离的错误码，就使用隔离的时间来处理吧。 退避策略这个在UpdateIsolationDuration已经有实现了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759105475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759117355","html_url":"https://github.com/apache/brpc/issues/2401#issuecomment-1759117355","issue_url":"https://api.github.com/repos/apache/brpc/issues/2401","id":1759117355,"node_id":"IC_kwDOBhmkcs5o2gAr","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:56:02Z","updated_at":"2023-10-12T07:56:02Z","author_association":"CONTRIBUTOR","body":"问题已收到。请勿在公开页面讨论安全漏洞。反馈渠道：https://www.apache.org/security/","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759117355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759123228","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1759123228","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1759123228,"node_id":"IC_kwDOBhmkcs5o2hcc","user":{"login":"huocun-ant","id":131865681,"node_id":"U_kgDOB9wcUQ","avatar_url":"https://avatars.githubusercontent.com/u/131865681?v=4","gravatar_id":"","url":"https://api.github.com/users/huocun-ant","html_url":"https://github.com/huocun-ant","followers_url":"https://api.github.com/users/huocun-ant/followers","following_url":"https://api.github.com/users/huocun-ant/following{/other_user}","gists_url":"https://api.github.com/users/huocun-ant/gists{/gist_id}","starred_url":"https://api.github.com/users/huocun-ant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huocun-ant/subscriptions","organizations_url":"https://api.github.com/users/huocun-ant/orgs","repos_url":"https://api.github.com/users/huocun-ant/repos","events_url":"https://api.github.com/users/huocun-ant/events{/privacy}","received_events_url":"https://api.github.com/users/huocun-ant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T07:59:23Z","updated_at":"2023-10-12T07:59:43Z","author_association":"NONE","body":"> > > 看原问题的日志，HealthCheck是在rpc失败后才启动的，不像有重试退避。\r\n> > \r\n> > \r\n> > 是的，我也觉得奇怪的点是重试期间没有发现对端起来。我是重定义的`GetBackoffTimeMs `,时间是一秒，`CanRetryBackoffInPthread`返回的也是`true`.\r\n> \r\n> 是不是超时设置太短了？如果Retry backoff时间大于超时时间，则Retry backoff不生效\r\n\r\n![image](https://github.com/apache/brpc/assets/131865681/3bde38f2-2865-47ae-bc65-3b91c933febb)\r\n不会，你可以看看这个图，超时之前重试了很多次了，我设置的超时时间是backoff的40倍","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759123228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759142152","html_url":"https://github.com/apache/brpc/issues/2400#issuecomment-1759142152","issue_url":"https://api.github.com/repos/apache/brpc/issues/2400","id":1759142152,"node_id":"IC_kwDOBhmkcs5o2mEI","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T08:11:42Z","updated_at":"2023-10-12T08:11:55Z","author_association":"CONTRIBUTOR","body":"嗯嗯，我说的退避策略也是指IsolationDuration","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759142152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759249291","html_url":"https://github.com/apache/brpc/issues/2401#issuecomment-1759249291","issue_url":"https://api.github.com/repos/apache/brpc/issues/2401","id":1759249291,"node_id":"IC_kwDOBhmkcs5o3AOL","user":{"login":"l1ubai","id":104127337,"node_id":"U_kgDOBjTbaQ","avatar_url":"https://avatars.githubusercontent.com/u/104127337?v=4","gravatar_id":"","url":"https://api.github.com/users/l1ubai","html_url":"https://github.com/l1ubai","followers_url":"https://api.github.com/users/l1ubai/followers","following_url":"https://api.github.com/users/l1ubai/following{/other_user}","gists_url":"https://api.github.com/users/l1ubai/gists{/gist_id}","starred_url":"https://api.github.com/users/l1ubai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l1ubai/subscriptions","organizations_url":"https://api.github.com/users/l1ubai/orgs","repos_url":"https://api.github.com/users/l1ubai/repos","events_url":"https://api.github.com/users/l1ubai/events{/privacy}","received_events_url":"https://api.github.com/users/l1ubai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T09:22:56Z","updated_at":"2023-10-12T09:25:43Z","author_association":"NONE","body":"> 问题已收到。请勿在公开页面讨论安全漏洞。反馈渠道：https://www.apache.org/security/\r\n\r\nSorry, I just submitted to security@apache.org","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759249291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759299833","html_url":"https://github.com/apache/brpc/pull/2411#issuecomment-1759299833","issue_url":"https://api.github.com/repos/apache/brpc/issues/2411","id":1759299833,"node_id":"IC_kwDOBhmkcs5o3Mj5","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T09:55:50Z","updated_at":"2023-10-12T09:55:50Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759299833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759378868","html_url":"https://github.com/apache/brpc/issues/2410#issuecomment-1759378868","issue_url":"https://api.github.com/repos/apache/brpc/issues/2410","id":1759378868,"node_id":"IC_kwDOBhmkcs5o3f20","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T10:51:16Z","updated_at":"2023-10-12T10:51:16Z","author_association":"MEMBER","body":"参考项目下 spec 文件，过滤掉 glibc private 依赖","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759378868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759443849","html_url":"https://github.com/apache/brpc/pull/2411#issuecomment-1759443849","issue_url":"https://api.github.com/repos/apache/brpc/issues/2411","id":1759443849,"node_id":"IC_kwDOBhmkcs5o3vuJ","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T11:40:03Z","updated_at":"2023-10-12T11:40:03Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759443849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759996634","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1759996634","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1759996634,"node_id":"IC_kwDOBhmkcs5o52ra","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-12T16:52:52Z","updated_at":"2023-10-12T16:52:52Z","author_association":"MEMBER","body":"![image](https://github.com/apache/brpc/assets/1237906/a5f16f67-1eea-4c66-9e17-c9d6d490a17d)\r\n![image](https://github.com/apache/brpc/assets/1237906/cbb2238e-b464-46c5-a761-6361c659f9d3)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1759996634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760620153","html_url":"https://github.com/apache/brpc/issues/2410#issuecomment-1760620153","issue_url":"https://api.github.com/repos/apache/brpc/issues/2410","id":1760620153,"node_id":"IC_kwDOBhmkcs5o8O55","user":{"login":"Gangbiao","id":11597184,"node_id":"MDQ6VXNlcjExNTk3MTg0","avatar_url":"https://avatars.githubusercontent.com/u/11597184?v=4","gravatar_id":"","url":"https://api.github.com/users/Gangbiao","html_url":"https://github.com/Gangbiao","followers_url":"https://api.github.com/users/Gangbiao/followers","following_url":"https://api.github.com/users/Gangbiao/following{/other_user}","gists_url":"https://api.github.com/users/Gangbiao/gists{/gist_id}","starred_url":"https://api.github.com/users/Gangbiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gangbiao/subscriptions","organizations_url":"https://api.github.com/users/Gangbiao/orgs","repos_url":"https://api.github.com/users/Gangbiao/repos","events_url":"https://api.github.com/users/Gangbiao/events{/privacy}","received_events_url":"https://api.github.com/users/Gangbiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T01:15:02Z","updated_at":"2023-10-13T01:15:02Z","author_association":"NONE","body":"好的，非常感谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760620153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760661485","html_url":"https://github.com/apache/brpc/pull/2406#issuecomment-1760661485","issue_url":"https://api.github.com/repos/apache/brpc/issues/2406","id":1760661485,"node_id":"IC_kwDOBhmkcs5o8Y_t","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:13:08Z","updated_at":"2023-10-13T02:13:08Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760661485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760663303","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-1760663303","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":1760663303,"node_id":"IC_kwDOBhmkcs5o8ZcH","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:16:10Z","updated_at":"2023-10-13T02:16:10Z","author_association":"CONTRIBUTOR","body":"related issue: #1444","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760663303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760669303","html_url":"https://github.com/apache/brpc/pull/2402#issuecomment-1760669303","issue_url":"https://api.github.com/repos/apache/brpc/issues/2402","id":1760669303,"node_id":"IC_kwDOBhmkcs5o8a53","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:26:26Z","updated_at":"2023-10-13T02:26:26Z","author_association":"CONTRIBUTOR","body":"It's better to keep the original `logo.png` as dark mode and `logo-light.png` as light mode","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760669303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760672663","html_url":"https://github.com/apache/brpc/pull/1457#issuecomment-1760672663","issue_url":"https://api.github.com/repos/apache/brpc/issues/1457","id":1760672663,"node_id":"IC_kwDOBhmkcs5o8buX","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:31:59Z","updated_at":"2023-10-13T02:31:59Z","author_association":"CONTRIBUTOR","body":"@serverglen 为什么关了这个PR，还存在问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760672663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760674303","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1760674303","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1760674303,"node_id":"IC_kwDOBhmkcs5o8cH_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:34:49Z","updated_at":"2023-10-13T02:34:49Z","author_association":"CONTRIBUTOR","body":"文件名改成 `wireshark_baidu_std.lua` 是不是更清晰？另外加个文档说明？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760674303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760676448","html_url":"https://github.com/apache/brpc/issues/2409#issuecomment-1760676448","issue_url":"https://api.github.com/repos/apache/brpc/issues/2409","id":1760676448,"node_id":"IC_kwDOBhmkcs5o8cpg","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:38:28Z","updated_at":"2023-10-13T02:38:28Z","author_association":"CONTRIBUTOR","body":"改成clock_gettime对性能是否有损？cpuwide_time的使用频率还挺高的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760676448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760677886","html_url":"https://github.com/apache/brpc/issues/2404#issuecomment-1760677886","issue_url":"https://api.github.com/repos/apache/brpc/issues/2404","id":1760677886,"node_id":"IC_kwDOBhmkcs5o8c_-","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:40:55Z","updated_at":"2023-10-13T02:40:55Z","author_association":"CONTRIBUTOR","body":"> 看着得把bvar直接干掉替换一个了\r\n\r\n#2407 已合入","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760677886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760679945","html_url":"https://github.com/apache/brpc/issues/2404#issuecomment-1760679945","issue_url":"https://api.github.com/repos/apache/brpc/issues/2404","id":1760679945,"node_id":"IC_kwDOBhmkcs5o8dgJ","user":{"login":"qqwangxiaow","id":26954625,"node_id":"MDQ6VXNlcjI2OTU0NjI1","avatar_url":"https://avatars.githubusercontent.com/u/26954625?v=4","gravatar_id":"","url":"https://api.github.com/users/qqwangxiaow","html_url":"https://github.com/qqwangxiaow","followers_url":"https://api.github.com/users/qqwangxiaow/followers","following_url":"https://api.github.com/users/qqwangxiaow/following{/other_user}","gists_url":"https://api.github.com/users/qqwangxiaow/gists{/gist_id}","starred_url":"https://api.github.com/users/qqwangxiaow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qqwangxiaow/subscriptions","organizations_url":"https://api.github.com/users/qqwangxiaow/orgs","repos_url":"https://api.github.com/users/qqwangxiaow/repos","events_url":"https://api.github.com/users/qqwangxiaow/events{/privacy}","received_events_url":"https://api.github.com/users/qqwangxiaow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:44:33Z","updated_at":"2023-10-13T02:44:33Z","author_association":"CONTRIBUTOR","body":"感谢!\r\n\r\n> > 看着得把bvar直接干掉替换一个了\r\n> \r\n> #2407 已合入\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760679945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760683706","html_url":"https://github.com/apache/brpc/issues/1444#issuecomment-1760683706","issue_url":"https://api.github.com/repos/apache/brpc/issues/1444","id":1760683706,"node_id":"IC_kwDOBhmkcs5o8ea6","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T02:50:52Z","updated_at":"2023-10-13T02:50:52Z","author_association":"CONTRIBUTOR","body":"对于brpc网关的场景（A(client) -> B(gateway) -> C(server)），server是一个普通的brpc服务，支持baidu协议。我们期望B发出去的数据格式是json的时候，C也能序列化成pb Message。A可以是多语言client，只要按照B的协议格式设置好路由策略、方法、数据即可。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760683706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760691213","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1760691213","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1760691213,"node_id":"IC_kwDOBhmkcs5o8gQN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T03:02:10Z","updated_at":"2023-10-13T03:02:10Z","author_association":"CONTRIBUTOR","body":"default_brpc_retry_policy.cc 你这个重试是在上层做的吧？是每次都重新初始化一个Channel吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760691213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760822756","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1760822756","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1760822756,"node_id":"IC_kwDOBhmkcs5o9AXk","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T05:01:29Z","updated_at":"2023-10-13T05:01:29Z","author_association":"MEMBER","body":"周末我补个吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1760822756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1761095330","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1761095330","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1761095330,"node_id":"IC_kwDOBhmkcs5o-C6i","user":{"login":"vinllen","id":6987398,"node_id":"MDQ6VXNlcjY5ODczOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6987398?v=4","gravatar_id":"","url":"https://api.github.com/users/vinllen","html_url":"https://github.com/vinllen","followers_url":"https://api.github.com/users/vinllen/followers","following_url":"https://api.github.com/users/vinllen/following{/other_user}","gists_url":"https://api.github.com/users/vinllen/gists{/gist_id}","starred_url":"https://api.github.com/users/vinllen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinllen/subscriptions","organizations_url":"https://api.github.com/users/vinllen/orgs","repos_url":"https://api.github.com/users/vinllen/repos","events_url":"https://api.github.com/users/vinllen/events{/privacy}","received_events_url":"https://api.github.com/users/vinllen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T08:13:11Z","updated_at":"2023-10-13T08:13:11Z","author_association":"NONE","body":"@yanglimingcn 大佬 这个MR什么时候ready，坐等~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1761095330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1761439320","html_url":"https://github.com/apache/brpc/issues/2342#issuecomment-1761439320","issue_url":"https://api.github.com/repos/apache/brpc/issues/2342","id":1761439320,"node_id":"IC_kwDOBhmkcs5o_W5Y","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T12:30:58Z","updated_at":"2023-10-13T12:30:58Z","author_association":"CONTRIBUTOR","body":"> 我们这边生产集群也有这个现象。 针对大佬说的瞬时并发，我试了一下用rpc_replay设置相同qps减少瞬时值影响，确实可以降低长尾，瞬时并发较高应该是bthread调度长尾的一个原因。但是长尾依旧比较长（bthread_creation_latency平均200us，三九线4500us），大佬还有啥别的想法吗？ 例如client的bthread调度要比server的bthread调度差之类的（因为我们这边没有下游的服务，在bthread_creation_qps相同的情况下，bthread_creation_latency一般都会明显比有下游的服务要好得多，平均几us）。\r\n\r\nclient的bthread调度和server的bthread调度是一样的。我自己起了个client访问server，client的bthread_creation_latency也是很低的。你这个可能和client端的其它业务逻辑有关","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1761439320/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1762466914","html_url":"https://github.com/apache/brpc/pull/2399#issuecomment-1762466914","issue_url":"https://api.github.com/repos/apache/brpc/issues/2399","id":1762466914,"node_id":"IC_kwDOBhmkcs5pDRxi","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T01:39:50Z","updated_at":"2023-10-14T01:39:50Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1762466914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1762508827","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-1762508827","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":1762508827,"node_id":"IC_kwDOBhmkcs5pDcAb","user":{"login":"JimChengLin","id":16563096,"node_id":"MDQ6VXNlcjE2NTYzMDk2","avatar_url":"https://avatars.githubusercontent.com/u/16563096?v=4","gravatar_id":"","url":"https://api.github.com/users/JimChengLin","html_url":"https://github.com/JimChengLin","followers_url":"https://api.github.com/users/JimChengLin/followers","following_url":"https://api.github.com/users/JimChengLin/following{/other_user}","gists_url":"https://api.github.com/users/JimChengLin/gists{/gist_id}","starred_url":"https://api.github.com/users/JimChengLin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimChengLin/subscriptions","organizations_url":"https://api.github.com/users/JimChengLin/orgs","repos_url":"https://api.github.com/users/JimChengLin/repos","events_url":"https://api.github.com/users/JimChengLin/events{/privacy}","received_events_url":"https://api.github.com/users/JimChengLin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T02:40:58Z","updated_at":"2023-10-16T07:49:40Z","author_association":"CONTRIBUTOR","body":"我理解这个 MR 主要是两方面的工作：\r\n1. 给 ParkingLot 加了一个 waiter counter，如果没有 waiter 就不要走 futex wake 了，可以省 syscall。这是一个没有副作用的优化。还有个小建议是没有 waiter 的情况就不要计入 no singal 了，这时候所有 worker 已经火力全开了，攒着也没啥用。\r\n<del>\r\n2. 用 global queue 来替换 tg 的 remote task q。这个我考虑过一段时间了。我的 concern 在于这是 trade off 而不是纯优化。bthread 当前 steal 是随机 probe 所有的 tg。坏处是 tg 的 task 少的话，steal 会扫来扫去的。好处是 task 多的话，cache line 竞争会小。当然 global queue 也可以内部自己分多条 queue，但 trade off 是一样的。\r\n\r\n就是这个steal策略有 2 个维度，一个是负载，一个是吞吐导向还是响应导向。如果负载低就应该用全局数据结构，反之要 shard。如果吞吐导向就应该 batch 唤醒和派发，反之应该激进唤醒 waiter。我不觉得有啥办法能把这 4 点就满足了。\r\n\r\n华为最近 OSDI 2023 有篇 https://www.usenix.org/conference/osdi23/presentation/wang-jiawei\r\nNSDI 2022 也有 https://www.[usenix.org/system/files/nsdi22-paper-mcclure_2.pdf](https://www.usenix.org/system/files/nsdi22-paper-mcclure_2.pdf)\r\n\r\ntldr，我觉得线上作为默认调度都差点意思。BWoS 给 tokio 的 PR 好久还没合进去。\r\n</dev>","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1762508827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763463758","html_url":"https://github.com/apache/brpc/issues/2412#issuecomment-1763463758","issue_url":"https://api.github.com/repos/apache/brpc/issues/2412","id":1763463758,"node_id":"IC_kwDOBhmkcs5pHFJO","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-15T18:07:47Z","updated_at":"2023-10-15T18:07:47Z","author_association":"MEMBER","body":"brpc里面有使用一些全局变量，其中一些是new出来以后一直没有释放的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763463758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763688266","html_url":"https://github.com/apache/brpc/issues/2414#issuecomment-1763688266","issue_url":"https://api.github.com/repos/apache/brpc/issues/2414","id":1763688266,"node_id":"IC_kwDOBhmkcs5pH79K","user":{"login":"fisven","id":68687892,"node_id":"MDQ6VXNlcjY4Njg3ODky","avatar_url":"https://avatars.githubusercontent.com/u/68687892?v=4","gravatar_id":"","url":"https://api.github.com/users/fisven","html_url":"https://github.com/fisven","followers_url":"https://api.github.com/users/fisven/followers","following_url":"https://api.github.com/users/fisven/following{/other_user}","gists_url":"https://api.github.com/users/fisven/gists{/gist_id}","starred_url":"https://api.github.com/users/fisven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fisven/subscriptions","organizations_url":"https://api.github.com/users/fisven/orgs","repos_url":"https://api.github.com/users/fisven/repos","events_url":"https://api.github.com/users/fisven/events{/privacy}","received_events_url":"https://api.github.com/users/fisven/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T03:59:38Z","updated_at":"2023-10-16T03:59:38Z","author_association":"NONE","body":"可能描述不够清楚:\r\n大概总结就是: win 存进去数据, 然后取出来之后 数据少了一部分.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763688266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763690394","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-1763690394","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":1763690394,"node_id":"IC_kwDOBhmkcs5pH8ea","user":{"login":"MrGuin","id":26199910,"node_id":"MDQ6VXNlcjI2MTk5OTEw","avatar_url":"https://avatars.githubusercontent.com/u/26199910?v=4","gravatar_id":"","url":"https://api.github.com/users/MrGuin","html_url":"https://github.com/MrGuin","followers_url":"https://api.github.com/users/MrGuin/followers","following_url":"https://api.github.com/users/MrGuin/following{/other_user}","gists_url":"https://api.github.com/users/MrGuin/gists{/gist_id}","starred_url":"https://api.github.com/users/MrGuin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrGuin/subscriptions","organizations_url":"https://api.github.com/users/MrGuin/orgs","repos_url":"https://api.github.com/users/MrGuin/repos","events_url":"https://api.github.com/users/MrGuin/events{/privacy}","received_events_url":"https://api.github.com/users/MrGuin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T04:03:06Z","updated_at":"2023-10-16T04:03:06Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 这个是我们对 brpc 做的一些改动，提给我们的 fork 的，不小心提到了这里，sorry。正好趁这个机会大家讨论一下，已补充上下文。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763690394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763885060","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1763885060","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1763885060,"node_id":"IC_kwDOBhmkcs5pIsAE","user":{"login":"huocun-ant","id":131865681,"node_id":"U_kgDOB9wcUQ","avatar_url":"https://avatars.githubusercontent.com/u/131865681?v=4","gravatar_id":"","url":"https://api.github.com/users/huocun-ant","html_url":"https://github.com/huocun-ant","followers_url":"https://api.github.com/users/huocun-ant/followers","following_url":"https://api.github.com/users/huocun-ant/following{/other_user}","gists_url":"https://api.github.com/users/huocun-ant/gists{/gist_id}","starred_url":"https://api.github.com/users/huocun-ant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huocun-ant/subscriptions","organizations_url":"https://api.github.com/users/huocun-ant/orgs","repos_url":"https://api.github.com/users/huocun-ant/repos","events_url":"https://api.github.com/users/huocun-ant/events{/privacy}","received_events_url":"https://api.github.com/users/huocun-ant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T07:27:37Z","updated_at":"2023-10-16T07:27:37Z","author_association":"NONE","body":"> default_brpc_retry_policy.cc 你这个重试是在上层做的吧？是每次都重新初始化一个Channel吗？\r\n\r\nhttps://github.com/secretflow/yacl/blob/main/yacl/link/transport/default_brpc_retry_policy.cc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1763885060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1764116478","html_url":"https://github.com/apache/brpc/pull/2408#issuecomment-1764116478","issue_url":"https://api.github.com/repos/apache/brpc/issues/2408","id":1764116478,"node_id":"IC_kwDOBhmkcs5pJkf-","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T09:50:57Z","updated_at":"2023-10-16T09:50:57Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1764116478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1765470300","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1765470300","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1765470300,"node_id":"IC_kwDOBhmkcs5pOvBc","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T00:28:00Z","updated_at":"2023-10-17T06:35:57Z","author_association":"CONTRIBUTOR","body":"> @yanglimingcn 大佬 这个MR什么时候ready，坐等~\r\n\r\n这个MR已经按照上边的讨论改完了，动态修改某个tag的worker数量也支持了，可以看这个MR里面的wiki，现在就是等社区同学review，看是否还有啥问题，@wwbmmm。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1765470300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1766244600","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1766244600","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1766244600,"node_id":"IC_kwDOBhmkcs5pRsD4","user":{"login":"vinllen","id":6987398,"node_id":"MDQ6VXNlcjY5ODczOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6987398?v=4","gravatar_id":"","url":"https://api.github.com/users/vinllen","html_url":"https://github.com/vinllen","followers_url":"https://api.github.com/users/vinllen/followers","following_url":"https://api.github.com/users/vinllen/following{/other_user}","gists_url":"https://api.github.com/users/vinllen/gists{/gist_id}","starred_url":"https://api.github.com/users/vinllen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinllen/subscriptions","organizations_url":"https://api.github.com/users/vinllen/orgs","repos_url":"https://api.github.com/users/vinllen/repos","events_url":"https://api.github.com/users/vinllen/events{/privacy}","received_events_url":"https://api.github.com/users/vinllen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T11:42:28Z","updated_at":"2023-10-17T11:42:28Z","author_association":"NONE","body":"关于这个MR我有个疑问：现在server端tag都是绑定的端口吗？客户端通过设置bthread_attr_t中的tag，发到server对应的不同线程池。对server端来说，也就是说一个bthread线程池对应的一个端口，没办法做到一个端口内根据某个tag转发到不同线程池，是吧？\r\n我们目前对控制链路（braft）和数据链路（brpc server）都是用的同一个端口，这种情况下如果要拆分线程池的话，在不修改代码前提下，只能拆端口吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1766244600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1766263407","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1766263407","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1766263407,"node_id":"IC_kwDOBhmkcs5pRwpv","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T11:54:02Z","updated_at":"2023-10-17T11:54:02Z","author_association":"CONTRIBUTOR","body":"> 关于这个MR我有个疑问：现在server端tag都是绑定的端口吗？客户端通过设置bthread_attr_t中的tag，发到server对应的不同线程池。对server端来说，也就是说一个bthread线程池对应的一个端口，没办法做到一个端口内根据某个tag转发到不同线程池，是吧？ 我们目前对控制链路（braft）和数据链路（brpc server）都是用的同一个端口，这种情况下如果要拆分线程池的话，在不修改代码前提下，只能拆端口吧？\r\n\r\n现在一个tag对应一组线程池，也对应着一个独立的端口。所以客户端是通过访问不同端口做到线程池的隔离的。控制链路（braft）和数据链路（brpc server）都是用的同一个端口这种情况，只能将控制链路和数据链路拆分到两个不同Server中，每个Server使用一个端口。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1766263407/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767083943","html_url":"https://github.com/apache/brpc/pull/2415#issuecomment-1767083943","issue_url":"https://api.github.com/repos/apache/brpc/issues/2415","id":1767083943,"node_id":"IC_kwDOBhmkcs5pU4-n","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T20:02:15Z","updated_at":"2023-10-17T20:02:15Z","author_association":"MEMBER","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767083943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767558802","html_url":"https://github.com/apache/brpc/issues/2414#issuecomment-1767558802","issue_url":"https://api.github.com/repos/apache/brpc/issues/2414","id":1767558802,"node_id":"IC_kwDOBhmkcs5pWs6S","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T03:16:52Z","updated_at":"2023-10-18T03:16:52Z","author_association":"CONTRIBUTOR","body":"add.get_value()能取到数据吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767558802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767570709","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-1767570709","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":1767570709,"node_id":"IC_kwDOBhmkcs5pWv0V","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T03:31:46Z","updated_at":"2023-10-18T03:32:00Z","author_association":"CONTRIBUTOR","body":"> 针对 worker 唤醒，做的改动就是记录在 parkinglot 上等待的 worker num，只有有 worker 等待时才 signal_task；另外就是 steal_task 时让 worker 在 wait 在 parking lot 之前 busy poll 一小段时间，不那么频繁地 wait。\r\n\r\n这个是比较通用的一个优化，代码改动也比较小，可以单独提个PR吗？\r\n\r\n> \r\n> 另外一个改动就是对于重新唤醒的 task 的处理。我们的场景 RPC bthread 会等待我们的 service 处理然后被唤醒，现有的 butex_wake 实现中虽然 brpc 的 worker 线程会立即切换到被唤醒的 bthread，但非 worker pthread 调用 butex_wake 只会把被唤醒的 bthread 给放进优先级很低的 _remote_rq。我们认为被唤醒的应该优先被处理，所以每个 TaskGroup 引入了额外的 _resume_rq 来保存由外部 pthread 唤醒的 bthread，在 wait_task 中优先检查。\r\n\r\n这个需求感觉有点定制化。有测过这个改之后的实际性能收益吗？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767570709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767587356","html_url":"https://github.com/apache/brpc/pull/2415#issuecomment-1767587356","issue_url":"https://api.github.com/repos/apache/brpc/issues/2415","id":1767587356,"node_id":"IC_kwDOBhmkcs5pWz4c","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T03:49:24Z","updated_at":"2023-10-18T03:49:24Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1767587356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770370595","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1770370595","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1770370595,"node_id":"IC_kwDOBhmkcs5phbYj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T09:00:11Z","updated_at":"2023-10-19T09:00:11Z","author_association":"CONTRIBUTOR","body":"找到原因了。\r\n要使Socket进入健康检查流程，首先要满足引用计数=2，在这里的WaitAndReset方法，会一直循环等待引用计数=2\r\nhttps://github.com/apache/brpc/blob/master/src/brpc/details/health_check.cpp#L190\r\n\r\n但是在这个issue的场景中，引用计数一直是3，导致无法进入健康检查流程。\r\n这三个引用分别来自：\r\n1. SocketMap对Socket的引用。参考：https://github.com/apache/brpc/blob/master/src/brpc/socket_map.cpp#L258\r\n2. 健康检查流程对Socket的引用。参考：https://github.com/apache/brpc/blob/master/src/brpc/details/health_check.cpp#L78\r\n3. Socket连接流程对Socket的引用。参考：https://github.com/apache/brpc/blob/master/src/brpc/socket.cpp#L1382\r\n\r\n这里不正常的是第3个引用，按理说连接失败之后这个引用就应该释放，从代码上看，在连接失败后，会回调到\r\nSocket::AfterAppConnected，在这个方法里，创建了一个SocketUniquePtr，当AfterAppConnected方法返回时这个SocketUniquePtr就会自动析构，释放引用计数\r\nhttps://github.com/apache/brpc/blob/master/src/brpc/socket.cpp#L1469\r\n\r\n但在这个问题中，实际的调用链是这个样的：\r\nSocket::AfterAppConnected\r\n-> Socket::ReleaseAllFailedWriteRequests\r\n-> Socket::ReturnFailedWriteRequest\r\n-> bthread_id_error2\r\n-> Controller::HandleSocketFailed\r\n-> Controller::OnVersionedRPCReturned\r\n-> Controller::IssueRPC (重试)\r\n-> Controller::HandleSendFailed\r\n-> Controller::OnVersionedRPCReturned\r\n…… （不断重试，直至重试耗尽）\r\n\r\n由于Controller一直在递归的重试，导致Socket::AfterAppConnected方法无法退出，从而无法释放引用计数。\r\n当重试次数耗尽后，Socket::AfterAppConnected方法退出，Socket的引用计数恢复成2，才开始进入健康检查。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770370595/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770888546","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1770888546","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1770888546,"node_id":"IC_kwDOBhmkcs5pjZ1i","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T12:34:19Z","updated_at":"2023-10-19T12:34:19Z","author_association":"CONTRIBUTOR","body":"> 由于Controller一直在递归的重试，导致Socket::AfterAppConnected方法无法退出，从而无法释放引用计数。\r\n> 当重试次数耗尽后，Socket::AfterAppConnected方法退出，Socket的引用计数恢复成2，才开始进入健康检查。\r\n\r\n这个问题还有一个更严重的后果，Socket::AfterAppConnected追溯到更上层的调用来自EventDispatcher的回调，也就是说Controller递归重试把EventDispatcher阻塞了，无法再响应其它的EventDispatcher事件\r\n在brpc的设计中，bthread_id和bthread_timer的回调函数里都不应该有阻塞性的调用。但是RetryBackoffPolicy和用户自定义RetryPolicy的引入会破坏这个原则，所以解决方案是新起一个bthread来执行包含RetryPolicy的相关逻辑，见PR #2419","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770888546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770919975","html_url":"https://github.com/apache/brpc/issues/2395#issuecomment-1770919975","issue_url":"https://api.github.com/repos/apache/brpc/issues/2395","id":1770919975,"node_id":"IC_kwDOBhmkcs5pjhgn","user":{"login":"huocun-ant","id":131865681,"node_id":"U_kgDOB9wcUQ","avatar_url":"https://avatars.githubusercontent.com/u/131865681?v=4","gravatar_id":"","url":"https://api.github.com/users/huocun-ant","html_url":"https://github.com/huocun-ant","followers_url":"https://api.github.com/users/huocun-ant/followers","following_url":"https://api.github.com/users/huocun-ant/following{/other_user}","gists_url":"https://api.github.com/users/huocun-ant/gists{/gist_id}","starred_url":"https://api.github.com/users/huocun-ant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huocun-ant/subscriptions","organizations_url":"https://api.github.com/users/huocun-ant/orgs","repos_url":"https://api.github.com/users/huocun-ant/repos","events_url":"https://api.github.com/users/huocun-ant/events{/privacy}","received_events_url":"https://api.github.com/users/huocun-ant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T12:47:17Z","updated_at":"2023-10-19T12:47:17Z","author_association":"NONE","body":"> > 由于Controller一直在递归的重试，导致Socket::AfterAppConnected方法无法退出，从而无法释放引用计数。\r\n> > 当重试次数耗尽后，Socket::AfterAppConnected方法退出，Socket的引用计数恢复成2，才开始进入健康检查。\r\n> \r\n> 这个问题还有一个更严重的后果，Socket::AfterAppConnected追溯到更上层的调用来自EventDispatcher的回调，也就是说Controller递归重试把EventDispatcher阻塞了，无法再响应其它的EventDispatcher事件 在brpc的设计中，bthread_id和bthread_timer的回调函数里都不应该有阻塞性的调用。但是RetryBackoffPolicy和用户自定义RetryPolicy的引入会破坏这个原则，所以解决方案是新起一个bthread来执行包含RetryPolicy的相关逻辑，见PR #2419\r\n\r\n所以这个修改一举两得啊，哈哈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1770919975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1772342451","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-1772342451","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":1772342451,"node_id":"IC_kwDOBhmkcs5po8yz","user":{"login":"Gabriel39","id":37700562,"node_id":"MDQ6VXNlcjM3NzAwNTYy","avatar_url":"https://avatars.githubusercontent.com/u/37700562?v=4","gravatar_id":"","url":"https://api.github.com/users/Gabriel39","html_url":"https://github.com/Gabriel39","followers_url":"https://api.github.com/users/Gabriel39/followers","following_url":"https://api.github.com/users/Gabriel39/following{/other_user}","gists_url":"https://api.github.com/users/Gabriel39/gists{/gist_id}","starred_url":"https://api.github.com/users/Gabriel39/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gabriel39/subscriptions","organizations_url":"https://api.github.com/users/Gabriel39/orgs","repos_url":"https://api.github.com/users/Gabriel39/repos","events_url":"https://api.github.com/users/Gabriel39/events{/privacy}","received_events_url":"https://api.github.com/users/Gabriel39/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T08:54:56Z","updated_at":"2023-10-20T08:54:56Z","author_association":"NONE","body":"I met this error in Apache Doris. I solved it by not stripping brpc library (brpc library is stripped by default).","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1772342451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1773871781","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1773871781","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1773871781,"node_id":"IC_kwDOBhmkcs5puyKl","user":{"login":"qycyfjy","id":93075932,"node_id":"U_kgDOBYw53A","avatar_url":"https://avatars.githubusercontent.com/u/93075932?v=4","gravatar_id":"","url":"https://api.github.com/users/qycyfjy","html_url":"https://github.com/qycyfjy","followers_url":"https://api.github.com/users/qycyfjy/followers","following_url":"https://api.github.com/users/qycyfjy/following{/other_user}","gists_url":"https://api.github.com/users/qycyfjy/gists{/gist_id}","starred_url":"https://api.github.com/users/qycyfjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qycyfjy/subscriptions","organizations_url":"https://api.github.com/users/qycyfjy/orgs","repos_url":"https://api.github.com/users/qycyfjy/repos","events_url":"https://api.github.com/users/qycyfjy/events{/privacy}","received_events_url":"https://api.github.com/users/qycyfjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-21T17:32:31Z","updated_at":"2023-10-21T17:32:31Z","author_association":"NONE","body":"没开-faligned-new还用new来动态分配__attribute__((aligned()))标记的类, 真是aligned了个寂寞\r\n\r\n![图片](https://github.com/apache/brpc/assets/93075932/d9fdbee0-8170-438f-920f-86945b842ad8)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1773871781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774058494","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1774058494","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1774058494,"node_id":"IC_kwDOBhmkcs5pvfv-","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-22T10:39:39Z","updated_at":"2023-10-22T10:41:50Z","author_association":"CONTRIBUTOR","body":"> 没开-faligned-new还用new来动态分配__attribute__((aligned()))标记的类, 真是aligned了个寂寞\r\n> \r\n\r\n\r\n是的，这里还有另外一个隐含的问题。\r\n如果 brpc 作为第三方库，编译时未加 -faligned-new， 但项目中使用了其头文件中的声明的某个类（cache line alignment），并且项目编译使用了 aligned_new， 而该类的析构函数（在 brpc 三方库中定义）调用 delete 释放对象空间时也不会调用\r\n```c++\r\nvoid operator delete  ( void* ptr, std::size_t sz,  std::align_val_t al ) noexcept;\r\n```\r\n\r\n也就是说 new （aligned_new) 和 delete 不匹配，delete 的 size 可能会小于实际 new 的 size （为类对齐要求的 padding)。\r\n这里可能会产生一些问题, 例如一些项目中覆盖了 malloc/free，new/delete 定制化了 allocator，会导致申请和释放的大小不一致。 或者在开启了 ASAN 检查时，会检查出 new/delete 类型不匹配。 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774058494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774130250","html_url":"https://github.com/apache/brpc/pull/2421#issuecomment-1774130250","issue_url":"https://api.github.com/repos/apache/brpc/issues/2421","id":1774130250,"node_id":"IC_kwDOBhmkcs5pvxRK","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-22T15:57:59Z","updated_at":"2023-10-22T15:57:59Z","author_association":"CONTRIBUTOR","body":"@ehds @wwbmmm @zyearn c++17就先不默认打开了，先默认打开aligned-new吧，辛苦review下看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774130250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774329922","html_url":"https://github.com/apache/brpc/issues/681#issuecomment-1774329922","issue_url":"https://api.github.com/repos/apache/brpc/issues/681","id":1774329922,"node_id":"IC_kwDOBhmkcs5pwiBC","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T02:22:14Z","updated_at":"2023-10-23T02:22:14Z","author_association":"CONTRIBUTOR","body":"#2256 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774329922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774393493","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1774393493","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1774393493,"node_id":"IC_kwDOBhmkcs5pwxiV","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T03:59:53Z","updated_at":"2023-10-23T03:59:53Z","author_association":"CONTRIBUTOR","body":"What's in `test/fuzzing/fuzz_*_seed_corpus.zip`? Apache projects should try not to include binary files.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774393493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774439808","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1774439808","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1774439808,"node_id":"IC_kwDOBhmkcs5pw82A","user":{"login":"0x34d","id":36335769,"node_id":"MDQ6VXNlcjM2MzM1NzY5","avatar_url":"https://avatars.githubusercontent.com/u/36335769?v=4","gravatar_id":"","url":"https://api.github.com/users/0x34d","html_url":"https://github.com/0x34d","followers_url":"https://api.github.com/users/0x34d/followers","following_url":"https://api.github.com/users/0x34d/following{/other_user}","gists_url":"https://api.github.com/users/0x34d/gists{/gist_id}","starred_url":"https://api.github.com/users/0x34d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x34d/subscriptions","organizations_url":"https://api.github.com/users/0x34d/orgs","repos_url":"https://api.github.com/users/0x34d/repos","events_url":"https://api.github.com/users/0x34d/events{/privacy}","received_events_url":"https://api.github.com/users/0x34d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T05:01:24Z","updated_at":"2023-10-23T05:02:49Z","author_association":"CONTRIBUTOR","body":"> What's in `test/fuzzing/fuzz_*_seed_corpus.zip`? Apache projects should try not to include binary files.\r\n\r\n[seed-corpus](https://google.github.io/oss-fuzz/advanced-topics/ideal-integration/#seed-corpus)  for `oss-fuzz` .\r\n\r\nI can unzip the file and then upload it if this sounds good.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774439808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774490240","html_url":"https://github.com/apache/brpc/pull/2422#issuecomment-1774490240","issue_url":"https://api.github.com/repos/apache/brpc/issues/2422","id":1774490240,"node_id":"IC_kwDOBhmkcs5pxJKA","user":{"login":"Simonhancrew","id":16878607,"node_id":"MDQ6VXNlcjE2ODc4NjA3","avatar_url":"https://avatars.githubusercontent.com/u/16878607?v=4","gravatar_id":"","url":"https://api.github.com/users/Simonhancrew","html_url":"https://github.com/Simonhancrew","followers_url":"https://api.github.com/users/Simonhancrew/followers","following_url":"https://api.github.com/users/Simonhancrew/following{/other_user}","gists_url":"https://api.github.com/users/Simonhancrew/gists{/gist_id}","starred_url":"https://api.github.com/users/Simonhancrew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Simonhancrew/subscriptions","organizations_url":"https://api.github.com/users/Simonhancrew/orgs","repos_url":"https://api.github.com/users/Simonhancrew/repos","events_url":"https://api.github.com/users/Simonhancrew/events{/privacy}","received_events_url":"https://api.github.com/users/Simonhancrew/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T06:04:06Z","updated_at":"2023-10-23T06:04:06Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 烦请老哥take a look, 谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1774490240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1775010089","html_url":"https://github.com/apache/brpc/pull/2418#issuecomment-1775010089","issue_url":"https://api.github.com/repos/apache/brpc/issues/2418","id":1775010089,"node_id":"IC_kwDOBhmkcs5pzIEp","user":{"login":"jiangyt-git","id":64257436,"node_id":"MDQ6VXNlcjY0MjU3NDM2","avatar_url":"https://avatars.githubusercontent.com/u/64257436?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangyt-git","html_url":"https://github.com/jiangyt-git","followers_url":"https://api.github.com/users/jiangyt-git/followers","following_url":"https://api.github.com/users/jiangyt-git/following{/other_user}","gists_url":"https://api.github.com/users/jiangyt-git/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangyt-git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangyt-git/subscriptions","organizations_url":"https://api.github.com/users/jiangyt-git/orgs","repos_url":"https://api.github.com/users/jiangyt-git/repos","events_url":"https://api.github.com/users/jiangyt-git/events{/privacy}","received_events_url":"https://api.github.com/users/jiangyt-git/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T11:42:03Z","updated_at":"2023-10-23T11:42:03Z","author_association":"CONTRIBUTOR","body":"@ehds @wwbmmm ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1775010089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1775323285","html_url":"https://github.com/apache/brpc/pull/2402#issuecomment-1775323285","issue_url":"https://api.github.com/repos/apache/brpc/issues/2402","id":1775323285,"node_id":"IC_kwDOBhmkcs5p0UiV","user":{"login":"Sea-n","id":10102616,"node_id":"MDQ6VXNlcjEwMTAyNjE2","avatar_url":"https://avatars.githubusercontent.com/u/10102616?v=4","gravatar_id":"","url":"https://api.github.com/users/Sea-n","html_url":"https://github.com/Sea-n","followers_url":"https://api.github.com/users/Sea-n/followers","following_url":"https://api.github.com/users/Sea-n/following{/other_user}","gists_url":"https://api.github.com/users/Sea-n/gists{/gist_id}","starred_url":"https://api.github.com/users/Sea-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sea-n/subscriptions","organizations_url":"https://api.github.com/users/Sea-n/orgs","repos_url":"https://api.github.com/users/Sea-n/repos","events_url":"https://api.github.com/users/Sea-n/events{/privacy}","received_events_url":"https://api.github.com/users/Sea-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T14:24:44Z","updated_at":"2023-10-23T14:24:44Z","author_association":"CONTRIBUTOR","body":"Oh, I get confused at that time. 😖\r\n\r\nHow about now? changed the dark mode image to `logo-white.png` and keep the black one (light mode) as `logo.png`.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1775323285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1776400204","html_url":"https://github.com/apache/brpc/issues/1191#issuecomment-1776400204","issue_url":"https://api.github.com/repos/apache/brpc/issues/1191","id":1776400204,"node_id":"IC_kwDOBhmkcs5p4bdM","user":{"login":"hejingzhilian","id":5296387,"node_id":"MDQ6VXNlcjUyOTYzODc=","avatar_url":"https://avatars.githubusercontent.com/u/5296387?v=4","gravatar_id":"","url":"https://api.github.com/users/hejingzhilian","html_url":"https://github.com/hejingzhilian","followers_url":"https://api.github.com/users/hejingzhilian/followers","following_url":"https://api.github.com/users/hejingzhilian/following{/other_user}","gists_url":"https://api.github.com/users/hejingzhilian/gists{/gist_id}","starred_url":"https://api.github.com/users/hejingzhilian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hejingzhilian/subscriptions","organizations_url":"https://api.github.com/users/hejingzhilian/orgs","repos_url":"https://api.github.com/users/hejingzhilian/repos","events_url":"https://api.github.com/users/hejingzhilian/events{/privacy}","received_events_url":"https://api.github.com/users/hejingzhilian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T02:27:25Z","updated_at":"2023-10-24T02:27:25Z","author_association":"NONE","body":"怎么支持的 我用example/http_c++ 尝试rpc_dump 发现卡在method->input_type()->field_count()>0 这行了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1776400204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1776670814","html_url":"https://github.com/apache/brpc/issues/1087#issuecomment-1776670814","issue_url":"https://api.github.com/repos/apache/brpc/issues/1087","id":1776670814,"node_id":"IC_kwDOBhmkcs5p5dhe","user":{"login":"tailai01","id":40622350,"node_id":"MDQ6VXNlcjQwNjIyMzUw","avatar_url":"https://avatars.githubusercontent.com/u/40622350?v=4","gravatar_id":"","url":"https://api.github.com/users/tailai01","html_url":"https://github.com/tailai01","followers_url":"https://api.github.com/users/tailai01/followers","following_url":"https://api.github.com/users/tailai01/following{/other_user}","gists_url":"https://api.github.com/users/tailai01/gists{/gist_id}","starred_url":"https://api.github.com/users/tailai01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tailai01/subscriptions","organizations_url":"https://api.github.com/users/tailai01/orgs","repos_url":"https://api.github.com/users/tailai01/repos","events_url":"https://api.github.com/users/tailai01/events{/privacy}","received_events_url":"https://api.github.com/users/tailai01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T07:29:23Z","updated_at":"2023-10-24T07:29:23Z","author_association":"NONE","body":"遇到了同样的问题，还没解决。有解决的大佬请给回复下，谢谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1776670814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1777140794","html_url":"https://github.com/apache/brpc/issues/2425#issuecomment-1777140794","issue_url":"https://api.github.com/repos/apache/brpc/issues/2425","id":1777140794,"node_id":"IC_kwDOBhmkcs5p7QQ6","user":{"login":"zhihuacc","id":1763321,"node_id":"MDQ6VXNlcjE3NjMzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1763321?v=4","gravatar_id":"","url":"https://api.github.com/users/zhihuacc","html_url":"https://github.com/zhihuacc","followers_url":"https://api.github.com/users/zhihuacc/followers","following_url":"https://api.github.com/users/zhihuacc/following{/other_user}","gists_url":"https://api.github.com/users/zhihuacc/gists{/gist_id}","starred_url":"https://api.github.com/users/zhihuacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhihuacc/subscriptions","organizations_url":"https://api.github.com/users/zhihuacc/orgs","repos_url":"https://api.github.com/users/zhihuacc/repos","events_url":"https://api.github.com/users/zhihuacc/events{/privacy}","received_events_url":"https://api.github.com/users/zhihuacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T12:48:04Z","updated_at":"2023-10-24T12:48:04Z","author_association":"NONE","body":"I got it. They are different callbacks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1777140794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778592915","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1778592915","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1778592915,"node_id":"IC_kwDOBhmkcs5qAyyT","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:24:46Z","updated_at":"2023-10-25T06:24:46Z","author_association":"CONTRIBUTOR","body":"It's better to unzip the file","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778592915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778595652","html_url":"https://github.com/apache/brpc/pull/2418#issuecomment-1778595652","issue_url":"https://api.github.com/repos/apache/brpc/issues/2418","id":1778595652,"node_id":"IC_kwDOBhmkcs5qAzdE","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:27:26Z","updated_at":"2023-10-25T06:27:26Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778595652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778608815","html_url":"https://github.com/apache/brpc/pull/2413#issuecomment-1778608815","issue_url":"https://api.github.com/repos/apache/brpc/issues/2413","id":1778608815,"node_id":"IC_kwDOBhmkcs5qA2qv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:38:36Z","updated_at":"2023-10-25T06:38:36Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778608815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778615136","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1778615136","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1778615136,"node_id":"IC_kwDOBhmkcs5qA4Ng","user":{"login":"0x34d","id":36335769,"node_id":"MDQ6VXNlcjM2MzM1NzY5","avatar_url":"https://avatars.githubusercontent.com/u/36335769?v=4","gravatar_id":"","url":"https://api.github.com/users/0x34d","html_url":"https://github.com/0x34d","followers_url":"https://api.github.com/users/0x34d/followers","following_url":"https://api.github.com/users/0x34d/following{/other_user}","gists_url":"https://api.github.com/users/0x34d/gists{/gist_id}","starred_url":"https://api.github.com/users/0x34d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x34d/subscriptions","organizations_url":"https://api.github.com/users/0x34d/orgs","repos_url":"https://api.github.com/users/0x34d/repos","events_url":"https://api.github.com/users/0x34d/events{/privacy}","received_events_url":"https://api.github.com/users/0x34d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:44:15Z","updated_at":"2023-10-25T06:44:15Z","author_association":"CONTRIBUTOR","body":"> It's better to unzip the file\r\n\r\nDone.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778615136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778621151","html_url":"https://github.com/apache/brpc/issues/1191#issuecomment-1778621151","issue_url":"https://api.github.com/repos/apache/brpc/issues/1191","id":1778621151,"node_id":"IC_kwDOBhmkcs5qA5rf","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:48:41Z","updated_at":"2023-10-25T06:48:41Z","author_association":"CONTRIBUTOR","body":"目前只支持 http 协议接收 rpc方式的请求 (请求body能转为protobuf message）的rpc dump。如果是example/http_c++里那种纯http的请求还不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778621151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778622300","html_url":"https://github.com/apache/brpc/issues/2423#issuecomment-1778622300","issue_url":"https://api.github.com/repos/apache/brpc/issues/2423","id":1778622300,"node_id":"IC_kwDOBhmkcs5qA59c","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:49:39Z","updated_at":"2023-10-25T06:49:39Z","author_association":"CONTRIBUTOR","body":"目前只支持 http 协议接收 rpc方式的请求 (请求body能转为protobuf message）的rpc dump。如果是example/http_c++里那种纯http的请求还不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778622300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778625091","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1778625091","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1778625091,"node_id":"IC_kwDOBhmkcs5qA6pD","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:51:48Z","updated_at":"2023-10-25T06:51:48Z","author_association":"CONTRIBUTOR","body":"可以考虑用 [streaming rpc](https://github.com/apache/brpc/blob/master/docs/cn/streaming_rpc.md) 吗？一个stream对应一个session","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778625091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778632267","html_url":"https://github.com/apache/brpc/pull/2251#issuecomment-1778632267","issue_url":"https://api.github.com/repos/apache/brpc/issues/2251","id":1778632267,"node_id":"IC_kwDOBhmkcs5qA8ZL","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T06:57:13Z","updated_at":"2023-10-25T06:57:13Z","author_association":"CONTRIBUTOR","body":"和master分支冲突了 @Menci ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778632267/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778675065","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1778675065","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1778675065,"node_id":"IC_kwDOBhmkcs5qBG15","user":{"login":"0x34d","id":36335769,"node_id":"MDQ6VXNlcjM2MzM1NzY5","avatar_url":"https://avatars.githubusercontent.com/u/36335769?v=4","gravatar_id":"","url":"https://api.github.com/users/0x34d","html_url":"https://github.com/0x34d","followers_url":"https://api.github.com/users/0x34d/followers","following_url":"https://api.github.com/users/0x34d/following{/other_user}","gists_url":"https://api.github.com/users/0x34d/gists{/gist_id}","starred_url":"https://api.github.com/users/0x34d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x34d/subscriptions","organizations_url":"https://api.github.com/users/0x34d/orgs","repos_url":"https://api.github.com/users/0x34d/repos","events_url":"https://api.github.com/users/0x34d/events{/privacy}","received_events_url":"https://api.github.com/users/0x34d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T07:28:46Z","updated_at":"2023-10-25T07:28:46Z","author_association":"CONTRIBUTOR","body":"I Don't think it's a good idea to add a license in `seed` files.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778675065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778707438","html_url":"https://github.com/apache/brpc/issues/2423#issuecomment-1778707438","issue_url":"https://api.github.com/repos/apache/brpc/issues/2423","id":1778707438,"node_id":"IC_kwDOBhmkcs5qBOvu","user":{"login":"hejingzhilian","id":5296387,"node_id":"MDQ6VXNlcjUyOTYzODc=","avatar_url":"https://avatars.githubusercontent.com/u/5296387?v=4","gravatar_id":"","url":"https://api.github.com/users/hejingzhilian","html_url":"https://github.com/hejingzhilian","followers_url":"https://api.github.com/users/hejingzhilian/followers","following_url":"https://api.github.com/users/hejingzhilian/following{/other_user}","gists_url":"https://api.github.com/users/hejingzhilian/gists{/gist_id}","starred_url":"https://api.github.com/users/hejingzhilian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hejingzhilian/subscriptions","organizations_url":"https://api.github.com/users/hejingzhilian/orgs","repos_url":"https://api.github.com/users/hejingzhilian/repos","events_url":"https://api.github.com/users/hejingzhilian/events{/privacy}","received_events_url":"https://api.github.com/users/hejingzhilian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T07:51:05Z","updated_at":"2023-10-25T07:51:05Z","author_association":"NONE","body":"好吧 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778707438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778780542","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1778780542","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1778780542,"node_id":"IC_kwDOBhmkcs5qBgl-","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T08:35:17Z","updated_at":"2023-10-25T08:35:17Z","author_association":"NONE","body":"目前来说不太行，不一定要streaming的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1778780542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780652759","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1780652759","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1780652759,"node_id":"IC_kwDOBhmkcs5qIprX","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T08:30:04Z","updated_at":"2023-10-26T08:30:04Z","author_association":"NONE","body":"如果说没有短期支持计划，那我来提PR支持下～","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780652759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780772715","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1780772715","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1780772715,"node_id":"IC_kwDOBhmkcs5qJG9r","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T09:43:41Z","updated_at":"2023-10-26T09:43:41Z","author_association":"CONTRIBUTOR","body":"OnClosedConnection关注的是Socket Failed的时机还是close(fd)的时机？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780772715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780991137","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1780991137","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1780991137,"node_id":"IC_kwDOBhmkcs5qJ8Sh","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T12:13:02Z","updated_at":"2023-10-26T12:13:02Z","author_association":"NONE","body":"client和server close都需要关注到。EPOLLHUP 可以解决这个事么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1780991137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1781122070","html_url":"https://github.com/apache/brpc/issues/2427#issuecomment-1781122070","issue_url":"https://api.github.com/repos/apache/brpc/issues/2427","id":1781122070,"node_id":"IC_kwDOBhmkcs5qKcQW","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T13:25:26Z","updated_at":"2023-10-26T13:25:26Z","author_association":"CONTRIBUTOR","body":"近期会提交一个pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1781122070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782169598","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782169598","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782169598,"node_id":"IC_kwDOBhmkcs5qOb_-","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T01:55:30Z","updated_at":"2023-10-27T01:55:30Z","author_association":"CONTRIBUTOR","body":"client端的连接也需要回调？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782169598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782171574","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782171574","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782171574,"node_id":"IC_kwDOBhmkcs5qOce2","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T01:58:48Z","updated_at":"2023-10-27T02:02:21Z","author_association":"NONE","body":"client端不需要。如果client与server端发起主动关闭链接，server端这边要回调；server端与client端主动发起的，也要回调；另外SocketFailed和close(fd)这两个时机其实无所谓，最好是能保证exactly once的语义。当OnCloseConnection回调执行完后，保证server端fd不能读/写即可","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782171574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782195753","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1782195753","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1782195753,"node_id":"IC_kwDOBhmkcs5qOiYp","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T02:36:17Z","updated_at":"2023-10-27T02:36:17Z","author_association":"CONTRIBUTOR","body":"@wasphin Can the license checker skip checking the seed files?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782195753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782198840","html_url":"https://github.com/apache/brpc/issues/2426#issuecomment-1782198840","issue_url":"https://api.github.com/repos/apache/brpc/issues/2426","id":1782198840,"node_id":"IC_kwDOBhmkcs5qOjI4","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T02:40:47Z","updated_at":"2023-10-27T02:40:47Z","author_association":"CONTRIBUTOR","body":"连接超时有可能是因为网络延时或者对端服务器繁忙，也有可能是因为客户端cpu负载过高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782198840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782218262","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782218262","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782218262,"node_id":"IC_kwDOBhmkcs5qOn4W","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T03:09:33Z","updated_at":"2023-10-27T03:09:33Z","author_association":"CONTRIBUTOR","body":"ServerOptions.auth 这个倒是可以在每次新建连接的时候被调用，这就可以实现OnNewConnection的回调。而且可以返回一个AuthContext，这个AuthContext可以通过后续的请求的Controller中拿到。这个AuthContext会存在Socket对象中，当Socket回收（即连接断开）时，AuthContext会被释放。如果把AuthContext的析构函数改为虚函数，允许子类自定义析构的逻辑，是不是就可以实现OnClosedConnection的回调了？\r\n\r\nhttps://github.com/apache/brpc/blob/master/src/brpc/authenticator.h#L30","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782218262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782243214","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782243214","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782243214,"node_id":"IC_kwDOBhmkcs5qOt-O","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T03:45:13Z","updated_at":"2023-10-27T03:45:13Z","author_association":"CONTRIBUTOR","body":"如果只需要在Socket Failed的时候回调的话，使用Socket::NotifyOnFailed可以实现OnClosedConnection的回调。\r\nhttps://github.com/apache/brpc/blob/761b399e50ba95dddec363662a1bf0b42254f18f/src/brpc/socket.cpp#L1044-L1058\r\n\r\n可以参考Controller::NotifyOnCancel的用法：\r\nhttps://github.com/apache/brpc/blob/761b399e50ba95dddec363662a1bf0b42254f18f/src/brpc/controller.cpp#L539-L561\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782243214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782316164","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1782316164","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1782316164,"node_id":"IC_kwDOBhmkcs5qO_yE","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T05:26:34Z","updated_at":"2023-10-27T05:26:34Z","author_association":"MEMBER","body":"license checking for the `seed` file can be excluded in https://github.com/apache/brpc/blob/master/.licenserc.yaml","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782316164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782359046","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782359046","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782359046,"node_id":"IC_kwDOBhmkcs5qPKQG","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T06:17:25Z","updated_at":"2023-10-27T09:21:12Z","author_association":"NONE","body":"> ServerOptions.auth 这个倒是可以在每次新建连接的时候被调用，这就可以实现OnNewConnection的回调。而且可以返回一个AuthContext，这个AuthContext可以通过后续的请求的Controller中拿到。这个AuthContext会存在Socket对象中，当Socket回收（即连接断开）时，AuthContext会被释放。如果把AuthContext的析构函数改为虚函数，允许子类自定义析构的逻辑，是不是就可以实现OnClosedConnection的回调了？\r\n> \r\n> https://github.com/apache/brpc/blob/master/src/brpc/authenticator.h#L30\r\n\r\n~~这个方案貌似可行，但是还是需要对brpc进行改造:~~\r\n~~1. AuthContext 对继承开放，析构函数需要virtual~~\r\n~~2. 现在AuthContext是在Socket::mutable_auth_context中创建的，没有在server层暴露接口让其创建用户的类型。~~\r\n\r\n我们可以在AuthContext新增属性：on_destroy_context(AuthContext* ctx), 用户通过out_ctx->set_destroy_context注册回调。\r\n\r\n在Socket::OnRecycle中delete _auth_context 之前，调用其on_destroy_context回调函数。\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782359046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782372356","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1782372356","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1782372356,"node_id":"IC_kwDOBhmkcs5qPNgE","user":{"login":"0x34d","id":36335769,"node_id":"MDQ6VXNlcjM2MzM1NzY5","avatar_url":"https://avatars.githubusercontent.com/u/36335769?v=4","gravatar_id":"","url":"https://api.github.com/users/0x34d","html_url":"https://github.com/0x34d","followers_url":"https://api.github.com/users/0x34d/followers","following_url":"https://api.github.com/users/0x34d/following{/other_user}","gists_url":"https://api.github.com/users/0x34d/gists{/gist_id}","starred_url":"https://api.github.com/users/0x34d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x34d/subscriptions","organizations_url":"https://api.github.com/users/0x34d/orgs","repos_url":"https://api.github.com/users/0x34d/repos","events_url":"https://api.github.com/users/0x34d/events{/privacy}","received_events_url":"https://api.github.com/users/0x34d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T06:32:14Z","updated_at":"2023-10-27T06:32:14Z","author_association":"CONTRIBUTOR","body":"> license checking for the `seed` file can be excluded in https://github.com/apache/brpc/blob/master/.licenserc.yaml\r\n\r\nThis should work https://github.com/apache/brpc/pull/2420/files#diff-f8a05717594bf148241760c18447442978fdc9db03a4aae93739529e0c124f8aR218","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782372356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782740122","html_url":"https://github.com/apache/brpc/pull/2428#issuecomment-1782740122","issue_url":"https://api.github.com/repos/apache/brpc/issues/2428","id":1782740122,"node_id":"IC_kwDOBhmkcs5qQnSa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T11:18:39Z","updated_at":"2023-10-27T11:18:39Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782740122/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782747516","html_url":"https://github.com/apache/brpc/issues/2424#issuecomment-1782747516","issue_url":"https://api.github.com/repos/apache/brpc/issues/2424","id":1782747516,"node_id":"IC_kwDOBhmkcs5qQpF8","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T11:24:30Z","updated_at":"2023-10-27T11:24:30Z","author_association":"CONTRIBUTOR","body":"> 我们可以在AuthContext新增属性：on_destroy_context(AuthContext* ctx), 用户通过out_ctx->set_destroy_context注册回调。\r\n> \r\n> 在Socket::OnRecycle中delete _auth_context 之前，调用其on_destroy_context回调函数。\r\n\r\n看起来可行。可以直接在AuthContext的析构函数里调用 on_destroy_context","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782747516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782751836","html_url":"https://github.com/apache/brpc/pull/2420#issuecomment-1782751836","issue_url":"https://api.github.com/repos/apache/brpc/issues/2420","id":1782751836,"node_id":"IC_kwDOBhmkcs5qQqJc","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T11:27:47Z","updated_at":"2023-10-27T11:27:47Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1782751836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1783913504","html_url":"https://github.com/apache/brpc/issues/2430#issuecomment-1783913504","issue_url":"https://api.github.com/repos/apache/brpc/issues/2430","id":1783913504,"node_id":"IC_kwDOBhmkcs5qVFwg","user":{"login":"coyorkdow","id":30541655,"node_id":"MDQ6VXNlcjMwNTQxNjU1","avatar_url":"https://avatars.githubusercontent.com/u/30541655?v=4","gravatar_id":"","url":"https://api.github.com/users/coyorkdow","html_url":"https://github.com/coyorkdow","followers_url":"https://api.github.com/users/coyorkdow/followers","following_url":"https://api.github.com/users/coyorkdow/following{/other_user}","gists_url":"https://api.github.com/users/coyorkdow/gists{/gist_id}","starred_url":"https://api.github.com/users/coyorkdow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coyorkdow/subscriptions","organizations_url":"https://api.github.com/users/coyorkdow/orgs","repos_url":"https://api.github.com/users/coyorkdow/repos","events_url":"https://api.github.com/users/coyorkdow/events{/privacy}","received_events_url":"https://api.github.com/users/coyorkdow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-28T20:18:33Z","updated_at":"2023-10-28T20:18:33Z","author_association":"CONTRIBUTOR","body":"尝试按照我的想法提了个pr https://github.com/apache/brpc/pull/2431","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1783913504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784366096","html_url":"https://github.com/apache/brpc/pull/2431#issuecomment-1784366096","issue_url":"https://api.github.com/repos/apache/brpc/issues/2431","id":1784366096,"node_id":"IC_kwDOBhmkcs5qW0QQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T02:08:15Z","updated_at":"2023-10-30T02:08:15Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784366096/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784686509","html_url":"https://github.com/apache/brpc/issues/1294#issuecomment-1784686509","issue_url":"https://api.github.com/repos/apache/brpc/issues/1294","id":1784686509,"node_id":"IC_kwDOBhmkcs5qYCet","user":{"login":"ryankeke","id":6779109,"node_id":"MDQ6VXNlcjY3NzkxMDk=","avatar_url":"https://avatars.githubusercontent.com/u/6779109?v=4","gravatar_id":"","url":"https://api.github.com/users/ryankeke","html_url":"https://github.com/ryankeke","followers_url":"https://api.github.com/users/ryankeke/followers","following_url":"https://api.github.com/users/ryankeke/following{/other_user}","gists_url":"https://api.github.com/users/ryankeke/gists{/gist_id}","starred_url":"https://api.github.com/users/ryankeke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryankeke/subscriptions","organizations_url":"https://api.github.com/users/ryankeke/orgs","repos_url":"https://api.github.com/users/ryankeke/repos","events_url":"https://api.github.com/users/ryankeke/events{/privacy}","received_events_url":"https://api.github.com/users/ryankeke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T08:16:17Z","updated_at":"2023-10-30T08:16:17Z","author_association":"NONE","body":"我也遇到类似的问题，通过调参数，将OMP_NUM_THREADS设置为1后，性能反而更好","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784686509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784884017","html_url":"https://github.com/apache/brpc/issues/2374#issuecomment-1784884017","issue_url":"https://api.github.com/repos/apache/brpc/issues/2374","id":1784884017,"node_id":"IC_kwDOBhmkcs5qYysx","user":{"login":"coyorkdow","id":30541655,"node_id":"MDQ6VXNlcjMwNTQxNjU1","avatar_url":"https://avatars.githubusercontent.com/u/30541655?v=4","gravatar_id":"","url":"https://api.github.com/users/coyorkdow","html_url":"https://github.com/coyorkdow","followers_url":"https://api.github.com/users/coyorkdow/followers","following_url":"https://api.github.com/users/coyorkdow/following{/other_user}","gists_url":"https://api.github.com/users/coyorkdow/gists{/gist_id}","starred_url":"https://api.github.com/users/coyorkdow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coyorkdow/subscriptions","organizations_url":"https://api.github.com/users/coyorkdow/orgs","repos_url":"https://api.github.com/users/coyorkdow/repos","events_url":"https://api.github.com/users/coyorkdow/events{/privacy}","received_events_url":"https://api.github.com/users/coyorkdow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T10:20:52Z","updated_at":"2023-10-30T10:20:52Z","author_association":"CONTRIBUTOR","body":"请问op和brpc maintainer，是否有合适的方法得到一个bthread在被调度前wait的耗时？我们的服务也怀疑有这样的问题，但是苦于没有证据。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1784884017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1786632302","html_url":"https://github.com/apache/brpc/issues/2374#issuecomment-1786632302","issue_url":"https://api.github.com/repos/apache/brpc/issues/2374","id":1786632302,"node_id":"IC_kwDOBhmkcs5qfdhu","user":{"login":"vinllen","id":6987398,"node_id":"MDQ6VXNlcjY5ODczOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6987398?v=4","gravatar_id":"","url":"https://api.github.com/users/vinllen","html_url":"https://github.com/vinllen","followers_url":"https://api.github.com/users/vinllen/followers","following_url":"https://api.github.com/users/vinllen/following{/other_user}","gists_url":"https://api.github.com/users/vinllen/gists{/gist_id}","starred_url":"https://api.github.com/users/vinllen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinllen/subscriptions","organizations_url":"https://api.github.com/users/vinllen/orgs","repos_url":"https://api.github.com/users/vinllen/repos","events_url":"https://api.github.com/users/vinllen/events{/privacy}","received_events_url":"https://api.github.com/users/vinllen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T07:29:27Z","updated_at":"2023-10-31T07:29:27Z","author_association":"NONE","body":"@coyorkdow 这个指标反馈bthread创建到被调度的时间：bthread_creation_latency","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1786632302/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1787296242","html_url":"https://github.com/apache/brpc/pull/2434#issuecomment-1787296242","issue_url":"https://api.github.com/repos/apache/brpc/issues/2434","id":1787296242,"node_id":"IC_kwDOBhmkcs5qh_ny","user":{"login":"DevanshKyada27","id":143169520,"node_id":"U_kgDOCIiX8A","avatar_url":"https://avatars.githubusercontent.com/u/143169520?v=4","gravatar_id":"","url":"https://api.github.com/users/DevanshKyada27","html_url":"https://github.com/DevanshKyada27","followers_url":"https://api.github.com/users/DevanshKyada27/followers","following_url":"https://api.github.com/users/DevanshKyada27/following{/other_user}","gists_url":"https://api.github.com/users/DevanshKyada27/gists{/gist_id}","starred_url":"https://api.github.com/users/DevanshKyada27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DevanshKyada27/subscriptions","organizations_url":"https://api.github.com/users/DevanshKyada27/orgs","repos_url":"https://api.github.com/users/DevanshKyada27/repos","events_url":"https://api.github.com/users/DevanshKyada27/events{/privacy}","received_events_url":"https://api.github.com/users/DevanshKyada27/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T14:09:50Z","updated_at":"2023-10-31T14:09:50Z","author_association":"CONTRIBUTOR","body":"Hey @wwbmmm can you please review and merge my PR. :)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1787296242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1788374501","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1788374501","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1788374501,"node_id":"IC_kwDOBhmkcs5qmG3l","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T04:04:48Z","updated_at":"2023-11-01T04:04:48Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1788374501/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790239607","html_url":"https://github.com/apache/brpc/issues/2426#issuecomment-1790239607","issue_url":"https://api.github.com/repos/apache/brpc/issues/2426","id":1790239607,"node_id":"IC_kwDOBhmkcs5qtON3","user":{"login":"fzhedu","id":6490813,"node_id":"MDQ6VXNlcjY0OTA4MTM=","avatar_url":"https://avatars.githubusercontent.com/u/6490813?v=4","gravatar_id":"","url":"https://api.github.com/users/fzhedu","html_url":"https://github.com/fzhedu","followers_url":"https://api.github.com/users/fzhedu/followers","following_url":"https://api.github.com/users/fzhedu/following{/other_user}","gists_url":"https://api.github.com/users/fzhedu/gists{/gist_id}","starred_url":"https://api.github.com/users/fzhedu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fzhedu/subscriptions","organizations_url":"https://api.github.com/users/fzhedu/orgs","repos_url":"https://api.github.com/users/fzhedu/repos","events_url":"https://api.github.com/users/fzhedu/events{/privacy}","received_events_url":"https://api.github.com/users/fzhedu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T07:58:45Z","updated_at":"2023-11-02T07:58:45Z","author_association":"NONE","body":"@wwbmmm  有什么指标可以帮助定位是网络延迟问题或者服务器繁忙呢？我们在生产上看到一个集群中，只有一台机器没有报这个错误，但是不知道改机器发生了什么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790239607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790242062","html_url":"https://github.com/apache/brpc/issues/2436#issuecomment-1790242062","issue_url":"https://api.github.com/repos/apache/brpc/issues/2436","id":1790242062,"node_id":"IC_kwDOBhmkcs5qtO0O","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T08:01:04Z","updated_at":"2023-11-02T08:01:04Z","author_association":"NONE","body":"可以帮忙看看吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790242062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]