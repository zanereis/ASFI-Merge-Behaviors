[{"url":"https://api.github.com/repos/apache/solr/issues/comments/853833525","html_url":"https://github.com/apache/solr/pull/158#issuecomment-853833525","issue_url":"https://api.github.com/repos/apache/solr/issues/158","id":853833525,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzgzMzUyNQ==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T12:33:42Z","updated_at":"2021-06-03T12:33:42Z","author_association":"CONTRIBUTOR","body":"The new apache/solr repo only contains main branch, and will eventually contain branch_9x etc.\r\nTo backport to 8.x you will need to port the change over to the https://github.com/apache/lucene-solr repo (see README there), that's where the branch_8x lives.\r\nIt's not that hard. What I have done is to add apache/solr as a remote to my apache/lucene-solr checkout, so I can do a git fetch and then cherry-pick the main-branch commit into my old repo.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/853833525/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/853833526","html_url":"https://github.com/apache/solr/pull/115#issuecomment-853833526","issue_url":"https://api.github.com/repos/apache/solr/issues/115","id":853833526,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzgzMzUyNg==","user":{"login":"noblepaul","id":54862,"node_id":"MDQ6VXNlcjU0ODYy","avatar_url":"https://avatars.githubusercontent.com/u/54862?v=4","gravatar_id":"","url":"https://api.github.com/users/noblepaul","html_url":"https://github.com/noblepaul","followers_url":"https://api.github.com/users/noblepaul/followers","following_url":"https://api.github.com/users/noblepaul/following{/other_user}","gists_url":"https://api.github.com/users/noblepaul/gists{/gist_id}","starred_url":"https://api.github.com/users/noblepaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noblepaul/subscriptions","organizations_url":"https://api.github.com/users/noblepaul/orgs","repos_url":"https://api.github.com/users/noblepaul/repos","events_url":"https://api.github.com/users/noblepaul/events{/privacy}","received_events_url":"https://api.github.com/users/noblepaul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T12:33:42Z","updated_at":"2021-06-03T12:33:42Z","author_association":"CONTRIBUTOR","body":"LGTM @dsmiley ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/853833526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/853836054","html_url":"https://github.com/apache/solr/pull/129#issuecomment-853836054","issue_url":"https://api.github.com/repos/apache/solr/issues/129","id":853836054,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzgzNjA1NA==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T12:38:16Z","updated_at":"2021-06-03T12:38:16Z","author_association":"CONTRIBUTOR","body":"The core of my point is that that Solr *already* has an API to interrogate the field type to see if it produces one token or more -- {{FieldType.isTokenized}}.  SolrQueryParserBase uses this in a number of places already.  It appears you want to make StrField a further specialized case when isTokenized==false is not distinguishing enough and that appears to me going too far / hacky.  It might be justifiable if we felt the result was clearly the correct behavior but we don't even think that (I don't, nor does Michael).  \r\n\r\nNonetheless some user control could be added so that someone with a normalizing text field that uses TextField (likely with KeywordTokenizer but not necessarily) could get query parser behavior that is the same as how StrField behaves. It'd be nice if a user could set `tokenized=\"false\"` on the fieldType definition that uses TextField if they can attest the processing doesn't tokenize.  I experimented this morning with that and was able to do it by modifying the first line of TextField.init to be this snippet:\r\n```\r\n    if ((falseProperties & TOKENIZED) == 0) {\r\n      properties |= TOKENIZED;\r\n    }\r\n```\r\n(instead of insisting TOKENIZED as it did before).\r\n\r\nAnd maybe the existing logic in SolrQueryParserBase could be improved somehow; I'm definitely not claiming it's perfection.  It just strikes me as a cast on StrField is a strong code smell to me that we're doing something wrong when there is already isTokenized which seems suitable for your purpose.\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/853836054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/853963136","html_url":"https://github.com/apache/solr/pull/42#issuecomment-853963136","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":853963136,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzk2MzEzNg==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T15:36:05Z","updated_at":"2021-06-03T15:36:26Z","author_association":"CONTRIBUTOR","body":"> Schema Designer should not simply throw generic errors that do no help the user. For instance, when a user tries to create a field that already exists, there is just an error processing banner. Ideally, you could grab the important detail in the response body and show it to the user. Consider `data[\"error\"][\"details\"][0][\"errorMessages\"][0]` as seen below to populate the banner with something helpful to the user:\r\n> \r\n> ```\r\n> Possibly unhandled rejection: {\"data\":{\"responseHeader\":{\"status\":400,\"QTime\":1},\"error\":{\"metadata\":[\"error-class\",\"org.apache.solr.api.ApiBag$ExceptionWithErrObject\",\"root-error-class\",\"org.apache.solr.api.ApiBag$ExceptionWithErrObject\"],\"details\":[{\"add-field\":{\"stored\":\"true\",\"indexed\":\"true\",\"uninvertible\":\"true\",\"name\":\"name\",\"type\":\"string\"},\"errorMessages\":[\"Field 'name' already exists.\\n\"]}],\"msg\":\"error processing commands\",\"code\":400}},\"status\":400,\"config\":{\"method\":\"POST\",\"transformRequest\":[null],\"transformResponse\":[null],\"jsonpCallbackParam\":\"callback\",\"data\":{\"add-field\":{\"stored\":\"true\",\"indexed\":\"true\",\"uninvertible\":\"true\",\"name\":\"name\",\"type\":\"string\"}},\"url\":\"techproducts/schema\",\"params\":{\"wt\":\"json\",\"_\":1622686070279},\"headers\":{\"Accept\":\"application/json, text/plain, */*\",\"X-Requested-With\":\"XMLHttpRequest\",\"Content-Type\":\"application/json;charset=utf-8\"},\"timeout\":10000},\"statusText\":\"Bad Request\",\"xhrStatus\":\"complete\",\"resource\":{\"add-field\":\"...\"}}```\r\n> ```\r\n\r\nCan you please provide reproduction steps for how you got this error (including browser details)? Schema Designer UI should be displaying user friendly errors in a dialog. Moreover, I don't even know how you got this error since the JS code validates the field doesn't already exist before submitting the request. See screenshot of what I see in my env. <img width=\"357\" alt=\"Screen Shot 2021-06-03 at 9 32 19 AM\" src=\"https://user-images.githubusercontent.com/417074/120671957-1c3aad00-c44f-11eb-8c62-ff6051ba9316.png\">","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/853963136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/853964812","html_url":"https://github.com/apache/solr/pull/42#issuecomment-853964812","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":853964812,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzk2NDgxMg==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T15:38:22Z","updated_at":"2021-06-03T15:38:22Z","author_association":"CONTRIBUTOR","body":"> there's also a few security exceptions that if thrown in the wrong corporate org could start problematic conversations running SOLR. Everything is under scrutiny right now given the recent events.\r\n> \r\n> To fix those errors referencing image resources being blocked by the CSP, we need to add this clause to `jetty.xml`: `img-src 'self' data:`. The change will still restrict img resources to the host but it will allow SVG and IMG. We cannot be more specific because of the port. :) It is a replacement of the existing `img-srv 'self'`.\r\n\r\nThis doesn't sound like it is Schema Designer UI specific. I believe I'm referencing icons the same way all the other screens do. If you think this is a Schema Designer specific issue, please provide a link to the offending code. Otherwise, please open another JIRA to address that problem independently of this issue.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/853964812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854119635","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854119635","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854119635,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDExOTYzNQ==","user":{"login":"MarcusSorealheis","id":2353608,"node_id":"MDQ6VXNlcjIzNTM2MDg=","avatar_url":"https://avatars.githubusercontent.com/u/2353608?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusSorealheis","html_url":"https://github.com/MarcusSorealheis","followers_url":"https://api.github.com/users/MarcusSorealheis/followers","following_url":"https://api.github.com/users/MarcusSorealheis/following{/other_user}","gists_url":"https://api.github.com/users/MarcusSorealheis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusSorealheis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusSorealheis/subscriptions","organizations_url":"https://api.github.com/users/MarcusSorealheis/orgs","repos_url":"https://api.github.com/users/MarcusSorealheis/repos","events_url":"https://api.github.com/users/MarcusSorealheis/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusSorealheis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T19:25:35Z","updated_at":"2021-06-03T19:25:35Z","author_association":"CONTRIBUTOR","body":"> > there's also a few security exceptions that if thrown in the wrong corporate org could start problematic conversations running SOLR. Everything is under scrutiny right now given the recent events.\r\n> > To fix those errors referencing image resources being blocked by the CSP, we need to add this clause to `jetty.xml`: `img-src 'self' data:`. The change will still restrict img resources to the host but it will allow SVG and IMG. We cannot be more specific because of the port. :) It is a replacement of the existing `img-srv 'self'`.\r\n> \r\n> This doesn't sound like it is Schema Designer UI specific. I believe I'm referencing icons the same way all the other screens do. If you think this is a Schema Designer specific issue, please provide a link to the offending code. Otherwise, please open another JIRA to address that problem independently of this issue.\r\n\r\nIt's not Schema designer specific. It's Solr. I'll open a JIRA, thanks :)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854119635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854122801","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854122801","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854122801,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDEyMjgwMQ==","user":{"login":"MarcusSorealheis","id":2353608,"node_id":"MDQ6VXNlcjIzNTM2MDg=","avatar_url":"https://avatars.githubusercontent.com/u/2353608?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusSorealheis","html_url":"https://github.com/MarcusSorealheis","followers_url":"https://api.github.com/users/MarcusSorealheis/followers","following_url":"https://api.github.com/users/MarcusSorealheis/following{/other_user}","gists_url":"https://api.github.com/users/MarcusSorealheis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusSorealheis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusSorealheis/subscriptions","organizations_url":"https://api.github.com/users/MarcusSorealheis/orgs","repos_url":"https://api.github.com/users/MarcusSorealheis/repos","events_url":"https://api.github.com/users/MarcusSorealheis/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusSorealheis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T19:31:19Z","updated_at":"2021-06-03T19:31:19Z","author_association":"CONTRIBUTOR","body":"> > Schema Designer should not simply throw generic errors that do no help the user. For instance, when a user tries to create a field that already exists, there is just an error processing banner. Ideally, you could grab the important detail in the response body and show it to the user. Consider `data[\"error\"][\"details\"][0][\"errorMessages\"][0]` as seen below to populate the banner with something helpful to the user:\r\n> > ```\r\n> > Possibly unhandled rejection: {\"data\":{\"responseHeader\":{\"status\":400,\"QTime\":1},\"error\":{\"metadata\":[\"error-class\",\"org.apache.solr.api.ApiBag$ExceptionWithErrObject\",\"root-error-class\",\"org.apache.solr.api.ApiBag$ExceptionWithErrObject\"],\"details\":[{\"add-field\":{\"stored\":\"true\",\"indexed\":\"true\",\"uninvertible\":\"true\",\"name\":\"name\",\"type\":\"string\"},\"errorMessages\":[\"Field 'name' already exists.\\n\"]}],\"msg\":\"error processing commands\",\"code\":400}},\"status\":400,\"config\":{\"method\":\"POST\",\"transformRequest\":[null],\"transformResponse\":[null],\"jsonpCallbackParam\":\"callback\",\"data\":{\"add-field\":{\"stored\":\"true\",\"indexed\":\"true\",\"uninvertible\":\"true\",\"name\":\"name\",\"type\":\"string\"}},\"url\":\"techproducts/schema\",\"params\":{\"wt\":\"json\",\"_\":1622686070279},\"headers\":{\"Accept\":\"application/json, text/plain, */*\",\"X-Requested-With\":\"XMLHttpRequest\",\"Content-Type\":\"application/json;charset=utf-8\"},\"timeout\":10000},\"statusText\":\"Bad Request\",\"xhrStatus\":\"complete\",\"resource\":{\"add-field\":\"...\"}}```\r\n> > ```\r\n> \r\n> Can you please provide reproduction steps for how you got this error (including browser details)? Schema Designer UI should be displaying user friendly errors in a dialog. Moreover, I don't even know how you got this error since the JS code validates the field doesn't already exist before submitting the request. See screenshot of what I see in my env. <img alt=\"Screen Shot 2021-06-03 at 9 32 19 AM\" width=\"357\" src=\"https://user-images.githubusercontent.com/417074/120671957-1c3aad00-c44f-11eb-8c62-ff6051ba9316.png\">\r\n\r\n1. pull down the repo at this point\r\n2. `gh checkout pr 42` \r\n3. ./gradlew assemble\r\n4. cd into the solr snapshot\r\n5. bin/solr start -e techproducts\r\n6. open Chrome Version 91.0.4472.77 (Official Build) (x86_64)\r\n7. click schema\r\n8. add field\r\n9. see screenshot - type name in the field and set it to the string type\r\n10. see screenshot - click add field\r\n![image](https://user-images.githubusercontent.com/2353608/120701247-76e00300-c467-11eb-8af2-a3b5f59baeeb.png)\r\n![image](https://user-images.githubusercontent.com/2353608/120701329-91b27780-c467-11eb-9b34-4f6381d98378.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854122801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854126530","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854126530","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854126530,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDEyNjUzMA==","user":{"login":"MarcusSorealheis","id":2353608,"node_id":"MDQ6VXNlcjIzNTM2MDg=","avatar_url":"https://avatars.githubusercontent.com/u/2353608?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusSorealheis","html_url":"https://github.com/MarcusSorealheis","followers_url":"https://api.github.com/users/MarcusSorealheis/followers","following_url":"https://api.github.com/users/MarcusSorealheis/following{/other_user}","gists_url":"https://api.github.com/users/MarcusSorealheis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusSorealheis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusSorealheis/subscriptions","organizations_url":"https://api.github.com/users/MarcusSorealheis/orgs","repos_url":"https://api.github.com/users/MarcusSorealheis/repos","events_url":"https://api.github.com/users/MarcusSorealheis/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusSorealheis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T19:37:32Z","updated_at":"2021-06-03T19:37:32Z","author_association":"CONTRIBUTOR","body":"I just rebuilt from nothing and got the same error","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854126530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854135714","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854135714","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854135714,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDEzNTcxNA==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T19:53:05Z","updated_at":"2021-06-03T19:53:05Z","author_association":"CONTRIBUTOR","body":"Schema Designer only runs in cloud-mode, from your screenshot, you're running in standalone. See screenshots of the Schema Designer UI in the JIRA","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854135714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854136815","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854136815","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854136815,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDEzNjgxNQ==","user":{"login":"MarcusSorealheis","id":2353608,"node_id":"MDQ6VXNlcjIzNTM2MDg=","avatar_url":"https://avatars.githubusercontent.com/u/2353608?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusSorealheis","html_url":"https://github.com/MarcusSorealheis","followers_url":"https://api.github.com/users/MarcusSorealheis/followers","following_url":"https://api.github.com/users/MarcusSorealheis/following{/other_user}","gists_url":"https://api.github.com/users/MarcusSorealheis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusSorealheis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusSorealheis/subscriptions","organizations_url":"https://api.github.com/users/MarcusSorealheis/orgs","repos_url":"https://api.github.com/users/MarcusSorealheis/repos","events_url":"https://api.github.com/users/MarcusSorealheis/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusSorealheis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T19:54:58Z","updated_at":"2021-06-03T19:54:58Z","author_association":"CONTRIBUTOR","body":"Ignore this.. Looking into the client side errors now. First two nits and SOLR-wide issue persists. New JIRA incoming.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854136815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854319415","html_url":"https://github.com/apache/solr/pull/81#issuecomment-854319415","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":854319415,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDMxOTQxNQ==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T02:53:00Z","updated_at":"2021-06-04T02:53:00Z","author_association":"CONTRIBUTOR","body":"I've tentatively pushed a fix for the api-overwriting problem I described in my last comment.  The fix I ended up using is as follows:\r\n\r\n1. Add a method to PathTrie, `attachValueToNode`, to encapsulate storing an object at a given node.  As written in PathTrie this storage uses the same \"overwriting\" semantics that PathTrie has had up to this point.  But having this abstracted in a method allows subclasses of PathTrie to modify this behavior as needed.\r\n2. Create a PathTrie subclass within ApiBag called `CommandAggregatingPathTrie`.  This subclass overrides `attachValueToNode` to combine AnnotatedApi instances together instead of overwriting previously registered values.\r\n3. The actual \"combination\" logic lives in a class `CommandAggregatingAnnotatedApi extends AnnotatedApi`.\r\n\r\nI decided on this approach because it maintains some of the abstractions that seemed important.  e.g. PathTrie is saved from needing to know anything about Apis or how to combine them.  Combining logic is largely handled by ApiBag, which makes some sense since it's responsible for the registration and storage in the first place. etc.\r\n\r\nThat said, this was a \"best guess\" solution, and I'm not especially attached to it.  Very open to feedback here.\r\n\r\nWith this blocker taken care of I'm hoping to split out the Api classes in the next day or two, and then this should be ready to go.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854319415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854439217","html_url":"https://github.com/apache/solr/pull/131#issuecomment-854439217","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":854439217,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQzOTIxNw==","user":{"login":"colvinco","id":51863265,"node_id":"MDQ6VXNlcjUxODYzMjY1","avatar_url":"https://avatars.githubusercontent.com/u/51863265?v=4","gravatar_id":"","url":"https://api.github.com/users/colvinco","html_url":"https://github.com/colvinco","followers_url":"https://api.github.com/users/colvinco/followers","following_url":"https://api.github.com/users/colvinco/following{/other_user}","gists_url":"https://api.github.com/users/colvinco/gists{/gist_id}","starred_url":"https://api.github.com/users/colvinco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colvinco/subscriptions","organizations_url":"https://api.github.com/users/colvinco/orgs","repos_url":"https://api.github.com/users/colvinco/repos","events_url":"https://api.github.com/users/colvinco/events{/privacy}","received_events_url":"https://api.github.com/users/colvinco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T07:29:25Z","updated_at":"2021-06-04T07:29:25Z","author_association":"CONTRIBUTOR","body":"@epugh did you get a look at it on unix?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854439217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854483986","html_url":"https://github.com/apache/solr/pull/126#issuecomment-854483986","issue_url":"https://api.github.com/repos/apache/solr/issues/126","id":854483986,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ4Mzk4Ng==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:35:44Z","updated_at":"2021-06-04T08:35:44Z","author_association":"CONTRIBUTOR","body":"- [X] pull request branch is up to date with latest `origin/main`\r\n- [X] `./gradlew spotlessCheck` passes\r\n- [X] `./gradlew precommit` passes and as per https://github.com/apache/solr/blob/e8c0b705fcff69893f29015876aefe8e4317f143/gradle/validation/precommit.gradle#L33-L45 already includes the `spotlessCheck` that is now being defined via this pull request.\r\n\r\nBased on \"lazy consensus\" will next proceed to merge the pull request here. But as always, post merge feedback is very welcome and worst case please do feel free to just revert the commit.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854483986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854635461","html_url":"https://github.com/apache/solr/pull/161#issuecomment-854635461","issue_url":"https://api.github.com/repos/apache/solr/issues/161","id":854635461,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYzNTQ2MQ==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T11:32:22Z","updated_at":"2021-06-04T11:32:22Z","author_association":"CONTRIBUTOR","body":"LGTM.    Thanks for catching this!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854635461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854719232","html_url":"https://github.com/apache/solr/pull/139#issuecomment-854719232","issue_url":"https://api.github.com/repos/apache/solr/issues/139","id":854719232,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDcxOTIzMg==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T13:20:37Z","updated_at":"2021-06-04T13:20:37Z","author_association":"CONTRIBUTOR","body":"I have now addressed my two points\r\n* Create a negative test with a different cert, to see it failing\r\n* Remove need for BouncyCastle by importing pcs12 file directly in test\r\n\r\nI have also added license and sha files for all new test dependencies and made precommit pass.\r\nI think this is now ready for review.\r\nIt's a large PR, but most files are really SHA, LICENSE and NOTICE files.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854719232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854778916","html_url":"https://github.com/apache/solr/pull/162#issuecomment-854778916","issue_url":"https://api.github.com/repos/apache/solr/issues/162","id":854778916,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDc3ODkxNg==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T14:38:49Z","updated_at":"2021-06-04T14:38:49Z","author_association":"CONTRIBUTOR","body":"You could increase the scope of the PR and just keep going with more modules, thus ultimately fewer commits where we make changes en-masse.  Up to you.\r\n\r\nOnce the merges happen, the commits where we do this en-masse change should be added to `/.git-blame-ignore-revs` \r\nThe current contents of that file should be wiped clean because they are all Lucene commits.  We inherited it from the split.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854778916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854863726","html_url":"https://github.com/apache/solr/pull/161#issuecomment-854863726","issue_url":"https://api.github.com/repos/apache/solr/issues/161","id":854863726,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDg2MzcyNg==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T16:38:14Z","updated_at":"2021-06-04T16:38:14Z","author_association":"CONTRIBUTOR","body":"Much better; I should have looked more carefully to begin with.  CC @NazerkeBS ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854863726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854884550","html_url":"https://github.com/apache/solr/pull/162#issuecomment-854884550","issue_url":"https://api.github.com/repos/apache/solr/issues/162","id":854884550,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDg4NDU1MA==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T17:15:38Z","updated_at":"2021-06-04T17:15:38Z","author_association":"CONTRIBUTOR","body":"> Once the merges happen, the commits where we do this en-masse change should be added to `/.git-blame-ignore-revs`\r\n> The current contents of that file should be wiped clean because they are all Lucene commits. We inherited it from the split.\r\n\r\nThanks, I didn't know about that file! Created #163 for the wiping clean separately first.\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854884550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854903095","html_url":"https://github.com/apache/solr/pull/17#issuecomment-854903095","issue_url":"https://api.github.com/repos/apache/solr/issues/17","id":854903095,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDkwMzA5NQ==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T17:51:53Z","updated_at":"2021-06-04T17:51:53Z","author_association":"CONTRIBUTOR","body":"Aside from some trivial matters I pointed out, I think this is ready to test for backwards-compatibility.  It'll have to be done manually.  Create  a SolrCloud cluster (single node fine), perhaps using Docker for a Solr 8 version.  Ensure that the data is mapped to disk so it's retained when you run main's docker image.  Create a collection before shutting it down.  When you break up Solr 9 in-place, see that the data is there and no mysterious errors.  Examine ZK to see if the state.json for the collection was auto-updated as we expect it might.  If that's successful, then I think the \"per replica states\" opt-in feature new in 8.x might prevent this auto-update of state.json since the replica state is done separately but I'm not sure.  Try it out.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854903095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/854932531","html_url":"https://github.com/apache/solr/pull/42#issuecomment-854932531","issue_url":"https://api.github.com/repos/apache/solr/issues/42","id":854932531,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDkzMjUzMQ==","user":{"login":"MarcusSorealheis","id":2353608,"node_id":"MDQ6VXNlcjIzNTM2MDg=","avatar_url":"https://avatars.githubusercontent.com/u/2353608?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcusSorealheis","html_url":"https://github.com/MarcusSorealheis","followers_url":"https://api.github.com/users/MarcusSorealheis/followers","following_url":"https://api.github.com/users/MarcusSorealheis/following{/other_user}","gists_url":"https://api.github.com/users/MarcusSorealheis/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcusSorealheis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcusSorealheis/subscriptions","organizations_url":"https://api.github.com/users/MarcusSorealheis/orgs","repos_url":"https://api.github.com/users/MarcusSorealheis/repos","events_url":"https://api.github.com/users/MarcusSorealheis/events{/privacy}","received_events_url":"https://api.github.com/users/MarcusSorealheis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T18:45:44Z","updated_at":"2021-06-04T18:45:44Z","author_association":"CONTRIBUTOR","body":"\r\n> This doesn't sound like it is Schema Designer UI specific. I believe I'm referencing icons the same way all the other screens do. If you think this is a Schema Designer specific issue, please provide a link to the offending code. Otherwise, please open another JIRA to address that problem independently of this issue.\r\n\r\nI added it here [#164](https://github.com/apache/solr/pull/164)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/854932531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/855233671","html_url":"https://github.com/apache/solr/pull/131#issuecomment-855233671","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":855233671,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTIzMzY3MQ==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-05T12:31:20Z","updated_at":"2021-06-05T12:31:20Z","author_association":"CONTRIBUTOR","body":"I just re-read @risdenk message, as I am getting the same exception on OSX with the `jdk-11.0.11+9` setup.   \r\n\r\nI feel a bit weird merging this PR when Solr doesn't start....   Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/855233671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/855235374","html_url":"https://github.com/apache/solr/pull/131#issuecomment-855235374","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":855235374,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTIzNTM3NA==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-05T12:46:02Z","updated_at":"2021-06-05T12:46:02Z","author_association":"CONTRIBUTOR","body":"I built my Solr with `11.0.3, x86_64:\t\"AdoptOpenJDK 11\"\t/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home` and then started Solr, and it started just fine.\r\n\r\nI swapped to the J9, and I get the access errors. \r\n\r\n`    11.0.11, x86_64:\t\"OpenJDK 11.0.11\"\t/Library/Java/JavaVirtualMachines/jdk-11.0.11+9/Contents/Home`\r\n\r\n@risdenk you have more experience then I do, should we merge this as \"not related to the other issue\" and then open a new JIRA issue for the start up problem?  @colvinco do you see the same issue on _main_?   Maybe it's one of those things where it works on _branch_8x_ but due to other changes it doesn't work on _main_?   ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/855235374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/855438132","html_url":"https://github.com/apache/solr/pull/166#issuecomment-855438132","issue_url":"https://api.github.com/repos/apache/solr/issues/166","id":855438132,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTQzODEzMg==","user":{"login":"tomglk","id":58065733,"node_id":"MDQ6VXNlcjU4MDY1NzMz","avatar_url":"https://avatars.githubusercontent.com/u/58065733?v=4","gravatar_id":"","url":"https://api.github.com/users/tomglk","html_url":"https://github.com/tomglk","followers_url":"https://api.github.com/users/tomglk/followers","following_url":"https://api.github.com/users/tomglk/following{/other_user}","gists_url":"https://api.github.com/users/tomglk/gists{/gist_id}","starred_url":"https://api.github.com/users/tomglk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomglk/subscriptions","organizations_url":"https://api.github.com/users/tomglk/orgs","repos_url":"https://api.github.com/users/tomglk/repos","events_url":"https://api.github.com/users/tomglk/events{/privacy}","received_events_url":"https://api.github.com/users/tomglk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-06T18:04:27Z","updated_at":"2021-06-09T06:04:22Z","author_association":"CONTRIBUTOR","body":"Hi @cpoerschke ,\r\nthank you for the quick response. :)\r\nI addressed your suggestions that were quick to include and will look into the exception-handling / toString()-topics next.\r\n\r\n> Not yet looked at the test changes\r\n\r\nI am actually quite glad that you didn't, because I just changed the tests quite a lot. \r\nNow there is quite a lot of duplicated code if you look at the two prefetching tests in `org.apache.solr.ltr` and the `TestLTROnSolrCloud`.\r\nI already had a `TestLTROnSolrCloudBase`-class ready to extract the duplicates but was not sure whether to include such a change in this PR because it it would entail a few changes in `TestLTROnSolrCloud` which have nothing to do with the prefetching functionality.\r\n\r\nI can make a commit tomorrow(?) only including this change and if you think that it would make the PR too complex we can just revert it.\r\n\r\n**EDIT:** Link to the \"restructure-commit\" :  88d1897","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/855438132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/855767702","html_url":"https://github.com/apache/solr/pull/131#issuecomment-855767702","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":855767702,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTc2NzcwMg==","user":{"login":"colvinco","id":51863265,"node_id":"MDQ6VXNlcjUxODYzMjY1","avatar_url":"https://avatars.githubusercontent.com/u/51863265?v=4","gravatar_id":"","url":"https://api.github.com/users/colvinco","html_url":"https://github.com/colvinco","followers_url":"https://api.github.com/users/colvinco/followers","following_url":"https://api.github.com/users/colvinco/following{/other_user}","gists_url":"https://api.github.com/users/colvinco/gists{/gist_id}","starred_url":"https://api.github.com/users/colvinco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colvinco/subscriptions","organizations_url":"https://api.github.com/users/colvinco/orgs","repos_url":"https://api.github.com/users/colvinco/repos","events_url":"https://api.github.com/users/colvinco/events{/privacy}","received_events_url":"https://api.github.com/users/colvinco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T09:27:15Z","updated_at":"2021-06-07T09:27:15Z","author_association":"CONTRIBUTOR","body":"Hi yes, sorry I hadn't checked on main. I see the same thing on main on Windows\r\n```\r\no.a.s.c.SolrCore null:java.security.AccessControlException: Access denied (\"java.lang.RuntimePermission\" \"accessClassInPackage.jdk.internal.reflect\")\r\n```\r\nIt works on branch_8x.\r\n\r\nSo yeah, I think another issue to deal with the ACE on main would be best.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/855767702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/856047544","html_url":"https://github.com/apache/solr/pull/158#issuecomment-856047544","issue_url":"https://api.github.com/repos/apache/solr/issues/158","id":856047544,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjA0NzU0NA==","user":{"login":"alessandrobenedetti","id":513195,"node_id":"MDQ6VXNlcjUxMzE5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/513195?v=4","gravatar_id":"","url":"https://api.github.com/users/alessandrobenedetti","html_url":"https://github.com/alessandrobenedetti","followers_url":"https://api.github.com/users/alessandrobenedetti/followers","following_url":"https://api.github.com/users/alessandrobenedetti/following{/other_user}","gists_url":"https://api.github.com/users/alessandrobenedetti/gists{/gist_id}","starred_url":"https://api.github.com/users/alessandrobenedetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alessandrobenedetti/subscriptions","organizations_url":"https://api.github.com/users/alessandrobenedetti/orgs","repos_url":"https://api.github.com/users/alessandrobenedetti/repos","events_url":"https://api.github.com/users/alessandrobenedetti/events{/privacy}","received_events_url":"https://api.github.com/users/alessandrobenedetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T15:39:19Z","updated_at":"2021-06-07T15:39:19Z","author_association":"CONTRIBUTOR","body":"@dsmiley I see that changes are still requested, can you check that?\r\nI would like to progress with the merge, I doubt we get any other feedback here.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/856047544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857294030","html_url":"https://github.com/apache/solr/pull/120#issuecomment-857294030","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":857294030,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzI5NDAzMA==","user":{"login":"athrog","id":5974747,"node_id":"MDQ6VXNlcjU5NzQ3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5974747?v=4","gravatar_id":"","url":"https://api.github.com/users/athrog","html_url":"https://github.com/athrog","followers_url":"https://api.github.com/users/athrog/followers","following_url":"https://api.github.com/users/athrog/following{/other_user}","gists_url":"https://api.github.com/users/athrog/gists{/gist_id}","starred_url":"https://api.github.com/users/athrog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athrog/subscriptions","organizations_url":"https://api.github.com/users/athrog/orgs","repos_url":"https://api.github.com/users/athrog/repos","events_url":"https://api.github.com/users/athrog/events{/privacy}","received_events_url":"https://api.github.com/users/athrog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T01:05:25Z","updated_at":"2021-06-09T01:05:25Z","author_association":"CONTRIBUTOR","body":"@gerlowskija I'll address the cons list first, that seems to me the most salient part to discuss:\r\n\r\n> Classpath Bloat: Having all blob-store implementations in the same config means that a user using S3 for backups will also be loading a bunch of the GCS (and eventually ABS) related dependencies that they have no intention of ever using. How much it'll matter in practice, idk, but in theory this expanded but unused surface area is a liability in terms of triggering vulnerability scans or true security issues whenever one of these deps has a CVE.\r\n\r\nIn my mind, if we go the path of using the BlobRepository abstraction, the ultimate goal would be to have it be a separate unit, apart from the S3 or GCS stuff. That could mean...\r\n1. We have three modules in solr-contrib (e.g., BlobRepository, S3Repo, GCSRepo) [this seems weird though, b/c BlobRepository is an \"abstract\" layer and that doesn't seem to belong in solr-contrib]\r\n1. We commit the BlobRepository code directly into the Solr core module, and then have S3Repo and GCSRepo pull from that (this sounds similar to the approach you mentioned \"One side note on this question\")\r\n1. We push the BlobRepository code into a separate Git repo, publish a jar that S3Repo and GCSRepo\r\n\r\nThere may be other options, but for the bloat reasons you mentioned, I never really considered putting all the blob stores into one multi-cloud repo. \r\n\r\n> Limited Code Reuse: While BlobRepository does allow some pieces to be reused, it's not as much as I was hoping might be possible. IMO the actual code interfacing with the S3/GCS client comprises such a large chunk of the logic here that it dwarfs the smaller bits that are able to be reused. As an \"example\" of this: GCSBackupRepository and S3storageClient both come in at roughly the same LOC count despite S3StorageClient taking advantage of all the shared logic up in BlobRepository. (Admittedly this is a real shaky comparison: the two code samples are using different client libraries, implement different interfaces, are written in different coding styles with different use of whitespace, comments, etc. And LOC is a dubious stand-in for complexity in any case. But the point that S3StorageClient's code-reuse still leaves the two in the same ballpark still stands.)\r\n\r\nVery fair criticism. For me, it's right on the edge of \"are we over-architecting this?\". It would of course help to have a third blob client (Azure?); perhaps with just two we're underestimating the value that middle layer could provide? \r\n\r\n> Documentation Complexity: Combining multiple blob-store implementations under the same BackupRepository impl will add some documentation challenges: in calling out which config props affect which blob store \"types\", in describing the differing expectations on for identifiers like bucket names and paths, etc.\r\n\r\nIs this con still relevant if we pick one of the three options I listed above (and not have them all in one)? If each is separate, their docs would also be separate. Or do you mean internal docs (e.g., Javadoc)?\r\n\r\n\r\nYou also asked\r\n\r\n> What distinguishes a few of the I/O classes in this PR (e.g. BlobIndexInput) from existing alternatives (e.g. BufferedChecksumIndexInput) that do similar things at a quick glance?\r\n\r\nIn regards to BlobIndexInput, I'll have to defer the 'why' question to @psalagnac. That impl was written when we first wrote this plugin -- it's possible it was to work around a bug, or possible it was oversight that we built it ourselves and didn't use a pre-built impl. If I get some time, I can also try swapping our use for `BufferedChecksumIndexInput` and see if tests pass.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857294030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857637674","html_url":"https://github.com/apache/solr/pull/131#issuecomment-857637674","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":857637674,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzYzNzY3NA==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T12:05:49Z","updated_at":"2021-06-09T12:05:49Z","author_association":"CONTRIBUTOR","body":"@colvinco can you create the other JIRA?   Thanks!  I'll look at merging htis now.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857637674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857734435","html_url":"https://github.com/apache/solr/pull/131#issuecomment-857734435","issue_url":"https://api.github.com/repos/apache/solr/issues/131","id":857734435,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzczNDQzNQ==","user":{"login":"colvinco","id":51863265,"node_id":"MDQ6VXNlcjUxODYzMjY1","avatar_url":"https://avatars.githubusercontent.com/u/51863265?v=4","gravatar_id":"","url":"https://api.github.com/users/colvinco","html_url":"https://github.com/colvinco","followers_url":"https://api.github.com/users/colvinco/followers","following_url":"https://api.github.com/users/colvinco/following{/other_user}","gists_url":"https://api.github.com/users/colvinco/gists{/gist_id}","starred_url":"https://api.github.com/users/colvinco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colvinco/subscriptions","organizations_url":"https://api.github.com/users/colvinco/orgs","repos_url":"https://api.github.com/users/colvinco/repos","events_url":"https://api.github.com/users/colvinco/events{/privacy}","received_events_url":"https://api.github.com/users/colvinco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T14:18:24Z","updated_at":"2021-06-09T14:18:24Z","author_association":"CONTRIBUTOR","body":"Thanks. I've raised [SOLR-15464](https://issues.apache.org/jira/browse/SOLR-15464)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857734435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857805113","html_url":"https://github.com/apache/solr/pull/129#issuecomment-857805113","issue_url":"https://api.github.com/repos/apache/solr/issues/129","id":857805113,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzgwNTExMw==","user":{"login":"alessandrobenedetti","id":513195,"node_id":"MDQ6VXNlcjUxMzE5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/513195?v=4","gravatar_id":"","url":"https://api.github.com/users/alessandrobenedetti","html_url":"https://github.com/alessandrobenedetti","followers_url":"https://api.github.com/users/alessandrobenedetti/followers","following_url":"https://api.github.com/users/alessandrobenedetti/following{/other_user}","gists_url":"https://api.github.com/users/alessandrobenedetti/gists{/gist_id}","starred_url":"https://api.github.com/users/alessandrobenedetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alessandrobenedetti/subscriptions","organizations_url":"https://api.github.com/users/alessandrobenedetti/orgs","repos_url":"https://api.github.com/users/alessandrobenedetti/repos","events_url":"https://api.github.com/users/alessandrobenedetti/events{/privacy}","received_events_url":"https://api.github.com/users/alessandrobenedetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T15:31:44Z","updated_at":"2021-06-09T17:38:19Z","author_association":"CONTRIBUTOR","body":"Making an update here to understand the potential next steps.\r\nSo I think we agree that:\r\n\r\n1) if you configure a StrField in the QF and you configure sow=false, currently the parameter is ignored, you split by whitespace and you don't match your multi terms (it is like we use a query time tokenization, not in line with the expected invisible query time keyword tokenization of the StrField.) This is incorrect and gets you zero results when you shouldn't\r\n\r\n2) the StrField instance of condition is not a solution you like, so we won't approve the pull request in the current state, N.B. I am completely fine with this. My objective here is to solve a problem, I am not in love with any specific solution.\r\n\r\nSo next steps:\r\n\r\n3) it seems we want to \"discourage\" the usage of StrField in QF with an inconsistent behaviour (in comparison with a text field with the same keyword tokenization analysis). Should we then explicitly raise an error if the user passes a StrField (maybe all non-textual fields) in QF?\r\n\r\nOR\r\n\r\n4) should we remove the StrField type completely? we can leave the schema.xml back-compatible, but always use text fields for textual information server-side (I think it's the same approach that Elasticsearch uses and it makes sense to me)\r\n\r\nOR\r\n\r\n5) just ignore this issue? I am not a fan of this\r\n\r\nOR\r\n\r\n6) any other idea? super happy to explore other options","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857805113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857888127","html_url":"https://github.com/apache/solr/pull/129#issuecomment-857888127","issue_url":"https://api.github.com/repos/apache/solr/issues/129","id":857888127,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Nzg4ODEyNw==","user":{"login":"magibney","id":6225104,"node_id":"MDQ6VXNlcjYyMjUxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6225104?v=4","gravatar_id":"","url":"https://api.github.com/users/magibney","html_url":"https://github.com/magibney","followers_url":"https://api.github.com/users/magibney/followers","following_url":"https://api.github.com/users/magibney/following{/other_user}","gists_url":"https://api.github.com/users/magibney/gists{/gist_id}","starred_url":"https://api.github.com/users/magibney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magibney/subscriptions","organizations_url":"https://api.github.com/users/magibney/orgs","repos_url":"https://api.github.com/users/magibney/repos","events_url":"https://api.github.com/users/magibney/events{/privacy}","received_events_url":"https://api.github.com/users/magibney/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T17:25:04Z","updated_at":"2021-06-09T17:25:04Z","author_association":"CONTRIBUTOR","body":">This is incorrect and gets you zero results when you shouldn't\r\n\r\nI'll acknowledge that the current behavior seems \"incorrect\" in principle to me (though just as incorrect for numeric fields). In terms of practical use cases, the current behavior strikes me as highly unusual -- but frankly no _more_ unusual than if the behavior were to be changed to respect `sow=false`. Perhaps I'm being closed-minded in thinking that what's \"incorrect\" is the config itself -- but before declaring the config to be canonically \"incorrect\" (and disallowing it), I think an open-minded attempt to brainstorm possible use cases would be in order.\r\n\r\nThat's particularly the case because:\r\n\r\n1. The change in behavior would be dramatic (for anyone actually relying on this config); it's also worth noting that the current behavior is not newly introduced, and I'm not aware of any instances of users expressing confusion about it in the past (again to be clear, my initial inclination _is_ to consider `qf` against non-analyzed fields to be \"incorrect\" in principle) \r\n2. iiuc there'd be no way to migrate current behavior for anyone who wanted to preserve it\r\n3. There's currently a viable workaround (and a more \"search-idiomatic\" one at that, via KeywordTokenizer) for anyone who desires the proposed \"correct\" behavior.\r\n\r\nHmm... on second thought maybe wrt point 2:\r\n```xml\r\n<analyzer type=\"index\">\r\n  [KeywordTokenizer]\r\n</analyzer>\r\n<analyzer type=\"query\">\r\n  [WhitespaceTokenizer]\r\n  ...\r\n</analyzer>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857888127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857896432","html_url":"https://github.com/apache/solr/pull/129#issuecomment-857896432","issue_url":"https://api.github.com/repos/apache/solr/issues/129","id":857896432,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Nzg5NjQzMg==","user":{"login":"alessandrobenedetti","id":513195,"node_id":"MDQ6VXNlcjUxMzE5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/513195?v=4","gravatar_id":"","url":"https://api.github.com/users/alessandrobenedetti","html_url":"https://github.com/alessandrobenedetti","followers_url":"https://api.github.com/users/alessandrobenedetti/followers","following_url":"https://api.github.com/users/alessandrobenedetti/following{/other_user}","gists_url":"https://api.github.com/users/alessandrobenedetti/gists{/gist_id}","starred_url":"https://api.github.com/users/alessandrobenedetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alessandrobenedetti/subscriptions","organizations_url":"https://api.github.com/users/alessandrobenedetti/orgs","repos_url":"https://api.github.com/users/alessandrobenedetti/repos","events_url":"https://api.github.com/users/alessandrobenedetti/events{/privacy}","received_events_url":"https://api.github.com/users/alessandrobenedetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T17:35:24Z","updated_at":"2021-06-09T17:36:43Z","author_association":"CONTRIBUTOR","body":"> iiuc there'd be no way to migrate current behavior for anyone who wanted to preserve it\r\n\r\nMmmm if you want to split on whitespace for a field in QF that is a StrField, you can just use sow=true.\r\nI am not suggesting we should remove sow=true for StrFields, the objective here is to fix sow=false.\r\n\r\nThe reason I am saying that currently in my opinion we have a problem is that if you do:\r\nGiven q=<term1 term2>\r\n**sow=true**  -> StrField:term1 StrField:term2\r\n**sow=false**  -> StrField:term1 StrField:term2\r\n\r\nAs a user (my personal idea) if I set a StrFIeld in QF and set sow=false, I am relying on the query time tokenization approach of my QF fields (and query time tokenization approach for a StrField is \"not to tokenize at all\")\r\nSo if I have multi terms in the index for my StrField e.g. StrField: \"term1 term2\", currently I am unable to search for them both using sow=true or sow=false.\r\n\r\nOn the other hand if I have in my index [Doc1 StrField:\"term1\"]  [Doc2 StrField:\"term2\"], for the query \"term1 term2\" I'll make sure to configure my sow=true.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857896432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/857928192","html_url":"https://github.com/apache/solr/pull/129#issuecomment-857928192","issue_url":"https://api.github.com/repos/apache/solr/issues/129","id":857928192,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzkyODE5Mg==","user":{"login":"magibney","id":6225104,"node_id":"MDQ6VXNlcjYyMjUxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6225104?v=4","gravatar_id":"","url":"https://api.github.com/users/magibney","html_url":"https://github.com/magibney","followers_url":"https://api.github.com/users/magibney/followers","following_url":"https://api.github.com/users/magibney/following{/other_user}","gists_url":"https://api.github.com/users/magibney/gists{/gist_id}","starred_url":"https://api.github.com/users/magibney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magibney/subscriptions","organizations_url":"https://api.github.com/users/magibney/orgs","repos_url":"https://api.github.com/users/magibney/repos","events_url":"https://api.github.com/users/magibney/events{/privacy}","received_events_url":"https://api.github.com/users/magibney/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T18:07:51Z","updated_at":"2021-06-09T18:07:51Z","author_association":"CONTRIBUTOR","body":"I'm talking about preserving existing behavior for `sow=false` (the behavior that you -- and I, in fact -- are considering \"incorrect\" in principle). For better or worse, anyone who's currently using this config (if there is any such user) is using it with the current anomalous behavior of StrField and `sow=false`); so fixing this, even _if_ it's the \"correct\" thing to do, is likely to break any such configs \"in the wild\". In any event I think my postscript pseudocode-analysis-config probably obviates concern about there being no migration path to support existing behavior.\r\n\r\n>As a user (my personal idea) ...\r\n\r\nUnderstood! I don't require convincing that this is a problem, in principle. My personal expectation would be the same as yours, fwiw. All I'm suggesting (in considering a practical path forward) is to play the devil's advocate by sympathetically considering the alternate perspective; what use cases will be _broken_ by this change? I'm not even necessarily suggesting to _avoid_ breaking those use cases, but simply to be aware of them and proceed with caution, weighing the inertia of existing configs, and the oddness of configuring StrField `qf` under any circumstances.\r\n\r\nI think either behavior is achievable under either implementation; so the question is whether the current behavior is objectively wrong enough to warrant a breaking change.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/857928192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858194341","html_url":"https://github.com/apache/solr/pull/168#issuecomment-858194341","issue_url":"https://api.github.com/repos/apache/solr/issues/168","id":858194341,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODE5NDM0MQ==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T00:41:13Z","updated_at":"2021-06-10T00:41:13Z","author_association":"CONTRIBUTOR","body":"Alternatively, we could have `PKIAuthenticationPlugin` just set the server token header for all server threads and do away with the flag I added to `SolrRequestInfo` ... this actually makes more sense to me than the current logic of preferring the Principal from `SolrRequestInfo` but I'm not sure if there is logic that depends on that? ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858194341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858508055","html_url":"https://github.com/apache/solr/pull/139#issuecomment-858508055","issue_url":"https://api.github.com/repos/apache/solr/issues/139","id":858508055,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODUwODA1NQ==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T10:30:44Z","updated_at":"2021-06-10T10:30:44Z","author_association":"CONTRIBUTOR","body":"> BUILD SUCCESSFUL in 36m 16s\r\nI'll merge this now","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858508055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858536956","html_url":"https://github.com/apache/solr/pull/151#issuecomment-858536956","issue_url":"https://api.github.com/repos/apache/solr/issues/151","id":858536956,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODUzNjk1Ng==","user":{"login":"tomglk","id":58065733,"node_id":"MDQ6VXNlcjU4MDY1NzMz","avatar_url":"https://avatars.githubusercontent.com/u/58065733?v=4","gravatar_id":"","url":"https://api.github.com/users/tomglk","html_url":"https://github.com/tomglk","followers_url":"https://api.github.com/users/tomglk/followers","following_url":"https://api.github.com/users/tomglk/following{/other_user}","gists_url":"https://api.github.com/users/tomglk/gists{/gist_id}","starred_url":"https://api.github.com/users/tomglk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomglk/subscriptions","organizations_url":"https://api.github.com/users/tomglk/orgs","repos_url":"https://api.github.com/users/tomglk/repos","events_url":"https://api.github.com/users/tomglk/events{/privacy}","received_events_url":"https://api.github.com/users/tomglk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T11:20:19Z","updated_at":"2021-06-10T11:20:19Z","author_association":"CONTRIBUTOR","body":"Hi @cpoerschke ,\r\nthe originalScore really is a hard nut to crack.\r\n\r\nWe have a **very rough** first draw of a possible solution and created a draft PR ( https://github.com/apache/solr/pull/171 ) which is based upon the code from this PR.\r\nThere is still some stuff that does not work but maybe you can generate some ideas from the current WIP.\r\n\r\nApart from that we would continue with the scope of only fixing the sort now. Starting with applying you suggestion.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858536956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858723781","html_url":"https://github.com/apache/solr/pull/120#issuecomment-858723781","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":858723781,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODcyMzc4MQ==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T15:32:28Z","updated_at":"2021-06-10T15:32:28Z","author_association":"CONTRIBUTOR","body":"> if we go the path of using the BlobRepository abstraction, the ultimate goal would be to have it be a separate unit\r\n\r\n:+1:  I was assuming a different structure, or maybe reading too much into the current structure of the WIP, but this makes a lot of sense and would do a lot to alleviate both the classpath and documentation concerns I had in mind previously.  Of the specific implementations you mentioned, I'm partial to (2) as it seems like a nice middle ground between (1) and (3).  It also seems like the approach that'd make it easiest for a user to use BlobRepository in writing their own plugin.  But admittedly that's a bit handwavy.  Do you have a preference among those options or see other pros/cons there?\r\n\r\n> it's right on the edge of \"are we over-architecting this?\". It would of course help to have a third blob client (Azure?)\r\n\r\nThat's definitely the question.  I lean I think towards skipping the abstraction until we're in a situation where its value is more clear cut.  If someone adds an Azure store next year and more repeated bits of code crop up, we can always add the middle-layer in at that point.  But that's just my leaning - if you guys are confident that it'll be better to leave it in, I'm happy to go with that.  The BlobIndexInput question might shed light on this too.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858723781/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858730924","html_url":"https://github.com/apache/solr/pull/111#issuecomment-858730924","issue_url":"https://api.github.com/repos/apache/solr/issues/111","id":858730924,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODczMDkyNA==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T15:41:41Z","updated_at":"2021-06-10T15:41:41Z","author_association":"CONTRIBUTOR","body":"Thanks for the review Mike but I'm a bit paused on this.  I posted an update: https://issues.apache.org/jira/browse/SOLR-14164?focusedCommentId=17361036&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17361036","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858730924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858744198","html_url":"https://github.com/apache/solr/pull/120#issuecomment-858744198","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":858744198,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODc0NDE5OA==","user":{"login":"HoustonPutman","id":3376422,"node_id":"MDQ6VXNlcjMzNzY0MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3376422?v=4","gravatar_id":"","url":"https://api.github.com/users/HoustonPutman","html_url":"https://github.com/HoustonPutman","followers_url":"https://api.github.com/users/HoustonPutman/followers","following_url":"https://api.github.com/users/HoustonPutman/following{/other_user}","gists_url":"https://api.github.com/users/HoustonPutman/gists{/gist_id}","starred_url":"https://api.github.com/users/HoustonPutman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HoustonPutman/subscriptions","organizations_url":"https://api.github.com/users/HoustonPutman/orgs","repos_url":"https://api.github.com/users/HoustonPutman/repos","events_url":"https://api.github.com/users/HoustonPutman/events{/privacy}","received_events_url":"https://api.github.com/users/HoustonPutman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T15:57:45Z","updated_at":"2021-06-10T15:57:45Z","author_association":"CONTRIBUTOR","body":"> if we go the path of using the BlobRepository abstraction, the ultimate goal would be to have it be a separate unit\r\n\r\nI agree that (2) is the best option out of the 3.\r\n\r\n> That's definitely the question. I lean I think towards skipping the abstraction until we're in a situation where its value is more clear cut. If someone adds an Azure store next year and more repeated bits of code crop up, we can always add the middle-layer in at that point. But that's just my leaning - if you guys are confident that it'll be better to leave it in, I'm happy to go with that. The BlobIndexInput question might shed light on this too.\r\n\r\nI agree with Jason here as well.\r\n\r\nI might have missed something, but did you mention at some point that this `BlobRepository` abstraction code was also going to be used for the blob-replicas that we've heard so much about? Or would that use something completely separate?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858744198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858761267","html_url":"https://github.com/apache/solr/pull/170#issuecomment-858761267","issue_url":"https://api.github.com/repos/apache/solr/issues/170","id":858761267,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODc2MTI2Nw==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T16:19:32Z","updated_at":"2021-06-10T16:19:32Z","author_association":"CONTRIBUTOR","body":"@piuma Are there similar changes that we can should make for the windows side of things?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858761267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858766473","html_url":"https://github.com/apache/solr/pull/120#issuecomment-858766473","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":858766473,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODc2NjQ3Mw==","user":{"login":"psalagnac","id":82967811,"node_id":"MDQ6VXNlcjgyOTY3ODEx","avatar_url":"https://avatars.githubusercontent.com/u/82967811?v=4","gravatar_id":"","url":"https://api.github.com/users/psalagnac","html_url":"https://github.com/psalagnac","followers_url":"https://api.github.com/users/psalagnac/followers","following_url":"https://api.github.com/users/psalagnac/following{/other_user}","gists_url":"https://api.github.com/users/psalagnac/gists{/gist_id}","starred_url":"https://api.github.com/users/psalagnac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalagnac/subscriptions","organizations_url":"https://api.github.com/users/psalagnac/orgs","repos_url":"https://api.github.com/users/psalagnac/repos","events_url":"https://api.github.com/users/psalagnac/events{/privacy}","received_events_url":"https://api.github.com/users/psalagnac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T16:26:58Z","updated_at":"2021-06-10T16:26:58Z","author_association":"CONTRIBUTOR","body":"Thanks for all you feedback on this PR @gerlowskija \r\n\r\n> What distinguishes a few of the I/O classes in this PR (e.g. BlobIndexInput) from existing alternatives (e.g. BufferedChecksumIndexInput) that do similar things at a quick glance?\r\n\r\nAny implementation of `BackupRepository` requires a friendly `IndexInput` for method `openInput()`.\r\n\r\nThe two only things we have when working with S3 are an `InputStream` created by AWS client (so can't make much assumptions on its actual implementation) and the total file length. I haven't found any existing implementation of `IndexInput` in Solr codebase that would work with these two parameters only. Maybe there is one I missed, if so please point me to it.\r\n\r\nMy understanding is `BufferedChecksumIndexInput` requires a delegate `IndexInput` to access data.\r\n\r\nBTW, I just found a bug in your implementation of `IndexInput` for GCS backup repository. We had this similar bug happening in production environments with AWS client. I'm not sure about details of AWS client internals, but there is a buffer somewhere in the stack. Depending exactly on when you invoke `read()` on the input stream, the buffer may be full or partially full. But the read operation is non-blocking, so if the buffer has less data than you want to read, you only get what's already in the buffer. That's why checking returned number of read bytes was mandatory here. Since contract of `IndexInput` does not support reading less bytes that initially requires, I had to solve this with a retry loop.\r\n\r\nWith AWS, it happens for real. With GCP, it may be just theoretical? That may be some code to share between different blob implementations? 😄 \r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858766473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/858845521","html_url":"https://github.com/apache/solr/pull/172#issuecomment-858845521","issue_url":"https://api.github.com/repos/apache/solr/issues/172","id":858845521,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODg0NTUyMQ==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T17:59:15Z","updated_at":"2021-06-10T17:59:15Z","author_association":"CONTRIBUTOR","body":"LGTM.   How many other of these exist out there?   ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/858845521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859602284","html_url":"https://github.com/apache/solr/pull/170#issuecomment-859602284","issue_url":"https://api.github.com/repos/apache/solr/issues/170","id":859602284,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTYwMjI4NA==","user":{"login":"piuma","id":1147905,"node_id":"MDQ6VXNlcjExNDc5MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1147905?v=4","gravatar_id":"","url":"https://api.github.com/users/piuma","html_url":"https://github.com/piuma","followers_url":"https://api.github.com/users/piuma/followers","following_url":"https://api.github.com/users/piuma/following{/other_user}","gists_url":"https://api.github.com/users/piuma/gists{/gist_id}","starred_url":"https://api.github.com/users/piuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piuma/subscriptions","organizations_url":"https://api.github.com/users/piuma/orgs","repos_url":"https://api.github.com/users/piuma/repos","events_url":"https://api.github.com/users/piuma/events{/privacy}","received_events_url":"https://api.github.com/users/piuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T13:59:24Z","updated_at":"2021-06-11T13:59:24Z","author_association":"NONE","body":"@madrob I don't know because I don't use windows, sorry.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859602284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859636112","html_url":"https://github.com/apache/solr/pull/81#issuecomment-859636112","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":859636112,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTYzNjExMg==","user":{"login":"deep8476","id":75487220,"node_id":"MDQ6VXNlcjc1NDg3MjIw","avatar_url":"https://avatars.githubusercontent.com/u/75487220?v=4","gravatar_id":"","url":"https://api.github.com/users/deep8476","html_url":"https://github.com/deep8476","followers_url":"https://api.github.com/users/deep8476/followers","following_url":"https://api.github.com/users/deep8476/following{/other_user}","gists_url":"https://api.github.com/users/deep8476/gists{/gist_id}","starred_url":"https://api.github.com/users/deep8476/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deep8476/subscriptions","organizations_url":"https://api.github.com/users/deep8476/orgs","repos_url":"https://api.github.com/users/deep8476/repos","events_url":"https://api.github.com/users/deep8476/events{/privacy}","received_events_url":"https://api.github.com/users/deep8476/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T14:50:12Z","updated_at":"2021-06-11T14:50:12Z","author_association":"NONE","body":"Hello\n\nOn Fri, Jun 11, 2021, 7:42 PM Jason Gerlowski ***@***.***>\nwrote:\n\n> Merged #81 <https://github.com/apache/solr/pull/81> into main.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/solr/pull/81#event-4878251533>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AR75P5ECSJ2YZROWUYB3KF3TSIKS7ANCNFSM43E4YK4Q>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859636112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859667485","html_url":"https://github.com/apache/solr/pull/96#issuecomment-859667485","issue_url":"https://api.github.com/repos/apache/solr/issues/96","id":859667485,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTY2NzQ4NQ==","user":{"login":"wrunderwood","id":10732577,"node_id":"MDQ6VXNlcjEwNzMyNTc3","avatar_url":"https://avatars.githubusercontent.com/u/10732577?v=4","gravatar_id":"","url":"https://api.github.com/users/wrunderwood","html_url":"https://github.com/wrunderwood","followers_url":"https://api.github.com/users/wrunderwood/followers","following_url":"https://api.github.com/users/wrunderwood/following{/other_user}","gists_url":"https://api.github.com/users/wrunderwood/gists{/gist_id}","starred_url":"https://api.github.com/users/wrunderwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrunderwood/subscriptions","organizations_url":"https://api.github.com/users/wrunderwood/orgs","repos_url":"https://api.github.com/users/wrunderwood/repos","events_url":"https://api.github.com/users/wrunderwood/events{/privacy}","received_events_url":"https://api.github.com/users/wrunderwood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T15:39:19Z","updated_at":"2021-06-11T15:39:19Z","author_association":"CONTRIBUTOR","body":"Thanks for all the suggestions. I'll do some work on this and come back with a new PR.\r\n\r\n* Use SolrCoreAware.\r\n* Check input threshold values, the only reason this is usable is that they aren't checked.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859667485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859671978","html_url":"https://github.com/apache/solr/pull/96#issuecomment-859671978","issue_url":"https://api.github.com/repos/apache/solr/issues/96","id":859671978,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTY3MTk3OA==","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T15:46:37Z","updated_at":"2021-06-11T15:53:46Z","author_association":"CONTRIBUTOR","body":"> Thanks for all the suggestions. I'll do some work on this and come back with a new PR.\r\n> \r\n> * Use SolrCoreAware.\r\n> * Check input threshold values, the only reason this is usable is that they aren't checked.\r\n\r\nI am confused by your second point -- I thought your initial suggestion was that the threshold should be unbounded because the load average metric is unbounded (which is the case right now).\r\n\r\nSo what exactly are you proposing to check, please? I agree that checking that the value is greater than zero is valuable, but did you have anything else in mind?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859671978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859722702","html_url":"https://github.com/apache/solr/pull/96#issuecomment-859722702","issue_url":"https://api.github.com/repos/apache/solr/issues/96","id":859722702,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTcyMjcwMg==","user":{"login":"wrunderwood","id":10732577,"node_id":"MDQ6VXNlcjEwNzMyNTc3","avatar_url":"https://avatars.githubusercontent.com/u/10732577?v=4","gravatar_id":"","url":"https://api.github.com/users/wrunderwood","html_url":"https://github.com/wrunderwood","followers_url":"https://api.github.com/users/wrunderwood/followers","following_url":"https://api.github.com/users/wrunderwood/following{/other_user}","gists_url":"https://api.github.com/users/wrunderwood/gists{/gist_id}","starred_url":"https://api.github.com/users/wrunderwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrunderwood/subscriptions","organizations_url":"https://api.github.com/users/wrunderwood/orgs","repos_url":"https://api.github.com/users/wrunderwood/repos","events_url":"https://api.github.com/users/wrunderwood/events{/privacy}","received_events_url":"https://api.github.com/users/wrunderwood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T17:09:04Z","updated_at":"2021-06-11T17:09:04Z","author_association":"CONTRIBUTOR","body":"For the CPU and memory utilization circuit breakers, the valid range is 0.0 to 1.0. For the load average circuit breaker, the threshold needs to be greater than 0.0. Right now, the config could be \"-42\" and it would be accepted.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859722702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/859841902","html_url":"https://github.com/apache/solr/pull/81#issuecomment-859841902","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":859841902,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTg0MTkwMg==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-11T20:04:54Z","updated_at":"2021-06-11T20:04:54Z","author_association":"CONTRIBUTOR","body":"BTW I would have reviewed if you prompted me.  It was on the back of my mind already.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/859841902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860038881","html_url":"https://github.com/apache/solr/pull/169#issuecomment-860038881","issue_url":"https://api.github.com/repos/apache/solr/issues/169","id":860038881,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDAzODg4MQ==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-12T11:14:23Z","updated_at":"2021-06-12T11:16:49Z","author_association":"CONTRIBUTOR","body":"Strange, the [mark file as viewed](https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/reviewing-proposed-changes-in-a-pull-request#marking-a-file-as-viewed) functionality does not seem to work on this pull request for me though #165 has an even larger number of files i.e. that can't be the issue? Does anyone else experience the same here?\r\n\r\nedit: it works now, perhaps some cache warming needed to happen somewhere first, who knows.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860038881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860070086","html_url":"https://github.com/apache/solr/pull/81#issuecomment-860070086","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":860070086,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDA3MDA4Ng==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-12T15:39:41Z","updated_at":"2021-06-12T15:39:41Z","author_association":"CONTRIBUTOR","body":"In these source files, why did you declare constants like this:\r\n```\r\n  private static final String V2_SET_COLLECTION_PROPERTY_CMD = \"set-collection-property\";\r\n```\r\nReferenced _only_ in the command annotation:\r\n```\r\n  @Command(name = V2_SET_COLLECTION_PROPERTY_CMD)\r\n```\r\n\r\nI know many developers are advised to make constants for nearly everything but honestly I buck that trend -- it's needlessly indirect when used exactly once, thus making it take slightly longer to read code.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860070086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860093197","html_url":"https://github.com/apache/solr/pull/175#issuecomment-860093197","issue_url":"https://api.github.com/repos/apache/solr/issues/175","id":860093197,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDA5MzE5Nw==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-12T18:44:02Z","updated_at":"2021-06-12T18:44:02Z","author_association":"CONTRIBUTOR","body":"@joel-bernstein  Interestingly I couldn't make you an official reviewer in GitHub.  Any way, I think this PR fixes the issue.\r\n\r\nI ran the test with both seeds in https://issues.apache.org/jira/browse/SOLR-15406 and they passed.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860093197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860184768","html_url":"https://github.com/apache/solr/pull/17#issuecomment-860184768","issue_url":"https://api.github.com/repos/apache/solr/issues/17","id":860184768,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDE4NDc2OA==","user":{"login":"NazerkeBS","id":33206532,"node_id":"MDQ6VXNlcjMzMjA2NTMy","avatar_url":"https://avatars.githubusercontent.com/u/33206532?v=4","gravatar_id":"","url":"https://api.github.com/users/NazerkeBS","html_url":"https://github.com/NazerkeBS","followers_url":"https://api.github.com/users/NazerkeBS/followers","following_url":"https://api.github.com/users/NazerkeBS/following{/other_user}","gists_url":"https://api.github.com/users/NazerkeBS/gists{/gist_id}","starred_url":"https://api.github.com/users/NazerkeBS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NazerkeBS/subscriptions","organizations_url":"https://api.github.com/users/NazerkeBS/orgs","repos_url":"https://api.github.com/users/NazerkeBS/repos","events_url":"https://api.github.com/users/NazerkeBS/events{/privacy}","received_events_url":"https://api.github.com/users/NazerkeBS/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-13T10:01:18Z","updated_at":"2021-06-13T10:01:18Z","author_association":"CONTRIBUTOR","body":"I tested backward compatibility manually in my local env.\r\nInitially I started solr  `8.8.2` with embedded zk cluster and I created a collection with sample_techproducts_configs. Then I stopped solr. I restarted solr with 9.0 (PR branch). I observed that state.json is updated during restart. I also tested MODIFYCOLLECTION functionality. It seems it is working.\r\n\r\nI used these commands: \r\n```\r\ndocker run -v \"$PWD/solrdata:/var/solr\" -p 8983:8983 solr:8.8.2 -c\r\n\r\ndocker run -v \"$PWD/solrdata:/var/solr\" -p 8983:8983 apache/solr:9.0.0-SNAPSHOT -c\r\n\r\nbin/solr create -c solr8 -d server/solr/configsets/sample_techproducts_configs/conf/\r\n\r\nbin/solr zk upconfig -d server/solr/configsets/sample_techproducts_configs/conf/ -n test -z localhost:9983\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860184768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860246850","html_url":"https://github.com/apache/solr/pull/166#issuecomment-860246850","issue_url":"https://api.github.com/repos/apache/solr/issues/166","id":860246850,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDI0Njg1MA==","user":{"login":"tomglk","id":58065733,"node_id":"MDQ6VXNlcjU4MDY1NzMz","avatar_url":"https://avatars.githubusercontent.com/u/58065733?v=4","gravatar_id":"","url":"https://api.github.com/users/tomglk","html_url":"https://github.com/tomglk","followers_url":"https://api.github.com/users/tomglk/followers","following_url":"https://api.github.com/users/tomglk/following{/other_user}","gists_url":"https://api.github.com/users/tomglk/gists{/gist_id}","starred_url":"https://api.github.com/users/tomglk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomglk/subscriptions","organizations_url":"https://api.github.com/users/tomglk/orgs","repos_url":"https://api.github.com/users/tomglk/repos","events_url":"https://api.github.com/users/tomglk/events{/privacy}","received_events_url":"https://api.github.com/users/tomglk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-13T17:44:37Z","updated_at":"2021-06-20T08:29:08Z","author_association":"CONTRIBUTOR","body":"Hi @cpoerschke ,\r\nrereading our conversation over the last two days made clear that we have quite some open constructions sites.\r\nTo not lose the overview about them (especially with a likely break from my side due to the upcoming Buzzwords) I want to put a summary of possible next steps and questions here:\r\n- [ ] do we want to collect the prefetchFields after creating the weights instead of on the feature-level?\r\n    * concurrency vs. collecting more often\r\n- [X] remove the \"disablePrefetchingFieldValueFeature\" parameter ( 81a5c67 )\r\n    * add try-catch with single field to `score()`?\r\n        * if yes, then log error instead of warning?\r\n    *  **added try-catch with error logging**\r\n- [X] use sorted set for prefetchFields ( d0520a9 )\r\n- [ ] come to a decision regarding options to exclude / include fields\r\n    * do we want that?\r\n        * if yes, how (parameter in json / something per query)\r\n    * **proposed solution / answer**: No. This could be an additional feature that users can implement (like your outline here https://github.com/apache/solr/pull/166#discussion_r648536798 ) but I would exclude it from this feature because we do not have clear use cases yet","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860246850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860611843","html_url":"https://github.com/apache/solr/pull/81#issuecomment-860611843","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":860611843,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDYxMTg0Mw==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T11:29:35Z","updated_at":"2021-06-14T13:53:24Z","author_association":"CONTRIBUTOR","body":"> BTW I would have reviewed if you prompted me. It was on the back of my mind already.\r\n\r\nOh, my bad.  I thought about pinging you, but didn't want to be a bother (I'd tagged you once already in a recent comment, and didn't want to push it.)  It's never too late though - if there's anything you're particularly concerned about lmk and I can take a look.\r\n\r\n> In these source files, why did you declare constants ... Referenced only in the command annotation\r\n\r\nThere's only one usage _right now_, but there's likely to be other places where this string will be used eventually as v2 support progresses.  Additional tests might use it, SolrJ will need to use it to make v2 requests at some point, etc.  So to the extent I thought about it at all, that was probably my motivation.  If you know for certain that something will only ever be used once - definitely agree the constant is useless.  But in practice I rarely ever feel like I _know_ that, and in this case there's particular reason to expect additional usages in the future.\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860611843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860783598","html_url":"https://github.com/apache/solr/pull/176#issuecomment-860783598","issue_url":"https://api.github.com/repos/apache/solr/issues/176","id":860783598,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDc4MzU5OA==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T15:36:31Z","updated_at":"2021-06-14T15:36:31Z","author_association":"CONTRIBUTOR","body":"I'm having trouble understanding how this is used in practice, can you add a unit test showing an example override implementation?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860783598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860787505","html_url":"https://github.com/apache/solr/pull/176#issuecomment-860787505","issue_url":"https://api.github.com/repos/apache/solr/issues/176","id":860787505,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDc4NzUwNQ==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T15:41:43Z","updated_at":"2021-06-14T15:41:43Z","author_association":"CONTRIBUTOR","body":"> I'm having trouble understanding how this is used in practice, can you add a unit test showing an example override implementation?\r\n\r\nI've placed use illustrations on the JIRA ticket, does that help? That's not to say we can't have unit test coverage too of course.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860787505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860826448","html_url":"https://github.com/apache/solr/pull/53#issuecomment-860826448","issue_url":"https://api.github.com/repos/apache/solr/issues/53","id":860826448,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDgyNjQ0OA==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T16:37:52Z","updated_at":"2021-06-14T16:37:52Z","author_association":"CONTRIBUTOR","body":"@asalamon74 can you file a SOLR JIRA issue for this? It looks like this is based on some other internal tracker.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860826448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860828797","html_url":"https://github.com/apache/solr/pull/90#issuecomment-860828797","issue_url":"https://api.github.com/repos/apache/solr/issues/90","id":860828797,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDgyODc5Nw==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T16:41:24Z","updated_at":"2021-06-14T16:41:24Z","author_association":"CONTRIBUTOR","body":"@epugh Do you want to merge this?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860828797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860832769","html_url":"https://github.com/apache/solr/pull/90#issuecomment-860832769","issue_url":"https://api.github.com/repos/apache/solr/issues/90","id":860832769,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDgzMjc2OQ==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T16:47:33Z","updated_at":"2021-06-14T16:47:33Z","author_association":"CONTRIBUTOR","body":"> @epugh Do you want to merge this?\r\n\r\nThanks for the ping.   I'll go ahead and do one more look and then merge it.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860832769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860837631","html_url":"https://github.com/apache/solr/pull/176#issuecomment-860837631","issue_url":"https://api.github.com/repos/apache/solr/issues/176","id":860837631,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDgzNzYzMQ==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T16:54:57Z","updated_at":"2021-06-14T16:54:57Z","author_association":"CONTRIBUTOR","body":"> I've placed use illustrations on the JIRA ticket, does that help? That's not to say we can't have unit test coverage too of course.\r\n\r\nYea, those are helpful. Test coverage will be more discoverable for some people, I think.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860837631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/860850526","html_url":"https://github.com/apache/solr/pull/81#issuecomment-860850526","issue_url":"https://api.github.com/repos/apache/solr/issues/81","id":860850526,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MDg1MDUyNg==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T17:13:49Z","updated_at":"2021-06-14T17:13:49Z","author_association":"CONTRIBUTOR","body":"Ok that's fine.\r\n\r\nBTW this PR is just awesomeness!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/860850526/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/861504856","html_url":"https://github.com/apache/solr/pull/20#issuecomment-861504856","issue_url":"https://api.github.com/repos/apache/solr/issues/20","id":861504856,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MTUwNDg1Ng==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-15T13:36:49Z","updated_at":"2021-06-15T13:36:49Z","author_association":"CONTRIBUTOR","body":"+1 LGTM.  But I don't think we want to merge to main; I think we want to stay on a branch.  AFAIK BlobDirectory is merely unit tested, nothing more.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/861504856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/862293819","html_url":"https://github.com/apache/solr/pull/53#issuecomment-862293819","issue_url":"https://api.github.com/repos/apache/solr/issues/53","id":862293819,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjI5MzgxOQ==","user":{"login":"asalamon74","id":13440318,"node_id":"MDQ6VXNlcjEzNDQwMzE4","avatar_url":"https://avatars.githubusercontent.com/u/13440318?v=4","gravatar_id":"","url":"https://api.github.com/users/asalamon74","html_url":"https://github.com/asalamon74","followers_url":"https://api.github.com/users/asalamon74/followers","following_url":"https://api.github.com/users/asalamon74/following{/other_user}","gists_url":"https://api.github.com/users/asalamon74/gists{/gist_id}","starred_url":"https://api.github.com/users/asalamon74/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asalamon74/subscriptions","organizations_url":"https://api.github.com/users/asalamon74/orgs","repos_url":"https://api.github.com/users/asalamon74/repos","events_url":"https://api.github.com/users/asalamon74/events{/privacy}","received_events_url":"https://api.github.com/users/asalamon74/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T11:16:59Z","updated_at":"2021-06-16T11:16:59Z","author_association":"CONTRIBUTOR","body":"@madrob  Oops, I mixed up the jira numbers, thanks for pointing out. I fixed it, it's https://issues.apache.org/jira/browse/SOLR-15301 ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/862293819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/862644791","html_url":"https://github.com/apache/solr/pull/120#issuecomment-862644791","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":862644791,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjY0NDc5MQ==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-16T19:13:07Z","updated_at":"2021-06-16T19:19:55Z","author_association":"CONTRIBUTOR","body":"Thanks for the clarification @psalagnac. I'll summarize your points to make sure I've got the right idea:\r\n\r\n`BlobIndexInput` really serves two purposes.  First there were no other reusable `IndexInput`s that wrap an `InputStream` (which is what the AWS client provides for reading).  Second it builds in an extra retry loop to address the bug you described where IndexInput's contract declares that it reads N bytes, but `InputStream` may or may not provide that many in a single call depending on timing and internal buffering.\r\n\r\nIf I've got all that right, then I'm 👍 on keeping it around.  Though maybe it should be renamed to remove the suggestion that the class is blob-specific in some way.  (AFAICT it's equally useful whether you're wrapping a S3InputStream or a StringBufferInputStream, unless I'm missing something?)\r\n\r\n> I just found a bug in your implementation of IndexInput for GCS backup repository...I'm not sure about details of AWS client internals, but there is a buffer somewhere in the stack...With GCP, it may be just theoretical?\r\n\r\nGood catch!  As I understand your description - this bug requires (1) buffering somewhere in the stack underlying the InputStream and (2) non-blocking reads from that InputStream.  I'll take a look and see whether the GCS code \"checks\" both of those boxes, unless you've already done that yourself and seen that it does?\r\n\r\n> The BlobIndexInput question might shed light on this [i.e. whether to include the BlobBackupRepository abstraction] too.\r\n\r\nI raised this possibility in my previous comment, and I think I _am_ sold on BlobIndexInput's necessity, but I still lean towards skipping the BlobBackupRepository abstraction for now.  (Just wanted to close the loop there.)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/862644791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/863548812","html_url":"https://github.com/apache/solr/pull/181#issuecomment-863548812","issue_url":"https://api.github.com/repos/apache/solr/issues/181","id":863548812,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MzU0ODgxMg==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-17T20:39:15Z","updated_at":"2021-06-17T20:39:15Z","author_association":"CONTRIBUTOR","body":"Still thinking about the caching of schema info here ...","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/863548812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/863742745","html_url":"https://github.com/apache/solr/pull/181#issuecomment-863742745","issue_url":"https://api.github.com/repos/apache/solr/issues/181","id":863742745,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mzc0Mjc0NQ==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-18T04:17:09Z","updated_at":"2021-06-18T04:17:09Z","author_association":"CONTRIBUTOR","body":"I think this conflicts with #177 can you and Mark chat about the proper implementation of `toSolrLiteral`/`translateTerms`","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/863742745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/863981291","html_url":"https://github.com/apache/solr/pull/182#issuecomment-863981291","issue_url":"https://api.github.com/repos/apache/solr/issues/182","id":863981291,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mzk4MTI5MQ==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-18T11:50:55Z","updated_at":"2021-06-18T11:50:55Z","author_association":"CONTRIBUTOR","body":"Or do you think it would be cleaner to create one test class per test-case, and let the cluster init + cleanup happen as usual? I didn't want to create so many new test-classes, but perhaps they could be inner classes, I don't know...","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/863981291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/864177730","html_url":"https://github.com/apache/solr/pull/169#issuecomment-864177730","issue_url":"https://api.github.com/repos/apache/solr/issues/169","id":864177730,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NDE3NzczMA==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-18T17:21:14Z","updated_at":"2021-06-18T17:21:14Z","author_association":"CONTRIBUTOR","body":"> Conflicting files solr/core/src/test/org/apache/solr/handler/TestSQLHandler.java\r\n\r\nIt seems this is only due to reformatting i.e. not a real conflict, will try to resolve.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/864177730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/864225607","html_url":"https://github.com/apache/solr/pull/166#issuecomment-864225607","issue_url":"https://api.github.com/repos/apache/solr/issues/166","id":864225607,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NDIyNTYwNw==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-18T19:08:33Z","updated_at":"2021-06-18T19:08:33Z","author_association":"CONTRIBUTOR","body":"> ... summary of possible next steps and questions ...\r\n\r\nSplendid idea, thanks for adding it!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/864225607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/865170048","html_url":"https://github.com/apache/solr/pull/169#issuecomment-865170048","issue_url":"https://api.github.com/repos/apache/solr/issues/169","id":865170048,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTE3MDA0OA==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-21T16:18:49Z","updated_at":"2021-06-21T16:18:49Z","author_association":"CONTRIBUTOR","body":"> (and I hope you don't mind me adding commits directly to the pull request branch)\r\n\r\nNot at all, and thank you!\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/865170048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/865195272","html_url":"https://github.com/apache/solr/pull/181#issuecomment-865195272","issue_url":"https://api.github.com/repos/apache/solr/issues/181","id":865195272,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTE5NTI3Mg==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-21T16:58:44Z","updated_at":"2021-06-21T16:58:44Z","author_association":"CONTRIBUTOR","body":"@markrmiller I decided to remove the Cache for luke responses from this PR for now. I like your idea about pushing cache support into the LukeRequestHandler, but think that should be tackled in a separate PR. For this PR, I'm not all that convinced caching would even buy us much given requests to the `/sql` handler would be load-balanced, so unlikely to see enough cache hits to justify the added code complexity of ensuring the cached field / field type info isn't stale. ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/865195272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/865196735","html_url":"https://github.com/apache/solr/pull/181#issuecomment-865196735","issue_url":"https://api.github.com/repos/apache/solr/issues/181","id":865196735,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTE5NjczNQ==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-21T17:01:03Z","updated_at":"2021-06-21T17:01:03Z","author_association":"CONTRIBUTOR","body":"> I think this conflicts with #177 can you and Mark chat about the proper implementation of `toSolrLiteral`/`translateTerms`\r\n\r\n@markrmiller I think this PR will get merged before your upgrade ... once you merge in my changes here, you can drop the `translateTerms` call and just use my changes as I switched to calling `getValue2()` as you're doing in your PR ... thanks for catching this @madrob ;-)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/865196735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/865387090","html_url":"https://github.com/apache/solr/pull/177#issuecomment-865387090","issue_url":"https://api.github.com/repos/apache/solr/issues/177","id":865387090,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTM4NzA5MA==","user":{"login":"markrmiller","id":448788,"node_id":"MDQ6VXNlcjQ0ODc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/448788?v=4","gravatar_id":"","url":"https://api.github.com/users/markrmiller","html_url":"https://github.com/markrmiller","followers_url":"https://api.github.com/users/markrmiller/followers","following_url":"https://api.github.com/users/markrmiller/following{/other_user}","gists_url":"https://api.github.com/users/markrmiller/gists{/gist_id}","starred_url":"https://api.github.com/users/markrmiller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markrmiller/subscriptions","organizations_url":"https://api.github.com/users/markrmiller/orgs","repos_url":"https://api.github.com/users/markrmiller/repos","events_url":"https://api.github.com/users/markrmiller/events{/privacy}","received_events_url":"https://api.github.com/users/markrmiller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-21T22:31:14Z","updated_at":"2021-06-21T22:31:14Z","author_association":"MEMBER","body":"Merging up had brought up another 3-4 failing tests that I'm looking at.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/865387090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/865427745","html_url":"https://github.com/apache/solr/pull/177#issuecomment-865427745","issue_url":"https://api.github.com/repos/apache/solr/issues/177","id":865427745,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTQyNzc0NQ==","user":{"login":"markrmiller","id":448788,"node_id":"MDQ6VXNlcjQ0ODc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/448788?v=4","gravatar_id":"","url":"https://api.github.com/users/markrmiller","html_url":"https://github.com/markrmiller","followers_url":"https://api.github.com/users/markrmiller/followers","following_url":"https://api.github.com/users/markrmiller/following{/other_user}","gists_url":"https://api.github.com/users/markrmiller/gists{/gist_id}","starred_url":"https://api.github.com/users/markrmiller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markrmiller/subscriptions","organizations_url":"https://api.github.com/users/markrmiller/orgs","repos_url":"https://api.github.com/users/markrmiller/repos","events_url":"https://api.github.com/users/markrmiller/events{/privacy}","received_events_url":"https://api.github.com/users/markrmiller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-22T00:11:09Z","updated_at":"2021-06-22T00:11:09Z","author_association":"MEMBER","body":"I'm getting around most of the new issues using RexUtil.expandSearch. Looks like the new In and Between stuff is returning a SEARCH SQL kind and this translates back to the expected. The final test in the Between test case still failing though.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/865427745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/866771426","html_url":"https://github.com/apache/solr/pull/187#issuecomment-866771426","issue_url":"https://api.github.com/repos/apache/solr/issues/187","id":866771426,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njc3MTQyNg==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T11:54:08Z","updated_at":"2021-06-23T11:54:08Z","author_association":"CONTRIBUTOR","body":"Why can't we use 127.0.0.1 instead of a hostname? The certificate could also be issued for that one.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/866771426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/866774375","html_url":"https://github.com/apache/solr/pull/187#issuecomment-866774375","issue_url":"https://api.github.com/repos/apache/solr/issues/187","id":866774375,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njc3NDM3NQ==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T11:58:58Z","updated_at":"2021-06-23T11:58:58Z","author_association":"CONTRIBUTOR","body":"> Why can't we use 127.0.0.1 instead of a hostname? The certificate could also be issued for that one.\r\n\r\nSorry ignore this. See my comment in issue. I'd add all possible hostnames to the test certificate.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/866774375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/866942871","html_url":"https://github.com/apache/solr/pull/188#issuecomment-866942871","issue_url":"https://api.github.com/repos/apache/solr/issues/188","id":866942871,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njk0Mjg3MQ==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T15:34:38Z","updated_at":"2021-06-23T15:35:01Z","author_association":"CONTRIBUTOR","body":"<img width=\"584\" alt=\"Screen Shot 2021-06-23 at 9 16 56 AM\" src=\"https://user-images.githubusercontent.com/417074/123125955-38a28780-d406-11eb-9943-999cf222a58e.png\">\r\nreplica n8 and n1 are the leaders.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/866942871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/866998624","html_url":"https://github.com/apache/solr/pull/177#issuecomment-866998624","issue_url":"https://api.github.com/repos/apache/solr/issues/177","id":866998624,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njk5ODYyNA==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T16:47:02Z","updated_at":"2021-06-23T16:47:02Z","author_association":"CONTRIBUTOR","body":"The test failure is because Calcite's expression reducer rules is removing the second part of the AND statement b/c it looks unnecessary to Calcite. From the debug:\r\n```\r\nrel#718:LogicalFilter.NONE.[](input=RelSubset#699,condition==(CAST($0):VARCHAR, 'XXXX'))\r\n                  call#7692 rule [ReduceExpressionsRule(Filter)]\r\n                    rel#700:LogicalFilter.NONE.[](input=RelSubset#699,condition=AND(=(CAST($0):VARCHAR, 'XXXX'), <>(CAST($0):VARCHAR, 'XXXY')))\r\n                      no parent\r\n```\r\nSee how the expression gets \"reduced\" to `(CAST($0):VARCHAR, 'XXXX'))`. This is because Calcite doesn't know about search engine semantics. Personally, I think the issue here is mapping the `=` operator to a term match in an analyzed text field vs. real equality.\r\n\r\nThese changes fix the breakage:\r\n```\r\ndiff --git a/solr/core/src/test/org/apache/solr/handler/TestSQLHandler.java b/solr/core/src/test/org/apache/solr/handler/TestSQLHandler.java\r\nindex 60990c07e19..5a1f9c4a1fa 100644\r\n--- a/solr/core/src/test/org/apache/solr/handler/TestSQLHandler.java\r\n+++ b/solr/core/src/test/org/apache/solr/handler/TestSQLHandler.java\r\n@@ -1167,7 +1167,7 @@ public class TestSQLHandler extends SolrCloudTestCase {\r\n \r\n     sParams = mapParams(CommonParams.QT, \"/sql\", \"aggregationMode\", \"facet\",\r\n         \"stmt\", \"select str_s, count(*), sum(field_i), min(field_i), max(field_i), \"\r\n-            + \"cast(avg(1.0 * field_i) as float) from collection1 where (text_t='XXXX' AND NOT (text_t='XXXY')) \"\r\n+            + \"cast(avg(1.0 * field_i) as float) from collection1 where (text_t LIKE 'XXXX' AND NOT (text_t LIKE 'XXXY')) \"\r\n             + \"group by str_s order by str_s desc\");\r\n \r\n     tuples = getTuples(sParams, baseUrl);\r\n@@ -1203,7 +1203,7 @@ public class TestSQLHandler extends SolrCloudTestCase {\r\n \r\n     sParams = mapParams(CommonParams.QT, \"/sql\", \"aggregationMode\", \"facet\",\r\n         \"stmt\", \"select str_s as myString, count(*), sum(field_i) as mySum, min(field_i), max(field_i), \"\r\n-            + \"cast(avg(1.0 * field_i) as float) from collection1 where (text_t='XXXX' AND NOT (text_t='XXXY')) \"\r\n+            + \"cast(avg(1.0 * field_i) as float) from collection1 where (text_t LIKE 'XXXX' AND NOT (text_t LIKE 'XXXY')) \"\r\n             + \"group by str_s order by myString desc\");\r\n \r\n     tuples = getTuples(sParams, baseUrl);\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/866998624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/867027268","html_url":"https://github.com/apache/solr/pull/167#issuecomment-867027268","issue_url":"https://api.github.com/repos/apache/solr/issues/167","id":867027268,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzAyNzI2OA==","user":{"login":"ctargett","id":450148,"node_id":"MDQ6VXNlcjQ1MDE0OA==","avatar_url":"https://avatars.githubusercontent.com/u/450148?v=4","gravatar_id":"","url":"https://api.github.com/users/ctargett","html_url":"https://github.com/ctargett","followers_url":"https://api.github.com/users/ctargett/followers","following_url":"https://api.github.com/users/ctargett/following{/other_user}","gists_url":"https://api.github.com/users/ctargett/gists{/gist_id}","starred_url":"https://api.github.com/users/ctargett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctargett/subscriptions","organizations_url":"https://api.github.com/users/ctargett/orgs","repos_url":"https://api.github.com/users/ctargett/repos","events_url":"https://api.github.com/users/ctargett/events{/privacy}","received_events_url":"https://api.github.com/users/ctargett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T17:31:48Z","updated_at":"2021-06-23T17:31:48Z","author_association":"CONTRIBUTOR","body":"I'm just going to go ahead with this without review, since it's holding me up from creating a PR for SOLR-14444.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/867027268/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/867033624","html_url":"https://github.com/apache/solr/pull/186#issuecomment-867033624","issue_url":"https://api.github.com/repos/apache/solr/issues/186","id":867033624,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzAzMzYyNA==","user":{"login":"erikhatcher","id":209189,"node_id":"MDQ6VXNlcjIwOTE4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/209189?v=4","gravatar_id":"","url":"https://api.github.com/users/erikhatcher","html_url":"https://github.com/erikhatcher","followers_url":"https://api.github.com/users/erikhatcher/followers","following_url":"https://api.github.com/users/erikhatcher/following{/other_user}","gists_url":"https://api.github.com/users/erikhatcher/gists{/gist_id}","starred_url":"https://api.github.com/users/erikhatcher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erikhatcher/subscriptions","organizations_url":"https://api.github.com/users/erikhatcher/orgs","repos_url":"https://api.github.com/users/erikhatcher/repos","events_url":"https://api.github.com/users/erikhatcher/events{/privacy}","received_events_url":"https://api.github.com/users/erikhatcher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-23T17:40:46Z","updated_at":"2021-06-23T17:40:46Z","author_association":"CONTRIBUTOR","body":"Looks good!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/867033624/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/867835788","html_url":"https://github.com/apache/solr/pull/190#issuecomment-867835788","issue_url":"https://api.github.com/repos/apache/solr/issues/190","id":867835788,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzgzNTc4OA==","user":{"login":"ctargett","id":450148,"node_id":"MDQ6VXNlcjQ1MDE0OA==","avatar_url":"https://avatars.githubusercontent.com/u/450148?v=4","gravatar_id":"","url":"https://api.github.com/users/ctargett","html_url":"https://github.com/ctargett","followers_url":"https://api.github.com/users/ctargett/followers","following_url":"https://api.github.com/users/ctargett/following{/other_user}","gists_url":"https://api.github.com/users/ctargett/gists{/gist_id}","starred_url":"https://api.github.com/users/ctargett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctargett/subscriptions","organizations_url":"https://api.github.com/users/ctargett/orgs","repos_url":"https://api.github.com/users/ctargett/repos","events_url":"https://api.github.com/users/ctargett/events{/privacy}","received_events_url":"https://api.github.com/users/ctargett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-24T17:51:29Z","updated_at":"2021-06-24T18:32:13Z","author_association":"CONTRIBUTOR","body":"> The -prerelease5 suffix should probably not be there (and will not either of course in the final release), not sure if it needs change.\r\n\r\nNo, they shouldn't need to change. The Lucene version comes from `versions.props` so when that's right for 9.0 it will be right in the 9.0 Ref Guide. This has been true forever - the URL is always wrong until the javadocs exist.\r\n\r\n> Here is the list of broken links\r\n\r\nI didn't change anything here, so presumably these are also all 40x in the current Ref Guide. I'm not sure how fixing them relates to approving the overall content re-organization? One could fix them all in the current Ref Guide in `main` right now, or pre-9.0 release, and in branch_8x, etc. (Edit to add: I did actually spot-check a couple from the 8.8 Guide and they are broken there, so this needs to be a separate issue IMO. And if we expect all Ref Guide edits to pass a link audit, then perhaps another separate issue should tackle adding that to the build process.)\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/867835788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/867988538","html_url":"https://github.com/apache/solr/pull/190#issuecomment-867988538","issue_url":"https://api.github.com/repos/apache/solr/issues/190","id":867988538,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Nzk4ODUzOA==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-24T22:14:48Z","updated_at":"2021-06-24T22:14:48Z","author_association":"CONTRIBUTOR","body":"Yep, let’s do the link fixes in a separate issue.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/867988538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/868286935","html_url":"https://github.com/apache/solr/pull/190#issuecomment-868286935","issue_url":"https://api.github.com/repos/apache/solr/issues/190","id":868286935,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODI4NjkzNQ==","user":{"login":"janhoy","id":409128,"node_id":"MDQ6VXNlcjQwOTEyOA==","avatar_url":"https://avatars.githubusercontent.com/u/409128?v=4","gravatar_id":"","url":"https://api.github.com/users/janhoy","html_url":"https://github.com/janhoy","followers_url":"https://api.github.com/users/janhoy/followers","following_url":"https://api.github.com/users/janhoy/following{/other_user}","gists_url":"https://api.github.com/users/janhoy/gists{/gist_id}","starred_url":"https://api.github.com/users/janhoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhoy/subscriptions","organizations_url":"https://api.github.com/users/janhoy/orgs","repos_url":"https://api.github.com/users/janhoy/repos","events_url":"https://api.github.com/users/janhoy/events{/privacy}","received_events_url":"https://api.github.com/users/janhoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-25T07:28:38Z","updated_at":"2021-06-25T07:28:38Z","author_association":"CONTRIBUTOR","body":"I created https://issues.apache.org/jira/browse/SOLR-15497 for the broken links","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/868286935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/868814626","html_url":"https://github.com/apache/solr/pull/194#issuecomment-868814626","issue_url":"https://api.github.com/repos/apache/solr/issues/194","id":868814626,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODgxNDYyNg==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-25T20:24:23Z","updated_at":"2021-06-25T20:24:23Z","author_association":"CONTRIBUTOR","body":"@markrmiller I'm going to wait to merge this until the upgrade is in as the current version is not handling `COUNT(ALL <field>)` or SQL like: \r\n```\r\nSELECT country_s, COUNT(distinct str_s) AS distinct_str FROM $ALIAS GROUP BY country_s\r\n```\r\nHopefully the upgrade will sort these out ;-)","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/868814626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869039643","html_url":"https://github.com/apache/solr/pull/195#issuecomment-869039643","issue_url":"https://api.github.com/repos/apache/solr/issues/195","id":869039643,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTAzOTY0Mw==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-26T17:59:05Z","updated_at":"2021-06-26T17:59:05Z","author_association":"CONTRIBUTOR","body":"> This one is slightly bigger than the others, but I think the median change is also lower complexity. There were a lot of thornier issues that I decided to skip over completely for now in solr-core.\r\n\r\nWow, I admire your stamina and patience with this cleanup effort! Thank you.\r\n\r\nThe sheer \"Files changed 352\" number made me wonder about a script to somehow split the review and tool assisted reviewing. And so I hacked up a script to help me, specifically looking for files that had _only_ removals and/or relocations of `@SuppressWarnings` and/or additions of `<Object>` or `<?>` or `<>` i.e. easily reviewed low complexity changes.\r\n\r\nOn the assumption that no one else has yet started to review here I'd like to add two commits to remove 254+5 files from the scope of this pull request (i.e. defer them to Part V) leaving 93 files here to review on the github UI whilst the tests are running locally.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869039643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869413150","html_url":"https://github.com/apache/solr/pull/193#issuecomment-869413150","issue_url":"https://api.github.com/repos/apache/solr/issues/193","id":869413150,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTQxMzE1MA==","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T06:59:55Z","updated_at":"2021-06-28T06:59:55Z","author_association":"CONTRIBUTOR","body":"@janhoy @dsmiley @cpoerschke Please review","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869413150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869787293","html_url":"https://github.com/apache/solr/pull/120#issuecomment-869787293","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":869787293,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTc4NzI5Mw==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T15:35:03Z","updated_at":"2021-06-28T15:35:03Z","author_association":"CONTRIBUTOR","body":"Hey @athrog - anything holding this up, or did you just miss the notification on the latest round of comments?  (If it's a time thing, lmk and I can try to help out a bit myself.)\r\n\r\nSeems like the consensus so far would be to (1) remove the BlobRepository abstraction and (2) repurpose/rebrand the contrib you're adding now to be s3-specific, pending any big objections or arguments from your side of things?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869787293/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869802855","html_url":"https://github.com/apache/solr/pull/120#issuecomment-869802855","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":869802855,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTgwMjg1NQ==","user":{"login":"psalagnac","id":82967811,"node_id":"MDQ6VXNlcjgyOTY3ODEx","avatar_url":"https://avatars.githubusercontent.com/u/82967811?v=4","gravatar_id":"","url":"https://api.github.com/users/psalagnac","html_url":"https://github.com/psalagnac","followers_url":"https://api.github.com/users/psalagnac/followers","following_url":"https://api.github.com/users/psalagnac/following{/other_user}","gists_url":"https://api.github.com/users/psalagnac/gists{/gist_id}","starred_url":"https://api.github.com/users/psalagnac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalagnac/subscriptions","organizations_url":"https://api.github.com/users/psalagnac/orgs","repos_url":"https://api.github.com/users/psalagnac/repos","events_url":"https://api.github.com/users/psalagnac/events{/privacy}","received_events_url":"https://api.github.com/users/psalagnac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T15:55:06Z","updated_at":"2021-06-28T15:55:06Z","author_association":"CONTRIBUTOR","body":"Hey @gerlowskija,\r\nSorry for the late answer here.\r\n\r\nThanks for you feedback. I think we reached an agreement to keep`BlobIndexInput` and remove the abstraction of the generic blob storage client.\r\n\r\nI will work with @athrog on following changes:\r\n- Rename `BlobBackupRepository` to `S3BackupRepository`, and update docs to target only S3.\r\n- Drop `BlobStorageClient` layer, and directly use AWS APIs in `S3BackupRepository`\r\n- As a second step, implement incremental test (this may came later depending on our bandwidth).","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869802855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869880889","html_url":"https://github.com/apache/solr/pull/177#issuecomment-869880889","issue_url":"https://api.github.com/repos/apache/solr/issues/177","id":869880889,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTg4MDg4OQ==","user":{"login":"markrmiller","id":448788,"node_id":"MDQ6VXNlcjQ0ODc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/448788?v=4","gravatar_id":"","url":"https://api.github.com/users/markrmiller","html_url":"https://github.com/markrmiller","followers_url":"https://api.github.com/users/markrmiller/followers","following_url":"https://api.github.com/users/markrmiller/following{/other_user}","gists_url":"https://api.github.com/users/markrmiller/gists{/gist_id}","starred_url":"https://api.github.com/users/markrmiller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markrmiller/subscriptions","organizations_url":"https://api.github.com/users/markrmiller/orgs","repos_url":"https://api.github.com/users/markrmiller/repos","events_url":"https://api.github.com/users/markrmiller/events{/privacy}","received_events_url":"https://api.github.com/users/markrmiller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T17:38:35Z","updated_at":"2021-06-28T17:38:35Z","author_association":"MEMBER","body":"I took a look at a flag to pull the change regarding the filter, expression, reduction rule that I removed, but initially I ended up leaving it for a couple of reasons:\r\n\r\n* Taking it out actually is what maintains backcompat, at least with regards to what we test on.\r\n* The result of not pulling it currently seems to me to produce incorrect results for the query(s) that no longer pass after update and either keeping the rule or removing it doesn't seem to break or affect any other queries we test.\r\n\r\nSo rather than add this cruft prematurely, I've gone without, but will add it if it is or becomes apparent to someone that we need it.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869880889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869894976","html_url":"https://github.com/apache/solr/pull/195#issuecomment-869894976","issue_url":"https://api.github.com/repos/apache/solr/issues/195","id":869894976,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTg5NDk3Ng==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T17:55:17Z","updated_at":"2021-06-28T17:55:17Z","author_association":"CONTRIBUTOR","body":"@cpoerschke so this is the \"easy\" changes left in here, right? Do you want me to open a new PR for the remaining 254+5 files or did you mean to add them back here once you were done with the first batch?","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869894976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/869944074","html_url":"https://github.com/apache/solr/pull/195#issuecomment-869944074","issue_url":"https://api.github.com/repos/apache/solr/issues/195","id":869944074,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTk0NDA3NA==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T19:03:39Z","updated_at":"2021-06-28T19:03:39Z","author_association":"CONTRIBUTOR","body":"Merging of this first batch and then a new PR for rest would be my preference.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/869944074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870020965","html_url":"https://github.com/apache/solr/pull/196#issuecomment-870020965","issue_url":"https://api.github.com/repos/apache/solr/issues/196","id":870020965,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDAyMDk2NQ==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T20:33:45Z","updated_at":"2021-06-28T20:33:45Z","author_association":"CONTRIBUTOR","body":"It's a bit unusual perhaps but I'd like to try and do one more round of pull request splitting please:\r\n* #195 had 93 files with \"easy\" changes left after splitting,\r\n* #196 here then will have 88 files with \"medium\" changes left (specifically files that had only removals and/or relocations of @SuppressWarnings (on its own line _or_ as part of a method signature) and/or additions of `<Object>` or `<Object,Object>` or `<?>` or `<?,?>` or `<>`),\r\n* leaving a third future PR with the \"interesting\" changes in 257 - 88 = 169 files.\r\n\r\nThe main benefit of splitting, in my opinion, is less context switching when reviewing the easy and medium changes and therefore then more focus on the interesting changes.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870020965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870027164","html_url":"https://github.com/apache/solr/pull/196#issuecomment-870027164","issue_url":"https://api.github.com/repos/apache/solr/issues/196","id":870027164,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDAyNzE2NA==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T20:42:41Z","updated_at":"2021-06-28T20:42:41Z","author_association":"CONTRIBUTOR","body":"How are you arriving at the resulting changes after removing some of the files? For example, in the original PR, the changes to DeleteBackupCmd seem pretty uninteresting but they don't meet your filter criteria.\r\n\r\nhttps://github.com/apache/solr/pull/196/commits/42706659709105bd7d013ddc90b552ef4f00b92f#diff-32efc1930aa64502a943c1bd808c028d923a079be6fcc3465a753edf52c11dfa","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870027164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870059189","html_url":"https://github.com/apache/solr/pull/196#issuecomment-870059189","issue_url":"https://api.github.com/repos/apache/solr/issues/196","id":870059189,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDA1OTE4OQ==","user":{"login":"madrob","id":1592330,"node_id":"MDQ6VXNlcjE1OTIzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1592330?v=4","gravatar_id":"","url":"https://api.github.com/users/madrob","html_url":"https://github.com/madrob","followers_url":"https://api.github.com/users/madrob/followers","following_url":"https://api.github.com/users/madrob/following{/other_user}","gists_url":"https://api.github.com/users/madrob/gists{/gist_id}","starred_url":"https://api.github.com/users/madrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madrob/subscriptions","organizations_url":"https://api.github.com/users/madrob/orgs","repos_url":"https://api.github.com/users/madrob/repos","events_url":"https://api.github.com/users/madrob/events{/privacy}","received_events_url":"https://api.github.com/users/madrob/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T21:31:58Z","updated_at":"2021-06-28T21:31:58Z","author_association":"CONTRIBUTOR","body":"Also, I'd like to note that I'm totally fine with splitting this into whatever reviewable chunks you feel comfortable with, and I appreciate that you're saving us both time by going ahead and clearly delineating what has and has not been reviewed.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870059189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870063569","html_url":"https://github.com/apache/solr/pull/196#issuecomment-870063569","issue_url":"https://api.github.com/repos/apache/solr/issues/196","id":870063569,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDA2MzU2OQ==","user":{"login":"cpoerschke","id":6458642,"node_id":"MDQ6VXNlcjY0NTg2NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6458642?v=4","gravatar_id":"","url":"https://api.github.com/users/cpoerschke","html_url":"https://github.com/cpoerschke","followers_url":"https://api.github.com/users/cpoerschke/followers","following_url":"https://api.github.com/users/cpoerschke/following{/other_user}","gists_url":"https://api.github.com/users/cpoerschke/gists{/gist_id}","starred_url":"https://api.github.com/users/cpoerschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpoerschke/subscriptions","organizations_url":"https://api.github.com/users/cpoerschke/orgs","repos_url":"https://api.github.com/users/cpoerschke/repos","events_url":"https://api.github.com/users/cpoerschke/events{/privacy}","received_events_url":"https://api.github.com/users/cpoerschke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T21:40:40Z","updated_at":"2021-06-28T21:57:49Z","author_association":"CONTRIBUTOR","body":"> How are you arriving at the resulting changes after removing some of the files? For example, in the original PR, the changes to DeleteBackupCmd seem pretty uninteresting but they don't meet your filter criteria.\r\n> \r\n> [4270665#diff-32efc1930aa64502a943c1bd808c028d923a079be6fcc3465a753edf52c11dfa](https://github.com/apache/solr/commit/42706659709105bd7d013ddc90b552ef4f00b92f#diff-32efc1930aa64502a943c1bd808c028d923a079be6fcc3465a753edf52c11dfa)\r\n\r\nIt's a fairly straightforward python script which line by line compares file content before and after the changes, if all the differences in a file can be \"explained\" via a set of transformations then the file is categorised as \"easy\" or \"medium\" and otherwise it's suggested for removal from pull request scope. `DeleteBackupCmd` did not get classified as \"easy\" because of the `SuppressWarnings rawtypes  NamedList results` to `NamedList<Object>` signature changes which are \"medium\". `DeleteBackupCmd` also did not get classified as \"medium\" because of the `NamedList` to `NamedList<Integer>` change.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870063569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870154214","html_url":"https://github.com/apache/solr/pull/190#issuecomment-870154214","issue_url":"https://api.github.com/repos/apache/solr/issues/190","id":870154214,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDE1NDIxNA==","user":{"login":"gerlowskija","id":9030708,"node_id":"MDQ6VXNlcjkwMzA3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/9030708?v=4","gravatar_id":"","url":"https://api.github.com/users/gerlowskija","html_url":"https://github.com/gerlowskija","followers_url":"https://api.github.com/users/gerlowskija/followers","following_url":"https://api.github.com/users/gerlowskija/following{/other_user}","gists_url":"https://api.github.com/users/gerlowskija/gists{/gist_id}","starred_url":"https://api.github.com/users/gerlowskija/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gerlowskija/subscriptions","organizations_url":"https://api.github.com/users/gerlowskija/orgs","repos_url":"https://api.github.com/users/gerlowskija/repos","events_url":"https://api.github.com/users/gerlowskija/events{/privacy}","received_events_url":"https://api.github.com/users/gerlowskija/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-29T01:16:45Z","updated_at":"2021-06-29T01:16:57Z","author_association":"CONTRIBUTOR","body":"This LGTM and is a huge step forward for the ref-guide!\r\n\r\nThe biggest nitpick I probably have here is that the breaking up of the old \"Admin UI\" section (a change I'm hugely in favor of) leaves a few vestigial stub pages around as not very useful \"screenshot-vehicles\". e.g. thread-dump.adoc.  It looks like most of the Admin UI content it looks like was able to be pulled into other pages, but the few places this couldn't be done feel awkward IMO.\r\n\r\nNot sure there's a fix to this though - short of individually adding conceptually related content to these pages. (In the thread-dump.adoc example, maybe someone will eventually add info there about Solr-specific things to look for in thread dumps).  That said, I'm totally happy to live with this if it's a side effect of the otherwise overwhelmingly positive change.\r\n\r\nWill be great to see this in 9!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870154214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870618414","html_url":"https://github.com/apache/solr/pull/196#issuecomment-870618414","issue_url":"https://api.github.com/repos/apache/solr/issues/196","id":870618414,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDYxODQxNA==","user":{"login":"epugh","id":22395,"node_id":"MDQ6VXNlcjIyMzk1","avatar_url":"https://avatars.githubusercontent.com/u/22395?v=4","gravatar_id":"","url":"https://api.github.com/users/epugh","html_url":"https://github.com/epugh","followers_url":"https://api.github.com/users/epugh/followers","following_url":"https://api.github.com/users/epugh/following{/other_user}","gists_url":"https://api.github.com/users/epugh/gists{/gist_id}","starred_url":"https://api.github.com/users/epugh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epugh/subscriptions","organizations_url":"https://api.github.com/users/epugh/orgs","repos_url":"https://api.github.com/users/epugh/repos","events_url":"https://api.github.com/users/epugh/events{/privacy}","received_events_url":"https://api.github.com/users/epugh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-29T13:50:33Z","updated_at":"2021-06-29T13:50:33Z","author_association":"CONTRIBUTOR","body":"This is a really impressive amount of work!","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870618414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870732569","html_url":"https://github.com/apache/solr/pull/194#issuecomment-870732569","issue_url":"https://api.github.com/repos/apache/solr/issues/194","id":870732569,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDczMjU2OQ==","user":{"login":"markrmiller","id":448788,"node_id":"MDQ6VXNlcjQ0ODc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/448788?v=4","gravatar_id":"","url":"https://api.github.com/users/markrmiller","html_url":"https://github.com/markrmiller","followers_url":"https://api.github.com/users/markrmiller/followers","following_url":"https://api.github.com/users/markrmiller/following{/other_user}","gists_url":"https://api.github.com/users/markrmiller/gists{/gist_id}","starred_url":"https://api.github.com/users/markrmiller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markrmiller/subscriptions","organizations_url":"https://api.github.com/users/markrmiller/orgs","repos_url":"https://api.github.com/users/markrmiller/repos","events_url":"https://api.github.com/users/markrmiller/events{/privacy}","received_events_url":"https://api.github.com/users/markrmiller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-29T16:11:35Z","updated_at":"2021-06-29T16:11:35Z","author_association":"MEMBER","body":"Looks okay to me other than the todo to uncomment. In a other issue I have some work / ideas around taking advantage of the approx count in a caching somewhat lazy way to so we can try and cheaply use use a distinct approx that doesn't always have to be super accurate or up to date to influence the planner or our own decisions. ","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870732569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/870961665","html_url":"https://github.com/apache/solr/pull/191#issuecomment-870961665","issue_url":"https://api.github.com/repos/apache/solr/issues/191","id":870961665,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDk2MTY2NQ==","user":{"login":"thelabdude","id":417074,"node_id":"MDQ6VXNlcjQxNzA3NA==","avatar_url":"https://avatars.githubusercontent.com/u/417074?v=4","gravatar_id":"","url":"https://api.github.com/users/thelabdude","html_url":"https://github.com/thelabdude","followers_url":"https://api.github.com/users/thelabdude/followers","following_url":"https://api.github.com/users/thelabdude/following{/other_user}","gists_url":"https://api.github.com/users/thelabdude/gists{/gist_id}","starred_url":"https://api.github.com/users/thelabdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thelabdude/subscriptions","organizations_url":"https://api.github.com/users/thelabdude/orgs","repos_url":"https://api.github.com/users/thelabdude/repos","events_url":"https://api.github.com/users/thelabdude/events{/privacy}","received_events_url":"https://api.github.com/users/thelabdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-29T22:30:27Z","updated_at":"2021-06-29T22:30:27Z","author_association":"CONTRIBUTOR","body":"> I think it is possible to use CursorMark in some form for this.\r\n> \r\n> Given that pagination is semi accurate (and generally not very valuable :)), I think that leaves some attack path opens.\r\n> \r\n> The CursorMark is really just last values for the sort to be used to indicate the starting offset.\r\n> \r\n> So you could come up with some caching, loose effort type approaches I think.\r\n> \r\n> For deep paging, it seems likely worth some effort. I started to look into it, but the actually value and likely practical is so low.\r\n> \r\n> I'm +1 on starting here.\r\n\r\nAgreed ... the reason I didn't think caching would work is requests to the `/sql` handler get load balanced across potentially many nodes. Also given the rows / cols nature of SQL result sets, it's hard to pass back the next `cursorMark` to the client to include in the next paging request. So I guess you could cache the next cursorMark with the SQL + params as the key in a global distributed cache (znode) but that feels like a lot of complexity for a questionable SQL use case? It's not lost on me that deep paging is dangerous when exposed to web crawlers but that doesn't seem like it's as much of a risk with SQL.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/870961665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/871614788","html_url":"https://github.com/apache/solr/pull/120#issuecomment-871614788","issue_url":"https://api.github.com/repos/apache/solr/issues/120","id":871614788,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MTYxNDc4OA==","user":{"login":"psalagnac","id":82967811,"node_id":"MDQ6VXNlcjgyOTY3ODEx","avatar_url":"https://avatars.githubusercontent.com/u/82967811?v=4","gravatar_id":"","url":"https://api.github.com/users/psalagnac","html_url":"https://github.com/psalagnac","followers_url":"https://api.github.com/users/psalagnac/followers","following_url":"https://api.github.com/users/psalagnac/following{/other_user}","gists_url":"https://api.github.com/users/psalagnac/gists{/gist_id}","starred_url":"https://api.github.com/users/psalagnac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psalagnac/subscriptions","organizations_url":"https://api.github.com/users/psalagnac/orgs","repos_url":"https://api.github.com/users/psalagnac/repos","events_url":"https://api.github.com/users/psalagnac/events{/privacy}","received_events_url":"https://api.github.com/users/psalagnac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-30T17:59:43Z","updated_at":"2021-06-30T17:59:43Z","author_association":"CONTRIBUTOR","body":"Hi @gerlowskija,\r\n\r\nThe PR is updated with new class layer. I tried to align to existing implementation for CSG. All classes are now in package `org.apache.solr.s3`.\r\n\r\nI kept calls to AWS API in standalone class `S3StorageClient`. This for for testing purpose and this class it not intended to be extended or used for nothing else than backups.\r\n\r\nStill have to do end-to-end testing and polish docs.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/871614788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/solr/issues/comments/873795887","html_url":"https://github.com/apache/solr/pull/179#issuecomment-873795887","issue_url":"https://api.github.com/repos/apache/solr/issues/179","id":873795887,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Mzc5NTg4Nw==","user":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-05T05:06:53Z","updated_at":"2021-07-05T05:06:53Z","author_association":"CONTRIBUTOR","body":"It's mind boggling to me what thought process led to that line of code in the first place ;-)  I like to think I'd catch that in a code review.","reactions":{"url":"https://api.github.com/repos/apache/solr/issues/comments/873795887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]