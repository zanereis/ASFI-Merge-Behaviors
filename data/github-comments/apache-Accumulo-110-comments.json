[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538856316","html_url":"https://github.com/apache/accumulo/pull/3230#issuecomment-1538856316","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3230","id":1538856316,"node_id":"IC_kwDOACaFSM5buRV8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T18:39:10Z","updated_at":"2023-05-08T18:39:10Z","author_association":"CONTRIBUTOR","body":"> The pre-upgrade stage was added to support code / checks that are likely independent of a specific version.\r\n\r\nYeah if the data is the same across the two versions then we do not need to push anything to the Upgrader.  I was thinking we had changed how lock data is stored in ZK.  That may be between 2.0 and 2.1 though, not for 2.1 to 3.0.\r\n\r\n> The ability to communicate with a tserver seems to also fit within this category. Before anything happens that is dependent on version, this check would establish a baseline of \"at least I can talk to all of the registered tservers\" before any version dependent code would have a chance to run.\r\n\r\n We could also possibly add something to ServiceLockData that could be used to check if a lock on ZK is associated with something running an older code version.  That could be done in addition to or instead of attempting to make a RPC.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538856316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538857614","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1538857614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1538857614,"node_id":"IC_kwDOACaFSM5buRqO","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T18:40:24Z","updated_at":"2023-05-08T18:40:24Z","author_association":"CONTRIBUTOR","body":"The code that was modified in https://github.com/apache/accumulo/pull/3366.  Now instead of killing the tserver it is logging that the contents of the tserver memory and the metadata table do not match.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538857614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538885064","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1538885064","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1538885064,"node_id":"IC_kwDOACaFSM5buYXI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T19:00:09Z","updated_at":"2023-05-08T19:00:09Z","author_association":"CONTRIBUTOR","body":"That loop seems like it could over-warn considering that it grabs all of the tablet metadata first, then checks each tablet. By the time it gets to a Tablet, its metadata could have changed.  The fact that the tablets seems stuck in this state is concerning. @ivakegg - could you confirm via scanning the metadata table in the shell that the minor compaction file is listed in the tablet metadata for one of the 12 tablets? Then, on the tserver for this tablet, what is in the log for the F file? Did it get compacted away?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538885064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538910614","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1538910614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1538910614,"node_id":"IC_kwDOACaFSM5buemW","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T19:16:40Z","updated_at":"2023-05-08T19:16:40Z","author_association":"CONTRIBUTOR","body":"If I recall from what he showed me - the file does not get compacted away.  It seems that \r\n1. The tablet had ingest and a flush is triggered\r\n2. The metadata is updated with the flush F file\r\n3. The tserver in-memory cache is not updated\r\nThen after some period, the check gets scheduled an runs - sees that the metadata and the in-memory cache do not match, it now prints the issue and then keeps repeating for every check.  \r\n\r\n@ivakegg - please correct this if I have the details misrepresented.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538910614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538943942","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1538943942","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1538943942,"node_id":"IC_kwDOACaFSM5bumvG","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T19:43:44Z","updated_at":"2023-05-08T19:43:44Z","author_association":"MEMBER","body":"Also was `SimpleGarbageCollector` being run or something else?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538943942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538966004","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1538966004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1538966004,"node_id":"IC_kwDOACaFSM5busH0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T20:01:02Z","updated_at":"2023-05-08T20:04:22Z","author_association":"CONTRIBUTOR","body":"@ivakegg - do you know if the tablet in question split around the same time? I believe that there were some changes made in the split code as part of 2.1 and I wonder if there is an unintended consequence. I'm wondering if a split is happening between [here](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/DatafileManager.java#L358) and [here](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/DatafileManager.java#L403)\r\n\r\nI was thinking of [this](https://github.com/apache/accumulo/issues/3217), which is not in 2.1, but in 2.1.1 already. Still wondering if a split occurred.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1538966004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540043867","html_url":"https://github.com/apache/accumulo/issues/3149#issuecomment-1540043867","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3149","id":1540043867,"node_id":"IC_kwDOACaFSM5byzRb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T12:39:31Z","updated_at":"2023-05-09T12:39:31Z","author_association":"CONTRIBUTOR","body":"Closing as we are not planning on supporting scans of offline tables.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540043867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540052502","html_url":"https://github.com/apache/accumulo/issues/3084#issuecomment-1540052502","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3084","id":1540052502,"node_id":"IC_kwDOACaFSM5by1YW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T12:45:11Z","updated_at":"2023-05-09T12:45:11Z","author_association":"CONTRIBUTOR","body":"We are no longer planning on allowing eventual scans on offline tables.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540052502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540054906","html_url":"https://github.com/apache/accumulo/pull/3091#issuecomment-1540054906","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3091","id":1540054906,"node_id":"IC_kwDOACaFSM5by196","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T12:46:35Z","updated_at":"2023-05-09T12:46:35Z","author_association":"CONTRIBUTOR","body":"We are no longer planning on allowing eventual scans on offline tables","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540054906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540103273","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1540103273","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1540103273,"node_id":"IC_kwDOACaFSM5bzBxp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T13:14:05Z","updated_at":"2023-05-09T13:14:05Z","author_association":"CONTRIBUTOR","body":"Pulled some of the test that were still relevant from this into the elasticity branch","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540103273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540975925","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1540975925","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1540975925,"node_id":"IC_kwDOACaFSM5b2W01","user":{"login":"keith-ratcliffe","id":1606834,"node_id":"MDQ6VXNlcjE2MDY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1606834?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-ratcliffe","html_url":"https://github.com/keith-ratcliffe","followers_url":"https://api.github.com/users/keith-ratcliffe/followers","following_url":"https://api.github.com/users/keith-ratcliffe/following{/other_user}","gists_url":"https://api.github.com/users/keith-ratcliffe/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-ratcliffe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-ratcliffe/subscriptions","organizations_url":"https://api.github.com/users/keith-ratcliffe/orgs","repos_url":"https://api.github.com/users/keith-ratcliffe/repos","events_url":"https://api.github.com/users/keith-ratcliffe/events{/privacy}","received_events_url":"https://api.github.com/users/keith-ratcliffe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T22:37:07Z","updated_at":"2023-05-09T22:37:07Z","author_association":"CONTRIBUTOR","body":"> @ivakegg - do you know if the tablet in question split around the same time?\r\n> \r\nFWIW, I did `grep -m 1 'differ from in-memory' ` across all tserver logs and noted the earliest occurrence that I could find. Then I grepped across all tserver logs again to find all 'Starting split' log messages associated with that tablet, but found none at all for that one\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1540975925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541181482","html_url":"https://github.com/apache/accumulo/pull/3230#issuecomment-1541181482","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3230","id":1541181482,"node_id":"IC_kwDOACaFSM5b3JAq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T01:59:33Z","updated_at":"2023-05-10T01:59:33Z","author_association":"MEMBER","body":"@keith-turner You mentioned in Slack that this might be useful to have for Upgrader9to10, which would upgrade to 2.1. It might be worth adding some upgrade checks to the 2.1 branch. I'm not sure how much of this PR could be backported, or if it would need a different, but similar, solution.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541181482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541184199","html_url":"https://github.com/apache/accumulo/issues/3348#issuecomment-1541184199","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3348","id":1541184199,"node_id":"IC_kwDOACaFSM5b3JrH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T02:03:05Z","updated_at":"2023-05-10T02:03:05Z","author_association":"MEMBER","body":"> So do you think it's appropriate to just use Long.MAX_VALUE ...\r\n\r\nMy point was that the appropriate solution might be a case-by-case basis sort of thing. I'm not sure what value would be appropriate without digging in deep to figure out all the places where it's used.\r\n\r\n> We could of course just handle a returned negative in both places but it still seems like the simplest thing is to have that method just return Long.MAX_VALUE as the computed range length if it detects an overflow/negative otherwise everytime we call the method we have to handle a potential negative returned which could lead to inconsistencies.\r\n\r\nI think it was pointed out previously that the overflow could occur in some of the calling code anyway, so fixing in this method alone is not sufficient, and may be redundant to the fix in the calling code. My main point before was that the behavior of this method isn't important, because it's not public API, so long as the calling code handles it correctly, on a case-by-case basis.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541184199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541195421","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1541195421","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1541195421,"node_id":"IC_kwDOACaFSM5b3Mad","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T02:20:31Z","updated_at":"2023-05-10T02:20:31Z","author_association":"MEMBER","body":"@cshannon The interrupted exception on line https://github.com/apache/accumulo/blob/b41427dc18c9fa36c9e619ebf928a02aebeb22fb/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#LL987C33-L987C33 is also poorly formatted. It should be `log.error(\"{}\", e, e);` instead of `log.error(e.toString());`\r\n\r\nRegardless of what is discovered from troubleshooting this, that logging should be fixed.\r\n\r\nThere may be cases where we omit the full stack trace for some rational reason, but those cases should have comments in the code explaining the justification.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541195421/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541195864","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1541195864","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1541195864,"node_id":"IC_kwDOACaFSM5b3MhY","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T02:21:23Z","updated_at":"2023-05-10T02:21:23Z","author_association":"MEMBER","body":"I'm marking this as a blocker to fix the logging for 2.1.1 at a minimum.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541195864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541201391","html_url":"https://github.com/apache/accumulo/issues/3373#issuecomment-1541201391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3373","id":1541201391,"node_id":"IC_kwDOACaFSM5b3N3v","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T02:31:24Z","updated_at":"2023-05-10T02:31:24Z","author_association":"MEMBER","body":"At a minimum, it should be in the REST endpoint at /xml and /json, but I'd support adding it back in to the page, too (as long as it updates when the status changes, like the other background AJAX data refreshes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541201391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541202556","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1541202556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1541202556,"node_id":"IC_kwDOACaFSM5b3OJ8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T02:33:30Z","updated_at":"2023-05-10T02:33:30Z","author_association":"MEMBER","body":"> Also was `SimpleGarbageCollector` being run or something else?\r\n\r\nI don't think our implementation is pluggable. The name is historical, because we changed the implementation internally a long time ago. So, I would assume it's this one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1541202556/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542050282","html_url":"https://github.com/apache/accumulo/pull/3384#issuecomment-1542050282","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3384","id":1542050282,"node_id":"IC_kwDOACaFSM5b6dHq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T11:41:08Z","updated_at":"2023-05-10T11:41:08Z","author_association":"MEMBER","body":"Is this applicable to 2.1, or only 3.0?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542050282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542147037","html_url":"https://github.com/apache/accumulo/pull/3384#issuecomment-1542147037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3384","id":1542147037,"node_id":"IC_kwDOACaFSM5b60vd","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T12:44:20Z","updated_at":"2023-05-10T12:44:20Z","author_association":"CONTRIBUTOR","body":"The memory starved tests were added in 3.0 with https://github.com/apache/accumulo/pull/3161","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542147037/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542244688","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1542244688","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1542244688,"node_id":"IC_kwDOACaFSM5b7MlQ","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T13:45:34Z","updated_at":"2023-05-10T13:45:34Z","author_association":"CONTRIBUTOR","body":"I can confirm the loop that Ed pointed to.  I can confirm that if you force a compaction of one of those tablets then the file that was not \"in-memory\" is left along with the A file from the compaction.  I cannot comfirm anything regarding splits.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542244688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542246886","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1542246886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1542246886,"node_id":"IC_kwDOACaFSM5b7NHm","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T13:46:20Z","updated_at":"2023-05-10T13:46:20Z","author_association":"CONTRIBUTOR","body":"I can confirm what Ed stated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542246886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542268062","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1542268062","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1542268062,"node_id":"IC_kwDOACaFSM5b7SSe","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T13:59:37Z","updated_at":"2023-05-10T13:59:37Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo Yes it was the SimpleGarbageCollector.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542268062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542269881","html_url":"https://github.com/apache/accumulo/issues/3373#issuecomment-1542269881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3373","id":1542269881,"node_id":"IC_kwDOACaFSM5b7Su5","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:00:40Z","updated_at":"2023-05-10T14:00:40Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo Yes you have that correct.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542269881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542306875","html_url":"https://github.com/apache/accumulo/pull/3375#issuecomment-1542306875","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3375","id":1542306875,"node_id":"IC_kwDOACaFSM5b7bw7","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:25:17Z","updated_at":"2023-05-10T14:25:17Z","author_association":"CONTRIBUTOR","body":"> If a user is going to spend effort on providing a pluggable implementation to address this class of issues, I think their time would be better spent working on a custom ContextClassLoaderFactory implementation that downgrades specific Errors or handles them, rather than doing the same in an iterator. The former would cast a wider net to catch the same class of problems more generally (such as when an Error occurs tried to load the user's iterator in the per-table context).\r\n\r\n@ctubbsii You make a good point here.  I will investigate creating a wrapper around the VFSClassLoader to suit our needs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542306875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542326362","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1542326362","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1542326362,"node_id":"IC_kwDOACaFSM5b7gha","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:41:07Z","updated_at":"2023-05-10T14:41:07Z","author_association":"MEMBER","body":"I just did a cursory look through the code to try to figure out why we disabled that, and couldn't find the code. I thought there was a problem that made merging the metadata table unsafe. But, now I'm not so sure, as I wasn't able to quickly find where we are blocking that. It's possible that it was only disabled because of the risks of it being offline too long for the operation, and we didn't want users shooting themselves in the foot. It might still be safe to do, with some extra precautions.\r\n\r\n@cshannon is working on #1327 to make merges a much faster operation, where it will be much safer. I suspect it will be a big incentive to upgrade to the next LTM after 2.1, but it's too risky of a change to add to 2.1.\r\n\r\nIt might be fastest to export tables and import into a fresh Accumulo instance, but we'd have to investigate further to see whether there's another way.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542326362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542336507","html_url":"https://github.com/apache/accumulo/pull/3375#issuecomment-1542336507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3375","id":1542336507,"node_id":"IC_kwDOACaFSM5b7i_7","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:46:53Z","updated_at":"2023-05-10T14:46:53Z","author_association":"MEMBER","body":"> I will investigate creating a wrapper around the VFSClassLoader to suit our needs.\r\n\r\n@ivakegg I would strongly advise against using the VFSClassLoader, as there does not appear to be any version that is consistently reliable, and I suspect there are much better ways to satisfy your use cases, now that you have the option to fully customize your classloader, plugged into Accumulo. Wrapping the VFSClassLoader might be a good stop-gap in the short-term, though. We started one such wrapper in https://github.com/apache/accumulo-classloaders, which is a work-in-progress. It might be a good starting point for you, if it's not immediately workable for your needs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542336507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542340740","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1542340740","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1542340740,"node_id":"IC_kwDOACaFSM5b7kCE","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:49:19Z","updated_at":"2023-05-10T14:49:19Z","author_association":"CONTRIBUTOR","body":"@ctubbsii We have way too many tables to make exporting and importing feasible.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542340740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542342365","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1542342365","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1542342365,"node_id":"IC_kwDOACaFSM5b7kbd","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:49:59Z","updated_at":"2023-05-10T14:49:59Z","author_association":"CONTRIBUTOR","body":"> What version? If snapshot, please provide the closest git hash to what you're using.\r\n\r\n@ctubbsii It appears that the last external commit we have is 55d972a4","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542342365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542345527","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1542345527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1542345527,"node_id":"IC_kwDOACaFSM5b7lM3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:51:25Z","updated_at":"2023-05-10T14:51:25Z","author_association":"MEMBER","body":"> We have way too many tables to make exporting and importing feasible.\r\n\r\nUnderstood. Right now, I'm not sure there are any good options, though. That's the only one I know would work. Other possible solutions require further investigation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542345527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542359125","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1542359125","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1542359125,"node_id":"IC_kwDOACaFSM5b7ohV","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T14:58:13Z","updated_at":"2023-05-10T14:58:13Z","author_association":"MEMBER","body":"> > What version? If snapshot, please provide the closest git hash to what you're using.\r\n> \r\n> @ctubbsii It appears that the last external commit we have is [55d972a](https://github.com/apache/accumulo/commit/55d972a4c750c81aba8c59f5841d6369ad40d519)\r\n\r\nThat is old, but I don't see any updates since then that would have fixed something like this. Is this reproducible?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542359125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542364963","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1542364963","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1542364963,"node_id":"IC_kwDOACaFSM5b7p8j","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T15:00:08Z","updated_at":"2023-05-10T15:00:08Z","author_association":"MEMBER","body":"@ivakegg Did this occur while running the external compactions, or still using traditional in-tserver compactions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542364963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542374000","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1542374000","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1542374000,"node_id":"IC_kwDOACaFSM5b7sJw","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T15:04:46Z","updated_at":"2023-05-10T15:32:12Z","author_association":"CONTRIBUTOR","body":"> > > What version? If snapshot, please provide the closest git hash to what you're using.\r\n> > \r\n> > \r\n> > @ctubbsii It appears that the last external commit we have is [55d972a](https://github.com/apache/accumulo/commit/55d972a4c750c81aba8c59f5841d6369ad40d519)\r\n> \r\n> That is old, but I don't see any updates since then that would have fixed something like this. Is this reproducible?\r\n\r\nYes it is, well at least in our test system.  I have not been able to reproduce it locally yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1542374000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544010540","html_url":"https://github.com/apache/accumulo/pull/3389#issuecomment-1544010540","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3389","id":1544010540,"node_id":"IC_kwDOACaFSM5cB7ss","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T13:27:01Z","updated_at":"2023-05-11T13:27:01Z","author_association":"CONTRIBUTOR","body":"Will this show the status when it is running and normal?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544010540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544076883","html_url":"https://github.com/apache/accumulo/pull/3389#issuecomment-1544076883","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3389","id":1544076883,"node_id":"IC_kwDOACaFSM5cCL5T","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T14:22:10Z","updated_at":"2023-05-11T14:22:10Z","author_association":"MEMBER","body":"> Will this show the status when it is running and normal?\r\n\r\nNo it should only show if the manager state is not `NORMAL` or when the manager state and manager goal state differ.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544076883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544089604","html_url":"https://github.com/apache/accumulo/pull/3389#issuecomment-1544089604","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3389","id":1544089604,"node_id":"IC_kwDOACaFSM5cCPAE","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T14:28:39Z","updated_at":"2023-05-11T14:28:39Z","author_association":"CONTRIBUTOR","body":"From a user experience perspective - would it be better to always show the status?  Seeing that things are \"normal\" seems that it provides feedback to the user rather than needing to know that lack of status means \"good\"?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544089604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544096781","html_url":"https://github.com/apache/accumulo/pull/3389#issuecomment-1544096781","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3389","id":1544096781,"node_id":"IC_kwDOACaFSM5cCQwN","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T14:32:24Z","updated_at":"2023-05-11T14:32:24Z","author_association":"MEMBER","body":"> From a user experience perspective - would it be better to always show the status? Seeing that things are \"normal\" seems that it provides feedback to the user rather than needing to know that lack of status means \"good\"?\r\n\r\nYea that makes sense to me. The only reason I made it this way is because that is how things are done in the 1.10 monitor.\r\n\r\nIf it seems like we want to change things so that the status is always displayed, I am good with that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544096781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544283227","html_url":"https://github.com/apache/accumulo/pull/3342#issuecomment-1544283227","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3342","id":1544283227,"node_id":"IC_kwDOACaFSM5cC-Rb","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T16:13:32Z","updated_at":"2023-05-11T16:13:32Z","author_association":"MEMBER","body":"@ctubbsii, I tried to resolve all of your suggestions in 6a60c98","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544283227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544397128","html_url":"https://github.com/apache/accumulo/pull/3392#issuecomment-1544397128","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3392","id":1544397128,"node_id":"IC_kwDOACaFSM5cDaFI","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:24:30Z","updated_at":"2023-05-11T17:24:30Z","author_association":"CONTRIBUTOR","body":"Best to ignore whitespace when looking at the diffs","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544397128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544402563","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544402563","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544402563,"node_id":"IC_kwDOACaFSM5cDbaD","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:28:41Z","updated_at":"2023-05-11T17:28:41Z","author_association":"CONTRIBUTOR","body":"I opened #3392 while looking into this. I noticed a race condition in the code and #3392 fixes that.  I don't think #3392 fixes what we are seeing here.  If a false positive did trigger because of the race condition fixed in #3392 I think it would be transient, so would not see the same file reported on the next check.  The fix in #3392 moves the increment of the start counter to before the metadata table update, it was before the walog update but not the metadata table update (the increment just needed to move up a bit further).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544402563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544422546","html_url":"https://github.com/apache/accumulo/pull/3392#issuecomment-1544422546","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3392","id":1544422546,"node_id":"IC_kwDOACaFSM5cDgSS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:41:42Z","updated_at":"2023-05-11T17:41:42Z","author_association":"CONTRIBUTOR","body":"I am trying to trigger the false positive with the following test.\r\n\r\nI set the following properties.\r\n\r\n```\r\ntserver.compaction.minor.concurrent.max=20\r\ntserver.health.check.interval=1ms\r\n```\r\n\r\nThen I run the following code in jshell\r\n\r\n```java\r\n    client.tableOperations().create(\"foo\");\r\n    \r\n    var bw = client.createBatchWriter(\"foo\");\r\n\r\n    SortedSet<Text> splits = new TreeSet<>();\r\n\r\n    IntStream.range(1, 100).mapToObj(i -> String.format(\"%03d\", i)).map(Text::new)\r\n        .forEach(splits::add);\r\n\r\n    client.tableOperations().addSplits(\"foo\", splits);\r\n\r\n    while (true) {\r\n      IntStream.range(1, 100).mapToObj(i -> String.format(\"%03d\", i)).forEach(row -> {\r\n        Mutation mutation = new Mutation(row);\r\n        mutation.put(\"f1\", \"q1\", \"v1\");\r\n        try {\r\n          bw.addMutation(mutation);\r\n        } catch (Exception e) {\r\n          throw new RuntimeException(e);\r\n        }\r\n      });\r\n      bw.flush();\r\n      client.tableOperations().flush(\"foo\", null, null, true);\r\n    }\r\n```\r\n\r\nI am seeing around 40 minor compactions per second while this test is running against 2.1.0.  Not seeing it run into the race condition yet.  I think I need to more tservers doing more checks against more tablets to increase the probability of bumping into it.  I am running it under Uno.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544422546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544436149","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544436149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544436149,"node_id":"IC_kwDOACaFSM5cDjm1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:51:22Z","updated_at":"2023-05-11T17:51:22Z","author_association":"CONTRIBUTOR","body":"Related comment thread [here](https://github.com/apache/accumulo/pull/3392#discussion_r1191504746)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544436149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544443347","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544443347","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544443347,"node_id":"IC_kwDOACaFSM5cDlXT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:56:50Z","updated_at":"2023-05-11T17:56:50Z","author_association":"CONTRIBUTOR","body":"While looking into this I was curious if a minor compaction producing an empty file with no entries might trigger this check.  I tested that locally (added an iterator to a table that filtered out everything on minc) and it did not trigger the check.  Looking a bit further I found we have an IT for this case https://github.com/apache/accumulo/blob/fdabdc5133dd262316bac5d71a832f332831a61a/test/src/main/java/org/apache/accumulo/test/functional/FlushNoFileIT.java","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544443347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544443733","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544443733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544443733,"node_id":"IC_kwDOACaFSM5cDldV","user":{"login":"cawaring","id":34602708,"node_id":"MDQ6VXNlcjM0NjAyNzA4","avatar_url":"https://avatars.githubusercontent.com/u/34602708?v=4","gravatar_id":"","url":"https://api.github.com/users/cawaring","html_url":"https://github.com/cawaring","followers_url":"https://api.github.com/users/cawaring/followers","following_url":"https://api.github.com/users/cawaring/following{/other_user}","gists_url":"https://api.github.com/users/cawaring/gists{/gist_id}","starred_url":"https://api.github.com/users/cawaring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cawaring/subscriptions","organizations_url":"https://api.github.com/users/cawaring/orgs","repos_url":"https://api.github.com/users/cawaring/repos","events_url":"https://api.github.com/users/cawaring/events{/privacy}","received_events_url":"https://api.github.com/users/cawaring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:57:09Z","updated_at":"2023-05-11T17:57:09Z","author_association":"NONE","body":"It appears in all cases it was either a MinC file (F*****.rf) or a bulk load file (I******.rf) that is present in the metadata table, but not in the tserver memory.  There are three F files from one table that were all generated at the same time on the same day and one I file from a different table.   So this is happening across multiple tables and multiple tservers. It seems to always be the same tables and the same files referenced in the logs.  \r\n\r\nI do not see any messages regarding splits on the metadata table or the individual tsevers hosting the tablets referencing a discrepancy.  I also do not see any time outs for connections or scans around the time these warnings are generate. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544443733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544451834","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544451834","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544451834,"node_id":"IC_kwDOACaFSM5cDnb6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:03:17Z","updated_at":"2023-05-11T18:04:18Z","author_association":"CONTRIBUTOR","body":"As an aside, this `Error` seems like it shouldn't be there:\r\n\r\nhttps://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L508","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544451834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544456827","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544456827","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544456827,"node_id":"IC_kwDOACaFSM5cDop7","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:06:59Z","updated_at":"2023-05-11T18:07:46Z","author_association":"CONTRIBUTOR","body":"Another potential cause that would be good to rule is something odd happening with the serialization/deserialization/hashCode/equals.  Roughly the following is happening\r\n\r\n 1. A StoredTabletFile object is created and saved to the metadata table and stored in memory\r\n 2. Later the code reads a string from the metadata table, use that string to create a new StoredTabletFile object.  Then it compares the new object created from the metadata table with created earlier and stored in a set or map.\r\n\r\nIf we can rule out that something is going wrong with the desieralization and/op comparison of these objects that would be useful.  One possible was to do this is to look for the same file that is translated to a slightly different string in the logs at diff times, for the files involved in the messages that is.  Could also inspect the equals and hashCode methods.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544456827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544459369","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544459369","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544459369,"node_id":"IC_kwDOACaFSM5cDpRp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:09:05Z","updated_at":"2023-05-11T18:09:05Z","author_association":"CONTRIBUTOR","body":"> As an aside, this Error seems like it shouldn't be there:\r\n\r\nYeah that catching of error is suspect.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544459369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544460529","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544460529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544460529,"node_id":"IC_kwDOACaFSM5cDpjx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:10:04Z","updated_at":"2023-05-11T18:10:04Z","author_association":"CONTRIBUTOR","body":"@keith-turner - regarding StoredTabletFile - https://github.com/apache/accumulo/issues/2830\r\n\r\n@cawaring - You didn't see any messages like [this](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/util/threads/AccumuloUncaughtExceptionHandler.java#L67) ? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544460529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544463023","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544463023","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544463023,"node_id":"IC_kwDOACaFSM5cDqKv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:12:08Z","updated_at":"2023-05-11T18:12:08Z","author_association":"CONTRIBUTOR","body":"> @cawaring - You didn't see any messages like [this](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/util/threads/AccumuloUncaughtExceptionHandler.java#L67) ?\r\n\r\nLooking at the referenced code, we do not do the recursive check for an error when the top level exception is not an error.  So if an exception wraps an error it will not halt.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544463023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544465591","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544465591","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544465591,"node_id":"IC_kwDOACaFSM5cDqy3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:14:25Z","updated_at":"2023-05-11T18:14:25Z","author_association":"CONTRIBUTOR","body":"> > @cawaring - You didn't see any messages like [this](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/util/threads/AccumuloUncaughtExceptionHandler.java#L67) ?\r\n> \r\n> Looking at the referenced code, we do not do the recursive check for an error when the top level exception is not an error. So if an exception wraps an error it will not halt.\r\n\r\nCorrect. However, if an exception was raised in the minc thread and was uncaught, as you suggested earlier, then there should be an ERROR message in the log with the stack trace. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544465591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544467214","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544467214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544467214,"node_id":"IC_kwDOACaFSM5cDrMO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:15:50Z","updated_at":"2023-05-11T18:15:50Z","author_association":"CONTRIBUTOR","body":"> Correct. However, if an exception was raised in the minc thread and was uncaught, as you suggested earlier, then there should be an ERROR message in the log with the stack trace.\r\n\r\nYeah, hopefully there are two.  One from the uncaught handler and one from the minc code.  I am going to make a quick draft PR to change the uncaught handler.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544467214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544477016","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544477016","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544477016,"node_id":"IC_kwDOACaFSM5cDtlY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:23:14Z","updated_at":"2023-05-11T18:23:14Z","author_association":"CONTRIBUTOR","body":"> > As an aside, this Error seems like it shouldn't be there:\r\n> \r\n> Yeah that catching of error is suspect.\r\n\r\nI found others, I created #3395 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544477016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544492171","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544492171","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544492171,"node_id":"IC_kwDOACaFSM5cDxSL","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:32:17Z","updated_at":"2023-05-11T18:32:17Z","author_association":"CONTRIBUTOR","body":"Created #3396 to modify the behavior of the uncaught exception handler","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544492171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544494752","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1544494752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1544494752,"node_id":"IC_kwDOACaFSM5cDx6g","user":{"login":"cawaring","id":34602708,"node_id":"MDQ6VXNlcjM0NjAyNzA4","avatar_url":"https://avatars.githubusercontent.com/u/34602708?v=4","gravatar_id":"","url":"https://api.github.com/users/cawaring","html_url":"https://github.com/cawaring","followers_url":"https://api.github.com/users/cawaring/followers","following_url":"https://api.github.com/users/cawaring/following{/other_user}","gists_url":"https://api.github.com/users/cawaring/gists{/gist_id}","starred_url":"https://api.github.com/users/cawaring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cawaring/subscriptions","organizations_url":"https://api.github.com/users/cawaring/orgs","repos_url":"https://api.github.com/users/cawaring/repos","events_url":"https://api.github.com/users/cawaring/events{/privacy}","received_events_url":"https://api.github.com/users/cawaring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:34:29Z","updated_at":"2023-05-11T18:34:29Z","author_association":"NONE","body":"I do not see those messages in the logs","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544494752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544501443","html_url":"https://github.com/apache/accumulo/pull/3392#issuecomment-1544501443","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3392","id":1544501443,"node_id":"IC_kwDOACaFSM5cDzjD","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:40:15Z","updated_at":"2023-05-11T18:40:15Z","author_association":"CONTRIBUTOR","body":"Looking at the code I noticed the increment for the bulk import code is also in the wrong place.  Going to push a fix for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544501443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544506814","html_url":"https://github.com/apache/accumulo/pull/3396#issuecomment-1544506814","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3396","id":1544506814,"node_id":"IC_kwDOACaFSM5cD02-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:45:05Z","updated_at":"2023-05-11T18:45:05Z","author_association":"CONTRIBUTOR","body":"I think this conflicts with the advice given [here](https://github.com/apache/accumulo/pull/3375#issuecomment-1536311772). ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544506814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544516619","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1544516619","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1544516619,"node_id":"IC_kwDOACaFSM5cD3QL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T18:52:12Z","updated_at":"2023-05-11T18:58:12Z","author_association":"CONTRIBUTOR","body":"We did not fix the ITs when merging the OnDemand changes because we thought that it made sense that they continue to fail until we moved the tablet management code from the TabletServer to the Manager. For getting disk usage, `TableDiskUsage.getDiskUsage` scans either the `Root` or `Metadata` tables, both of which should always be hosted. While this fix makes the test pass, I'm not sure that it's the right one. Do you know where in the codepath it's waiting for the tables to be hosted? I think that's what we want to fix.\r\n\r\nEdit: Nevermind, I see now that it's not the getDiskUsage, it's the compact that is happening in the test. I think it would be good to set them back to ONDEMAND and wait for them to unload before continuing with the getDiskUsage call, to confirm that the operation does work with tablets that are not hosted. See [this](https://github.com/apache/accumulo/pull/3388/files#diff-f53bb5b2ef46b5230dbd90bb9e805acd0fdcff26d4b23a33405e407d78f2a6a6R85-R87) and [this](https://github.com/apache/accumulo/pull/3388/files#diff-f53bb5b2ef46b5230dbd90bb9e805acd0fdcff26d4b23a33405e407d78f2a6a6R270-R275) for an example on how to do that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544516619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544532329","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1544532329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1544532329,"node_id":"IC_kwDOACaFSM5cD7Fp","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T19:03:33Z","updated_at":"2023-05-11T19:03:33Z","author_association":"CONTRIBUTOR","body":"@dlmarion gotcha! I haven't looked into to it too deeply at this point. I know the timeout occurs when the compaction of the cloned table is called. \r\n\r\nI will close this PR as not going to complete as we wait for other updates to be made in the Elasticity code.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544532329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544536956","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1544536956","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1544536956,"node_id":"IC_kwDOACaFSM5cD8N8","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T19:07:34Z","updated_at":"2023-05-12T11:21:56Z","author_association":"CONTRIBUTOR","body":"Alternatively - would it be worth while to have test for both ALWAYS host and another for EVENTUALLY?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544536956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544576911","html_url":"https://github.com/apache/accumulo/pull/3396#issuecomment-1544576911","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3396","id":1544576911,"node_id":"IC_kwDOACaFSM5cEF-P","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T19:42:21Z","updated_at":"2023-05-11T19:42:31Z","author_association":"CONTRIBUTOR","body":"> I think this conflicts with the advice given https://github.com/apache/accumulo/pull/3375#issuecomment-1536311772.\r\n\r\nA wrapped error may not always come frrom Accumulo code or user plugin code, it could come from java code or third party libraries.  For example the java future class may wrap an Error in an ExecutionException then something in the Accumulo code may wrap the ExecutionException with a RuntimeException, an error occured its just not at the top level.\r\n\r\nWe don't have to make this change, but if the intention is to halt on Error I think its reasonable to expect it to be possibly wrapped for many different reasons.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544576911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544600103","html_url":"https://github.com/apache/accumulo/pull/3396#issuecomment-1544600103","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3396","id":1544600103,"node_id":"IC_kwDOACaFSM5cELon","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T20:02:03Z","updated_at":"2023-05-11T20:02:03Z","author_association":"CONTRIBUTOR","body":"That's fair, for implementations of pluggable code where they raise an Exception because they want to suppress an Error, then they will need to make sure that they don't set the Error as the cause or a suppressed throwable.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544600103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544758348","html_url":"https://github.com/apache/accumulo/pull/3375#issuecomment-1544758348","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3375","id":1544758348,"node_id":"IC_kwDOACaFSM5cEyRM","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T22:11:54Z","updated_at":"2023-05-11T22:11:54Z","author_association":"MEMBER","body":"@EdColeman Can we close this WIP PR? I don't think that it's still being worked on, and doesn't seem likely to go anywhere. We can still discuss on a closed PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544758348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544766667","html_url":"https://github.com/apache/accumulo/pull/3375#issuecomment-1544766667","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3375","id":1544766667,"node_id":"IC_kwDOACaFSM5cE0TL","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T22:19:19Z","updated_at":"2023-05-11T22:19:19Z","author_association":"CONTRIBUTOR","body":"Everyone agrees this is a bad approach and leveraging the SPI as discussed should be used by users.  \r\n\r\nThere are also discussions of nesting / wrapping Errors with Exceptions that can occur (similar to what this looked like) in  PR 3396 - users and libraries that wrap Errors with Exceptions need to evaluate the expectations of the UncaughtExceptionHandler and the expected consequences when running in a thread.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544766667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544820857","html_url":"https://github.com/apache/accumulo/pull/3385#issuecomment-1544820857","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3385","id":1544820857,"node_id":"IC_kwDOACaFSM5cFBh5","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T23:19:59Z","updated_at":"2023-05-11T23:19:59Z","author_association":"CONTRIBUTOR","body":"Thanks for the detailed review and information @keith-turner . Based on that (and after talking to Keith more about it in detail) I'm going to close this PR as it isn't going to help the way I thought as the normalization is going to break things and this extra object isn't buying much over just using the existing `StoredTabletFile` and `TabletFile` classes.\r\n\r\nInstead, I'm going to create a new PR that just goes ahead and starts using `StoredTabletFile` and `TabletFile` in the places in the code where we are only tracking the tablet file by a Path or a String. This is necessary because when we add Range information in the future we will need to also access the Range and not just the file path when reading.\r\n\r\nThe most notable example of where things will need to change is the [FileOperations](https://github.com/apache/accumulo/blob/9c6db1f3b63f4acfcd85b83a7ec3c119c7f6f0c8/core/src/main/java/org/apache/accumulo/core/file/FileOperations.java) class (and subclasses) and [FileManager](https://github.com/apache/accumulo/blob/9c6db1f3b63f4acfcd85b83a7ec3c119c7f6f0c8/server/base/src/main/java/org/apache/accumulo/server/fs/FileManager.java) but there will be others as well. Those classes need to track the TabletFile so when we add the Range in a future PR it can use it to build the readers. I have actually already prototyped this a bit in my other [PR](https://github.com/apache/accumulo/pull/3332/files#diff-a98b98051dbb7d70a19025b944c64e4b74a08d7a9aaecc9f72b2b17be55a3008) but that PR also includes the Range changes which haven't been settled yet. Instead it makes sense to just do the initial refactoring first without the Range to keep the changes smaller.\r\n\r\nAlso note that even with tracking a `TabletFile` we still need to get the metadata string representation for serialization when dealing with the metadata table. This is unavoidable of course and the format will change in the future (likely to Json instead of just a file path as it will have a serialized range) so we will need to handle that.  A good example of this is ExternalCompactionMetadata. This class already [tracks](https://github.com/apache/accumulo/blob/9c6db1f3b63f4acfcd85b83a7ec3c119c7f6f0c8/core/src/main/java/org/apache/accumulo/core/metadata/schema/ExternalCompactionMetadata.java#L41) a `StoredTabletFile` but when data is serialized it calls to [getMetaUpdateDelete()](https://github.com/apache/accumulo/blob/9c6db1f3b63f4acfcd85b83a7ec3c119c7f6f0c8/core/src/main/java/org/apache/accumulo/core/metadata/schema/ExternalCompactionMetadata.java#L132) and that will be a new format. The format won't change in this first PR but it will later so just noting that we will need to be aware of that and make sure we can handle the change when the Range is added.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544820857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544825017","html_url":"https://github.com/apache/accumulo/pull/3385#issuecomment-1544825017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3385","id":1544825017,"node_id":"IC_kwDOACaFSM5cFCi5","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T23:26:26Z","updated_at":"2023-05-11T23:26:26Z","author_association":"CONTRIBUTOR","body":"Just to note the the `equal` and `hashCode` methods in `StoredTabletFile` and `TabletFile` should be fixed. The current behavior depends on the way it works now,  Something to look out for when using those classes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544825017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544854971","html_url":"https://github.com/apache/accumulo/pull/3332#issuecomment-1544854971","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3332","id":1544854971,"node_id":"IC_kwDOACaFSM5cFJ27","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T23:39:10Z","updated_at":"2023-05-11T23:39:10Z","author_association":"CONTRIBUTOR","body":"I'm going to close this for now because I'm going to create another PR first that just makes changes with using StoredTabletFile and TabletFile in more places instead of a String first so that when we do add a Range we can get to it. See https://github.com/apache/accumulo/pull/3385#issuecomment-1544820857 for more information. Also, the old Map data file is now removed as well which causes conflicts in this branch.\r\n\r\nAfter I finish the changes with using Tabletfile for tracking my plan is to reopen a new PR(s) that will then add a range to Tablet files for reading (and a new iterator, etc) and also will update how we store the files in the metadata table to include a range and treat each file and range combination uniquely.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1544854971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545048610","html_url":"https://github.com/apache/accumulo/issues/3395#issuecomment-1545048610","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3395","id":1545048610,"node_id":"IC_kwDOACaFSM5cF5Ii","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T03:11:51Z","updated_at":"2023-05-12T03:12:41Z","author_association":"MEMBER","body":"Some triage:\r\n\r\n**Stuff that's okay as is, and doesn't need to change**\r\n\r\n* The UnsatisfiedLinkError in the NativeMapLoader is okay. It's specific handling of the expected error when we try to load native maps and detect that they aren't available. We need to handle it so we can try to load it a different way, because there's multiple ways to load them.\r\n\r\n* FSError is being caught to retry when writing walogs or minor compaction files. This one is stupid, because these aren't actually Errors. These are created by Hadoop, and are wrapping IOExceptions when it encounters one with the native file system. Hadoop is needlessly upgrading their severity by wrapping IOExceptions as FSError, and we're just treating them the same as any other IOException. They should have just extended IOException and called it something better.\r\n\r\n**Stuff that's probably okay, but maybe could be improved**\r\n\r\n* LocalityGroupConfigurationError is misnamed, at a minimum. It's a regular Exception, and not public API. It can be renamed. In most places, we're treating it like an IllegalArgumentException, and are either wrapping it as such, or checking it alongside RuntimeExceptions, which would catch it if it were one. It should probably be renamed and made to extend that. Would need to check to make sure we don't break any checks that are implicitly catching it as an AcumuloException (which it currently extends).\r\n\r\n* TServerUtils is catching Error to Halt with a message. There might be a more standard way to do that, but this looks like current code, using our Threads.createThread stuff. I don't know if there's a better way to do this.\r\n\r\n**Stuff that needs further investigation**\r\n\r\n* I have no idea why we're trying to catch UnsatisfiedLinkError in the MinorCompactor. We probably shouldn't do that, as any checking of that should already be handled by our native code loader. It's possible this was added to address native loading of Hadoop native code, and it could leak out of Hadoop APIs, so we're trying to catch it here, but I have no idea.\r\n\r\n* There's a comment explaining why NoClassDefFoundError is being used to handle transient user errors in MinorCompactor that are due to temporary misconfigurations. I'm not sure under what circumstances this could be reached, though. If a user is using a context with a separate classloader for that context, I would expect user errors like this to be handled in the context's classloader. I'm not sure what the default behavior is if the user has not specified a context, or if the context is configured to user the normal system classloader. This one needs some further investigation/experimentation to see how it interoperates with the user threads and contexts.\r\n\r\n* Tablet catching Error is weird. It's specifically catching `Exception | Error`, when that's just `Throwable`. (Aside: other than tests, which are fine, we also catch Throwable in TabletServerBatchReaderIterator specifically to detect the fatal problem for the purposes of customizing a logged DEBUG message and rethrowing; that's probably okay, but as far as I can tell, that's the only other occurrence of what is effectively catching Throwable, so I thought it worth a mention here.) Here, Tablet is catching this in case an Error was thrown during the minor compaction. We're already trying to handle other Errors (see above) for minor compactions. I'm not sure what added value this one is serving.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545048610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545050552","html_url":"https://github.com/apache/accumulo/issues/3394#issuecomment-1545050552","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3394","id":1545050552,"node_id":"IC_kwDOACaFSM5cF5m4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T03:15:29Z","updated_at":"2023-05-12T03:15:29Z","author_association":"MEMBER","body":"Can you provide the exact message? It would save a ton of time, because we're doing stuff like this in multiple places for different reasons.\r\nAlso, I'm sure you've considered this, but it's worth a mention that, in general, the best way to avoid log messages about deprecated items is to use their replacements.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545050552/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545056651","html_url":"https://github.com/apache/accumulo/issues/3386#issuecomment-1545056651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3386","id":1545056651,"node_id":"IC_kwDOACaFSM5cF7GL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T03:26:48Z","updated_at":"2023-05-12T03:26:48Z","author_association":"MEMBER","body":"I'm trying to sum up the status of this issue. It looks like #3392 and #3396 probably fixed it, but we are waiting on confirmation from the reporter that this is no longer happening after the patches are applied. Based on that, I'm closing this for now, but feel free to reopen it if I've misunderstood the status, or if the issue continues occurring with these patches. If you do re-open, please provide the git commit of the SNAPSHOT you're using (a good idea whenever you open a ticket specifying a SNAPSHOT version is being used).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545056651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545058580","html_url":"https://github.com/apache/accumulo/pull/3389#issuecomment-1545058580","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3389","id":1545058580,"node_id":"IC_kwDOACaFSM5cF7kU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T03:30:28Z","updated_at":"2023-05-12T03:30:28Z","author_association":"MEMBER","body":"> > From a user experience perspective - would it be better to always show the status? Seeing that things are \"normal\" seems that it provides feedback to the user rather than needing to know that lack of status means \"good\"?\r\n> \r\n> Yea that makes sense to me. The only reason I made it this way is because that is how things are done in the 1.10 monitor.\r\n> \r\n> If it seems like we want to change things so that the status is always displayed, I am good with that.\r\n\r\nI don't think we need to do that. In the normal state, the manager information table is displayed with all the information about it. There's nothing to alert the user about. The dialog boxes are visually presented as exceptions to the normal state. If we provide a box under the normal situation, then we break that visual experience and possibly make it harder for the users to notice when the exceptional circumstances do occur.\r\n\r\nBesides, we already have a visual indicator of manager normality, with the green icon in the upper-right next to the manager menu item.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545058580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545191860","html_url":"https://github.com/apache/accumulo/pull/3342#issuecomment-1545191860","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3342","id":1545191860,"node_id":"IC_kwDOACaFSM5cGcG0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T05:34:12Z","updated_at":"2023-05-12T05:34:12Z","author_association":"MEMBER","body":"It occurs to me that this entire class is basically just Guava's Range with Hadoop's Text as the generic parameter, `Range<Text>`. I don't think we should force users to use Guava's API, but I was thinking if we only cared about using this internally, then we might be able to just use that. I still think there's value in making this available for public API, though, without relying on Guava types in the public API, but this might take the pressure off, if there was any, to get it into the public API to address the internal uses.\r\n\r\nThis is also another variant of KeyExtent, Tablet, and all those other internal types that maintain a span of row keys, of which there are already several, with slightly different purposes. Then again, making this stable public API might help simplify those others.\r\n\r\nJust a thought. I'll probably get a chance to re-review this next week.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545191860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545589368","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1545589368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1545589368,"node_id":"IC_kwDOACaFSM5cH9J4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T11:22:06Z","updated_at":"2023-05-12T11:22:06Z","author_association":"CONTRIBUTOR","body":"> Alternatively - would it be worth while to have test for both ALWAYS host and another for EVENTUALLY?\r\n\r\nI don't think so. When we move the compaction logic from the TabletServer to the Manager, then this should not time out. It should just work regardless of tablet hosting state.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545589368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545693132","html_url":"https://github.com/apache/accumulo/pull/3398#issuecomment-1545693132","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3398","id":1545693132,"node_id":"IC_kwDOACaFSM5cIWfM","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T12:48:16Z","updated_at":"2023-05-12T12:48:16Z","author_association":"CONTRIBUTOR","body":"This is a minor change targeted for 2.1 to logging based on @ctubbsii comments in #3368 . I will go ahead and merge this as soon as the CI checks pass.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545693132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545693248","html_url":"https://github.com/apache/accumulo/issues/3394#issuecomment-1545693248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3394","id":1545693248,"node_id":"IC_kwDOACaFSM5cIWhA","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T12:48:23Z","updated_at":"2023-05-12T12:48:23Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/accumulo/blob/11320ee8e6906265f9c10e0974322a6665f02df4/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableUtils.java#L498","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545693248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545694119","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1545694119","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1545694119,"node_id":"IC_kwDOACaFSM5cIWun","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T12:49:04Z","updated_at":"2023-05-12T12:49:04Z","author_association":"CONTRIBUTOR","body":"Good catch on the logging issue, I will at least fix that now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545694119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545700473","html_url":"https://github.com/apache/accumulo/issues/3371#issuecomment-1545700473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3371","id":1545700473,"node_id":"IC_kwDOACaFSM5cIYR5","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T12:54:16Z","updated_at":"2023-05-12T12:54:16Z","author_association":"CONTRIBUTOR","body":"From an operational standpoint.  I cannot have a scan thread that exposes a problem taking down tservers, especially when it is likely that that scan is being spread across a good portion of the system.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545700473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545706158","html_url":"https://github.com/apache/accumulo/issues/3363#issuecomment-1545706158","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3363","id":1545706158,"node_id":"IC_kwDOACaFSM5cIZqu","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T12:58:37Z","updated_at":"2023-05-12T12:58:37Z","author_association":"CONTRIBUTOR","body":"ok, we may update the accumulo-service command to force it to use the short name.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545706158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545716355","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1545716355","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1545716355,"node_id":"IC_kwDOACaFSM5cIcKD","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T13:05:28Z","updated_at":"2023-05-12T13:05:28Z","author_association":"CONTRIBUTOR","body":"Closing as not going to fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545716355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545717682","html_url":"https://github.com/apache/accumulo/pull/3393#issuecomment-1545717682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3393","id":1545717682,"node_id":"IC_kwDOACaFSM5cIcey","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T13:06:23Z","updated_at":"2023-05-12T13:06:23Z","author_association":"CONTRIBUTOR","body":"Not going to fix at this time as this functionality will be moving to the manager and be addressed at that time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545717682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545736196","html_url":"https://github.com/apache/accumulo/pull/3385#issuecomment-1545736196","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3385","id":1545736196,"node_id":"IC_kwDOACaFSM5cIhAE","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T13:20:05Z","updated_at":"2023-05-12T13:20:05Z","author_association":"CONTRIBUTOR","body":"> Just to note the the `equal` and `hashCode` methods in `StoredTabletFile` and `TabletFile` should be fixed. The current behavior depends on the way it works now, Something to look out for when using those classes.\r\n\r\nI will take a look at this as well as it would be nice to fix this. I can see if i can wrap that into the same PR or make a separate one as I'm working on this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545736196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545822450","html_url":"https://github.com/apache/accumulo/issues/3373#issuecomment-1545822450","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3373","id":1545822450,"node_id":"IC_kwDOACaFSM5cI2Dy","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T14:18:52Z","updated_at":"2023-05-12T14:18:52Z","author_association":"MEMBER","body":"Fixed in #3389 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1545822450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546072071","html_url":"https://github.com/apache/accumulo/issues/3399#issuecomment-1546072071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3399","id":1546072071,"node_id":"IC_kwDOACaFSM5cJzAH","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T17:37:05Z","updated_at":"2023-05-12T17:37:05Z","author_association":"CONTRIBUTOR","body":"Perhaps add a method on the ContextClassLoaderFactory to pass the accumulo configuration in, or perhaps a ServiceEnvironment implementation.  I guess a ClassLoaderEnvironment mechanism would be the cleanest way to handle this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546072071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546489784","html_url":"https://github.com/apache/accumulo/pull/3400#issuecomment-1546489784","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3400","id":1546489784,"node_id":"IC_kwDOACaFSM5cLY-4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T01:44:43Z","updated_at":"2023-05-13T01:44:43Z","author_association":"MEMBER","body":"Overall, this looks like a good idea, but I'm still working through reviewing the details of the change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546489784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546503884","html_url":"https://github.com/apache/accumulo/issues/3399#issuecomment-1546503884","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3399","id":1546503884,"node_id":"IC_kwDOACaFSM5cLcbM","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T02:44:56Z","updated_at":"2023-05-13T02:44:56Z","author_association":"MEMBER","body":"If you're using classpaths as the context, then the factory will already receive that context when it is asked for the context's corresponding context. However, I don't see a problem injecting a service environment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546503884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546532083","html_url":"https://github.com/apache/accumulo/issues/3371#issuecomment-1546532083","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3371","id":1546532083,"node_id":"IC_kwDOACaFSM5cLjTz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T05:22:47Z","updated_at":"2023-05-13T05:22:47Z","author_association":"MEMBER","body":"> From an operational standpoint. I cannot have a scan thread that exposes a problem taking down tservers, especially when it is likely that that scan is being spread across a good portion of the system.\r\n\r\nUnderstood. However, from another operational standpoint, we can't have a bad scan thread corrupt a tservers' internal state and leave it running to cause more harm, like corrupting user data or returning bad results, either. I've seen that too.\r\n\r\nThese are competing principles, but both have merits. The greater risk of the two really depends on the specific application and user risk tolerances. Best we can do is to try to make it possible for users to make their own choices, by making things more pluggable, which is what we've been doing over the last several years, to make Accumulo's components more modular, with SPI endpoints, and less tightly coupled default internal components.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546532083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546921699","html_url":"https://github.com/apache/accumulo/issues/3372#issuecomment-1546921699","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3372","id":1546921699,"node_id":"IC_kwDOACaFSM5cNCbj","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-14T15:10:57Z","updated_at":"2023-05-14T15:16:23Z","author_association":"CONTRIBUTOR","body":"With some additional testing and logs, I confirmed the issue is the `LOW_MEM_DETECTED` value is reset back to 0 on the next metrics call after being set to 1. An additional check to not update the value after being set should alleviate the flakiness. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1546921699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1547955804","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1547955804","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1547955804,"node_id":"IC_kwDOACaFSM5cQ-5c","user":{"login":"AlbertWhitlock","id":40367659,"node_id":"MDQ6VXNlcjQwMzY3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/40367659?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbertWhitlock","html_url":"https://github.com/AlbertWhitlock","followers_url":"https://api.github.com/users/AlbertWhitlock/followers","following_url":"https://api.github.com/users/AlbertWhitlock/following{/other_user}","gists_url":"https://api.github.com/users/AlbertWhitlock/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbertWhitlock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbertWhitlock/subscriptions","organizations_url":"https://api.github.com/users/AlbertWhitlock/orgs","repos_url":"https://api.github.com/users/AlbertWhitlock/repos","events_url":"https://api.github.com/users/AlbertWhitlock/events{/privacy}","received_events_url":"https://api.github.com/users/AlbertWhitlock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T14:14:56Z","updated_at":"2023-05-15T14:14:56Z","author_association":"CONTRIBUTOR","body":"@ivakegg .... on my instance I also saw the -54y-148d entry. After investigating I found it is because when gc of WAL was kicked off my instance couldn't find all of my volumes. I reconnected to 'new' volume and next gc found the volume and that allowed the value on monitor page to be updated. Perhaps a better 'default' value could be used other than epoch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1547955804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1548251586","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1548251586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1548251586,"node_id":"IC_kwDOACaFSM5cSHHC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T17:20:16Z","updated_at":"2023-05-15T17:20:16Z","author_association":"MEMBER","body":"@AlbertWhitlock wrote:\r\n> @ivakegg .... on my instance I also saw the -54y-148d entry. After investigating I found it is because when gc of WAL was kicked off my instance couldn't find all of my volumes. I reconnected to 'new' volume and next gc found the volume and that allowed the value on monitor page to be updated. Perhaps a better 'default' value could be used other than epoch.\r\n\r\nWhat do you mean it couldn't find all your volumes? What did you see that indicated that was related to this?\r\nWhat do you mean you \"reconnected to 'new' volume\"?\r\n\r\n@ivakegg When you say that it doesn't appear to be updating, does it update when you refresh the page? Or not at all?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1548251586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1548257527","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1548257527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1548257527,"node_id":"IC_kwDOACaFSM5cSIj3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T17:25:26Z","updated_at":"2023-05-15T17:25:26Z","author_association":"MEMBER","body":"If somebody can reproduce this, it would be helpful to know what the contents of `/rest/gc` show when this is happening. It'd be helpful to know if the edge case is happening in the REST endpoint or in the web view.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1548257527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549854286","html_url":"https://github.com/apache/accumulo/pull/2762#issuecomment-1549854286","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2762","id":1549854286,"node_id":"IC_kwDOACaFSM5cYOZO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T15:04:22Z","updated_at":"2023-05-16T15:04:22Z","author_association":"MEMBER","body":"This PR was originally done to try to update to spotbugs 4.7.0.0, which was very aggressive about exception handling. We are now using 4.7.3.4, which backed off on some of those aggressive checks. However, there are still some improvements that can be made based on my original PR that I was working on. So, I'll close this and those changes will be provided in a new PR, #3402","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549854286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549934651","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1549934651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1549934651,"node_id":"IC_kwDOACaFSM5cYiA7","user":{"login":"AlbertWhitlock","id":40367659,"node_id":"MDQ6VXNlcjQwMzY3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/40367659?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbertWhitlock","html_url":"https://github.com/AlbertWhitlock","followers_url":"https://api.github.com/users/AlbertWhitlock/followers","following_url":"https://api.github.com/users/AlbertWhitlock/following{/other_user}","gists_url":"https://api.github.com/users/AlbertWhitlock/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbertWhitlock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbertWhitlock/subscriptions","organizations_url":"https://api.github.com/users/AlbertWhitlock/orgs","repos_url":"https://api.github.com/users/AlbertWhitlock/repos","events_url":"https://api.github.com/users/AlbertWhitlock/events{/privacy}","received_events_url":"https://api.github.com/users/AlbertWhitlock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T15:51:58Z","updated_at":"2023-05-16T15:51:58Z","author_association":"CONTRIBUTOR","body":"@ctubbsii   What do you mean it couldn't find all your volumes? What did you see that indicated that was related to this?\r\n\r\nI have 2 instances defined in instance.volumes. When GC was executing it performed cleanup on root table, metadata table, and user table fine. When cleanup of WAL attempted it would try to find the second instance (actual physical machine) and I accidentally had them unconnected so it was throwing a java.net.NoRouteToHostException. Once I reconnected the machines, the GC runs fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549934651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549966823","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1549966823","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1549966823,"node_id":"IC_kwDOACaFSM5cYp3n","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T16:09:52Z","updated_at":"2023-05-16T16:09:52Z","author_association":"MEMBER","body":"> ... so it was throwing a java.net.NoRouteToHostException ...\r\n\r\nSo, you saw this in the GC's logs, then? And the malformed date on the monitor was only occurring when this exception was seen?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1549966823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550117327","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1550117327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1550117327,"node_id":"IC_kwDOACaFSM5cZOnP","user":{"login":"AlbertWhitlock","id":40367659,"node_id":"MDQ6VXNlcjQwMzY3NjU5","avatar_url":"https://avatars.githubusercontent.com/u/40367659?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbertWhitlock","html_url":"https://github.com/AlbertWhitlock","followers_url":"https://api.github.com/users/AlbertWhitlock/followers","following_url":"https://api.github.com/users/AlbertWhitlock/following{/other_user}","gists_url":"https://api.github.com/users/AlbertWhitlock/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbertWhitlock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbertWhitlock/subscriptions","organizations_url":"https://api.github.com/users/AlbertWhitlock/orgs","repos_url":"https://api.github.com/users/AlbertWhitlock/repos","events_url":"https://api.github.com/users/AlbertWhitlock/events{/privacy}","received_events_url":"https://api.github.com/users/AlbertWhitlock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T17:54:22Z","updated_at":"2023-05-16T17:54:22Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  So, you saw this in the GC's logs, then? And the malformed date on the monitor was only occurring when this exception was seen?\r\nCorrect on both. I saw the exception in the logs and correct, it was only happening when exception was occurring.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550117327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550157101","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1550157101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1550157101,"node_id":"IC_kwDOACaFSM5cZYUt","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T18:24:30Z","updated_at":"2023-05-16T18:24:30Z","author_association":"MEMBER","body":"@AlbertWhitlock If you can reliably reproduce the error, can you check to see if it is fixed with #3403 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550157101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550367786","html_url":"https://github.com/apache/accumulo/pull/3400#issuecomment-1550367786","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3400","id":1550367786,"node_id":"IC_kwDOACaFSM5caLwq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T21:15:34Z","updated_at":"2023-05-16T21:15:34Z","author_association":"CONTRIBUTOR","body":">  but the InitParameters doesn't seem to be as accurate as the ...Environment name. \r\n\r\nI think of it as a generic pattern, not something specific to this use.  If an API/SPI method takes 1 parameter and you later want to add another, then it would have to be overloaded.  Overloading is not a great way to evolve methods, especially for plugins.  If each plugin interface method uses a bit of indirection and  only takes one parameter which is an interface that gives access to all of the actual parameters, it makes it much easier to evolve the inputs for the method.  So I see this as a generic pattern that all SPI methods can follow.  If they are all following same pattern, its nice to use the same names.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1550367786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551872773","html_url":"https://github.com/apache/accumulo/pull/3403#issuecomment-1551872773","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3403","id":1551872773,"node_id":"IC_kwDOACaFSM5cf7MF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T18:29:51Z","updated_at":"2023-05-17T18:29:51Z","author_association":"MEMBER","body":"Looks like this might not be a complete fix. I was able to reproduce the error by killing a tserver, and the error occurred in the Manager, not the GC. So, I think there's a place I missed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551872773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551888968","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1551888968","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1551888968,"node_id":"IC_kwDOACaFSM5cf_JI","user":{"login":"keith-ratcliffe","id":1606834,"node_id":"MDQ6VXNlcjE2MDY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1606834?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-ratcliffe","html_url":"https://github.com/keith-ratcliffe","followers_url":"https://api.github.com/users/keith-ratcliffe/followers","following_url":"https://api.github.com/users/keith-ratcliffe/following{/other_user}","gists_url":"https://api.github.com/users/keith-ratcliffe/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-ratcliffe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-ratcliffe/subscriptions","organizations_url":"https://api.github.com/users/keith-ratcliffe/orgs","repos_url":"https://api.github.com/users/keith-ratcliffe/repos","events_url":"https://api.github.com/users/keith-ratcliffe/events{/privacy}","received_events_url":"https://api.github.com/users/keith-ratcliffe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T18:44:29Z","updated_at":"2023-05-17T18:59:38Z","author_association":"CONTRIBUTOR","body":"> It'd be helpful to know if the edge case is happening in the REST endpoint or in the web view.\r\n\r\nAs far as the Duration value for the Current GC, I'm able to confirm that the web view and the rest endpoint agree, i.e., they're reflective of the same negative value, formatted differently of course\r\n\r\n> When you say that it doesn't appear to be updating, does it update when you refresh the page? Or not at all?\r\n\r\nI am unable to replicate this atm. With auto-refresh enabled, activity updates seem to be appearing with the expected frequency for all the GC types, just that the Duration for Current GC is always the -54y-1XXd value\r\n\r\nI'll see if I can get our system patched with your updates from #3403 and then report back\r\n\r\nUPDATE: Just to clarify, the -54y-1XXd Duration value appears for both \"Current GC\" and \"Current WAL\" whenever there is activity in progress. Duration is \"---\" for both during periods of inactivity","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551888968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551972166","html_url":"https://github.com/apache/accumulo/pull/3403#issuecomment-1551972166","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3403","id":1551972166,"node_id":"IC_kwDOACaFSM5cgTdG","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T20:00:27Z","updated_at":"2023-05-17T20:01:05Z","author_association":"MEMBER","body":"After further investigation, it seems this will fix the issue where the finished state is not updated (and stays 0) and the cycle stats aren't updated, if there's an exception that occurred during the cycle.\r\n\r\nThis does not yet fix the situation where the current cycle is not yet finished, and has not set a finished time. In those cases, we set ManagerInformation to have a \"Running\" label for the gcStatus (it can also take a value of \"Down\" or \"Waiting\"), but it doesn't appear to be used anywhere, and appears to be different than the StatusInformation resource object, which also has a gcStatus, but uses items like \"OK\" and \"ERROR\" instead, and power some specific visual items in the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551972166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551990097","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1551990097","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1551990097,"node_id":"IC_kwDOACaFSM5cgX1R","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T20:10:08Z","updated_at":"2023-05-17T20:10:08Z","author_association":"MEMBER","body":"@keith-ratcliffe I came to the same conclusion. It looks like this was broken by the changes in #2297 . My fix in #3403 only fixes the case where an exception occurred in the last cycle. In those cases, the last cycle could still appear as the current cycle (because it didn't roll over properly) and wouldn't have the finished time set (so it would be 0), resulting in a negative number when computing the duration by subtracting out the start time.\r\n\r\nI still need to do more to fix it when it's still currently running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1551990097/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1552185828","html_url":"https://github.com/apache/accumulo/pull/3403#issuecomment-1552185828","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3403","id":1552185828,"node_id":"IC_kwDOACaFSM5chHnk","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T22:52:47Z","updated_at":"2023-05-17T22:52:47Z","author_association":"MEMBER","body":"Should be fixed with that latest commit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1552185828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1552186258","html_url":"https://github.com/apache/accumulo/issues/3374#issuecomment-1552186258","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3374","id":1552186258,"node_id":"IC_kwDOACaFSM5chHuS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T22:53:29Z","updated_at":"2023-05-17T22:53:29Z","author_association":"MEMBER","body":"Should be fixed with my latest commit in #3403","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1552186258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]