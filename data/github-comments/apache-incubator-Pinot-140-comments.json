[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1150534643","html_url":"https://github.com/apache/pinot/pull/8860#issuecomment-1150534643","issue_url":"https://api.github.com/repos/apache/pinot/issues/8860","id":1150534643,"node_id":"IC_kwDOATCU_c5Ek8Pz","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T00:11:05Z","updated_at":"2022-06-09T00:11:05Z","author_association":"CONTRIBUTOR","body":"> > ok. in this case I would suggest we add FLOAT/BYTES to the ignore list and still merge the integration test PR.\r\n> \r\n> How much effort does it take to make the new engine work on a new data table format if we add one? The goal is to avoid spending a lot of effort for backward compatibility when we upgrade the new format. Since the engine is new added, it would be good to make it directly work on the latest format\r\n\r\nno effort. as it is already assuming new format. \r\nthe problem is backward compatibility is not handled correctly when move from V2 to V3 --> the data format are still managed in a common Utils class. I will refactor our the common util class and make 2 versions one for V2, V3 and one for V4.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1150534643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151003466","html_url":"https://github.com/apache/pinot/pull/8870#issuecomment-1151003466","issue_url":"https://api.github.com/repos/apache/pinot/issues/8870","id":1151003466,"node_id":"IC_kwDOATCU_c5EmutK","user":{"login":"saurabhd336","id":7672118,"node_id":"MDQ6VXNlcjc2NzIxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7672118?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabhd336","html_url":"https://github.com/saurabhd336","followers_url":"https://api.github.com/users/saurabhd336/followers","following_url":"https://api.github.com/users/saurabhd336/following{/other_user}","gists_url":"https://api.github.com/users/saurabhd336/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabhd336/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabhd336/subscriptions","organizations_url":"https://api.github.com/users/saurabhd336/orgs","repos_url":"https://api.github.com/users/saurabhd336/repos","events_url":"https://api.github.com/users/saurabhd336/events{/privacy}","received_events_url":"https://api.github.com/users/saurabhd336/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T11:27:06Z","updated_at":"2022-06-09T11:27:06Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang @npawar @KKcorps Followup for https://github.com/apache/pinot/pull/8848. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151003466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151348568","html_url":"https://github.com/apache/pinot/pull/8871#issuecomment-1151348568","issue_url":"https://api.github.com/repos/apache/pinot/issues/8871","id":1151348568,"node_id":"IC_kwDOATCU_c5EoC9Y","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T16:28:27Z","updated_at":"2022-06-09T16:28:27Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8871](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c407502) into [master](https://codecov.io/gh/apache/pinot/commit/e8f9d88fc3ab9ba8ca9a4e0c2dfce49c0dbbfd7b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e8f9d88) will **decrease** coverage by `0.05%`.\n> The diff coverage is `68.10%`.\n\n> :exclamation: Current head c407502 differs from pull request most recent head 736e26d. Consider uploading reports for the commit 736e26d to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8871      +/-   ##\n============================================\n- Coverage     68.56%   68.51%   -0.06%     \n- Complexity     4640     4977     +337     \n============================================\n  Files          1741     1804      +63     \n  Lines         91475    93883    +2408     \n  Branches      13674    13981     +307     \n============================================\n+ Hits          62724    64325    +1601     \n- Misses        24363    25056     +693     \n- Partials       4388     4502     +114     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.30% <1.08%> (-0.77%)` | :arrow_down: |\n| unittests1 | `66.43% <72.23%> (+0.21%)` | :arrow_up: |\n| unittests2 | `15.45% <61.50%> (+1.33%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...roker/requesthandler/BaseBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvQmFzZUJyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `68.45% <ø> (ø)` | |\n| [...roker/requesthandler/GrpcBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvR3JwY0Jyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...requesthandler/MultiStageBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvTXVsdGlTdGFnZUJyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ctionaryBasedSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9kaWN0aW9uYXJ5L0RpY3Rpb25hcnlCYXNlZFNpbmdsZUNvbHVtbkRpc3RpbmN0T25seUV4ZWN1dG9yLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...e/pinot/plugin/stream/kinesis/KinesisConsumer.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zdHJlYW0taW5nZXN0aW9uL3Bpbm90LWtpbmVzaXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9zdHJlYW0va2luZXNpcy9LaW5lc2lzQ29uc3VtZXIuamF2YQ==) | `33.33% <0.00%> (-1.33%)` | :arrow_down: |\n| [...segment/creator/impl/SegmentDictionaryCreator.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2NyZWF0b3IvaW1wbC9TZWdtZW50RGljdGlvbmFyeUNyZWF0b3IuamF2YQ==) | `91.11% <0.00%> (-1.55%)` | :arrow_down: |\n| [...gment/index/column/IntermediateIndexContainer.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2NvbHVtbi9JbnRlcm1lZGlhdGVJbmRleENvbnRhaW5lci5qYXZh) | `81.57% <ø> (ø)` | |\n| [...al/segment/index/datasource/MutableDataSource.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2RhdGFzb3VyY2UvTXV0YWJsZURhdGFTb3VyY2UuamF2YQ==) | `87.50% <ø> (ø)` | |\n| [...ache/pinot/segment/local/utils/IngestionUtils.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9Jbmdlc3Rpb25VdGlscy5qYXZh) | `28.07% <0.00%> (-0.17%)` | :arrow_down: |\n| [.../pinot/server/starter/helix/BaseServerStarter.java](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9CYXNlU2VydmVyU3RhcnRlci5qYXZh) | `56.72% <0.00%> (-0.76%)` | :arrow_down: |\n| ... and [149 more](https://codecov.io/gh/apache/pinot/pull/8871/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e8f9d88...736e26d](https://codecov.io/gh/apache/pinot/pull/8871?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151348568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151613179","html_url":"https://github.com/apache/pinot/pull/8873#issuecomment-1151613179","issue_url":"https://api.github.com/repos/apache/pinot/issues/8873","id":1151613179,"node_id":"IC_kwDOATCU_c5EpDj7","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T20:53:27Z","updated_at":"2022-06-09T22:45:22Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8873](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (77e2f5e) into [master](https://codecov.io/gh/apache/pinot/commit/6984719f24ecc6f7ee882a2c0f9012cc57037640?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6984719) will **increase** coverage by `0.03%`.\n> The diff coverage is `68.37%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8873      +/-   ##\n============================================\n+ Coverage     69.71%   69.75%   +0.03%     \n+ Complexity     4993     4600     -393     \n============================================\n  Files          1804     1805       +1     \n  Lines         93883    94073     +190     \n  Branches      13981    14039      +58     \n============================================\n+ Hits          65453    65623     +170     \n- Misses        23884    23889       +5     \n- Partials       4546     4561      +15     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.34% <18.37%> (+0.05%)` | :arrow_up: |\n| integration2 | `24.81% <18.37%> (-0.09%)` | :arrow_down: |\n| unittests1 | `66.49% <63.67%> (+0.05%)` | :arrow_up: |\n| unittests2 | `15.42% <0.00%> (-0.07%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...y/distinct/raw/RawMultiColumnDistinctExecutor.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3TXVsdGlDb2x1bW5EaXN0aW5jdEV4ZWN1dG9yLmphdmE=) | `52.04% <43.37%> (-36.85%)` | :arrow_down: |\n| [...not/core/query/distinct/DistinctExecutorUtils.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9EaXN0aW5jdEV4ZWN1dG9yVXRpbHMuamF2YQ==) | `73.80% <73.80%> (ø)` | |\n| [...ictionaryBasedMultiColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9kaWN0aW9uYXJ5L0RpY3Rpb25hcnlCYXNlZE11bHRpQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `87.09% <84.61%> (+0.43%)` | :arrow_up: |\n| [...ionaryBasedMultiColumnDistinctOrderByExecutor.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9kaWN0aW9uYXJ5L0RpY3Rpb25hcnlCYXNlZE11bHRpQ29sdW1uRGlzdGluY3RPcmRlckJ5RXhlY3V0b3IuamF2YQ==) | `98.14% <96.77%> (+0.71%)` | :arrow_up: |\n| [...t/core/query/distinct/DistinctExecutorFactory.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9EaXN0aW5jdEV4ZWN1dG9yRmFjdG9yeS5qYXZh) | `88.09% <100.00%> (+0.59%)` | :arrow_up: |\n| [...ller/helix/core/minion/TaskTypeMetricsUpdater.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrVHlwZU1ldHJpY3NVcGRhdGVyLmphdmE=) | `80.00% <0.00%> (-20.00%)` | :arrow_down: |\n| [...onaryBasedSingleColumnDistinctOrderByExecutor.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9kaWN0aW9uYXJ5L0RpY3Rpb25hcnlCYXNlZFNpbmdsZUNvbHVtbkRpc3RpbmN0T3JkZXJCeUV4ZWN1dG9yLmphdmE=) | `56.66% <0.00%> (-20.00%)` | :arrow_down: |\n| [...nction/DistinctCountBitmapAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50Qml0bWFwQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `47.66% <0.00%> (-11.40%)` | :arrow_down: |\n| [...ntroller/helix/core/minion/TaskMetricsEmitter.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrTWV0cmljc0VtaXR0ZXIuamF2YQ==) | `86.04% <0.00%> (-4.66%)` | :arrow_down: |\n| [...r/validation/RealtimeSegmentValidationManager.java](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci92YWxpZGF0aW9uL1JlYWx0aW1lU2VnbWVudFZhbGlkYXRpb25NYW5hZ2VyLmphdmE=) | `76.05% <0.00%> (-2.82%)` | :arrow_down: |\n| ... and [30 more](https://codecov.io/gh/apache/pinot/pull/8873/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6984719...77e2f5e](https://codecov.io/gh/apache/pinot/pull/8873?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151613179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151662763","html_url":"https://github.com/apache/pinot/pull/8852#issuecomment-1151662763","issue_url":"https://api.github.com/repos/apache/pinot/issues/8852","id":1151662763,"node_id":"IC_kwDOATCU_c5EpPqr","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T21:57:27Z","updated_at":"2022-06-09T21:57:27Z","author_association":"CONTRIBUTOR","body":"cc @walterddr @apucher for context","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151662763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151692472","html_url":"https://github.com/apache/pinot/pull/8873#issuecomment-1151692472","issue_url":"https://api.github.com/repos/apache/pinot/issues/8873","id":1151692472,"node_id":"IC_kwDOATCU_c5EpW64","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T22:51:53Z","updated_at":"2022-06-09T22:51:53Z","author_association":"CONTRIBUTOR","body":"Please put examples for release notes of the multi-value behavior.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151692472/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151701663","html_url":"https://github.com/apache/pinot/pull/8871#issuecomment-1151701663","issue_url":"https://api.github.com/repos/apache/pinot/issues/8871","id":1151701663,"node_id":"IC_kwDOATCU_c5EpZKf","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T23:11:15Z","updated_at":"2022-06-09T23:11:15Z","author_association":"CONTRIBUTOR","body":"duplicate of https://github.com/apache/pinot/pull/8858","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151701663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151705437","html_url":"https://github.com/apache/pinot/pull/8753#issuecomment-1151705437","issue_url":"https://api.github.com/repos/apache/pinot/issues/8753","id":1151705437,"node_id":"IC_kwDOATCU_c5EpaFd","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T23:19:37Z","updated_at":"2022-06-09T23:19:37Z","author_association":"CONTRIBUTOR","body":"@jasperjiaguo  - let's add a brief summary of the improvement numbers we saw from internal performance test on prod data. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151705437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151711497","html_url":"https://github.com/apache/pinot/issues/8875#issuecomment-1151711497","issue_url":"https://api.github.com/repos/apache/pinot/issues/8875","id":1151711497,"node_id":"IC_kwDOATCU_c5EpbkJ","user":{"login":"somandal","id":47411403,"node_id":"MDQ6VXNlcjQ3NDExNDAz","avatar_url":"https://avatars.githubusercontent.com/u/47411403?v=4","gravatar_id":"","url":"https://api.github.com/users/somandal","html_url":"https://github.com/somandal","followers_url":"https://api.github.com/users/somandal/followers","following_url":"https://api.github.com/users/somandal/following{/other_user}","gists_url":"https://api.github.com/users/somandal/gists{/gist_id}","starred_url":"https://api.github.com/users/somandal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/somandal/subscriptions","organizations_url":"https://api.github.com/users/somandal/orgs","repos_url":"https://api.github.com/users/somandal/repos","events_url":"https://api.github.com/users/somandal/events{/privacy}","received_events_url":"https://api.github.com/users/somandal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T23:32:22Z","updated_at":"2022-06-09T23:33:09Z","author_association":"CONTRIBUTOR","body":"need to fix this to work on: https://github.com/apache/pinot/issues/7870\r\n\r\nI'll be working on a fix for this issue. Unable to assign it to myself","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151711497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151713438","html_url":"https://github.com/apache/pinot/issues/8875#issuecomment-1151713438","issue_url":"https://api.github.com/repos/apache/pinot/issues/8875","id":1151713438,"node_id":"IC_kwDOATCU_c5EpcCe","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T23:36:42Z","updated_at":"2022-06-09T23:37:13Z","author_association":"CONTRIBUTOR","body":"Thanks @somandal. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151713438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151752131","html_url":"https://github.com/apache/pinot/pull/8753#issuecomment-1151752131","issue_url":"https://api.github.com/repos/apache/pinot/issues/8753","id":1151752131,"node_id":"IC_kwDOATCU_c5EplfD","user":{"login":"jasperjiaguo","id":10736840,"node_id":"MDQ6VXNlcjEwNzM2ODQw","avatar_url":"https://avatars.githubusercontent.com/u/10736840?v=4","gravatar_id":"","url":"https://api.github.com/users/jasperjiaguo","html_url":"https://github.com/jasperjiaguo","followers_url":"https://api.github.com/users/jasperjiaguo/followers","following_url":"https://api.github.com/users/jasperjiaguo/following{/other_user}","gists_url":"https://api.github.com/users/jasperjiaguo/gists{/gist_id}","starred_url":"https://api.github.com/users/jasperjiaguo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasperjiaguo/subscriptions","organizations_url":"https://api.github.com/users/jasperjiaguo/orgs","repos_url":"https://api.github.com/users/jasperjiaguo/repos","events_url":"https://api.github.com/users/jasperjiaguo/events{/privacy}","received_events_url":"https://api.github.com/users/jasperjiaguo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T00:38:38Z","updated_at":"2022-06-10T00:38:38Z","author_association":"CONTRIBUTOR","body":"> Minor but LGTM. These can be addressed in later PR.\r\n\r\nThanks, will address these in a follow-up PR","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151752131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151974962","html_url":"https://github.com/apache/pinot/pull/8879#issuecomment-1151974962","issue_url":"https://api.github.com/repos/apache/pinot/issues/8879","id":1151974962,"node_id":"IC_kwDOATCU_c5Eqb4y","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T05:52:53Z","updated_at":"2022-06-13T06:12:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8879](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8d9a75a) into [master](https://codecov.io/gh/apache/pinot/commit/aed8d4549c2147e63e99a8642fea925f44c3b9af?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (aed8d45) will **decrease** coverage by `54.27%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8879       +/-   ##\n=============================================\n- Coverage     69.66%   15.38%   -54.28%     \n+ Complexity     4999      170     -4829     \n=============================================\n  Files          1806     1759       -47     \n  Lines         94202    92290     -1912     \n  Branches      14050    13845      -205     \n=============================================\n- Hits          65623    14197    -51426     \n- Misses        24019    77063    +53044     \n+ Partials       4560     1030     -3530     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `15.38% <0.00%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../org/apache/pinot/core/common/MinionConstants.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vTWluaW9uQ29uc3RhbnRzLmphdmE=) | `0.00% <ø> (ø)` | |\n| [...t/processing/framework/SegmentProcessorConfig.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvZnJhbWV3b3JrL1NlZ21lbnRQcm9jZXNzb3JDb25maWcuamF2YQ==) | `0.00% <0.00%> (-95.66%)` | :arrow_down: |\n| [.../processing/genericrow/GenericRowDeserializer.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvZ2VuZXJpY3Jvdy9HZW5lcmljUm93RGVzZXJpYWxpemVyLmphdmE=) | `0.00% <0.00%> (-89.42%)` | :arrow_down: |\n| [...t/processing/genericrow/GenericRowFileManager.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvZ2VuZXJpY3Jvdy9HZW5lcmljUm93RmlsZU1hbmFnZXIuamF2YQ==) | `0.00% <0.00%> (-84.85%)` | :arrow_down: |\n| [...nt/processing/genericrow/GenericRowFileReader.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvZ2VuZXJpY3Jvdy9HZW5lcmljUm93RmlsZVJlYWRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nt/processing/genericrow/GenericRowSerializer.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvZ2VuZXJpY3Jvdy9HZW5lcmljUm93U2VyaWFsaXplci5qYXZh) | `0.00% <0.00%> (-93.28%)` | :arrow_down: |\n| [.../core/segment/processing/mapper/SegmentMapper.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zZWdtZW50L3Byb2Nlc3NpbmcvbWFwcGVyL1NlZ21lbnRNYXBwZXIuamF2YQ==) | `0.00% <0.00%> (-88.14%)` | :arrow_down: |\n| [...src/main/java/org/apache/pinot/sql/FilterKind.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcWwvRmlsdGVyS2luZC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ain/java/org/apache/pinot/core/data/table/Key.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0tleS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...in/java/org/apache/pinot/spi/utils/StringUtil.java](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvU3RyaW5nVXRpbC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1374 more](https://codecov.io/gh/apache/pinot/pull/8879/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [aed8d45...8d9a75a](https://codecov.io/gh/apache/pinot/pull/8879?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1151974962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152003940","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152003940","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152003940,"node_id":"IC_kwDOATCU_c5Eqi9k","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T06:26:08Z","updated_at":"2022-06-10T06:26:08Z","author_association":"CONTRIBUTOR","body":"It does not work for all characters because of the surrogate. Comparing UTF-8 byte-by-byte returns the code point order, but not the lexicographic order (expected). The code point order is the same as lexicographic order for code point U+0000 to U+D7FF, so we can check the values when building the string dictionary, and store a flag if all the characters are at this range.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152003940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152004423","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152004423","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152004423,"node_id":"IC_kwDOATCU_c5EqjFH","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T06:26:36Z","updated_at":"2022-06-10T06:26:36Z","author_association":"CONTRIBUTOR","body":"For reference: https://en.wikipedia.org/wiki/UTF-16","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152004423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152036782","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152036782","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152036782,"node_id":"IC_kwDOATCU_c5Eqq-u","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T06:58:41Z","updated_at":"2022-06-10T06:58:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8878](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c19000c) into [master](https://codecov.io/gh/apache/pinot/commit/90fa0f910449ef194b253a081ddd4cbe02710aa8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (90fa0f9) will **decrease** coverage by `44.82%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8878       +/-   ##\n=============================================\n- Coverage     69.74%   24.91%   -44.83%     \n+ Complexity     4683       45     -4638     \n=============================================\n  Files          1805     1793       -12     \n  Lines         94006    93672      -334     \n  Branches      13992    13960       -32     \n=============================================\n- Hits          65563    23341    -42222     \n- Misses        23904    68081    +44177     \n+ Partials       4539     2250     -2289     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `24.91% <0.00%> (-0.08%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ment/local/io/util/FixedByteValueReaderWriter.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL0ZpeGVkQnl0ZVZhbHVlUmVhZGVyV3JpdGVyLmphdmE=) | `0.00% <0.00%> (-92.99%)` | :arrow_down: |\n| [...pache/pinot/segment/local/io/util/ValueReader.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1ZhbHVlUmVhZGVyLmphdmE=) | `0.00% <ø> (-100.00%)` | :arrow_down: |\n| [...ot/segment/local/io/util/VarLengthValueReader.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1Zhckxlbmd0aFZhbHVlUmVhZGVyLmphdmE=) | `0.00% <0.00%> (-75.00%)` | :arrow_down: |\n| [...segment/index/readers/BaseImmutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvQmFzZUltbXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `0.00% <0.00%> (-94.04%)` | :arrow_down: |\n| [...in/java/org/apache/pinot/spi/utils/StringUtil.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvU3RyaW5nVXRpbC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/spi/trace/BaseRecording.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdHJhY2UvQmFzZVJlY29yZGluZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/spi/trace/NoOpRecording.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdHJhY2UvTm9PcFJlY29yZGluZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/user/RoleType.java](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3VzZXIvUm9sZVR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1318 more](https://codecov.io/gh/apache/pinot/pull/8878/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [90fa0f9...c19000c](https://codecov.io/gh/apache/pinot/pull/8878?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152036782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152049617","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152049617","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152049617,"node_id":"IC_kwDOATCU_c5EquHR","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T07:16:29Z","updated_at":"2022-06-10T07:16:29Z","author_association":"MEMBER","body":"I’m not sure this is valid for UTF-8 anyway unless the text is normalized, because UTF-8 doesn’t guarantee the uniqueness of representation of characters. For example: both \"\\u00e9\" and \"\\u0065\\u0301\" represent 'é'.\r\n\r\nAdding some tests with text from European languages (e.g. French, Czech) should surface this. Normalizing UTF-8 on ingestion solves this problem, if it is not done already. \r\n\r\nThe size of this improvement depends on the data: how long the values are and on common prefixes within the set of strings. \r\n\r\nThe best case for this optimisation relative to the baseline is uniformly random long strings (so the loop terminates on the first byte 255 times in 256, and the cost of materialising the string is exacerbated), but natural language text is never uniformly distributed and some sequences of bytes are very common.\r\n\r\nWhen there is more regularity in the data (imagine the strings are English book titles and a good percentage of them start with “The “ but others start with “Their” or other common words prefixed by “The” and the average length is ~16 bytes) you might get a different relative outcome. Comparing byte by byte would be even worse with URLs, which have very regular and long common prefixes. It would be better to read the unpadded bytes into the buffer and perform a vectorized comparison with Arrays.mismatch, this will likely regress on randomly generated data but will be much faster otherwise. Please compare with the existing baseline for URLs, book titles, people’s names written in English from a range of cultures, etc. too.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152049617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152108665","html_url":"https://github.com/apache/pinot/pull/8879#issuecomment-1152108665","issue_url":"https://api.github.com/repos/apache/pinot/issues/8879","id":1152108665,"node_id":"IC_kwDOATCU_c5Eq8h5","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T08:25:27Z","updated_at":"2022-06-10T08:25:27Z","author_association":"MEMBER","body":"For dedup mode the sort is over all dimensions, so will this help in that case?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152108665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152506922","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1152506922","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1152506922,"node_id":"IC_kwDOATCU_c5Esdwq","user":{"login":"gortiz","id":1913993,"node_id":"MDQ6VXNlcjE5MTM5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1913993?v=4","gravatar_id":"","url":"https://api.github.com/users/gortiz","html_url":"https://github.com/gortiz","followers_url":"https://api.github.com/users/gortiz/followers","following_url":"https://api.github.com/users/gortiz/following{/other_user}","gists_url":"https://api.github.com/users/gortiz/gists{/gist_id}","starred_url":"https://api.github.com/users/gortiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gortiz/subscriptions","organizations_url":"https://api.github.com/users/gortiz/orgs","repos_url":"https://api.github.com/users/gortiz/repos","events_url":"https://api.github.com/users/gortiz/events{/privacy}","received_events_url":"https://api.github.com/users/gortiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T15:55:11Z","updated_at":"2022-06-14T08:24:48Z","author_association":"CONTRIBUTOR","body":"My last commit includes a JMH benchmark. I found several interesting things. Please take a look, some of my conclusions are so shocking that it wouldn't surprise me if another pair of eyes discovered that I did something wrong.\r\n\r\nTL;DR: I think we should apply this optimization only when executed in columns without indexes. This may make the implementation more difficult, but the performance gain may be very large.\r\n\r\nBenchmarks are:\r\n- optimal1Like: `SELECT INT_COL FROM MyTable WHERE DOMAIN_NAMES LIKE 'domain0'`\r\n- optimal1Regex: `SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, 'domain0')`\r\n- optimal10: `SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, 'domain\\d')`\r\n- increasing10Like: `SELECT INT_COL FROM MyTable WHERE DOMAIN_NAMES LIKE '%domain0%' or DOMAIN_NAMES LIKE '%domain1%' or ... or DOMAIN_NAMES LIKE '%domain9%'`\r\n- increasing10Regex: `SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES LIKE, '^.domain0.*$') or ... or regexp_like(DOMAIN_NAMES LIKE, '^.domain9.*$')`\r\n- increasing10Fusing: `SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')`\r\n- decreasing9Like, decreasing9Regex and decreasing9Fusing: Are like `increasing10Like`, `increasing10Regex` and `increasing10Fusing` but going from 9 to 1\r\n   - Note: they have in fact 9 elements. This a mistake. Initially queries where created dynamically and I did it wrong. But it was a lucky mistake that shows that Lucene fails when there are 10 fused expression but it doesn't fail when there are 9.\r\n\r\nLast results I´ve got were:\r\n```\r\nBenchmark                               (_fstType)  Mode  Cnt     Score      Error  Units\r\nBenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like         LUCENE  avgt    5     0.615 ±    0.056  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like         NATIVE  avgt    5     0.515 ±    0.111  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like           null  avgt    5  3596.864 ± 1335.035  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex        LUCENE  avgt    5     0.593 ±    0.362  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex        NATIVE  avgt    5     0.422 ±    0.222  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex          null  avgt    5  1053.673 ±  379.729  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\nBenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\nBenchmarkFuseRegexp.increasing10Like        LUCENE  avgt    5     0.696 ±    0.121  ms/op\r\nBenchmarkFuseRegexp.increasing10Like        NATIVE  avgt    5     0.540 ±    0.049  ms/op\r\nBenchmarkFuseRegexp.increasing10Like          null  avgt    5  3543.339 ±  183.168  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex       LUCENE  avgt    5     0.590 ±    0.208  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex       NATIVE  avgt    5     0.435 ±    0.159  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex         null  avgt    5  1096.238 ±  289.928  ms/op\r\nBenchmarkFuseRegexp.optimal10               LUCENE  avgt    5     0.169 ±    0.066  ms/op\r\nBenchmarkFuseRegexp.optimal10               NATIVE  avgt    5     0.136 ±    0.011  ms/op\r\nBenchmarkFuseRegexp.optimal10                 null  avgt    5     0.149 ±    0.082  ms/op\r\nBenchmarkFuseRegexp.optimal1Like            LUCENE  avgt    5     0.179 ±    0.066  ms/op\r\nBenchmarkFuseRegexp.optimal1Like            NATIVE  avgt    5     0.134 ±    0.029  ms/op\r\nBenchmarkFuseRegexp.optimal1Like              null  avgt    5   470.387 ±  187.235  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex           LUCENE  avgt    5     0.172 ±    0.029  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex           NATIVE  avgt    5     0.141 ±    0.027  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex             null  avgt    5   243.160 ±   59.722  ms/op\r\n```\r\n\r\nAfter analyzing it, there are some points that are quite clear:\r\n\r\n## We cannot use this optimization with Lucene\r\n\r\nThe cost is too high when the expression gets complex. It even with `\r\njava.lang.RuntimeException: org.apache.lucene.util.automaton.TooComplexToDeterminizeException: Determinizing .*(?:^.*domain0.*$)|(?:^.*domain1.*$)|(?:^.*domain2.*$)|(?:^.*domain3.*$)|(?:^.*domain4.*$)|(?:^.*domain5.*$)|(?:^.*domain6.*$)|(?:^.*domain7.*$)|(?:^.*domain8.*$)|(?:^.*domain9.*$).* would result in more than 10000 states.` when the expression have 10 branches.\r\n\r\n## In general `COL like 'whatever'` expression is 2x-3x worse than `regexp_like(COL, 'similar expression')`\r\n\r\nEDIT: This section is just wrong. The performance difference between `optimal1Regex` and `optimal1Like` is that optimal1regex uses features that the transformation from like to regex is not using, although it doesn't seem very difficult to achieve.  \r\n\r\n~~Reading the code it looks to me that Pinot automatically translate one to the other, but it that transformation is not applied when `BaseQueriesTest.getBrokerResponse` is called (which is great, because we can test the difference).~~\r\n\r\n~~I've also tried the controller UI interface and this issue is repeated there. Using the github_events dataset,~~\r\n```\r\nselect * from githubEvents where regexp_like(actor_url, '^.*victor\\d.*$') limit 1\r\n```\r\n~~is quite faster than~~\r\n```\r\nselect * from githubEvents where actor_url LIKE '%victor7%' limit 1\r\n```\r\n\r\n## Pinot regex execute faster wildcards than a single values\r\n\r\nIt is quite clear in the optimal cases:\r\n```\r\n-- this is just a `where regexp_like(DOMAIN_NAMES, 'domain\\d')`\r\nBenchmarkFuseRegexp.optimal10                 null  avgt    5     0.149 ±    0.082  ms/op\r\n-- this is just a `where regexp_like(DOMAIN_NAMES, 'domain0')`\r\nBenchmarkFuseRegexp.optimal1Regex             null  avgt    5   243.160 ±   59.722  ms/op\r\n```\r\n\r\nAt the beginning I thought it was an error in my code, but it is easy to try that using the github_events dataset.\r\n```\r\nselect * from githubEvents where regexp_like(actor_url, 'victor\\d') limit 1\r\n```\r\nResponds quite faster than\r\n \r\n```\r\nselect * from githubEvents where regexp_like(actor_url, 'victor7') limit 1\r\n```\r\n\r\nThe difference is not the 2.000x that the benchmark shows, but is consistently between 2-3x.\r\n\r\nI'm guessing that the issue actually comes from Java regex engine, but it is just a hunch, I didn't actually test it.\r\n\r\n## Native or Lucene indexes don't actually increase the performance of this regexp\r\n\r\nThis benchmark wasn't focused on that and more studies should be done, but it seems clear that:\r\n\r\n### When there are several regexp in the actual expression, indexes are very useful.\r\n\r\nExamples:\r\n```\r\nBenchmarkFuseRegexp.decreasing9Regex        LUCENE  avgt    5     0.593 ±    0.362  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex        NATIVE  avgt    5     0.422 ±    0.222  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex          null  avgt    5  1053.673 ±  379.729  ms/op\r\n\r\nBenchmarkFuseRegexp.increasing10Regex       LUCENE  avgt    5     0.590 ±    0.208  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex       NATIVE  avgt    5     0.435 ±    0.159  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex         null  avgt    5  1096.238 ±  289.928  ms/op\r\n```\r\n\r\n- When there is only one regexp in the actual expressions, indexes are not very useful.\r\nFor example:\r\n```\r\n-- this actually has a single, quite complex regex expression\r\nBenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n-- this actually has a single, quite complex regex expression\r\nBenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\nBenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n-- this is just a `where regexp_like(DOMAIN_NAMES, 'domain\\d')`\r\nBenchmarkFuseRegexp.optimal10               LUCENE  avgt    5     0.169 ±    0.066  ms/op\r\nBenchmarkFuseRegexp.optimal10               NATIVE  avgt    5     0.136 ±    0.011  ms/op\r\nBenchmarkFuseRegexp.optimal10                 null  avgt    5     0.149 ±    0.082  ms/op\r\n-- this is just a `where regexp_like(DOMAIN_NAMES, 'domain0')`\r\nBenchmarkFuseRegexp.optimal1Regex           LUCENE  avgt    5     0.172 ±    0.029  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex           NATIVE  avgt    5     0.141 ±    0.027  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex             null  avgt    5   243.160 ±   59.722  ms/op\r\n```\r\n\r\nThe last one shows a big difference, but it may be related to the issue with regex without wildcards that I discussed above.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152506922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152542139","html_url":"https://github.com/apache/pinot/pull/8879#issuecomment-1152542139","issue_url":"https://api.github.com/repos/apache/pinot/issues/8879","id":1152542139,"node_id":"IC_kwDOATCU_c5EsmW7","user":{"login":"klsince","id":61892277,"node_id":"MDQ6VXNlcjYxODkyMjc3","avatar_url":"https://avatars.githubusercontent.com/u/61892277?v=4","gravatar_id":"","url":"https://api.github.com/users/klsince","html_url":"https://github.com/klsince","followers_url":"https://api.github.com/users/klsince/followers","following_url":"https://api.github.com/users/klsince/following{/other_user}","gists_url":"https://api.github.com/users/klsince/gists{/gist_id}","starred_url":"https://api.github.com/users/klsince/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klsince/subscriptions","organizations_url":"https://api.github.com/users/klsince/orgs","repos_url":"https://api.github.com/users/klsince/repos","events_url":"https://api.github.com/users/klsince/events{/privacy}","received_events_url":"https://api.github.com/users/klsince/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T16:36:22Z","updated_at":"2022-06-10T16:36:22Z","author_association":"CONTRIBUTOR","body":"> For dedup mode the sort is over all dimensions, so will this help in that case?\r\n\r\nNot much help for dedup or basically cases where many fields are used to sort. For dedup or rollup, will consider using hashmap w/o sorting. \r\n\r\nIf sorting with multi fields is anyway wanted, one quick though is to sort the data file in chunks (with current method of quicksort and an auxiliary index array), then copy the sorted chunks into temp files (one file per sorted chunk), then merge those temp files up for following processing. Compared with quicksort over large data file directly, this might reduce page faults, by tuning the chunk size and chunk number.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152542139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152554035","html_url":"https://github.com/apache/pinot/pull/8879#issuecomment-1152554035","issue_url":"https://api.github.com/repos/apache/pinot/issues/8879","id":1152554035,"node_id":"IC_kwDOATCU_c5EspQz","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T16:52:28Z","updated_at":"2022-06-10T16:52:28Z","author_association":"MEMBER","body":"If you have dictionaries for the sort dimension, you could sometimes (whenever the sort key would fit into 64 bits) define a sort key the same way we define a group key in the group by. Then you could pass through the file once, extract the sort dimensions, compute the sort key, store it in an array, then sort that array, updating the sortedRowIds array as necessary. You could consider using radix sort here, which might be faster than quicksort. This way, you only read the file once during the sort, and read it sequentially, which will reduce the number of page faults drastically.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152554035/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152592493","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152592493","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152592493,"node_id":"IC_kwDOATCU_c5Esypt","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T17:40:36Z","updated_at":"2022-06-10T17:40:36Z","author_association":"CONTRIBUTOR","body":"@richardstartin Thanks for the detailed comment. I have some questions regarding to the comments:\r\n\r\n> I’m not sure this is valid for UTF-8 anyway unless the text is normalized, because UTF-8 doesn’t guarantee the uniqueness of representation of characters. For example: both \"\\u00e9\" and \"\\u0065\\u0301\" represent 'é'.\r\n\r\nIs the UTF-8 normalized if it is always encoded from a String object?\r\n\r\n> The size of this improvement depends on the data: how long the values are and on common prefixes within the set of strings.\r\n> \r\n> The best case for this optimisation relative to the baseline is uniformly random long strings (so the loop terminates on the first byte 255 times in 256, and the cost of materialising the string is exacerbated), but natural language text is never uniformly distributed and some sequences of bytes are very common.\r\n> \r\n> When there is more regularity in the data (imagine the strings are English book titles and a good percentage of them start with “The “ but others start with “Their” or other common words prefixed by “The” and the average length is ~16 bytes) you might get a different relative outcome. Comparing byte by byte would be even worse with URLs, which have very regular and long common prefixes. It would be better to read the unpadded bytes into the buffer and perform a vectorized comparison with Arrays.mismatch, this will likely regress on randomly generated data but will be much faster otherwise. Please compare with the existing baseline for URLs, book titles, people’s names written in English from a range of cultures, etc. too.\r\n\r\nVery good point. I think we can do batch read to reduce the byte access but also not reading every bytes for the long strings. What do you think if we read long values from the buffer, and perform unsigned long comparison? Similar to how we read unpadded strings.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152592493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152593708","html_url":"https://github.com/apache/pinot/issues/8019#issuecomment-1152593708","issue_url":"https://api.github.com/repos/apache/pinot/issues/8019","id":1152593708,"node_id":"IC_kwDOATCU_c5Esy8s","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T17:42:19Z","updated_at":"2022-06-10T17:42:19Z","author_association":"CONTRIBUTOR","body":"Fixed with #8850 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152593708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152593916","html_url":"https://github.com/apache/pinot/issues/8849#issuecomment-1152593916","issue_url":"https://api.github.com/repos/apache/pinot/issues/8849","id":1152593916,"node_id":"IC_kwDOATCU_c5Esy_8","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T17:42:36Z","updated_at":"2022-06-10T17:42:36Z","author_association":"CONTRIBUTOR","body":"Fixed with #8850 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152593916/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152595158","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152595158","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152595158,"node_id":"IC_kwDOATCU_c5EszTW","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T17:44:28Z","updated_at":"2022-06-10T17:44:28Z","author_association":"MEMBER","body":"> Is the UTF-8 normalized if it is always encoded from a String object?\r\n\r\nyes, but not if it came from bytes (not sure if this is possible)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152595158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152604460","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1152604460","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1152604460,"node_id":"IC_kwDOATCU_c5Es1ks","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T17:57:54Z","updated_at":"2022-06-10T17:57:54Z","author_association":"CONTRIBUTOR","body":"> > Is the UTF-8 normalized if it is always encoded from a String object?\r\n> \r\n> yes, but not if it came from bytes (not sure if this is possible)\r\n\r\nCurrently they are always encoded from String. But seems like even java string is not always normalized:\r\n\r\n```\r\n  public static void main(String[] args) {\r\n    String e1 = \"\\u00e9\";\r\n    String e2 = \"\\u0065\\u0301\";\r\n    System.out.println(e1);\r\n    System.out.println(e2);\r\n    System.out.println(e1.equals(e2));\r\n    System.out.println(e1.compareTo(e2));\r\n    System.out.println(Arrays.toString(e1.getBytes(UTF_8)));\r\n    System.out.println(Arrays.toString(e2.getBytes(UTF_8)));\r\n    System.out.println(new String(e1.getBytes(UTF_8), UTF_8).equals(new String(e2.getBytes(UTF_8), UTF_8)));\r\n    System.out.println(new String(e1.getBytes(UTF_8), UTF_8).compareTo(new String(e2.getBytes(UTF_8), UTF_8)));\r\n  }\r\n\r\né\r\né\r\nfalse\r\n132\r\n[-61, -87]\r\n[101, -52, -127]\r\nfalse\r\n132\r\n```\r\n\r\nThe problem exists with the current implementation, and we should probably use [normalizer](https://docs.oracle.com/javase/7/docs/api/java/text/Normalizer.html) to normalize it.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152604460/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152641627","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1152641627","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1152641627,"node_id":"IC_kwDOATCU_c5Es-pb","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T18:49:36Z","updated_at":"2022-06-10T18:49:36Z","author_association":"CONTRIBUTOR","body":"@gortiz Thanks for the detailed analysis. This is awesome, and very interesting!\r\n\r\n> ## We cannot use this optimization with Lucene\r\n> The cost is too high when the expression gets complex. It even with ` java.lang.RuntimeException: org.apache.lucene.util.automaton.TooComplexToDeterminizeException: Determinizing .*(?:^.*domain0.*$)|(?:^.*domain1.*$)|(?:^.*domain2.*$)|(?:^.*domain3.*$)|(?:^.*domain4.*$)|(?:^.*domain5.*$)|(?:^.*domain6.*$)|(?:^.*domain7.*$)|(?:^.*domain8.*$)|(?:^.*domain9.*$).* would result in more than 10000 states.` when the expression have 10 branches.\r\n> \r\n\r\nCurious how native FST handles it, and why is it so much faster than the Lucene FST. cc @atris \r\n\r\n> ## In general `COL like 'whatever'` expression is 2x-3x worse than `regexp_like(COL, 'similar expression')`\r\n> Reading the code it looks to me that Pinot automatically translate one to the other, but it that transformation is not applied when `BaseQueriesTest.getBrokerResponse` is called (which is great, because we can test the difference).\r\n\r\nI think the reason is that it is not apple-to-apple comparison. `col LIKE 'abc'` is actually equivalent to `regexp_like(col, '^abc$')`\r\n\r\n> ## Pinot regex execute faster wildcards than a single values\r\n> It is quite clear in the optimal cases:\r\n> \r\n> ```\r\n> -- this is just a `where regexp_like(DOMAIN_NAMES, 'domain\\d')`\r\n> BenchmarkFuseRegexp.optimal10                 null  avgt    5     0.149 ±    0.082  ms/op\r\n> -- this is just a `where regexp_like(DOMAIN_NAMES, 'domain0')`\r\n> BenchmarkFuseRegexp.optimal1Regex             null  avgt    5   243.160 ±   59.722  ms/op\r\n> ```\r\n> \r\n> At the beginning I thought it was an error in my code, but it is easy to try that using the github_events dataset.\r\n> \r\n> ```\r\n> select * from githubEvents where regexp_like(actor_url, 'victor\\d') limit 1\r\n> ```\r\n> \r\n> Responds quite faster than\r\n> \r\n> ```\r\n> select * from githubEvents where regexp_like(actor_url, 'victor7') limit 1\r\n> ```\r\n> \r\n> The difference is not the 2.000x that the benchmark shows, but is consistently between 2-3x.\r\n> \r\n> I'm guessing that the issue actually comes from Java regex engine, but it is just a hunch, I didn't actually test it.\r\n\r\nLet's re-do the benchmark. I don't believe there can be 2000x difference. Also, this is very counter-intuitive, so I'd suggest let's figure out if it is actually from the java regex engine, or because of our code.\r\n\r\n> ### When there are several regexp in the actual expression, indexes are very useful.\r\n> Examples:\r\n> \r\n> ```\r\n> BenchmarkFuseRegexp.decreasing9Regex        LUCENE  avgt    5     0.593 ±    0.362  ms/op\r\n> BenchmarkFuseRegexp.decreasing9Regex        NATIVE  avgt    5     0.422 ±    0.222  ms/op\r\n> BenchmarkFuseRegexp.decreasing9Regex          null  avgt    5  1053.673 ±  379.729  ms/op\r\n> \r\n> BenchmarkFuseRegexp.increasing10Regex       LUCENE  avgt    5     0.590 ±    0.208  ms/op\r\n> BenchmarkFuseRegexp.increasing10Regex       NATIVE  avgt    5     0.435 ±    0.159  ms/op\r\n> BenchmarkFuseRegexp.increasing10Regex         null  avgt    5  1096.238 ±  289.928  ms/op\r\n> ```\r\n\r\nI feel the inefficiency is from `regexp_like(DOMAIN_NAMES, 'domain0')` (exact match) which takes much longer than expected. We should check what is causing the huge performance difference","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152641627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152659364","html_url":"https://github.com/apache/pinot/issues/8869#issuecomment-1152659364","issue_url":"https://api.github.com/repos/apache/pinot/issues/8869","id":1152659364,"node_id":"IC_kwDOATCU_c5EtC-k","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T19:15:49Z","updated_at":"2022-06-10T19:15:49Z","author_association":"CONTRIBUTOR","body":"Good suggestion. We can add the remote host info to the `HttpRequesterIdentity` and log it accordingly if it is provided to the `BrokerRequestHandler`. Do you want to help contribute this change?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152659364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152678008","html_url":"https://github.com/apache/pinot/pull/8874#issuecomment-1152678008","issue_url":"https://api.github.com/repos/apache/pinot/issues/8874","id":1152678008,"node_id":"IC_kwDOATCU_c5EtHh4","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T19:44:28Z","updated_at":"2022-06-13T17:56:08Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8874](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a391dbc) into [master](https://codecov.io/gh/apache/pinot/commit/90fa0f910449ef194b253a081ddd4cbe02710aa8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (90fa0f9) will **decrease** coverage by `6.71%`.\n> The diff coverage is `75.92%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8874      +/-   ##\n============================================\n- Coverage     69.74%   63.02%   -6.72%     \n- Complexity     4683     4836     +153     \n============================================\n  Files          1805     1761      -44     \n  Lines         94006    92174    -1832     \n  Branches      13992    13820     -172     \n============================================\n- Hits          65563    58096    -7467     \n- Misses        23904    29902    +5998     \n+ Partials       4539     4176     -363     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `66.38% <75.92%> (-0.03%)` | :arrow_down: |\n| unittests2 | `14.87% <20.37%> (-0.56%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...che/pinot/core/common/datablock/BaseDataBlock.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL0Jhc2VEYXRhQmxvY2suamF2YQ==) | `76.09% <ø> (ø)` | |\n| [...pinot/core/common/datablock/ColumnarDataBlock.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL0NvbHVtbmFyRGF0YUJsb2NrLmphdmE=) | `58.62% <ø> (ø)` | |\n| [...he/pinot/core/common/datablock/DataBlockUtils.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL0RhdGFCbG9ja1V0aWxzLmphdmE=) | `84.21% <ø> (ø)` | |\n| [...che/pinot/core/common/datablock/MetadataBlock.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL01ldGFkYXRhQmxvY2suamF2YQ==) | `55.55% <ø> (ø)` | |\n| [...ache/pinot/core/common/datablock/RowDataBlock.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL1Jvd0RhdGFCbG9jay5qYXZh) | `66.66% <ø> (ø)` | |\n| [...va/org/apache/pinot/query/runtime/QueryRunner.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcXVlcnktcnVudGltZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcXVlcnkvcnVudGltZS9RdWVyeVJ1bm5lci5qYXZh) | `86.66% <ø> (ø)` | |\n| [.../pinot/query/runtime/blocks/TransferableBlock.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcXVlcnktcnVudGltZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcXVlcnkvcnVudGltZS9ibG9ja3MvVHJhbnNmZXJhYmxlQmxvY2suamF2YQ==) | `58.33% <ø> (ø)` | |\n| [...t/query/runtime/blocks/TransferableBlockUtils.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcXVlcnktcnVudGltZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcXVlcnkvcnVudGltZS9ibG9ja3MvVHJhbnNmZXJhYmxlQmxvY2tVdGlscy5qYXZh) | `62.50% <62.50%> (ø)` | |\n| [...pinot/query/runtime/operator/HashJoinOperator.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcXVlcnktcnVudGltZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcXVlcnkvcnVudGltZS9vcGVyYXRvci9IYXNoSm9pbk9wZXJhdG9yLmphdmE=) | `93.44% <66.66%> (ø)` | |\n| [.../pinot/core/common/datatable/DataTableBuilder.java](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YXRhYmxlL0RhdGFUYWJsZUJ1aWxkZXIuamF2YQ==) | `83.94% <68.18%> (-2.13%)` | :arrow_down: |\n| ... and [440 more](https://codecov.io/gh/apache/pinot/pull/8874/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [90fa0f9...a391dbc](https://codecov.io/gh/apache/pinot/pull/8874?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152678008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152679541","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1152679541","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1152679541,"node_id":"IC_kwDOATCU_c5EtH51","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T19:46:59Z","updated_at":"2022-06-10T19:46:59Z","author_association":"CONTRIBUTOR","body":"Yeah, the REGEXP_LIKE translation from LIKE is not equivalent.\n\nAlso, remember that any FST traversal will benefit most from a selective expression rather than a full term match.\n\nLastly, why do you say that indices don't help for single regexes? Unless I am misreading the benchmark result, even for a single regex case, native index is pretty fast? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152679541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152682304","html_url":"https://github.com/apache/pinot/pull/8877#issuecomment-1152682304","issue_url":"https://api.github.com/repos/apache/pinot/issues/8877","id":1152682304,"node_id":"IC_kwDOATCU_c5EtIlA","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T19:51:38Z","updated_at":"2022-06-27T18:26:01Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8877](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1f22e5a) into [master](https://codecov.io/gh/apache/pinot/commit/90fa0f910449ef194b253a081ddd4cbe02710aa8?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (90fa0f9) will **decrease** coverage by `1.22%`.\n> The diff coverage is `88.99%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8877      +/-   ##\n============================================\n- Coverage     69.74%   68.52%   -1.23%     \n- Complexity     4683     4695      +12     \n============================================\n  Files          1805     1818      +13     \n  Lines         94006    94893     +887     \n  Branches      13992    14188     +196     \n============================================\n- Hits          65563    65022     -541     \n- Misses        23904    25295    +1391     \n- Partials       4539     4576      +37     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.63% <56.88%> (+0.26%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `66.31% <0.00%> (-0.10%)` | :arrow_down: |\n| unittests2 | `15.08% <84.40%> (-0.36%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../core/realtime/PinotLLCRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90TExDUmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `77.26% <ø> (-0.52%)` | :arrow_down: |\n| [...x/core/realtime/MissingConsumingSegmentFinder.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL01pc3NpbmdDb25zdW1pbmdTZWdtZW50RmluZGVyLmphdmE=) | `87.09% <87.09%> (ø)` | |\n| [...g/apache/pinot/common/metrics/ControllerGauge.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyR2F1Z2UuamF2YQ==) | `97.82% <100.00%> (+0.15%)` | :arrow_up: |\n| [...e/pinot/controller/helix/SegmentStatusChecker.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9TZWdtZW50U3RhdHVzQ2hlY2tlci5qYXZh) | `87.50% <100.00%> (+0.44%)` | :arrow_up: |\n| [...apache/pinot/common/helix/ExtraInstanceConfig.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vaGVsaXgvRXh0cmFJbnN0YW5jZUNvbmZpZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/plan/StreamingInstanceResponsePlanNode.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9wbGFuL1N0cmVhbWluZ0luc3RhbmNlUmVzcG9uc2VQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/operator/streaming/StreamingResponseUtils.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9zdHJlYW1pbmcvU3RyZWFtaW5nUmVzcG9uc2VVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ager/realtime/PeerSchemeSplitSegmentCommitter.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUGVlclNjaGVtZVNwbGl0U2VnbWVudENvbW1pdHRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ator/streaming/StreamingSelectionOnlyOperator.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9zdHJlYW1pbmcvU3RyZWFtaW5nU2VsZWN0aW9uT25seU9wZXJhdG9yLmphdmE=) | `0.00% <0.00%> (-90.00%)` | :arrow_down: |\n| [...he/pinot/core/plan/StreamingSelectionPlanNode.java](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9wbGFuL1N0cmVhbWluZ1NlbGVjdGlvblBsYW5Ob2RlLmphdmE=) | `0.00% <0.00%> (-88.89%)` | :arrow_down: |\n| ... and [255 more](https://codecov.io/gh/apache/pinot/pull/8877/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [90fa0f9...1f22e5a](https://codecov.io/gh/apache/pinot/pull/8877?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152682304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152712956","html_url":"https://github.com/apache/pinot/issues/8869#issuecomment-1152712956","issue_url":"https://api.github.com/repos/apache/pinot/issues/8869","id":1152712956,"node_id":"IC_kwDOATCU_c5EtQD8","user":{"login":"abhs50","id":518685,"node_id":"MDQ6VXNlcjUxODY4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/518685?v=4","gravatar_id":"","url":"https://api.github.com/users/abhs50","html_url":"https://github.com/abhs50","followers_url":"https://api.github.com/users/abhs50/followers","following_url":"https://api.github.com/users/abhs50/following{/other_user}","gists_url":"https://api.github.com/users/abhs50/gists{/gist_id}","starred_url":"https://api.github.com/users/abhs50/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhs50/subscriptions","organizations_url":"https://api.github.com/users/abhs50/orgs","repos_url":"https://api.github.com/users/abhs50/repos","events_url":"https://api.github.com/users/abhs50/events{/privacy}","received_events_url":"https://api.github.com/users/abhs50/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T20:26:49Z","updated_at":"2022-06-10T20:26:49Z","author_association":"CONTRIBUTOR","body":"Hi @Jackie-Jiang: Yes, I will be more than happy to contribute. Can you help me with few details on where to look and how to get started.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152712956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152746796","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1152746796","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1152746796,"node_id":"IC_kwDOATCU_c5EtYUs","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T21:21:19Z","updated_at":"2022-06-10T21:44:29Z","author_association":"CONTRIBUTOR","body":"I will spend sometime examining the production logs to see how OPTION is being used in production (if at all) and how it will break with this change. Will get back with the info by early next week. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152746796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152822694","html_url":"https://github.com/apache/pinot/pull/8876#issuecomment-1152822694","issue_url":"https://api.github.com/repos/apache/pinot/issues/8876","id":1152822694,"node_id":"IC_kwDOATCU_c5Etq2m","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-11T01:01:30Z","updated_at":"2022-06-11T01:10:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8876](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0c31c84) into [master](https://codecov.io/gh/apache/pinot/commit/754e807cf027746b0ee7c1f88670a017cfbfef33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (754e807) will **decrease** coverage by `1.55%`.\n> The diff coverage is `40.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8876      +/-   ##\n============================================\n- Coverage     69.65%   68.10%   -1.56%     \n- Complexity     4679     4680       +1     \n============================================\n  Files          1806     1806              \n  Lines         94201    94201              \n  Branches      14050    14050              \n============================================\n- Hits          65620    64157    -1463     \n- Misses        24021    25548    +1527     \n+ Partials       4560     4496      -64     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `24.76% <40.00%> (-0.08%)` | :arrow_down: |\n| unittests1 | `66.37% <ø> (-0.01%)` | :arrow_down: |\n| unittests2 | `15.42% <0.00%> (+0.02%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/api/resources/PinotBrokerAppConfigs.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckFwcENvbmZpZ3MuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...t/broker/api/resources/PinotBrokerHealthCheck.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckhlYWx0aENoZWNrLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...pinot/broker/api/resources/PinotBrokerRouting.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlclJvdXRpbmcuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `85.71% <100.00%> (ø)` | |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `50.94% <100.00%> (-7.55%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...e/pinot/common/minion/MergeRollupTaskMetadata.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWluaW9uL01lcmdlUm9sbHVwVGFza01ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-94.74%)` | :arrow_down: |\n| [...plugin/segmentuploader/SegmentUploaderDefault.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zZWdtZW50LXVwbG9hZGVyL3Bpbm90LXNlZ21lbnQtdXBsb2FkZXItZGVmYXVsdC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3NlZ21lbnR1cGxvYWRlci9TZWdtZW50VXBsb2FkZXJEZWZhdWx0LmphdmE=) | `0.00% <0.00%> (-87.10%)` | :arrow_down: |\n| [.../transform/function/MapValueTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vTWFwVmFsdWVUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `0.00% <0.00%> (-85.30%)` | :arrow_down: |\n| ... and [145 more](https://codecov.io/gh/apache/pinot/pull/8876/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [754e807...0c31c84](https://codecov.io/gh/apache/pinot/pull/8876?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152822694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152829831","html_url":"https://github.com/apache/pinot/pull/8881#issuecomment-1152829831","issue_url":"https://api.github.com/repos/apache/pinot/issues/8881","id":1152829831,"node_id":"IC_kwDOATCU_c5EtsmH","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-11T01:30:24Z","updated_at":"2022-06-11T01:30:24Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8881](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (952290a) into [master](https://codecov.io/gh/apache/pinot/commit/754e807cf027746b0ee7c1f88670a017cfbfef33?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (754e807) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 952290a differs from pull request most recent head 9277450. Consider uploading reports for the commit 9277450 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8881      +/-   ##\n============================================\n- Coverage     69.65%   69.62%   -0.04%     \n  Complexity     4679     4679              \n============================================\n  Files          1806     1806              \n  Lines         94201    94202       +1     \n  Branches      14050    14050              \n============================================\n- Hits          65620    65588      -32     \n- Misses        24021    24055      +34     \n+ Partials       4560     4559       -1     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.19% <0.00%> (-0.06%)` | :arrow_down: |\n| integration2 | `24.79% <0.00%> (-0.05%)` | :arrow_down: |\n| unittests1 | `66.36% <ø> (-0.02%)` | :arrow_down: |\n| unittests2 | `15.41% <0.00%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...troller/helix/core/minion/ClusterInfoAccessor.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9DbHVzdGVySW5mb0FjY2Vzc29yLmphdmE=) | `79.31% <0.00%> (-2.84%)` | :arrow_down: |\n| [...data/manager/realtime/DefaultSegmentCommitter.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvRGVmYXVsdFNlZ21lbnRDb21taXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-80.00%)` | :arrow_down: |\n| [...ller/helix/core/minion/TaskTypeMetricsUpdater.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrVHlwZU1ldHJpY3NVcGRhdGVyLmphdmE=) | `80.00% <0.00%> (-20.00%)` | :arrow_down: |\n| [...er/api/resources/LLCSegmentCompletionHandlers.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL0xMQ1NlZ21lbnRDb21wbGV0aW9uSGFuZGxlcnMuamF2YQ==) | `43.56% <0.00%> (-18.82%)` | :arrow_down: |\n| [...ore/query/scheduler/resources/ResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvcmVzb3VyY2VzL1Jlc291cmNlTWFuYWdlci5qYXZh) | `84.00% <0.00%> (-12.00%)` | :arrow_down: |\n| [...data/manager/realtime/SegmentCommitterFactory.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvU2VnbWVudENvbW1pdHRlckZhY3RvcnkuamF2YQ==) | `88.23% <0.00%> (-11.77%)` | :arrow_down: |\n| [...roller/helix/core/relocation/SegmentRelocator.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlbG9jYXRpb24vU2VnbWVudFJlbG9jYXRvci5qYXZh) | `72.97% <0.00%> (-8.11%)` | :arrow_down: |\n| [...altime/ServerSegmentCompletionProtocolHandler.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VydmVyL3JlYWx0aW1lL1NlcnZlclNlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2xIYW5kbGVyLmphdmE=) | `51.88% <0.00%> (-6.61%)` | :arrow_down: |\n| [.../pinot/core/query/scheduler/PriorityScheduler.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvUHJpb3JpdHlTY2hlZHVsZXIuamF2YQ==) | `78.08% <0.00%> (-5.48%)` | :arrow_down: |\n| [.../filter/predicate/InPredicateEvaluatorFactory.java](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvcHJlZGljYXRlL0luUHJlZGljYXRlRXZhbHVhdG9yRmFjdG9yeS5qYXZh) | `70.45% <0.00%> (-4.55%)` | :arrow_down: |\n| ... and [25 more](https://codecov.io/gh/apache/pinot/pull/8881/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [754e807...9277450](https://codecov.io/gh/apache/pinot/pull/8881?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152829831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152836364","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1152836364","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1152836364,"node_id":"IC_kwDOATCU_c5EtuMM","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-11T02:15:38Z","updated_at":"2022-06-12T22:25:29Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8880](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4183b88) into [master](https://codecov.io/gh/apache/pinot/commit/ea564f0add86b4bb7b06b611ab4276934f35f061?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ea564f0) will **decrease** coverage by `0.11%`.\n> The diff coverage is `76.92%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8880      +/-   ##\n============================================\n- Coverage     69.78%   69.67%   -0.12%     \n- Complexity     4672     4680       +8     \n============================================\n  Files          1803     1807       +4     \n  Lines         93752    94212     +460     \n  Branches      13935    14053     +118     \n============================================\n+ Hits          65426    65643     +217     \n- Misses        23790    24011     +221     \n- Partials       4536     4558      +22     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.31% <69.23%> (-0.06%)` | :arrow_down: |\n| integration2 | `24.89% <65.38%> (-0.23%)` | :arrow_down: |\n| unittests1 | `66.37% <77.55%> (-0.18%)` | :arrow_down: |\n| unittests2 | `15.39% <0.00%> (-0.06%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/pinot/sql/parsers/parser/SqlOptions.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcWwvcGFyc2Vycy9wYXJzZXIvU3FsT3B0aW9ucy5qYXZh) | `45.45% <45.45%> (ø)` | |\n| [...t/controller/api/resources/PinotQueryResource.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90UXVlcnlSZXNvdXJjZS5qYXZh) | `59.05% <50.00%> (ø)` | |\n| [...org/apache/pinot/sql/parsers/CalciteSqlParser.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcWwvcGFyc2Vycy9DYWxjaXRlU3FsUGFyc2VyLmphdmE=) | `87.66% <85.29%> (-0.30%)` | :arrow_down: |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `58.49% <100.00%> (ø)` | |\n| [...rg/apache/pinot/sql/parsers/SqlNodeAndOptions.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcWwvcGFyc2Vycy9TcWxOb2RlQW5kT3B0aW9ucy5qYXZh) | `100.00% <100.00%> (ø)` | |\n| [...g/apache/pinot/sql/parsers/dml/InsertIntoFile.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcWwvcGFyc2Vycy9kbWwvSW5zZXJ0SW50b0ZpbGUuamF2YQ==) | `85.18% <100.00%> (ø)` | |\n| [...raw/RawDoubleSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3RG91YmxlU2luZ2xlQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `61.11% <0.00%> (-38.89%)` | :arrow_down: |\n| [...y/distinct/raw/RawMultiColumnDistinctExecutor.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3TXVsdGlDb2x1bW5EaXN0aW5jdEV4ZWN1dG9yLmphdmE=) | `52.04% <0.00%> (-36.85%)` | :arrow_down: |\n| [...ct/raw/RawIntSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3SW50U2luZ2xlQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| [...t/raw/RawLongSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3TG9uZ1NpbmdsZUNvbHVtbkRpc3RpbmN0T25seUV4ZWN1dG9yLmphdmE=) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| ... and [59 more](https://codecov.io/gh/apache/pinot/pull/8880/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ea564f0...4183b88](https://codecov.io/gh/apache/pinot/pull/8880?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152836364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152868478","html_url":"https://github.com/apache/pinot/pull/8879#issuecomment-1152868478","issue_url":"https://api.github.com/repos/apache/pinot/issues/8879","id":1152868478,"node_id":"IC_kwDOATCU_c5Et2B-","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-11T06:43:25Z","updated_at":"2022-06-11T06:43:25Z","author_association":"MEMBER","body":"Another idea along the lines of what @richardstartin mentioned but it does not have to be dictionary encoded and potentially avoid the need to sort the file on disk and sort complexity reduced from a function of num_rows to cardinality of the sort column\r\n\r\nIn the first pass, \r\ncreate a map of <key, bitmap> sort this map/array on key.  \r\nyou can now create a sorted doc id array (this is also optional)\r\n\r\nyou can simply create a record reader and pass the hashmap that will dictate the reading order.\r\n\r\nWe do something like this in real-time segment converter when we flush real-time to disk.\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1152868478/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1153211936","html_url":"https://github.com/apache/pinot/issues/8805#issuecomment-1153211936","issue_url":"https://api.github.com/repos/apache/pinot/issues/8805","id":1153211936,"node_id":"IC_kwDOATCU_c5EvJ4g","user":{"login":"diogobaeder","id":207168,"node_id":"MDQ6VXNlcjIwNzE2OA==","avatar_url":"https://avatars.githubusercontent.com/u/207168?v=4","gravatar_id":"","url":"https://api.github.com/users/diogobaeder","html_url":"https://github.com/diogobaeder","followers_url":"https://api.github.com/users/diogobaeder/followers","following_url":"https://api.github.com/users/diogobaeder/following{/other_user}","gists_url":"https://api.github.com/users/diogobaeder/gists{/gist_id}","starred_url":"https://api.github.com/users/diogobaeder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diogobaeder/subscriptions","organizations_url":"https://api.github.com/users/diogobaeder/orgs","repos_url":"https://api.github.com/users/diogobaeder/repos","events_url":"https://api.github.com/users/diogobaeder/events{/privacy}","received_events_url":"https://api.github.com/users/diogobaeder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-12T15:47:17Z","updated_at":"2022-06-12T15:47:17Z","author_association":"NONE","body":"There you go, folks: https://github.com/pinot-contrib/pinot-docs/pull/101 - sorry I forgot to link to GitHub issues (and couldn't find out how to do this).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1153211936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1153652008","html_url":"https://github.com/apache/pinot/pull/8883#issuecomment-1153652008","issue_url":"https://api.github.com/repos/apache/pinot/issues/8883","id":1153652008,"node_id":"IC_kwDOATCU_c5Ew1Uo","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T08:51:27Z","updated_at":"2022-06-13T08:59:37Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8883](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c7846e3) into [master](https://codecov.io/gh/apache/pinot/commit/da0b74af8884d98ab8cf467917c0362544de97bd?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (da0b74a) will **decrease** coverage by `1.37%`.\n> The diff coverage is `18.51%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8883      +/-   ##\n============================================\n- Coverage     69.79%   68.42%   -1.38%     \n+ Complexity     4989     4662     -327     \n============================================\n  Files          1803     1806       +3     \n  Lines         93850    94304     +454     \n  Branches      13976    14061      +85     \n============================================\n- Hits          65499    64523     -976     \n- Misses        23807    25262    +1455     \n+ Partials       4544     4519      -25     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.27% <18.51%> (-0.13%)` | :arrow_down: |\n| integration2 | `?` | |\n| unittests1 | `66.26% <18.51%> (-0.20%)` | :arrow_down: |\n| unittests2 | `15.41% <0.00%> (-0.07%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...e/impl/forward/FixedByteMVMutableForwardIndex.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2ZvcndhcmQvRml4ZWRCeXRlTVZNdXRhYmxlRm9yd2FyZEluZGV4LmphdmE=) | `72.09% <0.00%> (-21.85%)` | :arrow_down: |\n| [...readers/forward/BaseChunkSVForwardIndexReader.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvZm9yd2FyZC9CYXNlQ2h1bmtTVkZvcndhcmRJbmRleFJlYWRlci5qYXZh) | `46.10% <ø> (-0.05%)` | :arrow_down: |\n| [...rs/forward/FixedByteChunkMVForwardIndexReader.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvZm9yd2FyZC9GaXhlZEJ5dGVDaHVua01WRm9yd2FyZEluZGV4UmVhZGVyLmphdmE=) | `59.52% <0.00%> (-25.23%)` | :arrow_down: |\n| [...ders/forward/VarByteChunkMVForwardIndexReader.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvZm9yd2FyZC9WYXJCeXRlQ2h1bmtNVkZvcndhcmRJbmRleFJlYWRlci5qYXZh) | `79.31% <0.00%> (-16.53%)` | :arrow_down: |\n| [...segment/spi/index/mutable/MutableForwardIndex.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1zcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3NlZ21lbnQvc3BpL2luZGV4L211dGFibGUvTXV0YWJsZUZvcndhcmRJbmRleC5qYXZh) | `3.63% <0.00%> (-0.81%)` | :arrow_down: |\n| [...t/segment/spi/index/reader/ForwardIndexReader.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1zcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3NlZ21lbnQvc3BpL2luZGV4L3JlYWRlci9Gb3J3YXJkSW5kZXhSZWFkZXIuamF2YQ==) | `66.92% <0.00%> (-2.68%)` | :arrow_down: |\n| [...java/org/apache/pinot/core/common/DataFetcher.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vRGF0YUZldGNoZXIuamF2YQ==) | `84.26% <62.50%> (-2.94%)` | :arrow_down: |\n| [...apache/pinot/common/helix/ExtraInstanceConfig.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vaGVsaXgvRXh0cmFJbnN0YW5jZUNvbmZpZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/plan/StreamingInstanceResponsePlanNode.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9wbGFuL1N0cmVhbWluZ0luc3RhbmNlUmVzcG9uc2VQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/operator/streaming/StreamingResponseUtils.java](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9zdHJlYW1pbmcvU3RyZWFtaW5nUmVzcG9uc2VVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [154 more](https://codecov.io/gh/apache/pinot/pull/8883/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [da0b74a...c7846e3](https://codecov.io/gh/apache/pinot/pull/8883?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1153652008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154069154","html_url":"https://github.com/apache/pinot/pull/8883#issuecomment-1154069154","issue_url":"https://api.github.com/repos/apache/pinot/issues/8883","id":1154069154,"node_id":"IC_kwDOATCU_c5EybKi","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T15:29:50Z","updated_at":"2022-06-13T15:29:50Z","author_association":"CONTRIBUTOR","body":"Hi @saurabhd336 - @somandal  is working on this and we have the change set ready. Had also commented on the issues earlier that we are working on this. \r\n\r\nhttps://github.com/apache/pinot/issues/8875","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154069154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154097148","html_url":"https://github.com/apache/pinot/pull/8883#issuecomment-1154097148","issue_url":"https://api.github.com/repos/apache/pinot/issues/8883","id":1154097148,"node_id":"IC_kwDOATCU_c5Eyh_8","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T15:56:24Z","updated_at":"2022-06-13T15:56:24Z","author_association":"CONTRIBUTOR","body":"Discussed this offline with @saurabhd336 . \r\n\r\n@somandal 's change that is already in progress will cover this. This can be closed.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154097148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154168192","html_url":"https://github.com/apache/pinot/pull/8882#issuecomment-1154168192","issue_url":"https://api.github.com/repos/apache/pinot/issues/8882","id":1154168192,"node_id":"IC_kwDOATCU_c5EyzWA","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:04:39Z","updated_at":"2022-06-13T17:04:39Z","author_association":"CONTRIBUTOR","body":"What would be the next step to resolve the issue for which this was originally done? https://github.com/apache/pinot/pull/8798","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154168192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154206654","html_url":"https://github.com/apache/pinot/issues/8864#issuecomment-1154206654","issue_url":"https://api.github.com/repos/apache/pinot/issues/8864","id":1154206654,"node_id":"IC_kwDOATCU_c5Ey8u-","user":{"login":"stym06","id":20970728,"node_id":"MDQ6VXNlcjIwOTcwNzI4","avatar_url":"https://avatars.githubusercontent.com/u/20970728?v=4","gravatar_id":"","url":"https://api.github.com/users/stym06","html_url":"https://github.com/stym06","followers_url":"https://api.github.com/users/stym06/followers","following_url":"https://api.github.com/users/stym06/following{/other_user}","gists_url":"https://api.github.com/users/stym06/gists{/gist_id}","starred_url":"https://api.github.com/users/stym06/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stym06/subscriptions","organizations_url":"https://api.github.com/users/stym06/orgs","repos_url":"https://api.github.com/users/stym06/repos","events_url":"https://api.github.com/users/stym06/events{/privacy}","received_events_url":"https://api.github.com/users/stym06/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:46:59Z","updated_at":"2022-06-13T17:46:59Z","author_association":"CONTRIBUTOR","body":"Let me know if I can take this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154206654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154227515","html_url":"https://github.com/apache/pinot/pull/8852#issuecomment-1154227515","issue_url":"https://api.github.com/repos/apache/pinot/issues/8852","id":1154227515,"node_id":"IC_kwDOATCU_c5EzB07","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T18:11:15Z","updated_at":"2022-06-13T18:15:03Z","author_association":"CONTRIBUTOR","body":"> looks good to me for the refactoring. do we have a centralized doc to describe\r\n> \r\n> * the goal of this refactoring (e.g. what will these interface be used, what variation of the interface impl will be in the future)\r\n> * any consolidations or grouping are we planning to do? are we planning to create one Pinot_Service per Pinot_RestletResource?\r\n\r\n1. Created a [simple google doc](https://docs.google.com/document/d/1LpnR8ssYADJXyOHZv55VqIbLaYeWHq4qa0GjtD7CVYU/edit?usp=sharing) for long term discussion.\r\n2. Grouping and splitting will be needed, I believe it should be case-by-case for each endpoint. And they can be done in future PRs when all the \"extraction\" is done first.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154227515/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154256236","html_url":"https://github.com/apache/pinot/pull/8882#issuecomment-1154256236","issue_url":"https://api.github.com/repos/apache/pinot/issues/8882","id":1154256236,"node_id":"IC_kwDOATCU_c5EzI1s","user":{"login":"KKcorps","id":5559703,"node_id":"MDQ6VXNlcjU1NTk3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5559703?v=4","gravatar_id":"","url":"https://api.github.com/users/KKcorps","html_url":"https://github.com/KKcorps","followers_url":"https://api.github.com/users/KKcorps/followers","following_url":"https://api.github.com/users/KKcorps/following{/other_user}","gists_url":"https://api.github.com/users/KKcorps/gists{/gist_id}","starred_url":"https://api.github.com/users/KKcorps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KKcorps/subscriptions","organizations_url":"https://api.github.com/users/KKcorps/orgs","repos_url":"https://api.github.com/users/KKcorps/repos","events_url":"https://api.github.com/users/KKcorps/events{/privacy}","received_events_url":"https://api.github.com/users/KKcorps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T18:42:40Z","updated_at":"2022-06-13T18:42:40Z","author_association":"CONTRIBUTOR","body":"@npawar I will have to think about it. Not sure what can be done.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154256236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154262194","html_url":"https://github.com/apache/pinot/issues/8360#issuecomment-1154262194","issue_url":"https://api.github.com/repos/apache/pinot/issues/8360","id":1154262194,"node_id":"IC_kwDOATCU_c5EzKSy","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T18:49:25Z","updated_at":"2022-06-13T18:49:25Z","author_association":"CONTRIBUTOR","body":"@noon-stripe Since the main implementation has been merged, can you please help add some documentation for the feature? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154262194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154268154","html_url":"https://github.com/apache/pinot/issues/8360#issuecomment-1154268154","issue_url":"https://api.github.com/repos/apache/pinot/issues/8360","id":1154268154,"node_id":"IC_kwDOATCU_c5EzLv6","user":{"login":"noon-stripe","id":89272166,"node_id":"MDQ6VXNlcjg5MjcyMTY2","avatar_url":"https://avatars.githubusercontent.com/u/89272166?v=4","gravatar_id":"","url":"https://api.github.com/users/noon-stripe","html_url":"https://github.com/noon-stripe","followers_url":"https://api.github.com/users/noon-stripe/followers","following_url":"https://api.github.com/users/noon-stripe/following{/other_user}","gists_url":"https://api.github.com/users/noon-stripe/gists{/gist_id}","starred_url":"https://api.github.com/users/noon-stripe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noon-stripe/subscriptions","organizations_url":"https://api.github.com/users/noon-stripe/orgs","repos_url":"https://api.github.com/users/noon-stripe/repos","events_url":"https://api.github.com/users/noon-stripe/events{/privacy}","received_events_url":"https://api.github.com/users/noon-stripe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T18:56:32Z","updated_at":"2022-06-13T18:56:32Z","author_association":"CONTRIBUTOR","body":"> @noon-stripe Since the main implementation has been merged, can you please help add some documentation for the feature?\r\n\r\nYes, I'll have a draft up by EOW. Thanks for the reminder!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154268154/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154271827","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154271827","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154271827,"node_id":"IC_kwDOATCU_c5EzMpT","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:01:10Z","updated_at":"2022-06-13T19:01:10Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nThanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\r\n\r\n```\r\nSELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\r\nBenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n\r\nSELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\r\nBenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\nBenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n```\r\n\r\nWe can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154271827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154272773","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154272773","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154272773,"node_id":"IC_kwDOATCU_c5EzM4F","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:02:16Z","updated_at":"2022-06-13T19:02:16Z","author_association":"CONTRIBUTOR","body":"I will check out the branch and give some comments tomorrow ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154272773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154277210","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154277210","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154277210,"node_id":"IC_kwDOATCU_c5EzN9a","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:06:56Z","updated_at":"2022-06-13T19:06:56Z","author_association":"MEMBER","body":"> Thanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\r\n> \r\n> ```\r\n> SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\r\n> BenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\n> BenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\n> BenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n> \r\n> SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\r\n> BenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\n> BenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\n> BenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n> ```\r\n> \r\n> We can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.\r\n\r\nThe difference will be due to determinization of the automaton, which the native implementation doesn’t do.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154277210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154278541","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154278541","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154278541,"node_id":"IC_kwDOATCU_c5EzOSN","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:08:26Z","updated_at":"2022-06-13T19:10:11Z","author_association":"CONTRIBUTOR","body":"> > Thanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\n> > \n> > ```\n> > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\n> > BenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\n> > BenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\n> > BenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\n> > \n> > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\n> > BenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\n> > BenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\n> > BenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\n> > ```\n> > \n> > We can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.\n> \n> The difference will be due to determinization of the automaton, which the native implementation doesn’t do.\n\nI doubt determinization alone can cause such a massive difference.\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154278541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154279956","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154279956","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154279956,"node_id":"IC_kwDOATCU_c5EzOoU","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:09:57Z","updated_at":"2022-06-13T19:09:57Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang one thing is that the native index aggressively tries to prune branches, both while building the query automaton and during the traversal.\n\n That is also what causes general suffix and prefix queries to be much faster. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154279956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154336975","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154336975","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154336975,"node_id":"IC_kwDOATCU_c5EzcjP","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:18:41Z","updated_at":"2022-06-13T19:18:41Z","author_association":"MEMBER","body":"> > > Thanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\r\n> > > ```\r\n> > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\r\n> > > BenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\n> > > BenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\n> > > BenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n> > > \r\n> > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\r\n> > > BenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\n> > > BenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\n> > > BenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n> > > ```\r\n> > > \r\n> > > \r\n> > >     \r\n> > >       \r\n> > >     \r\n> > > \r\n> > >       \r\n> > >     \r\n> > > \r\n> > >     \r\n> > >   \r\n> > > We can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.\r\n> > \r\n> > \r\n> > The difference will be due to determinization of the automaton, which the native implementation doesn’t do.\r\n> \r\n> I doubt determinization alone can cause such a massive difference.\r\n\r\nWell, it’s an exponential time algorithm and Lucene refuses to even attempt to determinize some of the automata in the benchmark because they are too large. For an apples to apples comparison, native determinization should be re-enabled (by temporarily reverting/reversing #8237)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154336975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154338406","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154338406","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154338406,"node_id":"IC_kwDOATCU_c5Ezc5m","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:20:15Z","updated_at":"2022-06-13T19:20:15Z","author_association":"CONTRIBUTOR","body":"> > > > Thanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\n> > > > ```\n> > > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\n> > > > BenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\n> > > > BenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\n> > > > BenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\n> > > > \n> > > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\n> > > > BenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\n> > > > BenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\n> > > > BenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\n> > > > ```\n> > > > \n> > > > \n> > > >     \n> > > >       \n> > > >     \n> > > > \n> > > >       \n> > > >     \n> > > > \n> > > >     \n> > > >   \n> > > > We can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.\n> > > \n> > > \n> > > The difference will be due to determinization of the automaton, which the native implementation doesn’t do.\n> > \n> > I doubt determinization alone can cause such a massive difference.\n> \n> Well, it’s an exponential time algorithm and Lucene refuses to even attempt to determinize some of the automata in the benchmark because they are too large. For an apples to apples comparison, native determinization should be re-enabled (by temporarily reverting/reversing #8237)\n\nI am still failing to understand what the concern is. \n\nEven if its plain determinization that causes native to be significantly faster, is that not a good thing? \n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154338406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154339250","html_url":"https://github.com/apache/pinot/pull/8753#issuecomment-1154339250","issue_url":"https://api.github.com/repos/apache/pinot/issues/8753","id":1154339250,"node_id":"IC_kwDOATCU_c5EzdGy","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:21:10Z","updated_at":"2022-06-13T19:21:10Z","author_association":"CONTRIBUTOR","body":"@jasperjiaguo This is great enhancement. I labeled the PR with `release-notes`, and can you please add a `release-notes` section to the PR description to list down the new config and metrics added in this PR? Also, can you please also help update the documentation?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154339250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154342292","html_url":"https://github.com/apache/pinot/issues/8869#issuecomment-1154342292","issue_url":"https://api.github.com/repos/apache/pinot/issues/8869","id":1154342292,"node_id":"IC_kwDOATCU_c5Ezd2U","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:24:32Z","updated_at":"2022-06-13T19:24:32Z","author_association":"CONTRIBUTOR","body":"@abhs50 You may take a look at `PinotClientRequest` class where the `HttpRequesterIdentity` is created from the request context. This identity is passed to the `BrokerRequestHandler.handleRequest()` where you can log the source info","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154342292/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154343989","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154343989","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154343989,"node_id":"IC_kwDOATCU_c5EzeQ1","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:26:23Z","updated_at":"2022-06-13T19:26:23Z","author_association":"MEMBER","body":"> > > > > Thanks @atris for taking a look. I also have a question around how Lucene and native FST handle the query, specifically for these results:\r\n> > > > > ```\r\n> > > > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain9.*$)|...|(?:^.*domain1.*$)')\r\n> > > > > BenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\n> > > > > BenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op\r\n> > > > > BenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n> > > > > \r\n> > > > > SELECT INT_COL FROM MyTable WHERE regexp_like(DOMAIN_NAMES, '(?:^.*domain0.*$)|...|(?:^.*domain9.*$)')\r\n> > > > > BenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\n> > > > > BenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op\r\n> > > > > BenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n> > > > > ```\r\n> > > > > \r\n> > > > > \r\n> > > > >     \r\n> > > > >       \r\n> > > > >     \r\n> > > > > \r\n> > > > >       \r\n> > > > >     \r\n> > > > > \r\n> > > > >     \r\n> > > > >   \r\n> > > > > We can see that Lucene FST is very slow in this case, but native is still performing okay. Trying to understand what is causing this difference.\r\n> > > > \r\n> > > > \r\n> > > > The difference will be due to determinization of the automaton, which the native implementation doesn’t do.\r\n> > > \r\n> > > \r\n> > > I doubt determinization alone can cause such a massive difference.\r\n> > \r\n> > \r\n> > Well, it’s an exponential time algorithm and Lucene refuses to even attempt to determinize some of the automata in the benchmark because they are too large. For an apples to apples comparison, native determinization should be re-enabled (by temporarily reverting/reversing #8237)\r\n> \r\n> I am still failing to understand what the concern is.\r\n> \r\n> Even if its plain determinization that causes native to be significantly faster, is that not a good thing?\r\n\r\n@Jackie-Jiang was asking about the root cause of the difference. I suggested that the root cause is likely to be determinization, but it needs to be investigated. Where has concern been expressed?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154343989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154345625","html_url":"https://github.com/apache/pinot/issues/8805#issuecomment-1154345625","issue_url":"https://api.github.com/repos/apache/pinot/issues/8805","id":1154345625,"node_id":"IC_kwDOATCU_c5EzeqZ","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:28:08Z","updated_at":"2022-06-13T19:28:08Z","author_association":"CONTRIBUTOR","body":"Thanks @diogobaeder Merged the change to the documentation repo","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154345625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154357097","html_url":"https://github.com/apache/pinot/issues/8805#issuecomment-1154357097","issue_url":"https://api.github.com/repos/apache/pinot/issues/8805","id":1154357097,"node_id":"IC_kwDOATCU_c5Ezhdp","user":{"login":"diogobaeder","id":207168,"node_id":"MDQ6VXNlcjIwNzE2OA==","avatar_url":"https://avatars.githubusercontent.com/u/207168?v=4","gravatar_id":"","url":"https://api.github.com/users/diogobaeder","html_url":"https://github.com/diogobaeder","followers_url":"https://api.github.com/users/diogobaeder/followers","following_url":"https://api.github.com/users/diogobaeder/following{/other_user}","gists_url":"https://api.github.com/users/diogobaeder/gists{/gist_id}","starred_url":"https://api.github.com/users/diogobaeder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diogobaeder/subscriptions","organizations_url":"https://api.github.com/users/diogobaeder/orgs","repos_url":"https://api.github.com/users/diogobaeder/repos","events_url":"https://api.github.com/users/diogobaeder/events{/privacy}","received_events_url":"https://api.github.com/users/diogobaeder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:41:15Z","updated_at":"2022-06-13T19:41:15Z","author_association":"NONE","body":"Thanks @Jackie-Jiang :-)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154357097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154380690","html_url":"https://github.com/apache/pinot/pull/8877#issuecomment-1154380690","issue_url":"https://api.github.com/repos/apache/pinot/issues/8877","id":1154380690,"node_id":"IC_kwDOATCU_c5EznOS","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:09:52Z","updated_at":"2022-06-13T20:09:52Z","author_association":"CONTRIBUTOR","body":"We should move this to SegmentStatusChecker, that is run more frequently. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154380690/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154392815","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154392815","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154392815,"node_id":"IC_kwDOATCU_c5EzqLv","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:24:18Z","updated_at":"2022-06-13T21:18:50Z","author_association":"MEMBER","body":"Just circling back here having taken a quick look at `BenchmarkFuseRegexp.decreasing9Fusing` - I got similar results to Gonzalo:\r\n\r\n```\r\nBenchmark                              (_fstType)  Mode  Cnt   Score   Error  Units\r\nBenchmarkFuseRegexp.decreasing9Fusing      LUCENE  avgt    5  32.525 ± 2.733  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing      NATIVE  avgt    5   0.487 ± 0.123  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing        null  avgt    5   0.845 ± 0.204  ms/op\r\n```\r\n\r\n Lucene spends virtually all of its time in _minimization_ (which I mistakenly referred to as _determinization_ earlier, but actually entails determinization):\r\n\r\n<img width=\"936\" alt=\"Screenshot 2022-06-13 at 21 10 51\" src=\"https://user-images.githubusercontent.com/16439049/173436813-a13a5830-ad7b-4a8c-8e5f-3cf8003640df.png\">\r\n \r\nNow if I enable minimization in the native implementation by reverting #8237, the scores change drastically:\r\n\r\n```\r\nBenchmark                              (_fstType)  Mode  Cnt    Score    Error  Units\r\nBenchmarkFuseRegexp.decreasing9Fusing      LUCENE  avgt    5   32.399 ±  3.005  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing      NATIVE  avgt    5  366.520 ± 40.574  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing        null  avgt    5    0.819 ±  0.172  ms/op\r\n```\r\n\r\nAs do the profiles. Without minimization, there is no clear single bottleneck:\r\n<img width=\"879\" alt=\"Screenshot 2022-06-13 at 21 14 47\" src=\"https://user-images.githubusercontent.com/16439049/173437464-980859ce-e7c5-4e8f-b43e-ba609ab39396.png\">\r\n\r\nWith minimization, there is a single bottleneck, and it's in minimization :\r\n\r\n<img width=\"931\" alt=\"Screenshot 2022-06-13 at 21 23 10\" src=\"https://user-images.githubusercontent.com/16439049/173438712-5f8efc36-1f8d-4ea5-8bb6-b135d21ff4fc.png\">\r\n\r\n\r\nAs to whether this is cause for concern is beside the point; this is the root cause of the difference observed, rather than a quirk of the benchmark which needs to be analysed and removed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154392815/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154407952","html_url":"https://github.com/apache/pinot/issues/8886#issuecomment-1154407952","issue_url":"https://api.github.com/repos/apache/pinot/issues/8886","id":1154407952,"node_id":"IC_kwDOATCU_c5Ezt4Q","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:33:37Z","updated_at":"2022-06-13T20:33:58Z","author_association":"CONTRIBUTOR","body":"- I think that we need to add the custom transformation function support on `SegmentProcessorFramework`. We can do sth similar to the ingestion config. Currently, map phase hardcodes to initialize the default composite transformer.\r\n- On the merge/roll-up task level, we need to decide whether we want to expose the entire transformation layer or we just want to expose the config to skip columns to satisfy this requirement.\r\n\r\n@jtao15 @Jackie-Jiang ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154407952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154438330","html_url":"https://github.com/apache/pinot/pull/8852#issuecomment-1154438330","issue_url":"https://api.github.com/repos/apache/pinot/issues/8852","id":1154438330,"node_id":"IC_kwDOATCU_c5Ez1S6","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:05:21Z","updated_at":"2022-06-13T21:05:21Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nYes it is as simple as extracting interface. I am actually trying to use IDE to save some labor.\r\n\r\n\r\n> Are we trying to extract the interface for restlet service? If so, I'd suggest naming the interface `PinotBrokerRestletResource` and make the implementation `PinotBrokerRestletResourceImpl`. Currently the interface is already tied with restlet\r\n\r\nRenamed but the interface `PinotBrokerRestletResource` has to be put into another module; it is because when we load resources by Jersey it was using reflection; interfaces and its implementation cannot be in the same module otherwise Jersey will complain and panic.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154438330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154477256","html_url":"https://github.com/apache/pinot/issues/8829#issuecomment-1154477256","issue_url":"https://api.github.com/repos/apache/pinot/issues/8829","id":1154477256,"node_id":"IC_kwDOATCU_c5Ez-zI","user":{"login":"navina","id":1909480,"node_id":"MDQ6VXNlcjE5MDk0ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1909480?v=4","gravatar_id":"","url":"https://api.github.com/users/navina","html_url":"https://github.com/navina","followers_url":"https://api.github.com/users/navina/followers","following_url":"https://api.github.com/users/navina/following{/other_user}","gists_url":"https://api.github.com/users/navina/gists{/gist_id}","starred_url":"https://api.github.com/users/navina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navina/subscriptions","organizations_url":"https://api.github.com/users/navina/orgs","repos_url":"https://api.github.com/users/navina/repos","events_url":"https://api.github.com/users/navina/events{/privacy}","received_events_url":"https://api.github.com/users/navina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:54:38Z","updated_at":"2022-06-13T21:54:38Z","author_association":"CONTRIBUTOR","body":"@mneedham is it possible to include javadocs from our code into the website documentation ? It seems like the easiest way to automate and ensure that the code and docs match and are up-to-date. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154477256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154482832","html_url":"https://github.com/apache/pinot/issues/8842#issuecomment-1154482832","issue_url":"https://api.github.com/repos/apache/pinot/issues/8842","id":1154482832,"node_id":"IC_kwDOATCU_c5E0AKQ","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T22:02:03Z","updated_at":"2022-06-13T22:02:03Z","author_association":"CONTRIBUTOR","body":"Assuming we are okay with these dependencies in pinot-client @xiangfu0 , labeling this as beginner as it looks straightforward enough to fix. Lmk if it is not.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154482832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154530171","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1154530171","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1154530171,"node_id":"IC_kwDOATCU_c5E0Lt7","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T22:59:24Z","updated_at":"2022-06-13T22:59:24Z","author_association":"CONTRIBUTOR","body":"Re normalization. Yes, you can do this, and if so then something like Unicode Normalization Form C (NFC) would be good. But then you need to make sure you also normalize all query text in the same way, of course. Plus there's the backwards compatibility issue for existing segments.\r\n\r\nAnd it's not really an issue for this optimization, if you assume the user is ingesting text normalized (or not) as they see fit, and the query text uses the same normalization (or not). If you do decide to always normalize, then I'd suggest making that a separate PR.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154530171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154555649","html_url":"https://github.com/apache/pinot/issues/8864#issuecomment-1154555649","issue_url":"https://api.github.com/repos/apache/pinot/issues/8864","id":1154555649,"node_id":"IC_kwDOATCU_c5E0R8B","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T23:44:30Z","updated_at":"2022-06-13T23:44:30Z","author_association":"CONTRIBUTOR","body":"@stym06 - sure, go for it! One challenge is that testing this is painful, as you need to manually run stand-alone, Hadoop and Spark jobs to really validate proper behavior. Sadly, I don't think we've got integration tests for Hadoop or Spark, though I think I saw a recent issue about addressing that.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154555649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154813143","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1154813143","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1154813143,"node_id":"IC_kwDOATCU_c5E1QzX","user":{"login":"gortiz","id":1913993,"node_id":"MDQ6VXNlcjE5MTM5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1913993?v=4","gravatar_id":"","url":"https://api.github.com/users/gortiz","html_url":"https://github.com/gortiz","followers_url":"https://api.github.com/users/gortiz/followers","following_url":"https://api.github.com/users/gortiz/following{/other_user}","gists_url":"https://api.github.com/users/gortiz/gists{/gist_id}","starred_url":"https://api.github.com/users/gortiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gortiz/subscriptions","organizations_url":"https://api.github.com/users/gortiz/orgs","repos_url":"https://api.github.com/users/gortiz/repos","events_url":"https://api.github.com/users/gortiz/events{/privacy}","received_events_url":"https://api.github.com/users/gortiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T07:22:33Z","updated_at":"2022-06-14T07:22:33Z","author_association":"CONTRIBUTOR","body":"> Lastly, why do you say that indices don't help for single regexes? Unless I am misreading the benchmark result, even for a single regex case, native index is pretty fast?\r\n\r\nMy benchmark may not be the best and it is only measuring a few regexp cases, but I wouldn't say that native gives us a significant advantage:\r\n\r\n```\r\n-- this actually has a single, quite complex regex expression\r\nBenchmarkFuseRegexp.decreasing9Fusing       LUCENE  avgt    5    24.198 ±   13.439  ms/op\r\nBenchmarkFuseRegexp.decreasing9Fusing       NATIVE  avgt    5     0.263 ±    0.019  ms/op <-- here native is faster by 1.8x\r\nBenchmarkFuseRegexp.decreasing9Fusing         null  avgt    5     0.476 ±    0.040  ms/op\r\n-- this actually has a single, quite complex regex expression\r\nBenchmarkFuseRegexp.increasing10Fusing      LUCENE  avgt    5     ERROR\r\nBenchmarkFuseRegexp.increasing10Fusing      NATIVE  avgt    5     0.326 ±    0.138  ms/op <-- here native is slower by 1.4x, although the difference is lower than the error margin\r\nBenchmarkFuseRegexp.increasing10Fusing        null  avgt    5     0.226 ±    0.062  ms/op\r\n-- this is just a `where regexp_like(DOMAIN_NAMES, 'domain\\d')`\r\nBenchmarkFuseRegexp.optimal10               LUCENE  avgt    5     0.169 ±    0.066  ms/op\r\nBenchmarkFuseRegexp.optimal10               NATIVE  avgt    5     0.136 ±    0.011  ms/op  <-- here native is faster by 1.1x, although the difference is lower than the error margin\r\nBenchmarkFuseRegexp.optimal10                 null  avgt    5     0.149 ±    0.082  ms/op\r\n```\r\n\r\nSo we have one case where native is 1.8x faster and some others were it is equivalent to the java regex engine, which is known by its lack of performance. I mean, it is not like the native index is atrocious, but I would expect more from an index than a situational 1.8x performance increase. \r\n\r\nTo be clear, as I already said, this is not a benchmark on the FST itself and it is very narrow, so I don't want to get conclusions about whether we should or we should not use these indexes. I think this benchmark proves that there are very specific cases where these indexes are not very useful and therefore it would be nice to invest time to design proper tests with different kind of regex to verify whether FST indexes are in general useful evaluating regex or not.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154813143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154836072","html_url":"https://github.com/apache/pinot/pull/8884#issuecomment-1154836072","issue_url":"https://api.github.com/repos/apache/pinot/issues/8884","id":1154836072,"node_id":"IC_kwDOATCU_c5E1WZo","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T07:47:29Z","updated_at":"2022-07-05T07:36:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8884](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c376da9) into [master](https://codecov.io/gh/apache/pinot/commit/3ff4d13af7b693ec8f4766bbc281c1b3034621ba?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3ff4d13) will **decrease** coverage by `8.61%`.\n> The diff coverage is `89.10%`.\n\n> :exclamation: Current head c376da9 differs from pull request most recent head 5c6ef86. Consider uploading reports for the commit 5c6ef86 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8884      +/-   ##\n============================================\n- Coverage     70.09%   61.48%   -8.62%     \n- Complexity     4732     4769      +37     \n============================================\n  Files          1826     1815      -11     \n  Lines         95980    95711     -269     \n  Branches      14352    14318      -34     \n============================================\n- Hits          67281    58850    -8431     \n- Misses        24057    32531    +8474     \n+ Partials       4642     4330     -312     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.43% <87.12%> (+0.01%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `66.87% <89.10%> (+0.05%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/core/query/config/SegmentPrunerConfig.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9jb25maWcvU2VnbWVudFBydW5lckNvbmZpZy5qYXZh) | `100.00% <ø> (ø)` | |\n| [.../pinot/core/query/pruner/SegmentPrunerService.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9wcnVuZXIvU2VnbWVudFBydW5lclNlcnZpY2UuamF2YQ==) | `83.33% <69.23%> (-16.67%)` | :arrow_down: |\n| [...che/pinot/core/query/scheduler/QueryScheduler.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvUXVlcnlTY2hlZHVsZXIuamF2YQ==) | `84.02% <83.33%> (-1.25%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/metrics/ServerMeter.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9TZXJ2ZXJNZXRlci5qYXZh) | `100.00% <100.00%> (ø)` | |\n| [...t/common/response/broker/BrokerResponseNative.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzcG9uc2UvYnJva2VyL0Jyb2tlclJlc3BvbnNlTmF0aXZlLmphdmE=) | `96.27% <100.00%> (+0.30%)` | :arrow_up: |\n| [.../java/org/apache/pinot/common/utils/DataTable.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRGF0YVRhYmxlLmphdmE=) | `95.45% <100.00%> (+0.33%)` | :arrow_up: |\n| [...core/query/executor/ServerQueryExecutorV1Impl.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9leGVjdXRvci9TZXJ2ZXJRdWVyeUV4ZWN1dG9yVjFJbXBsLmphdmE=) | `82.72% <100.00%> (-0.22%)` | :arrow_down: |\n| [...pinot/core/query/pruner/SegmentPrunerProvider.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9wcnVuZXIvU2VnbWVudFBydW5lclByb3ZpZGVyLmphdmE=) | `84.61% <100.00%> (ø)` | |\n| [...not/core/query/pruner/SegmentPrunerStatistics.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9wcnVuZXIvU2VnbWVudFBydW5lclN0YXRpc3RpY3MuamF2YQ==) | `100.00% <100.00%> (ø)` | |\n| [...che/pinot/core/query/reduce/BaseReduceService.java](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9yZWR1Y2UvQmFzZVJlZHVjZVNlcnZpY2UuamF2YQ==) | `94.47% <100.00%> (+0.39%)` | :arrow_up: |\n| ... and [348 more](https://codecov.io/gh/apache/pinot/pull/8884/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [3ff4d13...5c6ef86](https://codecov.io/gh/apache/pinot/pull/8884?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154836072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154843395","html_url":"https://github.com/apache/pinot/pull/8878#issuecomment-1154843395","issue_url":"https://api.github.com/repos/apache/pinot/issues/8878","id":1154843395,"node_id":"IC_kwDOATCU_c5E1YMD","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T07:54:56Z","updated_at":"2022-06-14T07:54:56Z","author_association":"MEMBER","body":"> Re normalization. Yes, you can do this, and if so then something like Unicode Normalization Form C (NFC) would be good. But then you need to make sure you also normalize all query text in the same way, of course. Plus there's the backwards compatibility issue for existing segments.\r\n> \r\n> And it's not really an issue for this optimization, if you assume the user is ingesting text normalized (or not) as they see fit, and the query text uses the same normalization (or not). If you do decide to always normalize, then I'd suggest making that a separate PR.\r\n\r\nYes, there was a mistaken assumption when this topic was introduced that having a string object implied normalisation. It does not, so it’s an orthogonal issue to what this PR is solving.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154843395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154958296","html_url":"https://github.com/apache/pinot/pull/8828#issuecomment-1154958296","issue_url":"https://api.github.com/repos/apache/pinot/issues/8828","id":1154958296,"node_id":"IC_kwDOATCU_c5E10PY","user":{"login":"saurabhd336","id":7672118,"node_id":"MDQ6VXNlcjc2NzIxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7672118?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabhd336","html_url":"https://github.com/saurabhd336","followers_url":"https://api.github.com/users/saurabhd336/followers","following_url":"https://api.github.com/users/saurabhd336/following{/other_user}","gists_url":"https://api.github.com/users/saurabhd336/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabhd336/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabhd336/subscriptions","organizations_url":"https://api.github.com/users/saurabhd336/orgs","repos_url":"https://api.github.com/users/saurabhd336/repos","events_url":"https://api.github.com/users/saurabhd336/events{/privacy}","received_events_url":"https://api.github.com/users/saurabhd336/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T09:43:01Z","updated_at":"2022-06-14T09:43:01Z","author_association":"CONTRIBUTOR","body":"I've updated the PR to \r\n1) Add taskMeta to ZK.\r\n2) Add an API to return all tasks for a table.\r\n\r\nYet to add\r\n1) Retention on task ZNode\r\n2) Track status for single segment reload\r\n\r\nI was hoping to get the approach validated first, for all segments API. Once we are aligned on this, I'll update the PR to include changes for single segment reload.\r\n\r\ncc: @Jackie-Jiang @npawar ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1154958296/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155165270","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1155165270","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1155165270,"node_id":"IC_kwDOATCU_c5E2mxW","user":{"login":"gortiz","id":1913993,"node_id":"MDQ6VXNlcjE5MTM5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1913993?v=4","gravatar_id":"","url":"https://api.github.com/users/gortiz","html_url":"https://github.com/gortiz","followers_url":"https://api.github.com/users/gortiz/followers","following_url":"https://api.github.com/users/gortiz/following{/other_user}","gists_url":"https://api.github.com/users/gortiz/gists{/gist_id}","starred_url":"https://api.github.com/users/gortiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gortiz/subscriptions","organizations_url":"https://api.github.com/users/gortiz/orgs","repos_url":"https://api.github.com/users/gortiz/repos","events_url":"https://api.github.com/users/gortiz/events{/privacy}","received_events_url":"https://api.github.com/users/gortiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T13:10:01Z","updated_at":"2022-06-14T13:10:01Z","author_association":"CONTRIBUTOR","body":"I was able to invest more time in this topic today and I have to say that my initial benchmark was completely useless. Apart from some typos in the queries (which may have some impact), there were two problems that completely fooled me:\r\n- The implicit limit introduced by Pinot. As only the first 10 elements were returned, queries that actually found elements could finish faster.\r\n- Something is wrong with Lucene and Native indexes. I guess I'm not configuring them correctly, but they simply return 0 results when the regexp is a little bit complex (like having groups).\r\n\r\nTherefore I've changed all the tests to return a count and each iteration is actually verifying whether the expected value is returned or not, in which case the benchmark is stopped. As a result, all fusing tests fail whenever there is an index. I hope it is something related to my test (ie I didn't configure the index properly) and not some semantic discrepancy these indexes have in relation how each engine evaluates regexp, as that could mean that there are customers receiving false results.\r\n\r\nThese are the results I've got. Note that some combinations are not shown. For example, decreasing9Fusing and LUCENE or NATIVE. That means that these combinations did not return what it was expected (in all these particular cases it means that they return 0 rows). Note that apart from the fusing case, benchmarks like `optimal10`, which is `regexp_like(DOMAIN_NAMES, 'domain\\d')` did also failed.\r\n\r\n```\r\nBenchmark                                  (_fstType)  Mode  Cnt     Score      Error  Units\r\nBenchmarkFuseRegexp.decreasing9Fusing            null  avgt    5  1438.185 ±   73.963  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like            LUCENE  avgt    5    41.927 ±    0.984  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like            NATIVE  avgt    5    40.232 ±    5.597  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like              null  avgt    5  3957.902 ±  154.228  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex           LUCENE  avgt    5    40.744 ±    2.059  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex           NATIVE  avgt    5    61.443 ±    1.301  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex             null  avgt    5  2116.747 ±  602.570  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing           null  avgt    5  1320.869 ±   45.509  ms/op\r\nBenchmarkFuseRegexp.increasing10Like           LUCENE  avgt    5    42.253 ±    0.695  ms/op\r\nBenchmarkFuseRegexp.increasing10Like           NATIVE  avgt    5    39.049 ±    1.829  ms/op\r\nBenchmarkFuseRegexp.increasing10Like             null  avgt    5  5071.207 ± 3134.887  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex          LUCENE  avgt    5    44.084 ±    2.737  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex          NATIVE  avgt    5    39.650 ±    1.567  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex            null  avgt    5  2318.479 ±   75.632  ms/op\r\nBenchmarkFuseRegexp.optimal10                    null  avgt    5   185.757 ±    3.426  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound          LUCENE  avgt    5     0.212 ±    0.136  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound          NATIVE  avgt    5     0.201 ±    0.140  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound            null  avgt    5   248.525 ±   60.819  ms/op\r\nBenchmarkFuseRegexp.optimal1Like               LUCENE  avgt    5    16.431 ±    3.533  ms/op\r\nBenchmarkFuseRegexp.optimal1Like               NATIVE  avgt    5    16.586 ±    0.828  ms/op\r\nBenchmarkFuseRegexp.optimal1Like                 null  avgt    5   468.731 ±  185.623  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound       LUCENE  avgt    5     0.197 ±    0.062  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound       NATIVE  avgt    5     0.170 ±    0.072  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound         null  avgt    5   477.176 ±  129.445  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex              LUCENE  avgt    5    15.485 ±    0.517  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex              NATIVE  avgt    5    16.711 ±    0.857  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex                null  avgt    5   205.676 ±    6.921  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound      LUCENE  avgt    5     0.212 ±    0.123  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound      NATIVE  avgt    5     0.186 ±    0.029  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound        null  avgt    5   239.459 ±   13.846  ms/op\r\nBenchmarkFuseRegexp.selective2Fusing             null  avgt    5   541.530 ±  168.173  ms/op\r\nBenchmarkFuseRegexp.selective2Like             LUCENE  avgt    5    19.961 ±    0.937  ms/op\r\nBenchmarkFuseRegexp.selective2Like             NATIVE  avgt    5    20.387 ±    1.953  ms/op\r\nBenchmarkFuseRegexp.selective2Like               null  avgt    5   916.620 ±   96.702  ms/op\r\nBenchmarkFuseRegexp.selective2Regex            LUCENE  avgt    5    23.366 ±    0.795  ms/op\r\nBenchmarkFuseRegexp.selective2Regex            NATIVE  avgt    5    20.037 ±    0.601  ms/op\r\nBenchmarkFuseRegexp.selective2Regex              null  avgt    5   389.965 ±    7.284  ms/op\r\n```\r\n\r\nI've also changed `RegexpPatternConverterUtils` (and its relative test) to do not introduce useless `^.*` at the beginning of the expression nor `.*$` at the end. I've repeated the benchmark with that change and these are the results I've got. As you can see, most benchmarks didn't change that much, but the ones that use like and have no index are twice as fast, so they achieve the same numbers than their equivalent `optimalXRegex`, as expected.\r\n\r\n```\r\nBenchmark                                  (_fstType)  Mode  Cnt     Score     Error  Units\r\nBenchmarkFuseRegexp.decreasing9Fusing            null  avgt    5  1365.403 ±  91.822  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like            LUCENE  avgt    5    40.553 ±   1.394  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like            NATIVE  avgt    5    39.057 ±   0.905  ms/op\r\nBenchmarkFuseRegexp.decreasing9Like              null  avgt    5  2046.090 ±  40.428  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex           LUCENE  avgt    5    42.584 ±   2.387  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex           NATIVE  avgt    5    61.583 ±   1.893  ms/op\r\nBenchmarkFuseRegexp.decreasing9Regex             null  avgt    5  2054.523 ±  75.452  ms/op\r\nBenchmarkFuseRegexp.increasing10Fusing           null  avgt    5  1305.249 ±  65.576  ms/op\r\nBenchmarkFuseRegexp.increasing10Like           LUCENE  avgt    5    43.328 ±   2.040  ms/op\r\nBenchmarkFuseRegexp.increasing10Like           NATIVE  avgt    5    61.580 ±   1.149  ms/op\r\nBenchmarkFuseRegexp.increasing10Like             null  avgt    5  2272.112 ±  99.393  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex          LUCENE  avgt    5    54.319 ±   2.048  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex          NATIVE  avgt    5    39.080 ±   1.817  ms/op\r\nBenchmarkFuseRegexp.increasing10Regex            null  avgt    5  2267.062 ±  49.525  ms/op\r\nBenchmarkFuseRegexp.optimal10                    null  avgt    5   187.012 ±  13.054  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound          LUCENE  avgt    5     0.210 ±   0.103  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound          NATIVE  avgt    5     0.201 ±   0.066  ms/op\r\nBenchmarkFuseRegexp.optimal10NotFound            null  avgt    5   242.423 ±  17.612  ms/op\r\nBenchmarkFuseRegexp.optimal1Like               LUCENE  avgt    5    16.395 ±   0.884  ms/op\r\nBenchmarkFuseRegexp.optimal1Like               NATIVE  avgt    5    15.506 ±   0.591  ms/op\r\nBenchmarkFuseRegexp.optimal1Like                 null  avgt    5   209.389 ±  11.456  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound       LUCENE  avgt    5     0.209 ±   0.129  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound       NATIVE  avgt    5     0.172 ±   0.021  ms/op\r\nBenchmarkFuseRegexp.optimal1LikeNotFound         null  avgt    5   245.542 ±  35.323  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex              LUCENE  avgt    5    15.421 ±   0.804  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex              NATIVE  avgt    5    15.908 ±   0.491  ms/op\r\nBenchmarkFuseRegexp.optimal1Regex                null  avgt    5   204.505 ±  13.134  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound      LUCENE  avgt    5     0.210 ±   0.089  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound      NATIVE  avgt    5     0.203 ±   0.107  ms/op\r\nBenchmarkFuseRegexp.optimal1RegexNotFound        null  avgt    5   235.262 ±   8.533  ms/op\r\nBenchmarkFuseRegexp.selective2Fusing             null  avgt    5   517.545 ± 193.977  ms/op\r\nBenchmarkFuseRegexp.selective2Like             LUCENE  avgt    5    23.622 ±   1.178  ms/op\r\nBenchmarkFuseRegexp.selective2Like             NATIVE  avgt    5    20.547 ±   0.778  ms/op\r\nBenchmarkFuseRegexp.selective2Like               null  avgt    5   399.638 ±  54.746  ms/op\r\nBenchmarkFuseRegexp.selective2Regex            LUCENE  avgt    5    23.883 ±   0.802  ms/op\r\nBenchmarkFuseRegexp.selective2Regex            NATIVE  avgt    5    20.113 ±   0.858  ms/op\r\nBenchmarkFuseRegexp.selective2Regex              null  avgt    5   416.987 ±  28.789  ms/op\r\n```\r\n\r\nWith this results, the optimization introduced in this PR doesn't seem to be amazing, but to be honest I'm quite worried about what is going on with regexp and Lucene/Native indexes. As said above, I hope that the benchmark is not correctly configuring the indexes, but even with that, it seems very dangerous that an index can be configured in such a way that it affects the semantics of the queries.\r\n\r\n@Jackie-Jiang @atris I would really appreciate if any of you can take a look at the benchmark trying to find what is going on.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155165270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155183347","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1155183347","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1155183347,"node_id":"IC_kwDOATCU_c5E2rLz","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T13:24:15Z","updated_at":"2022-06-14T13:24:15Z","author_association":"CONTRIBUTOR","body":"@gortiz are you creating a FST index or a text index? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155183347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155193112","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1155193112","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1155193112,"node_id":"IC_kwDOATCU_c5E2tkY","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T13:32:27Z","updated_at":"2022-06-14T13:32:27Z","author_association":"CONTRIBUTOR","body":"@gortiz another thing to remember is that neither Lucene nor native FST index follow the java regex pattern language.\n\n If you look up the Lucene regex documentation, and look at the FST index and LIKE tests in Pinot, you will notice the difference.\n\nUnfortunately, since we do not actually parse the regex engine until deep inside the FST territory, we have no way of reporting unknown characters. That may be a factor leading to 0 results for your queries","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155193112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155361052","html_url":"https://github.com/apache/pinot/pull/8852#issuecomment-1155361052","issue_url":"https://api.github.com/repos/apache/pinot/issues/8852","id":1155361052,"node_id":"IC_kwDOATCU_c5E3Wkc","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T15:33:37Z","updated_at":"2022-06-14T15:33:37Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang @walterddr test passed. Should be good to go now","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155361052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155481046","html_url":"https://github.com/apache/pinot/issues/8360#issuecomment-1155481046","issue_url":"https://api.github.com/repos/apache/pinot/issues/8360","id":1155481046,"node_id":"IC_kwDOATCU_c5E3z3W","user":{"login":"noon-stripe","id":89272166,"node_id":"MDQ6VXNlcjg5MjcyMTY2","avatar_url":"https://avatars.githubusercontent.com/u/89272166?v=4","gravatar_id":"","url":"https://api.github.com/users/noon-stripe","html_url":"https://github.com/noon-stripe","followers_url":"https://api.github.com/users/noon-stripe/followers","following_url":"https://api.github.com/users/noon-stripe/following{/other_user}","gists_url":"https://api.github.com/users/noon-stripe/gists{/gist_id}","starred_url":"https://api.github.com/users/noon-stripe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noon-stripe/subscriptions","organizations_url":"https://api.github.com/users/noon-stripe/orgs","repos_url":"https://api.github.com/users/noon-stripe/repos","events_url":"https://api.github.com/users/noon-stripe/events{/privacy}","received_events_url":"https://api.github.com/users/noon-stripe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T17:15:01Z","updated_at":"2022-06-14T17:15:01Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang can you take a look? \r\n\r\nhttps://github.com/pinot-contrib/pinot-docs/pull/102\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155481046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155502606","html_url":"https://github.com/apache/pinot/issues/8360#issuecomment-1155502606","issue_url":"https://api.github.com/repos/apache/pinot/issues/8360","id":1155502606,"node_id":"IC_kwDOATCU_c5E35IO","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T17:38:43Z","updated_at":"2022-06-14T17:38:43Z","author_association":"CONTRIBUTOR","body":"@noon-stripe This is great! Thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155502606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155726440","html_url":"https://github.com/apache/pinot/issues/8352#issuecomment-1155726440","issue_url":"https://api.github.com/repos/apache/pinot/issues/8352","id":1155726440,"node_id":"IC_kwDOATCU_c5E4vxo","user":{"login":"jadami10","id":4760722,"node_id":"MDQ6VXNlcjQ3NjA3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/4760722?v=4","gravatar_id":"","url":"https://api.github.com/users/jadami10","html_url":"https://github.com/jadami10","followers_url":"https://api.github.com/users/jadami10/followers","following_url":"https://api.github.com/users/jadami10/following{/other_user}","gists_url":"https://api.github.com/users/jadami10/gists{/gist_id}","starred_url":"https://api.github.com/users/jadami10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jadami10/subscriptions","organizations_url":"https://api.github.com/users/jadami10/orgs","repos_url":"https://api.github.com/users/jadami10/repos","events_url":"https://api.github.com/users/jadami10/events{/privacy}","received_events_url":"https://api.github.com/users/jadami10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T21:24:37Z","updated_at":"2022-06-14T21:24:55Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang I'm resurfacing this issue as it hit multiple of our clusters this week. There were zookeeper leader elections that were then followed by severe degradation throughout pinot: tons of traffic between zk <> controller and zk <> server, unable to commit segments, high zk latency, and more.\r\n\r\nWe saw ~.5 million `SessionId does NOT match` messages per hour coming from servers that went away once we restarted the servers\r\n\r\nHow can we help debug here?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155726440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155785311","html_url":"https://github.com/apache/pinot/issues/8804#issuecomment-1155785311","issue_url":"https://api.github.com/repos/apache/pinot/issues/8804","id":1155785311,"node_id":"IC_kwDOATCU_c5E4-Jf","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T22:53:14Z","updated_at":"2022-06-14T22:53:14Z","author_association":"CONTRIBUTOR","body":"Here is the history:\r\nWhen we had only HLC, we had `replication` for both OFFLINE as well as REALTIME tables. In case of REALTIME, it was used to [derive](https://github.com/apache/pinot/blob/master/pinot-controller/src/main/java/org/apache/pinot/controller/helix/core/PinotTableIdealStateBuilder.java#L89) the number of realtime servers to consume the topic and also whether the topic was divided amongst the servers (something that only Uber used, I believe -- to split events on same topic across servers).\r\n\r\nTherefore, this config could not be used for LLC, and we picked a new config -- `replicasPerPartition`. Note that `replication` is still used for OFFLINE tables.\r\n\r\nI am not sure if we can declare HLC dead as yet. We can certainly poll the community and check, and if everyone agrees, we can remove the code, and proceed to treat `replication` as the number of replicas -- whether offline or realtime.\r\n\r\nAnother way to do this would be to use `replication` as the number of replicas if a table has only LLC (but then we have to make sure that they never ever add HLC to it -- having both HLC and LLC is one way of migrating from HLC to LLC). Fall back to `replicasPerPartition` if that `replicas` is not defined. This may be a more palatable way in case people are using HLC.\r\n\r\nHappy to discuss over a small doc rather than this issue. We can then float the doc to the public as well","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155785311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155796503","html_url":"https://github.com/apache/pinot/issues/8889#issuecomment-1155796503","issue_url":"https://api.github.com/repos/apache/pinot/issues/8889","id":1155796503,"node_id":"IC_kwDOATCU_c5E5A4X","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T23:14:08Z","updated_at":"2022-06-14T23:14:08Z","author_association":"CONTRIBUTOR","body":"Hi @lksvenoy-r7 - thanks for opening this issue, sounds very promising! A few comments & questions...\r\n\r\n1. I think not supporting checkpointing is OK.\r\n2. When you say only BATCH execution mode, are you talking about DataSets or bounded streams?\r\n3. There's been quite a lot of discussion around how to build segments that are properly partitioned (matching Flink's hashing function) so that the resulting table can be configured as partitioned. Would your version work with a bucketing policy?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1155796503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156012774","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1156012774","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1156012774,"node_id":"IC_kwDOATCU_c5E51rm","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T05:43:31Z","updated_at":"2022-06-15T05:43:31Z","author_association":"CONTRIBUTOR","body":"This is awesome! Should we consider also supporting identifier as value? That way the current way of putting options can work","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156012774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156015909","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1156015909","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1156015909,"node_id":"IC_kwDOATCU_c5E52cl","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T05:49:10Z","updated_at":"2022-06-15T05:49:10Z","author_association":"MEMBER","body":"+1 thanks @walterddr for adding this","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156015909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156019344","html_url":"https://github.com/apache/pinot/pull/8891#issuecomment-1156019344","issue_url":"https://api.github.com/repos/apache/pinot/issues/8891","id":1156019344,"node_id":"IC_kwDOATCU_c5E53SQ","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T05:55:39Z","updated_at":"2022-06-15T06:10:09Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8891](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8c8bb67) into [master](https://codecov.io/gh/apache/pinot/commit/c802786ea95cff67b83ff4d24f796b965e565854?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c802786) will **decrease** coverage by `0.06%`.\n> The diff coverage is `63.98%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8891      +/-   ##\n============================================\n- Coverage     69.78%   69.72%   -0.07%     \n- Complexity     4679     4880     +201     \n============================================\n  Files          1808     1811       +3     \n  Lines         94235    94430     +195     \n  Branches      14052    14085      +33     \n============================================\n+ Hits          65765    65844      +79     \n- Misses        23908    24017     +109     \n- Partials       4562     4569       +7     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.65% <30.05%> (-0.06%)` | :arrow_down: |\n| integration2 | `24.85% <31.25%> (-0.04%)` | :arrow_down: |\n| unittests1 | `66.37% <59.52%> (-0.03%)` | :arrow_down: |\n| unittests2 | `14.84% <0.00%> (-0.05%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...dictionary/BigDecimalOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQmlnRGVjaW1hbE9mZkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `38.38% <0.00%> (-0.40%)` | :arrow_down: |\n| [.../dictionary/BigDecimalOnHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQmlnRGVjaW1hbE9uSGVhcE11dGFibGVEaWN0aW9uYXJ5LmphdmE=) | `34.83% <0.00%> (-0.40%)` | :arrow_down: |\n| [...impl/dictionary/BytesOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQnl0ZXNPZmZIZWFwTXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `54.79% <0.00%> (-0.77%)` | :arrow_down: |\n| [.../impl/dictionary/BytesOnHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQnl0ZXNPbkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `51.56% <0.00%> (-0.82%)` | :arrow_down: |\n| [...mpl/dictionary/DoubleOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRG91YmxlT2ZmSGVhcE11dGFibGVEaWN0aW9uYXJ5LmphdmE=) | `36.45% <0.00%> (-0.39%)` | :arrow_down: |\n| [...impl/dictionary/DoubleOnHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRG91YmxlT25IZWFwTXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `32.94% <0.00%> (-0.40%)` | :arrow_down: |\n| [...impl/dictionary/FloatOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRmxvYXRPZmZIZWFwTXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `38.54% <0.00%> (-0.41%)` | :arrow_down: |\n| [.../impl/dictionary/FloatOnHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRmxvYXRPbkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `34.11% <0.00%> (-0.41%)` | :arrow_down: |\n| [...e/impl/dictionary/IntOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvSW50T2ZmSGVhcE11dGFibGVEaWN0aW9uYXJ5LmphdmE=) | `47.91% <0.00%> (-0.51%)` | :arrow_down: |\n| [...me/impl/dictionary/IntOnHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvSW50T25IZWFwTXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `42.35% <0.00%> (-0.51%)` | :arrow_down: |\n| ... and [70 more](https://codecov.io/gh/apache/pinot/pull/8891/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c802786...8c8bb67](https://codecov.io/gh/apache/pinot/pull/8891?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156019344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156028397","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1156028397","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1156028397,"node_id":"IC_kwDOATCU_c5E55ft","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T06:10:24Z","updated_at":"2022-06-15T06:10:45Z","author_association":"CONTRIBUTOR","body":"Actually after a second thought, I think it is okay to keep the current way without affecting current query options. The only query option value that is not number/boolean is `FORCE_HLC` which I believe no one is using. @siddharthteotia \r\n\r\nThere is a major issue not handled though. In `PinotClientRequest.constructSqlQueryOptions()`, the `groupByMode` and `responseFormat` value `SQL` cannot be parsed, and that can cause user not able to upgrade from 0.10.0. We need to quote the value if there is no easy way to support the previous format","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156028397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156032082","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1156032082","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1156032082,"node_id":"IC_kwDOATCU_c5E56ZS","user":{"login":"gortiz","id":1913993,"node_id":"MDQ6VXNlcjE5MTM5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1913993?v=4","gravatar_id":"","url":"https://api.github.com/users/gortiz","html_url":"https://github.com/gortiz","followers_url":"https://api.github.com/users/gortiz/followers","following_url":"https://api.github.com/users/gortiz/following{/other_user}","gists_url":"https://api.github.com/users/gortiz/gists{/gist_id}","starred_url":"https://api.github.com/users/gortiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gortiz/subscriptions","organizations_url":"https://api.github.com/users/gortiz/orgs","repos_url":"https://api.github.com/users/gortiz/repos","events_url":"https://api.github.com/users/gortiz/events{/privacy}","received_events_url":"https://api.github.com/users/gortiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T06:15:45Z","updated_at":"2022-06-15T06:15:45Z","author_association":"CONTRIBUTOR","body":"> @gortiz another thing to remember is that neither Lucene nor native FST index follow the java regex pattern language.\r\n> \r\n> If you look up the Lucene regex documentation, and look at the FST index and LIKE tests in Pinot, you will notice the difference.\r\n> \r\n> Unfortunately, since we do not actually parse the regex engine until deep inside the FST territory, we have no way of reporting unknown characters. That may be a factor leading to 0 results for your queries\r\n\r\nWow, that is shocking and I would see that as a huge problem to use Pinot in a big team. In cases like that I would expect to have a new operation that does the search using the Lucene expression language or whatever we want to use and fail if there is no index. What you are saying is that if I have a column that is not indexed and suddenly a colleague of mine decides to index that column, queries I had will start to return different (and incorrect) results. \r\n\r\nAnyway, if that is what was decided, that is what we have. I'm going to close this PR, as it doesn't make sense to apply this optimization if it can be produce false results when someone adds an index.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156032082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156035325","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1156035325","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1156035325,"node_id":"IC_kwDOATCU_c5E57L9","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T06:20:26Z","updated_at":"2022-06-15T06:20:26Z","author_association":"CONTRIBUTOR","body":"Just noticed that seems it requires an extra `;` to split the statements, then all the existing query option won't work... We should document this change in the PR description","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156035325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156041338","html_url":"https://github.com/apache/pinot/pull/8892#issuecomment-1156041338","issue_url":"https://api.github.com/repos/apache/pinot/issues/8892","id":1156041338,"node_id":"IC_kwDOATCU_c5E58p6","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T06:29:10Z","updated_at":"2022-06-15T06:44:38Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8892](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b9188de) into [master](https://codecov.io/gh/apache/pinot/commit/c50b3c4bb46b9559ca143e41ec91599258f726bc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c50b3c4) will **increase** coverage by `0.16%`.\n> The diff coverage is `50.00%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8892      +/-   ##\n============================================\n+ Coverage     69.64%   69.80%   +0.16%     \n- Complexity     4611     4854     +243     \n============================================\n  Files          1730     1808      +78     \n  Lines         90314    94237    +3923     \n  Branches      13421    14053     +632     \n============================================\n+ Hits          62900    65785    +2885     \n- Misses        23054    23882     +828     \n- Partials       4360     4570     +210     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.66% <50.00%> (-0.20%)` | :arrow_down: |\n| integration2 | `25.00% <50.00%> (-0.29%)` | :arrow_down: |\n| unittests1 | `66.40% <0.00%> (+0.22%)` | :arrow_up: |\n| unittests2 | `14.87% <0.00%> (+0.61%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/pinot/core/transport/ServerResponse.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvU2VydmVyUmVzcG9uc2UuamF2YQ==) | `92.85% <50.00%> (-7.15%)` | :arrow_down: |\n| [...raw/RawDoubleSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3RG91YmxlU2luZ2xlQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `61.11% <0.00%> (-38.89%)` | :arrow_down: |\n| [...y/distinct/raw/RawMultiColumnDistinctExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3TXVsdGlDb2x1bW5EaXN0aW5jdEV4ZWN1dG9yLmphdmE=) | `52.04% <0.00%> (-36.85%)` | :arrow_down: |\n| [...che/pinot/controller/util/TableMetadataReader.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci91dGlsL1RhYmxlTWV0YWRhdGFSZWFkZXIuamF2YQ==) | `63.41% <0.00%> (-36.59%)` | :arrow_down: |\n| [...ct/raw/RawIntSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3SW50U2luZ2xlQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| [...t/raw/RawLongSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3TG9uZ1NpbmdsZUNvbHVtbkRpc3RpbmN0T25seUV4ZWN1dG9yLmphdmE=) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| [.../raw/RawFloatSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3RmxvYXRTaW5nbGVDb2x1bW5EaXN0aW5jdE9ubHlFeGVjdXRvci5qYXZh) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| [...raw/RawStringSingleColumnDistinctOnlyExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9yYXcvUmF3U3RyaW5nU2luZ2xlQ29sdW1uRGlzdGluY3RPbmx5RXhlY3V0b3IuamF2YQ==) | `44.44% <0.00%> (-35.56%)` | :arrow_down: |\n| [...onaryBasedSingleColumnDistinctOrderByExecutor.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9kaXN0aW5jdC9kaWN0aW9uYXJ5L0RpY3Rpb25hcnlCYXNlZFNpbmdsZUNvbHVtbkRpc3RpbmN0T3JkZXJCeUV4ZWN1dG9yLmphdmE=) | `56.66% <0.00%> (-34.64%)` | :arrow_down: |\n| [...icate/FSTBasedRegexpPredicateEvaluatorFactory.java](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvcHJlZGljYXRlL0ZTVEJhc2VkUmVnZXhwUHJlZGljYXRlRXZhbHVhdG9yRmFjdG9yeS5qYXZh) | `56.25% <0.00%> (-33.75%)` | :arrow_down: |\n| ... and [352 more](https://codecov.io/gh/apache/pinot/pull/8892/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c50b3c4...b9188de](https://codecov.io/gh/apache/pinot/pull/8892?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156041338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156103702","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1156103702","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1156103702,"node_id":"IC_kwDOATCU_c5E6L4W","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T07:37:48Z","updated_at":"2022-06-15T07:37:48Z","author_association":"CONTRIBUTOR","body":"@gortiz There has been a long comment trail on this PR so I am summarising my responses in this comment:\r\n\r\n1. Performance -- Like any other index, FST indices also have their worst case. FST is an automaton, and in an extreme scenario where a high number of branches are traversed for a query, the performance of the index will approach the brute force approximation.\r\n\r\nIn this case, the query you tried had an abnormally large number of branches, to the extent that Lucene decided to not even try and process the query. The average user rarely fires such queries, and in the corner cases where they do, they should be ok with a brute force latency, as long as their 99th percentile queries keep performing significantly better, which is the case as is evident from the benchmarks that test the FST index.\r\n\r\n2. Language Semantics -- Lucene has, for long, published its regex dialect clearly. Engines based on Lucene, such as ElasticSearch and Apache Solr, follow the same dialect (https://help.oncrawl.com/en/articles/1685982-lucene-regex-cheat-sheet)\r\n\r\nIt is arguable whether this is correct or not, but we have to keep historical perspective in mind, since many Pinot users migrate from one of these engines.\r\n\r\nPlease note that, from native FST index's perspective, it is pretty simple to support java regex language. The reason I did not do that was because the existing FST index was based on Lucene and thus supported Lucene's regex dialect. For back compatibility, native FST index supports the same dialect.\r\n\r\n3. Parsing And Reporting Invalid Regexes: I agree that in an ideal scenario, we should be parsing regexes and reporting characters that we do not accept. However, given the complexity of an average regex, the time complexity of doing this will be non trivial.\r\n\r\n4. Specific To This PR: I looked into the PR and while the effort is appreciative, I do not see significant performance improvement. Also, the API surface changes required for this change are high, which makes me a bit uneasy.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156103702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156125315","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1156125315","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1156125315,"node_id":"IC_kwDOATCU_c5E6RKD","user":{"login":"gortiz","id":1913993,"node_id":"MDQ6VXNlcjE5MTM5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1913993?v=4","gravatar_id":"","url":"https://api.github.com/users/gortiz","html_url":"https://github.com/gortiz","followers_url":"https://api.github.com/users/gortiz/followers","following_url":"https://api.github.com/users/gortiz/following{/other_user}","gists_url":"https://api.github.com/users/gortiz/gists{/gist_id}","starred_url":"https://api.github.com/users/gortiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gortiz/subscriptions","organizations_url":"https://api.github.com/users/gortiz/orgs","repos_url":"https://api.github.com/users/gortiz/repos","events_url":"https://api.github.com/users/gortiz/events{/privacy}","received_events_url":"https://api.github.com/users/gortiz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T07:57:44Z","updated_at":"2022-06-15T07:57:44Z","author_association":"CONTRIBUTOR","body":"Yeah, I completely understand that we should maintain the Lucene language when Natife FST was created. My concern is with the fact that when Lucene index was added, we decided to accept a different language in `regexp_match`. IMHO that is a consistency problem that is not easy to explain to Pinot customers. Pinot doesn't include documentation about this operation and how it changes depending on whether there is an index or not and I feel sorry for whoever has to write that doc, because it seems quite difficult to describe.\r\n\r\nIMHO a better solution would be to do not optimize `regexp_match` with indexes and to have another operation whose string argument was a Lucene expression.\r\n\r\nIt is too late to do that, so let's focus on useful things. This PR is closed, but I'm going to cherry pick the like to regex optimization to add it in another PR.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156125315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156242675","html_url":"https://github.com/apache/pinot/pull/8893#issuecomment-1156242675","issue_url":"https://api.github.com/repos/apache/pinot/issues/8893","id":1156242675,"node_id":"IC_kwDOATCU_c5E6tzz","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T09:40:27Z","updated_at":"2022-07-14T10:43:28Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8893](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (74fd8d3) into [master](https://codecov.io/gh/apache/pinot/commit/8e7ca65b70dc03632b324c07a1666cf5ca503410?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8e7ca65) will **decrease** coverage by `34.65%`.\n> The diff coverage is `48.48%`.\n\n> :exclamation: Current head 74fd8d3 differs from pull request most recent head 88f2564. Consider uploading reports for the commit 88f2564 to get more accurate results\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8893       +/-   ##\n=============================================\n- Coverage     70.09%   35.44%   -34.66%     \n+ Complexity     4965      184     -4781     \n=============================================\n  Files          1831     1831               \n  Lines         96270    96335       +65     \n  Branches      14390    14403       +13     \n=============================================\n- Hits          67483    34148    -33335     \n- Misses        24135    59422    +35287     \n+ Partials       4652     2765     -1887     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.55% <34.84%> (-0.01%)` | :arrow_down: |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `15.37% <13.63%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/pinot/common/lineage/SegmentLineage.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZS5qYXZh) | `77.77% <0.00%> (-17.88%)` | :arrow_down: |\n| [...spi/utils/builder/ControllerRequestURLBuilder.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvYnVpbGRlci9Db250cm9sbGVyUmVxdWVzdFVSTEJ1aWxkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...inot/common/utils/RegexpPatternConverterUtils.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvUmVnZXhwUGF0dGVybkNvbnZlcnRlclV0aWxzLmphdmE=) | `44.82% <53.48%> (-42.68%)` | :arrow_down: |\n| [...ler/api/resources/PinotSegmentRestletResource.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2VnbWVudFJlc3RsZXRSZXNvdXJjZS5qYXZh) | `24.90% <61.53%> (-0.10%)` | :arrow_down: |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `65.90% <100.00%> (-1.22%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/spi/trace/BaseRecording.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdHJhY2UvQmFzZVJlY29yZGluZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/spi/trace/NoOpRecording.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdHJhY2UvTm9PcFJlY29yZGluZy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/user/RoleType.java](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3VzZXIvUm9sZVR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1074 more](https://codecov.io/gh/apache/pinot/pull/8893/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [8e7ca65...88f2564](https://codecov.io/gh/apache/pinot/pull/8893?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156242675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156324780","html_url":"https://github.com/apache/pinot/pull/8872#issuecomment-1156324780","issue_url":"https://api.github.com/repos/apache/pinot/issues/8872","id":1156324780,"node_id":"IC_kwDOATCU_c5E7B2s","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T10:58:55Z","updated_at":"2022-06-17T00:07:07Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8872](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0c60b20) into [master](https://codecov.io/gh/apache/pinot/commit/c802786ea95cff67b83ff4d24f796b965e565854?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c802786) will **decrease** coverage by `1.61%`.\n> The diff coverage is `66.66%`.\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8872      +/-   ##\n============================================\n- Coverage     69.78%   68.17%   -1.62%     \n- Complexity     4679     4682       +3     \n============================================\n  Files          1808     1809       +1     \n  Lines         94235    94331      +96     \n  Branches      14052    14069      +17     \n============================================\n- Hits          65765    64308    -1457     \n- Misses        23908    25516    +1608     \n+ Partials       4562     4507      -55     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `24.99% <9.52%> (+0.11%)` | :arrow_up: |\n| unittests1 | `66.37% <66.66%> (-0.03%)` | :arrow_down: |\n| unittests2 | `14.87% <1.58%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../java/org/apache/pinot/common/utils/DataTable.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRGF0YVRhYmxlLmphdmE=) | `95.12% <ø> (ø)` | |\n| [...che/pinot/core/common/datablock/MetadataBlock.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL01ldGFkYXRhQmxvY2suamF2YQ==) | `55.55% <ø> (ø)` | |\n| [...ot/query/runtime/operator/MailboxSendOperator.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcXVlcnktcnVudGltZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcXVlcnkvcnVudGltZS9vcGVyYXRvci9NYWlsYm94U2VuZE9wZXJhdG9yLmphdmE=) | `71.08% <0.00%> (ø)` | |\n| [...che/pinot/core/common/datatable/BaseDataTable.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YXRhYmxlL0Jhc2VEYXRhVGFibGUuamF2YQ==) | `79.71% <25.00%> (-2.25%)` | :arrow_down: |\n| [.../pinot/core/common/datablock/DataBlockBuilder.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL0RhdGFCbG9ja0J1aWxkZXIuamF2YQ==) | `71.78% <33.33%> (-2.47%)` | :arrow_down: |\n| [...che/pinot/core/common/datablock/BaseDataBlock.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL0Jhc2VEYXRhQmxvY2suamF2YQ==) | `75.49% <50.00%> (-0.60%)` | :arrow_down: |\n| [...ache/pinot/core/common/datablock/RowDataBlock.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YWJsb2NrL1Jvd0RhdGFCbG9jay5qYXZh) | `68.42% <71.42%> (+1.75%)` | :arrow_up: |\n| [.../org/apache/pinot/core/common/NullBitmapUtils.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vTnVsbEJpdG1hcFV0aWxzLmphdmE=) | `83.33% <83.33%> (ø)` | |\n| [.../pinot/core/common/datatable/DataTableBuilder.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZGF0YXRhYmxlL0RhdGFUYWJsZUJ1aWxkZXIuamF2YQ==) | `83.44% <90.90%> (-0.50%)` | :arrow_down: |\n| [...org/apache/pinot/core/common/ObjectSerDeUtils.java](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vT2JqZWN0U2VyRGVVdGlscy5qYXZh) | `89.63% <100.00%> (-0.76%)` | :arrow_down: |\n| ... and [158 more](https://codecov.io/gh/apache/pinot/pull/8872/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c802786...0c60b20](https://codecov.io/gh/apache/pinot/pull/8872?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156324780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156332105","html_url":"https://github.com/apache/pinot/pull/8828#issuecomment-1156332105","issue_url":"https://api.github.com/repos/apache/pinot/issues/8828","id":1156332105,"node_id":"IC_kwDOATCU_c5E7DpJ","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T11:06:06Z","updated_at":"2022-08-02T08:44:36Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8828?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8828](https://codecov.io/gh/apache/pinot/pull/8828?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0b3fc36) into [master](https://codecov.io/gh/apache/pinot/commit/cc8362fe6033b11b5b83fa1c509ea556f6ee1c25?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cc8362f) will **decrease** coverage by `43.94%`.\n> The diff coverage is `67.85%`.\n\n> :exclamation: Current head 0b3fc36 differs from pull request most recent head 966e46f. Consider uploading reports for the commit 966e46f to get more accurate results\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8828       +/-   ##\n=============================================\n- Coverage     68.80%   24.86%   -43.95%     \n+ Complexity     4747       51     -4696     \n=============================================\n  Files          1842     1834        -8     \n  Lines         97579    97437      -142     \n  Branches      14716    14698       -18     \n=============================================\n- Hits          67141    24228    -42913     \n- Misses        25705    70827    +45122     \n+ Partials       4733     2382     -2351     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `24.86% <67.85%> (?)` | |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8828?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oller/api/resources/PinotTableRestletResource.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90VGFibGVSZXN0bGV0UmVzb3VyY2UuamF2YQ==) | `27.72% <0.00%> (-36.82%)` | :arrow_down: |\n| [...segment/local/data/manager/SegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9kYXRhL21hbmFnZXIvU2VnbWVudERhdGFNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (-83.34%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/CommonConstants.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQ29tbW9uQ29uc3RhbnRzLmphdmE=) | `0.00% <0.00%> (-28.58%)` | :arrow_down: |\n| [...spi/utils/builder/ControllerRequestURLBuilder.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvYnVpbGRlci9Db250cm9sbGVyUmVxdWVzdFVSTEJ1aWxkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...ver/api/resources/ControllerJobStatusResource.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvYXBpL3Jlc291cmNlcy9Db250cm9sbGVySm9iU3RhdHVzUmVzb3VyY2UuamF2YQ==) | `60.00% <60.00%> (ø)` | |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `31.75% <66.66%> (-35.55%)` | :arrow_down: |\n| [...ler/api/resources/PinotSegmentRestletResource.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2VnbWVudFJlc3RsZXRSZXNvdXJjZS5qYXZh) | `31.19% <70.10%> (+6.29%)` | :arrow_up: |\n| [...ache/pinot/common/metadata/ZKMetadataProvider.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0YWRhdGEvWktNZXRhZGF0YVByb3ZpZGVyLmphdmE=) | `60.11% <100.00%> (-5.43%)` | :arrow_down: |\n| [...mmon/metadata/controllerjob/ControllerJobType.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0YWRhdGEvY29udHJvbGxlcmpvYi9Db250cm9sbGVySm9iVHlwZS5qYXZh) | `100.00% <100.00%> (ø)` | |\n| [...urces/ServerReloadControllerJobStatusResponse.java](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1NlcnZlclJlbG9hZENvbnRyb2xsZXJKb2JTdGF0dXNSZXNwb25zZS5qYXZh) | `100.00% <100.00%> (ø)` | |\n| ... and [1407 more](https://codecov.io/gh/apache/pinot/pull/8828/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\nHelp us with your feedback. Take ten seconds to tell us [how you rate us](https://about.codecov.io/nps?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156332105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156544469","html_url":"https://github.com/apache/pinot/pull/8892#issuecomment-1156544469","issue_url":"https://api.github.com/repos/apache/pinot/issues/8892","id":1156544469,"node_id":"IC_kwDOATCU_c5E73fV","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T14:26:36Z","updated_at":"2022-06-15T14:26:36Z","author_association":"CONTRIBUTOR","body":"Was just reading the code again. \r\n\r\nIf you are referring to the delay in the following callback/listener, then I can see it will affect the `requestSentLatency`.\r\n\r\n```\r\n`_channel.writeAndFlush(Unpooled.wrappedBuffer(requestBytes)).addListener(f -> {\r\n        long requestSentLatencyMs = System.currentTimeMillis() - startTimeMs;\r\n        _brokerMetrics.addTimedTableValue(rawTableName, BrokerTimer.NETTY_CONNECTION_SEND_REQUEST_LATENCY,\r\n            requestSentLatencyMs, TimeUnit.MILLISECONDS);\r\n        asyncQueryResponse.markRequestSent(serverRoutingInstance, requestSentLatencyMs);\r\n      });`\r\n```\r\n\r\nHowever, `responseDelayMs` is computed from `_receiveDataTableTimeMs` and `_submitRequestTimeMs`. The latter one is computed outside the callback in the `QueryRouter` code which makes me wonder even if Netty slows a bit in invoking the above listener, it should not affect the `_submitRequestTimeMs` ?\r\n\r\n```\r\n` try {\r\n        serverChannels.sendRequest(rawTableName, asyncQueryResponse, serverRoutingInstance, entry.getValue(),\r\n            timeoutMs);\r\n        asyncQueryResponse.markRequestSubmitted(serverRoutingInstance);\r\n      }`\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156544469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156546397","html_url":"https://github.com/apache/pinot/pull/8880#issuecomment-1156546397","issue_url":"https://api.github.com/repos/apache/pinot/issues/8880","id":1156546397,"node_id":"IC_kwDOATCU_c5E739d","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T14:28:08Z","updated_at":"2022-06-15T14:28:08Z","author_association":"CONTRIBUTOR","body":"> Actually after a second thought, I think it is okay to keep the current way without affecting current query options. The only query option value that is not number/boolean is `FORCE_HLC` which I believe no one is using. @siddharthteotia\r\n\r\nadding `OPTION(identifier = identifier)` is possible but the identifier cannot start with a number so we are still not backward-compatible. \r\n\r\n> \r\n> There is a major issue not handled though. In `PinotClientRequest.constructSqlQueryOptions()`, the `groupByMode` and `responseFormat` value `SQL` cannot be parsed, and that can cause user not able to upgrade from 0.10.0. We need to quote the value if there is no easy way to support the previous format\r\n\r\nThis is a good catch, will fix; but also do we know if there's any other places that adds the OPTION regex to the query?\r\n\r\n> Just noticed that seems it requires an extra ; to split the statements, then all the existing query option won't work... We should document this change in the PR description\r\n\r\nYes this is the standard SQL statement separator. however the `;` before the `<EOF>` token can be skipped thus we don't have any issue so far. I will document this. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156546397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156628487","html_url":"https://github.com/apache/pinot/pull/8892#issuecomment-1156628487","issue_url":"https://api.github.com/repos/apache/pinot/issues/8892","id":1156628487,"node_id":"IC_kwDOATCU_c5E8MAH","user":{"login":"vvivekiyer","id":21298365,"node_id":"MDQ6VXNlcjIxMjk4MzY1","avatar_url":"https://avatars.githubusercontent.com/u/21298365?v=4","gravatar_id":"","url":"https://api.github.com/users/vvivekiyer","html_url":"https://github.com/vvivekiyer","followers_url":"https://api.github.com/users/vvivekiyer/followers","following_url":"https://api.github.com/users/vvivekiyer/following{/other_user}","gists_url":"https://api.github.com/users/vvivekiyer/gists{/gist_id}","starred_url":"https://api.github.com/users/vvivekiyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvivekiyer/subscriptions","organizations_url":"https://api.github.com/users/vvivekiyer/orgs","repos_url":"https://api.github.com/users/vvivekiyer/repos","events_url":"https://api.github.com/users/vvivekiyer/events{/privacy}","received_events_url":"https://api.github.com/users/vvivekiyer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T15:37:16Z","updated_at":"2022-06-15T15:37:16Z","author_association":"CONTRIBUTOR","body":" I mis-read the code. The -ve value is not because of a delay in invoking callback. \r\nHowever, the change still stands. Attached logs above. I've also updated the comment in the commit.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156628487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156787951","html_url":"https://github.com/apache/pinot/pull/8471#issuecomment-1156787951","issue_url":"https://api.github.com/repos/apache/pinot/issues/8471","id":1156787951,"node_id":"IC_kwDOATCU_c5E8y7v","user":{"login":"joshigaurava","id":68965367,"node_id":"MDQ6VXNlcjY4OTY1MzY3","avatar_url":"https://avatars.githubusercontent.com/u/68965367?v=4","gravatar_id":"","url":"https://api.github.com/users/joshigaurava","html_url":"https://github.com/joshigaurava","followers_url":"https://api.github.com/users/joshigaurava/followers","following_url":"https://api.github.com/users/joshigaurava/following{/other_user}","gists_url":"https://api.github.com/users/joshigaurava/gists{/gist_id}","starred_url":"https://api.github.com/users/joshigaurava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshigaurava/subscriptions","organizations_url":"https://api.github.com/users/joshigaurava/orgs","repos_url":"https://api.github.com/users/joshigaurava/repos","events_url":"https://api.github.com/users/joshigaurava/events{/privacy}","received_events_url":"https://api.github.com/users/joshigaurava/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:20:02Z","updated_at":"2022-06-15T18:20:13Z","author_association":"CONTRIBUTOR","body":"The Dependabot is trying to upgrade a transitive/indirect dependency here, which is not the recommended approach. This PR should not be merged.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156787951/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156800339","html_url":"https://github.com/apache/pinot/issues/8429#issuecomment-1156800339","issue_url":"https://api.github.com/repos/apache/pinot/issues/8429","id":1156800339,"node_id":"IC_kwDOATCU_c5E819T","user":{"login":"timsants","id":3085767,"node_id":"MDQ6VXNlcjMwODU3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/3085767?v=4","gravatar_id":"","url":"https://api.github.com/users/timsants","html_url":"https://github.com/timsants","followers_url":"https://api.github.com/users/timsants/followers","following_url":"https://api.github.com/users/timsants/following{/other_user}","gists_url":"https://api.github.com/users/timsants/gists{/gist_id}","starred_url":"https://api.github.com/users/timsants/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timsants/subscriptions","organizations_url":"https://api.github.com/users/timsants/orgs","repos_url":"https://api.github.com/users/timsants/repos","events_url":"https://api.github.com/users/timsants/events{/privacy}","received_events_url":"https://api.github.com/users/timsants/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:35:01Z","updated_at":"2022-06-15T18:35:01Z","author_association":"CONTRIBUTOR","body":"Can't seem to find this specific dependency in the project anymore? Has it been removed?\r\n\r\nRegardless, we are in the process of upgrading some old NPM packages.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156800339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156811751","html_url":"https://github.com/apache/pinot/issues/8886#issuecomment-1156811751","issue_url":"https://api.github.com/repos/apache/pinot/issues/8886","id":1156811751,"node_id":"IC_kwDOATCU_c5E84vn","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:48:37Z","updated_at":"2022-06-15T18:48:37Z","author_association":"CONTRIBUTOR","body":"For this feature request, another solution is to just not read the value for the skipped columns. The existing transformer can handle the filling of default values.\r\n@snleee Do you see other use cases where we want custom transform other than the one in the ingestion config?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156811751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156815198","html_url":"https://github.com/apache/pinot/pull/8877#issuecomment-1156815198","issue_url":"https://api.github.com/repos/apache/pinot/issues/8877","id":1156815198,"node_id":"IC_kwDOATCU_c5E85le","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:52:53Z","updated_at":"2022-06-15T18:52:53Z","author_association":"CONTRIBUTOR","body":"IIRC, it is normal for certain stream type (e.g. Kinesis) to have no consuming segment for some partitions. cc @npawar @KKcorps to confirm","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156815198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156819105","html_url":"https://github.com/apache/pinot/pull/8888#issuecomment-1156819105","issue_url":"https://api.github.com/repos/apache/pinot/issues/8888","id":1156819105,"node_id":"IC_kwDOATCU_c5E86ih","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:57:58Z","updated_at":"2022-06-15T18:57:58Z","author_association":"CONTRIBUTOR","body":"Suggest adding a release-notes section in the PR description to describe the maven profile change. We should also update the documentation of how to build Pinot","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156819105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156850809","html_url":"https://github.com/apache/pinot/pull/8818#issuecomment-1156850809","issue_url":"https://api.github.com/repos/apache/pinot/issues/8818","id":1156850809,"node_id":"IC_kwDOATCU_c5E9CR5","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T19:36:55Z","updated_at":"2022-06-15T19:36:55Z","author_association":"CONTRIBUTOR","body":"@gortiz @atris Thanks for taking time looking into this issue. Even though we might not move forward with the query rewrite, we got several valuable insights from the benchmark.\r\n\r\nWith regard to the query syntax, +100 on we should keep the query behavior consistent with or without the FST index. Currently we try to convert java regex to Lucene search query using `RegexpPatternConverterUtils.regexpLikeToLuceneRegExp()`. The support is very limited though, and might only be able to cover the basic `LIKE` predicate.\r\n\r\nWe want to utilize the FST to accelerate the regex matching (`LIKE` and `REGEXP_LIKE`). There are 2 approaches:\r\n- Add a new predicate type, e.g. `FST_LIKE` and take the Lucene dialect\r\n- Make FST work on java regex\r\n\r\nI personally prefer the second approach because it can improve the existing query performance, but it requires changes to the native FST, and we cannot support Lucene FST anymore. Or we can support both, and make the `FST_LIKE` only work with Lucene FST.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1156850809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]