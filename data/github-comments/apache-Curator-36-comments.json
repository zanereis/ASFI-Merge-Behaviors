[{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765233","html_url":"https://github.com/apache/curator/issues/974#issuecomment-2604765233","issue_url":"https://api.github.com/repos/apache/curator/issues/974","id":2604765233,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUyMzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T13:57:19Z","updated_at":"2025-01-21T13:39:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I made a quick project with the same deps as you have above. I added a java source file that references CuratorFramework. `mvn compile` works for me. What Maven command are you using? Can you create a sample the shows the issues? </p>\n\n<p><a href=\"https://github.com/Randgalt/zk34\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/Randgalt/zk34</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765237","html_url":"https://github.com/apache/curator/issues/974#issuecomment-2604765237","issue_url":"https://api.github.com/repos/apache/curator/issues/974","id":2604765237,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUyMzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T14:10:24Z","updated_at":"2025-01-21T13:39:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sishbi\">sishbi</a>:</i>\n<p>As I said before, some of the modules compile fine but others do not - it must be a rogue dependency somewhere.  I will try and create a sample project which exhibits the error.</p>\n\n<p>Thanks for the quick comments.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765372","html_url":"https://github.com/apache/curator/issues/975#issuecomment-2604765372","issue_url":"https://api.github.com/repos/apache/curator/issues/975","id":2604765372,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUzNzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-20T18:37:30Z","updated_at":"2025-01-21T13:39:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user Randgalt opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-455\" title=\"Curator&#39;s EnsembleProvider.getConnectionString() is not re-called once the session expiration has been injected\" class=\"issue-link\" data-issue-key=\"CURATOR-455\"><del>CURATOR-455</del></a> Curator's EnsembleProvider.getConnectionString() is not re-called once the session expiration has been injected</p>\n\n<p>    When the connection is lost client.getZookeeperClient().getZooKeeper() needs to be called periodically so that the ensemble provider may update the connection string, etc.</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/apache/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-455\" title=\"Curator&#39;s EnsembleProvider.getConnectionString() is not re-called once the session expiration has been injected\" class=\"issue-link\" data-issue-key=\"CURATOR-455\"><del>CURATOR-455</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #252</p>\n\n<hr />\n<p>commit 770a0f948e211ed6f794e318cf7722dff1fa1c0a<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2018-02-07T23:53:32Z</p>\n\n<p>    <span class=\"error\">&#91;maven-release-plugin&#93;</span> prepare release apache-curator-4.0.1</p>\n\n<p>commit 6978b09d800ad5d367a88f5ae7cf8ed099a9ca7c<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2018-02-07T23:53:43Z</p>\n\n<p>    <span class=\"error\">&#91;maven-release-plugin&#93;</span> prepare for next development iteration</p>\n\n<p>commit f57206d6bd1744a71f7416438e010775f2e50adb<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2018-02-13T18:08:57Z</p>\n\n<p>    Merge branch 'master' of <a href=\"https://git-wip-us.apache.org/repos/asf/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://git-wip-us.apache.org/repos/asf/curator</a></p>\n\n<p>commit 04c16b110207f10475059cff2c0363d2c1c43db3<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2018-02-20T18:36:22Z</p>\n\n<p>    When the connection is lost client.getZookeeperClient().getZooKeeper() needs to be called periodically so that the ensemble provider may update the connection string, etc.</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765376","html_url":"https://github.com/apache/curator/issues/975#issuecomment-2604765376","issue_url":"https://api.github.com/repos/apache/curator/issues/975","id":2604765376,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUzNzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-21T22:59:19Z","updated_at":"2025-01-21T13:39:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252#discussion_r169528858\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252#discussion_r169528858</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/test/java/org/apache/curator/framework/ensemble/TestEnsembleProvider.java &#8212;<br/>\n    @@ -0,0 +1,162 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + *   <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing,<br/>\n    + * software distributed under the License is distributed on an<br/>\n    + * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br/>\n    + * KIND, either express or implied.  See the License for the<br/>\n    + * specific language governing permissions and limitations<br/>\n    + * under the License.<br/>\n    + */<br/>\n    +package org.apache.curator.framework.ensemble;<br/>\n    +<br/>\n    +import org.apache.curator.ensemble.EnsembleProvider;<br/>\n    +import org.apache.curator.framework.CuratorFramework;<br/>\n    +import org.apache.curator.framework.CuratorFrameworkFactory;<br/>\n    +import org.apache.curator.framework.state.ConnectionState;<br/>\n    +import org.apache.curator.framework.state.ConnectionStateListener;<br/>\n    +import org.apache.curator.retry.RetryOneTime;<br/>\n    +import org.apache.curator.test.BaseClassForTests;<br/>\n    +import org.apache.curator.test.TestingServer;<br/>\n    +import org.apache.curator.test.Timing;<br/>\n    +import org.apache.curator.utils.CloseableUtils;<br/>\n    +import org.testng.Assert;<br/>\n    +import org.testng.annotations.Test;<br/>\n    +import java.util.concurrent.CountDownLatch;<br/>\n    +import java.util.concurrent.Semaphore;<br/>\n    +import java.util.concurrent.TimeUnit;<br/>\n    +<br/>\n    +public class TestEnsembleProvider extends BaseClassForTests<br/>\n    +{<br/>\n    +    private final Timing timing = new Timing();<br/>\n    +<br/>\n    +    @Test<br/>\n    +    public void testBasic()<br/>\n    +    {<br/>\n    +Semaphore counter = new Semaphore(0);<br/>\n    +final CuratorFramework client = newClient(counter);<br/>\n    +try<br/>\n    +</p>\n{\n    +    client.start();\n    +    Assert.assertTrue(timing.acquireSemaphore(counter));\n    +}\n<p>    +finally<br/>\n    +</p>\n{\n    +    CloseableUtils.closeQuietly(client);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    @Test<br/>\n    +    public void testAfterSessionExpiration() throws Exception<br/>\n    +    {<br/>\n    +TestingServer oldServer = server;<br/>\n    +Semaphore counter = new Semaphore(0);<br/>\n    +final CuratorFramework client = newClient(counter);<br/>\n    +try<br/>\n    +{<br/>\n    +    client.start();<br/>\n    +<br/>\n    +    final CountDownLatch connectedLatch = new CountDownLatch(1);<br/>\n    +    final CountDownLatch lostLatch = new CountDownLatch(1);<br/>\n    +    final CountDownLatch reconnectedLatch = new CountDownLatch(1);<br/>\n    +    ConnectionStateListener listener = new ConnectionStateListener()<br/>\n    +    {<br/>\n    +@Override<br/>\n    +public void stateChanged(CuratorFramework client, ConnectionState newState)<br/>\n    +{<br/>\n    +    if ( newState == ConnectionState.CONNECTED )<br/>\n    +    </p>\n{\n    +connectedLatch.countDown();\n    +    }\n<p>    +    if ( newState == ConnectionState.LOST )<br/>\n    +    </p>\n{\n    +lostLatch.countDown();\n    +    }\n<p>    +    if ( newState == ConnectionState.RECONNECTED )<br/>\n    +    </p>\n{\n    +reconnectedLatch.countDown();\n    +    }\n<p>    +}<br/>\n    +    };<br/>\n    +    client.getConnectionStateListenable().addListener(listener);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Is there a potential race condition here? Can't the connected event come before the listener is added as the client is started prior to the listener being added?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765387","html_url":"https://github.com/apache/curator/issues/975#issuecomment-2604765387","issue_url":"https://api.github.com/repos/apache/curator/issues/975","id":2604765387,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUzODc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T04:49:12Z","updated_at":"2025-01-21T13:39:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252#discussion_r169854109\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252#discussion_r169854109</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/test/java/org/apache/curator/framework/ensemble/TestEnsembleProvider.java &#8212;<br/>\n    @@ -0,0 +1,162 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + *   <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing,<br/>\n    + * software distributed under the License is distributed on an<br/>\n    + * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY<br/>\n    + * KIND, either express or implied.  See the License for the<br/>\n    + * specific language governing permissions and limitations<br/>\n    + * under the License.<br/>\n    + */<br/>\n    +package org.apache.curator.framework.ensemble;<br/>\n    +<br/>\n    +import org.apache.curator.ensemble.EnsembleProvider;<br/>\n    +import org.apache.curator.framework.CuratorFramework;<br/>\n    +import org.apache.curator.framework.CuratorFrameworkFactory;<br/>\n    +import org.apache.curator.framework.state.ConnectionState;<br/>\n    +import org.apache.curator.framework.state.ConnectionStateListener;<br/>\n    +import org.apache.curator.retry.RetryOneTime;<br/>\n    +import org.apache.curator.test.BaseClassForTests;<br/>\n    +import org.apache.curator.test.TestingServer;<br/>\n    +import org.apache.curator.test.Timing;<br/>\n    +import org.apache.curator.utils.CloseableUtils;<br/>\n    +import org.testng.Assert;<br/>\n    +import org.testng.annotations.Test;<br/>\n    +import java.util.concurrent.CountDownLatch;<br/>\n    +import java.util.concurrent.Semaphore;<br/>\n    +import java.util.concurrent.TimeUnit;<br/>\n    +<br/>\n    +public class TestEnsembleProvider extends BaseClassForTests<br/>\n    +{<br/>\n    +    private final Timing timing = new Timing();<br/>\n    +<br/>\n    +    @Test<br/>\n    +    public void testBasic()<br/>\n    +    {<br/>\n    +Semaphore counter = new Semaphore(0);<br/>\n    +final CuratorFramework client = newClient(counter);<br/>\n    +try<br/>\n    +</p>\n{\n    +    client.start();\n    +    Assert.assertTrue(timing.acquireSemaphore(counter));\n    +}\n<p>    +finally<br/>\n    +</p>\n{\n    +    CloseableUtils.closeQuietly(client);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    @Test<br/>\n    +    public void testAfterSessionExpiration() throws Exception<br/>\n    +    {<br/>\n    +TestingServer oldServer = server;<br/>\n    +Semaphore counter = new Semaphore(0);<br/>\n    +final CuratorFramework client = newClient(counter);<br/>\n    +try<br/>\n    +{<br/>\n    +    client.start();<br/>\n    +<br/>\n    +    final CountDownLatch connectedLatch = new CountDownLatch(1);<br/>\n    +    final CountDownLatch lostLatch = new CountDownLatch(1);<br/>\n    +    final CountDownLatch reconnectedLatch = new CountDownLatch(1);<br/>\n    +    ConnectionStateListener listener = new ConnectionStateListener()<br/>\n    +    {<br/>\n    +@Override<br/>\n    +public void stateChanged(CuratorFramework client, ConnectionState newState)<br/>\n    +{<br/>\n    +    if ( newState == ConnectionState.CONNECTED )<br/>\n    +    </p>\n{\n    +connectedLatch.countDown();\n    +    }\n<p>    +    if ( newState == ConnectionState.LOST )<br/>\n    +    </p>\n{\n    +lostLatch.countDown();\n    +    }\n<p>    +    if ( newState == ConnectionState.RECONNECTED )<br/>\n    +    </p>\n{\n    +reconnectedLatch.countDown();\n    +    }\n<p>    +}<br/>\n    +    };<br/>\n    +    client.getConnectionStateListenable().addListener(listener);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Doh - good catch. Thanks.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/367567762","html_url":"https://github.com/apache/curator/pull/252#issuecomment-367567762","issue_url":"https://api.github.com/repos/apache/curator/issues/252","id":367567762,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzU2Nzc2Mg==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T04:58:19Z","updated_at":"2018-02-22T04:58:19Z","author_association":"CONTRIBUTOR","body":"Looks good to me.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/367567762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765395","html_url":"https://github.com/apache/curator/issues/975#issuecomment-2604765395","issue_url":"https://api.github.com/repos/apache/curator/issues/975","id":2604765395,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjUzOTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T04:58:21Z","updated_at":"2025-01-21T13:39:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252</a></p>\n\n<p>    Looks good to me.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765405","html_url":"https://github.com/apache/curator/issues/975#issuecomment-2604765405","issue_url":"https://api.github.com/repos/apache/curator/issues/975","id":2604765405,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU0MDU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T15:09:16Z","updated_at":"2025-01-21T13:39:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/252\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/252</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735173","html_url":"https://github.com/apache/curator/issues/792#issuecomment-2604735173","issue_url":"https://api.github.com/repos/apache/curator/issues/792","id":2604735173,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3MzUxNzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T20:19:00Z","updated_at":"2025-01-21T13:26:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=firenz\">firenz</a>:</i>\n<p>i'm having this issue with zookeeper/nifi 1.5.0. Any idea ?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735183","html_url":"https://github.com/apache/curator/issues/792#issuecomment-2604735183","issue_url":"https://api.github.com/repos/apache/curator/issues/792","id":2604735183,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3MzUxODM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-22T21:41:39Z","updated_at":"2025-01-21T13:26:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>What is \"zookeeper/nifi 1.5.0.\"?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/369084223","html_url":"https://github.com/apache/curator/pull/253#issuecomment-369084223","issue_url":"https://api.github.com/repos/apache/curator/issues/253","id":369084223,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTA4NDIyMw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-28T01:06:18Z","updated_at":"2018-02-28T01:06:39Z","author_association":"MEMBER","body":"Sure - I'm OK with this. But, please, open an issue in our Jira to match the PR. http://issues.apache.org/jira/browse/CURATOR - see https://cwiki.apache.org/confluence/display/CURATOR/Submitting+Pull+Requests","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/369084223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/369160164","html_url":"https://github.com/apache/curator/pull/253#issuecomment-369160164","issue_url":"https://api.github.com/repos/apache/curator/issues/253","id":369160164,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTE2MDE2NA==","user":{"login":"Alykoff","id":2276472,"node_id":"MDQ6VXNlcjIyNzY0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2276472?v=4","gravatar_id":"","url":"https://api.github.com/users/Alykoff","html_url":"https://github.com/Alykoff","followers_url":"https://api.github.com/users/Alykoff/followers","following_url":"https://api.github.com/users/Alykoff/following{/other_user}","gists_url":"https://api.github.com/users/Alykoff/gists{/gist_id}","starred_url":"https://api.github.com/users/Alykoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alykoff/subscriptions","organizations_url":"https://api.github.com/users/Alykoff/orgs","repos_url":"https://api.github.com/users/Alykoff/repos","events_url":"https://api.github.com/users/Alykoff/events{/privacy}","received_events_url":"https://api.github.com/users/Alykoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-28T08:35:09Z","updated_at":"2018-02-28T08:35:09Z","author_association":"NONE","body":"I created another pull request with issue number https://github.com/apache/curator/pull/254.\r\nThis pull request I closed.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/369160164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765619","html_url":"https://github.com/apache/curator/issues/977#issuecomment-2604765619","issue_url":"https://api.github.com/repos/apache/curator/issues/977","id":2604765619,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU2MTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-01T14:39:53Z","updated_at":"2025-01-21T13:39:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>What's the use-case for this? Why should the paths matter?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765629","html_url":"https://github.com/apache/curator/issues/977#issuecomment-2604765629","issue_url":"https://api.github.com/repos/apache/curator/issues/977","id":2604765629,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU2Mjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-01T15:27:35Z","updated_at":"2025-01-21T13:39:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=me1kaa\">me1kaa</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> The use-case:</p>\n\n<p>supply different service registration politics. They can be different in different teams or companies. In our company we have another path pattern rules and we can't change our path patterns to Curator's one, and also it's hard to extend the current code because of high encapsulation, the trivial customization forces to rewrite a lot of Curator's classes.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765633","html_url":"https://github.com/apache/curator/issues/977#issuecomment-2604765633","issue_url":"https://api.github.com/repos/apache/curator/issues/977","id":2604765633,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU2MzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T00:17:22Z","updated_at":"2025-01-21T13:39:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I'd be OK with this. Please open PR.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764669","html_url":"https://github.com/apache/curator/issues/970#issuecomment-2604764669","issue_url":"https://api.github.com/repos/apache/curator/issues/970","id":2604764669,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ2Njk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T14:07:43Z","updated_at":"2025-01-21T13:38:53Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user dongjinleekr opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/255\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/255</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-450\" title=\"Dead link in \"Getting Started\" documentation\" class=\"issue-link\" data-issue-key=\"CURATOR-450\"><del>CURATOR-450</del></a> Fix dead link in 'Getting Started' documentation</p>\n\n<p>    with protocol update for apache.org, slf4j.org and wikipedia.org.</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/dongjinleekr/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/dongjinleekr/curator</a> feature/<a href=\"https://issues.apache.org/jira/browse/CURATOR-450\" title=\"Dead link in \"Getting Started\" documentation\" class=\"issue-link\" data-issue-key=\"CURATOR-450\"><del>CURATOR-450</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/255.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/255.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #255</p>\n\n<hr />\n<p>commit 2af84b9f7cfee179e6a88f490297f0f3f6419f36<br/>\nAuthor: Lee Dongjin <dongjin.lee@...><br/>\nDate:   2018-03-02T14:06:21Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-450\" title=\"Dead link in \"Getting Started\" documentation\" class=\"issue-link\" data-issue-key=\"CURATOR-450\"><del>CURATOR-450</del></a> Fix dead link in 'Getting Started' documentation + update protocol: http -> https</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765636","html_url":"https://github.com/apache/curator/issues/977#issuecomment-2604765636","issue_url":"https://api.github.com/repos/apache/curator/issues/977","id":2604765636,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU2MzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-04T21:44:36Z","updated_at":"2025-01-21T13:39:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user Me1kaa opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/256\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/256</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-457\" title=\"Configuring service discovery paths\" class=\"issue-link\" data-issue-key=\"CURATOR-457\"><del>CURATOR-457</del></a>. Extension point for discovering paths.</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/Me1kaa/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/Me1kaa/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-457\" title=\"Configuring service discovery paths\" class=\"issue-link\" data-issue-key=\"CURATOR-457\"><del>CURATOR-457</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/256.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/256.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #256</p>\n\n<hr />\n<p>commit f95b689f5eeb5429567813481227b917c2550ff9<br/>\nAuthor: alexm <alexm25890@...><br/>\nDate:   2018-03-04T21:38:07Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-457\" title=\"Configuring service discovery paths\" class=\"issue-link\" data-issue-key=\"CURATOR-457\"><del>CURATOR-457</del></a>. Extension point for discovering paths.</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735188","html_url":"https://github.com/apache/curator/issues/792#issuecomment-2604735188","issue_url":"https://api.github.com/repos/apache/curator/issues/792","id":2604735188,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3MzUxODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-05T13:28:00Z","updated_at":"2025-01-21T13:26:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=firenz\">firenz</a>:</i>\n<p>Hello. Apache Nifi 1.5.0 (and previous) is using Curator to access to zookeeper. </p>\n\n<p><a href=\"https://issues.apache.org/jira/browse/NIFI-3731\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/NIFI-3731</a></p>\n\n<p>The lost of zookeeper  servers involves the \"ridiculous amount of logs \" (agree <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/smile.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/>)</p>\n\n<p> </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735194","html_url":"https://github.com/apache/curator/issues/792#issuecomment-2604735194","issue_url":"https://api.github.com/repos/apache/curator/issues/792","id":2604735194,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3MzUxOTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-06T02:39:30Z","updated_at":"2025-01-21T13:26:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Please see Curator TechNote 8 <a href=\"https://cwiki.apache.org/confluence/display/CURATOR/TN8\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cwiki.apache.org/confluence/display/CURATOR/TN8</a> - you can set a CLI switch so that the first connection error is logged as <tt>ERROR</tt> but subsequent connection errors are logged as <tt>DEBUG</tt> until the connection is repaired.</p>\n\n<p>E.g. </p>\n\n<p> </p>\n\n<p><tt>-Dcurator-log-only-first-connection-issue-as-error-level=true</tt></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735198","html_url":"https://github.com/apache/curator/issues/792#issuecomment-2604735198","issue_url":"https://api.github.com/repos/apache/curator/issues/792","id":2604735198,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3MzUxOTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-06T19:22:37Z","updated_at":"2025-01-21T13:26:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=firenz\">firenz</a>:</i>\n<p>Thank you, i'll read the others TN too.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604735198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/373939483","html_url":"https://github.com/apache/curator/pull/257#issuecomment-373939483","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":373939483,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzkzOTQ4Mw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-17T17:51:31Z","updated_at":"2018-03-17T17:51:31Z","author_association":"MEMBER","body":"Please open an issue to match this PR - see https://cwiki.apache.org/confluence/display/CURATOR/Submitting+Pull+Requests","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/373939483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/373940850","html_url":"https://github.com/apache/curator/pull/257#issuecomment-373940850","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":373940850,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mzk0MDg1MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-17T18:09:28Z","updated_at":"2018-03-17T18:09:28Z","author_association":"MEMBER","body":"@Randgalt thanks, done","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/373940850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765736","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765736","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765736,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3MzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-17T18:09:30Z","updated_at":"2025-01-21T13:39:22Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user leventov commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    @Randgalt thanks, done</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/374092306","html_url":"https://github.com/apache/curator/pull/260#issuecomment-374092306","issue_url":"https://api.github.com/repos/apache/curator/issues/260","id":374092306,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDA5MjMwNg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-19T03:38:33Z","updated_at":"2018-03-19T13:59:32Z","author_association":"MEMBER","body":"Actually, no it isn't a design error and is intentional. I'm -1 on this PR. I suggest it's better to discuss design issues on the Curator `@dev` mailing list. Also, I strongly suggest that you read the Apache Code of Conduct (see here: http://www.apache.org/foundation/policies/conduct.html).","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/374092306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765867","html_url":"https://github.com/apache/curator/issues/979#issuecomment-2604765867","issue_url":"https://api.github.com/repos/apache/curator/issues/979","id":2604765867,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU4Njc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-20T14:06:58Z","updated_at":"2025-01-21T13:39:25Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Curator has an async lock with <tt>LeaderSelector</tt>. What's the advantage of adding this?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604762190","html_url":"https://github.com/apache/curator/issues/953#issuecomment-2604762190","issue_url":"https://api.github.com/repos/apache/curator/issues/953","id":2604762190,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjIxOTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-22T17:32:49Z","updated_at":"2025-01-21T13:37:45Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>FYI - commentary on the module system for lib devs <a href=\"http://blog.joda.org/2018/03/jpms-negative-benefits.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://blog.joda.org/2018/03/jpms-negative-benefits.html</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604762190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/375467492","html_url":"https://github.com/apache/curator/pull/261#issuecomment-375467492","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":375467492,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTQ2NzQ5Mg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-22T21:43:22Z","updated_at":"2018-03-22T21:43:22Z","author_association":"MEMBER","body":"Please create an issue in our Jira. https://cwiki.apache.org/confluence/display/CURATOR/Submitting+Pull+Requests","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/375467492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/375477250","html_url":"https://github.com/apache/curator/pull/261#issuecomment-375477250","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":375477250,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTQ3NzI1MA==","user":{"login":"poetwang","id":1908737,"node_id":"MDQ6VXNlcjE5MDg3Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1908737?v=4","gravatar_id":"","url":"https://api.github.com/users/poetwang","html_url":"https://github.com/poetwang","followers_url":"https://api.github.com/users/poetwang/followers","following_url":"https://api.github.com/users/poetwang/following{/other_user}","gists_url":"https://api.github.com/users/poetwang/gists{/gist_id}","starred_url":"https://api.github.com/users/poetwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetwang/subscriptions","organizations_url":"https://api.github.com/users/poetwang/orgs","repos_url":"https://api.github.com/users/poetwang/repos","events_url":"https://api.github.com/users/poetwang/events{/privacy}","received_events_url":"https://api.github.com/users/poetwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-22T22:23:53Z","updated_at":"2018-03-22T22:23:53Z","author_association":"NONE","body":"thanks, will do","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/375477250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/375479568","html_url":"https://github.com/apache/curator/pull/261#issuecomment-375479568","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":375479568,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTQ3OTU2OA==","user":{"login":"poetwang","id":1908737,"node_id":"MDQ6VXNlcjE5MDg3Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1908737?v=4","gravatar_id":"","url":"https://api.github.com/users/poetwang","html_url":"https://github.com/poetwang","followers_url":"https://api.github.com/users/poetwang/followers","following_url":"https://api.github.com/users/poetwang/following{/other_user}","gists_url":"https://api.github.com/users/poetwang/gists{/gist_id}","starred_url":"https://api.github.com/users/poetwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetwang/subscriptions","organizations_url":"https://api.github.com/users/poetwang/orgs","repos_url":"https://api.github.com/users/poetwang/repos","events_url":"https://api.github.com/users/poetwang/events{/privacy}","received_events_url":"https://api.github.com/users/poetwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-22T22:34:04Z","updated_at":"2018-03-22T22:34:04Z","author_association":"NONE","body":"@Randgalt I think this is the bug mentioned in CURATOR-452, so I just link it to the issue.\r\nhttps://issues.apache.org/jira/browse/CURATOR-452","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/375479568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764935","html_url":"https://github.com/apache/curator/issues/972#issuecomment-2604764935","issue_url":"https://api.github.com/repos/apache/curator/issues/972","id":2604764935,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ5MzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-22T22:34:06Z","updated_at":"2025-01-21T13:39:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user poetwang commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/261\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/261</a></p>\n\n<p>    @Randgalt I think this is the bug mentioned in <a href=\"https://issues.apache.org/jira/browse/CURATOR-452\" title=\"ChildData.getData() can be null\" class=\"issue-link\" data-issue-key=\"CURATOR-452\"><del>CURATOR-452</del></a>, so I just link it to the issue.<br/>\n    <a href=\"https://issues.apache.org/jira/browse/CURATOR-452\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/CURATOR-452</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766032","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766032","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766032,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwMzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-25T21:23:09Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>This seems like a problem with Curator's timers then doesn't it? It should be 40 seconds from the initial connection loss that the LOST event is generated, not 40 seconds after the SUSPENDED event is generated, which is what you seem to be seeing.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766036","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766036","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766036,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwMzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-26T08:08:09Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Maybe I misunderstood how ZK managed session expiration when I wrote this (not unlikely). I thought that session expiration occurs after the first lost heartbeat. We'll need to dig into the ZK source code. If need be, we can alter ConnectionStateManager#setCurrentConnectionState so that <tt>startOfSuspendedEpoch</tt> takes the already lapsed heartbeat into account.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766040","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766040","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766040,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNDA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-26T08:49:41Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>I'll try and have a look in the next couple of days.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/376241627","html_url":"https://github.com/apache/curator/pull/261#issuecomment-376241627","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":376241627,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjI0MTYyNw==","user":{"login":"poetwang","id":1908737,"node_id":"MDQ6VXNlcjE5MDg3Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1908737?v=4","gravatar_id":"","url":"https://api.github.com/users/poetwang","html_url":"https://github.com/poetwang","followers_url":"https://api.github.com/users/poetwang/followers","following_url":"https://api.github.com/users/poetwang/following{/other_user}","gists_url":"https://api.github.com/users/poetwang/gists{/gist_id}","starred_url":"https://api.github.com/users/poetwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetwang/subscriptions","organizations_url":"https://api.github.com/users/poetwang/orgs","repos_url":"https://api.github.com/users/poetwang/repos","events_url":"https://api.github.com/users/poetwang/events{/privacy}","received_events_url":"https://api.github.com/users/poetwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-26T17:12:52Z","updated_at":"2018-03-26T17:12:52Z","author_association":"NONE","body":"The event (CHILD_ADDED or CHILD_UPDATED) comes because PathChildrenCache will force refresh when ConnectionState turns to CONNECTED(connectionStateListener), ","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/376241627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764941","html_url":"https://github.com/apache/curator/issues/972#issuecomment-2604764941","issue_url":"https://api.github.com/repos/apache/curator/issues/972","id":2604764941,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ5NDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-26T17:12:54Z","updated_at":"2025-01-21T13:39:01Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user poetwang commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/261\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/261</a></p>\n\n<p>    The event (CHILD_ADDED or CHILD_UPDATED) comes because PathChildrenCache will force refresh when ConnectionState turns to CONNECTED(connectionStateListener), </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766045","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766045","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766045,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNDU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-27T02:42:32Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p>I'm not very experienced on Curator's or Zookeeper's code, but at first glance, it seems to me that it is not possible to know the already elapsed time from Curator code. I think it would be possible if Zookeeper publishes the elapsed time inside the enqueued  WatchedEvent that put curator on SUSPENDED, but it doesn't.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766048","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766048","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766048,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-27T08:07:41Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>If needed, we could initialize the counter with 2/3 of a session or whatever fraction of a session is implied by the ZooKeeper code.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766055","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766055","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766055,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-27T22:45:43Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>My reading of the ZK code is that the session expiration works by maintaining a collection of sessions. Periodically this collection gets polled for all of the sessions that have not been accessed for > session timeout and these are expired. Whenever there's interaction with the session the timestamp of last interaction gets updated within this collection, thus keeping it alive.</p>\n\n<p>So, the session expiration count really begins as soon as the last command has been received by ZK, rather than at a missed heartbeat. So, I think that Curator should inject the LOST event at:</p>\n\n<p>timeAtSuspendedEvent (which should be 2/3 of session timeout) + 1/3 of session timeout</p>\n\n<p>I'm not familiar with the ZK codebase though, so I could be reading things incorrectly. Certainly the logs provided by <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a> seem to indicate this is how it works.</p>\n\n<p>Given that Curator is inferring ZK state while disconnected though, there is always going to be a window of error. Perhaps the leadership recipes should have the option of treating SUSPENDED and LOST in the same fashion for mission critical stuff where Curator's inference is not acceptable?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766060","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766060","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766060,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-28T01:57:07Z","updated_at":"2025-01-21T13:39:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p>1) I think the timeAtSuspendedEvent you are talking about is the one hold by clientCnxnSocket#getIdleRecv() in the class ClientCnxn.java of ZK code, that call returns the time of last interaction with the server, but as far as I understand the code, we don't have access to the clientCnxnSocket from Curator. So we don't know for sure the elapsed time.</p>\n\n<p>Even if Curator had access to getIdleRecv() I don't think if would be very useful, as after Zookeeper realizes that it has passed 2/3 of the sessionTimeout without heard from server, it enqueues the error and resets the time counter, by calling clientCnxnSocket.updateLastSendAndHeard()</p>\n\n<p>As you said, there is also the possibility of start the Curator's timer already in 2/3 of sessionTimeout. By the way, it already can be achieved by using SessionConnectionStateErrorPolicy and setting StandardConnectionHandlingPolicy.setSimulatedSessionExpirationPercent(<b>35</b>)</p>\n\n<p>2)There is already a way to treat SUSPENDED or LOST as the same thing, just use StandardConnectionStateErrorPolicy. </p>\n\n<p>To sum up:</p>\n\n<p>1) I can be wrong, but looking at the code, there is no way to know the real elapsed time without changing zookeeper ( I hope someone check that )</p>\n\n<p>2) We can start the counter already in 2/3 of session timeout, even though there is already a way to do it by configuration.</p>\n\n<p> </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766063","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766063","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766063,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-28T02:23:24Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>I'm referring to timeAtSuspendedEvent as the time that Curator considers itself suspended, as we can't access this information from ZK (as you've pointed out).</p>\n\n<p>I think that the default handling for Curator should be changed to make the LOST event occur at the negotiated session timeout number of seconds since last ping / interaction with the server, as this is how it's calculated on the Zookeeper server side.</p>\n\n<p>While we can work around it with configuration etc. I think that the default should be correct. I don't see any reason why the current behaviour should be preserved because I think it's incorrect.</p>\n\n<p>Which leader recipe were you using for your tests? The StandardConnectionStateErrorPolicy treats both SUSPENDED and LOST as the same thing. So, you must have been using either a customer error policy or the SessionConnectionStateErrorPolicy?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766072","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766072","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766072,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-29T03:19:58Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p>I'm using the Leader Election recipe. In my previous tests I was  implementing ConnectionStateListener by myself and ignoring the SUSPENDED event, but to be more in line with the 3.0 way I've built another test using SessionConnectionStateErrorPolicy and I got results very close to the previous ones.</p>\n\n<p>I've uploaded a class CuratorLeaderSelectorPOC that has two tests (leaderSelector1,leaderSelector2), one to start each application's instance.</p>\n\n<p>I did the following:<br/>\n 1. run test leaderSelector1<br/>\n wait for the Message \"leadeSelector1 HAS leadership\" on the console</p>\n\n<p>2. run test leaderSelector2<br/>\n wait for the start</p>\n\n<p>3. On the VM server running zookeeper, I executed:</p>\n<div class=\"preformatted panel\" style=\"border-width: 1px;\"><div class=\"preformattedContent panelContent\">\n<pre>ifconfig eth0 down</pre>\n</div></div>\n<p>NOTE: eth0 => 192.168.0.104</p>\n\n<p>On the console of loaderSelector1 I got:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n...\nStarted leadeSelector1\n..\nleadeSelector1 HAS leadership 2018-03-29T02:56:06.402Z\n...\nleadeSelector1 LOST leadership 2018-03-29T02:57:26.508Z</pre>\n</div></div>\n<p>On the console of loaderSelector2 I got:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n...\nStarted leadeSelector2\n...\nleadeSelector2 HAS leadership 2018-03-29T02:56:57.445Z</pre>\n</div></div>\n<p>I tried to pass a value to new StandardConnectionHandlingPolicy(), like 30, but it didn't make effect, I still don't know why.</p>\n\n<p>Perhaps it's important to note that I'm running in ZooKeeper 3.4.x compatibility mode</p>\n\n<p>Attachments:</p>\n\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916730/12916730_CuratorLeaderSelectorPOC.java\" title=\"CuratorLeaderSelectorPOC.java attached to CURATOR-460\">CuratorLeaderSelectorPOC.java<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916727/12916727_Console-leaderSelector1.log\" title=\"Console-leaderSelector1.log attached to CURATOR-460\">Console-leaderSelector1.log<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916728/12916728_Console-leaderSelector2.log\" title=\"Console-leaderSelector2.log attached to CURATOR-460\">Console-leaderSelector2.log<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766078","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766078","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766078,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwNzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-29T03:36:00Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a>, do you think it would be possible to reproduce the problem in the form of a Curator unit test?</p>\n\n<p>I don't have access to a full ZK cluster at the moment, so it will be difficult for me to run your tests.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766084","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766084","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766084,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-29T08:54:58Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>It's worth pointing out that Curator has always recommended that users treat SUSPENDED as a complete connection loss. E.g. from the Curator website <a href=\"http://curator.apache.org/errors.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://curator.apache.org/errors.html</a></p>\n\n<p> </p>\n<div class='table-wrap'>\n<table class='confluenceTable'><tbody>\n<tr>\n<td class='confluenceTd'>SUSPENDED</td>\n<td class='confluenceTd'>There has been a loss of connection. Leaders, locks, etc. should suspend until the connection is re-established.</td>\n</tr>\n</tbody></table>\n</div>\n\n\n<p> </p>\n\n<p>Also, the StandardConnectionStateErrorPolicy treats both SUSPENDED and LOST as error states that should cause the LeaderSelectorListenerAdapter to throw CancelLeadershipException.</p>\n\n<p>While we can certainly improve the treatment of the simulated session expiration introduced in Curator 3.x it is not possible to have a Curator simulate a client session timeout at the same exact time as the ZooKeeper server does.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766092","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766092","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766092,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwOTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-29T09:18:08Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a> - can you alter your test by adding this line to the CuratorFrameworkFactory:</p>\n\n<p><tt>.connectionHandlingPolicy(new StandardConnectionHandlingPolicy(33))</tt></p>\n\n<p>This should cause Curator to inject the session expiration at 1/3 of a session and this would conform to the case where the ZooKeeper server drops the connection at a missed heartbeat (2/3 of a session) and then removes the session when the full session timeout has elapsed.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766097","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766097","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766097,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYwOTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T01:26:33Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> - I did the test and I haven't gotten the expected results. I'm uploading the log.</p>\n\n<p>It seems that even if I use <tt>.connectionHandlingPolicy(new StandardConnectionHandlingPolicy(33))</tt> Curator still waits 40secs after SUSPENDED.</p>\n\n<p>See:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\nSession timeout has elapsed <span class=\"code-keyword\">while</span> SUSPENDED. Injecting a session expiration. Elapsed ms: 40010. Adjusted session timeout ms: 13200</pre>\n</div></div>\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916927/12916927_LogApp1.log\" title=\"LogApp1.log attached to CURATOR-460\">LogApp1.log<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916928/12916928_LogApp2.log\" title=\"LogApp2.log attached to CURATOR-460\">LogApp2.log<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p> </p>\n\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\" class=\"user-hover\" rel=\"cammckenzie\">Cam McKenzie</a> - I'll try to build the tests, but I don't know if I'll have enough time. But anyway you don't need a ZKcluster for the test, just one instance in a virtual machine with 2 network interfaces.</p>\n\n<p> </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766104","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766104","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766104,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T03:49:30Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p> Perhaps I'm getting this problem because I'm using ZK compatibility mode.</p>\n\n<p>I've made a change on the code and it worked as expected. Now it respects the {{new StandardConnectionHandlingPolicy(33). }}  I've uploaded a patch.</p>\n\n<p>My test printed:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\nleaderSelector1 LOST leadership 2018-03-30T03:21:53.676Z\nleaderSelector2 HAS  leadership 2018-03-30T03:21:52.077Z</pre>\n</div></div>\n<p>The moment of expiration injection:</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n2018-03-30 00:21:53,666 [myid:] - WARN  [Curator-ConnectionStateManager-0:ConnectionStateManager@310] - Session timeout has elapsed <span class=\"code-keyword\">while</span> SUSPENDED. Injecting a session expiration. Elapsed ms: 13215. Adjusted session timeout ms: 13200\n</pre>\n</div></div>\n<p>The second instance still gets the leadership almost 2 seconds before the first one loses it, but I suspect it's due to ZK's tick time. My Zk has 2sec of tickTime</p>\n\n<p><span class=\"nobr\"><a href=\"https://issues.apache.org/jira/secure/attachment/12916944/12916944_ConnectionStateManager.patch\" title=\"ConnectionStateManager.patch attached to CURATOR-460\">ConnectionStateManager.patch<sup><img class=\"rendericon\" src=\"https://issues.apache.org/jira/images/icons/link_attachment_7.gif\" height=\"7\" width=\"7\" align=\"absmiddle\" alt=\"\" border=\"0\"/></sup></a></span></p>\n\n<p> </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766110","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766110","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766110,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T08:37:15Z","updated_at":"2025-01-21T13:39:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a> we don't accept patches. See here: <a href=\"https://cwiki.apache.org/confluence/display/CURATOR/Submitting+Pull+Requests\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cwiki.apache.org/confluence/display/CURATOR/Submitting+Pull+Requests</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766119","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766119","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766119,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T13:22:18Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> - My goal with the patch was just to add information to the discussion, not to merge it.</p>\n\n<p>Moreover, I think that the fact of the application not obeying the given expirationPercent is a different issue, therefore I should open a new issue reporting that.</p>\n\n<p>Do you agree?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766124","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766124","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766124,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMjQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T14:38:50Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I don't know... it's all related. We could just do everything here. We should also consider changing <tt>StandardConnectionHandlingPolicy</tt> so that it's default value is 33. But, I worry how that will affect existing users. Thoughts (<a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\" class=\"user-hover\" rel=\"cammckenzie\">Cam McKenzie</a>).</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764948","html_url":"https://github.com/apache/curator/issues/972#issuecomment-2604764948","issue_url":"https://api.github.com/repos/apache/curator/issues/972","id":2604764948,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ5NDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-30T22:31:25Z","updated_at":"2025-01-21T13:39:01Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=poetwang\">poetwang</a>:</i>\n<p>@here could anyone please take a look at this the PR <a href=\"https://github.com/apache/curator/pull/261\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/261</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766130","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766130","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766130,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-31T15:46:01Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p>Some thoughts.</p>\n\n<p>1 - I managed to create a test that tests the patch I attached here. I'd like to know if I should open a pull request just for it, or If I should post here to then Cameron can incorporate it on his final solution.<br/>\n 2 - For the innitially reported issue, I didn't find a way to simulate loss of heartbeats. I thought about creating a sleep on the ConnectionStateListener declared in TestLeaderLatch#testErrorPolicies so that we'd get an delay on receiving the SUSPENDED, but I thought it'd be pointless. <br/>\n 3 - About the StandardConnectionHandlingPolicy's default value, perhaps we should consider removing the no-args constructor.</p>\n\n<p>4 - I'm concerned about the access to the field startOfSuspendedEpoch in ConnectionStateManager#processEvents. I suspect that it should be synchronized on this. Since it was not synchronized before my patch, I did not sync it either. What do you think?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/377828947","html_url":"https://github.com/apache/curator/pull/261#issuecomment-377828947","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":377828947,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NzgyODk0Nw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-02T00:32:17Z","updated_at":"2018-04-02T00:32:17Z","author_association":"MEMBER","body":"Can you create a test that shows the problem and include it in this PR?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/377828947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764953","html_url":"https://github.com/apache/curator/issues/972#issuecomment-2604764953","issue_url":"https://api.github.com/repos/apache/curator/issues/972","id":2604764953,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ5NTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-02T00:32:20Z","updated_at":"2025-01-21T13:39:01Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/261\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/261</a></p>\n\n<p>    Can you create a test that shows the problem and include it in this PR?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766139","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766139","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766139,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxMzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-02T02:59:57Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>hey <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a>, I think creating a PR is probably the cleanest way forward.</p>\n\n<p>I can't access code at the moment, but should be able to look at stuff in the next couple of days.</p>\n\n<p>cheers</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766148","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766148","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766148,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxNDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-03T02:46:21Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user arrodrigues opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-460\" title=\"Timed tolerance for connection suspended leads to simultaneous leaders\" class=\"issue-link\" data-issue-key=\"CURATOR-460\"><del>CURATOR-460</del></a> Timed tolerance for connection suspended leads to simultaneous leaders</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/arrodrigues/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/arrodrigues/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-460\" title=\"Timed tolerance for connection suspended leads to simultaneous leaders\" class=\"issue-link\" data-issue-key=\"CURATOR-460\"><del>CURATOR-460</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #262</p>\n\n<hr />\n<p>commit 72b7b8709c822b9170d8d7beb2814c4c36b89e58<br/>\nAuthor: javando <antonio.rafael.ar@...><br/>\nDate:   2018-04-03T02:27:13Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-460\" title=\"Timed tolerance for connection suspended leads to simultaneous leaders\" class=\"issue-link\" data-issue-key=\"CURATOR-460\"><del>CURATOR-460</del></a> Adjust to obey sessionExpirationPercent value</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766155","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766155","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766155,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxNTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T01:28:45Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179001451\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179001451</a></p>\n\n<p>    &#8212; Diff: curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java &#8212;<br/>\n    @@ -222,6 +223,35 @@ public void notLeader()<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    +<br/>\n    +    latch.close();<br/>\n    +    client.close();<br/>\n    +<br/>\n    +    timing.sleepABit();<br/>\n    +    states.clear();<br/>\n    +    server = new TestingServer();<br/>\n    +    client = CuratorFrameworkFactory.builder()<br/>\n    +    .connectString(server.getConnectString())<br/>\n    +    .connectionTimeoutMs(1000)<br/>\n    +    .sessionTimeoutMs(timing.session())<br/>\n    +    .retryPolicy(new RetryOneTime(1))<br/>\n    +    .connectionStateErrorPolicy(new SessionConnectionStateErrorPolicy())<br/>\n    +    .connectionHandlingPolicy(new StandardConnectionHandlingPolicy(30))<br/>\n    +    .build();<br/>\n    +    client.getConnectionStateListenable().addListener(stateListener);<br/>\n    +    client.start();<br/>\n    +    latch = new LeaderLatch(client, \"/test\");<br/>\n    +    latch.addListener(listener);<br/>\n    +    latch.start();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.CONNECTED.name());<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), \"true\");<br/>\n    +    server.close();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.SUSPENDED.name());<br/>\n    +    next = Lists.newArrayList();<br/>\n    +<br/>\n    +    next.add(states.poll(timing.session() / 3, TimeUnit.MILLISECONDS));<br/>\n    +    next.add(states.poll(timing.forSleepingABit().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n    +    Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    The issue isn't really the LeaderLatch specifically is it? I think it's probably cleaner to create a test case under curator-framework for the ConnectionStateManager and then have a test explicitly for injected LOST events, rather than have something in the LeaderLatch tests.</p>\n\n<p>    Because, this test doesn't really cover the use case that was discussed originally (2 clients being leader at the same time).</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766166","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766166","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766166,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxNjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T01:28:45Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179001383\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179001383</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -253,6 +253,7 @@ private void processEvents()<br/>\n {<br/>\n     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && startOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I think you're right about synchronization of access to the startOfSuspendedEpoch here. It can be modified via the addStateChange and setToSuspended methods (which already synchronize access to it). I wonder if it's cleaner just to make startOfSuspendedEpoch volatile?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766172","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766172","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766172,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxNzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T02:14:52Z","updated_at":"2025-01-21T13:39:32Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179010977\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179010977</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -253,6 +253,7 @@ private void processEvents()<br/>\n {<br/>\n     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && startOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I agree that make startOfSuspendedEpoch vollatile would be cleaner, but given that all other points accessing startOfSuspendedEpoch are already synchronized, I think that synchronize also this point would be more consistent with the rest of the code. Just an oppinion.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766182","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766182","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766182,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxODI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T03:06:57Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179016314\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179016314</a></p>\n\n<p>    &#8212; Diff: curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java &#8212;<br/>\n    @@ -222,6 +223,35 @@ public void notLeader()<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    +<br/>\n    +    latch.close();<br/>\n    +    client.close();<br/>\n    +<br/>\n    +    timing.sleepABit();<br/>\n    +    states.clear();<br/>\n    +    server = new TestingServer();<br/>\n    +    client = CuratorFrameworkFactory.builder()<br/>\n    +    .connectString(server.getConnectString())<br/>\n    +    .connectionTimeoutMs(1000)<br/>\n    +    .sessionTimeoutMs(timing.session())<br/>\n    +    .retryPolicy(new RetryOneTime(1))<br/>\n    +    .connectionStateErrorPolicy(new SessionConnectionStateErrorPolicy())<br/>\n    +    .connectionHandlingPolicy(new StandardConnectionHandlingPolicy(30))<br/>\n    +    .build();<br/>\n    +    client.getConnectionStateListenable().addListener(stateListener);<br/>\n    +    client.start();<br/>\n    +    latch = new LeaderLatch(client, \"/test\");<br/>\n    +    latch.addListener(listener);<br/>\n    +    latch.start();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.CONNECTED.name());<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), \"true\");<br/>\n    +    server.close();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.SUSPENDED.name());<br/>\n    +    next = Lists.newArrayList();<br/>\n    +<br/>\n    +    next.add(states.poll(timing.session() / 3, TimeUnit.MILLISECONDS));<br/>\n    +    next.add(states.poll(timing.forSleepingABit().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n    +    Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I agree with your point. I am also not confortable with the place I put this test, but just to explain myself:</p>\n\n<p>    I've chosen to improve this already existing test because its name is \"testErrorPolicies\" and the fix was exactly on the errorPolicies behaviour. Moreover, the already existing test, tests the injection of LOST after 100% of the session timeout has elapsed, I've just copy-pasted some lines, and set to inject lost after 30% of sessionTimeout.<br/>\n    In my opinion, if we move the lines I added from here to another test class, we should also move the whole already existing testErrorPolicies method.</p>\n\n<p>    What do you think?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766186","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766186","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766186,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxODY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T04:05:29Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179022050\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179022050</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -253,6 +253,7 @@ private void processEvents()<br/>\n {<br/>\n     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && startOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Yeah, you're probably right. If we change to volatile there will be quite a few more changes.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766188","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766188","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766188,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T04:07:53Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179022253\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179022253</a></p>\n\n<p>    &#8212; Diff: curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java &#8212;<br/>\n    @@ -222,6 +223,35 @@ public void notLeader()<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    +<br/>\n    +    latch.close();<br/>\n    +    client.close();<br/>\n    +<br/>\n    +    timing.sleepABit();<br/>\n    +    states.clear();<br/>\n    +    server = new TestingServer();<br/>\n    +    client = CuratorFrameworkFactory.builder()<br/>\n    +    .connectString(server.getConnectString())<br/>\n    +    .connectionTimeoutMs(1000)<br/>\n    +    .sessionTimeoutMs(timing.session())<br/>\n    +    .retryPolicy(new RetryOneTime(1))<br/>\n    +    .connectionStateErrorPolicy(new SessionConnectionStateErrorPolicy())<br/>\n    +    .connectionHandlingPolicy(new StandardConnectionHandlingPolicy(30))<br/>\n    +    .build();<br/>\n    +    client.getConnectionStateListenable().addListener(stateListener);<br/>\n    +    client.start();<br/>\n    +    latch = new LeaderLatch(client, \"/test\");<br/>\n    +    latch.addListener(listener);<br/>\n    +    latch.start();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.CONNECTED.name());<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), \"true\");<br/>\n    +    server.close();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.SUSPENDED.name());<br/>\n    +    next = Lists.newArrayList();<br/>\n    +<br/>\n    +    next.add(states.poll(timing.session() / 3, TimeUnit.MILLISECONDS));<br/>\n    +    next.add(states.poll(timing.forSleepingABit().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n    +    Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I think that the existing test case is trying to test connection / session loss cases in the context of the LeaderLatch recipe (thus the checks for \"true\" and \"false\"), whereas for this new test case, we don't really care about the fact that a LeaderLatch is running, rather that the ConnectionStateManager is doing the right thing. So, I'd prefer to see a standalone test in a TestConnectionStateManager class.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/378484967","html_url":"https://github.com/apache/curator/pull/261#issuecomment-378484967","issue_url":"https://api.github.com/repos/apache/curator/issues/261","id":378484967,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODQ4NDk2Nw==","user":{"login":"poetwang","id":1908737,"node_id":"MDQ6VXNlcjE5MDg3Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1908737?v=4","gravatar_id":"","url":"https://api.github.com/users/poetwang","html_url":"https://github.com/poetwang","followers_url":"https://api.github.com/users/poetwang/followers","following_url":"https://api.github.com/users/poetwang/following{/other_user}","gists_url":"https://api.github.com/users/poetwang/gists{/gist_id}","starred_url":"https://api.github.com/users/poetwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetwang/subscriptions","organizations_url":"https://api.github.com/users/poetwang/orgs","repos_url":"https://api.github.com/users/poetwang/repos","events_url":"https://api.github.com/users/poetwang/events{/privacy}","received_events_url":"https://api.github.com/users/poetwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T05:30:26Z","updated_at":"2018-04-04T05:30:26Z","author_association":"NONE","body":"@Randgalt It is really hard to test without breaking the start method into tow parts. I tried my best to do so.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/378484967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764958","html_url":"https://github.com/apache/curator/issues/972#issuecomment-2604764958","issue_url":"https://api.github.com/repos/apache/curator/issues/972","id":2604764958,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjQ5NTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T05:30:28Z","updated_at":"2025-01-21T13:39:01Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user poetwang commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/261\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/261</a></p>\n\n<p>    @Randgalt It is really hard to test without breaking the start method into tow parts. I tried my best to do so.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604764958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766192","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766192","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766192,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxOTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T00:09:35Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179319128\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179319128</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -253,6 +253,7 @@ private void processEvents()<br/>\n {<br/>\n     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && startOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Therefore, I'm going to synchronize the access at that point.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766198","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766198","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766198,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYxOTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T00:10:30Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179319231\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179319231</a></p>\n\n<p>    &#8212; Diff: curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java &#8212;<br/>\n    @@ -222,6 +223,35 @@ public void notLeader()<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n next.add(states.poll(timing.forSessionSleep().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    +<br/>\n    +    latch.close();<br/>\n    +    client.close();<br/>\n    +<br/>\n    +    timing.sleepABit();<br/>\n    +    states.clear();<br/>\n    +    server = new TestingServer();<br/>\n    +    client = CuratorFrameworkFactory.builder()<br/>\n    +    .connectString(server.getConnectString())<br/>\n    +    .connectionTimeoutMs(1000)<br/>\n    +    .sessionTimeoutMs(timing.session())<br/>\n    +    .retryPolicy(new RetryOneTime(1))<br/>\n    +    .connectionStateErrorPolicy(new SessionConnectionStateErrorPolicy())<br/>\n    +    .connectionHandlingPolicy(new StandardConnectionHandlingPolicy(30))<br/>\n    +    .build();<br/>\n    +    client.getConnectionStateListenable().addListener(stateListener);<br/>\n    +    client.start();<br/>\n    +    latch = new LeaderLatch(client, \"/test\");<br/>\n    +    latch.addListener(listener);<br/>\n    +    latch.start();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.CONNECTED.name());<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), \"true\");<br/>\n    +    server.close();<br/>\n    +    Assert.assertEquals(states.poll(timing.forWaiting().milliseconds(), TimeUnit.MILLISECONDS), ConnectionState.SUSPENDED.name());<br/>\n    +    next = Lists.newArrayList();<br/>\n    +<br/>\n    +    next.add(states.poll(timing.session() / 3, TimeUnit.MILLISECONDS));<br/>\n    +    next.add(states.poll(timing.forSleepingABit().milliseconds(), TimeUnit.MILLISECONDS));<br/>\n    +    Assert.assertTrue(next.equals(Arrays.asList(ConnectionState.LOST.name(), \"false\")) || next.equals(Arrays.asList(\"false\", ConnectionState.LOST.name())), next.toString());<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    OK. I'm going to adjust that.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/378811187","html_url":"https://github.com/apache/curator/pull/262#issuecomment-378811187","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":378811187,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODgxMTE4Nw==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T03:35:43Z","updated_at":"2018-04-05T03:35:43Z","author_association":"CONTRIBUTOR","body":"Thanks for the updates, I think this looks good.\r\n\r\nI still think we need to look at the default behaviour of the ConnectionStateListener though. Currently, a LOST event will only be injected after 4/3 of the session timeout (+ some small error). I think that this default behaviour should be changed so that the LOST event is injected at session timeout (+ some small error). This could be achieved by either changing the StandardConnectionHandlingPolicy default constructor to use 66 instead of 100 for the %, or by changing the ConnectionStateListener logic. I think it's probably simpler to change via the StandardConnectionHandlingPolicy, because the ConnectionStateListener logic interacts with the % defined in the StandardConnectionHandlingPolicy and has more potential to break existing use cases.\r\n\r\nWhat are your thoughts @Randgalt ?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/378811187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766202","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766202","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766202,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T03:35:45Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    Thanks for the updates, I think this looks good.</p>\n\n<p>    I still think we need to look at the default behaviour of the ConnectionStateListener though. Currently, a LOST event will only be injected after 4/3 of the session timeout (+ some small error). I think that this default behaviour should be changed so that the LOST event is injected at session timeout (+ some small error). This could be achieved by either changing the StandardConnectionHandlingPolicy default constructor to use 66 instead of 100 for the %, or by changing the ConnectionStateListener logic. I think it's probably simpler to change via the StandardConnectionHandlingPolicy, because the ConnectionStateListener logic interacts with the % defined in the StandardConnectionHandlingPolicy and has more potential to break existing use cases.</p>\n\n<p>    What are your thoughts @Randgalt ?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766208","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766208","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766208,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T09:07:39Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179396466\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179396466</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -251,9 +251,15 @@ private void processEvents()<br/>\n     {<br/>\n try<br/>\n {<br/>\n    +<br/>\n    +long localStartOfSuspendedEpoch;<br/>\n    +synchronized (this) </p>\n{\n    +    localStartOfSuspendedEpoch = this.startOfSuspendedEpoch;\n    +}\n<p>     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>long elapsedMs = startOfSuspendedEpoch == 0 ? useSessionTimeoutMs / 2 : System.currentTimeMillis() - startOfSuspendedEpoch;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && localStartOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    The `sessionExpirationPercent` calc is the same as in the other spot in the code right? We can abstract a method that does this.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/378870975","html_url":"https://github.com/apache/curator/pull/262#issuecomment-378870975","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":378870975,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODg3MDk3NQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T09:12:29Z","updated_at":"2018-04-05T09:12:40Z","author_association":"MEMBER","body":"I'm thinking we change `StandardConnectionHandlingPolicy`. It should be 33 though right? By the time we get the Disconnected 2/3 of a session have elapsed. \r\n\r\nHowever, this could affect existing clients badly. So, probably the best thing is to make the value configurable via command line with the default being 33. So, something like:\r\n\r\n```\r\npublic class StandardConnectionHandlingPolicy implements ConnectionHandlingPolicy \r\n{\r\n    private static final int default_expiration_percent = Integer.getInteger(\"curator-connection-expiration-percent\", 33);\r\n\r\n    private final int expirationPercent;\r\n\r\n    public StandardConnectionHandlingPolicy()\r\n    {\r\n        this(default_expiration_percent);\r\n    }\r\n\r\n  ...\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/378870975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766210","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766210","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766210,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-05T09:12:31Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    I'm thinking we change `StandardConnectionHandlingPolicy`. It should be 33 though right? By the time we get the Disconnected 2/3 of a session have elapsed. </p>\n\n<p>    However, this could affect existing clients badly. So, probably the best thing is to make the value configurable via command line with the default being 33. So, something like:</p>\n\n<p>    ```<br/>\n    public class StandardConnectionHandlingPolicy implements ConnectionHandlingPolicy <br/>\n    {<br/>\nprivate static final int default_expiration_percent = Integer.getInteger(\"curator-connection-expiration-percent\", 33);</p>\n\n<p>private final int expirationPercent;</p>\n\n<p>public StandardConnectionHandlingPolicy()</p>\n{\n    this(default_expiration_percent);\n}\n<p>    }<br/>\n    ```</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766213","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766213","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766213,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:03:30Z","updated_at":"2025-01-21T13:39:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179650717\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179650717</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -251,9 +251,15 @@ private void processEvents()<br/>\n     {<br/>\n try<br/>\n {<br/>\n    +<br/>\n    +long localStartOfSuspendedEpoch;<br/>\n    +synchronized (this) </p>\n{\n    +    localStartOfSuspendedEpoch = this.startOfSuspendedEpoch;\n    +}\n<p>     int lastNegotiatedSessionTimeoutMs = client.getZookeeperClient().getLastNegotiatedSessionTimeoutMs();<br/>\n     int useSessionTimeoutMs = (lastNegotiatedSessionTimeoutMs > 0) ? lastNegotiatedSessionTimeoutMs : sessionTimeoutMs;</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>long elapsedMs = startOfSuspendedEpoch == 0 ? useSessionTimeoutMs / 2 : System.currentTimeMillis() - startOfSuspendedEpoch;<br/>\n    +useSessionTimeoutMs = sessionExpirationPercent > 0 && localStartOfSuspendedEpoch != 0 ? (useSessionTimeoutMs * sessionExpirationPercent) / 100 : useSessionTimeoutMs;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    I think you mean useSessionTimeoutMs calc. I created a method for that. I'm not very happy with the name I gave to it \"getUseSessionTimeoutMs\", suggestions are certainly welcome.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766220","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766220","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766220,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:08:46Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179651175\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179651175</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -340,4 +338,12 @@ private void setCurrentConnectionState(ConnectionState newConnectionState)<br/>\n     currentConnectionState = newConnectionState;<br/>\n     startOfSuspendedEpoch = (currentConnectionState == ConnectionState.SUSPENDED) ? System.currentTimeMillis() : 0;<br/>\n }<br/>\n    +<br/>\n    +    private synchronized int getUseSessionTimeoutMs() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Looks like the comment on `startOfSuspendedEpoch` \"guarded by sync\" is a lie. `getUseSessionTimeoutMs()` doesn't need to be synchronized if we make `startOfSuspendedEpoch` volatile.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766225","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766225","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766225,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:22:29Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179652355\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179652355</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -340,4 +338,12 @@ private void setCurrentConnectionState(ConnectionState newConnectionState)<br/>\n     currentConnectionState = newConnectionState;<br/>\n     startOfSuspendedEpoch = (currentConnectionState == ConnectionState.SUSPENDED) ? System.currentTimeMillis() : 0;<br/>\n }<br/>\n    +<br/>\n    +    private synchronized int getUseSessionTimeoutMs() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Yes. I had this discussion with @cammckenzie some comments ago. Every access to startOfSuspendedEpoch is synchronized on \"this\" except this point, we could make it volatile or sync this point more, so we choose to sync it. In the first version I synchronized just the line accessing startOfSuspendedEpoch, but after adding getUseSessionTimeoutMs I tought it'd be more readable  sync the whole method.<br/>\n    Do you prefer to make it volatile?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766229","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766229","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766229,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:26:30Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179652781\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179652781</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -340,4 +338,12 @@ private void setCurrentConnectionState(ConnectionState newConnectionState)<br/>\n     currentConnectionState = newConnectionState;<br/>\n     startOfSuspendedEpoch = (currentConnectionState == ConnectionState.SUSPENDED) ? System.currentTimeMillis() : 0;<br/>\n }<br/>\n    +<br/>\n    +    private synchronized int getUseSessionTimeoutMs() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I think volatile is cleaner. I don't see any read/increments so it doesn't need to be AtomicLong either.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766233","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766233","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766233,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:32:30Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179653281\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179653281</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -340,4 +338,12 @@ private void setCurrentConnectionState(ConnectionState newConnectionState)<br/>\n     currentConnectionState = newConnectionState;<br/>\n     startOfSuspendedEpoch = (currentConnectionState == ConnectionState.SUSPENDED) ? System.currentTimeMillis() : 0;<br/>\n }<br/>\n    +<br/>\n    +    private synchronized int getUseSessionTimeoutMs() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Perfect.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766235","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766235","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766235,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyMzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T03:40:47Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262#discussion_r179654000\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262#discussion_r179654000</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/state/ConnectionStateManager.java &#8212;<br/>\n    @@ -340,4 +338,12 @@ private void setCurrentConnectionState(ConnectionState newConnectionState)<br/>\n     currentConnectionState = newConnectionState;<br/>\n     startOfSuspendedEpoch = (currentConnectionState == ConnectionState.SUSPENDED) ? System.currentTimeMillis() : 0;<br/>\n }<br/>\n    +<br/>\n    +    private synchronized int getUseSessionTimeoutMs() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I've made it volatile now.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/379152998","html_url":"https://github.com/apache/curator/pull/262#issuecomment-379152998","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":379152998,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTE1Mjk5OA==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T05:35:41Z","updated_at":"2018-04-06T05:35:41Z","author_association":"CONTRIBUTOR","body":"The changes look good to me, thanks @arrodrigues \r\n\r\n@Randgalt , I think the approach you're suggesting for setting up the default session timeout stuff looks OK. I thought that the suspended event came at 1/3 of the session timeout, which is why I was suggesting 66%. I will need to double check. If it's 2/3 of session timeout, then yes, 33%","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/379152998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766242","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766242","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766242,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-06T05:35:44Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    The changes look good to me, thanks @arrodrigues </p>\n\n<p>    @Randgalt , I think the approach you're suggesting for setting up the default session timeout stuff looks OK. I thought that the suspended event came at 1/3 of the session timeout, which is why I was suggesting 66%. I will need to double check. If it's 2/3 of session timeout, then yes, 33%</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/379425906","html_url":"https://github.com/apache/curator/pull/262#issuecomment-379425906","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":379425906,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTQyNTkwNg==","user":{"login":"arrodrigues","id":20606876,"node_id":"MDQ6VXNlcjIwNjA2ODc2","avatar_url":"https://avatars.githubusercontent.com/u/20606876?v=4","gravatar_id":"","url":"https://api.github.com/users/arrodrigues","html_url":"https://github.com/arrodrigues","followers_url":"https://api.github.com/users/arrodrigues/followers","following_url":"https://api.github.com/users/arrodrigues/following{/other_user}","gists_url":"https://api.github.com/users/arrodrigues/gists{/gist_id}","starred_url":"https://api.github.com/users/arrodrigues/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arrodrigues/subscriptions","organizations_url":"https://api.github.com/users/arrodrigues/orgs","repos_url":"https://api.github.com/users/arrodrigues/repos","events_url":"https://api.github.com/users/arrodrigues/events{/privacy}","received_events_url":"https://api.github.com/users/arrodrigues/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-07T02:27:02Z","updated_at":"2018-04-07T02:27:45Z","author_association":"CONTRIBUTOR","body":"@cammckenzie It is on 2/3 of session timeout. \r\nI'd like to remember this will happen just in the scenario that I described in the issue description, in many other network issues the suspended event would came immediately after disconnection . \r\nBeyond the 33%, shouldn't we consider adding an margin of error, like using 30%, 25% ? Because besides the 33% of session timeout, we could also have some delay to execute the leadership relinquish. Furthermore, I think ZK's ticktime, that generally is 2sec, also can potentially adds more delay to the formula. \r\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/379425906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766248","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766248","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766248,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-07T02:27:04Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user arrodrigues commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    @cammckenzie It is on 2/3 of session timeout. <br/>\n    I'd like to remember this will happen just in the scenario that I described in the issue description, in many other network issues the suspended event would came immediatly.<br/>\n    Beyond the 33%, shouldn't we consider adding an margin of error, like using 30%, 25% ? Because besides the 33% of session timeout, we could also have some delay to execute the leadership relinquish. Furthermore, I think ZK's ticktime, that generally is 2sec, also can potentially adds more delay to the formula. </p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/379591271","html_url":"https://github.com/apache/curator/pull/262#issuecomment-379591271","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":379591271,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTU5MTI3MQ==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-08T23:26:24Z","updated_at":"2018-04-08T23:26:24Z","author_association":"CONTRIBUTOR","body":"That's a good point @arrodrigues \r\n\r\nI don't think we can tell the difference between Disconnected event from ZK due to loss of the underlying socket and a Disconected event due to no heartbeats from the server for 2/3 of session timeout, which, from memory is what you were describing at the start of this conversation long ago.\r\n\r\nWith a bit of hacking, I believe that could extended the Zookeeper class to allow Curator to get access to the ClientCnxn object and from that, the underlying socket. I don't know if this is the right approach though, it will certainly couple Curator more tightly to ZK.\r\n\r\nThoughts @Randgalt ?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/379591271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766254","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766254","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766254,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-08T23:26:27Z","updated_at":"2025-01-21T13:39:34Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    That's a good point @arrodrigues </p>\n\n<p>    I don't think we can tell the difference between Disconnected event from ZK due to loss of the underlying socket and a Disconected event due to no heartbeats from the server for 2/3 of session timeout, which, from memory is what you were describing at the start of this conversation long ago.</p>\n\n<p>    With a bit of hacking, I believe that could extended the Zookeeper class to allow Curator to get access to the ClientCnxn object and from that, the underlying socket. I don't know if this is the right approach though, it will certainly couple Curator more tightly to ZK.</p>\n\n<p>    Thoughts @Randgalt ?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/379601895","html_url":"https://github.com/apache/curator/pull/262#issuecomment-379601895","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":379601895,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTYwMTg5NQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-09T01:29:29Z","updated_at":"2018-04-09T01:29:29Z","author_association":"MEMBER","body":"I'd be -1 on more hacking into ZooKeeper. Trying to get all these timings to be accurate is a lost cause anyway - we can never simulate in the client the exact timing of the server. I suggest adding a configurable (via CLI) \"slosh\" value or something like that.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/379601895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766258","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766258","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766258,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-09T01:29:31Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    I'd be -1 on more hacking into ZooKeeper. Trying to get all these timings to be accurate is a lost cause anyway - we can never simulate in the client the exact timing of the server. I suggest adding a configurable (via CLI) \"slosh\" value or something like that.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/379912195","html_url":"https://github.com/apache/curator/pull/262#issuecomment-379912195","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":379912195,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTkxMjE5NQ==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-09T22:22:35Z","updated_at":"2018-04-09T22:22:35Z","author_association":"CONTRIBUTOR","body":"I'm conflicted about the LOST injection stuff. I guess all we can do is err on the side of caution and leave it as is. That will cover what is presumably the most common case, where the connection to ZK is lost rather than the case this JIRA covers where the connection is still up but there's no heart beat.\r\n\r\nWhile we will never be able to exactly match the timing on the server side, I think that we should strive to have a reasonable approximation of it. Not being able to tell when the last heart beat was successfully sent to the server is problematic.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/379912195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766263","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766263","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766263,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-09T22:22:37Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    I'm conflicted about the LOST injection stuff. I guess all we can do is err on the side of caution and leave it as is. That will cover what is presumably the most common case, where the connection to ZK is lost rather than the case this JIRA covers where the connection is still up but there's no heart beat.</p>\n\n<p>    While we will never be able to exactly match the timing on the server side, I think that we should strive to have a reasonable approximation of it. Not being able to tell when the last heart beat was successfully sent to the server is problematic.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/380031703","html_url":"https://github.com/apache/curator/pull/262#issuecomment-380031703","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":380031703,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDAzMTcwMw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T09:16:58Z","updated_at":"2018-04-10T09:16:58Z","author_association":"MEMBER","body":"The ZK client code sends Disconnected when the Server disconnects or the server misses a heartbeat. So, that should be sufficient right?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/380031703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766267","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766267","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766267,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNjc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T09:17:11Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    The ZK client code sends Disconnected when the Server disconnects or the server misses a heartbeat. So, that should be sufficient right?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766593","html_url":"https://github.com/apache/curator/issues/982#issuecomment-2604766593","issue_url":"https://api.github.com/repos/apache/curator/issues/982","id":2604766593,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjY1OTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T13:23:55Z","updated_at":"2025-01-21T13:39:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Version 2.x is EOL. FYI</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766599","html_url":"https://github.com/apache/curator/issues/982#issuecomment-2604766599","issue_url":"https://api.github.com/repos/apache/curator/issues/982","id":2604766599,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjY1OTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T16:49:06Z","updated_at":"2025-01-21T13:39:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user krajcsovszkig-ms opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/263\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/263</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-462\" title=\"InterProcessSemaphoreV2 leaves orphaned lease node if acquiring the semaphore is interrupted at the wrong time\" class=\"issue-link\" data-issue-key=\"CURATOR-462\"><del>CURATOR-462</del></a> InterProcessSemaphoreV2 leaves orphaned lease node if acquiring the semaphore is interrupted at the wrong time</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/krajcsovszkig-ms/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/krajcsovszkig-ms/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-462\" title=\"InterProcessSemaphoreV2 leaves orphaned lease node if acquiring the semaphore is interrupted at the wrong time\" class=\"issue-link\" data-issue-key=\"CURATOR-462\"><del>CURATOR-462</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/263.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/263.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #263</p>\n\n<hr />\n<p>commit f9128a87c837fd4a687c3d54c73ea779e46085fc<br/>\nAuthor: krajcsovszkig-ms <krajcsovszkig-ms@...><br/>\nDate:   2018-04-10T12:08:45Z</p>\n\n<p>    Fix <a href=\"https://issues.apache.org/jira/browse/CURATOR-462\" title=\"InterProcessSemaphoreV2 leaves orphaned lease node if acquiring the semaphore is interrupted at the wrong time\" class=\"issue-link\" data-issue-key=\"CURATOR-462\"><del>CURATOR-462</del></a> &#8211; return lease created in org.apache.curator.framework.recipes.locks.InterProcessSemaphoreV2.internalAcquire1Lease(Builder<Lease>, long, boolean, long) when the wait for it to become active is interrupted; test for the fix</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766604","html_url":"https://github.com/apache/curator/issues/982#issuecomment-2604766604","issue_url":"https://api.github.com/repos/apache/curator/issues/982","id":2604766604,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjY2MDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T16:50:51Z","updated_at":"2025-01-21T13:39:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krajcsovszkig_ms\">krajcsovszkig_ms</a>:</i>\n<p>Thanks for the heads up. Will there be a 2.13.0 though? We do plan to eventually update to 4.x but not sure when that can happen.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/380262844","html_url":"https://github.com/apache/curator/pull/262#issuecomment-380262844","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":380262844,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDI2Mjg0NA==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T22:06:16Z","updated_at":"2018-04-10T22:06:16Z","author_association":"CONTRIBUTOR","body":"My issue is the difference in timing in these events:\r\n-If the connection between client and server is lost a disconnected event is received essentially immediately.\r\n-If a heart beat is missed it takes 2/3 of the session timeout.\r\n\r\nSo, we can't reliably do anything with timers because we can't tell the difference between these two events. In the first case, ideally, we would inject a LOST event after the negotiated session timeout MS. In the second case, ideally, we would inject a LOST event after 1/3 of the negotiated session timeout MS.\r\n\r\nFor a short session timeout the difference is minimal, but for a longer session timeout, it will be significant. I guess all we can do is the approach that we already have where the client of the Curator library can decide what % of the session timeout they want to use before a session timeout is injected. I would think that in general, connection loss is more likely than missed heart beats, so maybe we should just leave the default % of session timeout as it is at 100% as this will be correct for the most likely case.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/380262844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766272","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766272","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766272,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-10T22:06:19Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    My issue is the difference in timing in these events:<br/>\n    -If the connection between client and server is lost a disconnected event is received essentially immediately.<br/>\n    -If a heart beat is missed it takes 2/3 of the session timeout.</p>\n\n<p>    So, we can't reliably do anything with timers because we can't tell the difference between these two events. In the first case, ideally, we would inject a LOST event after the negotiated session timeout MS. In the second case, ideally, we would inject a LOST event after 1/3 of the negotiated session timeout MS.</p>\n\n<p>    For a short session timeout the difference is minimal, but for a longer session timeout, it will be significant. I guess all we can do is the approach that we already have where the client of the Curator library can decide what % of the session timeout they want to use before a session timeout is injected. I would think that in general, connection loss is more likely than missed heart beats, so maybe we should just leave the default % of session timeout as it is at 100% as this will be correct for the most likely case.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766277","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766277","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766277,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyNzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T00:40:28Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\">arrodrigues</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\" class=\"user-hover\" rel=\"cammckenzie\">Cam McKenzie</a> - You totally understood  my point. <br/>\n But, in my opinion, even though the \"missing heart beats\"  is rare, Curator should consider it. Curator should at least warn the user about this possibility in some way (log warning, documentation), this behavior should not be silent.</p>\n\n<p>As a user, I expect that if I say that I want 100% of tolerance of disconnection, I would have it, not 166%.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766281","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766281","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766281,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T01:01:43Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cammckenzie\">cammckenzie</a>:</i>\n<p>Agreed, <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arrodrigues\" class=\"user-hover\" rel=\"arrodrigues\">Antonio Rafael Rodrigues</a>, not sure where the best place to document it is though. I don't think that logging a warning is the best option as that will just cause a headache for Ops people.</p>\n\n<p>Maybe we just document it as a technote and in the ConnectionHandlingPolicy / StandardConnectionHandlingPolicy.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/380301632","html_url":"https://github.com/apache/curator/pull/262#issuecomment-380301632","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":380301632,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDMwMTYzMg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T01:56:48Z","updated_at":"2018-04-11T01:56:48Z","author_association":"MEMBER","body":"> -If the connection between client and server is lost a disconnected event is received essentially immediately.\r\n> -If a heart beat is missed it takes 2/3 of the session timeout.\r\n\r\nThinking more about this... There are three scenarios:\r\n\r\n1. The internal ZK client detects a missed heartbeat, closes the connection and sends `Event.KeeperState.Disconnected` (note: this is done by ClientCnxn.java in the SendThread class's run() method - the huge catch handler).\r\n2. The server detects a missed heartbeat and closes the connection which causes the client to get a closed connection and most likely a `SocketException` (which is handled in that same catch clause)\r\n3. The connection fails for other reasons (TCP errors, server crashes, etc.). \r\n\r\nUnfortunately, cases 2 and 3 look _exactly the same_ to the client. In case 2, the client should ideally act as if 2/3 of the session have elapsed. In case 3, the client should act as if none of the session has elapsed. Worse still, if the entire ZK cluster is down, it could conceivably come back up and clients won't lose their sessions at all because \"time\" in ZK is based on the leader's start time (I still think there's value in killing the session on the client side anyway as clients could be left hanging interminably). \r\n\r\nSo, even if we can know the client side heartbeat miss (case 1), we have no way of mitigating cases 2/3. I'm not sure what to do. Maybe leave `StandardConnectionHandlingPolicy` as is and add a new, optional policy, `AggressiveConnectionHandlingPolicy` that always assumes connection loss is due to missed heartbeats? Or, possibly, just do nothing and leave things as they are?\r\n\r\nThoughts?\r\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/380301632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766287","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766287","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766287,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyODc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T01:56:50Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    > -If the connection between client and server is lost a disconnected event is received essentially immediately.<br/>\n    > -If a heart beat is missed it takes 2/3 of the session timeout.</p>\n\n<p>    Thinking more about this... There are three scenarios:</p>\n\n<p>    1. The internal ZK client detects a missed heartbeat, closes the connection and sends `Event.KeeperState.Disconnected` (note: this is done by ClientCnxn.java in the SendThread class's run() method - the huge catch handler).<br/>\n    2. The server detects a missed heartbeat and closes the connection which causes the client to get a closed connection and most likely a `SocketException` (which is handled in that same catch clause)<br/>\n    3. The connection fails for other reasons (TCP errors, server crashes, etc.). </p>\n\n<p>    Unfortunately, cases 2 and 3 look <em>exactly the same</em> to the client. In case 2, the client should ideally act as if 2/3 of the session have elapsed. In case 3, the client should act as if none of the session has elapsed. Worse still, if the entire ZK cluster is down, it could conceivably come back up and clients won't lose their sessions at all because \"time\" in ZK is based on the leader's start time (I still think there's value in killing the session on the client side anyway as clients could be left hanging interminably). </p>\n\n<p>    So, even if we can know the client side heartbeat miss (case 1), we have no way of mitigating cases 2/3. I'm not sure what to do. Maybe leave `StandardConnectionHandlingPolicy` as is and add a new, optional policy, `AggressiveConnectionHandlingPolicy` that always assumes connection loss is due to missed heartbeats? Or, possibly, just do nothing and leave things as they are?</p>\n\n<p>    Thoughts?</p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766614","html_url":"https://github.com/apache/curator/issues/982#issuecomment-2604766614","issue_url":"https://api.github.com/repos/apache/curator/issues/982","id":2604766614,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjY2MTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T02:02:29Z","updated_at":"2025-01-21T13:39:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>>  Will there be a 2.13.0 though</p>\n\n<p>No - we're not doing anything with the 2.x branch (or the 3.x branch for that matter). 4.x is the current master of Curator.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/380324238","html_url":"https://github.com/apache/curator/pull/262#issuecomment-380324238","issue_url":"https://api.github.com/repos/apache/curator/issues/262","id":380324238,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDMyNDIzOA==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T04:34:34Z","updated_at":"2018-04-11T04:34:34Z","author_association":"CONTRIBUTOR","body":"To Curator, don't they all look the same? Ultimately, Curator will just get a Disconnected event?\r\n\r\nGiven that we can't tell the difference between them, I think that we just have to document this as a limitation (tech note and in the relevant classes?) and maybe send out an email on the users email list.\r\n\r\nI think that we should ultimately just leave the other handling as is. Different % values can be passed to StandardConnectionHandlingPolicy to achieve the same thing as an AggressiveConnectionHandlingPolicy just by passing in a value of 33 yes?\r\n\r\nThis PR is still relevant though and should be merged.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/380324238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766294","html_url":"https://github.com/apache/curator/issues/980#issuecomment-2604766294","issue_url":"https://api.github.com/repos/apache/curator/issues/980","id":2604766294,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjYyOTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-11T04:34:36Z","updated_at":"2025-01-21T13:39:35Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/262\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/262</a></p>\n\n<p>    To Curator, don't they all look the same? Ultimately, Curator will just get a Disconnected event?</p>\n\n<p>    Given that we can't tell the difference between them, I think that we just have to document this as a limitation (tech note and in the relevant classes?) and maybe send out an email on the users email list.</p>\n\n<p>    I think that we should ultimately just leave the other handling as is. Different % values can be passed to StandardConnectionHandlingPolicy to achieve the same thing as an AggressiveConnectionHandlingPolicy just by passing in a value of 33 yes?</p>\n\n<p>    This PR is still relevant though and should be merged.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604766294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]