[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961130167","html_url":"https://github.com/apache/couchdb/issues/2962#issuecomment-961130167","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2962","id":961130167,"node_id":"IC_kwDOAAMmUc45Sa63","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:05:38Z","updated_at":"2021-11-04T15:05:38Z","author_association":"CONTRIBUTOR","body":"This was fixed. Closed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961130167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961137323","html_url":"https://github.com/apache/couchdb/issues/3399#issuecomment-961137323","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3399","id":961137323,"node_id":"IC_kwDOAAMmUc45Scqr","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:09:20Z","updated_at":"2021-11-04T15:09:20Z","author_association":"MEMBER","body":"I think this one has been resolved -- `main` seems to be building just fine on FreeBSD in [Jenkins](https://ci-couchdb.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/main/212/pipeline/64), including unit tests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961137323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961140804","html_url":"https://github.com/apache/couchdb/issues/3354#issuecomment-961140804","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3354","id":961140804,"node_id":"IC_kwDOAAMmUc45SdhE","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:13:07Z","updated_at":"2021-11-04T15:13:07Z","author_association":"MEMBER","body":"@rnewson @nickva @noahshaw11 I believe this is resolved by Noah's work in #3632, please reopen if not","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961140804/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961144918","html_url":"https://github.com/apache/couchdb/issues/3205#issuecomment-961144918","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3205","id":961144918,"node_id":"IC_kwDOAAMmUc45SehW","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:17:21Z","updated_at":"2021-11-04T15:17:21Z","author_association":"MEMBER","body":"I think this is resolved now judging by the Jenkins link above -- macOS and FreeBSD are both green.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961144918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961149830","html_url":"https://github.com/apache/couchdb/issues/3362#issuecomment-961149830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3362","id":961149830,"node_id":"IC_kwDOAAMmUc45SfuG","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:22:38Z","updated_at":"2021-11-04T15:22:38Z","author_association":"CONTRIBUTOR","body":"Checked on `main`:\r\n\r\n```\r\n$ curl -X POST \"$DB/db1/_bulk_docs\" -H \"Content-Type: application/json\" -d '{\"docs\": [{\"_id\": \"doc1\", \"_rev\": \"1-a\"}, {\"_id\": \"doc1\", \"_rev\": \"2-b\", \"_revisions\": {\"start\": 2, \"ids\": [\"b\", \"a\"]}}, {\"_id\": \"doc1\", \"_rev\": \"2-c\", \"_revisions\": {\"start\": 2, \"ids\": [\"c\", \"a\"]}}], \"new_edits\": false}'\r\n```\r\n\r\nWe return the winning revision with `lastest=true`\r\n```\r\n% curl \"$DB/db1/doc1?rev=1-a&latest=true\"\r\n{\"_id\":\"doc1\",\"_rev\":\"2-c\"}\r\n\r\n% curl \"$DB/db1/doc1?rev=2-b&latest=true\"\r\n{\"_id\":\"doc1\",\"_rev\":\"2-c\"}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961149830/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961155962","html_url":"https://github.com/apache/couchdb/issues/1890#issuecomment-961155962","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1890","id":961155962,"node_id":"IC_kwDOAAMmUc45ShN6","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:29:15Z","updated_at":"2021-11-04T15:29:15Z","author_association":"MEMBER","body":"We do support OTP 21+ now and have for awhile. Tuple calls were removed in mochiweb in mochi/mochiweb#215, and I don't think we had them anywhere else in the codebase.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961155962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961167472","html_url":"https://github.com/apache/couchdb/issues/3026#issuecomment-961167472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3026","id":961167472,"node_id":"IC_kwDOAAMmUc45SkBw","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:41:41Z","updated_at":"2021-11-04T15:41:41Z","author_association":"CONTRIBUTOR","body":"The information in the purge_seq seem to return an aggregated purge_seq from shards and doesn't seem to be hard-coded\r\n\r\n```\r\nhttp post $DB/db1/_purge doc1:='[\"1-4b8a35d3f70a5962f86c6dd06ceb599c\"]'\r\n```\r\n\r\n```\r\n    \"purge_seq\": \"1-g1AAAABTeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQeC5BkaABS_4EgK5ERp8pEhqR6sBKGLAAtGRY_\",\r\n    \"sizes\": {\r\n        \"active\": 594,\r\n        \"external\": 9,\r\n        \"file\": 29026\r\n    },\r\n    \"update_seq\": \"3-g1AAAACTeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQeC5BkaABS_4EgK4M5kTkXKMCelJRsYpKSgqkLp0mJDEn1UCMYwEYYmBskG1skYSrPAgBISySb\"\r\n}\r\n```\r\n\r\n```\r\n> fabric_view_changes:decode_seq(\"1-g1AAAABTeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQeC5BkaABS_4EgK5ERp8pEhqR6sBKGLAAtGRY_\").\r\n[{'node1@127.0.0.1',[2147483648,4294967295],1},\r\n {'node1@127.0.0.1',[0,2147483647],0}]\r\n```\r\n\r\nClosing the issue for now as a ML discussion is a better starting point for this","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961167472/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961178267","html_url":"https://github.com/apache/couchdb/issues/980#issuecomment-961178267","issue_url":"https://api.github.com/repos/apache/couchdb/issues/980","id":961178267,"node_id":"IC_kwDOAAMmUc45Smqb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T15:53:48Z","updated_at":"2021-11-04T15:53:48Z","author_association":"CONTRIBUTOR","body":"This was implemented in https://github.com/apache/couchdb/commit/123bf82370c21a8b5458299a7e36c477a0fedca4 by @davisp. Thanks @vitaly-goot for the initial idea and proof of concept","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961178267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961199445","html_url":"https://github.com/apache/couchdb/issues/1151#issuecomment-961199445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1151","id":961199445,"node_id":"IC_kwDOAAMmUc45Sr1V","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:17:34Z","updated_at":"2021-11-04T16:17:34Z","author_association":"CONTRIBUTOR","body":"Cleaning some old issues, I was trying to validate if this performance problem still occurs.\r\n\r\nIt seems the reproducer gist script is now deleted. @igorski89 by chance would you still have it around somewhere?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961199445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961199651","html_url":"https://github.com/apache/couchdb/pull/2498#issuecomment-961199651","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2498","id":961199651,"node_id":"IC_kwDOAAMmUc45Sr4j","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:17:47Z","updated_at":"2021-11-04T16:17:47Z","author_association":"MEMBER","body":"Closing this one in favor #2526. The approach over there preserves the `couch_auth_cache` exported interface to keep things simple but removes the actual caching that was doing more harm than good.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961199651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961207556","html_url":"https://github.com/apache/couchdb/issues/1159#issuecomment-961207556","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1159","id":961207556,"node_id":"IC_kwDOAAMmUc45St0E","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:26:25Z","updated_at":"2021-11-04T16:26:25Z","author_association":"CONTRIBUTOR","body":"We fixed this, info for running jobs is now populated. There is not need to ever check _active_tasks for replication jobs\r\n\r\n```\r\n            \"info\": {\r\n                \"changes_pending\": null,\r\n                \"checkpointed_source_seq\": 0,\r\n                \"doc_write_failures\": 0,\r\n                \"docs_read\": 1,\r\n                \"docs_written\": 1,\r\n                \"missing_revisions_found\": 1,\r\n                \"revisions_checked\": 1,\r\n                \"source_seq\": \"2-g1AAAACNeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQiQ1L9____szKYExlygQLsBuYGycYWSSkMnKV5KalpmXmpKTg157EASYYGIPUfagYT2IykpGQTk5QUTF1ZAODIJHo\",\r\n                \"through_seq\": \"2-g1AAAACNeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQiQ1L9____szKYExlygQLsBuYGycYWSSkMnKV5KalpmXmpKTg157EASYYGIPUfagYT2IykpGQTk5QUTF1ZAODIJHo\"\r\n            },\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961207556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961208674","html_url":"https://github.com/apache/couchdb/issues/1257#issuecomment-961208674","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1257","id":961208674,"node_id":"IC_kwDOAAMmUc45SuFi","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:27:36Z","updated_at":"2021-11-04T16:27:36Z","author_association":"CONTRIBUTOR","body":"We fixed this with the Fair Share replicator. Thanks for the original idea @wohali! \r\n\r\nOut in 3.2.0 https://docs.couchdb.org/en/stable/whatsnew/3.2.html#features-and-enhancements","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961208674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961218024","html_url":"https://github.com/apache/couchdb/issues/1578#issuecomment-961218024","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1578","id":961218024,"node_id":"IC_kwDOAAMmUc45SwXo","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:37:30Z","updated_at":"2021-11-04T16:37:30Z","author_association":"CONTRIBUTOR","body":"This if fixed. Closing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961218024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961220785","html_url":"https://github.com/apache/couchdb/issues/1383#issuecomment-961220785","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1383","id":961220785,"node_id":"IC_kwDOAAMmUc45SxCx","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:40:34Z","updated_at":"2021-11-04T16:40:34Z","author_association":"CONTRIBUTOR","body":"This was fixed by upgraded to the smoosh auto-compactor in 3.x","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961220785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961223503","html_url":"https://github.com/apache/couchdb/issues/1579#issuecomment-961223503","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1579","id":961223503,"node_id":"IC_kwDOAAMmUc45SxtP","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:43:34Z","updated_at":"2021-11-04T16:43:34Z","author_association":"CONTRIBUTOR","body":"The auto-compactor has been replaced completely. Closing the issue as it's probably not relevant any longer. Please feel free to re-open if the issue is still present on 3.x releases.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961223503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961226832","html_url":"https://github.com/apache/couchdb/issues/1422#issuecomment-961226832","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1422","id":961226832,"node_id":"IC_kwDOAAMmUc45SyhQ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T16:47:42Z","updated_at":"2021-11-04T16:47:42Z","author_association":"CONTRIBUTOR","body":"The advice for @wohali is correct. We also document since 2.0 that instance_start_time always returns \"0\"","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961226832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961257150","html_url":"https://github.com/apache/couchdb/issues/1472#issuecomment-961257150","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1472","id":961257150,"node_id":"IC_kwDOAAMmUc45S56-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:22:26Z","updated_at":"2021-11-04T17:22:26Z","author_association":"CONTRIBUTOR","body":"This still happens. With auto-indexer (ken) it's even worse as it will start crashing as well and flooding the logs with failures that look like:\r\n\r\n```\r\n[error] 2021-11-04T17:19:00.390502Z node1@127.0.0.1 emulator -------- Error in process <0.16318.0> on node 'node1@127.0.0.1' with exit value:\r\n{{nocatch,{illegal_docid,<<\"Illegal document id `_design/`\">>}},[{couch_doc,validate_docid,1,[{file,\"src/couch_doc.erl\"},{line,213}]},{couch_doc,transfer_fields,3,[{file,\"src/couch_doc.erl\"},{line,252}]},{ken_server,'-update_db_indexes/2-fun-1-',4,[{file,\"src/ken_server.erl\"},{line,280}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]},{ken_server,update_db_indexes,2,[{file,\"src/ken_server.erl\"},{line,279}]}]}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961257150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961276210","html_url":"https://github.com/apache/couchdb/issues/1257#issuecomment-961276210","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1257","id":961276210,"node_id":"IC_kwDOAAMmUc45S-ky","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:44:24Z","updated_at":"2021-11-04T17:44:24Z","author_association":"MEMBER","body":"A quick followup to see if I understand the feature correctly. A user who wanted to create priority queues for different classes of replications would create e.g. `highpriority/_replicator`, `standard/_replicator`, `lowpriority/_replicator`, etc. and then configure `[replicator.shares]` in the server settings to allocate shares to each of these databases. It's not possible to define priority at the level of an individual document, right?\r\n\r\nSeems like that meets the need, and requiring server admin privileges to commandeer resources like that makes sense.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961276210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961276797","html_url":"https://github.com/apache/couchdb/issues/1648#issuecomment-961276797","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1648","id":961276797,"node_id":"IC_kwDOAAMmUc45S-t9","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:45:13Z","updated_at":"2021-11-04T17:45:13Z","author_association":"CONTRIBUTOR","body":"Offset is now `null` in 3.x and there hasn't been any discussion or incentive to change it. Closing the issue for now. Please re-open if we plan on addressing this again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961276797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961281928","html_url":"https://github.com/apache/couchdb/issues/1257#issuecomment-961281928","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1257","id":961281928,"node_id":"IC_kwDOAAMmUc45S_-I","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:52:21Z","updated_at":"2021-11-04T17:52:21Z","author_association":"CONTRIBUTOR","body":"@kocolosk yeah, that's how it would work. It's not per-individual replication job but per _replicator db.\r\n\r\nIt would would be possible to make it per-job and add another level to the share algorithm. Shares would then be hierarchically distributed per-db, then per-job.  But for now, perhaps, the existing (per db) implementation can be adequate. We can always re-open the issue for enhancements.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961281928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961284519","html_url":"https://github.com/apache/couchdb/issues/1720#issuecomment-961284519","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1720","id":961284519,"node_id":"IC_kwDOAAMmUc45TAmn","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:56:03Z","updated_at":"2021-11-04T17:56:03Z","author_association":"MEMBER","body":"@nickva I think the new [Fair Share](https://docs.couchdb.org/en/stable/replication/replicator.html#fair-share-job-scheduling) replicator feature allows for this capability?\r\n\r\n1. Create an `always-running/_replicator` DB\r\n2. Load replication docs for high priority jobs into this DB instead of the main one\r\n3. Ensure `[replicator.shares]` allocates enough shares to prioritize the `always-running` jobs\r\n\r\nThe last step is probably not required if the number of jobs in that priority DB is small, as the algorithm will default to sharing resources fairly at the level of the replicator DBs.\r\n\r\nI suppose it's not a hard guarantee that the priority jobs will *always* be running, but does it effectively deliver the same outcome?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961284519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961284972","html_url":"https://github.com/apache/couchdb/issues/1714#issuecomment-961284972","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1714","id":961284972,"node_id":"IC_kwDOAAMmUc45TAts","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T17:56:36Z","updated_at":"2021-11-04T17:56:36Z","author_association":"CONTRIBUTOR","body":"Something similar might be possible with the new Fair Share replicator algorithm by assigning jobs to different _replicator dbs (`low/_replicator`, `high/_replicator`) then adjusting shares accordingly via the the _config/ API.\r\n\r\nhttps://docs.couchdb.org/en/stable/replication/replicator.html#fair-share-job-scheduling","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961284972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961293392","html_url":"https://github.com/apache/couchdb/issues/1720#issuecomment-961293392","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1720","id":961293392,"node_id":"IC_kwDOAAMmUc45TCxQ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T18:08:06Z","updated_at":"2021-11-04T18:08:06Z","author_association":"CONTRIBUTOR","body":"@kocolosk that would work, yeah. Can set a high number of shares (1000 max) for `_replicator/always-running` and those jobs should get a high priority to always run in front of jobs from say `_replicator` or `_replicator/user-jobs`. To lower the chance even more for other dbs running, can explicitly grant them the minimum  - `1` share\r\n\r\nWe could also add a small enhancement to completely disable some replication db (assign them 0 shares, I think now 1 is the minimum) that would guarantee that they never get picked.\r\n\r\nI am inclined to close this for now as fixed and if after evaluating the new Fair Share is not adequate, to re-open it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961293392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961295686","html_url":"https://github.com/apache/couchdb/issues/1964#issuecomment-961295686","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1964","id":961295686,"node_id":"IC_kwDOAAMmUc45TDVG","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T18:11:07Z","updated_at":"2021-11-04T18:11:07Z","author_association":"CONTRIBUTOR","body":"This should be fixed with https://github.com/apache/couchdb/pull/3734","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961295686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961297277","html_url":"https://github.com/apache/couchdb/issues/2223#issuecomment-961297277","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2223","id":961297277,"node_id":"IC_kwDOAAMmUc45TDt9","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T18:13:08Z","updated_at":"2021-11-04T18:13:08Z","author_association":"CONTRIBUTOR","body":"Closing as fixed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961297277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961300460","html_url":"https://github.com/apache/couchdb/issues/2226#issuecomment-961300460","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2226","id":961300460,"node_id":"IC_kwDOAAMmUc45TEfs","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T18:17:39Z","updated_at":"2021-11-04T18:17:39Z","author_association":"CONTRIBUTOR","body":"Empty array is currently the expected response for _bulk_docs with `new_edits:false` it's not a bug.\r\n\r\nIn general, there is no expectation that the behavior of `new_edits:false` API would be the same as for `new_edits:true`. If we were to design the API from scratch, we'd probably make these two separate API endpoints even. \r\n\r\nNow, we could enhance `new_edits:false` to return something new, say, return only the branches which were extended but that should be a wider mailing list discussion perhaps.\r\n\r\nClosing the issue for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961300460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961301204","html_url":"https://github.com/apache/couchdb/issues/2212#issuecomment-961301204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2212","id":961301204,"node_id":"IC_kwDOAAMmUc45TErU","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T18:18:40Z","updated_at":"2021-11-04T18:18:40Z","author_association":"CONTRIBUTOR","body":"WeatherReport and recon are now in 3.x","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961301204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961334939","html_url":"https://github.com/apache/couchdb/issues/3377#issuecomment-961334939","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3377","id":961334939,"node_id":"IC_kwDOAAMmUc45TM6b","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T19:04:15Z","updated_at":"2021-11-04T19:04:15Z","author_association":"CONTRIBUTOR","body":"Prometheus support shipped in 3.2.0\r\n\r\nhttps://docs.couchdb.org/en/3.2.0/whatsnew/3.2.html#features-and-enhancements\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961334939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961353810","html_url":"https://github.com/apache/couchdb/issues/980#issuecomment-961353810","issue_url":"https://api.github.com/repos/apache/couchdb/issues/980","id":961353810,"node_id":"IC_kwDOAAMmUc45TRhS","user":{"login":"vitaly-goot","id":6166649,"node_id":"MDQ6VXNlcjYxNjY2NDk=","avatar_url":"https://avatars.githubusercontent.com/u/6166649?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaly-goot","html_url":"https://github.com/vitaly-goot","followers_url":"https://api.github.com/users/vitaly-goot/followers","following_url":"https://api.github.com/users/vitaly-goot/following{/other_user}","gists_url":"https://api.github.com/users/vitaly-goot/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaly-goot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaly-goot/subscriptions","organizations_url":"https://api.github.com/users/vitaly-goot/orgs","repos_url":"https://api.github.com/users/vitaly-goot/repos","events_url":"https://api.github.com/users/vitaly-goot/events{/privacy}","received_events_url":"https://api.github.com/users/vitaly-goot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T19:31:28Z","updated_at":"2021-11-04T19:31:28Z","author_association":"CONTRIBUTOR","body":"Cool, I am glad I was able to contribute something useful back to community.\n\nThank you for letting me know!\n-Vitaly\n\nOn Thu, Nov 4, 2021 at 8:54 AM Nick Vatamaniuc ***@***.***>\nwrote:\n\n> This was implemented in 123bf82\n> <https://github.com/apache/couchdb/commit/123bf82370c21a8b5458299a7e36c477a0fedca4>\n> by @davisp <https://github.com/davisp>. Thanks @vitaly-goot\n> <https://github.com/vitaly-goot> for the initial idea and proof of concept\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/980#issuecomment-961178267>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABPBQ6L3BDBI6FTJGD7OBGLUKK3CRANCNFSM4EDH4U2Q>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961353810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961355827","html_url":"https://github.com/apache/couchdb/issues/3377#issuecomment-961355827","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3377","id":961355827,"node_id":"IC_kwDOAAMmUc45TSAz","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T19:34:24Z","updated_at":"2021-11-04T19:34:24Z","author_association":"MEMBER","body":"Yeah, I was just wondering if there's supposed to be some place where we store these RFCs in perpetuity. We started using the couchdb-documentation repo for this purpose but that didn't really feel natural either.\r\n\r\nAgree this issue can be closed, but I think there's an opportunity for improvement in the RFC process here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961355827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961604627","html_url":"https://github.com/apache/couchdb/pull/3175#issuecomment-961604627","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3175","id":961604627,"node_id":"IC_kwDOAAMmUc45UOwT","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T03:41:18Z","updated_at":"2021-11-05T03:41:18Z","author_association":"MEMBER","body":"Rebased and augmented in #3818","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961604627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961980074","html_url":"https://github.com/apache/couchdb/pull/3817#issuecomment-961980074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3817","id":961980074,"node_id":"IC_kwDOAAMmUc45Vqaq","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T15:14:27Z","updated_at":"2021-11-05T15:14:27Z","author_association":"CONTRIBUTOR","body":"> +1\r\n> \r\n> Was wondering if we could wait until after we tag 3.2.1 to merge? Not big deal if we don't but in case we get a last minute -1, it would be nice to know we could still avoid branching.\r\n\r\nDefinitely will wait.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/961980074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/962400205","html_url":"https://github.com/apache/couchdb/pull/3817#issuecomment-962400205","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3817","id":962400205,"node_id":"IC_kwDOAAMmUc45XQ_N","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-06T05:57:04Z","updated_at":"2021-11-06T05:57:04Z","author_association":"CONTRIBUTOR","body":"3.2.1 was tagged. Thank you for waiting","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/962400205/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/962536977","html_url":"https://github.com/apache/couchdb/issues/2226#issuecomment-962536977","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2226","id":962536977,"node_id":"IC_kwDOAAMmUc45XyYR","user":{"login":"snowyu","id":327887,"node_id":"MDQ6VXNlcjMyNzg4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/327887?v=4","gravatar_id":"","url":"https://api.github.com/users/snowyu","html_url":"https://github.com/snowyu","followers_url":"https://api.github.com/users/snowyu/followers","following_url":"https://api.github.com/users/snowyu/following{/other_user}","gists_url":"https://api.github.com/users/snowyu/gists{/gist_id}","starred_url":"https://api.github.com/users/snowyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snowyu/subscriptions","organizations_url":"https://api.github.com/users/snowyu/orgs","repos_url":"https://api.github.com/users/snowyu/repos","events_url":"https://api.github.com/users/snowyu/events{/privacy}","received_events_url":"https://api.github.com/users/snowyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-07T01:38:55Z","updated_at":"2021-11-07T01:38:55Z","author_association":"NONE","body":"doesnt matter. I give up couchdb now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/962536977/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964666095","html_url":"https://github.com/apache/couchdb/pull/3285#issuecomment-964666095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3285","id":964666095,"node_id":"IC_kwDOAAMmUc45f6Lv","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T00:26:15Z","updated_at":"2021-11-10T00:26:15Z","author_association":"MEMBER","body":"I agree with @bessbd 's analysis of the documentation. But I'm wondering -- should we be availing ourselves of some of the more specific branch protection features? I honestly thought we had several of those setup in the olden days. Maybe @wohali remembers the requirements we put in place? It looks like the set of options for a branch is as follows:\r\n\r\n```\r\n      required_status_checks:\r\n        # strict means \"Require branches to be up to date before merging\".\r\n        strict: true\r\n        # contexts are the names of checks that must pass\r\n        contexts:\r\n          - gh-infra/jenkins\r\n          - another/build-that-must-pass\r\n  \r\n      required_pull_request_reviews:\r\n        dismiss_stale_reviews: true\r\n        require_code_owner_reviews: true\r\n        required_approving_review_count: 3\r\n       \r\n      # squash or rebase must be allowed in the repo for this setting to be set to true.\r\n      required_linear_history: false\r\n  \r\n      required_signatures: true\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964666095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964688577","html_url":"https://github.com/apache/couchdb/pull/3285#issuecomment-964688577","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3285","id":964688577,"node_id":"IC_kwDOAAMmUc45f_rB","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T01:10:28Z","updated_at":"2021-11-10T01:10:28Z","author_association":"MEMBER","body":"@kocolosk Yeah, we'd want to block commits to any release-able branch (main, 3.x, etc.) for anything that didn't pass, with some sort of 'emergency bypass' to deal with broken CI - sometimes in the past we had to talk to Infra to help with this, but it should be pretty rare.\r\n\r\nHaven't dug into these other (newer?) .asf.yaml features, sorry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964688577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964721375","html_url":"https://github.com/apache/couchdb/pull/3285#issuecomment-964721375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3285","id":964721375,"node_id":"IC_kwDOAAMmUc45gHrf","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T02:21:30Z","updated_at":"2021-11-10T02:21:30Z","author_association":"MEMBER","body":"As far as I can tell \"emergency bypass\" is still an Infra action:\r\n\r\n> NB (2): If you need to remove a required check in order to push a change to .asf.yaml, you will need to create an Infra Jira ticket with a request to have the check manually removed.\r\n\r\nI updated this PR to (I think) require up-to-date branches before merging, and further require Jenkins to be green for `main` and `3.x`. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/964721375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/966949501","html_url":"https://github.com/apache/couchdb/pull/3038#issuecomment-966949501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3038","id":966949501,"node_id":"IC_kwDOAAMmUc45onp9","user":{"login":"klehmann","id":4291861,"node_id":"MDQ6VXNlcjQyOTE4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4291861?v=4","gravatar_id":"","url":"https://api.github.com/users/klehmann","html_url":"https://github.com/klehmann","followers_url":"https://api.github.com/users/klehmann/followers","following_url":"https://api.github.com/users/klehmann/following{/other_user}","gists_url":"https://api.github.com/users/klehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/klehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klehmann/subscriptions","organizations_url":"https://api.github.com/users/klehmann/orgs","repos_url":"https://api.github.com/users/klehmann/repos","events_url":"https://api.github.com/users/klehmann/events{/privacy}","received_events_url":"https://api.github.com/users/klehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T09:23:20Z","updated_at":"2021-11-12T09:23:20Z","author_association":"NONE","body":"We are **very** interested in this new feature, but for our use case (mirroring/migrating data from Notes/Domino databases), just checking the `_access` field values against a single `userCtx.name` value is not sufficient. Would be much more powerful if this second value could be a list as well, e.g. that we populate with all name variants, groups and roles that a user has in the web app that is using CouchDB for data storage.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/966949501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/967167707","html_url":"https://github.com/apache/couchdb/issues/3824#issuecomment-967167707","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3824","id":967167707,"node_id":"IC_kwDOAAMmUc45pc7b","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T14:40:28Z","updated_at":"2021-11-12T14:40:28Z","author_association":"MEMBER","body":"Some things I learned:\r\n\r\n* The `skip.elixir` file has a high degree of overlap with `:pending` tag, at least on `main`. Removing the contents of the file causes 13 additional tests to run successfully without introducing any failures.\r\n* `mix` will automatically skip any tests with a `:skip` tag and mark them as `skipped`; we are only using this in one location today.\r\n* We additionally configure our test runner to exclude tests with the `:pending` tag; we have 135 of those on `main` today. They are marked as `excluded` instead of `skipped` in the test output.\r\n* The `suite.elixir` file was slightly out-of-date and missing a couple of tests; it's important to regenerate this file periodically via\r\n\r\n```\r\nMIX_ENV=integration mix suite > test/elixir/test/config/suite.elixir\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/967167707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968211226","html_url":"https://github.com/apache/couchdb/issues/2242#issuecomment-968211226","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2242","id":968211226,"node_id":"IC_kwDOAAMmUc45tbsa","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T05:47:00Z","updated_at":"2021-11-14T05:47:00Z","author_association":"CONTRIBUTOR","body":"This should be fixed in https://github.com/apache/couchdb/pull/3819","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968211226/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968212229","html_url":"https://github.com/apache/couchdb/issues/2892#issuecomment-968212229","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2892","id":968212229,"node_id":"IC_kwDOAAMmUc45tb8F","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T05:57:38Z","updated_at":"2021-11-14T05:57:38Z","author_association":"CONTRIBUTOR","body":"The fix for this is provided in https://github.com/apache/couchdb/commit/1860ebbf2fa1731a62f3c9b107b2e52811489c1e\r\n\r\nDocumentation was updated as well: https://docs.couchdb.org/en/stable/replication/replicator.html?highlight=auth#specifying-usernames-and-passwords\r\n\r\nThe preferred version is:\r\n\r\n```\r\n{\r\n    \"target\": {\r\n        \"url\": \"http://someurl.com/mydb\",\r\n        \"auth\": {\r\n            \"basic\": {\r\n                \"username\": \"$username\",\r\n                \"password\": \"$password\"\r\n             }\r\n        }\r\n    },\r\n    ...\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968212229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968219176","html_url":"https://github.com/apache/couchdb/issues/3298#issuecomment-968219176","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3298","id":968219176,"node_id":"IC_kwDOAAMmUc45tdoo","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T07:05:24Z","updated_at":"2021-11-14T07:05:24Z","author_association":"CONTRIBUTOR","body":"This is fixed:\r\n\r\n\r\n```\r\n{\r\n    \"collation_driver\": {\r\n        \"collation_algorithm_version\": \"13\",\r\n        \"library_version\": \"66.1\",\r\n        \"name\": \"libicu\"\r\n    },\r\n    \"erlang_version\": \"23.3.1\",\r\n    \"javascript_engine\": {\r\n        \"name\": \"spidermonkey\",\r\n        \"version\": \"68\"\r\n    }\r\n}\r\n```\r\n\r\nWe report JS, erlang and libicu versions","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968219176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968350014","html_url":"https://github.com/apache/couchdb/pull/3831#issuecomment-968350014","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3831","id":968350014,"node_id":"IC_kwDOAAMmUc45t9k-","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T19:31:04Z","updated_at":"2021-11-15T03:54:37Z","author_association":"CONTRIBUTOR","body":"> I find it a little janky to have to keep suite.elixir manually up-to-date.\r\n\r\nSame.\r\n\r\n> Should we find a way to automate that?\r\n\r\nThe default behavior of `mix` is to run all tests, so if an up to date suite.elixir would just contain the full list of tests anyhow, I don't know why we couldn't just get rid of suite.elixir and the `--include` line that references it entirely. The only case I can think of that it would be useful is when you want to define a very small set of tests to run (e.g. the quorum tests), which would be harder to do just using exclusion. But it seems like we're just using normal tags for that, so who knows.\r\n\r\n> Conversely, do we actually need to keep the suite / skip approach to managing test sets? ExUnit always has a fairly rich tagging and filtering system for constructing test sets. I wouldn't mind at all if e.g. Cloudant folks wanted to add some additional tags to tests so they could exclude / include them as needed for their internal CI setup.\r\n\r\nI don't remember the exact requirements that led @iilyak to the current design, but if Cloudant had the ability to add tags, we could maybe dispense with the skip approach.\r\n\r\nUpdate: I dug around in suite.ex, and I think I understand better how this works. You can't really use skip.elixir without suite.elixir because you can apparently only pass in the test ids you want to run via `only_test_ids` ExUnit config param. There's evidently no way to pass a list of ids _not_ to run, having the list of tests you want to run beforehand is necessary to use skip.elixir. The corollary is that if you can exclude all tests via tags, then neither seems necessary. Unfortunately, suite.ex doesn't currently warn if you try to use e.g. skip.elixir without suite.elixir -- it just does something surprising, and runs all tests basically ignoring skip.elixir.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968350014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968407344","html_url":"https://github.com/apache/couchdb/pull/3831#issuecomment-968407344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3831","id":968407344,"node_id":"IC_kwDOAAMmUc45uLkw","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T00:45:24Z","updated_at":"2021-11-15T00:45:24Z","author_association":"MEMBER","body":"Thanks Jay! I hadn't seen your approval before I dropped that last commit on this PR, so I can revert it for now and file it as a separate, standalone PR. I'll fix the typo as well.\r\n\r\nThe code that generates `suite.elixir` takes about 15 seconds to execute on my machine, so I'd want to see if there was a better way to optimize that before running that routine on-demand as part of a Makefile target. I think the idea of constructing a set of excludes from the contents of a `skip.elixir` file instead of generating input to the `only_test_ids` argument could be a good approach.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968407344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968503673","html_url":"https://github.com/apache/couchdb/pull/3831#issuecomment-968503673","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3831","id":968503673,"node_id":"IC_kwDOAAMmUc45ujF5","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T03:24:23Z","updated_at":"2021-11-15T03:24:23Z","author_association":"MEMBER","body":"I discovered that the module and test name are automatically [injected](https://github.com/elixir-lang/elixir/blob/79cd891eb86ecb7654a7acdb63769cfdd950a5c0/lib/ex_unit/lib/ex_unit/runner.ex#L261) as tags on each test. That means we could exclude tests by name, or exclude an entire module, but I don't think we'd be able to exclude based on a qualified `{module, test_name}` tuple.\r\n\r\nWe do have some duplicate test names in different modules but that wouldn't be too difficult to rectify.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/968503673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969036902","html_url":"https://github.com/apache/couchdb/issues/3824#issuecomment-969036902","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3824","id":969036902,"node_id":"IC_kwDOAAMmUc45wlRm","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T15:41:24Z","updated_at":"2021-11-15T15:41:24Z","author_association":"CONTRIBUTOR","body":"IRC `skip.elixir` was invented for a case when integrator want to disable tests without touching the upstream CouchDB source code.  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969036902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969168359","html_url":"https://github.com/apache/couchdb/issues/3824#issuecomment-969168359","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3824","id":969168359,"node_id":"IC_kwDOAAMmUc45xFXn","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T17:55:24Z","updated_at":"2021-11-15T17:55:24Z","author_association":"MEMBER","body":"That makes sense @iilyak , thanks. I filed a PR in #3831 a few days ago to drive some improvements but didn't touch the basic `skip.elixir` / `suite.elixir` setup. I've been mulling over some ways that we might improve that and I had a few ideas. Would be curious to get your thoughts:\r\n\r\n### Option 1: Ignore suite.elixir if skip.elixir is empty\r\n\r\nIf we did this then anyone *not* relying on a `skip.elixir` file would automatically pick up new / changed tests. Folks who are relying on the `skip.elixir` file would still be required to maintain `suite.elixir`.\r\n\r\n### Option 2: Dynamically generate suite.elixir content if skip.elixir is used\r\n\r\nWith this approach no one needs to maintain `suite.elixir`. Calling `Couch.Test.Suite.list()` takes about 15 seconds on my machine; most of it is spent `require`-ing the .exs files, so one might imagine that the subsequent `ExUnit` run would be faster as a result. Anecdotally it seems 7-10 seconds faster (i.e. 5-8 seconds slower overall) but I haven't tried too hard to measure it.\r\n\r\n### Option 3: Exclude tests by name\r\n\r\nI discovered that the module and test name are automatically [injected](https://github.com/elixir-lang/elixir/blob/79cd891eb86ecb7654a7acdb63769cfdd950a5c0/lib/ex_unit/lib/ex_unit/runner.ex#L261) as tags on each test. That means we could exclude tests by name using the existing skip.elixir format, but we'd have to take care to ensure globally-unique test names (today we have some identically-named tests across modules). No one need maintain `suite.elixir`, and there's no measurable performance penalty.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969168359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969170478","html_url":"https://github.com/apache/couchdb/pull/3831#issuecomment-969170478","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3831","id":969170478,"node_id":"IC_kwDOAAMmUc45xF4u","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T17:58:04Z","updated_at":"2021-11-15T17:58:04Z","author_association":"MEMBER","body":"I'm going to merge this one now and file a separate PR if/when we reach consensus on improvements to the suite.elixir setup in #3824 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969170478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969172512","html_url":"https://github.com/apache/couchdb/issues/3824#issuecomment-969172512","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3824","id":969172512,"node_id":"IC_kwDOAAMmUc45xGYg","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T18:00:40Z","updated_at":"2021-11-15T18:00:40Z","author_association":"MEMBER","body":"Reopen to continue discussion of additional improvements.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/969172512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/973084186","html_url":"https://github.com/apache/couchdb/pull/3795#issuecomment-973084186","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3795","id":973084186,"node_id":"IC_kwDOAAMmUc46ABYa","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T17:20:27Z","updated_at":"2021-11-18T17:20:27Z","author_association":"CONTRIBUTOR","body":"@rnewson , I'm unable to reproduce the issue for this particular user. However, they confirmed that the document id belongs to a different database that resides on the same cluster.\r\n\r\nThe code shows that the segment files are written in a directory path based simply on DbName + Hash:\r\nhttps://github.com/apache/couchdb/blob/3.x/src/dreyfus/src/dreyfus_index.erl#L250. A\r\n\r\nOn the clouseau side, as you're fully aware, the PATH is mapped to PIDs which get returned to dreyfus:\r\n\r\nhttps://github.com/cloudant-labs/clouseau/blob/master/src/main/scala/com/cloudant/clouseau/IndexManagerService.scala#L44-L45\r\n\r\nFor the user behavior to manifest, one possibility is that the PID mapping is modified and the PID  writes to a different path. I don't see that occurring anywhere in the  Clouseau codebase. That doesn't exclude the possibility it's happening, but unfortunately, I cannot reproduce it.\r\n\r\nIt's a corner case and the user is getting a function_clause. I propose that instead of return results, that we do: \r\n\r\n> logging a 'fatal' error for the administrator and returning a 500 status code indicating the index is broken to the user.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/973084186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/973141018","html_url":"https://github.com/apache/couchdb/pull/3795#issuecomment-973141018","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3795","id":973141018,"node_id":"IC_kwDOAAMmUc46APQa","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T18:26:08Z","updated_at":"2021-11-18T18:30:27Z","author_association":"MEMBER","body":"@tonysun83 thanks for the details, this worries me. I can, sadly, imagine there might be bugs in the pid<>index path logic, either in dreyfus or clouseau or in combination.  Clearly, though, they must manifest rarely. Have you confirmed that the document from \"another database\" is genuinely only present in that database and is not (now, or in the past) present in the expected database?\r\n\r\nThe fix in this PR remains the wrong approach, I think we both agree. As for returning a fatal/500 error, it's not entirely clear that's right either. For one thing the 500 would only manifest if a search query matched one of these misplaced documents, and not if they don't. If we have indexed documents into the wrong search index then the index is corrupt and no results can be trusted. So really the index should be deleted at that moment and forced to rebuild or, if we prefer, marked as corrupt and no longer allowed to serve requests until someone (the user? the administrator?) intervenes.\r\n\r\nThe true fix, I think, is to remove the pid<>path mapping entirely, changing the rpc messages to state the index path each time. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/973141018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974364744","html_url":"https://github.com/apache/couchdb/issues/3839#issuecomment-974364744","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3839","id":974364744,"node_id":"IC_kwDOAAMmUc46E6BI","user":{"login":"mtenrero","id":6759022,"node_id":"MDQ6VXNlcjY3NTkwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/6759022?v=4","gravatar_id":"","url":"https://api.github.com/users/mtenrero","html_url":"https://github.com/mtenrero","followers_url":"https://api.github.com/users/mtenrero/followers","following_url":"https://api.github.com/users/mtenrero/following{/other_user}","gists_url":"https://api.github.com/users/mtenrero/gists{/gist_id}","starred_url":"https://api.github.com/users/mtenrero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtenrero/subscriptions","organizations_url":"https://api.github.com/users/mtenrero/orgs","repos_url":"https://api.github.com/users/mtenrero/repos","events_url":"https://api.github.com/users/mtenrero/events{/privacy}","received_events_url":"https://api.github.com/users/mtenrero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T19:39:50Z","updated_at":"2021-11-19T19:39:50Z","author_association":"NONE","body":"We can close this, I could find the answer digging into the code, it seems that the PEM key was not properly formatted, [http://mail-archives.apache.org/mod_mbox/couchdb-commits/202003.mbox/%3C20200330115136.9E68281A0A@gitbox.apache.org%3E](http://mail-archives.apache.org/mod_mbox/couchdb-commits/202003.mbox/%3C20200330115136.9E68281A0A@gitbox.apache.org%3E)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974364744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974406143","html_url":"https://github.com/apache/couchdb/pull/3837#issuecomment-974406143","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3837","id":974406143,"node_id":"IC_kwDOAAMmUc46FEH_","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T20:15:00Z","updated_at":"2021-11-19T20:15:00Z","author_association":"CONTRIBUTOR","body":"Since we're fixing a few things with erlfmt compared to `main` I think it may make sense to try to  speed it up a bit. We launch a separate erlfmt process for each single file. Since `erlfmt` can work in parallel we should instead feed it \"dir/*.erl\" at least so each application src folder can be processed faster.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974406143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974443949","html_url":"https://github.com/apache/couchdb/pull/3837#issuecomment-974443949","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3837","id":974443949,"node_id":"IC_kwDOAAMmUc46FNWt","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T20:38:12Z","updated_at":"2021-11-19T20:38:12Z","author_association":"CONTRIBUTOR","body":"> Can we verify that the generated .beam files are unmodified as a one-time crosscheck?\r\n\r\nFor main we ran the check with the commented code in https://github.com/apache/couchdb/pull/3568/files#diff-f2ea7984714072018b8a19daabd2dbc8df9f662af94849ffa7eb60b54bc711f0 but then we noticed that erlfmt does AST level verification as well https://github.com/apache/couchdb/pull/3568#issuecomment-853959096\r\n\r\nBut I think it's a good idea to have to double-check. I'll give that a try.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974443949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974463508","html_url":"https://github.com/apache/couchdb/pull/3837#issuecomment-974463508","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3837","id":974463508,"node_id":"IC_kwDOAAMmUc46FSIU","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T20:50:50Z","updated_at":"2021-11-19T20:50:50Z","author_association":"MEMBER","body":"Ah if `erlfmt` is already doing that check, and we've checked their work once already, I'm not sure I see the need to do it again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974463508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974607093","html_url":"https://github.com/apache/couchdb/pull/3837#issuecomment-974607093","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3837","id":974607093,"node_id":"IC_kwDOAAMmUc46F1L1","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T07:06:52Z","updated_at":"2021-11-20T07:17:46Z","author_association":"CONTRIBUTOR","body":"@kocolosk I attempted to check the beam files and it turns out they are not all exactly the same. The reason is that [fabric.hrl](https://github.com/apache/couchdb/blob/3.x/src/fabric/include/fabric.hrl#L13) happens to include `eunit.hrl` which has [`?LINE`](https://github.com/erlang/otp/blob/maint-24/lib/eunit/include/eunit.hrl#L134) macros embedded it it. As a consequence, anything that imports `fabric.hrl` and has any tests or asserts in the module ends up generating a different hash. Otherwise all the beam hashes match exactly.\r\n\r\nHere is how I checked:\r\n\r\n```\r\nmake clean && ERL_COMPILER_OPTIONS='[no_line_info,deterministic,no_debug_info]' make\r\nfind ./src -name \"*.beam\" | parallel -q erl +S1:1 +A1 -eval '{ok, Info} = beam_lib:md5(\"{.}\"), erlang:display(Info), halt().' -noshell | sort > ~/before.txt\r\n\r\nmake erlfmt-format\r\n\r\nmake clean && ERL_COMPILER_OPTIONS='[no_line_info,deterministic,no_debug_info]' make\r\nfind ./src -name \"*.beam\" | parallel -q erl +S1:1 +A1 -eval '{ok, Info} = beam_lib:md5(\"{.}\"), erlang:display(Info), halt().' -noshell | sort > ~/after.txt\r\n```\r\n\r\nThen `diff ~/before.txt ~/after.txt` shows:\r\n```diff \r\n211,225c211,225\r\n< {cpse_test_attachments,<<32,25,9,124,163,35,187,202,214,210,132,184,163,74,73,179>>}\r\n< {cpse_test_compaction,<<101,38,195,12,75,77,87,202,240,161,250,204,110,248,71,110>>}\r\n< {cpse_test_copy_purge_infos,<<47,127,243,223,2,79,166,154,38,200,87,73,116,194,225,64>>}\r\n< {cpse_test_fold_changes,<<50,197,124,89,224,4,46,5,220,248,55,144,28,64,115,40>>}\r\n< {cpse_test_fold_docs,<<43,60,200,217,126,54,125,85,162,221,11,134,197,102,105,48>>}\r\n< {cpse_test_fold_purge_infos,<<27,194,58,15,217,95,193,128,174,34,222,230,171,138,1,166>>}\r\n< {cpse_test_get_set_props,<<112,179,149,148,59,229,78,8,57,90,6,254,135,141,155,223>>}\r\n< {cpse_test_open_close_delete,<<56,46,53,79,167,150,52,50,121,22,253,236,254,117,61,108>>}\r\n< {cpse_test_purge_bad_checkpoints,<<50,24,237,11,77,41,219,104,115,20,140,216,63,209,245,101>>}\r\n< {cpse_test_purge_docs,<<197,118,14,250,243,246,117,39,227,38,47,60,249,200,123,185>>}\r\n< {cpse_test_purge_replication,<<223,251,88,45,48,30,11,246,107,208,206,132,40,140,57,61>>}\r\n< {cpse_test_purge_seqs,<<185,199,181,60,122,56,35,149,82,12,89,236,18,181,38,253>>}\r\n< {cpse_test_read_write_docs,<<177,72,164,208,250,26,228,146,66,202,136,59,101,192,9,38>>}\r\n< {cpse_test_ref_counting,<<99,159,178,93,97,204,157,40,240,232,145,251,230,252,87,150>>}\r\n< {cpse_util,<<62,62,80,119,85,172,94,254,219,213,178,74,119,128,199,43>>}\r\n---\r\n> {cpse_test_attachments,<<126,232,228,57,83,74,64,233,206,238,197,92,38,36,2,1>>}\r\n> {cpse_test_compaction,<<120,143,229,186,93,62,31,175,56,76,170,116,218,223,96,5>>}\r\n> {cpse_test_copy_purge_infos,<<77,30,72,91,121,124,168,20,93,4,105,187,240,217,190,174>>}\r\n> {cpse_test_fold_changes,<<3,108,121,119,83,17,222,32,197,85,32,204,205,81,178,23>>}\r\n> {cpse_test_fold_docs,<<118,84,177,166,58,160,95,220,240,157,94,221,215,109,230,48>>}\r\n> {cpse_test_fold_purge_infos,<<143,11,107,83,251,39,129,20,52,14,62,235,195,118,187,198>>}\r\n> {cpse_test_get_set_props,<<234,30,106,58,164,155,27,78,182,186,177,208,199,35,128,186>>}\r\n> {cpse_test_open_close_delete,<<212,234,80,114,157,128,44,18,231,119,82,67,224,103,80,6>>}\r\n> {cpse_test_purge_bad_checkpoints,<<137,70,133,250,183,96,32,45,98,109,142,216,224,55,197,91>>}\r\n> {cpse_test_purge_docs,<<161,242,247,131,118,90,73,16,43,150,168,3,212,142,201,30>>}\r\n> {cpse_test_purge_replication,<<123,72,165,230,201,72,166,172,37,201,164,150,124,97,0,160>>}\r\n> {cpse_test_purge_seqs,<<148,206,102,200,218,77,245,77,189,219,112,213,44,51,33,199>>}\r\n> {cpse_test_read_write_docs,<<63,211,165,162,90,48,69,68,147,29,99,186,186,94,150,45>>}\r\n> {cpse_test_ref_counting,<<28,125,106,219,193,25,93,115,38,106,105,130,102,124,141,120>>}\r\n> {cpse_util,<<228,93,86,105,243,80,163,86,156,29,35,141,233,120,255,222>>}\r\n303,304c303,304\r\n< {fabric,<<198,135,105,254,155,119,170,7,189,215,95,10,198,189,123,160>>}\r\n< {fabric_db_create,<<30,226,125,178,189,5,218,6,200,201,143,231,191,40,132,220>>}\r\n---\r\n> {fabric,<<182,220,172,113,43,215,10,148,206,39,232,193,79,128,61,160>>}\r\n> {fabric_db_create,<<171,147,236,248,95,151,72,232,130,188,208,177,113,3,102,231>>}\r\n307c307\r\n< {fabric_db_info,<<31,123,22,228,209,80,156,92,111,21,202,24,142,216,64,240>>}\r\n---\r\n> {fabric_db_info,<<36,250,28,75,15,76,117,205,183,31,212,6,15,54,166,186>>}\r\n309c309\r\n< {fabric_db_partition_info,<<217,143,193,150,227,47,198,222,102,225,65,69,118,213,60,134>>}\r\n---\r\n> {fabric_db_partition_info,<<40,134,182,95,239,145,159,84,255,99,224,225,37,225,179,15>>}\r\n316,319c316,319\r\n< {fabric_doc_open,<<167,136,23,172,20,251,183,23,175,87,36,59,176,177,14,50>>}\r\n< {fabric_doc_open_revs,<<117,180,50,153,92,86,177,248,156,26,190,204,170,3,19,173>>}\r\n< {fabric_doc_purge,<<231,170,167,45,16,38,152,35,110,194,94,18,242,215,65,158>>}\r\n< {fabric_doc_update,<<200,239,189,239,234,73,166,177,117,196,55,130,62,155,71,75>>}\r\n---\r\n> {fabric_doc_open,<<184,48,88,22,71,179,139,160,22,250,175,42,175,134,9,91>>}\r\n> {fabric_doc_open_revs,<<6,65,83,254,170,173,222,94,65,194,33,215,228,150,11,134>>}\r\n> {fabric_doc_purge,<<149,201,86,61,190,213,179,201,237,217,164,31,38,225,206,71>>}\r\n> {fabric_doc_update,<<243,242,251,177,118,38,231,95,16,17,193,247,28,217,158,183>>}\r\n321,325c321,325\r\n< {fabric_ring,<<171,181,76,126,121,155,222,2,231,130,48,71,240,124,168,162>>}\r\n< {fabric_rpc,<<184,167,56,17,99,212,167,217,68,97,252,26,137,78,212,95>>}\r\n< {fabric_streams,<<24,71,21,17,245,180,171,97,12,235,63,122,2,7,107,102>>}\r\n< {fabric_util,<<63,97,128,69,134,203,161,184,37,233,233,113,122,35,205,14>>}\r\n< {fabric_view,<<79,190,100,92,126,44,153,41,178,80,166,227,136,180,71,160>>}\r\n---\r\n> {fabric_ring,<<208,24,56,143,160,164,124,146,198,153,243,158,42,145,203,111>>}\r\n> {fabric_rpc,<<119,18,139,252,114,13,65,73,101,236,42,135,152,103,82,111>>}\r\n> {fabric_streams,<<143,225,16,24,206,65,221,15,174,138,240,229,112,194,63,36>>}\r\n> {fabric_util,<<123,183,80,115,207,239,3,100,224,64,224,18,36,0,243,173>>}\r\n> {fabric_view,<<20,65,235,70,163,183,132,23,241,197,118,217,60,53,70,31>>}\r\n327c327\r\n< {fabric_view_changes,<<217,32,69,240,79,74,15,220,10,197,44,188,14,109,56,136>>}\r\n---\r\n> {fabric_view_changes,<<216,98,16,160,120,27,130,203,45,113,217,245,41,247,5,142>>}\r\n403c403\r\n< {mango_cursor_view,<<235,43,150,186,111,132,93,87,21,233,238,51,190,149,182,130>>}\r\n---\r\n> {mango_cursor_view,<<166,236,218,230,208,36,240,223,107,201,123,9,183,158,219,66>>}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974607093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974709781","html_url":"https://github.com/apache/couchdb/issues/2008#issuecomment-974709781","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2008","id":974709781,"node_id":"IC_kwDOAAMmUc46GOQV","user":{"login":"nevans","id":6142,"node_id":"MDQ6VXNlcjYxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/6142?v=4","gravatar_id":"","url":"https://api.github.com/users/nevans","html_url":"https://github.com/nevans","followers_url":"https://api.github.com/users/nevans/followers","following_url":"https://api.github.com/users/nevans/following{/other_user}","gists_url":"https://api.github.com/users/nevans/gists{/gist_id}","starred_url":"https://api.github.com/users/nevans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nevans/subscriptions","organizations_url":"https://api.github.com/users/nevans/orgs","repos_url":"https://api.github.com/users/nevans/repos","events_url":"https://api.github.com/users/nevans/events{/privacy}","received_events_url":"https://api.github.com/users/nevans/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T20:51:57Z","updated_at":"2021-11-20T20:51:57Z","author_association":"NONE","body":"Fixed? 🎉 🥳 🎉 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974709781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974716111","html_url":"https://github.com/apache/couchdb/issues/2008#issuecomment-974716111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2008","id":974716111,"node_id":"IC_kwDOAAMmUc46GPzP","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T21:47:45Z","updated_at":"2021-11-20T21:47:45Z","author_association":"MEMBER","body":"Better late than never!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/974716111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/975776825","html_url":"https://github.com/apache/couchdb/pull/3568#issuecomment-975776825","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3568","id":975776825,"node_id":"IC_kwDOAAMmUc46KSw5","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T17:54:21Z","updated_at":"2021-11-22T17:54:21Z","author_association":"CONTRIBUTOR","body":"I had attempted to format the `3.x` [branch](https://github.com/apache/couchdb/pull/3837). It has a lot more files than `main` (500+)\r\n\r\nAs a fun experiment I had performed a beam-level check too. As mentioned above by @rnewson, it did lead to [false positives](https://github.com/apache/couchdb/pull/3837#issuecomment-974607093) as `3.x` fabric imports `eunit.hrl`, which uses `?LINE` macros. Then, any module which imports from `fabric.hrl` and has tests or asserts in it, had failed the check.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/975776825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/975939374","html_url":"https://github.com/apache/couchdb/pull/3837#issuecomment-975939374","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3837","id":975939374,"node_id":"IC_kwDOAAMmUc46K6cu","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T21:34:41Z","updated_at":"2021-11-22T21:34:41Z","author_association":"MEMBER","body":"+1. Mind that I did not review the formatting itself, only the companion code.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/975939374/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/976674086","html_url":"https://github.com/apache/couchdb/pull/3842#issuecomment-976674086","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3842","id":976674086,"node_id":"IC_kwDOAAMmUc46Nt0m","user":{"login":"lostnet","id":1422781,"node_id":"MDQ6VXNlcjE0MjI3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1422781?v=4","gravatar_id":"","url":"https://api.github.com/users/lostnet","html_url":"https://github.com/lostnet","followers_url":"https://api.github.com/users/lostnet/followers","following_url":"https://api.github.com/users/lostnet/following{/other_user}","gists_url":"https://api.github.com/users/lostnet/gists{/gist_id}","starred_url":"https://api.github.com/users/lostnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostnet/subscriptions","organizations_url":"https://api.github.com/users/lostnet/orgs","repos_url":"https://api.github.com/users/lostnet/repos","events_url":"https://api.github.com/users/lostnet/events{/privacy}","received_events_url":"https://api.github.com/users/lostnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T15:00:37Z","updated_at":"2021-11-23T15:36:23Z","author_association":"CONTRIBUTOR","body":"I don't see how the erlfdb test failure relates to the PR. If this is from [fdb errors](https://apple.github.io/foundationdb/api-error-codes.html) it is `key_outside_legal_range` which apparently could make sense with a random key since some keys are special ~~but it is highly unlikely to happen with multiple runs if they are getting different random seeds?~~ (I think I misread the results and the error seems to only have occur in one actual 23.3.1 run.)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/976674086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/976795493","html_url":"https://github.com/apache/couchdb/pull/3842#issuecomment-976795493","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3842","id":976795493,"node_id":"IC_kwDOAAMmUc46OLdl","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T16:21:09Z","updated_at":"2021-11-23T16:21:09Z","author_association":"CONTRIBUTOR","body":"@lostnet Thanks for your contribution!\r\n\r\nI believe you just hit a spurious bug in erlfdb. That when we generate random keys and value to add but forgot guard against writing to \\xFF range.\r\n\r\nI had created an issue to fix it https://github.com/apache/couchdb-erlfdb/issues/46\r\n\r\nRe-triggered your PR and now it passed ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/976795493/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/977748665","html_url":"https://github.com/apache/couchdb/issues/1254#issuecomment-977748665","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1254","id":977748665,"node_id":"IC_kwDOAAMmUc46R0K5","user":{"login":"cslobodan","id":42570935,"node_id":"MDQ6VXNlcjQyNTcwOTM1","avatar_url":"https://avatars.githubusercontent.com/u/42570935?v=4","gravatar_id":"","url":"https://api.github.com/users/cslobodan","html_url":"https://github.com/cslobodan","followers_url":"https://api.github.com/users/cslobodan/followers","following_url":"https://api.github.com/users/cslobodan/following{/other_user}","gists_url":"https://api.github.com/users/cslobodan/gists{/gist_id}","starred_url":"https://api.github.com/users/cslobodan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cslobodan/subscriptions","organizations_url":"https://api.github.com/users/cslobodan/orgs","repos_url":"https://api.github.com/users/cslobodan/repos","events_url":"https://api.github.com/users/cslobodan/events{/privacy}","received_events_url":"https://api.github.com/users/cslobodan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T10:37:31Z","updated_at":"2021-11-24T10:37:31Z","author_association":"NONE","body":"@glynnbird Wow, that is how feature requests should be described. This is exactly what I'm missing in Mango queries. Too bad this was left in an imaginary world...\r\n@garrensmith This is the oldest feature request in the \"Proposed (backlog)\" section of Roadmap. Hope it will be worked on soon. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/977748665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/978797637","html_url":"https://github.com/apache/couchdb/pull/3845#issuecomment-978797637","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3845","id":978797637,"node_id":"IC_kwDOAAMmUc46V0RF","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T03:42:12Z","updated_at":"2021-11-25T18:51:49Z","author_association":"CONTRIBUTOR","body":"@kocolosk thanks for taking a look.\r\n\r\nGood idea to link to the PRs which introduced the functions. The PRs are:\r\n\r\n * [is_max_utf8_marker](https://github.com/apache/couchdb/pull/3491)\r\n * [get_icu_version and get_uca_version](https://github.com/apache/couchdb/pull/3798)\r\n * [compare_strings_nif](https://github.com/apache/couchdb/pull/3746)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/978797637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/978945337","html_url":"https://github.com/apache/couchdb/issues/850#issuecomment-978945337","issue_url":"https://api.github.com/repos/apache/couchdb/issues/850","id":978945337,"node_id":"IC_kwDOAAMmUc46WYU5","user":{"login":"fne","id":6025622,"node_id":"MDQ6VXNlcjYwMjU2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6025622?v=4","gravatar_id":"","url":"https://api.github.com/users/fne","html_url":"https://github.com/fne","followers_url":"https://api.github.com/users/fne/followers","following_url":"https://api.github.com/users/fne/following{/other_user}","gists_url":"https://api.github.com/users/fne/gists{/gist_id}","starred_url":"https://api.github.com/users/fne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fne/subscriptions","organizations_url":"https://api.github.com/users/fne/orgs","repos_url":"https://api.github.com/users/fne/repos","events_url":"https://api.github.com/users/fne/events{/privacy}","received_events_url":"https://api.github.com/users/fne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T08:27:34Z","updated_at":"2021-11-25T08:27:34Z","author_association":"NONE","body":"Hello i m facing the same issue on couchdb version 2.3.1 with admin role","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/978945337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979229317","html_url":"https://github.com/apache/couchdb/issues/2908#issuecomment-979229317","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2908","id":979229317,"node_id":"IC_kwDOAAMmUc46XdqF","user":{"login":"saurabhprasadsah","id":42804047,"node_id":"MDQ6VXNlcjQyODA0MDQ3","avatar_url":"https://avatars.githubusercontent.com/u/42804047?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabhprasadsah","html_url":"https://github.com/saurabhprasadsah","followers_url":"https://api.github.com/users/saurabhprasadsah/followers","following_url":"https://api.github.com/users/saurabhprasadsah/following{/other_user}","gists_url":"https://api.github.com/users/saurabhprasadsah/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabhprasadsah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabhprasadsah/subscriptions","organizations_url":"https://api.github.com/users/saurabhprasadsah/orgs","repos_url":"https://api.github.com/users/saurabhprasadsah/repos","events_url":"https://api.github.com/users/saurabhprasadsah/events{/privacy}","received_events_url":"https://api.github.com/users/saurabhprasadsah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T13:47:18Z","updated_at":"2021-11-25T13:47:18Z","author_association":"NONE","body":"{\"error\":\"unauthorized\",\"reason\":\"You are not authorized to access this db.\"}..but authorisation will be correct","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979229317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979230608","html_url":"https://github.com/apache/couchdb/issues/3847#issuecomment-979230608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3847","id":979230608,"node_id":"IC_kwDOAAMmUc46Xd-Q","user":{"login":"saurabhprasadsah","id":42804047,"node_id":"MDQ6VXNlcjQyODA0MDQ3","avatar_url":"https://avatars.githubusercontent.com/u/42804047?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabhprasadsah","html_url":"https://github.com/saurabhprasadsah","followers_url":"https://api.github.com/users/saurabhprasadsah/followers","following_url":"https://api.github.com/users/saurabhprasadsah/following{/other_user}","gists_url":"https://api.github.com/users/saurabhprasadsah/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabhprasadsah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabhprasadsah/subscriptions","organizations_url":"https://api.github.com/users/saurabhprasadsah/orgs","repos_url":"https://api.github.com/users/saurabhprasadsah/repos","events_url":"https://api.github.com/users/saurabhprasadsah/events{/privacy}","received_events_url":"https://api.github.com/users/saurabhprasadsah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T13:49:05Z","updated_at":"2021-11-25T13:49:05Z","author_association":"NONE","body":"i{\"error\":\"unauthorized\",\"reason\":\"You are not authorized to access this db.\"}..i will be pass the same auth but not runnning in the database","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979230608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979421169","html_url":"https://github.com/apache/couchdb/pull/3845#issuecomment-979421169","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3845","id":979421169,"node_id":"IC_kwDOAAMmUc46YMfx","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T18:46:58Z","updated_at":"2021-11-25T18:46:58Z","author_association":"CONTRIBUTOR","body":"+1 from me as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/979421169/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/982447514","html_url":"https://github.com/apache/couchdb/issues/3838#issuecomment-982447514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3838","id":982447514,"node_id":"IC_kwDOAAMmUc46jvWa","user":{"login":"lostnet","id":1422781,"node_id":"MDQ6VXNlcjE0MjI3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1422781?v=4","gravatar_id":"","url":"https://api.github.com/users/lostnet","html_url":"https://github.com/lostnet","followers_url":"https://api.github.com/users/lostnet/followers","following_url":"https://api.github.com/users/lostnet/following{/other_user}","gists_url":"https://api.github.com/users/lostnet/gists{/gist_id}","starred_url":"https://api.github.com/users/lostnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostnet/subscriptions","organizations_url":"https://api.github.com/users/lostnet/orgs","repos_url":"https://api.github.com/users/lostnet/repos","events_url":"https://api.github.com/users/lostnet/events{/privacy}","received_events_url":"https://api.github.com/users/lostnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T09:28:15Z","updated_at":"2021-11-30T09:28:15Z","author_association":"CONTRIBUTOR","body":"Hi @arekdygas ,\r\n\r\nThe issue of pkg-config and icu has come up on the dev list and a solution to get past the configure stage by installing a version and setting pkg_config_path is [here](https://lists.apache.org/thread/of03pwwztv3d1fhkjxbnrmcp7m0bvp80)\r\n\r\nAs discussed in that thread pkg-config is not actually producing useful options for the lld_linker on windows. Based on another solution from that discussion, I'm currently building esr78 and esr91 in GH workflows with this environmental variable:\r\n\r\n`LDFLAGS: \"/LIBPATH:C:\\\\vcpkg\\\\installed\\\\x64-windows\\\\lib /LIBPATH:C:\\\\vcpkg\\\\installed\\\\x64-windows\\\\bin icuin.lib icudt.lib icuuc.lib\"`\r\n\r\nI think that could be adapted and put in glazier's shell1.ps as: \r\n\r\n`$env:LDFLAGS = \"/LIBPATH:C:\\relax\\vcpkg\\installed\\x64-windows\\lib /LIBPATH:C:\\relax\\vcpkg\\installed\\x64-windows\\bin icuin.lib icudt.lib icuuc.lib\" + $env:LDFLAGS`\r\n\r\nDiscussions on the rest of the process for releasing 3.2.1 for windows are going to continue in slack and will probably lead to some updates to couchdb-glazier..\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/982447514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/982464029","html_url":"https://github.com/apache/couchdb/issues/3838#issuecomment-982464029","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3838","id":982464029,"node_id":"IC_kwDOAAMmUc46jzYd","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T09:47:55Z","updated_at":"2021-11-30T09:47:55Z","author_association":"NONE","body":"Hi @lostnet ,\r\n\r\nThanks a lot for tips! About 10 minutes ago I was able to build CouchDB, using a slightly different approach. I had the same problems as @big-r81 had, related to ICU, but I decided to cheat the system a bit, and compiled with --with-system-icu flag, but wrote my own pkg-config tool, which returned working linker flags. Anyway - I'm about running tests, and if all works, I'll continue on Slack.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/982464029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984389193","html_url":"https://github.com/apache/couchdb/issues/2054#issuecomment-984389193","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2054","id":984389193,"node_id":"IC_kwDOAAMmUc46rJZJ","user":{"login":"Rjayavasge","id":89920443,"node_id":"MDQ6VXNlcjg5OTIwNDQz","avatar_url":"https://avatars.githubusercontent.com/u/89920443?v=4","gravatar_id":"","url":"https://api.github.com/users/Rjayavasge","html_url":"https://github.com/Rjayavasge","followers_url":"https://api.github.com/users/Rjayavasge/followers","following_url":"https://api.github.com/users/Rjayavasge/following{/other_user}","gists_url":"https://api.github.com/users/Rjayavasge/gists{/gist_id}","starred_url":"https://api.github.com/users/Rjayavasge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rjayavasge/subscriptions","organizations_url":"https://api.github.com/users/Rjayavasge/orgs","repos_url":"https://api.github.com/users/Rjayavasge/repos","events_url":"https://api.github.com/users/Rjayavasge/events{/privacy}","received_events_url":"https://api.github.com/users/Rjayavasge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T08:16:36Z","updated_at":"2021-12-02T08:16:36Z","author_association":"NONE","body":"H Wohali,\r\nStill getting the error,\r\n{\"error\":\"setup_error\",\"reason\":\"Cluster setup timed out waiting for nodes to connect\"}\r\n\r\nConfigured the ad guideline.\r\nPlease support\r\n\r\nRegards\r\nRuwan\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984389193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984979868","html_url":"https://github.com/apache/couchdb/issues/3847#issuecomment-984979868","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3847","id":984979868,"node_id":"IC_kwDOAAMmUc46tZmc","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T20:33:49Z","updated_at":"2021-12-02T20:33:49Z","author_association":"CONTRIBUTOR","body":"Without more details and steps to reproduce it's hard to say what the issue is. `You are not authorized to access this db.` is a generic security ( authz ) error thrown.\r\n\r\nPlease review https://docs.couchdb.org/en/stable/intro/security.html it might help solve the issue.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984979868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984980576","html_url":"https://github.com/apache/couchdb/issues/3850#issuecomment-984980576","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3850","id":984980576,"node_id":"IC_kwDOAAMmUc46tZxg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T20:34:57Z","updated_at":"2021-12-02T20:34:57Z","author_association":"CONTRIBUTOR","body":"I don't know what client library that is. Try to reproduce the issue with curl on the command line and provide few more detailed steps (a script would be ideal).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/984980576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985089867","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-985089867","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":985089867,"node_id":"IC_kwDOAAMmUc46t0dL","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T23:39:35Z","updated_at":"2021-12-02T23:39:35Z","author_association":"CONTRIBUTOR","body":"What exactly are you using in vm.args? The file that ships with CouchDB has these lines:\r\n```\r\n#-proto_dist couch\r\n#-couch_dist no_tls \\\"clouseau@127.0.0.1\\\"\r\n#-ssl_dist_optfile <path/to/couch_ssl_dist.conf>\r\n```\r\nwhich I assume you uncommented, and added an actual value for `ssl_dist_optfile`.\r\n\r\nHowever, you report above the following:\r\n```\r\n-proto_dist couch\r\n-couch_dist no_tls \"clouseau@127.0.0.1\"\r\n-ssl_dist_optfile xxx\r\n```\r\nwhere `\"clouseau@127.0.0.1\"` does not contain backslashes.\r\n\r\nThe fun thing is that neither will work with recent versions of Erlang. What version are you using?\r\n\r\nYou will probably need to do something like\r\n```\r\n-couch_dist no_tls '\"clouseau@127.0.0.1\"'\r\n-ssl_dist_optfile '\"path/to/couch_ssl_dist.conf\"'\r\n```\r\nnote the single quotes wrapping the double quotes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985089867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985281755","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-985281755","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":985281755,"node_id":"IC_kwDOAAMmUc46ujTb","user":{"login":"jiahuili430","id":54631519,"node_id":"MDQ6VXNlcjU0NjMxNTE5","avatar_url":"https://avatars.githubusercontent.com/u/54631519?v=4","gravatar_id":"","url":"https://api.github.com/users/jiahuili430","html_url":"https://github.com/jiahuili430","followers_url":"https://api.github.com/users/jiahuili430/followers","following_url":"https://api.github.com/users/jiahuili430/following{/other_user}","gists_url":"https://api.github.com/users/jiahuili430/gists{/gist_id}","starred_url":"https://api.github.com/users/jiahuili430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiahuili430/subscriptions","organizations_url":"https://api.github.com/users/jiahuili430/orgs","repos_url":"https://api.github.com/users/jiahuili430/repos","events_url":"https://api.github.com/users/jiahuili430/events{/privacy}","received_events_url":"https://api.github.com/users/jiahuili430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T07:35:22Z","updated_at":"2021-12-03T15:24:04Z","author_association":"CONTRIBUTOR","body":"## Reproduce Error\r\nI am not sure what the `xxx` in `-ssl_dist_optfile xxx` is, so I cannot reproduce the error.\r\nUsually, we want to use the absolute path for configuration file `couch_ssl_dist.conf`.\r\nI also tried `-couch_dist no_tls \\\"clouseau@127.0.0.1\\\"` and `-couch_dist no_tls '\"clouseau@127.0.0.1\"'`, and they are all working.\r\n\r\n## Why use `-proto_dist couch` instead of `-proto_dist inet_tls`?\r\nIf use `inet_tls`, all nodes will only use TLS. We cannot specify some nodes to use TLS and some nodes to use TCP.\r\nTCP is needed for `clouseau@127.0.0.1`, which is related to the [search feature](https://docs.couchdb.com/en/latest/ddocs/search.html?highlight=clouseau).\r\n\r\n**My Environment:**\r\n- CouchDB version used: 3.2\r\n- Operating system and version: MacOS Monterey 12.0.1\r\n- erlang 23.3.1, elixir 1.9.4\r\n\r\n## How to use `TLS Erlang Distribution`\r\nThere are two modes: local development and release.\r\nThe command to connect to the `remsh` is different.\r\n\r\n\r\n### Local Development\r\n1. Generate`erlserver.pem` and `couch_ssl_dist.conf` in `/dev/` folder\r\n```\r\ngit clone https://github.com/apache/couchdb.git couchdb\r\ncd couchdb/\r\ngit checkout 3.x\r\n./configure --dev --generate-tls-dev-cert\r\n```\r\n2. Change `vm.args`\r\n```\r\ncd rel/overlay/etc/\r\nvi vm.args\r\n```\r\nUncomment the following parameters.\r\n- Please use the absolute path of the couch_ssl_dist.conf file, for example: `/Users/<username>/couchdb/dev/couch_ssl_dist.conf`\r\n```\r\n-proto_dist couch\r\n-couch_dist no_tls \\\"clouseau@127.0.0.1\\\"\r\n-ssl_dist_optfile /Users/<username>/couchdb/dev/couch_ssl_dist.conf\r\n```\r\n- If we want to use TCP for node1 and TLS for node2 and node3, add the following parameter in `vm.args`.\r\n```\r\n-couch_dist no_tls \\\"node1@127.0.0.1\\\"\r\n```\r\n3. Compile and Run CouchDB\r\n```\r\ncd ../../../\r\nmake\r\n./dev/run --admin=adm:pass \r\n```\r\n4. Connect to Remsh to Verify\r\n\r\nOpen another terminal\r\n```\r\ncd couchdb\r\n./dev/remsh\r\n```\r\nFor node1's remsh (**TCP**), enter `net_kernel:nodes_info().`, you'll see the following information:\r\n```\r\n(node1@127.0.0.1)1> net_kernel:nodes_info().\r\n{ok,[{'node2@127.0.0.1',\r\n         [{owner,<0.876.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49423},\"127.0.0.1\",tls,inet}},\r\n          {type,normal},\r\n          {in,247},\r\n          {out,279}]},\r\n     {'node3@127.0.0.1',\r\n         [{owner,<0.897.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49424},\"127.0.0.1\",tls,inet}},\r\n          {type,normal},\r\n          {in,246},\r\n          {out,250}]},\r\n     {'remsh3451@127.0.0.1',\r\n         [{owner,<0.3956.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49495},\"127.0.0.1\",tcp,inet}},\r\n          {type,hidden},\r\n          {in,7},\r\n          {out,13}]}]}\r\n```\r\nFor node2's remsh (**TLS**):\r\nOpen another terminal, and type\r\n```\r\ncd couchdb\r\nNODE=2 ./dev/remsh-tls\r\n```\r\nYou'll see the following information:\r\n```\r\n(node2@127.0.0.1)1> net_kernel:nodes_info().\r\n{ok,[{'node1@127.0.0.1',\r\n         [{owner,<0.877.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49441},\"127.0.0.1\",tls,inet}},\r\n          {type,normal},\r\n          {in,286},\r\n          {out,274}]},\r\n     {'node3@127.0.0.1',\r\n         [{owner,<0.934.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49424},\"127.0.0.1\",tls,inet}},\r\n          {type,normal},\r\n          {in,265},\r\n          {out,331}]},\r\n     {' remsh3652@127.0.0.1',\r\n         [{owner,<0.9630.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49541},\"127.0.0.1\",tls,inet}},\r\n          {type,hidden},\r\n          {in,15},\r\n          {out,22}]}]}\r\n```\r\n\r\n\r\n### For Release\r\n1. Follow the same steps 1,2,3 for local development\r\n```\r\ngit clone https://github.com/apache/couchdb.git couchdb\r\ncd couchdb/\r\ngit checkout 3.x\r\n./configure --dev --generate-tls-dev-cert\r\n\r\ncd rel/overlay/etc/\r\nvi vm.args\r\n```\r\nUncomment the following parameters:\r\n```\r\n-proto_dist couch\r\n-couch_dist no_tls \\\"clouseau@127.0.0.1\\\"\r\n-ssl_dist_optfile /Users/<username>/couchdb/dev/couch_ssl_dist.conf\r\n```\r\nCompile CouchDB\r\n```\r\ncd ../../../\r\nmake\r\n```\r\n2. Build the release\r\n```\r\nmake release\r\n```\r\n3. Add `adm = pass` in the `[admins]` section of the `local.ini` file\r\n```\r\ncd rel/couchdb/etc\r\nvi local.ini\r\n```\r\n4. Run CouchDB and Connect to Remsh to Verify\r\n```\r\ncd ../\r\n./bin/couchdb\r\n```\r\nOpen another terminal\r\n```\r\ncd couchdb/rel/couchdb/\r\n./bin/remsh -t /Users/<username>/src/couchdb/dev/couch_ssl_dist.conf\r\n```\r\n```\r\n(couchdb@127.0.0.1)1> net_kernel:nodes_info().\r\n{ok,[{'remsh7166@127.0.0.1',\r\n         [{owner,<0.2612.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},49937},\"127.0.0.1\",tls,inet}},\r\n          {type,hidden},\r\n          {in,10},\r\n          {out,15}]}]}\r\n```\r\nIf the Clouseau instance is connected to the cluster, the response will be as follows:\r\n```\r\n(couchdb@127.0.0.1)1> net_kernel:nodes_info().\r\n{ok,[{'remsh11163@127.0.0.1',\r\n         [{owner,<0.848.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},51268},\"127.0.0.1\",tls,inet}},\r\n          {type,hidden},\r\n          {in,10},\r\n          {out,15}]},\r\n     {'clouseau@127.0.0.1',\r\n         [{owner,<0.812.0>},\r\n          {state,up},\r\n          {address,\r\n              {net_address,{{127,0,0,1},51260},\"127.0.0.1\",tcp,inet}},\r\n          {type,hidden},\r\n          {in,4},\r\n          {out,5}]}]}\r\n```\r\n## References\r\n\r\n- Related PR: https://github.com/apache/couchdb/pull/3643\r\n- CouchDB TLS Erlang Distribution: https://docs.couchdb.com/en/latest/cluster/tls_erlang_distribution.html\r\n- CouchDB Search: https://docs.couchdb.com/en/latest/ddocs/search.html\r\n- Using TLS for Erlang Distribution: https://www.erlang.org/doc/apps/ssl/ssl_distribution.html\r\n- How to Implement an Alternative Carrier for the Erlang Distribution: https://www.erlang.org/doc/apps/erts/alt_dist.html\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985281755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985757311","html_url":"https://github.com/apache/couchdb/pull/3857#issuecomment-985757311","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3857","id":985757311,"node_id":"IC_kwDOAAMmUc46wXZ_","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T19:02:11Z","updated_at":"2021-12-03T19:02:11Z","author_association":"CONTRIBUTOR","body":"Wonder if it would make sense to add/move some functions to it as it seems a bit odd to commit an empty application. Or, do you think it's better to first have the app first, then plan on moving helper functions into it?\r\n\r\nJust afraid most committers won't even know about it and will just keep adding functions to `couch_util` and the app will just stay empty for quite a while.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985757311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985759722","html_url":"https://github.com/apache/couchdb/pull/3857#issuecomment-985759722","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3857","id":985759722,"node_id":"IC_kwDOAAMmUc46wX_q","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T19:05:59Z","updated_at":"2021-12-03T19:05:59Z","author_association":"CONTRIBUTOR","body":"> Wonder if it would make sense to add/move some functions to it as it seems a bit odd to commit an empty application. Or, do you think it's better to first have the app first, then plan on moving helper functions into it?\r\n> \r\n> Just afraid most committers won't even know about it and will just keep adding functions to `couch_util` and the app will just stay empty for quite a while.\r\n\r\nThe original PR https://github.com/apache/couchdb/pull/3529 contained some functions.\r\n\r\n- `couch_lib_parse:parse_boolean/1` - parses given string or binary into Erlang's `boolean()` type\r\n- `couch_lib_parse:parse_integer/1` - parses given string as Erlang's `integer()` type\r\n- `couch_lib_parse:parse_non_neg_integer/1` - parses given string as Erlang's `non_neg_integer()` type (`[0..infinity)`)\r\n\r\n However I was afraid pulling them here since there is no immediate need in them. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985759722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985875126","html_url":"https://github.com/apache/couchdb/pull/3857#issuecomment-985875126","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3857","id":985875126,"node_id":"IC_kwDOAAMmUc46w0K2","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T22:07:22Z","updated_at":"2021-12-03T22:07:22Z","author_association":"MEMBER","body":"There is nothing in couch_lib, what is the value of this work?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985875126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985885790","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-985885790","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":985885790,"node_id":"IC_kwDOAAMmUc46w2xe","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T22:30:03Z","updated_at":"2021-12-03T22:30:03Z","author_association":"CONTRIBUTOR","body":"@jiahuili430 Thanks for great instructions how to set everything up!\r\n\r\nI was able to reproduce the issue:\r\n\r\n```\r\napache-couchdb-3.2.1/rel/couchdb  % ./bin/couchdb\r\n2021-12-03 16:25:10 application_controller: ~ts: ~ts~n\r\n        [\"syntax error before: \",\"'.'\"]\r\n        \"clouseau@127.0.0.1\"\r\nProtocol 'couch': not supported\r\n```\r\n\r\nAnd just like @jaydoane mentioned this most likely happens because of the difference in parsing between Erlang versions. I used Erlang 20 to reproduce the issue.\r\n\r\nIt could be that we'd just document that unfortunately Erlang 20 doesn't work for this custom TLS module and only users who compile against Erlang 22 or so would be able to use this feature.\r\n\r\nUnfortunately even `-ssl_dist_optfile '\"path/to/couch_ssl_dist.conf\"'` didn't seem to solve the issue.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985885790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985999286","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-985999286","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":985999286,"node_id":"IC_kwDOAAMmUc46xSe2","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T09:37:53Z","updated_at":"2021-12-04T09:37:53Z","author_association":"MEMBER","body":"hmmm but we (cloudant) had this running with erlang 19 (or earlier). is there a bug/issue from OTP around this apparent change to the parsing mechanism for vm.args?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/985999286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986137633","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-986137633","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":986137633,"node_id":"IC_kwDOAAMmUc46x0Qh","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T23:55:12Z","updated_at":"2021-12-04T23:55:12Z","author_association":"CONTRIBUTOR","body":"> hmmm but we (cloudant) had this running with erlang 19 (or earlier). is there a bug/issue from OTP around this apparent change to the parsing mechanism for vm.args?\r\n\r\nNot definitive, but @chewbranca found this [parsing change in erlexec.c](https://github.com/erlang/otp/issues/3859) which seems to have been introduced in OTP 22.1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986137633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986753552","html_url":"https://github.com/apache/couchdb/pull/3728#issuecomment-986753552","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3728","id":986753552,"node_id":"IC_kwDOAAMmUc460KoQ","user":{"login":"AltenTMAOrion","id":43345087,"node_id":"MDQ6VXNlcjQzMzQ1MDg3","avatar_url":"https://avatars.githubusercontent.com/u/43345087?v=4","gravatar_id":"","url":"https://api.github.com/users/AltenTMAOrion","html_url":"https://github.com/AltenTMAOrion","followers_url":"https://api.github.com/users/AltenTMAOrion/followers","following_url":"https://api.github.com/users/AltenTMAOrion/following{/other_user}","gists_url":"https://api.github.com/users/AltenTMAOrion/gists{/gist_id}","starred_url":"https://api.github.com/users/AltenTMAOrion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AltenTMAOrion/subscriptions","organizations_url":"https://api.github.com/users/AltenTMAOrion/orgs","repos_url":"https://api.github.com/users/AltenTMAOrion/repos","events_url":"https://api.github.com/users/AltenTMAOrion/events{/privacy}","received_events_url":"https://api.github.com/users/AltenTMAOrion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T13:01:51Z","updated_at":"2021-12-06T13:01:51Z","author_association":"NONE","body":"Hello, \r\n\r\nDo you have any ideas on a date of integration for this patch? \r\nWe are stuck on couchdb 2.3.1 because of the performance on the map/ reduce design, as our application is mainly based on this feature \r\n\r\nThank","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986753552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986918342","html_url":"https://github.com/apache/couchdb/pull/3861#issuecomment-986918342","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3861","id":986918342,"node_id":"IC_kwDOAAMmUc460y3G","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T16:07:06Z","updated_at":"2021-12-06T16:07:06Z","author_association":"CONTRIBUTOR","body":"Would this also apply when we clear the session on a failed login in https://github.com/apache/couchdb/blob/b59d65e68fa22f8562d84e575f36c6035f303130/src/couch/src/couch_httpd_auth.erl#L448-L451","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/986918342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/987336749","html_url":"https://github.com/apache/couchdb/issues/3821#issuecomment-987336749","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3821","id":987336749,"node_id":"IC_kwDOAAMmUc462ZAt","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T23:03:56Z","updated_at":"2021-12-06T23:03:56Z","author_association":"CONTRIBUTOR","body":"I think there are two separate issues with Erlang 20 - the parsing issue found by @jaydoane and there was another API issue where the dist API had changed and we didn't account for the old version.\r\n\r\nMade a PR to fix it https://github.com/apache/couchdb/pull/3863","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/987336749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/987928679","html_url":"https://github.com/apache/couchdb/issues/3535#issuecomment-987928679","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3535","id":987928679,"node_id":"IC_kwDOAAMmUc464phn","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-07T13:31:10Z","updated_at":"2021-12-07T13:31:10Z","author_association":"MEMBER","body":"@thigg are you planning to submit a PR here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/987928679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988096987","html_url":"https://github.com/apache/couchdb/pull/3864#issuecomment-988096987","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3864","id":988096987,"node_id":"IC_kwDOAAMmUc465Snb","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-07T16:45:40Z","updated_at":"2021-12-07T16:45:40Z","author_association":"MEMBER","body":"What does the `apps_dirs` setting do?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988096987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988205375","html_url":"https://github.com/apache/couchdb/issues/3535#issuecomment-988205375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3535","id":988205375,"node_id":"IC_kwDOAAMmUc465tE_","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-07T19:26:24Z","updated_at":"2021-12-07T19:26:24Z","author_association":"NONE","body":"No, unfortunately not.\r\nWe will just have a proxy in front which checks the authentication separately and blocks unwanted access, thus this risk is mitigated for us anyway.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988205375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988333229","html_url":"https://github.com/apache/couchdb/pull/3864#issuecomment-988333229","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3864","id":988333229,"node_id":"IC_kwDOAAMmUc466MSt","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-07T23:18:34Z","updated_at":"2021-12-07T23:40:54Z","author_association":"CONTRIBUTOR","body":"@kocolosk I think it's for \"umbrella\" apps,  like what we have with our top level applications https://erlang-ls.github.io/configuration/#rebar3-umbrella-project\r\n\r\nBut I am not entirely sure what the difference is between deps and apps is, though. They seems to be doing largely the same thing. \r\n\r\nWith this setting go to definition, find references,  \"times used\" and such seems to work within emacs across apps \r\n<img width=\"550\" alt=\"Screen Shot 2021-12-07 at 6 17 48 PM\" src=\"https://user-images.githubusercontent.com/211822/145120867-ac540287-7cff-41fd-8c34-443f786f7f4b.png\">\r\n\r\nAlso, I couldn't get the `Spec suggestions` lens to work.  To remove the annoying prompts I can disable it with:\r\n```diff\r\n+lenses:\r\n+  disabled:\r\n+    - suggest-spec\r\n```\r\nShould we add it by default, or am I the only one seeing it?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988333229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988406371","html_url":"https://github.com/apache/couchdb/pull/3864#issuecomment-988406371","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3864","id":988406371,"node_id":"IC_kwDOAAMmUc466eJj","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T01:23:04Z","updated_at":"2021-12-08T01:23:04Z","author_association":"MEMBER","body":"Yes, understood. I was being too terse, sorry. I was wanting to understand if that setting was fixing some \"include issues\". For some reason when I added this config file to the `main` branch in #3343 I did use the correct list of `include_dirs`, but I hadn't found a reason to set `apps_dirs`.\r\n\r\n+1 to disabling `suggest-spec`. I was having problems with `typer` crashing, and I've seen some other reports of that happening as well. I also found it distracting.\r\n\r\nI might also suggest disabling the `function-references` lens. The \"Used N times\" link is broken right now, and per erlang-ls/erlang_ls#991 they are thinking of removing it anyway. At least in VS Code the \"Show Call Hierarchy\" function provides that level of detail and more in a nicer presentation.\r\n\r\nOn the other hand, we many not want to be _too_ prescriptive about putting this config file in source control. Users can and will want to customize it themselves. Worth further discussion, but it might make sense to maintain a good sample config file in git but leave it to each individual developer to decide whether to copy it into place / modify it further.\r\n\r\nBut for now, +1 from me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988406371/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988617458","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-988617458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":988617458,"node_id":"IC_kwDOAAMmUc467Rry","user":{"login":"AltenTMAOrion","id":43345087,"node_id":"MDQ6VXNlcjQzMzQ1MDg3","avatar_url":"https://avatars.githubusercontent.com/u/43345087?v=4","gravatar_id":"","url":"https://api.github.com/users/AltenTMAOrion","html_url":"https://github.com/AltenTMAOrion","followers_url":"https://api.github.com/users/AltenTMAOrion/followers","following_url":"https://api.github.com/users/AltenTMAOrion/following{/other_user}","gists_url":"https://api.github.com/users/AltenTMAOrion/gists{/gist_id}","starred_url":"https://api.github.com/users/AltenTMAOrion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AltenTMAOrion/subscriptions","organizations_url":"https://api.github.com/users/AltenTMAOrion/orgs","repos_url":"https://api.github.com/users/AltenTMAOrion/repos","events_url":"https://api.github.com/users/AltenTMAOrion/events{/privacy}","received_events_url":"https://api.github.com/users/AltenTMAOrion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T08:54:37Z","updated_at":"2021-12-08T08:54:37Z","author_association":"NONE","body":"Hello,\r\n\r\nDo you have any ideas on a date of integration for this patch?\r\nWe are stuck on couchdb 2.3.1 because of the performance on the map/ reduce design, as our application is mainly based on this feature\r\n\r\nThank","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988617458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988640333","html_url":"https://github.com/apache/couchdb/pull/3864#issuecomment-988640333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3864","id":988640333,"node_id":"IC_kwDOAAMmUc467XRN","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T09:25:16Z","updated_at":"2021-12-08T09:25:16Z","author_association":"MEMBER","body":"without this change it wasn't possibly for erlang_ls to see/index all the exported functions in other apps, etc. There might be other combinations of settings that work too but this worked for me so I stopped trying. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988640333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988928421","html_url":"https://github.com/apache/couchdb/pull/3861#issuecomment-988928421","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3861","id":988928421,"node_id":"IC_kwDOAAMmUc468dml","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T15:43:28Z","updated_at":"2021-12-08T15:43:28Z","author_association":"MEMBER","body":"eep, yes. will make new PR's. good catch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/988928421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/989157185","html_url":"https://github.com/apache/couchdb/pull/3863#issuecomment-989157185","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3863","id":989157185,"node_id":"IC_kwDOAAMmUc469VdB","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T20:08:08Z","updated_at":"2021-12-08T20:08:08Z","author_association":"CONTRIBUTOR","body":"Just FYI @jiahuili430's instructions are actually [here](https://github.com/apache/couchdb/issues/3821#issuecomment-985281755)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/989157185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/989621802","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-989621802","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":989621802,"node_id":"IC_kwDOAAMmUc46_G4q","user":{"login":"style95","id":3447251,"node_id":"MDQ6VXNlcjM0NDcyNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3447251?v=4","gravatar_id":"","url":"https://api.github.com/users/style95","html_url":"https://github.com/style95","followers_url":"https://api.github.com/users/style95/followers","following_url":"https://api.github.com/users/style95/following{/other_user}","gists_url":"https://api.github.com/users/style95/gists{/gist_id}","starred_url":"https://api.github.com/users/style95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/style95/subscriptions","organizations_url":"https://api.github.com/users/style95/orgs","repos_url":"https://api.github.com/users/style95/repos","events_url":"https://api.github.com/users/style95/events{/privacy}","received_events_url":"https://api.github.com/users/style95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T08:27:06Z","updated_at":"2021-12-09T08:27:06Z","author_association":"MEMBER","body":"I am facing the same issue, is there any update on this issue?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/989621802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/990420092","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-990420092","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":990420092,"node_id":"IC_kwDOAAMmUc47CJx8","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T00:01:27Z","updated_at":"2021-12-10T00:01:27Z","author_association":"MEMBER","body":"addressed in #3869 and #3870.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/990420092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/990564445","html_url":"https://github.com/apache/couchdb/pull/3869#issuecomment-990564445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3869","id":990564445,"node_id":"IC_kwDOAAMmUc47CtBd","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T02:58:04Z","updated_at":"2021-12-10T03:04:15Z","author_association":"CONTRIBUTOR","body":"Another minor nit is the formatting. It turns out erlfmt check wasn't running on pull requests in Jenkins so we didn't get a failure. \r\n\r\nRunning locally it suggested this patch: ` ./bin/erlfmt -w src/couch/src/couch_httpd_auth.erl`\r\n\r\n\r\n```diff \r\n--- a/src/couch/src/couch_httpd_auth.erl\r\n+++ b/src/couch/src/couch_httpd_auth.erl\r\n@@ -376,11 +376,13 @@ cookie_auth_cookie(Req, User, Secret, TimeStamp) ->\r\n\r\n clear_auth_cookie(Req) ->\r\n     mochiweb_cookies:cookie(\r\n-      \"AuthSession\", \"\", cookie_attributes(Req)\r\n-     ).\r\n+        \"AuthSession\", \"\", cookie_attributes(Req)\r\n+    ).\r\n\r\n cookie_attributes(Req) ->\r\n-    Attributes = [path(), http_only(), max_age(), cookie_scheme(Req), max_age(), cookie_domain(), same_site()],\r\n+    Attributes = [\r\n+        path(), http_only(), max_age(), cookie_scheme(Req), max_age(), cookie_domain(), same_site()\r\n+    ],\r\n     lists:flatten(Attributes).\r\n```\r\n\r\nMade a separate issue for it: https://github.com/apache/couchdb/issues/3871","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/990564445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991191596","html_url":"https://github.com/apache/couchdb/issues/3871#issuecomment-991191596","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3871","id":991191596,"node_id":"IC_kwDOAAMmUc47FGIs","user":{"login":"lostnet","id":1422781,"node_id":"MDQ6VXNlcjE0MjI3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1422781?v=4","gravatar_id":"","url":"https://api.github.com/users/lostnet","html_url":"https://github.com/lostnet","followers_url":"https://api.github.com/users/lostnet/followers","following_url":"https://api.github.com/users/lostnet/following{/other_user}","gists_url":"https://api.github.com/users/lostnet/gists{/gist_id}","starred_url":"https://api.github.com/users/lostnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostnet/subscriptions","organizations_url":"https://api.github.com/users/lostnet/orgs","repos_url":"https://api.github.com/users/lostnet/repos","events_url":"https://api.github.com/users/lostnet/events{/privacy}","received_events_url":"https://api.github.com/users/lostnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T18:18:14Z","updated_at":"2021-12-10T18:18:14Z","author_association":"CONTRIBUTOR","body":"I'd also noticed that configure.ps1 has an equivalent of install_local_rebar but not install_local_erlfmt but this might not have been noticed when following glazier instructions since they use Erlang 20.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991191596/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991240224","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-991240224","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":991240224,"node_id":"IC_kwDOAAMmUc47FSAg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T19:32:29Z","updated_at":"2021-12-13T02:53:42Z","author_association":"CONTRIBUTOR","body":"@style95 what version of CouchDB are you running?\r\n\r\n3.1.2 and 3.2.1 should have the fix for this already https://github.com/apache/couchdb/pull/3102\r\n\r\nNOTE: There are 3.2.1 packages available in the usual repos, and the source available at https://dlcdn.apache.org/couchdb/source/3.2.1/apache-couchdb-3.2.1.tar.gz . We just haven't updated the website as we're waiting on the Windows packaging.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991240224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991241091","html_url":"https://github.com/apache/couchdb/issues/2877#issuecomment-991241091","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2877","id":991241091,"node_id":"IC_kwDOAAMmUc47FSOD","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T19:33:58Z","updated_at":"2021-12-10T19:33:58Z","author_association":"CONTRIBUTOR","body":"Thanks for reaching out, @ChetanGoti and @Kaspanoombro.\r\n\r\nThis issue looks like a duplicate of https://github.com/apache/couchdb/issues/1600 and should be fixed in the latest 3.x release","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991241091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991241818","html_url":"https://github.com/apache/couchdb/issues/2041#issuecomment-991241818","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2041","id":991241818,"node_id":"IC_kwDOAAMmUc47FSZa","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T19:35:14Z","updated_at":"2021-12-10T19:35:14Z","author_association":"CONTRIBUTOR","body":"Thanks for reaching out @vincnetas. \r\n\r\nThis is a duplicate of https://github.com/apache/couchdb/issues/1600 and should already be fixed in #3102","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/991241818/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]