[{"url":"https://api.github.com/repos/apache/jena/issues/comments/1106726228","html_url":"https://github.com/apache/jena/pull/1268#issuecomment-1106726228","issue_url":"https://api.github.com/repos/apache/jena/issues/1268","id":1106726228,"node_id":"IC_kwDOAHF7Ec5B901U","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T17:40:22Z","updated_at":"2022-04-22T17:40:22Z","author_association":"MEMBER","body":"Hi @mattmarshall, thanks for the PR.\r\n\r\nYes, please do create a GH issue or a JIRA.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1106726228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108672781","html_url":"https://github.com/apache/jena/issues/1252#issuecomment-1108672781","issue_url":"https://api.github.com/repos/apache/jena/issues/1252","id":1108672781,"node_id":"IC_kwDOAHF7Ec5CFQEN","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T14:46:54Z","updated_at":"2022-04-25T14:46:54Z","author_association":"MEMBER","body":"(sorry - missed this)\r\n\r\nYes, probably. Do you happen to know how it got in this state? Was a compaction done around that time?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108672781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108700952","html_url":"https://github.com/apache/jena/issues/1252#issuecomment-1108700952","issue_url":"https://api.github.com/repos/apache/jena/issues/1252","id":1108700952,"node_id":"IC_kwDOAHF7Ec5CFW8Y","user":{"login":"kdejaeger","id":279268,"node_id":"MDQ6VXNlcjI3OTI2OA==","avatar_url":"https://avatars.githubusercontent.com/u/279268?v=4","gravatar_id":"","url":"https://api.github.com/users/kdejaeger","html_url":"https://github.com/kdejaeger","followers_url":"https://api.github.com/users/kdejaeger/followers","following_url":"https://api.github.com/users/kdejaeger/following{/other_user}","gists_url":"https://api.github.com/users/kdejaeger/gists{/gist_id}","starred_url":"https://api.github.com/users/kdejaeger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdejaeger/subscriptions","organizations_url":"https://api.github.com/users/kdejaeger/orgs","repos_url":"https://api.github.com/users/kdejaeger/repos","events_url":"https://api.github.com/users/kdejaeger/events{/privacy}","received_events_url":"https://api.github.com/users/kdejaeger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T15:09:28Z","updated_at":"2022-04-25T15:09:28Z","author_association":"NONE","body":"I don't know unfortunately. We'll add a backup command before the compact command, to be safe.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108700952/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108780827","html_url":"https://github.com/apache/jena/pull/1267#issuecomment-1108780827","issue_url":"https://api.github.com/repos/apache/jena/issues/1267","id":1108780827,"node_id":"IC_kwDOAHF7Ec5CFqcb","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T16:20:18Z","updated_at":"2022-04-25T16:20:18Z","author_association":"MEMBER","body":"The defaults set to JSON-LD 1.1.\r\n\r\nThis can be adjusted if the [user@ discussion](https://lists.apache.org/thread/dkr7k0jvckpxzvmqs07n25gb3j0o5pw7] brings in new information.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108780827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108822711","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1108822711","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1108822711,"node_id":"IC_kwDOAHF7Ec5CF0q3","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T17:04:42Z","updated_at":"2022-04-25T17:05:41Z","author_association":"MEMBER","body":"Looks OK, and, if I read it correctly, the default is null for the listener which means no calls.\r\n\r\nTo get into Jena 4.5.0, please set this to \"ready for review\" from \"draft\"\r\n\r\nOr if not ready, just say so.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108822711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108833155","html_url":"https://github.com/apache/jena/issues/1272#issuecomment-1108833155","issue_url":"https://api.github.com/repos/apache/jena/issues/1272","id":1108833155,"node_id":"IC_kwDOAHF7Ec5CF3OD","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T17:15:33Z","updated_at":"2022-04-25T17:15:33Z","author_association":"MEMBER","body":"`ARQConstants.sysCurrentPrologue` would seem the better fix.\r\n\r\nNoticed:\r\n`QueryExecDataset` and `QueryExecDatasetBuilder` both set `ARQConstants.sysCurrentQuery` which isn't right.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108833155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108953866","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1108953866","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1108953866,"node_id":"IC_kwDOAHF7Ec5CGUsK","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T19:27:06Z","updated_at":"2022-04-25T19:28:57Z","author_association":"MEMBER","body":"Quick comment: the [`@since`]( https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/Deprecated.html#since()) attribute doesn't seem to admit a descriptive comment as you have here, but merely a software version. I think you'd do better to use the `@deprecated` tag on the Javadocs instead.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108953866/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108967300","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1108967300","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1108967300,"node_id":"IC_kwDOAHF7Ec5CGX-E","user":{"login":"fkleedorfer","id":551624,"node_id":"MDQ6VXNlcjU1MTYyNA==","avatar_url":"https://avatars.githubusercontent.com/u/551624?v=4","gravatar_id":"","url":"https://api.github.com/users/fkleedorfer","html_url":"https://github.com/fkleedorfer","followers_url":"https://api.github.com/users/fkleedorfer/followers","following_url":"https://api.github.com/users/fkleedorfer/following{/other_user}","gists_url":"https://api.github.com/users/fkleedorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/fkleedorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkleedorfer/subscriptions","organizations_url":"https://api.github.com/users/fkleedorfer/orgs","repos_url":"https://api.github.com/users/fkleedorfer/repos","events_url":"https://api.github.com/users/fkleedorfer/events{/privacy}","received_events_url":"https://api.github.com/users/fkleedorfer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T19:42:11Z","updated_at":"2022-04-25T19:42:11Z","author_association":"CONTRIBUTOR","body":"> Looks OK, and, if I read it correctly, the default is null for the listener which means no calls.\r\n\r\nCorrect, I tried to make the overhead minimal if no listener is used (event objects only generated if a listener is there).  However, the events do add some overhead through copying any Set<Node> that are passed to enforce immutability. Just passing the sets might be worth considering.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108967300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108976399","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1108976399","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1108976399,"node_id":"IC_kwDOAHF7Ec5CGaMP","user":{"login":"fkleedorfer","id":551624,"node_id":"MDQ6VXNlcjU1MTYyNA==","avatar_url":"https://avatars.githubusercontent.com/u/551624?v=4","gravatar_id":"","url":"https://api.github.com/users/fkleedorfer","html_url":"https://github.com/fkleedorfer","followers_url":"https://api.github.com/users/fkleedorfer/followers","following_url":"https://api.github.com/users/fkleedorfer/following{/other_user}","gists_url":"https://api.github.com/users/fkleedorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/fkleedorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkleedorfer/subscriptions","organizations_url":"https://api.github.com/users/fkleedorfer/orgs","repos_url":"https://api.github.com/users/fkleedorfer/repos","events_url":"https://api.github.com/users/fkleedorfer/events{/privacy}","received_events_url":"https://api.github.com/users/fkleedorfer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T19:52:18Z","updated_at":"2022-04-25T19:52:18Z","author_association":"CONTRIBUTOR","body":"> To get into Jena 4.5.0, please set this to \"ready for review\" from \"draft\"\r\n\r\nNot really ready yet, here are a few things I'd still like to do:\r\n\r\n* [ ] Lifecycle events for the whole validation process\r\n* [ ] Improve naming of some event interfaces\r\n* [ ] test this more with my use case (to make sure it does all I need - haven't really done that lately)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1108976399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109526071","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1109526071","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1109526071,"node_id":"IC_kwDOAHF7Ec5CIgY3","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T08:48:35Z","updated_at":"2022-04-26T08:48:35Z","author_association":"CONTRIBUTOR","body":"> Quick comment: the [`@since`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/Deprecated.html#since()) attribute doesn't seem to admit a descriptive comment as you have here, but merely a software version. I think you'd do better to use the `@deprecated` tag on the Javadocs instead.\r\n\r\nThank you! I fixed it by adding @deprecated in javadoc commets.\r\nHopefully @Deprecated(since = \"4.5.0\") is okay?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109526071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109603209","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1109603209","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1109603209,"node_id":"IC_kwDOAHF7Ec5CIzOJ","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T10:03:57Z","updated_at":"2022-04-26T10:03:57Z","author_association":"MEMBER","body":"It would also be nice to get some more context around the motivation for this change.  While \"faster and less memory\" is noted in the title and description presumably the need for this to be faster and use less memory was originally motivated by performance issues in use case(s) you have?\r\n\r\nKnowing the use case(s) would also be useful to understand whether there are other solutions to your performance issues ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109603209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109843072","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1109843072","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1109843072,"node_id":"IC_kwDOAHF7Ec5CJtyA","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T14:07:10Z","updated_at":"2022-04-26T14:07:10Z","author_association":"MEMBER","body":"There's no rush - if it makes 4.5.0, it makes it;  if it doesn't, it doesn't. The joy of regular releases rather than feature-completion releases.\r\n\r\nIt is possible 4.5.0 will be in the next week or so. This is, of course, dependent on time availability. And quite possibly the UK weather (because the sunnier/warmer it is, the less time inside!).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109843072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109923952","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1109923952","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1109923952,"node_id":"IC_kwDOAHF7Ec5CKBhw","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T15:14:50Z","updated_at":"2022-04-26T15:14:50Z","author_association":"MEMBER","body":"> > Quick comment: the [`@since`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/Deprecated.html#since()) attribute doesn't seem to admit a descriptive comment as you have here, but merely a software version. I think you'd do better to use the `@deprecated` tag on the Javadocs instead.\r\n> \r\n> Thank you! I fixed it by adding @deprecated in javadoc commets. Hopefully @deprecated(since = \"4.5.0\") is okay?\r\n\r\nYes, that would be appropriate, but see @rvesse's comment about the speed of deprecation.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1109923952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1110880638","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1110880638","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1110880638,"node_id":"IC_kwDOAHF7Ec5CNrF-","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T11:18:38Z","updated_at":"2022-05-05T09:37:56Z","author_association":"CONTRIBUTOR","body":"> It would also be nice to get some more context around the motivation for this change. While \"faster and less memory\" is noted in the title and description presumably the need for this to be faster and use less memory was originally motivated by performance issues in use case(s) you have?\r\n> \r\n> Knowing the use case(s) would also be useful to understand whether there are other solutions to your performance issues\r\n\r\nSince 2017, we are developing an event sourcing in memory graph database, following the CQRS pattern. Every transaction is written to a new delta graph (not the jena Delta but a variation). Delta graphs are chained until the next snapshot.\r\nSPAQRL queries are executed on ad hoc created datasets (not the jena DatasetGraphMapLink but a variation) to support temporal queries (versioning) and additional contexts.\r\n\r\nThe way of tracking changes as deltas seems similar to the approach of [RDF Delta](https://afs.github.io/rdf-delta/), which I recently discovered. But we support also git-like branching and merging on graphs / datasets.\r\n\r\nThe database is customized to our domain. For example, to support the reuse of SPARQL queries with named graphs, we have query contexts like version, timestamp, business process or client.\r\n\r\nThe events with the graphs and delta graphs as payload are written to a relational database (Oracle or Postgres). They are serialized as RDFThriftValues and LZ4 compressed for optimal IO performance. \r\nLoading the graphs currently is not fast enough. We are working on a better parallelization but making the graphs add tripples faster is also an option.\r\n\r\nIn our graphs, the number of entities typically does not grow over time. Also the number of graphs in our use cases does not grow over time. So we are confident so be able to always hold all needed data in memory. \r\n\r\nIn one common use case we have each named graph 24 times representing 24 differnt timestamps (hours). Since there are only small differnces between the hours, we only keep the full graph for the first hour and use delta graphs (each having the first hour as base graph) to represent the remaining hours.\r\nWe do have 1 day scenarios with 3644 graphs on one node using up to 24 GB of memory. Next year we will have 7 day scenarios. So it would be a great relief if graphs needed less memory.\r\n\r\nMeanwhile, we are looking into the possibility to distribute the graphs on several nodes and use federated queries under the hood.\r\nStoring the event chain in Apache Kafka and the payloads (graphs and delta graphs) in MinIO is one possible path on our roadmap.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1110880638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112002958","html_url":"https://github.com/apache/jena/pull/1268#issuecomment-1112002958","issue_url":"https://api.github.com/repos/apache/jena/issues/1268","id":1112002958,"node_id":"IC_kwDOAHF7Ec5CR9GO","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T10:02:55Z","updated_at":"2022-04-28T10:02:55Z","author_association":"MEMBER","body":"Looks good and the build is passing.\r\n\r\n@der -- unless I heard otherwise, I'll merge this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112002958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112005303","html_url":"https://github.com/apache/jena/pull/1268#issuecomment-1112005303","issue_url":"https://api.github.com/repos/apache/jena/issues/1268","id":1112005303,"node_id":"IC_kwDOAHF7Ec5CR9q3","user":{"login":"der","id":805075,"node_id":"MDQ6VXNlcjgwNTA3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/805075?v=4","gravatar_id":"","url":"https://api.github.com/users/der","html_url":"https://github.com/der","followers_url":"https://api.github.com/users/der/followers","following_url":"https://api.github.com/users/der/following{/other_user}","gists_url":"https://api.github.com/users/der/gists{/gist_id}","starred_url":"https://api.github.com/users/der/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/der/subscriptions","organizations_url":"https://api.github.com/users/der/orgs","repos_url":"https://api.github.com/users/der/repos","events_url":"https://api.github.com/users/der/events{/privacy}","received_events_url":"https://api.github.com/users/der/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T10:05:17Z","updated_at":"2022-04-28T10:05:17Z","author_association":"CONTRIBUTOR","body":"Yes, looks good to me. Thanks @mattmarshall ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112005303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112332926","html_url":"https://github.com/apache/jena/pull/1268#issuecomment-1112332926","issue_url":"https://api.github.com/repos/apache/jena/issues/1268","id":1112332926,"node_id":"IC_kwDOAHF7Ec5CTNp-","user":{"login":"mattmarshall","id":1664695,"node_id":"MDQ6VXNlcjE2NjQ2OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1664695?v=4","gravatar_id":"","url":"https://api.github.com/users/mattmarshall","html_url":"https://github.com/mattmarshall","followers_url":"https://api.github.com/users/mattmarshall/followers","following_url":"https://api.github.com/users/mattmarshall/following{/other_user}","gists_url":"https://api.github.com/users/mattmarshall/gists{/gist_id}","starred_url":"https://api.github.com/users/mattmarshall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattmarshall/subscriptions","organizations_url":"https://api.github.com/users/mattmarshall/orgs","repos_url":"https://api.github.com/users/mattmarshall/repos","events_url":"https://api.github.com/users/mattmarshall/events{/privacy}","received_events_url":"https://api.github.com/users/mattmarshall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T15:14:52Z","updated_at":"2022-04-28T15:14:52Z","author_association":"CONTRIBUTOR","body":"Thanks for merging this @afs and @der. I hadn't gotten around to creating an issue for this yet, so I appreciate it!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112332926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112634490","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1112634490","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1112634490,"node_id":"IC_kwDOAHF7Ec5CUXR6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:40:17Z","updated_at":"2022-04-29T07:25:33Z","author_association":"MEMBER","body":"Hi @arne-bdt,\r\n\r\nGood to see this PR. The requirement for large in-memory graphs has been growing in recent years. The origins of the custom indexing was to save space - I'm sure the JDK has significantly improved since the work on more compact indexes was done sometime ago.\r\n\r\nOne of the few changes to GraphMem over the years has been to increase the range of sizes the custom hash maps can handle. Having something faster loading and more space efficient is good to have.\r\n\r\nCould you please create a GitHub issue (or a JIRA) for recording this?\r\n\r\nI've only started to look at the code - the comments are very helpful in getting to understand it.\r\n\r\nI have built the code and also run the tests suite done a build/test with `GraphMem` deleted from the codebase so as to force the new code to be used. All passes - one comment about `TestPackage`.\r\n\r\n#### Legal\r\n\r\nPresumably, this is work done during your employment at Soptim and that Soptim is the legal owner of the work. As this is a significant and important contribution to Jena, we ought to get the legal side clear. It is always better to do legal matters early.\r\n\r\nTo be clear about the contribution, would a contribution agreement be possible?\r\n\r\nThese are available at: https://www.apache.org/licenses/contributor-agreements.html\r\n\r\nFor a single, one off software contribution, there is the Software Grant.\r\n\r\nOr for this and any future contributions, there is the Corporate Contributor License Agreement (CCLA).\r\n\r\nIt needs to be signed by some at Soptim entitled to make the legal declaration.\r\n\r\n#### Migration\r\n\r\nApps should not be hooking into the `GraphMem` machinery. All application use of memory graphs should be via `org.apache.jena.graph.Factory` (which is now a rather out-of-place name ... but one thing at a time).\r\n\r\nFor merging into Jena and switching over, how does this sound:\r\n\r\nWe're approaching Jena 4.5.0 very soon (roughly, as soon as possible). It includes switching to JSON-LD 1.1 so I'd prefer not to hold it up. \r\n\r\nAs soon as that is done, and the legal is done, we can merge this PR. We can announce on users@ that the code is changing and invite people to test development builds (don't expect many to actually do that! but we can at least make the offer).\r\n\r\nThen release Jena 4.6.0 sooner than the usual 3-4 month clock tick.  There is at least one other significant PR in progress and nearly ready (SHACL related - not as central as this one). This is quite convenient because JSON-LD 1.0 to 1.1 isn't a simple matter as there are spec changes to data so the chance to fine tune Jena use of the JSON-LD engine (Titanium) we use for JSON-LD 1.1 might be needed anyway.\r\n\r\nI don't know what the rest of the team think but personally my objective is to remove the old `GraphMem` code as soon as possible and not have it in the codebase. It's not like we can't get it back from git or a release. At least move it elsewhere.\r\n\r\nThe best I can think of for migration is to mark `GraphMem` deprecated in 4.5.0 to notify any app that is directly calling the constructor. May be also do the same for `Factory.createGraphMem`. \r\n\r\nWe can let users know change is coming by putting something in the 4.5.0 release announcment message as well.\r\n\r\n#### Other\r\n\r\ncommits fb232336ac, cce5c920f9, 2c89182dfa - these don't follow the git convention of one short line, then one blank line, then long text. Tools sometimes assume this. Example: `git log -5 --format='[%h] %ae (%ar) - %s`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1112634490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114034212","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1114034212","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1114034212,"node_id":"IC_kwDOAHF7Ec5CZtAk","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T18:36:48Z","updated_at":"2022-04-30T18:37:13Z","author_association":"MEMBER","body":"Issue #1277 - deprecation of GraphMem at Jena version 4.4.0\r\n\r\nIssue #1279  - track this PR\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114034212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114054158","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1114054158","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1114054158,"node_id":"IC_kwDOAHF7Ec5CZx4O","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T21:06:11Z","updated_at":"2022-04-30T21:06:11Z","author_association":"MEMBER","body":"> How large should I think large graphs?\r\n\r\nThere must come a point where very large data ought to have a different backing graph for practical reasons like start-up.\r\n\r\nBSBM triples take up more space than average - a lot of long literals in the generated data. Just tried old GraphMem : 50m of BSBM took 14G RAM.\r\n\r\nExperience of `ArrayList` is that the way it resizes isn't great for 0 to many million. It only grows by 50% per resize so there is a lot of resize copying going on. If we wanted faster loads, requiring a \"large graph\" indicator and then an array implementation that was chunked and with a faster growth factor would be better. But not today!\r\n\r\n[JENA-1142](https://issues.apache.org/jira/browse/JENA-1142) :: 100e6 triples where the extension of the hash tables is not so much the scale but to have a soft limit rather than a hard limit.\r\n\r\nAn extreme report was [JENA-1726](https://issues.apache.org/jira/browse/JENA-1726) but that was a reported CONSTRUCT query where a lot of RAM was already being used by the query itself in the path evaluation so we don't know enough details. The tables were extended but again it is to have a soft limit \"just in case\". We didn't hear back from the reporter.  For most cases there is `QueryExecution.execConstructTriples` to get extreme results (may be not the path case here but we known know for sure).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114054158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114341049","html_url":"https://github.com/apache/jena/pull/1285#issuecomment-1114341049","issue_url":"https://api.github.com/repos/apache/jena/issues/1285","id":1114341049,"node_id":"IC_kwDOAHF7Ec5Ca365","user":{"login":"naveensrinivasan","id":172697,"node_id":"MDQ6VXNlcjE3MjY5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/172697?v=4","gravatar_id":"","url":"https://api.github.com/users/naveensrinivasan","html_url":"https://github.com/naveensrinivasan","followers_url":"https://api.github.com/users/naveensrinivasan/followers","following_url":"https://api.github.com/users/naveensrinivasan/following{/other_user}","gists_url":"https://api.github.com/users/naveensrinivasan/gists{/gist_id}","starred_url":"https://api.github.com/users/naveensrinivasan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naveensrinivasan/subscriptions","organizations_url":"https://api.github.com/users/naveensrinivasan/orgs","repos_url":"https://api.github.com/users/naveensrinivasan/repos","events_url":"https://api.github.com/users/naveensrinivasan/events{/privacy}","received_events_url":"https://api.github.com/users/naveensrinivasan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T21:27:53Z","updated_at":"2022-05-01T21:27:53Z","author_association":"CONTRIBUTOR","body":"> Hi @naveensrinivasan 👋\r\n> \r\n> Didn't know we had to specify GH Actions to be updated as well. That should be useful in the Commons components too (where you have contributed other GH Actions security updates, thank you), I reckon.\r\n> \r\n> +1\r\n> \r\n> Thanks Bruno\r\n\r\nCool, Thanks! Looks like it already has it.! Happy to contribute to make things secure 👍 ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1114341049/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1115986632","html_url":"https://github.com/apache/jena/pull/1291#issuecomment-1115986632","issue_url":"https://api.github.com/repos/apache/jena/issues/1291","id":1115986632,"node_id":"IC_kwDOAHF7Ec5ChJrI","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T11:20:47Z","updated_at":"2022-05-03T11:20:47Z","author_association":"MEMBER","body":"From users@ thread https://lists.apache.org/thread/h0c81qjl8oc83yl2xf7xvt4l0pw4grrf\r\n\r\nIt looks like there is an issue as to whether the text dataset should push down the context setting for the index or not. Requiring endpoint configuration isn't so user-friendly.\r\n\r\nThis PR may contain a change to make anyway but this jena-fuseki-access uses context settings `DataAccessCtl.symAuthorizationService` itself so allowing the endpoints to modify context may be a security risk. Needs investigation - it's been a long time since I looked at the code!\r\n\r\nAn outstanding question [from email](https://lists.apache.org/thread/1t6cd3chn75twm1w6wrfwp5wrow6mk2g):\r\n\r\n* Doesn't that [setting the context to an illegal value] cause warnings in the Fuseki log? \r\n\r\nIt'll need some tests.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1115986632/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116204354","html_url":"https://github.com/apache/jena/pull/1291#issuecomment-1116204354","issue_url":"https://api.github.com/repos/apache/jena/issues/1291","id":1116204354,"node_id":"IC_kwDOAHF7Ec5Ch-1C","user":{"login":"vtermanis","id":6112689,"node_id":"MDQ6VXNlcjYxMTI2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6112689?v=4","gravatar_id":"","url":"https://api.github.com/users/vtermanis","html_url":"https://github.com/vtermanis","followers_url":"https://api.github.com/users/vtermanis/followers","following_url":"https://api.github.com/users/vtermanis/following{/other_user}","gists_url":"https://api.github.com/users/vtermanis/gists{/gist_id}","starred_url":"https://api.github.com/users/vtermanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vtermanis/subscriptions","organizations_url":"https://api.github.com/users/vtermanis/orgs","repos_url":"https://api.github.com/users/vtermanis/repos","events_url":"https://api.github.com/users/vtermanis/events{/privacy}","received_events_url":"https://api.github.com/users/vtermanis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T15:02:30Z","updated_at":"2022-05-03T15:05:33Z","author_association":"NONE","body":"> * Doesn't that [setting the context to an illegal value] cause warnings in the Fuseki log?\r\n\r\n(copied from [thread reply](https://markmail.org/message/7xj7c3ybg5qushhs)):\r\n\r\nYes it does - three (expected) warnings from TextQueryPF:\r\n1) `Context setting 'symbol:http://jena.apache.org/text#index'is not a\r\nTextIndex`\r\n2) `Failed to find the text index : tried context and as a text-enabled\r\ndataset`\r\n3) `No text index - no text search performed`\r\n\r\n---\r\n\r\n> It'll need some tests.\r\n\r\nI'd be happy to assist with this (time permitting) if I'm pointed in the right direction.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116204354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116211500","html_url":"https://github.com/apache/jena/pull/1291#issuecomment-1116211500","issue_url":"https://api.github.com/repos/apache/jena/issues/1291","id":1116211500,"node_id":"IC_kwDOAHF7Ec5CiAks","user":{"login":"vtermanis","id":6112689,"node_id":"MDQ6VXNlcjYxMTI2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6112689?v=4","gravatar_id":"","url":"https://api.github.com/users/vtermanis","html_url":"https://github.com/vtermanis","followers_url":"https://api.github.com/users/vtermanis/followers","following_url":"https://api.github.com/users/vtermanis/following{/other_user}","gists_url":"https://api.github.com/users/vtermanis/gists{/gist_id}","starred_url":"https://api.github.com/users/vtermanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vtermanis/subscriptions","organizations_url":"https://api.github.com/users/vtermanis/orgs","repos_url":"https://api.github.com/users/vtermanis/repos","events_url":"https://api.github.com/users/vtermanis/events{/privacy}","received_events_url":"https://api.github.com/users/vtermanis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T15:08:47Z","updated_at":"2022-05-03T15:08:47Z","author_association":"NONE","body":"Apologies - I updated the description since it had a mistake. The expected behaviour section has changed to:\r\n> Current behaviour (pre-patch):\r\n> \r\n> - jena:text is exposed only with query endpoint of B. SPARQL queries against A do not match text-indexed properties.\r\n>\r\n> Expected behaviour (post patch):\r\n> - **Neither A nor B** match text-indexed properties","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116211500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116550746","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116550746","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116550746,"node_id":"IC_kwDOAHF7Ec5CjTZa","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T20:18:43Z","updated_at":"2022-05-03T20:28:51Z","author_association":"MEMBER","body":"Does `RegistryRequestModifier`, used by `HttpLib.modifyByService` work for you? It can add the header.\r\nhttps://jena.apache.org/documentation/sparql-apis/#customization-of-http-requests\r\n\r\n\r\n4.5.0 has been built and is currently awaiting the VOTE from the PMC.\r\nThe build uses the Apache release configuration of the maven release plugin. If the version moves on, \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116550746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116569668","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116569668","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116569668,"node_id":"IC_kwDOAHF7Ec5CjYBE","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T20:31:31Z","updated_at":"2022-05-03T20:44:52Z","author_association":"CONTRIBUTOR","body":"Hi Andy, thanks alot - the snippet below works:\r\n```java\r\n   String bearerToken = \"SECRET\";\r\n   HttpRequestModifier modifier = (params, headers) -> {\r\n       headers.put(\"Authorization\", \"Bearer \" + bearerToken);\r\n   };\r\n   RegistryRequestModifier.get().add(url, modifier);\r\n```\r\n\r\nHowever, there is a minor follow up issue:\r\nIf the bearer token times out, then first a message is logged such as:\r\n```\r\nBearer error=\"invalid_token\", error_description=\"An error occurred while attempting to decode the Jwt: Jwt expired at 2022-05-03T20:22:50Z\", error_uri=\"https://tools.ietf.org/html/rfc6750#section-3.1\"\r\n```\r\n\r\nbut then it causes a non-ideal NPE in AuthLib.authenticateHeader:\r\n\r\n```java\r\npublic class AuthLib {\r\n    private static AuthChallenge authenticateHeader(HttpResponse<?> httpResponse) {\r\n        List<String> headers = httpResponse.headers().allValues(\"WWW-Authenticate\");\r\n        if ( headers.size() == 0 )\r\n            return null;\r\n        // Choose first digest or first basic.\r\n        AuthChallenge aHeader = null;\r\n        String result = null;\r\n        for ( String headerValue : headers ) {\r\n            AuthChallenge aHeader2 = AuthChallenge.parse(headerValue);\r\n            if ( aHeader2 == null )\r\n                AuthEnv.LOG.warn(\"Bad authentication response - ignored: \"+headerValue);\r\n            // Prefer Digest\r\n            switch(aHeader2.authScheme) { // BUG: If aHeader2 is null we get a NPE here\r\n                case  DIGEST :\r\n                    return aHeader2;\r\n                case BASIC:\r\n/* .. */\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116569668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116614755","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116614755","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116614755,"node_id":"IC_kwDOAHF7Ec5CjjBj","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T20:46:18Z","updated_at":"2022-05-03T20:46:18Z","author_association":"MEMBER","body":"That would have happened if an `AuthModifier` were used.\r\n\r\nIt needs `AuthScheme` extending and `AuthChallenge.parse` etc changing. Then there needs to be a recovery or more likely, passing on up the 401.\r\n\r\nWhat else needs to accommodate that?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116614755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116667041","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116667041","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116667041,"node_id":"IC_kwDOAHF7Ec5Cjvyh","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T21:17:20Z","updated_at":"2022-05-03T21:17:20Z","author_association":"MEMBER","body":"Some context so we can build or simulate  test cases:\r\n* What software system are you calling?\r\n* What `WWW-Authentication` header do you get back?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116667041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116683441","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116683441","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116683441,"node_id":"IC_kwDOAHF7Ec5Cjzyx","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T21:35:34Z","updated_at":"2022-05-03T21:36:22Z","author_association":"CONTRIBUTOR","body":"The software is a commercial product from @eccenca called [corporate memory](https://eccenca.com/products/enterprise-knowledge-graph-platform-corporate-memory) (cmem) which is a knowledge graph platform - which means it combines sparql enpdoint, workflow engine, interlinking, vocabulary management, user management, etc + user interfaces. It also uses Apache Jena in the backend.\r\n\r\nSo far I haven't used auth much, therefore I am not very familiar with the issues that arise with latest Jena and how to best address them - but maybe @seebi and his team (from eccenca) have already done some deeper investigation with tasks/issues on their backlog.\r\n\r\n`curl -I` on the currently private cmem instance yields:\r\n```\r\nHTTP/2 401 \r\nserver: nginx/1.21.6\r\ndate: Tue, 03 May 2022 21:32:52 GMT\r\nvary: Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\nwww-authenticate: Bearer\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116683441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116698332","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116698332","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116698332,"node_id":"IC_kwDOAHF7Ec5Cj3bc","user":{"login":"seebi","id":510452,"node_id":"MDQ6VXNlcjUxMDQ1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/510452?v=4","gravatar_id":"","url":"https://api.github.com/users/seebi","html_url":"https://github.com/seebi","followers_url":"https://api.github.com/users/seebi/followers","following_url":"https://api.github.com/users/seebi/following{/other_user}","gists_url":"https://api.github.com/users/seebi/gists{/gist_id}","starred_url":"https://api.github.com/users/seebi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seebi/subscriptions","organizations_url":"https://api.github.com/users/seebi/orgs","repos_url":"https://api.github.com/users/seebi/repos","events_url":"https://api.github.com/users/seebi/events{/privacy}","received_events_url":"https://api.github.com/users/seebi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T21:52:30Z","updated_at":"2022-05-03T21:52:30Z","author_association":"NONE","body":"HI together, this is [our architecture](https://documentation.eccenca.com/latest/deploy-and-configure/system-architecture).\r\n\r\nThe sparql endpoint is a resource server in an oauth2 zone used together with keycloak.\r\n\r\nYou could do something similar e.g. with [oauth2 proxy](https://github.com/oauth2-proxy/oauth2-proxy) ...\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116698332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116700448","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1116700448","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1116700448,"node_id":"IC_kwDOAHF7Ec5Cj38g","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-03T21:54:58Z","updated_at":"2022-05-03T21:54:58Z","author_association":"MEMBER","body":"Could you test for other things that might be needed by avoiding the NPE so the system returns without NPE?\r\n\r\nIt really would be helpful to get all the points enumerated where \"bearer\" matters and not deal with them one by one.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1116700448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1117033891","html_url":"https://github.com/apache/jena/pull/1291#issuecomment-1117033891","issue_url":"https://api.github.com/repos/apache/jena/issues/1291","id":1117033891,"node_id":"IC_kwDOAHF7Ec5ClJWj","user":{"login":"vtermanis","id":6112689,"node_id":"MDQ6VXNlcjYxMTI2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6112689?v=4","gravatar_id":"","url":"https://api.github.com/users/vtermanis","html_url":"https://github.com/vtermanis","followers_url":"https://api.github.com/users/vtermanis/followers","following_url":"https://api.github.com/users/vtermanis/following{/other_user}","gists_url":"https://api.github.com/users/vtermanis/gists{/gist_id}","starred_url":"https://api.github.com/users/vtermanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vtermanis/subscriptions","organizations_url":"https://api.github.com/users/vtermanis/orgs","repos_url":"https://api.github.com/users/vtermanis/repos","events_url":"https://api.github.com/users/vtermanis/events{/privacy}","received_events_url":"https://api.github.com/users/vtermanis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-04T08:05:44Z","updated_at":"2022-05-04T08:05:44Z","author_association":"NONE","body":"(Changing to draft as suggested, since the best way to address this is still being debated.)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1117033891/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1118279035","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1118279035","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1118279035,"node_id":"IC_kwDOAHF7Ec5Cp5V7","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T08:05:10Z","updated_at":"2022-05-05T08:10:51Z","author_association":"MEMBER","body":"Announcement: https://lists.apache.org/thread/qgjynztx70fhz7h86o6dfopv14dtgrc2\r\nwith headlines:\r\n\r\nand the details:\r\n```\r\nGH issues:\r\nhttps://github.com/apache/jena/issues?q=is%3Aissue+closed%3A2022-01-30..2022-05-04\r\n\r\nJIRA Tickets this release:\r\nhttps://s.apache.org/jena-4.5.0-jira\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1118279035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1118419376","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1118419376","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1118419376,"node_id":"IC_kwDOAHF7Ec5Cqbmw","user":{"login":"gaeljw","id":18280708,"node_id":"MDQ6VXNlcjE4MjgwNzA4","avatar_url":"https://avatars.githubusercontent.com/u/18280708?v=4","gravatar_id":"","url":"https://api.github.com/users/gaeljw","html_url":"https://github.com/gaeljw","followers_url":"https://api.github.com/users/gaeljw/followers","following_url":"https://api.github.com/users/gaeljw/following{/other_user}","gists_url":"https://api.github.com/users/gaeljw/gists{/gist_id}","starred_url":"https://api.github.com/users/gaeljw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaeljw/subscriptions","organizations_url":"https://api.github.com/users/gaeljw/orgs","repos_url":"https://api.github.com/users/gaeljw/repos","events_url":"https://api.github.com/users/gaeljw/events{/privacy}","received_events_url":"https://api.github.com/users/gaeljw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T10:56:51Z","updated_at":"2022-05-05T10:57:03Z","author_association":"NONE","body":"Thanks for the quick answer @afs \r\n\r\nCould be nice to move the CHANGELOG in the code itself so that it's not necessary to be registered on the mailing list to easily get it. It could also be retrieved by tools like RenovateBot or similar that automatically suggest dependencies upgrade.\r\n\r\nI don't know how it fits in Apache practices though :shrug: \r\n\r\nAt least I know where to look for :pray: ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1118419376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120410999","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120410999","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120410999,"node_id":"IC_kwDOAHF7Ec5CyB13","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T12:35:04Z","updated_at":"2022-05-08T12:35:04Z","author_association":"MEMBER","body":"> Why are these StreamRDF... classes in ...riot/system/ and not in .../riot/writer/stream/?\r\n\r\nDifferent meanings of \"stream\". \r\n\r\norg.apache.jena.riot.system.stream is in support of the stream manager - that is IO streams.\r\n\r\norg.apache.jena.system includes StreamRDF - a stream of triples./quads/prefixes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120410999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120412294","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120412294","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120412294,"node_id":"IC_kwDOAHF7Ec5CyCKG","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T12:44:41Z","updated_at":"2022-05-08T12:44:41Z","author_association":"MEMBER","body":"RIOT has its own tokenizer and parsers - the combination is x2 to x4 faster. The tokenizer is the performance bottleneck.\r\n\r\nThe fastest parsers in Jena run at up to 1m triples/second on binary RDF Thrift. RDF PRotobuf is slightly less than 10% slower (making protobuf work for open ended streams of input seems to create an extra object and at 1microsecond a triple this is observable).\r\n\r\nThe performance of Turtle and N-triples etc is approximately 240 kTPS and 400 kTPS. The only difference is the grammar parser being much simpler than all the \"if\"s for Turtle.\r\n\r\nAll these are a minimum of x4 faster than Javacc.\r\n\r\nAll parsing performance is sensitive to the hardware used. So these figures are relative. (they are on a old core-I5 with SATA SSD as has been used consistently for measurements over time.)\r\n\r\nJava has to convert to Java chars at some point which is a copy. In fact, it is faster to convert large buffers using Java built-in UTF-8 handling than to try to do one less copy but of each RDF term. Java checks all input for validity of UTF-8.\r\n\r\nIf you'd like to improve the tokenizer and provide a PR, then would be great.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120412294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120412798","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120412798","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120412798,"node_id":"IC_kwDOAHF7Ec5CyCR-","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T12:47:34Z","updated_at":"2022-05-08T12:47:34Z","author_association":"MEMBER","body":"@AtesComp  Could you provide a test case to illustrate the issue with `StreamRDFWriter.getWriterStream`? There is a lot of `rdf-transform` that may be influencing issue.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120412798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120413798","html_url":"https://github.com/apache/jena/issues/1295#issuecomment-1120413798","issue_url":"https://api.github.com/repos/apache/jena/issues/1295","id":1120413798,"node_id":"IC_kwDOAHF7Ec5CyChm","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T12:54:18Z","updated_at":"2022-05-08T12:54:18Z","author_association":"MEMBER","body":"Hi @SimonBin A few details would help.\r\n\r\n- Which versions of Fuseki have you tried? \r\n- What are the times you are seeing? The same if you call twice, one after another?\r\n- Is there an intermediary (e.g reverse proxy) on the HTTP path?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120413798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120432733","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1120432733","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1120432733,"node_id":"IC_kwDOAHF7Ec5CyHJd","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T14:52:10Z","updated_at":"2022-05-08T14:52:10Z","author_association":"MEMBER","body":"What other tools are there?\r\nSpecifically, what does github use to populate the dependabot PR with change information?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120432733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120435076","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120435076","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120435076,"node_id":"IC_kwDOAHF7Ec5CyHuE","user":{"login":"AtesComp","id":23365631,"node_id":"MDQ6VXNlcjIzMzY1NjMx","avatar_url":"https://avatars.githubusercontent.com/u/23365631?v=4","gravatar_id":"","url":"https://api.github.com/users/AtesComp","html_url":"https://github.com/AtesComp","followers_url":"https://api.github.com/users/AtesComp/followers","following_url":"https://api.github.com/users/AtesComp/following{/other_user}","gists_url":"https://api.github.com/users/AtesComp/gists{/gist_id}","starred_url":"https://api.github.com/users/AtesComp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AtesComp/subscriptions","organizations_url":"https://api.github.com/users/AtesComp/orgs","repos_url":"https://api.github.com/users/AtesComp/repos","events_url":"https://api.github.com/users/AtesComp/events{/privacy}","received_events_url":"https://api.github.com/users/AtesComp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T15:06:24Z","updated_at":"2022-05-08T15:06:24Z","author_association":"CONTRIBUTOR","body":"Thanks, Andy. Of course, I should have wrote `.../riot/io/stream`, or just `.../riot/stream`, instead of `.../riot/writer/stream`.  I was just locked onto writing out RDF export files. The `system` directory just didn't click with me.\r\n\r\n**As for the real issue**, I'm noting that the OpenRefine 3.5.2 version uses an older 3.x Jena ARQ that is squashing my dependency on the 4.5.0 Jena ARQ Maven release.  I looked at many ways to force it to use the newer jars but to no avail. Since my code is just a lowly red-headed stepchild extension to OpenRefine, I don't have much say in the matter. I'm fairly sure the `getWriterStream` issue is due to the older jar.\r\n\r\nHowever, the OpenRefine 3.6-SNAPSHOT is up-to-date! So, now, if I can just get them to make an official release, all will be good.  Well, mostly. The Jena documentation needs updating. I can live with in for now.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120435076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120435901","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120435901","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120435901,"node_id":"IC_kwDOAHF7Ec5CyH69","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T15:11:18Z","updated_at":"2022-05-08T15:11:18Z","author_association":"MEMBER","body":"So this issue \"StreamRDFWriter getWriterStream()\" can be closed?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120435901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120437384","html_url":"https://github.com/apache/jena/issues/1296#issuecomment-1120437384","issue_url":"https://api.github.com/repos/apache/jena/issues/1296","id":1120437384,"node_id":"IC_kwDOAHF7Ec5CyISI","user":{"login":"AtesComp","id":23365631,"node_id":"MDQ6VXNlcjIzMzY1NjMx","avatar_url":"https://avatars.githubusercontent.com/u/23365631?v=4","gravatar_id":"","url":"https://api.github.com/users/AtesComp","html_url":"https://github.com/AtesComp","followers_url":"https://api.github.com/users/AtesComp/followers","following_url":"https://api.github.com/users/AtesComp/following{/other_user}","gists_url":"https://api.github.com/users/AtesComp/gists{/gist_id}","starred_url":"https://api.github.com/users/AtesComp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AtesComp/subscriptions","organizations_url":"https://api.github.com/users/AtesComp/orgs","repos_url":"https://api.github.com/users/AtesComp/repos","events_url":"https://api.github.com/users/AtesComp/events{/privacy}","received_events_url":"https://api.github.com/users/AtesComp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T15:21:26Z","updated_at":"2022-05-08T15:21:26Z","author_association":"CONTRIBUTOR","body":"Yep.  I'll need to retest when a new official OpenRefine version comes\nout.  It \"looks\" like it should work.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120437384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120441808","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1120441808","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1120441808,"node_id":"IC_kwDOAHF7Ec5CyJXQ","user":{"login":"gaeljw","id":18280708,"node_id":"MDQ6VXNlcjE4MjgwNzA4","avatar_url":"https://avatars.githubusercontent.com/u/18280708?v=4","gravatar_id":"","url":"https://api.github.com/users/gaeljw","html_url":"https://github.com/gaeljw","followers_url":"https://api.github.com/users/gaeljw/followers","following_url":"https://api.github.com/users/gaeljw/following{/other_user}","gists_url":"https://api.github.com/users/gaeljw/gists{/gist_id}","starred_url":"https://api.github.com/users/gaeljw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaeljw/subscriptions","organizations_url":"https://api.github.com/users/gaeljw/orgs","repos_url":"https://api.github.com/users/gaeljw/repos","events_url":"https://api.github.com/users/gaeljw/events{/privacy}","received_events_url":"https://api.github.com/users/gaeljw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T15:47:18Z","updated_at":"2022-05-08T15:47:32Z","author_association":"NONE","body":"Not sure but looks like Dependabot looks for GitHub releases. And here comes the \"each tool uses its own changelog\" mess :(","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120441808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120476547","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1120476547","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1120476547,"node_id":"IC_kwDOAHF7Ec5CyR2D","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-08T19:45:41Z","updated_at":"2022-05-08T19:45:41Z","author_association":"MEMBER","body":"In Apache Commons the changelog is kept in the `changes.xml` file of [the changes maven plugin](https://maven.apache.org/plugins/maven-changes-plugin/). Then it's used to create the release notes with the changelog during the build.\r\n\r\nCommitters manually update it for every pull request that's not too small (e.g. fixed a comma in the javadoc). We also update for every dependabot pull request.\r\n\r\nYou eventually get used to this workflow, but it adds extra work on the developers. Maybe we could try something like a bash script to retrieve the changes from JIRA and GitHub issues/PRs, and then have a pre-release step to go through this list polishing/editing it… but that'd probably take a while too :disappointed_relieved: ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120476547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120994888","html_url":"https://github.com/apache/jena/issues/1295#issuecomment-1120994888","issue_url":"https://api.github.com/repos/apache/jena/issues/1295","id":1120994888,"node_id":"IC_kwDOAHF7Ec5C0QZI","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T11:46:18Z","updated_at":"2022-05-09T11:46:50Z","author_association":"CONTRIBUTOR","body":"Hi @afs thank you for the prompt response\r\n\r\n- Fuseki 4.5.0-SNAPSHOT 7be194cdaf8c1b9bffd8ef20192015f0f0348bd4\r\n- times stay the same (3 seconds vs. 1 minute)\r\n- no intermediary\r\n- sample dataset with random triples was enough to trigger it:\r\n  ```\r\n   { echo '@prefix : <http://example.com/> .\r\n     _:r0 :has [ :label \"1\" ]'\r\n     for i in $(seq 2 2500000); do\r\n       echo \", [ :label \\\"$i\\\" ]\"\r\n     done\r\n     echo . } > demo.ttl\r\n   ```\r\n\r\nhowever, while trying to reproduce it, I found that it does **not** happen in the 4.5.0 release! so case closed I guess?? still, a very curious issue","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1120994888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121053674","html_url":"https://github.com/apache/jena/issues/1295#issuecomment-1121053674","issue_url":"https://api.github.com/repos/apache/jena/issues/1295","id":1121053674,"node_id":"IC_kwDOAHF7Ec5C0evq","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T12:45:55Z","updated_at":"2022-05-09T12:45:55Z","author_association":"MEMBER","body":"There was a Jetty upgrade 10.0.8 -> 10.0.9. That's the only change that looks even remotely in the area.\r\n\r\nhttps://github.com/eclipse/jetty.project/issues/7567\r\n\r\ntouches gzipping. But not in a way that clearly applies to this case.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121053674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121070889","html_url":"https://github.com/apache/jena/issues/1293#issuecomment-1121070889","issue_url":"https://api.github.com/repos/apache/jena/issues/1293","id":1121070889,"node_id":"IC_kwDOAHF7Ec5C0i8p","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T13:01:35Z","updated_at":"2022-05-09T13:01:35Z","author_association":"MEMBER","body":"Jena has different audiences - the ANN has the main headlines and anything that users, including non-dev Fuseki users, might like to know about. We do include the list of changes in detail via searches of JIRA and now GH issues. And there are PRs for even more detail.\r\n\r\nAdding more to the release process is a one way process - once we do it, we can't easily stop doing it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121070889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121091751","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1121091751","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1121091751,"node_id":"IC_kwDOAHF7Ec5C0oCn","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T13:18:37Z","updated_at":"2022-05-09T13:18:37Z","author_association":"MEMBER","body":"The new title is a bit broad. What is the scope? Just handling \"Authorization: Bearer\"? There isn't a general way to process a 401 because obtaining the token involves both local context and scheme-specific choices as well as timeouts.\r\n\r\nOn the Fuseki side, I'm adding a servlet filter for handling \"Authorization: Bearer\" (for the day job) for JWT. A [fuseki module](https://jena.apache.org/documentation/fuseki2/fuseki-modules) is probably the way to go because the token needs handling per-bearer scheme and local auth services.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121091751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121115857","html_url":"https://github.com/apache/jena/issues/1295#issuecomment-1121115857","issue_url":"https://api.github.com/repos/apache/jena/issues/1295","id":1121115857,"node_id":"IC_kwDOAHF7Ec5C0t7R","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T13:38:42Z","updated_at":"2022-05-09T13:38:42Z","author_association":"CONTRIBUTOR","body":"maybe it's https://github.com/eclipse/jetty.project/issues/7683 (although the tone of that report makes it sound to me as if the real bug is still hidden out there somewhere)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1121115857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1122449894","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1122449894","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1122449894,"node_id":"IC_kwDOAHF7Ec5C5znm","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-10T14:09:51Z","updated_at":"2022-05-10T14:10:37Z","author_association":"MEMBER","body":"@arne-bdt - looking at the reviews, I think we're nearly done. There was one comment about iterator remove - how many test are affected? \r\n\r\nI think @rvesse's review comment is about migration. Jena 4.5.0 is out, the announcement has a lookahead to the change-over and some deprecation for direct use of GraphMem.\r\n\r\nDoes that sound right or have I missed something?\r\n\r\nThen, a bit of preparation for merging, tidying up the history and the legal side.\r\n\r\nLooking good!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1122449894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1122455526","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1122455526","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1122455526,"node_id":"IC_kwDOAHF7Ec5C50_m","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-10T14:14:26Z","updated_at":"2022-05-10T14:14:26Z","author_association":"MEMBER","body":"Hi there - Jena 4.5.0 is out and so we're at the beginning of the development cycle. A good time to merge new work! \r\n\r\nThe maybe/hope is 4.6.0 is sooner than the usual 3-4 months because it will include the new in-memory standalone graph.\r\n\r\nHow are we on this PR?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1122455526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1123545188","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1123545188","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1123545188,"node_id":"IC_kwDOAHF7Ec5C9_Bk","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-11T10:30:15Z","updated_at":"2022-05-11T10:35:56Z","author_association":"CONTRIBUTOR","body":"> @arne-bdt - looking at the reviews, I think we're nearly done. There was one comment about iterator remove - how many test are affected?\r\n> \r\n> I think @rvesse's review comment is about migration. Jena 4.5.0 is out, the announcement has a lookahead to the change-over and some deprecation for direct use of GraphMem.\r\n> \r\n> Does that sound right or have I missed something?\r\n> \r\n> Then, a bit of preparation for merging, tidying up the history and the legal side.\r\n> \r\n> Looking good!\r\n\r\n@afs  - Last week, I had to set this PR back to draft and updated the upper desciption accordingly. I added Grap#delete tests to my benchmarks, which showed desaterous performance on that task.\r\nUnfortunately, in our use case, where we only append deltas with deletions and additons, removing triples did practically not occur. \r\nSince then, I am trying to solve it using different approaches. I plan to share about my process and perspectives next Sunday.\r\n\r\nThere is also a second issue, which I added in upper the description:\r\n\"\"pathological case where every triple has the same subject\"\r\nIn the https://github.com/apache/jena/pull/1273#discussion_r858521057 below [rvesse](https://github.com/rvesse) mentioned cases where there are few subjects with each containting many predicates and objects.\r\nIn the sample graphs, there is one \"RealGrid_SV.xml\" with data matching this description.\r\nIn this case Graph#add and Gaph#contains are getting increasingly slow.\r\nSo I did some benchmarks that point out the problem:\r\n[graph_benchmarks_contains_20220504.xlsx](https://github.com/apache/jena/files/8618986/graph_benchmarks_contains_20220504.xlsx)\r\n\r\nI followed the tip to perform \"the contains() scan on the smallest list (or if any list is empty bypassing it entirely)\" - maybe it was too late in the night - but unfortunately, the overall perfomance was even worse.\r\nSo I tried a different approach by having sorted lists of triples in the node maps. After testing with different combinations of wich maps to sort by which criteria I ended with a new implementation GraphMemUsingHashMapSorted in a separate [branch](https://github.com/arne-bdt/jena/tree/GraphMemUsingHashMapSorted).\"\r\n-->   After weighing the pros and cons, it seems to me that this approach is more suitable. However, solving the deletion problem here is probably even more difficult. So far, I have not received any feedback on this approach or the benchmarks.\r\n\r\nCounting the tests is not easy, as many of them are simply not recognized in my IDE or are only listed as warnings despite errors and Maven stops after the first error.\r\nI found usages of org.apache.jena.util.iterator.ExtendedIterator#removeNext in:\r\n- org.apache.jena.ontology.impl.OntClassImpl#setSubClass\r\n- org.apache.jena.ontology.impl.OntPropertyImpl#setSubProperty\r\nand in the following tests:\r\n- org.apache.jena.graph.GraphContractTest#testSizeAfterRemove\r\n- org.apache.jena.graph.GraphContractTest#testBrokenIndexes\r\n- org.apache.jena.graph.GraphContractTest#testBrokenPredicate\r\n- org.apache.jena.graph.GraphContractTest#testBrokenObject\r\n\r\nI found potentially relevant uses of java.util.Iterator#remove in at least the following places:\r\n- 7 usages in org.apache.jena.sparql.*\r\n- 6 usages in org.apache.jena.reasoner.*\r\n- org.apache.jena.assembler.ModelExpansion#removeElementsWithoutType\r\n- org.apache.jena.geosparql.configuration.GeoSPARQLOperations#convertGeometryStructure(org.apache.jena.rdf.model.Model)\r\n\r\nThe legal side is moving forward. Our board is proceeding with caution, which seems reasonable since we don't yet have established processes or policies for code contributions, and we have a lot of sensitive data that should never become part of a test suite, for example.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1123545188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1123590823","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1123590823","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1123590823,"node_id":"IC_kwDOAHF7Ec5C-KKn","user":{"login":"fkleedorfer","id":551624,"node_id":"MDQ6VXNlcjU1MTYyNA==","avatar_url":"https://avatars.githubusercontent.com/u/551624?v=4","gravatar_id":"","url":"https://api.github.com/users/fkleedorfer","html_url":"https://github.com/fkleedorfer","followers_url":"https://api.github.com/users/fkleedorfer/followers","following_url":"https://api.github.com/users/fkleedorfer/following{/other_user}","gists_url":"https://api.github.com/users/fkleedorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/fkleedorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkleedorfer/subscriptions","organizations_url":"https://api.github.com/users/fkleedorfer/orgs","repos_url":"https://api.github.com/users/fkleedorfer/repos","events_url":"https://api.github.com/users/fkleedorfer/events{/privacy}","received_events_url":"https://api.github.com/users/fkleedorfer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-11T11:13:47Z","updated_at":"2022-05-12T06:38:09Z","author_association":"CONTRIBUTOR","body":"Haven't been able to do much lately, but:\r\n* [x] Lifecycle events for the whole validation process\r\n* [x] Improve naming of some event interfaces\r\n* [ ] test this more with my use case (to make sure it does all I need - haven't really done that lately)\r\n\r\nI looked into unit tests for this briefly and saw that for SHACL, there is a little framework for running the tests. I haven't found how to integrate tests for this here.\r\n\r\nEDIT: In times of good weather and kids, time is scarce, but I am sure I'll be done for the next release. ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1123590823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124714485","html_url":"https://github.com/apache/jena/pull/1256#issuecomment-1124714485","issue_url":"https://api.github.com/repos/apache/jena/issues/1256","id":1124714485,"node_id":"IC_kwDOAHF7Ec5DCcf1","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-12T08:58:59Z","updated_at":"2022-05-12T08:58:59Z","author_association":"MEMBER","body":"SHACL unit tests: I'm not sure the test manifest (which is from the WG test suite) is going to help test this. It tests the outcome of validation for the various constraints. It won't be a simple matter to add in a listener to test.\r\n\r\nI think test for the listener will be java ones - setup a validation (that can be read from a file), then validate with listener that records whether it was called or not. Check it was called. It really doesn't have to be that much and (as before) the main thing is that the current use isn't affected and the existing test suite does that.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124714485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124805039","html_url":"https://github.com/apache/jena/issues/1299#issuecomment-1124805039","issue_url":"https://api.github.com/repos/apache/jena/issues/1299","id":1124805039,"node_id":"IC_kwDOAHF7Ec5DCymv","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-12T10:05:00Z","updated_at":"2022-05-12T10:05:00Z","author_association":"MEMBER","body":"The URL <http://www.opengis.net/ont/gml> -- NB `ont` -- redirects with a 302 to <http://schemas.opengis.net/gml/3.2.1/gml_32_geometries.rdf> which is the RDF definitions.\r\n\r\nThe standards URL <http://www.opengis.net/gml/3.2> redirects to a bunch of XSD references <http://schemas.opengis.net/gml/3.2.1/gml.xsd>.\r\n\r\nSo maybe it is intended that the meaning (ontology) is \"http://www.opengis.net/ont/gml\" but the XSD (syntax) is not ... though  data syntax is impacted across minor versions. This seems to be a bit of a \"no win\" situation for datatypes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124805039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124955869","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1124955869","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1124955869,"node_id":"IC_kwDOAHF7Ec5DDXbd","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-12T12:52:13Z","updated_at":"2022-05-12T12:52:13Z","author_association":"CONTRIBUTOR","body":"I've been working with oauth in the past days and IMHO just handling `Authorization: Bearer` should be enough.\r\n\r\nI managed to use spring security to authenticate with my local test app that I registered with my gitlab account .\r\n\r\nBecause obtaining the bearer token is 'app-driven' I'd say its an application's concern to pass on the bearer token to components such as Jena remote sparql requests. It may make sense having a global callback registry in Jena for getting notified about failed authentications so that an application can then take action, such as redirecting the user to repeat the auth process.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1124955869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126020705","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1126020705","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1126020705,"node_id":"IC_kwDOAHF7Ec5DHbZh","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-13T12:48:16Z","updated_at":"2022-05-13T12:48:16Z","author_association":"MEMBER","body":"The application sees a failed authentication as an exception 401.\r\n\r\nFixes and improvements in #1301. HTTP authentication is a bit squirly because of legacy cases.\r\n\r\nAdding challenge handling for bearer auth is probably doable but it's yet another step. Rather than delay everything PR #1301 at least fixes the original problems and should work when the bearer token is added - failure is a 401 exception.\r\n\r\nOne case is that the token is being passed along a path service requests and code in the 401 handler may find it hard to give transparent. PR #1301 at least fixes the original problems and should work when the bearer token is added.\r\n\r\n@seebi -- I'm guessing that in your architecture, the token is added before the original request and not based on a HTTP challenge. Is that correct?\r\n\r\nTesting the PR would be great - this is quite sensitive to the execution environment (and my reading of the RFCs!).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126020705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126691878","html_url":"https://github.com/apache/jena/pull/1305#issuecomment-1126691878","issue_url":"https://api.github.com/repos/apache/jena/issues/1305","id":1126691878,"node_id":"IC_kwDOAHF7Ec5DJ_Qm","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-14T11:03:08Z","updated_at":"2022-05-14T11:03:08Z","author_association":"MEMBER","body":"Whew, 860 files changed :-o","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126691878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126712154","html_url":"https://github.com/apache/jena/pull/1305#issuecomment-1126712154","issue_url":"https://api.github.com/repos/apache/jena/issues/1305","id":1126712154,"node_id":"IC_kwDOAHF7Ec5DKENa","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-14T12:59:29Z","updated_at":"2022-05-14T12:59:29Z","author_association":"MEMBER","body":"Busy morning (with `cp`).\r\n\r\nAfter JENA-2926, so much easier than checking for coverage!\r\n\r\nTracking the rdf-test CG is good.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126712154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126715981","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1126715981","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1126715981,"node_id":"IC_kwDOAHF7Ec5DKFJN","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-14T13:25:52Z","updated_at":"2022-05-14T13:25:52Z","author_association":"MEMBER","body":"If you point me at `ExtendedIterator.remove` in `org.apache.jena.sparql.*`, I'll check them and rewrite suspect ones.\r\n\r\nIf it easier for your board, the Software Grant is for a specific body of code.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126715981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126896970","html_url":"https://github.com/apache/jena/issues/1306#issuecomment-1126896970","issue_url":"https://api.github.com/repos/apache/jena/issues/1306","id":1126896970,"node_id":"IC_kwDOAHF7Ec5DKxVK","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-15T09:47:36Z","updated_at":"2022-05-15T09:53:36Z","author_association":"MEMBER","body":"List of components we are using:\r\n\r\n```bash\r\nkinow@ranma:~/Development/java/jena/jena/jena-fuseki2/jena-fuseki-ui$ grep -r -H -h -E \"<b-.*[\\s|>]\" -o src | awk -F\" |>\" '{ print $1 }' | cut -c2- | sort | uniq -c | sort -h -r\r\n     32 b-col\r\n     26 b-row\r\n     13 b-container\r\n      9 b-card-body\r\n      7 b-card-header\r\n      7 b-card\r\n      5 b-alert\r\n      4 b-spinner\r\n      3 b-skeleton\r\n      3 b-nav-item\r\n      2 b-navbar-nav\r\n      2 b-nav\r\n      2 b-lis\r\n      2 b-input-group\r\n      2 b-form-s\r\n      2 b-card-title\r\n      1 b-tr\r\n      1 b-th\r\n      1 b-progress\r\n      1 b-overlay\r\n      1 b-navbar-toggle\r\n      1 b-navbar-brand\r\n      1 b-navbar\r\n      1 b-list-group\r\n      1 b-input-group-append\r\n      1 b-form\r\n      1 b-collapse\r\n      1 b-button\r\n      1 b-btn\r\n      1 b-badge\r\n```\r\n\r\nMost components are really easy to substitute, like `b-form` (a simple `<div>` in Bootstrap 5), `b-tr`, `b-navbar`, `b-col`, `b-row`, etc. Will take a while to get it all done and tested, but doesn't look too complicated (boring? yes :smile: but we gotta do what we must do).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126896970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126958593","html_url":"https://github.com/apache/jena/issues/1306#issuecomment-1126958593","issue_url":"https://api.github.com/repos/apache/jena/issues/1306","id":1126958593,"node_id":"IC_kwDOAHF7Ec5DLAYB","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-15T14:59:05Z","updated_at":"2022-05-15T14:59:05Z","author_association":"MEMBER","body":":smile: just for getting the regex to work!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126958593/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126958851","html_url":"https://github.com/apache/jena/pull/1307#issuecomment-1126958851","issue_url":"https://api.github.com/repos/apache/jena/issues/1307","id":1126958851,"node_id":"IC_kwDOAHF7Ec5DLAcD","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-15T15:00:28Z","updated_at":"2022-05-15T15:00:28Z","author_association":"MEMBER","body":"Awesome - the simpler (less dependencies) the better.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1126958851/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127452794","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1127452794","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1127452794,"node_id":"IC_kwDOAHF7Ec5DM5B6","user":{"login":"seebi","id":510452,"node_id":"MDQ6VXNlcjUxMDQ1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/510452?v=4","gravatar_id":"","url":"https://api.github.com/users/seebi","html_url":"https://github.com/seebi","followers_url":"https://api.github.com/users/seebi/followers","following_url":"https://api.github.com/users/seebi/following{/other_user}","gists_url":"https://api.github.com/users/seebi/gists{/gist_id}","starred_url":"https://api.github.com/users/seebi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seebi/subscriptions","organizations_url":"https://api.github.com/users/seebi/orgs","repos_url":"https://api.github.com/users/seebi/repos","events_url":"https://api.github.com/users/seebi/events{/privacy}","received_events_url":"https://api.github.com/users/seebi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T09:40:53Z","updated_at":"2022-05-16T09:40:53Z","author_association":"NONE","body":"> @seebi -- I'm guessing that in your architecture, the token is added before the original request and not based on a HTTP challenge. Is that correct?\r\n\r\ncorrect, the token is fetched from a different component (e.g. [keycloak](https://www.keycloak.org/)) and then added to all requests.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127452794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127453520","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1127453520","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1127453520,"node_id":"IC_kwDOAHF7Ec5DM5NQ","user":{"login":"seebi","id":510452,"node_id":"MDQ6VXNlcjUxMDQ1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/510452?v=4","gravatar_id":"","url":"https://api.github.com/users/seebi","html_url":"https://github.com/seebi","followers_url":"https://api.github.com/users/seebi/followers","following_url":"https://api.github.com/users/seebi/following{/other_user}","gists_url":"https://api.github.com/users/seebi/gists{/gist_id}","starred_url":"https://api.github.com/users/seebi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seebi/subscriptions","organizations_url":"https://api.github.com/users/seebi/orgs","repos_url":"https://api.github.com/users/seebi/repos","events_url":"https://api.github.com/users/seebi/events{/privacy}","received_events_url":"https://api.github.com/users/seebi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T09:41:36Z","updated_at":"2022-05-16T09:41:36Z","author_association":"NONE","body":"@Aklakan Do you need help in testing this?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127453520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127504412","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1127504412","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1127504412,"node_id":"IC_kwDOAHF7Ec5DNFoc","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T10:35:04Z","updated_at":"2022-05-16T10:35:04Z","author_association":"MEMBER","body":"The current PR needs the bearer token provided. \r\n\r\n@seebi sounds like our setup - we don't involve 401, the token is known to be needed and is always added.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127504412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127787732","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1127787732","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1127787732,"node_id":"IC_kwDOAHF7Ec5DOKzU","user":{"login":"seebi","id":510452,"node_id":"MDQ6VXNlcjUxMDQ1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/510452?v=4","gravatar_id":"","url":"https://api.github.com/users/seebi","html_url":"https://github.com/seebi","followers_url":"https://api.github.com/users/seebi/followers","following_url":"https://api.github.com/users/seebi/following{/other_user}","gists_url":"https://api.github.com/users/seebi/gists{/gist_id}","starred_url":"https://api.github.com/users/seebi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seebi/subscriptions","organizations_url":"https://api.github.com/users/seebi/orgs","repos_url":"https://api.github.com/users/seebi/repos","events_url":"https://api.github.com/users/seebi/events{/privacy}","received_events_url":"https://api.github.com/users/seebi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T15:03:12Z","updated_at":"2022-05-16T15:03:12Z","author_association":"NONE","body":"mhmm .. In our case requests without a token return a 401\r\n\r\n```\r\n∴ curl -H \"Authorization: Bearer $(cmemc admin token)\" \"$(cmemc config get DP_API_ENDPOINT)/proxy/default/sparql\"\r\n{\"title\":\"Bad Request\",\"status\":400,\"detail\":\"Required request parameter 'query' for method parameter type String is not present\"}\r\n\r\n∴ curl  \"$(cmemc config get DP_API_ENDPOINT)/proxy/default/sparql\"\r\n{\"title\":\"Unauthorized\",\"status\":401,\"detail\":\"Full authentication is required to access this resource\"}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127787732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127826896","html_url":"https://github.com/apache/jena/issues/1292#issuecomment-1127826896","issue_url":"https://api.github.com/repos/apache/jena/issues/1292","id":1127826896,"node_id":"IC_kwDOAHF7Ec5DOUXQ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T15:36:45Z","updated_at":"2022-05-18T21:16:03Z","author_association":"MEMBER","body":"As it stand currently, the PR will not crash (NPE) in the Jena client-side code for SPARQL operations when encountering bearer auth. Challenges for basic and digest are handled internally with registered user-password (no change there). Bearer auth is different because the app needs to get the token and tokens may have a limited lifetime.\r\n\r\nThis PR is the necessary part : https://github.com/apache/jena/issues/1292#issuecomment-1126020705\r\n> Adding challenge handling for bearer auth is probably doable but it's yet another step. Rather than delay everything PR https://github.com/apache/jena/pull/1301 at least fixes the original problems and should work when the bearer token is added - failure is a 401 exception.\r\n\r\nThe first one is a 400 due to the lack of `?query=`.  Presumably authentication should have been done before request parsing and so did happen.\r\n\r\nThe second is 401 and the calling code should either have added the token (@Aklakan current solution) or caught the 401 and retried with a token added. There is no Jena there that I can see.\r\n\r\nThe best Jena client-library can do is have a registry of callbacks so 401 causes a call out to app code to provide the token (see the current `AuthRequestModifier` which can add HTTP headers based on target URI @Aklakan has been using). Something to do carefully to avoid security leaks in multi-tenant situations.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127826896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127892545","html_url":"https://github.com/apache/jena/issues/1314#issuecomment-1127892545","issue_url":"https://api.github.com/repos/apache/jena/issues/1314","id":1127892545,"node_id":"IC_kwDOAHF7Ec5DOkZB","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T16:37:36Z","updated_at":"2022-05-16T16:37:36Z","author_association":"MEMBER","body":"Does this relate to [JENA-2309](https://issues.apache.org/jira/browse/JENA-2309)?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127892545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127950658","html_url":"https://github.com/apache/jena/issues/1314#issuecomment-1127950658","issue_url":"https://api.github.com/repos/apache/jena/issues/1314","id":1127950658,"node_id":"IC_kwDOAHF7Ec5DOylC","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T17:36:44Z","updated_at":"2022-05-16T17:37:15Z","author_association":"CONTRIBUTOR","body":"No, not really; I'll come back to #JENA-2309 soon (ideally this week, or at least next one).\r\n\r\nIts more related to my contribution of the ServiceExeutorRegistory and whether and how it would have to be revised.\r\nWe discussed bulk requests in service clauses quite a long time ago (e.g. the Lotico event back then) and it has been a recurring issue in general and in our group - so instead of always spending time on workarounds I thought maybe its time to try to tackle it :)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127950658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127991860","html_url":"https://github.com/apache/jena/pull/1315#issuecomment-1127991860","issue_url":"https://api.github.com/repos/apache/jena/issues/1315","id":1127991860,"node_id":"IC_kwDOAHF7Ec5DO8o0","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T18:22:31Z","updated_at":"2022-05-16T18:22:31Z","author_association":"MEMBER","body":"> It's currently a draft\r\n\r\nPlease set to \"draft\"!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127991860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127993244","html_url":"https://github.com/apache/jena/issues/1314#issuecomment-1127993244","issue_url":"https://api.github.com/repos/apache/jena/issues/1314","id":1127993244,"node_id":"IC_kwDOAHF7Ec5DO8-c","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-16T18:24:07Z","updated_at":"2022-05-16T18:24:07Z","author_association":"MEMBER","body":"Talking of finishing things ... \r\n... documentation for custom service execution for Wikidata would be good\r\n... the bearer auth should now work for you; it is naturally environment sensitive so the more validation the better","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1127993244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128861500","html_url":"https://github.com/apache/jena/issues/1318#issuecomment-1128861500","issue_url":"https://api.github.com/repos/apache/jena/issues/1318","id":1128861500,"node_id":"IC_kwDOAHF7Ec5DSQ88","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T13:20:01Z","updated_at":"2022-05-17T13:27:28Z","author_association":"MEMBER","body":"So the HTTP Authentication Challenge is coming back from whatever SPARQL server you are interacting with which you haven't specified.\r\n\r\nI'm unclear whether the individual parameter fields within the `WWW-Authenticate` header are permitted to have whitespace or not.\r\n\r\nFollowing the grammar an `auth-param` rule says Bad Whitespace may be present per [RFC 7230 Section 3.2.3](https://datatracker.ietf.org/doc/html/rfc7230#section-3.2.3):\r\n\r\n```\r\nauth-param = token BWS \"=\" BWS ( token / quoted-string )\r\n```\r\n\r\n> The BWS rule is used where the grammar allows optional whitespace\r\n>    only for historical reasons.  A sender MUST NOT generate BWS in\r\n>    messages.  A recipient MUST parse for such bad whitespace and remove\r\n>    it before interpreting the protocol element.\r\n> \r\n>      OWS            = *( SP / HTAB )\r\n>                     ; optional whitespace\r\n>      RWS            = 1*( SP / HTAB )\r\n>                     ; required whitespace\r\n>      BWS            = OWS\r\n>                     ; \"bad\" whitespace\r\n\r\nThe upshot of which is servers **MUST NOT** be producing whitespace here **BUT** recipients i.e. Jena, should strip and ignore such bad whitespace.\r\n\r\nAlthough that seems to be between parameters not within the parameters itself, the relevant grammar rule actually looks to be `quoted-string` ([RFC 7230 Section 3.2.6](https://datatracker.ietf.org/doc/html/rfc7230#section-3.2.6)) which says:\r\n\r\n>   A string of text is parsed as a single value if it is quoted using\r\n>    double-quote marks.\r\n> \r\n>      quoted-string  = DQUOTE *( qdtext / quoted-pair ) DQUOTE\r\n>      qdtext         = HTAB / SP /%x21 / %x23-5B / %x5D-7E / obs-text\r\n>      obs-text       = %x80-FF\r\n> \r\n>    Comments can be included in some HTTP header fields by surrounding\r\n>    the comment text with parentheses.  Comments are only allowed in\r\n>    fields containing \"comment\" as part of their field value definition.\r\n> \r\n>      comment        = \"(\" *( ctext / quoted-pair / comment ) \")\"\r\n>      ctext          = HTAB / SP / %x21-27 / %x2A-5B / %x5D-7E / obs-text\r\n> \r\n>    The backslash octet (\"\\\") can be used as a single-octet quoting\r\n>    mechanism within quoted-string and comment constructs.  Recipients\r\n>    that process the value of a quoted-string MUST handle a quoted-pair\r\n>    as if it were replaced by the octet following the backslash.\r\n\r\nWhich boils down to new lines not being valid in these parameters AFAICT.  So this looks like probably a server bug but maybe an area where Jena could be more forgiving?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128861500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128893670","html_url":"https://github.com/apache/jena/issues/1318#issuecomment-1128893670","issue_url":"https://api.github.com/repos/apache/jena/issues/1318","id":1128893670,"node_id":"IC_kwDOAHF7Ec5DSYzm","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T13:47:26Z","updated_at":"2022-05-17T13:47:52Z","author_association":"MEMBER","body":"The problem is in the outgoing credentials request after the 401 challenge.\r\n\r\nIt is the SPARQL string not being encoded and it has a newline in it; the JDK rejects the request locally. The server has only sent the 401 challenge which is legal and isn't involved in the exception cause at `Utils.newIAE`.\r\n\r\nThe \"uri\" auth param in a digest is the \"request-target\". That includes the query string by my reading of RFC7616->RFC7230 section 5.5\r\n\r\nBut that does not make sense in our situation\r\n* \"?query=\" and POST+application/sparql-results should be the same authentication. It is not like `/path?client=1234` where the query string is a subresource.\r\n* The auth support is by URI path and realm, not query string. The users/password applies to the endpoint.\r\n\r\nSo for the SPARQL case, a request-target of the URI path make sense to me (no query). This work with Jetty. This is not surprising because the Jetty resource is named by the URI without query string.\r\n\r\nPutting in the encoded query also works with Jetty `HttpLib.requestTarget` - use `getRawQuery` not `getQuery`.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128893670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128897900","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1128897900","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1128897900,"node_id":"IC_kwDOAHF7Ec5DSZ1s","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T13:51:00Z","updated_at":"2022-05-17T13:51:00Z","author_association":"MEMBER","body":"> There is also a second issue, which I added in upper the description: \"\"pathological case where every triple has the same subject\" In the [#1273 (comment)](https://github.com/apache/jena/pull/1273#discussion_r858521057) below [rvesse](https://github.com/rvesse) mentioned cases where there are few subjects with each containting many predicates and objects. In the sample graphs, there is one \"RealGrid_SV.xml\" with data matching this description. In this case Graph#add and Gaph#contains are getting increasingly slow. So I did some benchmarks that point out the problem: [graph_benchmarks_contains_20220504.xlsx](https://github.com/apache/jena/files/8618986/graph_benchmarks_contains_20220504.xlsx)\r\n\r\nSo I wouldn't get too worried about the pathological cases at large scale.  I just wanted to point that they exist, it's fine if for those cases performance drops off at scale but looking at the attached spreadsheet it seems like performance is still much better in most cases.\r\n\r\n> \r\n> I followed the tip to perform \"the contains() scan on the smallest list (or if any list is empty bypassing it entirely)\" - maybe it was too late in the night - but unfortunately, the overall perfomance was even worse. \r\n\r\nSometimes ideas don't pan out.  I suspect for this one that in most cases the individual lists are relatively small anyway so the cost of retrieving them from their respective hash maps actually outweighs the cost of scanning through the first list you retrieve (at least in aggregate terms)\r\n\r\n> So I tried a different approach by having sorted lists of triples in the node maps. After testing with different combinations of which maps to sort by which criteria I ended with a new implementation GraphMemUsingHashMapSorted in a separate [branch](https://github.com/arne-bdt/jena/tree/GraphMemUsingHashMapSorted).\" --> After weighing the pros and cons, it seems to me that this approach is more suitable. \r\n\r\nWe can always iterate and improve on the implementation later, having the initial improvement is a good first step.  Don't get too hung up on getting this perfect first time.\r\n\r\n> However, solving the deletion problem here is probably even more difficult. \r\n\r\nI don't see anything in the numbers that actually shows the deletion problem, can you expand on that?\r\n\r\nIn general I would expect that most of the time things are added to in-memory graphs rather that removed from them.  So in aggregate the improved performance for the add/contains may balance out any performance loss on deletion.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128897900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128905622","html_url":"https://github.com/apache/jena/issues/1318#issuecomment-1128905622","issue_url":"https://api.github.com/repos/apache/jena/issues/1318","id":1128905622,"node_id":"IC_kwDOAHF7Ec5DSbuW","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T13:57:27Z","updated_at":"2022-05-17T13:57:27Z","author_association":"MEMBER","body":"Extra oddity: as query strings for SPARQL can be long, there is a chance the HTTP request will exceed the server limit on request headers - the URI will be in the headers twice (request line and \"Authentication\" header). The total limit is often 8K but some nginx is 4K.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128905622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128909807","html_url":"https://github.com/apache/jena/issues/1318#issuecomment-1128909807","issue_url":"https://api.github.com/repos/apache/jena/issues/1318","id":1128909807,"node_id":"IC_kwDOAHF7Ec5DScvv","user":{"login":"ebremer","id":4094961,"node_id":"MDQ6VXNlcjQwOTQ5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4094961?v=4","gravatar_id":"","url":"https://api.github.com/users/ebremer","html_url":"https://github.com/ebremer","followers_url":"https://api.github.com/users/ebremer/followers","following_url":"https://api.github.com/users/ebremer/following{/other_user}","gists_url":"https://api.github.com/users/ebremer/gists{/gist_id}","starred_url":"https://api.github.com/users/ebremer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebremer/subscriptions","organizations_url":"https://api.github.com/users/ebremer/orgs","repos_url":"https://api.github.com/users/ebremer/repos","events_url":"https://api.github.com/users/ebremer/events{/privacy}","received_events_url":"https://api.github.com/users/ebremer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T14:01:07Z","updated_at":"2022-05-17T14:01:07Z","author_association":"CONTRIBUTOR","body":"FYI - The server I am executing this against is Virtuoso.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1128909807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129004685","html_url":"https://github.com/apache/jena/issues/1309#issuecomment-1129004685","issue_url":"https://api.github.com/repos/apache/jena/issues/1309","id":1129004685,"node_id":"IC_kwDOAHF7Ec5DSz6N","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T15:21:10Z","updated_at":"2022-05-17T15:21:10Z","author_association":"MEMBER","body":"Would you care to submit a PR?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129004685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129746525","html_url":"https://github.com/apache/jena/pull/1316#issuecomment-1129746525","issue_url":"https://api.github.com/repos/apache/jena/issues/1316","id":1129746525,"node_id":"IC_kwDOAHF7Ec5DVpBd","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T08:52:00Z","updated_at":"2022-05-18T08:52:00Z","author_association":"CONTRIBUTOR","body":"Now squashed","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129746525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129993712","html_url":"https://github.com/apache/jena/pull/1322#issuecomment-1129993712","issue_url":"https://api.github.com/repos/apache/jena/issues/1322","id":1129993712,"node_id":"IC_kwDOAHF7Ec5DWlXw","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T13:06:09Z","updated_at":"2022-05-18T13:06:09Z","author_association":"MEMBER","body":"@afs Shouldn't these also have been generated from the templates in the first place?  Or was this an artefact of these commands coming in from a separate dev branch (particular for the `xload` stuff)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1129993712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1130548082","html_url":"https://github.com/apache/jena/pull/1322#issuecomment-1130548082","issue_url":"https://api.github.com/repos/apache/jena/issues/1322","id":1130548082,"node_id":"IC_kwDOAHF7Ec5DYsty","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:05:40Z","updated_at":"2022-05-19T10:19:40Z","author_association":"MEMBER","body":"@rvesse \r\n\r\nThese commands are slightly different to the template.bin.\r\nAll the template ones vary only in the executable class name.\r\n\r\n`jena` either prints details or shifts to find the command.\r\n`xload-*` are the scripts for the TDB1 version of xloader.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1130548082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131561779","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1131561779","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1131561779,"node_id":"IC_kwDOAHF7Ec5DckMz","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T11:17:50Z","updated_at":"2022-05-19T11:17:50Z","author_association":"MEMBER","body":"Reading the JavaCC issue, it seems the query size is not the problem.\r\n\r\nIt is the presence of large tokens over 2048 bytes.\r\n\r\n@SimonBin Is that correct?\r\n\r\n`SimpleCharStream` and `JavaCharStream` are not Jena code. They are generated by JavaCC. They are committed to the codebase so people building Jena do not need to install JavaCC themselves.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131561779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131570414","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1131570414","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1131570414,"node_id":"IC_kwDOAHF7Ec5DcmTu","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T11:27:29Z","updated_at":"2022-05-19T11:27:29Z","author_association":"CONTRIBUTOR","body":"Yes I believe this is correct","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131570414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131615262","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1131615262","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1131615262,"node_id":"IC_kwDOAHF7Ec5DcxQe","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T12:18:34Z","updated_at":"2022-05-19T12:18:34Z","author_association":"MEMBER","body":"> original code by @LorenzBuehmann\r\n\r\nThank you for putting that in. It is very important.\r\n\r\nCould you expand on that statement? Is it referring to the original code this PR is changing or the code in the PR itself?\r\n\r\nIf the latter, if @LorenzBuehmann is the owner, then they should submit it.\r\n(Who is the IP owner for code in SANSA-Stack?)\r\n\r\nWe can not accept code from a 3rd party unless the license of the original code allows it, and even then, the preference is not to take code but to receive it from the original author. That way, the IP situation is clear.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1131615262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132126541","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1132126541","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1132126541,"node_id":"IC_kwDOAHF7Ec5DeuFN","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:39:42Z","updated_at":"2022-05-19T19:39:42Z","author_association":"MEMBER","body":"I don't see a PR on the javacc issue that is suitable. \r\n\r\nThere is an interesting suggestion about lexical states. ARQ only parses from strings, not streams, and only from data already already converted UTF-8. Access to the input would enable slicing literals direly out of the string.\r\n\r\nRather than disrupt the existing processing, it could be done with a new token e.g. `X\"....\"`.\r\n\r\nUSER_CHAR_STREAM is also an option.\r\n\r\nThere is some investigation to do such as updating for Javacc 7.0 (the Jena codebase files were produced from JavaCC 6.0). #1328.\r\n\r\nFYI: The different parsers use different techniques to handle unicode and it is in some tests about surrogate pairs.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132126541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132232162","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1132232162","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1132232162,"node_id":"IC_kwDOAHF7Ec5DfH3i","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T21:39:12Z","updated_at":"2022-05-19T21:39:12Z","author_association":"CONTRIBUTOR","body":"I tried to regenerate the grammars with javacc/javacc#85 applied, as that sounds promising. (you can check the code here: https://github.com/SANSA-Stack/jena/commit/95c41d29c73167fa19da5ad0f501131f54ae3d58 ) but there seems to be a bug in javacc/javacc#85 which makes the parsing fail with ContentIllegalInProlog","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132232162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132601536","html_url":"https://github.com/apache/jena/pull/1323#issuecomment-1132601536","issue_url":"https://api.github.com/repos/apache/jena/issues/1323","id":1132601536,"node_id":"IC_kwDOAHF7Ec5DgiDA","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T08:01:30Z","updated_at":"2022-05-20T08:01:30Z","author_association":"MEMBER","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132601536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132604558","html_url":"https://github.com/apache/jena/issues/1306#issuecomment-1132604558","issue_url":"https://api.github.com/repos/apache/jena/issues/1306","id":1132604558,"node_id":"IC_kwDOAHF7Ec5DgiyO","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T08:04:46Z","updated_at":"2022-05-20T08:04:46Z","author_association":"MEMBER","body":"Same title as #1251. Is this a duplicate? continuation? sub-task?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132604558/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132617962","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1132617962","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1132617962,"node_id":"IC_kwDOAHF7Ec5DgmDq","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T08:17:56Z","updated_at":"2022-05-20T08:20:37Z","author_association":"CONTRIBUTOR","body":"Hi @afs , it's fine - we're working in the same research group, @SimonBin just kindly cleaned up my initial code base and opened a new branch just containing the minimal changes addressing the issue. The PR is based on just the relevant code. Sorry for confusion.\r\nWe're working on the SANSA-Stack, it's basically one of our research projects, not an organization or the like - if you think this makes it more complicated nevertheless (I don't see why), I can also make a PR from my own fork.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132617962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132626859","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1132626859","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1132626859,"node_id":"IC_kwDOAHF7Ec5DgoOr","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T08:27:21Z","updated_at":"2022-05-20T08:28:25Z","author_association":"CONTRIBUTOR","body":"#### Update we moved the whole Apache Jena fork to our research group AKSW - we wanted to do this anyways.\r\n\r\n@afs  Let us know if this is still a blocker for you, then I'll re-create the PR from my own fork","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132626859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132654841","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1132654841","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1132654841,"node_id":"IC_kwDOAHF7Ec5DgvD5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T08:58:20Z","updated_at":"2022-05-20T08:58:20Z","author_association":"MEMBER","body":"I'm not so worried about the repo and you have a ICLA on file.\r\n\r\nWho owns the IP and copyright of code produced by the research group?\r\n\r\nBug fixes and \"small, obvious\" things aren't IP issues but there are now several substantial contributions, which is great.\r\n\r\nIf it is AKSW who owns the IP.copyright, then maybe an CCLA (it has named contributors) is simplest so that things are completely clear now, and there are no questions later.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132654841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132666702","html_url":"https://github.com/apache/jena/issues/1251#issuecomment-1132666702","issue_url":"https://api.github.com/repos/apache/jena/issues/1251","id":1132666702,"node_id":"IC_kwDOAHF7Ec5Dgx9O","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T09:10:35Z","updated_at":"2022-05-20T09:10:35Z","author_association":"MEMBER","body":"Oh snap. Me and my bad memory. Sorry @afs, ended up duplicating it in #1306. I will close this one since I updated the other issue :+1: Good catch.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132666702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132676979","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1132676979","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1132676979,"node_id":"IC_kwDOAHF7Ec5Dg0dz","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T09:21:02Z","updated_at":"2022-05-20T09:21:02Z","author_association":"MEMBER","body":"javacc/javacc#85 has not been integrated into javacc releases. \r\n\r\nJena running it's own fork of javacc is highly undesirable - it's technical debt. Users must be able to build Jena and while we ship the generated code in a Jena release so uses don't have to run javacc themselves (e.g. only old versions are available in Ubuntu app repos) they should be able to.\r\n\r\nI'm not even sure  javacc/javacc#85 is the right solution - it has access overhead. Maybe that's why `ArrayList` grows by 1.5 each step.\r\n\r\nThe case of 100Mb literals in a query is not mainstream :smile: . (Maybe search by SHA512?)\r\n\r\n#1328 (JavaCC 7.0 upgrade) is in Jena/main.\r\n\r\n(Background: the main RIOT parsers do not use JavaCC.)\r\n\r\n`ContentIllegalInProlog` is an XML error. Maybe it should not have the `?xml` part. RDF XML Literals do not have the `<?xml>`.\r\nIf you change your example to an rdf:XMLLiteral, there is a warning.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132676979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132702434","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1132702434","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1132702434,"node_id":"IC_kwDOAHF7Ec5Dg6ri","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T09:47:50Z","updated_at":"2022-05-20T09:47:50Z","author_association":"CONTRIBUTOR","body":"Meh, not sure about the legal status of AKSW nowadays - it was our former research group at University of Leipzig, technically our employer is different. Let me re-create the PR from my own account such that I'm not wasting your time and speed things up. Sorry for confusion.\r\nFeel free to close this PR please","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132702434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132705696","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1132705696","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1132705696,"node_id":"IC_kwDOAHF7Ec5Dg7eg","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T09:50:52Z","updated_at":"2022-05-20T09:50:52Z","author_association":"CONTRIBUTOR","body":"nb JavaCC 7 does not influence this performance","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132705696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132720003","html_url":"https://github.com/apache/jena/pull/1326#issuecomment-1132720003","issue_url":"https://api.github.com/repos/apache/jena/issues/1326","id":1132720003,"node_id":"IC_kwDOAHF7Ec5Dg--D","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T10:03:33Z","updated_at":"2022-05-20T13:20:21Z","author_association":"MEMBER","body":"@LorenzBuehmann -- the genie is out of the bottle :-)\r\n\r\nThe key is what is in your personal terms and conditions of employment with respect to IP. Most enterprises are \"employer owns\"; research groups, institutes etc can be different. And ASKW has 3 hosts.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132720003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132750662","html_url":"https://github.com/apache/jena/pull/1331#issuecomment-1132750662","issue_url":"https://api.github.com/repos/apache/jena/issues/1331","id":1132750662,"node_id":"IC_kwDOAHF7Ec5DhGdG","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T10:38:36Z","updated_at":"2022-05-20T10:38:36Z","author_association":"MEMBER","body":"Also #1326.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132750662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132968115","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1132968115","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1132968115,"node_id":"IC_kwDOAHF7Ec5Dh7iz","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T14:32:17Z","updated_at":"2022-05-20T14:33:35Z","author_association":"CONTRIBUTOR","body":"> The case of 100Mb literals in a query is not mainstream smile . (Maybe search by SHA512?)\r\n\r\nTrue.\r\nBut to give some background (why SHA512 is not a workaround here): we're currently trying to make use of GeoSPARQL in our projects, we gathered boundaries/borders of administrative regions from an external dataset provided as GML (which in fact is XML) - for USA the polygon is ~100MB, we tried to deal with this initially, spotted the limitation in Jena, and of course in the meantime simplified the polygon directly via SPARQL query function call (with some custom Jena function unfortunately, GeoSPARQL standard lacks a lots of quite things people in my opinion would be happy to have  - good thing, we can extend Jena for our work)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1132968115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1133226505","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1133226505","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1133226505,"node_id":"IC_kwDOAHF7Ec5Di6oJ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-20T19:10:13Z","updated_at":"2022-05-20T19:10:13Z","author_association":"MEMBER","body":"Does quite explain why there is a 100Mb literal in a query but no matter.\r\n\r\nSPARQL parsing is central so any changes need to be done carefully, and be proven and mature. Like javacc, I'm thinking about unforeseen consequences.\r\n\r\nThe parser to use is (surprise!) controlled by a registry `SPARQLParserRegistry` so extension code can change the parser for an experimental one.\r\n\r\nAlso --\r\n\r\nThe jaavcc issue suggests a different approach which is also more efficient - lexical states and lexical actions. The string for token image can be created directly without going through the javacc buffering.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1133226505/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1133548083","html_url":"https://github.com/apache/jena/issues/1324#issuecomment-1133548083","issue_url":"https://api.github.com/repos/apache/jena/issues/1324","id":1133548083,"node_id":"IC_kwDOAHF7Ec5DkJIz","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-21T06:36:41Z","updated_at":"2022-05-21T06:36:41Z","author_association":"CONTRIBUTOR","body":"Fair. But even if we cannot fix this - also given that it's more a corner case with literals in MB scale and beyond - we wanted to at least report this behavior - could be a good FAQ entry or the like.\r\nLuckily, in our case we own both Fuseki instances `A` (with the polygons) and `B` (with the points), thus, we indeed switched the direction, gathering the polygon via a `SERVICE` request from `A` and doing the point in polygon check in `B` compared to passing the polygon from `A` to `B` to make the point in polygon check via the `SERVICE` request. ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1133548083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]