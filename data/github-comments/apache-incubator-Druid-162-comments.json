[{"url":"https://api.github.com/repos/apache/druid/issues/comments/334841894","html_url":"https://github.com/apache/druid/pull/4913#issuecomment-334841894","issue_url":"https://api.github.com/repos/apache/druid/issues/4913","id":334841894,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg0MTg5NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T18:59:30Z","updated_at":"2017-10-06T18:59:30Z","author_association":"CONTRIBUTOR","body":"@himanshug I made the changes you suggested, and also added unwrapping of ChannelExceptions and IOExceptions (moved that from RTAC to DLC).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334841894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334845237","html_url":"https://github.com/apache/druid/pull/4913#issuecomment-334845237","issue_url":"https://api.github.com/repos/apache/druid/issues/4913","id":334845237,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg0NTIzNw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T19:13:23Z","updated_at":"2017-10-06T19:13:23Z","author_association":"CONTRIBUTOR","body":"@gianm thanks","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334845237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334847880","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-334847880","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":334847880,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg0Nzg4MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T19:25:31Z","updated_at":"2017-10-06T19:25:31Z","author_association":"CONTRIBUTOR","body":"@gianm sure, having explicit config to enable batching support would be there ( that is what @pjain1 explained in https://github.com/druid-io/druid/issues/4373#issuecomment-334572651 ) . so if that config is not explicitly enabled and we got multiple elements in list returned by `InputRowParser.parseBatch(kafka-record-bytes)` then task would just loudly fail.\r\n\r\nI think you mean adding `addAll(..)` method to `AppenderatorDriver` as all rows in the batch might not belong to same segment. In any case, we would have something like that to ensure replica consistency or else would add more comments here.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334847880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334860887","html_url":"https://github.com/apache/druid/issues/4915#issuecomment-334860887","issue_url":"https://api.github.com/repos/apache/druid/issues/4915","id":334860887,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg2MDg4Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T20:24:18Z","updated_at":"2017-10-06T20:24:18Z","author_association":"MEMBER","body":"Looks to me like a bug.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334860887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334866608","html_url":"https://github.com/apache/druid/pull/4914#issuecomment-334866608","issue_url":"https://api.github.com/repos/apache/druid/issues/4914","id":334866608,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg2NjYwOA==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T20:50:22Z","updated_at":"2017-10-06T20:50:22Z","author_association":"MEMBER","body":"opening/closing PR to restart TeamCity build","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334866608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334866913","html_url":"https://github.com/apache/druid/pull/4914#issuecomment-334866913","issue_url":"https://api.github.com/repos/apache/druid/issues/4914","id":334866913,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg2NjkxMw==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T20:51:41Z","updated_at":"2017-10-06T20:51:41Z","author_association":"MEMBER","body":"seems like it does not restart TeamCity build..not sure how my change is causing inspection to fail","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334866913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334870838","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-334870838","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":334870838,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg3MDgzOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T21:09:14Z","updated_at":"2017-10-06T21:09:14Z","author_association":"CONTRIBUTOR","body":"Ah yeah I did mean `addAll` on AppenderatorDriver.\r\n\r\nIf you do that then I think we don't need to worry about breaking exactly-onceness. As long as AppenderatorDriver can promise to either index the whole batch, or none of it (and I think it can promise that) then exactly-onceness is preserved.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334870838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334880689","html_url":"https://github.com/apache/druid/pull/4532#issuecomment-334880689","issue_url":"https://api.github.com/repos/apache/druid/issues/4532","id":334880689,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg4MDY4OQ==","user":{"login":"chunghochen","id":254066,"node_id":"MDQ6VXNlcjI1NDA2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/254066?v=4","gravatar_id":"","url":"https://api.github.com/users/chunghochen","html_url":"https://github.com/chunghochen","followers_url":"https://api.github.com/users/chunghochen/followers","following_url":"https://api.github.com/users/chunghochen/following{/other_user}","gists_url":"https://api.github.com/users/chunghochen/gists{/gist_id}","starred_url":"https://api.github.com/users/chunghochen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunghochen/subscriptions","organizations_url":"https://api.github.com/users/chunghochen/orgs","repos_url":"https://api.github.com/users/chunghochen/repos","events_url":"https://api.github.com/users/chunghochen/events{/privacy}","received_events_url":"https://api.github.com/users/chunghochen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T22:01:52Z","updated_at":"2017-10-06T22:01:52Z","author_association":"CONTRIBUTOR","body":"@jon-wei,\r\n\r\nThanks so much for looking into this! And confirming my PR is fine. :-)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334880689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334896071","html_url":"https://github.com/apache/druid/pull/4532#issuecomment-334896071","issue_url":"https://api.github.com/repos/apache/druid/issues/4532","id":334896071,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDg5NjA3MQ==","user":{"login":"chunghochen","id":254066,"node_id":"MDQ6VXNlcjI1NDA2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/254066?v=4","gravatar_id":"","url":"https://api.github.com/users/chunghochen","html_url":"https://github.com/chunghochen","followers_url":"https://api.github.com/users/chunghochen/followers","following_url":"https://api.github.com/users/chunghochen/following{/other_user}","gists_url":"https://api.github.com/users/chunghochen/gists{/gist_id}","starred_url":"https://api.github.com/users/chunghochen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunghochen/subscriptions","organizations_url":"https://api.github.com/users/chunghochen/orgs","repos_url":"https://api.github.com/users/chunghochen/repos","events_url":"https://api.github.com/users/chunghochen/events{/privacy}","received_events_url":"https://api.github.com/users/chunghochen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-07T00:05:55Z","updated_at":"2017-10-07T00:06:14Z","author_association":"CONTRIBUTOR","body":"@jihoonson \r\n>> @chunghochen I think it's almost done. Left some trivial comments. In addition, please comment on #4532 (comment).\r\n\r\nGreat!  Hope my latest commits address your concerns?  I also commented on https://github.com/druid-io/druid/pull/4532#discussion_r139832117. \r\nNot sure why this pull request still shows \"Changes requested\"?\r\nHopefully, this pull request can be quickly closed.  And it won't be dragged on forever. :-)\r\nThanks so much for your help!!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334896071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334906394","html_url":"https://github.com/apache/druid/issues/4773#issuecomment-334906394","issue_url":"https://api.github.com/repos/apache/druid/issues/4773","id":334906394,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDkwNjM5NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-07T03:08:55Z","updated_at":"2017-10-07T03:08:55Z","author_association":"MEMBER","body":"Another problem this thing could help with, is avoiding pushing a lot of segments though memory during initial loading from the local cache. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334906394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334906559","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-334906559","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":334906559,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDkwNjU1OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-07T03:12:45Z","updated_at":"2017-10-07T03:12:45Z","author_association":"MEMBER","body":"> No, but they all need to be a part of larger \"big memory block\", that should be continuous as a whole.\r\n\r\nHowever, this is not needed, because we could convert multiple direct memory allocations of < 2 GB size virtually into one \"giant\". The whole point of this requirement is the ability to operate with a single `long offset` in certain hot loops, instead of pair `ByteBuffer/Memory + offset`. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334906559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/334933488","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-334933488","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":334933488,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDkzMzQ4OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-07T12:59:50Z","updated_at":"2017-10-07T12:59:50Z","author_association":"CONTRIBUTOR","body":"@gianm thank you for the testing. You're correct. ConcurrentGrouperTest generates too many files. Fixed now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/334933488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335005050","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-335005050","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":335005050,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTAwNTA1MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-08T13:00:01Z","updated_at":"2017-10-08T13:00:01Z","author_association":"CONTRIBUTOR","body":"This proposal looks good. Regarding the situation when an expensive query blocks all other queries, @leventov's solution (https://github.com/druid-io/druid/issues/4422#issuecomment-309556971) sounds good, but, in the end, I think it should be addressed as a separate issue like resource preemption.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335005050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335042743","html_url":"https://github.com/apache/druid/issues/4773#issuecomment-335042743","issue_url":"https://api.github.com/repos/apache/druid/issues/4773","id":335042743,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTA0Mjc0Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-08T22:16:44Z","updated_at":"2017-10-08T22:16:44Z","author_association":"MEMBER","body":"http://www.scylladb.com/2017/10/05/io-access-methods-scylla/ is a good article on this topic","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335042743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335056352","html_url":"https://github.com/apache/druid/pull/4873#issuecomment-335056352","issue_url":"https://api.github.com/repos/apache/druid/issues/4873","id":335056352,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTA1NjM1Mg==","user":{"login":"hzy001","id":9567254,"node_id":"MDQ6VXNlcjk1NjcyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9567254?v=4","gravatar_id":"","url":"https://api.github.com/users/hzy001","html_url":"https://github.com/hzy001","followers_url":"https://api.github.com/users/hzy001/followers","following_url":"https://api.github.com/users/hzy001/following{/other_user}","gists_url":"https://api.github.com/users/hzy001/gists{/gist_id}","starred_url":"https://api.github.com/users/hzy001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzy001/subscriptions","organizations_url":"https://api.github.com/users/hzy001/orgs","repos_url":"https://api.github.com/users/hzy001/repos","events_url":"https://api.github.com/users/hzy001/events{/privacy}","received_events_url":"https://api.github.com/users/hzy001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T02:21:05Z","updated_at":"2017-10-09T02:21:05Z","author_association":"CONTRIBUTOR","body":"Anyway, the original links can jump to the more up to date links.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335056352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335094594","html_url":"https://github.com/apache/druid/issues/4865#issuecomment-335094594","issue_url":"https://api.github.com/repos/apache/druid/issues/4865","id":335094594,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTA5NDU5NA==","user":{"login":"stevenchen3","id":2478428,"node_id":"MDQ6VXNlcjI0Nzg0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/2478428?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenchen3","html_url":"https://github.com/stevenchen3","followers_url":"https://api.github.com/users/stevenchen3/followers","following_url":"https://api.github.com/users/stevenchen3/following{/other_user}","gists_url":"https://api.github.com/users/stevenchen3/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenchen3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenchen3/subscriptions","organizations_url":"https://api.github.com/users/stevenchen3/orgs","repos_url":"https://api.github.com/users/stevenchen3/repos","events_url":"https://api.github.com/users/stevenchen3/events{/privacy}","received_events_url":"https://api.github.com/users/stevenchen3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T08:31:50Z","updated_at":"2017-10-09T08:31:50Z","author_association":"NONE","body":"@gianm thanks for the explanation.  If I query directly from historicals, for example, to get all raw data, will the results include duplicate entries (segments)? If I understand correctly, segments are replicated among historicals. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335094594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335251994","html_url":"https://github.com/apache/druid/pull/4914#issuecomment-335251994","issue_url":"https://api.github.com/repos/apache/druid/issues/4914","id":335251994,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI1MTk5NA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T18:44:43Z","updated_at":"2017-10-09T18:44:43Z","author_association":"CONTRIBUTOR","body":"I think those failures were carried over from other PRs, probably some PR(s) that introduced those TC failures were merged without addressing them","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335251994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335256327","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-335256327","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":335256327,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI1NjMyNw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T19:01:51Z","updated_at":"2017-10-09T19:02:10Z","author_association":"CONTRIBUTOR","body":"@gianm yes adding `AppenderatorDriver.addAll(..)` is fine. However regarding promising indexing of whole batch or none, do you mean to ignore \"maxRowsInMemory\"  so that you index whole batch ? or do you mean adding some batch add capability to IncrementalIndex as well where it either accepts or rejects whole batch?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335256327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335266828","html_url":"https://github.com/apache/druid/pull/4923#issuecomment-335266828","issue_url":"https://api.github.com/repos/apache/druid/issues/4923","id":335266828,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI2NjgyOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T19:46:50Z","updated_at":"2017-10-09T19:46:50Z","author_association":"MEMBER","body":"@liuzx32 what did you want to do?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335266828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335268131","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-335268131","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":335268131,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI2ODEzMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T19:52:34Z","updated_at":"2017-10-09T19:54:17Z","author_association":"CONTRIBUTOR","body":"I was thinking of the Appenderator having an `addAll` method too, and it should take care of making sure that the following are true:\r\n\r\n1. a commit must not happen between two rows from the same batch\r\n2. all rows in the same batch must end up in the same segment once the merge happens\r\n\r\n(1) might require ignoring \"maxRowsInMemory\" by going slightly under or over it. If it's going over, it will need some changes to IncrementalIndex. If it's going under, it will probably require implementing a \"persist without committing\" method in Appenderator such that the earlier sink can be persisted with part of a batch, and a new sink can be created to hold the rest of the batch. The \"without committing\" is important since it would be a violation to persist+commit a partial batch.\r\n\r\n(2) might require ignoring \"maxRowsPerSegment\" by going slightly under or over it.\r\n\r\nI think this all can be done in a deterministic way, such that replicas still make the same decisions as each other and we can still enable exactly-once ingestion without needing to track offsets-within-batches.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335268131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335284231","html_url":"https://github.com/apache/druid/pull/4902#issuecomment-335284231","issue_url":"https://api.github.com/repos/apache/druid/issues/4902","id":335284231,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI4NDIzMQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T20:53:06Z","updated_at":"2017-10-09T20:53:06Z","author_association":"CONTRIBUTOR","body":":+1:\r\n\r\nCan you backport as well","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335284231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335286142","html_url":"https://github.com/apache/druid/issues/4926#issuecomment-335286142","issue_url":"https://api.github.com/repos/apache/druid/issues/4926","id":335286142,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI4NjE0Mg==","user":{"login":"jonatasfreitasv","id":8763192,"node_id":"MDQ6VXNlcjg3NjMxOTI=","avatar_url":"https://avatars.githubusercontent.com/u/8763192?v=4","gravatar_id":"","url":"https://api.github.com/users/jonatasfreitasv","html_url":"https://github.com/jonatasfreitasv","followers_url":"https://api.github.com/users/jonatasfreitasv/followers","following_url":"https://api.github.com/users/jonatasfreitasv/following{/other_user}","gists_url":"https://api.github.com/users/jonatasfreitasv/gists{/gist_id}","starred_url":"https://api.github.com/users/jonatasfreitasv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonatasfreitasv/subscriptions","organizations_url":"https://api.github.com/users/jonatasfreitasv/orgs","repos_url":"https://api.github.com/users/jonatasfreitasv/repos","events_url":"https://api.github.com/users/jonatasfreitasv/events{/privacy}","received_events_url":"https://api.github.com/users/jonatasfreitasv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T20:58:09Z","updated_at":"2017-10-09T20:58:09Z","author_association":"NONE","body":"*Max number of columns","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335286142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335286429","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-335286429","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":335286429,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI4NjQyOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T20:58:53Z","updated_at":"2017-10-09T21:25:25Z","author_association":"CONTRIBUTOR","body":"@gianm I and @pjain1  talked about it a little and it appears that things stay simple by going a bit over for both `maxRowInMemory` and `maxRowsPerSegment`. So, let us update IncrementalIndex so that it can optionally go over `max-size` when asked. this would maintain exactly-once. (sidenote: we are already going \"over\" for `maxRowsInSegment` limit in #4815 to maintain consistency of checkpoints across replicas )\r\nabove is probably simpler than the going \"under\" and \"persist without commit\" approach where we might have to keep disk state inconsistent (persisted data having more events than what is stored in commit metadata) for prolonged periods or persisting small sinks depending on implementation.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335286429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335288683","html_url":"https://github.com/apache/druid/pull/4927#issuecomment-335288683","issue_url":"https://api.github.com/repos/apache/druid/issues/4927","id":335288683,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI4ODY4Mw==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T21:05:01Z","updated_at":"2017-10-09T21:05:01Z","author_association":"MEMBER","body":"@jon-wei @himanshug ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335288683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335290682","html_url":"https://github.com/apache/druid/pull/4927#issuecomment-335290682","issue_url":"https://api.github.com/repos/apache/druid/issues/4927","id":335290682,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTI5MDY4Mg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T21:10:55Z","updated_at":"2017-10-09T21:10:55Z","author_association":"CONTRIBUTOR","body":":+1: @pjain1 feel free to merge once build is done.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335290682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335309089","html_url":"https://github.com/apache/druid/issues/4373#issuecomment-335309089","issue_url":"https://api.github.com/repos/apache/druid/issues/4373","id":335309089,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTMwOTA4OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-09T22:38:42Z","updated_at":"2017-10-09T22:38:42Z","author_association":"CONTRIBUTOR","body":"That sounds good to me. I agree that going a little bit over maxRowsInMemory and maxRowsPerSegment will lead to the simplest solution.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335309089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335324751","html_url":"https://github.com/apache/druid/pull/4823#issuecomment-335324751","issue_url":"https://api.github.com/repos/apache/druid/issues/4823","id":335324751,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTMyNDc1MQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T00:27:10Z","updated_at":"2017-10-10T00:27:10Z","author_association":"CONTRIBUTOR","body":"Making some modifications to this re: password initialization, marking WIP","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335324751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335337940","html_url":"https://github.com/apache/druid/pull/4885#issuecomment-335337940","issue_url":"https://api.github.com/repos/apache/druid/issues/4885","id":335337940,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTMzNzk0MA==","user":{"login":"silverbullet233","id":3675229,"node_id":"MDQ6VXNlcjM2NzUyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3675229?v=4","gravatar_id":"","url":"https://api.github.com/users/silverbullet233","html_url":"https://github.com/silverbullet233","followers_url":"https://api.github.com/users/silverbullet233/followers","following_url":"https://api.github.com/users/silverbullet233/following{/other_user}","gists_url":"https://api.github.com/users/silverbullet233/gists{/gist_id}","starred_url":"https://api.github.com/users/silverbullet233/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silverbullet233/subscriptions","organizations_url":"https://api.github.com/users/silverbullet233/orgs","repos_url":"https://api.github.com/users/silverbullet233/repos","events_url":"https://api.github.com/users/silverbullet233/events{/privacy}","received_events_url":"https://api.github.com/users/silverbullet233/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T02:04:54Z","updated_at":"2017-10-10T02:04:54Z","author_association":"NONE","body":"What's going on about this issue? Many days have passed. Are there any other problems? @gianm \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335337940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335351014","html_url":"https://github.com/apache/druid/pull/4815#issuecomment-335351014","issue_url":"https://api.github.com/repos/apache/druid/issues/4815","id":335351014,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTM1MTAxNA==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T03:35:09Z","updated_at":"2017-10-10T03:35:09Z","author_association":"CONTRIBUTOR","body":"thanks @pjain1, I've started reviewing this and will post comments in the next few days","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335351014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335351881","html_url":"https://github.com/apache/druid/pull/4885#issuecomment-335351881","issue_url":"https://api.github.com/repos/apache/druid/issues/4885","id":335351881,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTM1MTg4MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T03:42:26Z","updated_at":"2017-10-10T03:42:33Z","author_association":"CONTRIBUTOR","body":"Sorry @silver--bullet, the past week has been a busy one.\r\n\r\nI still don't see why this can't be rolled into `equalDistribution` and `fillCapacity` as an extra `limitConfig` parameter. Then it would be more composable. It would work with fillCapacity, and it would work in combination with an affinity config as well. For example a user could do:\r\n\r\n```\r\n\"selectStrategy\" : {\r\n  \"type\" : \"fillCapacity\",\r\n  \"affinityConfig\" : { ... },\r\n  \"limitConfig\" : { ... }\r\n}\r\n```\r\n\r\nDoes it make sense or is there some reason why this is a bad idea?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335351881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335353759","html_url":"https://github.com/apache/druid/pull/4885#issuecomment-335353759","issue_url":"https://api.github.com/repos/apache/druid/issues/4885","id":335353759,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTM1Mzc1OQ==","user":{"login":"silverbullet233","id":3675229,"node_id":"MDQ6VXNlcjM2NzUyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3675229?v=4","gravatar_id":"","url":"https://api.github.com/users/silverbullet233","html_url":"https://github.com/silverbullet233","followers_url":"https://api.github.com/users/silverbullet233/followers","following_url":"https://api.github.com/users/silverbullet233/following{/other_user}","gists_url":"https://api.github.com/users/silverbullet233/gists{/gist_id}","starred_url":"https://api.github.com/users/silverbullet233/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silverbullet233/subscriptions","organizations_url":"https://api.github.com/users/silverbullet233/orgs","repos_url":"https://api.github.com/users/silverbullet233/repos","events_url":"https://api.github.com/users/silverbullet233/events{/privacy}","received_events_url":"https://api.github.com/users/silverbullet233/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T03:58:26Z","updated_at":"2017-10-10T03:58:26Z","author_association":"NONE","body":"I have also considered a similar approach before, this is indeed more reasonable and more elegant, but changed to be slightly larger. Then I will refactor the selection strategy, we only keep three types(equalDistribution,fillCapacity,javascript),affinity configuration and limit the configuration as an optional parameter, how do you feel like?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335353759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335354820","html_url":"https://github.com/apache/druid/pull/4885#issuecomment-335354820","issue_url":"https://api.github.com/repos/apache/druid/issues/4885","id":335354820,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTM1NDgyMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T04:04:34Z","updated_at":"2017-10-10T04:04:34Z","author_association":"CONTRIBUTOR","body":"If that works, it sounds good to me.\r\n\r\nWe do have to keep equalDistributionWithAffinity and fillCapacityWithAffinity for backwards compatibility, although they are already marked as deprecated.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335354820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335472568","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335472568","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335472568,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTQ3MjU2OA==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T13:29:48Z","updated_at":"2017-10-10T13:29:48Z","author_association":"CONTRIBUTOR","body":"@himanshug is there anything else that needs to be done here to merge this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335472568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335476675","html_url":"https://github.com/apache/druid/pull/4754#issuecomment-335476675","issue_url":"https://api.github.com/repos/apache/druid/issues/4754","id":335476675,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTQ3NjY3NQ==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T13:43:26Z","updated_at":"2017-10-10T13:43:26Z","author_association":"MEMBER","body":"@gianm: Can you also take a look at this PR ? \r\nespecially the changes in expressions/druid-sql, I think you are most familiar with them. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335476675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335532227","html_url":"https://github.com/apache/druid/pull/4921#issuecomment-335532227","issue_url":"https://api.github.com/repos/apache/druid/issues/4921","id":335532227,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTUzMjIyNw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T16:33:31Z","updated_at":"2017-10-10T16:33:31Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335532227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335533507","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335533507","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335533507,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTUzMzUwNw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T16:37:51Z","updated_at":"2017-10-10T16:37:51Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335533507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335533628","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335533628","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335533628,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTUzMzYyOA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T16:38:14Z","updated_at":"2017-10-10T16:38:14Z","author_association":"CONTRIBUTOR","body":"@kevinconaway can you sign the CLA at http://druid.io/community/cla.html?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335533628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335534141","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335534141","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335534141,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTUzNDE0MQ==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T16:39:55Z","updated_at":"2017-10-10T16:39:55Z","author_association":"CONTRIBUTOR","body":"@fjy done","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335534141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335538713","html_url":"https://github.com/apache/druid/pull/4889#issuecomment-335538713","issue_url":"https://api.github.com/repos/apache/druid/issues/4889","id":335538713,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTUzODcxMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T16:54:30Z","updated_at":"2017-10-10T16:54:30Z","author_association":"CONTRIBUTOR","body":"Pushed a commit disabling group-by alias, and raised #4932 as a follow up.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335538713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335540524","html_url":"https://github.com/apache/druid/pull/4749#issuecomment-335540524","issue_url":"https://api.github.com/repos/apache/druid/issues/4749","id":335540524,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU0MDUyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T17:00:33Z","updated_at":"2017-10-10T17:00:33Z","author_association":"CONTRIBUTOR","body":"@SpotXPeterCunningham I'm really sorry, I didn't notice your patch here before writing #4832, which is in master now. Would that new functionality work for you?\r\n\r\nSorry again for not noticing this, it would have probably made my life easier that day!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335540524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335551239","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335551239","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335551239,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU1MTIzOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T17:39:06Z","updated_at":"2017-10-10T17:39:06Z","author_association":"CONTRIBUTOR","body":"@gianm would you like to take a look at it? or else I can merge given that it has two approvals.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335551239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335562104","html_url":"https://github.com/apache/druid/pull/4903#issuecomment-335562104","issue_url":"https://api.github.com/repos/apache/druid/issues/4903","id":335562104,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU2MjEwNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T18:17:11Z","updated_at":"2017-10-10T18:17:11Z","author_association":"CONTRIBUTOR","body":"thanks @kevinconaway!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335562104/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335563285","html_url":"https://github.com/apache/druid/pull/4754#issuecomment-335563285","issue_url":"https://api.github.com/repos/apache/druid/issues/4754","id":335563285,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU2MzI4NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T18:21:26Z","updated_at":"2017-10-10T18:21:26Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 I'll take a look at those parts in particular","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335563285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335570591","html_url":"https://github.com/apache/druid/pull/4889#issuecomment-335570591","issue_url":"https://api.github.com/repos/apache/druid/issues/4889","id":335570591,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU3MDU5MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T18:47:14Z","updated_at":"2017-10-10T18:47:14Z","author_association":"CONTRIBUTOR","body":"Removed WIP tag -- tests are passing. Pushed a commit with some updated docs.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335570591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335574377","html_url":"https://github.com/apache/druid/pull/4935#issuecomment-335574377","issue_url":"https://api.github.com/repos/apache/druid/issues/4935","id":335574377,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU3NDM3Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T19:00:20Z","updated_at":"2017-10-10T19:00:20Z","author_association":"MEMBER","body":"This field is assigned in constructor, and there is non-trivial logic to compute the value for it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335574377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335588466","html_url":"https://github.com/apache/druid/pull/4762#issuecomment-335588466","issue_url":"https://api.github.com/repos/apache/druid/issues/4762","id":335588466,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTU4ODQ2Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T19:53:49Z","updated_at":"2017-10-10T19:53:49Z","author_association":"MEMBER","body":"@jihoonson did you have a chance to look at this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335588466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335601192","html_url":"https://github.com/apache/druid/issues/1847#issuecomment-335601192","issue_url":"https://api.github.com/repos/apache/druid/issues/1847","id":335601192,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYwMTE5Mg==","user":{"login":"egor-ryashin","id":14215045,"node_id":"MDQ6VXNlcjE0MjE1MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/14215045?v=4","gravatar_id":"","url":"https://api.github.com/users/egor-ryashin","html_url":"https://github.com/egor-ryashin","followers_url":"https://api.github.com/users/egor-ryashin/followers","following_url":"https://api.github.com/users/egor-ryashin/following{/other_user}","gists_url":"https://api.github.com/users/egor-ryashin/gists{/gist_id}","starred_url":"https://api.github.com/users/egor-ryashin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egor-ryashin/subscriptions","organizations_url":"https://api.github.com/users/egor-ryashin/orgs","repos_url":"https://api.github.com/users/egor-ryashin/repos","events_url":"https://api.github.com/users/egor-ryashin/events{/privacy}","received_events_url":"https://api.github.com/users/egor-ryashin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T20:41:01Z","updated_at":"2017-10-10T20:41:01Z","author_association":"CONTRIBUTOR","body":"Adding a compound index (dataSource, start) to a table should fix that after this PR https://github.com/druid-io/druid/pull/4600 has been merged.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335601192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335601944","html_url":"https://github.com/apache/druid/issues/4937#issuecomment-335601944","issue_url":"https://api.github.com/repos/apache/druid/issues/4937","id":335601944,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYwMTk0NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T20:43:46Z","updated_at":"2017-10-10T20:43:46Z","author_association":"MEMBER","body":"Seems to me that this is because column values are added while query is in progress. Related to #4049. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335601944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335613889","html_url":"https://github.com/apache/druid/issues/4937#issuecomment-335613889","issue_url":"https://api.github.com/repos/apache/druid/issues/4937","id":335613889,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYxMzg4OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T21:28:57Z","updated_at":"2017-10-10T21:29:04Z","author_association":"CONTRIBUTOR","body":"Recently I also saw this maxId-checking ISE in StringDimensionIndexer get thrown on a realtime task:\r\n\r\n```java\r\n      @Override\r\n      public String lookupName(int id)\r\n      {\r\n        if (id >= maxId) {\r\n          throw new ISE(\"id[%d] >= maxId[%d]\", id, maxId);\r\n        }\r\n        final String strValue = getActualValue(id, false);\r\n        return extractionFn == null ? strValue : extractionFn.apply(strValue);\r\n      }\r\n```\r\n\r\nI (unfortunately) lost the stack trace, but it would be also explained by some bug related to #4049.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335613889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335614386","html_url":"https://github.com/apache/druid/pull/4749#issuecomment-335614386","issue_url":"https://api.github.com/repos/apache/druid/issues/4749","id":335614386,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYxNDM4Ng==","user":{"login":"SpotXPeterCunningham","id":17167879,"node_id":"MDQ6VXNlcjE3MTY3ODc5","avatar_url":"https://avatars.githubusercontent.com/u/17167879?v=4","gravatar_id":"","url":"https://api.github.com/users/SpotXPeterCunningham","html_url":"https://github.com/SpotXPeterCunningham","followers_url":"https://api.github.com/users/SpotXPeterCunningham/followers","following_url":"https://api.github.com/users/SpotXPeterCunningham/following{/other_user}","gists_url":"https://api.github.com/users/SpotXPeterCunningham/gists{/gist_id}","starred_url":"https://api.github.com/users/SpotXPeterCunningham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpotXPeterCunningham/subscriptions","organizations_url":"https://api.github.com/users/SpotXPeterCunningham/orgs","repos_url":"https://api.github.com/users/SpotXPeterCunningham/repos","events_url":"https://api.github.com/users/SpotXPeterCunningham/events{/privacy}","received_events_url":"https://api.github.com/users/SpotXPeterCunningham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T21:31:04Z","updated_at":"2017-10-11T09:18:25Z","author_association":"CONTRIBUTOR","body":"Hi Gian,\r\n\r\nIt's no problem at all. I have been off work for a month as was in an\r\naccident. So never chased the change and I'm not surprised it fell by the wayside.\r\n\r\nI am pretty new to the Druid codebase so the change i made was probs not\r\nthe most sensible way to do things anyway but was enough to get us going in\r\nthe direction we needed at the time without too much change. I just took\r\nthe whole JsonParser and reused that as it was just the first thing that\r\nmade sense to me with my limited understanding of the code base.\r\n\r\nI've not actually looked at your patch yet as am on a mobile phone right\r\nnow with no access to a computer. I return to work on Thursday and will\r\ncheck it out then and hopefully it works for us. If not we can sort\r\nsomething out.\r\n\r\nThanks\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335614386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335622319","html_url":"https://github.com/apache/druid/pull/4935#issuecomment-335622319","issue_url":"https://api.github.com/repos/apache/druid/issues/4935","id":335622319,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYyMjMxOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T22:05:36Z","updated_at":"2017-10-10T22:05:36Z","author_association":"MEMBER","body":"@jon-wei this block and field that you removed in this PR were added just in #3873. Don't we add a bug or regression here? I couldn't answer this question because I don't know what #3873 is about and why this field was added.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335622319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335626398","html_url":"https://github.com/apache/druid/pull/4935#issuecomment-335626398","issue_url":"https://api.github.com/repos/apache/druid/issues/4935","id":335626398,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYyNjM5OA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T22:25:39Z","updated_at":"2017-10-10T22:26:17Z","author_association":"CONTRIBUTOR","body":"Looks like that block was reintroduced by #3873 as part of a bad merge that restored some code that was removed by https://github.com/druid-io/druid/pull/4131/files#diff-7564ae1186b5d71c461ade89580058d3. \r\n\r\nThe limitFn and postProcFn it sets are not being used by anything so the block should be removed entirely.\r\n\r\nThe equivalent logic is now in `GroupByQuery.makePostProcessingFn()` and this block in `GroupByStrategyV2`:\r\n\r\n```\r\n    // Don't apply limit here for inner results, that will be pushed down to the BufferHashGrouper\r\n    if (query.getContextBoolean(CTX_KEY_OUTERMOST, true)) {\r\n      return query.postProcess(rowSequence);\r\n    } else {\r\n      return rowSequence;\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335626398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335627867","html_url":"https://github.com/apache/druid/issues/4599#issuecomment-335627867","issue_url":"https://api.github.com/repos/apache/druid/issues/4599","id":335627867,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTYyNzg2Nw==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-10T22:33:14Z","updated_at":"2017-10-10T22:33:14Z","author_association":"CONTRIBUTOR","body":"Implemented in #4607 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335627867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335681878","html_url":"https://github.com/apache/druid/pull/4871#issuecomment-335681878","issue_url":"https://api.github.com/repos/apache/druid/issues/4871","id":335681878,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTY4MTg3OA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T04:52:40Z","updated_at":"2017-10-11T04:52:40Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335681878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335689224","html_url":"https://github.com/apache/druid/pull/4749#issuecomment-335689224","issue_url":"https://api.github.com/repos/apache/druid/issues/4749","id":335689224,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTY4OTIyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T05:42:42Z","updated_at":"2017-10-11T05:42:42Z","author_association":"CONTRIBUTOR","body":"Oh gosh, I hope you're ok!\r\n\r\nLet us know if you've got any questions when you get back…","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335689224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335690247","html_url":"https://github.com/apache/druid/issues/4938#issuecomment-335690247","issue_url":"https://api.github.com/repos/apache/druid/issues/4938","id":335690247,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTY5MDI0Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T05:49:37Z","updated_at":"2017-10-11T05:49:37Z","author_association":"CONTRIBUTOR","body":"@Zyc1 it's really the shell that is foiling you. You can see that if you use echo instead of curl, like `echo '{\"query\":\"SELECT * FROM nanzi_timeseries_data_D WHERE station_name='yunnanlu' limit 10\"}'`.\r\n\r\nYou could work around it by escaping the single quotes using shell-escapes, or by saving your query to a file and then using curl's `-d @filename` feature.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335690247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335697741","html_url":"https://github.com/apache/druid/pull/4919#issuecomment-335697741","issue_url":"https://api.github.com/repos/apache/druid/issues/4919","id":335697741,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTY5Nzc0MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T06:37:06Z","updated_at":"2017-10-11T06:37:06Z","author_association":"CONTRIBUTOR","body":"@QijingLi It looks like a useful feature, although please consider the following.\r\n\r\n- Please raise PRs against master, not release branches like 0.10.1\r\n- Please follow code style -- check the contributing guidelines for IntelliJ code style config, and also checkstyle will identify issues to a degree.\r\n- The mechanism you use in this patch depends on parsing the task time out of the task ID, which is kind of sketchy: it's not required nor guaranteed to be there. This seems like something we could instead use TaskRunnerWorkItem for. Does it have the info you need?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335697741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335836218","html_url":"https://github.com/apache/druid/issues/4940#issuecomment-335836218","issue_url":"https://api.github.com/repos/apache/druid/issues/4940","id":335836218,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTgzNjIxOA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T14:48:44Z","updated_at":"2017-10-11T14:59:32Z","author_association":"CONTRIBUTOR","body":"`io.druid.server.lookup.cache.LookupCoordinatorManager#deleteLookup` https://github.com/druid-io/druid/blob/druid-0.10.1/server/src/main/java/io/druid/server/lookup/cache/LookupCoordinatorManager.java#L269-L270 could have a line that removes any tier from the config if the update is an empty hash map as a garbage cleanup kind of thing.\r\n\r\nCan you expand on your use case where \"empty\" lookup tiers causes a problem, and what the effect of that problem is?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335836218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335850123","html_url":"https://github.com/apache/druid/issues/4683#issuecomment-335850123","issue_url":"https://api.github.com/repos/apache/druid/issues/4683","id":335850123,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg1MDEyMw==","user":{"login":"randerzander","id":1692914,"node_id":"MDQ6VXNlcjE2OTI5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1692914?v=4","gravatar_id":"","url":"https://api.github.com/users/randerzander","html_url":"https://github.com/randerzander","followers_url":"https://api.github.com/users/randerzander/followers","following_url":"https://api.github.com/users/randerzander/following{/other_user}","gists_url":"https://api.github.com/users/randerzander/gists{/gist_id}","starred_url":"https://api.github.com/users/randerzander/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/randerzander/subscriptions","organizations_url":"https://api.github.com/users/randerzander/orgs","repos_url":"https://api.github.com/users/randerzander/repos","events_url":"https://api.github.com/users/randerzander/events{/privacy}","received_events_url":"https://api.github.com/users/randerzander/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T15:29:37Z","updated_at":"2017-10-11T15:29:37Z","author_association":"NONE","body":"@gianm , thanks for the suggestion!\r\n\r\nFor future reference for others, I followed the docs and configured the druid.sql.* properties in $DRUID_HOME/conf/druid/runtime.properties, but my environment was running using the settings in $DRUID_HOME/conf-quickstart instead which confused things for awhile.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335850123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335852225","html_url":"https://github.com/apache/druid/issues/4683#issuecomment-335852225","issue_url":"https://api.github.com/repos/apache/druid/issues/4683","id":335852225,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg1MjIyNQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T15:35:40Z","updated_at":"2017-10-11T15:35:40Z","author_association":"CONTRIBUTOR","body":"@randerzander great to hear!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335852225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335852275","html_url":"https://github.com/apache/druid/issues/4683#issuecomment-335852275","issue_url":"https://api.github.com/repos/apache/druid/issues/4683","id":335852275,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg1MjI3NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T15:35:48Z","updated_at":"2017-10-11T15:35:48Z","author_association":"CONTRIBUTOR","body":"Fixed by #4851.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335852275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335912634","html_url":"https://github.com/apache/druid/issues/4605#issuecomment-335912634","issue_url":"https://api.github.com/repos/apache/druid/issues/4605","id":335912634,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTkxMjYzNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T18:56:56Z","updated_at":"2017-10-11T18:57:29Z","author_association":"CONTRIBUTOR","body":"@b-slim do you have any thoughts on this? Unfortunately it fell by the wayside but I'm hoping we can figure it out quickly now…\r\n\r\nIMO it's a 0.11.0 release blocker for the reasons outlined in the original comment. So I -1'ed the 0.11.0-rc1 (sorry) in https://groups.google.com/d/msg/druid-development/PB-A04ZP-3U/LeXDCGxdBAAJ. But hopefully the solution is relatively straightforward.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335912634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335923281","html_url":"https://github.com/apache/druid/issues/4605#issuecomment-335923281","issue_url":"https://api.github.com/repos/apache/druid/issues/4605","id":335923281,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTkyMzI4MQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T19:35:25Z","updated_at":"2017-10-11T19:35:25Z","author_association":"CONTRIBUTOR","body":"@gianm looking at it. totally forgot about this issue.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335923281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335925836","html_url":"https://github.com/apache/druid/issues/4773#issuecomment-335925836","issue_url":"https://api.github.com/repos/apache/druid/issues/4773","id":335925836,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTkyNTgzNg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T19:44:00Z","updated_at":"2017-10-11T19:44:00Z","author_association":"MEMBER","body":"Also, it would allow to limit the amount of memory devoted to page cache, if need anything different than \"all available\" memory.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335925836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335951998","html_url":"https://github.com/apache/druid/pull/4916#issuecomment-335951998","issue_url":"https://api.github.com/repos/apache/druid/issues/4916","id":335951998,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk1MTk5OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T21:20:08Z","updated_at":"2017-10-11T21:20:08Z","author_association":"CONTRIBUTOR","body":"what is the use case for this endpoint ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335951998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335963489","html_url":"https://github.com/apache/druid/pull/4916#issuecomment-335963489","issue_url":"https://api.github.com/repos/apache/druid/issues/4916","id":335963489,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk2MzQ4OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T22:09:10Z","updated_at":"2017-10-11T22:09:10Z","author_association":"MEMBER","body":"@himanshug readiness check in [Marathon](https://mesosphere.github.io/marathon/)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335963489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335972857","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-335972857","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":335972857,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3Mjg1Nw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:01:21Z","updated_at":"2017-10-11T23:01:21Z","author_association":"CONTRIBUTOR","body":"@gianm  Due the the timeline restriction i haven't put to much thoughts on how to do it in better way, and also trying to avoid having to alter all the test cases to allow testing both modes. please take look and let me know what you think.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335972857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973077","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-335973077","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":335973077,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3MzA3Nw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:02:50Z","updated_at":"2017-10-11T23:02:50Z","author_association":"CONTRIBUTOR","body":"@gianm if you are ok with this wacky way, will update the corresponding docs and runtime property files.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973188","html_url":"https://github.com/apache/druid/pull/4832#issuecomment-335973188","issue_url":"https://api.github.com/repos/apache/druid/issues/4832","id":335973188,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3MzE4OA==","user":{"login":"Igosuki","id":406150,"node_id":"MDQ6VXNlcjQwNjE1MA==","avatar_url":"https://avatars.githubusercontent.com/u/406150?v=4","gravatar_id":"","url":"https://api.github.com/users/Igosuki","html_url":"https://github.com/Igosuki","followers_url":"https://api.github.com/users/Igosuki/followers","following_url":"https://api.github.com/users/Igosuki/following{/other_user}","gists_url":"https://api.github.com/users/Igosuki/gists{/gist_id}","starred_url":"https://api.github.com/users/Igosuki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Igosuki/subscriptions","organizations_url":"https://api.github.com/users/Igosuki/orgs","repos_url":"https://api.github.com/users/Igosuki/repos","events_url":"https://api.github.com/users/Igosuki/events{/privacy}","received_events_url":"https://api.github.com/users/Igosuki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:03:31Z","updated_at":"2017-10-11T23:03:31Z","author_association":"CONTRIBUTOR","body":"@gianm This is really great, thanks Gian ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973861","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-335973861","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":335973861,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3Mzg2MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:07:59Z","updated_at":"2017-10-11T23:07:59Z","author_association":"CONTRIBUTOR","body":"Thanks for looking at it quickly @b-slim!\r\n\r\nAn issue I see here is this will basically use FloatSum for everything in legacy mode. That's no good since at query time we still want to use DoubleSum for query time aggregation, or else we'll lose precision. I think a better solution would be to return `\"float\"` from `getTypeName()` in the Double-typed aggregators in legacy mode. IIRC that will only affect ingestion.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335973861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335974470","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-335974470","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":335974470,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3NDQ3MA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:11:58Z","updated_at":"2017-10-11T23:11:58Z","author_association":"CONTRIBUTOR","body":"I get your point you want to store as float and aggregate as double to avoid accumulation of errors, sounds legit. Let me see what I can do with your suggestion. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335974470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/335975544","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-335975544","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":335975544,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTk3NTU0NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-11T23:18:25Z","updated_at":"2017-10-11T23:18:25Z","author_association":"CONTRIBUTOR","body":"Yeah, that's how it works in 0.10: doubleSum means \"store as float and aggregate as double\". The legacy mode should do the same. I _think_ changing `getTypeName()` would be enough although it's still worth testing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/335975544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336003808","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336003808","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336003808,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwMzgwOA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T02:38:35Z","updated_at":"2017-10-12T02:39:32Z","author_association":"CONTRIBUTOR","body":"@gianm thanks, I think this should work, still, I have to fix all the tests.\r\nI don't think that we can test both branches, so we need to choose one path. \r\nIf this looks good to you will start hacking the tests ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336003808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336005209","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336005209","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336005209,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNTIwOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T02:48:20Z","updated_at":"2017-10-12T02:48:20Z","author_association":"CONTRIBUTOR","body":"Why is it not possible to test both branches?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336005209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336005973","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336005973","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336005973,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNTk3Mw==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T02:53:42Z","updated_at":"2017-10-12T02:53:42Z","author_association":"CONTRIBUTOR","body":"@leventov but for local cache (caffeine) it should still read and write? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336005973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336006601","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336006601","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336006601,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNjYwMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T02:57:53Z","updated_at":"2017-10-12T02:57:53Z","author_association":"CONTRIBUTOR","body":"If historicals are configured to use a remote cache, and broker caching is disabled, then I would think that we still want historicals to read from remote cache. (Otherwise it would be pointless)\r\n\r\nDisabling broker caching is somewhat common, since _enabling_ the broker cache prevents historicals from fully merging their results (they need to send them by-segment to the broker).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336006601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007284","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336007284","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336007284,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNzI4NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T03:02:32Z","updated_at":"2017-10-20T17:48:32Z","author_association":"MEMBER","body":"> but for local cache (caffeine) it should still read and write?\r\n\r\nYes\r\n\r\n> If historicals are configured to use a remote cache, and broker caching is disabled, then I would think that we still want historicals to read from remote cache. (Otherwise it would be pointless)\r\n\r\nRemote caching on historicals, while there is no caching on brokers, meets only one point (\"smooth transition\") and it feels like too little for me, to justify using remote cache at all.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007484","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336007484","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336007484,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNzQ4NA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T03:03:49Z","updated_at":"2017-10-12T03:03:49Z","author_association":"CONTRIBUTOR","body":"@gianm another cache methodology is to disable populate cache on brokers but enable use cache on brokers.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007679","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336007679","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336007679,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNzY3OQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T03:05:04Z","updated_at":"2017-10-12T03:05:04Z","author_association":"CONTRIBUTOR","body":"@leventov even though the brokers can read the cache, they do (optionally) limit the number of segment cache results they ask for to prevent overwhelming the cache system with a huge get request that would never finish fetching in the timeout.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007722","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336007722","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336007722,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAwNzcyMg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T03:05:24Z","updated_at":"2017-10-12T03:05:24Z","author_association":"MEMBER","body":"BTW yes - symmetric idea is to only *read* from remote cache on brokers, but not write (because historicals are \"responsible\" for that) -- if it is not done already","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336007722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336010944","html_url":"https://github.com/apache/druid/issues/4947#issuecomment-336010944","issue_url":"https://api.github.com/repos/apache/druid/issues/4947","id":336010944,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAxMDk0NA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T03:30:14Z","updated_at":"2017-10-12T03:30:14Z","author_association":"CONTRIBUTOR","body":"I think this can be accomplished with a customization of the hybrid cache in an extension, and shouldn't need any core changes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336010944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336025792","html_url":"https://github.com/apache/druid/pull/4948#issuecomment-336025792","issue_url":"https://api.github.com/repos/apache/druid/issues/4948","id":336025792,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAyNTc5Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T05:36:35Z","updated_at":"2017-10-12T05:36:35Z","author_association":"CONTRIBUTOR","body":"Tagged with 0.11.0 since it is a bug.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336025792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336035426","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-336035426","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":336035426,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAzNTQyNg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T06:41:15Z","updated_at":"2017-10-12T06:41:15Z","author_association":"CONTRIBUTOR","body":"@gianm do you have more comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336035426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336036880","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-336036880","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":336036880,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjAzNjg4MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T06:49:34Z","updated_at":"2017-10-12T06:57:34Z","author_association":"CONTRIBUTOR","body":"@jihoonson I asked @jon-wei to take a look at this tomorrow and then we should be good. I probably won't review it closely myself. The only question I have is a high level one. It used to be that the combining of spill files happened in an http thread, but now it will happen in the processing thread pool. What happens if they generate merged rows faster than the http thread can send them out to the client?\r\n\r\nWill they queue up infinitely in memory and will the historical run OOM? Or will they block processing threads and prevent other queries from running? Or something else?\r\n\r\nThis kind of thing is just on my mind since #4933 recently came up for a similar issue on the broker, and I'm wondering if it can happen here.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336036880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336041757","html_url":"https://github.com/apache/druid/pull/4948#issuecomment-336041757","issue_url":"https://api.github.com/repos/apache/druid/issues/4948","id":336041757,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjA0MTc1Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T07:14:38Z","updated_at":"2017-10-12T07:14:38Z","author_association":"CONTRIBUTOR","body":"@gianm thanks for the quick review!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336041757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336123642","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-336123642","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":336123642,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjEyMzY0Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T12:49:33Z","updated_at":"2017-10-13T01:16:14Z","author_association":"CONTRIBUTOR","body":"> It used to be that the combining of spill files happened in an http thread, but now it will happen in the processing thread pool. What happens if they generate merged rows faster than the http thread can send them out to the client?\r\n\r\nEach processing thread has a merge buffer of a fixed size. Once the buffer is full, they are blocked until some buffer space becomes available for further merging. StreamingMergeSortedGrouper respects the query timeout, so if the http thread consumes the merged rows very slowly, that query will be failed with a timeout exception. However, it can still block other queries until it's expired and this might be a problem.\r\n\r\nSo, I talked with @gianm and added a new configuration for the concurrency hint for parallel combining. The default value of the configuration is 1 which turns off the parallel combining feature.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336123642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336128271","html_url":"https://github.com/apache/druid/pull/4774#issuecomment-336128271","issue_url":"https://api.github.com/repos/apache/druid/issues/4774","id":336128271,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjEyODI3MQ==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T13:03:52Z","updated_at":"2017-10-12T13:04:02Z","author_association":"CONTRIBUTOR","body":"@kevinconaway I've found the culprit. It turned out that the failures were caused by some older data appearing, for segments which were first created with \"stock\" 0.10 Druid. And they had a different `shardSpec` config.\r\nSo a mistake on our side in the end, although it would be nice if Druid reported something more meaningful than `NullPointerException` :-).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336128271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336162672","html_url":"https://github.com/apache/druid/pull/4774#issuecomment-336162672","issue_url":"https://api.github.com/repos/apache/druid/issues/4774","id":336162672,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjE2MjY3Mg==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T14:54:25Z","updated_at":"2017-10-12T14:54:25Z","author_association":"CONTRIBUTOR","body":">  although it would be nice if Druid reported something more meaningful than NullPointerException\r\n\r\nFor sure.  That said, I do believe that this should fail fast and throw an exception rather than silently ignoring or rejecting the data.  If Druid hadn't thrown an error, you might not have noticed the missing data until well later, making it difficult to detect what happened.\r\n\r\nThoughts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336162672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336210242","html_url":"https://github.com/apache/druid/pull/4758#issuecomment-336210242","issue_url":"https://api.github.com/repos/apache/druid/issues/4758","id":336210242,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjIxMDI0Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T17:33:42Z","updated_at":"2017-10-12T17:33:42Z","author_association":"MEMBER","body":"@a2l007 could you please finish this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336210242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336216213","html_url":"https://github.com/apache/druid/pull/4758#issuecomment-336216213","issue_url":"https://api.github.com/repos/apache/druid/issues/4758","id":336216213,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjIxNjIxMw==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T17:55:24Z","updated_at":"2017-10-12T17:55:24Z","author_association":"CONTRIBUTOR","body":"@leventov I have updated the logging as requested. Do you have any pending feedback?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336216213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336216980","html_url":"https://github.com/apache/druid/pull/4950#issuecomment-336216980","issue_url":"https://api.github.com/repos/apache/druid/issues/4950","id":336216980,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjIxNjk4MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T17:58:11Z","updated_at":"2017-10-12T17:58:11Z","author_association":"CONTRIBUTOR","body":"@leventov can you take a look please?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336216980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336248151","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336248151","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336248151,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI0ODE1MQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T19:56:04Z","updated_at":"2017-10-12T19:56:04Z","author_association":"CONTRIBUTOR","body":"@gianm  am exploring this and trying to see if it is doable to have both but there are a hundred of tests that need to get adjusted and don't think is gonna be that easy to add a specific branch for every test. \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336248151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336252070","html_url":"https://github.com/apache/druid/pull/4952#issuecomment-336252070","issue_url":"https://api.github.com/repos/apache/druid/issues/4952","id":336252070,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI1MjA3MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T20:11:25Z","updated_at":"2017-10-12T20:11:25Z","author_association":"CONTRIBUTOR","body":"Is this necessary? I thought that the JVM will initialize bytebuffers to zero upon allocation, which should touch them. I've noticed that the buffers can take a few seconds to allocate upon Druid startup, and I always assumed that was due to initialization.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336252070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336252345","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336252345","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336252345,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI1MjM0NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T20:12:38Z","updated_at":"2017-10-12T20:12:38Z","author_association":"CONTRIBUTOR","body":"@b-slim I think the current tests are all for the non-legacy path; would it work to generally keep most of them the same, but add tests for legacy mode to a few key test suites? (Probably something related to indexing and something related to querying)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336252345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336254758","html_url":"https://github.com/apache/druid/pull/4952#issuecomment-336254758","issue_url":"https://api.github.com/repos/apache/druid/issues/4952","id":336254758,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI1NDc1OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T20:22:13Z","updated_at":"2017-10-12T20:22:13Z","author_association":"MEMBER","body":"@gianm indeed, thanks","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336254758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336258381","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336258381","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336258381,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI1ODM4MQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T20:36:15Z","updated_at":"2017-10-12T20:36:15Z","author_association":"CONTRIBUTOR","body":"@gianm I like your idea but I don't think it can not be done without hacking around the tests system properties,  since the default is legacy mode I can see how I can overwrite that when I run mvn manually, but let say your run the test via your favorite IDE (eg Intellij) the test will fail unless you set the property your self. Do you see my point?  So we are left with \r\n fix the tests and make it pass with legacy mode by default \r\nand/or \r\n fix all the test to pass transparently either on legacy or as double 64.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336258381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336263408","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336263408","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336263408,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI2MzQwOA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T20:52:35Z","updated_at":"2017-10-12T20:52:35Z","author_association":"CONTRIBUTOR","body":"@gianm  am trying to introduce some deltas to the test to avoid the precision issue let see how far we can go with that. Then will see how to fix the rest. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336263408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336278352","html_url":"https://github.com/apache/druid/pull/4944#issuecomment-336278352","issue_url":"https://api.github.com/repos/apache/druid/issues/4944","id":336278352,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI3ODM1Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T21:32:38Z","updated_at":"2017-10-12T21:32:44Z","author_association":"CONTRIBUTOR","body":"@b-slim IntelliJ will respect mvn test properties set through `<argLine>` if the appropriate checkboxes are checked (below). We already have a few in the main pom.xml under `maven-surefire-plugin`.\r\n\r\n@nishantmonu51 has a similar property in #4754 and uses a pom based strategy to switch which mode the tests get run in. Maybe something similar would work here.\r\n\r\n![image](https://user-images.githubusercontent.com/1214075/31520216-fdbb5612-af59-11e7-9697-1dd142e23efe.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336278352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336281628","html_url":"https://github.com/apache/druid/pull/4758#issuecomment-336281628","issue_url":"https://api.github.com/repos/apache/druid/issues/4758","id":336281628,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI4MTYyOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T21:43:38Z","updated_at":"2017-10-12T21:43:38Z","author_association":"MEMBER","body":"@himanshug @drcrallen more comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336281628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/336298243","html_url":"https://github.com/apache/druid/pull/4943#issuecomment-336298243","issue_url":"https://api.github.com/repos/apache/druid/issues/4943","id":336298243,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjI5ODI0Mw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-12T22:40:50Z","updated_at":"2017-10-12T22:40:50Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/336298243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]