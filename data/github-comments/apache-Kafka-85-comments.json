[{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240042873","html_url":"https://github.com/apache/kafka/pull/1742#issuecomment-240042873","issue_url":"https://api.github.com/repos/apache/kafka/issues/1742","id":240042873,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDA0Mjg3Mw==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T08:53:56Z","updated_at":"2016-08-16T08:53:56Z","author_association":"CONTRIBUTOR","body":"@guozhangwang @ijuma @junrao\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240042873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240061751","html_url":"https://github.com/apache/kafka/pull/1742#issuecomment-240061751","issue_url":"https://api.github.com/repos/apache/kafka/issues/1742","id":240061751,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDA2MTc1MQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T10:11:45Z","updated_at":"2016-08-16T10:11:45Z","author_association":"MEMBER","body":"Thanks for the PR. I had a quick look, but I didn't look at the logic carefully (for the benefit of other reviewers).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240061751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240125261","html_url":"https://github.com/apache/kafka/pull/1736#issuecomment-240125261","issue_url":"https://api.github.com/repos/apache/kafka/issues/1736","id":240125261,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDEyNTI2MQ==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T14:47:53Z","updated_at":"2016-08-16T14:47:53Z","author_association":"CONTRIBUTOR","body":"@guozhangwang the same test has failed in other builds, so it appears to be unrelated to your changes\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240125261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240130134","html_url":"https://github.com/apache/kafka/pull/1743#issuecomment-240130134","issue_url":"https://api.github.com/repos/apache/kafka/issues/1743","id":240130134,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDEzMDEzNA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T15:02:45Z","updated_at":"2016-08-16T15:02:57Z","author_association":"MEMBER","body":"I suggest doing this on `trunk` where we can follow the same approach we did for the server. That is, we remove the special-case for V0 below and close the stream in a finally.\n\n``` java\nif (entry.record().magic() > Record.MAGIC_VALUE_V0) {\n                this.logEntries = new ArrayDeque<>();\n                long wrapperRecordTimestamp = entry.record().timestamp();\n                while (true) {\n                    try {\n                        LogEntry logEntry = getNextEntryFromStream();\n                        Record recordWithTimestamp = new Record(logEntry.record().buffer(),\n                                                                wrapperRecordTimestamp,\n                                                                entry.record().timestampType());\n                        logEntries.add(new LogEntry(logEntry.offset(), recordWithTimestamp));\n                    } catch (EOFException e) {\n                        break;\n                    } catch (IOException e) {\n                        throw new KafkaException(e);\n                    }\n                }\n                this.absoluteBaseOffset = wrapperRecordOffset - logEntries.getLast().offset();\n```\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240130134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240136799","html_url":"https://github.com/apache/kafka/pull/1743#issuecomment-240136799","issue_url":"https://api.github.com/repos/apache/kafka/issues/1743","id":240136799,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDEzNjc5OQ==","user":{"login":"wiyu","id":7888158,"node_id":"MDQ6VXNlcjc4ODgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/7888158?v=4","gravatar_id":"","url":"https://api.github.com/users/wiyu","html_url":"https://github.com/wiyu","followers_url":"https://api.github.com/users/wiyu/followers","following_url":"https://api.github.com/users/wiyu/following{/other_user}","gists_url":"https://api.github.com/users/wiyu/gists{/gist_id}","starred_url":"https://api.github.com/users/wiyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiyu/subscriptions","organizations_url":"https://api.github.com/users/wiyu/orgs","repos_url":"https://api.github.com/users/wiyu/repos","events_url":"https://api.github.com/users/wiyu/events{/privacy}","received_events_url":"https://api.github.com/users/wiyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T15:22:39Z","updated_at":"2016-08-16T15:22:39Z","author_association":"CONTRIBUTOR","body":"@ijuma sure, I can do that, but how would the change go back into 0.9.0 or is it no longer updated?  Do I need to self patch and release my application with the forked changes?\n\nIs this what you had in mind about the change about ignoring the V0 and using finally?\n\n```\n            try {\n                if ( entry.record().magic() > Record.MAGIC_VALUE_V0 ) {\n                    this.logEntries = new ArrayDeque<>();\n                    long wrapperRecordTimestamp = entry.record().timestamp();\n                    while ( true ) {\n                        try {\n                            LogEntry logEntry = getNextEntryFromStream();\n                            Record recordWithTimestamp = new Record(\n                                logEntry.record().buffer(),\n                                wrapperRecordTimestamp,\n                                entry.record().timestampType()\n                            );\n                            logEntries.add(new LogEntry(logEntry.offset(), recordWithTimestamp));\n                        }\n                        catch (EOFException e) {\n                            break;\n                        }\n                        catch (IOException e) {\n                            throw new KafkaException(e);\n                        }\n                    }\n                    this.absoluteBaseOffset = wrapperRecordOffset - logEntries.getLast().offset();\n                }\n                else {\n                    this.logEntries = null;\n                    this.absoluteBaseOffset = -1;\n                }\n            } finally {\n                try {\n                    stream.close();\n                } catch (IOException e) {\n                    throw new KafkaException(e);\n                }\n            }\n```\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240136799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240139087","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240139087","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240139087,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDEzOTA4Nw==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T15:29:29Z","updated_at":"2016-08-16T15:29:29Z","author_association":"CONTRIBUTOR","body":"@becketqin : Thanks for the update. In your new patch, could you include a summary of the performance impact (and perhaps the ideal number of log recovery threads) in the upgrade doc?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240139087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240144925","html_url":"https://github.com/apache/kafka/pull/1743#issuecomment-240144925","issue_url":"https://api.github.com/repos/apache/kafka/issues/1743","id":240144925,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE0NDkyNQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T15:48:04Z","updated_at":"2016-08-16T15:48:04Z","author_association":"MEMBER","body":"@wiyu, if we want to make the changes to `0.9.0`, then they will have to be different as you suggested. The reason why I prefer the approach I suggested is that it handles the case where the iterator is not consumed fully as well. But I haven't looked in detail, so if it's possible for the same solution to handle that in 0.9.0, 0.10.0 and trunk, then we can consider that.\n\nWith regards to what I meant, here's the equivalent for the server code:\n\nhttps://github.com/apache/kafka/pull/1660/files\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240144925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240151628","html_url":"https://github.com/apache/kafka/pull/1735#issuecomment-240151628","issue_url":"https://api.github.com/repos/apache/kafka/issues/1735","id":240151628,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE1MTYyOA==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T16:09:16Z","updated_at":"2016-08-16T16:09:16Z","author_association":"CONTRIBUTOR","body":"@guozhangwang Merged to 0.10.0 but asfgit won't close on that branch I think, can you close this PR?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240151628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240159227","html_url":"https://github.com/apache/kafka/pull/1168#issuecomment-240159227","issue_url":"https://api.github.com/repos/apache/kafka/issues/1168","id":240159227,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE1OTIyNw==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T16:33:37Z","updated_at":"2016-08-16T16:33:37Z","author_association":"CONTRIBUTOR","body":"@ewasserman hey, the vote passed a while back, but I'm not sure where things went from there... was there another PR that got merged?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240159227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240159511","html_url":"https://github.com/apache/kafka/pull/1168#issuecomment-240159511","issue_url":"https://api.github.com/repos/apache/kafka/issues/1168","id":240159511,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE1OTUxMQ==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T16:34:31Z","updated_at":"2016-08-16T16:34:31Z","author_association":"CONTRIBUTOR","body":"never mind, found the second PR.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240159511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240165367","html_url":"https://github.com/apache/kafka/pull/1735#issuecomment-240165367","issue_url":"https://api.github.com/repos/apache/kafka/issues/1735","id":240165367,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE2NTM2Nw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T16:54:31Z","updated_at":"2016-08-16T16:54:31Z","author_association":"CONTRIBUTOR","body":"Thanks @ewencp , closing now.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240165367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240174734","html_url":"https://github.com/apache/kafka/pull/1168#issuecomment-240174734","issue_url":"https://api.github.com/repos/apache/kafka/issues/1168","id":240174734,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE3NDczNA==","user":{"login":"ewasserman","id":5298980,"node_id":"MDQ6VXNlcjUyOTg5ODA=","avatar_url":"https://avatars.githubusercontent.com/u/5298980?v=4","gravatar_id":"","url":"https://api.github.com/users/ewasserman","html_url":"https://github.com/ewasserman","followers_url":"https://api.github.com/users/ewasserman/followers","following_url":"https://api.github.com/users/ewasserman/following{/other_user}","gists_url":"https://api.github.com/users/ewasserman/gists{/gist_id}","starred_url":"https://api.github.com/users/ewasserman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewasserman/subscriptions","organizations_url":"https://api.github.com/users/ewasserman/orgs","repos_url":"https://api.github.com/users/ewasserman/repos","events_url":"https://api.github.com/users/ewasserman/events{/privacy}","received_events_url":"https://api.github.com/users/ewasserman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T17:25:33Z","updated_at":"2016-08-16T17:25:33Z","author_association":"CONTRIBUTOR","body":"Gwen, the second PR is stalled waiting for KIP-33 (KAFKA-3163) to be merged.\n\n> On Aug 16, 2016, at 9:34 AM, Gwen (Chen) Shapira notifications@github.com wrote:\n> \n> never mind, found the second PR.\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub https://github.com/apache/kafka/pull/1168#issuecomment-240159511, or mute the thread https://github.com/notifications/unsubscribe-auth/AFDbJNGS2rTCBeKcxED8SGYd-_hbuNbAks5qgeatgaJpZM4H8Tt3.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240174734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240179622","html_url":"https://github.com/apache/kafka/pull/1725#issuecomment-240179622","issue_url":"https://api.github.com/repos/apache/kafka/issues/1725","id":240179622,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE3OTYyMg==","user":{"login":"tcrayford","id":55975,"node_id":"MDQ6VXNlcjU1OTc1","avatar_url":"https://avatars.githubusercontent.com/u/55975?v=4","gravatar_id":"","url":"https://api.github.com/users/tcrayford","html_url":"https://github.com/tcrayford","followers_url":"https://api.github.com/users/tcrayford/followers","following_url":"https://api.github.com/users/tcrayford/following{/other_user}","gists_url":"https://api.github.com/users/tcrayford/gists{/gist_id}","starred_url":"https://api.github.com/users/tcrayford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tcrayford/subscriptions","organizations_url":"https://api.github.com/users/tcrayford/orgs","repos_url":"https://api.github.com/users/tcrayford/repos","events_url":"https://api.github.com/users/tcrayford/events{/privacy}","received_events_url":"https://api.github.com/users/tcrayford/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T17:41:36Z","updated_at":"2016-08-16T17:41:36Z","author_association":"CONTRIBUTOR","body":"@junrao updated the patch with all of the small things fixed. Thanks!\n\n> One thing I was thinking is on loading the partial segment into the map. I was originally thinking that if we can load at least one full segment into the map, we will still move the dirty offset at the segment boundary to avoid having to scan the partial segment more than once. On second thought, your approach in the patch potentially requires fewer rounds of cleaning. So overall, it seems to be a more efficient approach.\n\nYep! Thanks for mentioning this case - I didn't call it out in the commit message or anything. It also avoids more conditionals and edge cases, which seemed positive.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240179622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240180981","html_url":"https://github.com/apache/kafka/pull/1530#issuecomment-240180981","issue_url":"https://api.github.com/repos/apache/kafka/issues/1530","id":240180981,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE4MDk4MQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T17:46:27Z","updated_at":"2016-08-16T17:46:27Z","author_association":"CONTRIBUTOR","body":"Looked into Jenkins failure, it is transient and not relevant.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240180981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240184241","html_url":"https://github.com/apache/kafka/pull/1736#issuecomment-240184241","issue_url":"https://api.github.com/repos/apache/kafka/issues/1736","id":240184241,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE4NDI0MQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T17:56:43Z","updated_at":"2016-08-16T17:56:43Z","author_association":"CONTRIBUTOR","body":"@dguy Thanks. Still it is a bit weird that this integration test suddenly fails a lot more frequent, and always on the same place. I'm wondering if there are some regressions introduced recently.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240184241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240192353","html_url":"https://github.com/apache/kafka/pull/1742#issuecomment-240192353","issue_url":"https://api.github.com/repos/apache/kafka/issues/1742","id":240192353,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE5MjM1Mw==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T18:24:12Z","updated_at":"2016-08-16T18:24:12Z","author_association":"CONTRIBUTOR","body":"@dguy : Thanks for the patch. Looks good overall. Just some minor comments. \n\nAlso, we have been working on https://github.com/apache/kafka/pull/1215 for a long time and it's getting pretty close. To reduce rebase overhead, perhaps we can wait for a few more days and see if PR 1215 can go in first.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240192353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240194923","html_url":"https://github.com/apache/kafka/pull/1744#issuecomment-240194923","issue_url":"https://api.github.com/repos/apache/kafka/issues/1744","id":240194923,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE5NDkyMw==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T18:32:01Z","updated_at":"2016-08-16T18:32:01Z","author_association":"CONTRIBUTOR","body":"LGTM (and tests are passing locally so not going to wait for Jenkins)\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240194923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240214813","html_url":"https://github.com/apache/kafka/pull/1736#issuecomment-240214813","issue_url":"https://api.github.com/repos/apache/kafka/issues/1736","id":240214813,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDIxNDgxMw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T19:42:11Z","updated_at":"2016-08-16T19:42:11Z","author_association":"CONTRIBUTOR","body":"@ewencp I think I have found the root cause of this transient failure, will file another JIRA / PR for it. Given that could you merge this PR as is?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240214813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240228033","html_url":"https://github.com/apache/kafka/pull/1746#issuecomment-240228033","issue_url":"https://api.github.com/repos/apache/kafka/issues/1746","id":240228033,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDIyODAzMw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T20:29:25Z","updated_at":"2016-08-16T20:29:25Z","author_association":"CONTRIBUTOR","body":"ping @dguy @enothereska @mjsax @ijuma @ewencp for reviews.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240228033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240268787","html_url":"https://github.com/apache/kafka/pull/1627#issuecomment-240268787","issue_url":"https://api.github.com/repos/apache/kafka/issues/1627","id":240268787,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDI2ODc4Nw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T23:17:52Z","updated_at":"2016-08-16T23:17:52Z","author_association":"CONTRIBUTOR","body":"Discussed with @hachikuji offline about the hand-coded poll timeout, and we think a better value to use instead is the `backoff.time.ms` since for such network events, we will usually backoff for this amount of time anyways, and since it is configured by users, it is safer to leverage than the magic number (think: what if user set `heartbeat.interval.ms` to be less than 50ms?).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240268787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240276231","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240276231","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240276231,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDI3NjIzMQ==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T00:01:54Z","updated_at":"2016-08-17T00:01:54Z","author_association":"CONTRIBUTOR","body":"@becketqin : I am trying to hold off https://github.com/apache/kafka/pull/1494 and https://github.com/apache/kafka/pull/1742 to avoid the rebasing overhead of this patch. Do you think you could provide your latest patch in the next day or two? \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240276231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240276448","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-240276448","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":240276448,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDI3NjQ0OA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T00:03:20Z","updated_at":"2016-08-17T00:03:20Z","author_association":"CONTRIBUTOR","body":"@ymatsuda If you have time to take a look at this, it would be nice to get some insight into the performance benchmarks you used previously for the purgatory implementation.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240276448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240282353","html_url":"https://github.com/apache/kafka/pull/1323#issuecomment-240282353","issue_url":"https://api.github.com/repos/apache/kafka/issues/1323","id":240282353,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDI4MjM1Mw==","user":{"login":"jjkoshy","id":112339,"node_id":"MDQ6VXNlcjExMjMzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/112339?v=4","gravatar_id":"","url":"https://api.github.com/users/jjkoshy","html_url":"https://github.com/jjkoshy","followers_url":"https://api.github.com/users/jjkoshy/followers","following_url":"https://api.github.com/users/jjkoshy/following{/other_user}","gists_url":"https://api.github.com/users/jjkoshy/gists{/gist_id}","starred_url":"https://api.github.com/users/jjkoshy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjkoshy/subscriptions","organizations_url":"https://api.github.com/users/jjkoshy/orgs","repos_url":"https://api.github.com/users/jjkoshy/repos","events_url":"https://api.github.com/users/jjkoshy/events{/privacy}","received_events_url":"https://api.github.com/users/jjkoshy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T00:42:47Z","updated_at":"2016-08-17T00:42:47Z","author_association":"CONTRIBUTOR","body":"@becketqin not sure if this requires a KIP but maybe... anyway, the current behavior is a total bug. i.e., metrics being overwritten completely. cc few others for opinions @ijuma @junrao @gwenshap Also, this is somewhat related to [KIP-55](https://cwiki.apache.org/confluence/display/KAFKA/KIP-55%3A+Secure+Quotas+for+Authenticated+Users) but that is orthogonal since the fundamental issue of mbean collisions remains.\n\nAnyway, for this patch I have some minor comments:\n- Needs a rebase\n- The metric-id doc needs significantly more detail. i.e., that explains its effect when left blank, and when there are collisions.\n- We may want to mangle with sequence numbers even with a metric-id present (if there are collisions in metric-id). i.e., a user creates two clients in the same VM with the same metric-id.\n- Some users (such as LinkedIn) extract metrics by trapping mbean registrations using [mbean queries](https://docs.oracle.com/javase/7/docs/api/javax/management/ObjectName.html). I would like to avoid breaking that - i.e., we should verify that adding a new key-value pair honors existing queries. If not, we may want to attempt preserving the old behavior by only mangling the names of the second registration onwards.\n- Synchronizing on the class object: we don't have any static synchronized methods but if we did they would contend with the lock. Can we just have a dedicated static lock for this? Or use a concurrent map?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240282353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240293727","html_url":"https://github.com/apache/kafka/pull/1749#issuecomment-240293727","issue_url":"https://api.github.com/repos/apache/kafka/issues/1749","id":240293727,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDI5MzcyNw==","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T02:04:14Z","updated_at":"2016-08-17T02:04:14Z","author_association":"CONTRIBUTOR","body":"@ijuma mind reviewing this?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240293727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240313762","html_url":"https://github.com/apache/kafka/pull/1323#issuecomment-240313762","issue_url":"https://api.github.com/repos/apache/kafka/issues/1323","id":240313762,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDMxMzc2Mg==","user":{"login":"onurkaraman","id":529976,"node_id":"MDQ6VXNlcjUyOTk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/529976?v=4","gravatar_id":"","url":"https://api.github.com/users/onurkaraman","html_url":"https://github.com/onurkaraman","followers_url":"https://api.github.com/users/onurkaraman/followers","following_url":"https://api.github.com/users/onurkaraman/following{/other_user}","gists_url":"https://api.github.com/users/onurkaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/onurkaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onurkaraman/subscriptions","organizations_url":"https://api.github.com/users/onurkaraman/orgs","repos_url":"https://api.github.com/users/onurkaraman/repos","events_url":"https://api.github.com/users/onurkaraman/events{/privacy}","received_events_url":"https://api.github.com/users/onurkaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T04:59:07Z","updated_at":"2016-08-17T04:59:07Z","author_association":"CONTRIBUTOR","body":"I just updated the PR with a rebase. I'll work on the other comments @jjkoshy suggested after getting feedback from others.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240313762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240319219","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240319219","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240319219,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDMxOTIxOQ==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T05:48:16Z","updated_at":"2016-08-17T05:48:16Z","author_association":"CONTRIBUTOR","body":"@junrao I have all the code ready now. I am still trying to find the reasonable number of recover threads. It seems there is system cache effect, i.e. if I do a start-shutdown-start sequence, the second start would be much faster than the first one because some of the disk read may come from the system cache. To avoid this effect, I need to wait for a while between each broker startup. I will upload the patch latest by Thursday. Is that OK?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240319219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240351671","html_url":"https://github.com/apache/kafka/pull/1742#issuecomment-240351671","issue_url":"https://api.github.com/repos/apache/kafka/issues/1742","id":240351671,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDM1MTY3MQ==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T08:48:23Z","updated_at":"2016-08-17T08:48:23Z","author_association":"CONTRIBUTOR","body":"@junrao - thanks for the comments. They've all been addressed.\nI'm happy to wait a few days for PR 1215 to go in.\nThanks\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240351671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240353485","html_url":"https://github.com/apache/kafka/pull/1750#issuecomment-240353485","issue_url":"https://api.github.com/repos/apache/kafka/issues/1750","id":240353485,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDM1MzQ4NQ==","user":{"login":"omkreddy","id":8134545,"node_id":"MDQ6VXNlcjgxMzQ1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/8134545?v=4","gravatar_id":"","url":"https://api.github.com/users/omkreddy","html_url":"https://github.com/omkreddy","followers_url":"https://api.github.com/users/omkreddy/followers","following_url":"https://api.github.com/users/omkreddy/following{/other_user}","gists_url":"https://api.github.com/users/omkreddy/gists{/gist_id}","starred_url":"https://api.github.com/users/omkreddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omkreddy/subscriptions","organizations_url":"https://api.github.com/users/omkreddy/orgs","repos_url":"https://api.github.com/users/omkreddy/repos","events_url":"https://api.github.com/users/omkreddy/events{/privacy}","received_events_url":"https://api.github.com/users/omkreddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T08:56:21Z","updated_at":"2016-08-17T09:08:44Z","author_association":"CONTRIBUTOR","body":"@junrao @harshach   initial requested buffer sizes are not available in Selector.pollSelectionKeys(). I am just logging the actual values after socket creation.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240353485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240399927","html_url":"https://github.com/apache/kafka/pull/1753#issuecomment-240399927","issue_url":"https://api.github.com/repos/apache/kafka/issues/1753","id":240399927,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDM5OTkyNw==","user":{"login":"rajinisivaram","id":13164074,"node_id":"MDQ6VXNlcjEzMTY0MDc0","avatar_url":"https://avatars.githubusercontent.com/u/13164074?v=4","gravatar_id":"","url":"https://api.github.com/users/rajinisivaram","html_url":"https://github.com/rajinisivaram","followers_url":"https://api.github.com/users/rajinisivaram/followers","following_url":"https://api.github.com/users/rajinisivaram/following{/other_user}","gists_url":"https://api.github.com/users/rajinisivaram/gists{/gist_id}","starred_url":"https://api.github.com/users/rajinisivaram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajinisivaram/subscriptions","organizations_url":"https://api.github.com/users/rajinisivaram/orgs","repos_url":"https://api.github.com/users/rajinisivaram/repos","events_url":"https://api.github.com/users/rajinisivaram/events{/privacy}","received_events_url":"https://api.github.com/users/rajinisivaram/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T12:45:50Z","updated_at":"2016-08-17T12:45:50Z","author_association":"CONTRIBUTOR","body":"This PR has been updated to match the final version of KIP-55. Feedback appreciated. Thank you...\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240399927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240410448","html_url":"https://github.com/apache/kafka/pull/1428#issuecomment-240410448","issue_url":"https://api.github.com/repos/apache/kafka/issues/1428","id":240410448,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQxMDQ0OA==","user":{"login":"mimaison","id":903615,"node_id":"MDQ6VXNlcjkwMzYxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/903615?v=4","gravatar_id":"","url":"https://api.github.com/users/mimaison","html_url":"https://github.com/mimaison","followers_url":"https://api.github.com/users/mimaison/followers","following_url":"https://api.github.com/users/mimaison/following{/other_user}","gists_url":"https://api.github.com/users/mimaison/gists{/gist_id}","starred_url":"https://api.github.com/users/mimaison/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimaison/subscriptions","organizations_url":"https://api.github.com/users/mimaison/orgs","repos_url":"https://api.github.com/users/mimaison/repos","events_url":"https://api.github.com/users/mimaison/events{/privacy}","received_events_url":"https://api.github.com/users/mimaison/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T13:28:06Z","updated_at":"2016-08-17T13:28:06Z","author_association":"MEMBER","body":"Thanks for all the feedback ! I've updated the PR\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240410448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240417556","html_url":"https://github.com/apache/kafka/pull/1747#issuecomment-240417556","issue_url":"https://api.github.com/repos/apache/kafka/issues/1747","id":240417556,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQxNzU1Ng==","user":{"login":"rajinisivaram","id":13164074,"node_id":"MDQ6VXNlcjEzMTY0MDc0","avatar_url":"https://avatars.githubusercontent.com/u/13164074?v=4","gravatar_id":"","url":"https://api.github.com/users/rajinisivaram","html_url":"https://github.com/rajinisivaram","followers_url":"https://api.github.com/users/rajinisivaram/followers","following_url":"https://api.github.com/users/rajinisivaram/following{/other_user}","gists_url":"https://api.github.com/users/rajinisivaram/gists{/gist_id}","starred_url":"https://api.github.com/users/rajinisivaram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajinisivaram/subscriptions","organizations_url":"https://api.github.com/users/rajinisivaram/orgs","repos_url":"https://api.github.com/users/rajinisivaram/repos","events_url":"https://api.github.com/users/rajinisivaram/events{/privacy}","received_events_url":"https://api.github.com/users/rajinisivaram/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T13:52:14Z","updated_at":"2016-08-17T13:52:14Z","author_association":"CONTRIBUTOR","body":"+1 for the PR\nPerhaps a unit test will be useful? Could just add a simple test that uses SHA1PRNG in `clients/src/test/java/org/apache/kafka/common/network/SslTransportLayerTest.java`.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240417556/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240436736","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240436736","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240436736,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQzNjczNg==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T14:51:07Z","updated_at":"2016-08-17T14:51:07Z","author_association":"CONTRIBUTOR","body":"@becketqin : Thursday is fine. Not sure if this helps, but you can empty dentries/inodes through a command (http://www.tecmint.com/clear-ram-memory-cache-buffer-and-swap-space-on-linux/).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240436736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240440890","html_url":"https://github.com/apache/kafka/pull/1750#issuecomment-240440890","issue_url":"https://api.github.com/repos/apache/kafka/issues/1750","id":240440890,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ0MDg5MA==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T15:04:03Z","updated_at":"2016-08-17T15:04:03Z","author_association":"CONTRIBUTOR","body":"@omkreddy : Thanks for the patch. LGTM\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240440890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240447321","html_url":"https://github.com/apache/kafka/pull/1754#issuecomment-240447321","issue_url":"https://api.github.com/repos/apache/kafka/issues/1754","id":240447321,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ0NzMyMQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T15:23:19Z","updated_at":"2016-08-17T15:23:19Z","author_association":"MEMBER","body":"What is the use case for this? We intend to remove these classes, so it would be good to understand how they are being used.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240447321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240454655","html_url":"https://github.com/apache/kafka/pull/1754#issuecomment-240454655","issue_url":"https://api.github.com/repos/apache/kafka/issues/1754","id":240454655,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ1NDY1NQ==","user":{"login":"mimaison","id":903615,"node_id":"MDQ6VXNlcjkwMzYxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/903615?v=4","gravatar_id":"","url":"https://api.github.com/users/mimaison","html_url":"https://github.com/mimaison","followers_url":"https://api.github.com/users/mimaison/followers","following_url":"https://api.github.com/users/mimaison/following{/other_user}","gists_url":"https://api.github.com/users/mimaison/gists{/gist_id}","starred_url":"https://api.github.com/users/mimaison/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimaison/subscriptions","organizations_url":"https://api.github.com/users/mimaison/orgs","repos_url":"https://api.github.com/users/mimaison/repos","events_url":"https://api.github.com/users/mimaison/events{/privacy}","received_events_url":"https://api.github.com/users/mimaison/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T15:45:54Z","updated_at":"2016-08-17T15:45:54Z","author_association":"MEMBER","body":"I see this class as a helper until FetchRequest is converted to the new Java format. Once that's done, yes we should definitively remove it. \n\nUntil then, we use it to create FetchRequests from Java code to perform some custom logic. Prior to 0.10, the hardcoded version was not an issue but now with the multiple versions, without this it's really a pain to create FetchRequests.\n\nAs the FetchRequest work (see KAFKA-2066) seems to have staled, I thought we could use this tiny enhancement in the meantime.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240454655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240464279","html_url":"https://github.com/apache/kafka/pull/1754#issuecomment-240464279","issue_url":"https://api.github.com/repos/apache/kafka/issues/1754","id":240464279,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ2NDI3OQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T16:16:30Z","updated_at":"2016-08-17T16:16:30Z","author_association":"MEMBER","body":"Are you aware of `org.apache.kafka.common.requests.FetchRequest`? I guess you're saying you use `kafka.javaapi.FetchRequest` with the simple consumer?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240464279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240468007","html_url":"https://github.com/apache/kafka/pull/1733#issuecomment-240468007","issue_url":"https://api.github.com/repos/apache/kafka/issues/1733","id":240468007,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ2ODAwNw==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T16:29:03Z","updated_at":"2016-08-17T16:29:03Z","author_association":"CONTRIBUTOR","body":"@ijuma @gwenshap @guozhangwang @junrao This has an LGTM from @hachikuji and cleans up system tests, can I get a review & commit?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240468007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240471100","html_url":"https://github.com/apache/kafka/pull/1754#issuecomment-240471100","issue_url":"https://api.github.com/repos/apache/kafka/issues/1754","id":240471100,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDQ3MTEwMA==","user":{"login":"mimaison","id":903615,"node_id":"MDQ6VXNlcjkwMzYxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/903615?v=4","gravatar_id":"","url":"https://api.github.com/users/mimaison","html_url":"https://github.com/mimaison","followers_url":"https://api.github.com/users/mimaison/followers","following_url":"https://api.github.com/users/mimaison/following{/other_user}","gists_url":"https://api.github.com/users/mimaison/gists{/gist_id}","starred_url":"https://api.github.com/users/mimaison/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimaison/subscriptions","organizations_url":"https://api.github.com/users/mimaison/orgs","repos_url":"https://api.github.com/users/mimaison/repos","events_url":"https://api.github.com/users/mimaison/events{/privacy}","received_events_url":"https://api.github.com/users/mimaison/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T16:39:48Z","updated_at":"2016-08-17T16:39:48Z","author_association":"MEMBER","body":"In our case, it's a little more complicated as we've added some extra logic around KafkaApis. But I think yes you are right, with the simple consumer you might run into the same issue and not be able to specify the request version.\n\nI thought the change was \"generic\" enough to be useful till the old fetch format gets replaced. If that's not the case, that's perfectly fine.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240471100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240507334","html_url":"https://github.com/apache/kafka/pull/1627#issuecomment-240507334","issue_url":"https://api.github.com/repos/apache/kafka/issues/1627","id":240507334,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDUwNzMzNA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T18:41:27Z","updated_at":"2016-08-17T18:41:27Z","author_association":"CONTRIBUTOR","body":"Created https://issues.apache.org/jira/browse/KAFKA-4058 for the transient failure.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240507334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240510009","html_url":"https://github.com/apache/kafka/pull/1627#issuecomment-240510009","issue_url":"https://api.github.com/repos/apache/kafka/issues/1627","id":240510009,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDUxMDAwOQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T18:50:35Z","updated_at":"2016-08-17T18:50:35Z","author_association":"CONTRIBUTOR","body":"Merged to trunk, thanks @hachikuji !\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240510009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240521609","html_url":"https://github.com/apache/kafka/pull/1756#issuecomment-240521609","issue_url":"https://api.github.com/repos/apache/kafka/issues/1756","id":240521609,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDUyMTYwOQ==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T19:32:32Z","updated_at":"2016-08-17T19:32:32Z","author_association":"MEMBER","body":"@guozhangwang @dguy @enothereska @miguno \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240521609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240523966","html_url":"https://github.com/apache/kafka/pull/1756#issuecomment-240523966","issue_url":"https://api.github.com/repos/apache/kafka/issues/1756","id":240523966,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDUyMzk2Ng==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T19:41:10Z","updated_at":"2016-08-17T19:41:10Z","author_association":"MEMBER","body":"@hjafarpour\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240523966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240552318","html_url":"https://github.com/apache/kafka/pull/1733#issuecomment-240552318","issue_url":"https://api.github.com/repos/apache/kafka/issues/1733","id":240552318,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU1MjMxOA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T21:20:21Z","updated_at":"2016-08-17T21:20:21Z","author_association":"MEMBER","body":"LGTM, 100 times without error is enough testing for me. :)\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240552318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240553099","html_url":"https://github.com/apache/kafka/pull/1755#issuecomment-240553099","issue_url":"https://api.github.com/repos/apache/kafka/issues/1755","id":240553099,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU1MzA5OQ==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T21:23:10Z","updated_at":"2016-08-17T21:23:10Z","author_association":"CONTRIBUTOR","body":"Now it burns cpu and spam to a log the following messages:\n\n```\n[2016-08-18 00:15:13,610] FATAL [ReplicaFetcherThread-1-2], Exiting because log truncation is not allowed for partition [rt3.iva--other--access-log,15], Current leader\n2's latest offset 1622921 is less than replica 4's latest offset 1622976 (kafka.server.ReplicaFetcherThread)\n[2016-08-18 00:15:13,610] ERROR [ReplicaFetcherThread-1-2], Error getting offset for partition [rt3.iva--other--access-log,15] to broker 2 (kafka.server.ReplicaFetcherT\nhread)\norg.apache.kafka.common.errors.FatalExitException\n        at kafka.server.ReplicaFetcherThread.handleOffsetOutOfRange(ReplicaFetcherThread.scala:194)\n        at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1$$anonfun$apply$2.apply(AbstractFetcherThread.scala:157)\n        at kafka.server.AbstractFetcherThread$$anonfun$processFetchRequest$2$$anonfun$apply$mcV$sp$1$$anonfun$apply$2.apply(AbstractFetcherThread.scala:127)\n        at scala.Option.foreach(Option.scala:257)\n...\n```\n\nShutdown does not occur.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240553099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240556961","html_url":"https://github.com/apache/kafka/pull/1530#issuecomment-240556961","issue_url":"https://api.github.com/repos/apache/kafka/issues/1530","id":240556961,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU1Njk2MQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T21:37:08Z","updated_at":"2016-08-17T21:37:23Z","author_association":"MEMBER","body":"Btw, thanks for the benchmarks Guozhang. Nice to have confirmation that the per-thread approach is indeed much better (as we initially thought it would be).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240556961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240564002","html_url":"https://github.com/apache/kafka/pull/1746#issuecomment-240564002","issue_url":"https://api.github.com/repos/apache/kafka/issues/1746","id":240564002,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU2NDAwMg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T22:06:22Z","updated_at":"2016-08-17T22:06:22Z","author_association":"MEMBER","body":"Jenkins failed on  `org.apache.kafka.streams.integration.RegexSourceIntegrationTest.testRegexMatchesTopicsAWhenDeleted`\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240564002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240568457","html_url":"https://github.com/apache/kafka/pull/1756#issuecomment-240568457","issue_url":"https://api.github.com/repos/apache/kafka/issues/1756","id":240568457,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU2ODQ1Nw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T22:26:45Z","updated_at":"2016-08-17T22:26:45Z","author_association":"CONTRIBUTOR","body":"If the root cause is that `the Streams consumer did not time out yet while the reset tool consumer already joins the group. Before the reset tools commits, the Streams consumer times out and triggers a rebalance.` and the `REBALANCE_IN_PROGRESS` error code caused it to throw this exception, then instead of calling `sleep` in line 100, etc, could we just use `waitOnCondition` to make sure that the consumer group is already empty to completely avoid this timing issue? See `ConsumerGroupCommand.describeGroup` for details.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240568457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240569109","html_url":"https://github.com/apache/kafka/pull/1746#issuecomment-240569109","issue_url":"https://api.github.com/repos/apache/kafka/issues/1746","id":240569109,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU2OTEwOQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T22:29:54Z","updated_at":"2016-08-17T22:29:54Z","author_association":"CONTRIBUTOR","body":"Discussed with @hachikuji about this issue, and it may be the result of KAFKA-3949, but it is a bit hard to confirm as I have not been able to re-produce locally. So I'll hold on this PR until that issue is fixed to see if it does resolve the transient failure.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240569109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240570635","html_url":"https://github.com/apache/kafka/pull/1743#issuecomment-240570635","issue_url":"https://api.github.com/repos/apache/kafka/issues/1743","id":240570635,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU3MDYzNQ==","user":{"login":"wiyu","id":7888158,"node_id":"MDQ6VXNlcjc4ODgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/7888158?v=4","gravatar_id":"","url":"https://api.github.com/users/wiyu","html_url":"https://github.com/wiyu","followers_url":"https://api.github.com/users/wiyu/followers","following_url":"https://api.github.com/users/wiyu/following{/other_user}","gists_url":"https://api.github.com/users/wiyu/gists{/gist_id}","starred_url":"https://api.github.com/users/wiyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiyu/subscriptions","organizations_url":"https://api.github.com/users/wiyu/orgs","repos_url":"https://api.github.com/users/wiyu/repos","events_url":"https://api.github.com/users/wiyu/events{/privacy}","received_events_url":"https://api.github.com/users/wiyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T22:37:24Z","updated_at":"2016-08-17T22:37:24Z","author_association":"CONTRIBUTOR","body":"Closing, will open a new PR.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240570635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240580179","html_url":"https://github.com/apache/kafka/pull/1739#issuecomment-240580179","issue_url":"https://api.github.com/repos/apache/kafka/issues/1739","id":240580179,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU4MDE3OQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T23:27:29Z","updated_at":"2016-08-17T23:27:29Z","author_association":"MEMBER","body":"LGTM\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240580179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240585135","html_url":"https://github.com/apache/kafka/pull/1736#issuecomment-240585135","issue_url":"https://api.github.com/repos/apache/kafka/issues/1736","id":240585135,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU4NTEzNQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T23:56:29Z","updated_at":"2016-08-17T23:57:31Z","author_association":"CONTRIBUTOR","body":"@ewencp mind taking another look?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240585135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240587343","html_url":"https://github.com/apache/kafka/pull/1726#issuecomment-240587343","issue_url":"https://api.github.com/repos/apache/kafka/issues/1726","id":240587343,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU4NzM0Mw==","user":{"login":"vahidhashemian","id":13593506,"node_id":"MDQ6VXNlcjEzNTkzNTA2","avatar_url":"https://avatars.githubusercontent.com/u/13593506?v=4","gravatar_id":"","url":"https://api.github.com/users/vahidhashemian","html_url":"https://github.com/vahidhashemian","followers_url":"https://api.github.com/users/vahidhashemian/followers","following_url":"https://api.github.com/users/vahidhashemian/following{/other_user}","gists_url":"https://api.github.com/users/vahidhashemian/gists{/gist_id}","starred_url":"https://api.github.com/users/vahidhashemian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vahidhashemian/subscriptions","organizations_url":"https://api.github.com/users/vahidhashemian/orgs","repos_url":"https://api.github.com/users/vahidhashemian/repos","events_url":"https://api.github.com/users/vahidhashemian/events{/privacy}","received_events_url":"https://api.github.com/users/vahidhashemian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T00:09:56Z","updated_at":"2016-08-18T00:09:56Z","author_association":"CONTRIBUTOR","body":"@hachikuji I made some changes according to your suggestion and it seems to work as expected now. I'll spend more time testing later on (I think I noticed more rebalances than actually required with this code), but I just updated the WIP PR so you can take a look too. Thanks.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240587343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240630032","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240630032","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240630032,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDYzMDAzMg==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T05:50:28Z","updated_at":"2016-08-18T05:50:28Z","author_association":"CONTRIBUTOR","body":"@junrao Thanks for the dentries/inode cleaning command. I just saw them and haven't tried that yet. Currently I have a script reboot a broker every hour and it seems stable enough to give some results.\nSome updates on the number of log recovery thread tests. For a cluster with about 40K segments, with one log recovery thread, it takes 14 - 17 seconds to load the logs, and about 20 seconds with 2 threads, > 30 seconds with 5 threads. So it seems that having a single thread loading segments is the best setting.\n\nI have updated the patch after rebasing on trunk. I also squashed some previous commits. \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240630032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240649321","html_url":"https://github.com/apache/kafka/pull/1742#issuecomment-240649321","issue_url":"https://api.github.com/repos/apache/kafka/issues/1742","id":240649321,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDY0OTMyMQ==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T07:49:10Z","updated_at":"2016-08-18T07:49:10Z","author_association":"CONTRIBUTOR","body":"Comments addressed. Thanks @junrao \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240649321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240663239","html_url":"https://github.com/apache/kafka/pull/1758#issuecomment-240663239","issue_url":"https://api.github.com/repos/apache/kafka/issues/1758","id":240663239,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDY2MzIzOQ==","user":{"login":"omkreddy","id":8134545,"node_id":"MDQ6VXNlcjgxMzQ1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/8134545?v=4","gravatar_id":"","url":"https://api.github.com/users/omkreddy","html_url":"https://github.com/omkreddy","followers_url":"https://api.github.com/users/omkreddy/followers","following_url":"https://api.github.com/users/omkreddy/following{/other_user}","gists_url":"https://api.github.com/users/omkreddy/gists{/gist_id}","starred_url":"https://api.github.com/users/omkreddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omkreddy/subscriptions","organizations_url":"https://api.github.com/users/omkreddy/orgs","repos_url":"https://api.github.com/users/omkreddy/repos","events_url":"https://api.github.com/users/omkreddy/events{/privacy}","received_events_url":"https://api.github.com/users/omkreddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T08:53:19Z","updated_at":"2016-08-18T08:53:19Z","author_association":"CONTRIBUTOR","body":"LGTM.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240663239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240697264","html_url":"https://github.com/apache/kafka/pull/1737#issuecomment-240697264","issue_url":"https://api.github.com/repos/apache/kafka/issues/1737","id":240697264,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDY5NzI2NA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T11:32:09Z","updated_at":"2016-08-18T11:32:09Z","author_association":"MEMBER","body":"LGTM\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240697264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240707262","html_url":"https://github.com/apache/kafka/pull/1755#issuecomment-240707262","issue_url":"https://api.github.com/repos/apache/kafka/issues/1755","id":240707262,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDcwNzI2Mg==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T12:24:24Z","updated_at":"2016-08-18T12:24:24Z","author_association":"CONTRIBUTOR","body":"@maysamyabandeh could you squash all commits into one?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240707262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240716792","html_url":"https://github.com/apache/kafka/pull/1731#issuecomment-240716792","issue_url":"https://api.github.com/repos/apache/kafka/issues/1731","id":240716792,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDcxNjc5Mg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T13:05:40Z","updated_at":"2016-08-18T13:05:40Z","author_association":"MEMBER","body":"@guozhangwang, I tested this a bit. I think you also need https://github.com/ijuma/kafka/commit/3c008f109a6f32b6882a630499fa54f421ad7b85\n\nWith that, I think we get the right behaviour (I also tested running stream:examples in IntelliJ).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240716792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240743746","html_url":"https://github.com/apache/kafka/pull/1755#issuecomment-240743746","issue_url":"https://api.github.com/repos/apache/kafka/issues/1755","id":240743746,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDc0Mzc0Ng==","user":{"login":"maysamyabandeh","id":1167741,"node_id":"MDQ6VXNlcjExNjc3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1167741?v=4","gravatar_id":"","url":"https://api.github.com/users/maysamyabandeh","html_url":"https://github.com/maysamyabandeh","followers_url":"https://api.github.com/users/maysamyabandeh/followers","following_url":"https://api.github.com/users/maysamyabandeh/following{/other_user}","gists_url":"https://api.github.com/users/maysamyabandeh/gists{/gist_id}","starred_url":"https://api.github.com/users/maysamyabandeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maysamyabandeh/subscriptions","organizations_url":"https://api.github.com/users/maysamyabandeh/orgs","repos_url":"https://api.github.com/users/maysamyabandeh/repos","events_url":"https://api.github.com/users/maysamyabandeh/events{/privacy}","received_events_url":"https://api.github.com/users/maysamyabandeh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T14:39:17Z","updated_at":"2016-08-18T14:39:17Z","author_association":"NONE","body":"> @maysamyabandeh could you squash all commits into one?\n\nJudging by the commit format in the log history my impression was that this would happen after merging the pull request.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240743746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240757740","html_url":"https://github.com/apache/kafka/pull/1749#issuecomment-240757740","issue_url":"https://api.github.com/repos/apache/kafka/issues/1749","id":240757740,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDc1Nzc0MA==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T15:21:27Z","updated_at":"2016-08-18T15:21:27Z","author_association":"NONE","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240757740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240787301","html_url":"https://github.com/apache/kafka/pull/1731#issuecomment-240787301","issue_url":"https://api.github.com/repos/apache/kafka/issues/1731","id":240787301,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDc4NzMwMQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T16:57:36Z","updated_at":"2016-08-18T16:57:36Z","author_association":"CONTRIBUTOR","body":"Thanks @ijuma , I will incorporate your commit.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240787301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240802214","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240802214","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240802214,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDgwMjIxNA==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T17:50:47Z","updated_at":"2016-08-18T17:50:47Z","author_association":"CONTRIBUTOR","body":"@becketqin : Thanks for the update. Are your latest numbers with time index? What about the numbers w/o time index? Also, how many log dirs are there since the number of recovery thread is per dir?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240802214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240815948","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240815948","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240815948,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDgxNTk0OA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T18:38:20Z","updated_at":"2016-08-18T18:38:20Z","author_association":"CONTRIBUTOR","body":"@junrao The latest numbers are with time index. I see log loading time to be 21 - 23 seconds on a 46K segments with time index. It takes about 10 seconds to load the segments without time index. So the loading time with time index is about 2x of without time index. This is also comparable to the 11 seconds loading time without time index on a 50K segments broker. \n\nI have ~8500 directories (partitions) on the broker. Some of the partitions are pretty big (> 2500 segments).\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240815948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240820193","html_url":"https://github.com/apache/kafka/pull/1734#issuecomment-240820193","issue_url":"https://api.github.com/repos/apache/kafka/issues/1734","id":240820193,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDgyMDE5Mw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T18:51:38Z","updated_at":"2016-08-18T18:51:38Z","author_association":"CONTRIBUTOR","body":"@ijuma I updated the blockingReady() function as discussed offline.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240820193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240838240","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240838240","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240838240,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDgzODI0MA==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T19:58:31Z","updated_at":"2016-08-18T19:58:31Z","author_association":"CONTRIBUTOR","body":"@becketqin : Thanks. Could you confirm the number of log dirs you have and the number of disks per dir? Intuitively, if there are multiple disks per dir, it seems using more than one 1 recovery thread should lead to better performance.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240838240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240859249","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240859249","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240859249,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg1OTI0OQ==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T21:15:27Z","updated_at":"2016-08-18T21:15:27Z","author_association":"CONTRIBUTOR","body":"@junrao We only have one log directory on a RAID 10 containing 10 disk. So in our case, multiple thread might not help. In a JBOD environment, I agree that multiple threads would probably help.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240859249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240870837","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240870837","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240870837,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg3MDgzNw==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T22:01:14Z","updated_at":"2016-08-18T22:01:14Z","author_association":"CONTRIBUTOR","body":"@becketqin : Interesting, in theory, using more than 1 thread should still help since those threads can drive the I/Os on different disks in parallel. \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240870837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240883073","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240883073","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240883073,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg4MzA3Mw==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T23:04:45Z","updated_at":"2016-08-18T23:05:54Z","author_association":"CONTRIBUTOR","body":"@junrao I am not sure, one thing I noticed is that when there is one thread, the log loading time of each partition is pretty linear to the number of log segments. But if multiple threads are used, the linearity goes away.\n\nFor example, the following logs are from running the code using 10 log recovery threads without time index (`Old_Mark` indicates no time index, and the same random Old_Mark means they are from the same test run).\n\nFor TOPIC1, it only took ~400 ms to load about 2000 log segments, at about the same time (300 ms earlier) TOPIC2 takes 22 ms to load ~70 log segments. However, later on the same run (3 seconds later), for some other partitions of TOPIC2 that has about the same number of segments, it takes much longer (~400 ms) to load. This was the reason that I suspected that the later mmap() calls are more expensive, which seems also proven from profiling by measuring the time on mmap calls in different buckets.\n\nI am not sure why this happens, but I didn't see such issue when there is one log loading thread.\n\n```\n2016/08/16 20:57:28.793 INFO [Log] [pool-9-thread-3] [kafka-server] [] (22 ms) Completed load of log TOPIC2-7 with 74 log segments and log end offset 1835960333 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:28.794 INFO [Log] [pool-9-thread-1] [kafka-server] [] (22 ms) Completed load of log TOPIC2-4 with 84 log segments and log end offset 1829077019 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:28.795 INFO [Log] [pool-9-thread-2] [kafka-server] [] (23 ms) Completed load of log TOPIC2-8 with 68 log segments and log end offset 1831459833 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:28.795 INFO [Log] [pool-9-thread-4] [kafka-server] [] (24 ms) Completed load of log TOPIC2-2 with 79 log segments and log end offset 1836145525 (Old_Mark 5303310516390717976)\n......\n2016/08/16 20:57:29.133 INFO [Log] [pool-9-thread-1] [kafka-server] [] (337 ms) Completed load of log TOPIC1-2 with 1973 log segments and log end offset 7832957736 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:29.177 INFO [Log] [pool-9-thread-2] [kafka-server] [] (380 ms) Completed load of log TOPIC1-9 with 2020 log segments and log end offset 7871065990 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:29.203 INFO [Log] [pool-9-thread-5] [kafka-server] [] (407 ms) Completed load of log TOPIC1-7 with 2076 log segments and log end offset 7839205001 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:29.245 INFO [Log] [pool-9-thread-3] [kafka-server] [] (447 ms) Completed load of log TOPIC1-0 with 2078 log segments and log end offset 7852775406 (Old_Mark 5303310516390717976)\n...\n2016/08/16 20:57:32.100 INFO [Log] [pool-9-thread-1] [kafka-server] [] (387 ms) Completed load of log TOPIC2-112 with 77 log segments and log end offset 371172232 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:32.100 INFO [Log] [pool-9-thread-2] [kafka-server] [] (383 ms) Completed load of log TOPIC2-122 with 68 log segments and log end offset 373822294 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:32.110 INFO [Log] [pool-9-thread-4] [kafka-server] [] (393 ms) Completed load of log TOPIC2-27 with 81 log segments and log end offset 375406677 (Old_Mark 5303310516390717976)\n2016/08/16 20:57:32.124 INFO [Log] [pool-9-thread-3] [kafka-server] [] (406 ms) Completed load of log TOPIC2-17 with 72 log segments and log end offset 371089327 (Old_Mark 5303310516390717976)\n```\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240883073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240885847","html_url":"https://github.com/apache/kafka/pull/1726#issuecomment-240885847","issue_url":"https://api.github.com/repos/apache/kafka/issues/1726","id":240885847,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg4NTg0Nw==","user":{"login":"vahidhashemian","id":13593506,"node_id":"MDQ6VXNlcjEzNTkzNTA2","avatar_url":"https://avatars.githubusercontent.com/u/13593506?v=4","gravatar_id":"","url":"https://api.github.com/users/vahidhashemian","html_url":"https://github.com/vahidhashemian","followers_url":"https://api.github.com/users/vahidhashemian/followers","following_url":"https://api.github.com/users/vahidhashemian/following{/other_user}","gists_url":"https://api.github.com/users/vahidhashemian/gists{/gist_id}","starred_url":"https://api.github.com/users/vahidhashemian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vahidhashemian/subscriptions","organizations_url":"https://api.github.com/users/vahidhashemian/orgs","repos_url":"https://api.github.com/users/vahidhashemian/repos","events_url":"https://api.github.com/users/vahidhashemian/events{/privacy}","received_events_url":"https://api.github.com/users/vahidhashemian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T23:19:52Z","updated_at":"2016-08-18T23:20:20Z","author_association":"CONTRIBUTOR","body":"@hachikuji Correction: there is no unnecessary rebalances, just a redundant metadata update requests (with the test case I'm running) which I think is okay. And unit tests seem to be unaffected by the current PR (current build errors seem to be unrelated). Please let me know if you notice anything that I've missed.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240885847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240886511","html_url":"https://github.com/apache/kafka/pull/1745#issuecomment-240886511","issue_url":"https://api.github.com/repos/apache/kafka/issues/1745","id":240886511,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg4NjUxMQ==","user":{"login":"shikhar","id":74267,"node_id":"MDQ6VXNlcjc0MjY3","avatar_url":"https://avatars.githubusercontent.com/u/74267?v=4","gravatar_id":"","url":"https://api.github.com/users/shikhar","html_url":"https://github.com/shikhar","followers_url":"https://api.github.com/users/shikhar/followers","following_url":"https://api.github.com/users/shikhar/following{/other_user}","gists_url":"https://api.github.com/users/shikhar/gists{/gist_id}","starred_url":"https://api.github.com/users/shikhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shikhar/subscriptions","organizations_url":"https://api.github.com/users/shikhar/orgs","repos_url":"https://api.github.com/users/shikhar/repos","events_url":"https://api.github.com/users/shikhar/events{/privacy}","received_events_url":"https://api.github.com/users/shikhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T23:24:03Z","updated_at":"2016-08-18T23:24:03Z","author_association":"CONTRIBUTOR","body":"cc @ewencp @hachikuji for review\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240886511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240895715","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240895715","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240895715,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg5NTcxNQ==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T00:22:28Z","updated_at":"2016-08-19T00:22:28Z","author_association":"CONTRIBUTOR","body":"@becketqin : Thanks for the latest patch. I made another pass and only had a few minor comments. Once those are addressed, I can merge in the patch.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240895715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240919568","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-240919568","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":240919568,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkxOTU2OA==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T03:36:06Z","updated_at":"2016-08-19T03:36:06Z","author_association":"CONTRIBUTOR","body":"Good idea. I wonder if we want to log the full value in a higher debug level (TRACE or DEBUG) just in case someone is really desperate.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240919568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240919877","html_url":"https://github.com/apache/kafka/pull/1732#issuecomment-240919877","issue_url":"https://api.github.com/repos/apache/kafka/issues/1732","id":240919877,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkxOTg3Nw==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T03:39:13Z","updated_at":"2016-08-19T03:39:13Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this :)\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240919877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240920522","html_url":"https://github.com/apache/kafka/pull/1749#issuecomment-240920522","issue_url":"https://api.github.com/repos/apache/kafka/issues/1749","id":240920522,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyMDUyMg==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T03:45:30Z","updated_at":"2016-08-19T03:45:30Z","author_association":"CONTRIBUTOR","body":"It looks incomplete?\n\nI'm not sure what's the expected behavior if:\n- I don't specify producer-props or producer-config, but I assume one is mandatory? Shouldn't we check and give proper error?\n- What if I specify both? It looks like producer-props overrides producer-config, did we validate that this is the case? perhaps we want to make sure the built-in help includes this clarification.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240920522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240920987","html_url":"https://github.com/apache/kafka/pull/1740#issuecomment-240920987","issue_url":"https://api.github.com/repos/apache/kafka/issues/1740","id":240920987,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyMDk4Nw==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T03:49:48Z","updated_at":"2016-08-19T03:49:48Z","author_association":"CONTRIBUTOR","body":"LGTM! Thanks for fixing.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240920987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240921574","html_url":"https://github.com/apache/kafka/pull/1721#issuecomment-240921574","issue_url":"https://api.github.com/repos/apache/kafka/issues/1721","id":240921574,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyMTU3NA==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T03:55:23Z","updated_at":"2016-08-19T03:55:23Z","author_association":"CONTRIBUTOR","body":"LGTM.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240921574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240925411","html_url":"https://github.com/apache/kafka/pull/1762#issuecomment-240925411","issue_url":"https://api.github.com/repos/apache/kafka/issues/1762","id":240925411,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyNTQxMQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T04:31:54Z","updated_at":"2016-08-19T04:34:34Z","author_association":"CONTRIBUTOR","body":"Ping @guozhangwang and @vahidhashemian for review. Fixing this was a bit more work than expected. I felt that depending on the flag inside `SubscriptionState` to know when a rebalance was needed was a little brittle, so I restructured the logic so that we check for subscription differences more directly.\n\nVahid, hopefully this doesn't screw up your work on KIP-70 too much, but let me know.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240925411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240925913","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-240925913","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":240925913,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyNTkxMw==","user":{"login":"jaikiran","id":143523,"node_id":"MDQ6VXNlcjE0MzUyMw==","avatar_url":"https://avatars.githubusercontent.com/u/143523?v=4","gravatar_id":"","url":"https://api.github.com/users/jaikiran","html_url":"https://github.com/jaikiran","followers_url":"https://api.github.com/users/jaikiran/followers","following_url":"https://api.github.com/users/jaikiran/following{/other_user}","gists_url":"https://api.github.com/users/jaikiran/gists{/gist_id}","starred_url":"https://api.github.com/users/jaikiran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaikiran/subscriptions","organizations_url":"https://api.github.com/users/jaikiran/orgs","repos_url":"https://api.github.com/users/jaikiran/repos","events_url":"https://api.github.com/users/jaikiran/events{/privacy}","received_events_url":"https://api.github.com/users/jaikiran/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T04:36:55Z","updated_at":"2016-08-19T04:36:55Z","author_association":"MEMBER","body":"@gwenshap  Personally, I think it won't add value to log the value of the config. If a certain config is being ignored, almost always I am interested in knowing just the name of the config.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240925913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240927767","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-240927767","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":240927767,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyNzc2Nw==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T04:54:47Z","updated_at":"2016-08-19T04:54:47Z","author_association":"CONTRIBUTOR","body":"@cotedm and @rnpridgeon  - thoughts? do you think the values are useful?\nSorry if I'm overly concerned about something minor, but don't want Kafka to become less debuggable.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240927767/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240927980","html_url":"https://github.com/apache/kafka/pull/1751#issuecomment-240927980","issue_url":"https://api.github.com/repos/apache/kafka/issues/1751","id":240927980,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkyNzk4MA==","user":{"login":"gwenshap","id":1189030,"node_id":"MDQ6VXNlcjExODkwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1189030?v=4","gravatar_id":"","url":"https://api.github.com/users/gwenshap","html_url":"https://github.com/gwenshap","followers_url":"https://api.github.com/users/gwenshap/followers","following_url":"https://api.github.com/users/gwenshap/following{/other_user}","gists_url":"https://api.github.com/users/gwenshap/gists{/gist_id}","starred_url":"https://api.github.com/users/gwenshap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwenshap/subscriptions","organizations_url":"https://api.github.com/users/gwenshap/orgs","repos_url":"https://api.github.com/users/gwenshap/repos","events_url":"https://api.github.com/users/gwenshap/events{/privacy}","received_events_url":"https://api.github.com/users/gwenshap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T04:56:56Z","updated_at":"2016-08-19T04:56:56Z","author_association":"CONTRIBUTOR","body":"good call :)\n\nI don't think we have tests covering TopicCommand, so... did you validate all the options work as expected?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240927980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240931044","html_url":"https://github.com/apache/kafka/pull/1215#issuecomment-240931044","issue_url":"https://api.github.com/repos/apache/kafka/issues/1215","id":240931044,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDkzMTA0NA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T05:25:29Z","updated_at":"2016-08-19T05:25:29Z","author_association":"CONTRIBUTOR","body":"@junrao Thanks a lot for all the patient reviews. I updated the patch to address you latest comments and added a few unit tests. Thanks again.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240931044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240951853","html_url":"https://github.com/apache/kafka/pull/1761#issuecomment-240951853","issue_url":"https://api.github.com/repos/apache/kafka/issues/1761","id":240951853,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk1MTg1Mw==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T07:49:31Z","updated_at":"2016-08-19T07:49:31Z","author_association":"CONTRIBUTOR","body":"@theduderog you have a checkstyle failure\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240951853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240955033","html_url":"https://github.com/apache/kafka/pull/1761#issuecomment-240955033","issue_url":"https://api.github.com/repos/apache/kafka/issues/1761","id":240955033,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk1NTAzMw==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T08:06:27Z","updated_at":"2016-08-19T08:06:27Z","author_association":"CONTRIBUTOR","body":"After seeing the API changes, i'm wondering if it would be better if we have a single function `range(Range<K> range)` - and have a class sth like:\n\n```\nclass Range<K>\n   K from;\n   K to;\n   ...\n   static <K> from(K key) ...\n   static <K> until(K key) ..\n  // etc\n```\n\nIt at least means we can support everything with a single method on the `KeyValuStore` interface. \nInterested in hearing what @guozhangwang @miguno @enothereska @mjsax think\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240955033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240957584","html_url":"https://github.com/apache/kafka/pull/1751#issuecomment-240957584","issue_url":"https://api.github.com/repos/apache/kafka/issues/1751","id":240957584,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk1NzU4NA==","user":{"login":"sh-z","id":19149511,"node_id":"MDQ6VXNlcjE5MTQ5NTEx","avatar_url":"https://avatars.githubusercontent.com/u/19149511?v=4","gravatar_id":"","url":"https://api.github.com/users/sh-z","html_url":"https://github.com/sh-z","followers_url":"https://api.github.com/users/sh-z/followers","following_url":"https://api.github.com/users/sh-z/following{/other_user}","gists_url":"https://api.github.com/users/sh-z/gists{/gist_id}","starred_url":"https://api.github.com/users/sh-z/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sh-z/subscriptions","organizations_url":"https://api.github.com/users/sh-z/orgs","repos_url":"https://api.github.com/users/sh-z/repos","events_url":"https://api.github.com/users/sh-z/events{/privacy}","received_events_url":"https://api.github.com/users/sh-z/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T08:20:05Z","updated_at":"2016-08-19T08:20:05Z","author_association":"CONTRIBUTOR","body":"@gwenshap Thanks for your review.\n\nBefore I thought we had tests covering it, so I didn't validate it specially. I will do it and share with you the result later.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240957584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240957658","html_url":"https://github.com/apache/kafka/pull/1761#issuecomment-240957658","issue_url":"https://api.github.com/repos/apache/kafka/issues/1761","id":240957658,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk1NzY1OA==","user":{"login":"miguno","id":294849,"node_id":"MDQ6VXNlcjI5NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/294849?v=4","gravatar_id":"","url":"https://api.github.com/users/miguno","html_url":"https://github.com/miguno","followers_url":"https://api.github.com/users/miguno/followers","following_url":"https://api.github.com/users/miguno/following{/other_user}","gists_url":"https://api.github.com/users/miguno/gists{/gist_id}","starred_url":"https://api.github.com/users/miguno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguno/subscriptions","organizations_url":"https://api.github.com/users/miguno/orgs","repos_url":"https://api.github.com/users/miguno/repos","events_url":"https://api.github.com/users/miguno/events{/privacy}","received_events_url":"https://api.github.com/users/miguno/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T08:20:21Z","updated_at":"2016-08-19T08:20:21Z","author_association":"CONTRIBUTOR","body":"I don't have a strong opinion.\n\nI see the benefits of a single `range(Range<K> range)` method.  Its drawback is that users have to construct a new instance of `Range<K>` every time, which is more cumbersome in terms of using the API.\n\nSo:\n\n``` java\nstore.rangeFrom(3)\n```\n\nversus\n\n``` java\nstore.range(Range.from(3))\n```\n\nPerhaps a question to ask is:  Would we need a separate `Range` class because we expect to add more functions than what `rangeFrom(K)` and `rangeUntil(K)` would cover?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240957658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240961033","html_url":"https://github.com/apache/kafka/pull/1751#issuecomment-240961033","issue_url":"https://api.github.com/repos/apache/kafka/issues/1751","id":240961033,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk2MTAzMw==","user":{"login":"sh-z","id":19149511,"node_id":"MDQ6VXNlcjE5MTQ5NTEx","avatar_url":"https://avatars.githubusercontent.com/u/19149511?v=4","gravatar_id":"","url":"https://api.github.com/users/sh-z","html_url":"https://github.com/sh-z","followers_url":"https://api.github.com/users/sh-z/followers","following_url":"https://api.github.com/users/sh-z/following{/other_user}","gists_url":"https://api.github.com/users/sh-z/gists{/gist_id}","starred_url":"https://api.github.com/users/sh-z/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sh-z/subscriptions","organizations_url":"https://api.github.com/users/sh-z/orgs","repos_url":"https://api.github.com/users/sh-z/repos","events_url":"https://api.github.com/users/sh-z/events{/privacy}","received_events_url":"https://api.github.com/users/sh-z/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T08:36:55Z","updated_at":"2016-08-19T08:36:55Z","author_association":"CONTRIBUTOR","body":"@gwenshap BTW, usually how will you test the functions in TopicCommand, test manually? \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240961033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240979937","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-240979937","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":240979937,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDk3OTkzNw==","user":{"login":"rnpridgeon","id":5313961,"node_id":"MDQ6VXNlcjUzMTM5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/5313961?v=4","gravatar_id":"","url":"https://api.github.com/users/rnpridgeon","html_url":"https://github.com/rnpridgeon","followers_url":"https://api.github.com/users/rnpridgeon/followers","following_url":"https://api.github.com/users/rnpridgeon/following{/other_user}","gists_url":"https://api.github.com/users/rnpridgeon/gists{/gist_id}","starred_url":"https://api.github.com/users/rnpridgeon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnpridgeon/subscriptions","organizations_url":"https://api.github.com/users/rnpridgeon/orgs","repos_url":"https://api.github.com/users/rnpridgeon/repos","events_url":"https://api.github.com/users/rnpridgeon/events{/privacy}","received_events_url":"https://api.github.com/users/rnpridgeon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T10:06:11Z","updated_at":"2016-08-19T10:06:11Z","author_association":"CONTRIBUTOR","body":"@gwenshap I'm okay with it. Knowing which key is malformed should be enough to point you in the right direction when diagnosing a problem. The key's value does add a certain convenience factor to your debugging efforts but it's not really necessary. \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/240979937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241003158","html_url":"https://github.com/apache/kafka/pull/1725#issuecomment-241003158","issue_url":"https://api.github.com/repos/apache/kafka/issues/1725","id":241003158,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTAwMzE1OA==","user":{"login":"tcrayford","id":55975,"node_id":"MDQ6VXNlcjU1OTc1","avatar_url":"https://avatars.githubusercontent.com/u/55975?v=4","gravatar_id":"","url":"https://api.github.com/users/tcrayford","html_url":"https://github.com/tcrayford","followers_url":"https://api.github.com/users/tcrayford/followers","following_url":"https://api.github.com/users/tcrayford/following{/other_user}","gists_url":"https://api.github.com/users/tcrayford/gists{/gist_id}","starred_url":"https://api.github.com/users/tcrayford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tcrayford/subscriptions","organizations_url":"https://api.github.com/users/tcrayford/orgs","repos_url":"https://api.github.com/users/tcrayford/repos","events_url":"https://api.github.com/users/tcrayford/events{/privacy}","received_events_url":"https://api.github.com/users/tcrayford/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T12:17:20Z","updated_at":"2016-08-19T12:17:20Z","author_association":"CONTRIBUTOR","body":"@junrao thanks, all addressed now\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241003158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241003719","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-241003719","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":241003719,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTAwMzcxOQ==","user":{"login":"cotedm","id":10028669,"node_id":"MDQ6VXNlcjEwMDI4NjY5","avatar_url":"https://avatars.githubusercontent.com/u/10028669?v=4","gravatar_id":"","url":"https://api.github.com/users/cotedm","html_url":"https://github.com/cotedm","followers_url":"https://api.github.com/users/cotedm/followers","following_url":"https://api.github.com/users/cotedm/following{/other_user}","gists_url":"https://api.github.com/users/cotedm/gists{/gist_id}","starred_url":"https://api.github.com/users/cotedm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cotedm/subscriptions","organizations_url":"https://api.github.com/users/cotedm/orgs","repos_url":"https://api.github.com/users/cotedm/repos","events_url":"https://api.github.com/users/cotedm/events{/privacy}","received_events_url":"https://api.github.com/users/cotedm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T12:20:18Z","updated_at":"2016-08-19T12:20:18Z","author_association":"CONTRIBUTOR","body":"@gwenshap I agree with @rnpridgeon, with an unknown config, we usually just care about the property name.  I don't think we should log the value at a higher log level as then turning on TRACE level logging would be a \"no go\" for institutions that are worried about exposing passwords.  That would hamper debugging efforts.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241003719/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241024281","html_url":"https://github.com/apache/kafka/pull/1763#issuecomment-241024281","issue_url":"https://api.github.com/repos/apache/kafka/issues/1763","id":241024281,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTAyNDI4MQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T13:53:22Z","updated_at":"2016-08-19T13:53:27Z","author_association":"MEMBER","body":"This is a result of the additional thread introduced by KIP-62, right? cc @hachikuji \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241024281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241033890","html_url":"https://github.com/apache/kafka/pull/1759#issuecomment-241033890","issue_url":"https://api.github.com/repos/apache/kafka/issues/1759","id":241033890,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTAzMzg5MA==","user":{"login":"granthenke","id":1928566,"node_id":"MDQ6VXNlcjE5Mjg1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1928566?v=4","gravatar_id":"","url":"https://api.github.com/users/granthenke","html_url":"https://github.com/granthenke","followers_url":"https://api.github.com/users/granthenke/followers","following_url":"https://api.github.com/users/granthenke/following{/other_user}","gists_url":"https://api.github.com/users/granthenke/gists{/gist_id}","starred_url":"https://api.github.com/users/granthenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granthenke/subscriptions","organizations_url":"https://api.github.com/users/granthenke/orgs","repos_url":"https://api.github.com/users/granthenke/repos","events_url":"https://api.github.com/users/granthenke/events{/privacy}","received_events_url":"https://api.github.com/users/granthenke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T14:29:42Z","updated_at":"2016-08-19T14:29:42Z","author_association":"MEMBER","body":"I like this change. I agree with @cotedm that logging it a trace might prevent people from being able to use trace. \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241033890/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241037826","html_url":"https://github.com/apache/kafka/pull/1747#issuecomment-241037826","issue_url":"https://api.github.com/repos/apache/kafka/issues/1747","id":241037826,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTAzNzgyNg==","user":{"login":"granthenke","id":1928566,"node_id":"MDQ6VXNlcjE5Mjg1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1928566?v=4","gravatar_id":"","url":"https://api.github.com/users/granthenke","html_url":"https://github.com/granthenke","followers_url":"https://api.github.com/users/granthenke/followers","following_url":"https://api.github.com/users/granthenke/following{/other_user}","gists_url":"https://api.github.com/users/granthenke/gists{/gist_id}","starred_url":"https://api.github.com/users/granthenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granthenke/subscriptions","organizations_url":"https://api.github.com/users/granthenke/orgs","repos_url":"https://api.github.com/users/granthenke/repos","events_url":"https://api.github.com/users/granthenke/events{/privacy}","received_events_url":"https://api.github.com/users/granthenke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T14:44:09Z","updated_at":"2016-08-19T14:44:09Z","author_association":"MEMBER","body":"Thanks for the PR, this is great. \n\nIt doesn't need to be in this PR, but I think it would be interesting to add this parameter to the matrix in the ducktape benchmark tests: https://github.com/apache/kafka/blob/trunk/tests/kafkatest/benchmarks/core/benchmark_test.py\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241037826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241042265","html_url":"https://github.com/apache/kafka/pull/1755#issuecomment-241042265","issue_url":"https://api.github.com/repos/apache/kafka/issues/1755","id":241042265,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA0MjI2NQ==","user":{"login":"maysamyabandeh","id":1167741,"node_id":"MDQ6VXNlcjExNjc3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/1167741?v=4","gravatar_id":"","url":"https://api.github.com/users/maysamyabandeh","html_url":"https://github.com/maysamyabandeh","followers_url":"https://api.github.com/users/maysamyabandeh/followers","following_url":"https://api.github.com/users/maysamyabandeh/following{/other_user}","gists_url":"https://api.github.com/users/maysamyabandeh/gists{/gist_id}","starred_url":"https://api.github.com/users/maysamyabandeh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maysamyabandeh/subscriptions","organizations_url":"https://api.github.com/users/maysamyabandeh/orgs","repos_url":"https://api.github.com/users/maysamyabandeh/repos","events_url":"https://api.github.com/users/maysamyabandeh/events{/privacy}","received_events_url":"https://api.github.com/users/maysamyabandeh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:00:00Z","updated_at":"2016-08-19T15:00:00Z","author_association":"NONE","body":"The latest patch implements @resetius's original suggestion of invoking System.exit from another anonymous thread. It also adds a unit test to simulate the deadlock situation.\n\nAssuming that this patch would work, I am thinking that perhaps we can call FatalExitError.shutdownSystem right away instead of relying on user code not to swallow the exception along the stack. Given that the System.exit is invoked from another thread there is not much lock-releasing advantage in delaying the shutdown. We would still need to throw the FatalExitError--and rely on user code not to swallow it along the way--to have the current thread exit but invocation of shutdownSystem on the error does not have to be delayed.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241042265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241045462","html_url":"https://github.com/apache/kafka/pull/1748#issuecomment-241045462","issue_url":"https://api.github.com/repos/apache/kafka/issues/1748","id":241045462,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA0NTQ2Mg==","user":{"login":"granthenke","id":1928566,"node_id":"MDQ6VXNlcjE5Mjg1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1928566?v=4","gravatar_id":"","url":"https://api.github.com/users/granthenke","html_url":"https://github.com/granthenke","followers_url":"https://api.github.com/users/granthenke/followers","following_url":"https://api.github.com/users/granthenke/following{/other_user}","gists_url":"https://api.github.com/users/granthenke/gists{/gist_id}","starred_url":"https://api.github.com/users/granthenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granthenke/subscriptions","organizations_url":"https://api.github.com/users/granthenke/orgs","repos_url":"https://api.github.com/users/granthenke/repos","events_url":"https://api.github.com/users/granthenke/events{/privacy}","received_events_url":"https://api.github.com/users/granthenke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:11:41Z","updated_at":"2016-08-19T15:11:41Z","author_association":"MEMBER","body":"In the Jira @ijuma mentioned replacing `File.delete` with `Files.delete`. Do you plan to do that too?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241045462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241048401","html_url":"https://github.com/apache/kafka/pull/1748#issuecomment-241048401","issue_url":"https://api.github.com/repos/apache/kafka/issues/1748","id":241048401,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA0ODQwMQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:22:02Z","updated_at":"2016-08-19T15:22:02Z","author_association":"MEMBER","body":"Maybe we can do that in a separate PR to make it easier to review and merge.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241048401/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241050654","html_url":"https://github.com/apache/kafka/pull/1741#issuecomment-241050654","issue_url":"https://api.github.com/repos/apache/kafka/issues/1741","id":241050654,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA1MDY1NA==","user":{"login":"granthenke","id":1928566,"node_id":"MDQ6VXNlcjE5Mjg1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1928566?v=4","gravatar_id":"","url":"https://api.github.com/users/granthenke","html_url":"https://github.com/granthenke","followers_url":"https://api.github.com/users/granthenke/followers","following_url":"https://api.github.com/users/granthenke/following{/other_user}","gists_url":"https://api.github.com/users/granthenke/gists{/gist_id}","starred_url":"https://api.github.com/users/granthenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granthenke/subscriptions","organizations_url":"https://api.github.com/users/granthenke/orgs","repos_url":"https://api.github.com/users/granthenke/repos","events_url":"https://api.github.com/users/granthenke/events{/privacy}","received_events_url":"https://api.github.com/users/granthenke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:30:19Z","updated_at":"2016-08-19T15:30:44Z","author_association":"MEMBER","body":"Thanks for the patch @eliasdorneles.\n\nCan you share the output of the logs after the changes?\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241050654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241051915","html_url":"https://github.com/apache/kafka/pull/1756#issuecomment-241051915","issue_url":"https://api.github.com/repos/apache/kafka/issues/1756","id":241051915,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA1MTkxNQ==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:34:47Z","updated_at":"2016-08-19T15:34:47Z","author_association":"MEMBER","body":"@guozhangwang @ijuma \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241051915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241057575","html_url":"https://github.com/apache/kafka/pull/1764#issuecomment-241057575","issue_url":"https://api.github.com/repos/apache/kafka/issues/1764","id":241057575,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA1NzU3NQ==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:55:38Z","updated_at":"2016-08-19T15:55:38Z","author_association":"MEMBER","body":"@guozhangwang @miguno @dguy @enothereska @hjafarpour \n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241057575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241058218","html_url":"https://github.com/apache/kafka/pull/1764#issuecomment-241058218","issue_url":"https://api.github.com/repos/apache/kafka/issues/1764","id":241058218,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA1ODIxOA==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T15:58:09Z","updated_at":"2016-08-19T15:58:09Z","author_association":"MEMBER","body":"See #1765\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241058218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241060553","html_url":"https://github.com/apache/kafka/pull/1751#issuecomment-241060553","issue_url":"https://api.github.com/repos/apache/kafka/issues/1751","id":241060553,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTA2MDU1Mw==","user":{"login":"sh-z","id":19149511,"node_id":"MDQ6VXNlcjE5MTQ5NTEx","avatar_url":"https://avatars.githubusercontent.com/u/19149511?v=4","gravatar_id":"","url":"https://api.github.com/users/sh-z","html_url":"https://github.com/sh-z","followers_url":"https://api.github.com/users/sh-z/followers","following_url":"https://api.github.com/users/sh-z/following{/other_user}","gists_url":"https://api.github.com/users/sh-z/gists{/gist_id}","starred_url":"https://api.github.com/users/sh-z/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sh-z/subscriptions","organizations_url":"https://api.github.com/users/sh-z/orgs","repos_url":"https://api.github.com/users/sh-z/repos","events_url":"https://api.github.com/users/sh-z/events{/privacy}","received_events_url":"https://api.github.com/users/sh-z/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-19T16:07:00Z","updated_at":"2016-08-19T16:07:00Z","author_association":"CONTRIBUTOR","body":"@gwenshap I tested `create`, `alter`, `delete` and `describe` functions in TopicCommand manually, they worked well as expected. \n\nI picked up `if-exists`, `if-not-exists` and `under-replicated-partitions` as test cases for each operations.\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/241060553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]