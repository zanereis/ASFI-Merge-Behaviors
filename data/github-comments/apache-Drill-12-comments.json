[{"url":"https://api.github.com/repos/apache/drill/issues/comments/237741658","html_url":"https://github.com/apache/drill/pull/517#issuecomment-237741658","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":237741658,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzc0MTY1OA==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T02:44:12Z","updated_at":"2016-08-05T02:44:12Z","author_association":"CONTRIBUTOR","body":"Thanks for looking at this, Paul.  If there are problems with comparing an input decimal (from the \"where clause\", for example) against the data, it is because of the algorithms for comparing decimal values of different precisions, not because the proper precision was computed for the input decimal (e.g., based on the actual numerical value, as my PR-517 fix is doing when no precision is provided initially).  I was going to comment about the idea of using a fixed value of precision=10, but you beat me to it.  It does not suffice for larger integers, like those that require a \"long\" instead of an \"int\" to represent.  So, I suggest that we take a \"divide and conquer\" approach with this problem.  First, compute a proper precision for the value casted from int or BigInt.  Next, make sure the comparison with other decimal values works for any other decimal value precision (a separate issue).\nDecimal support in Drill is disabled by default for good reasons.  The (decimal) design itself is fundamentally flawed, and it has all sorts of issues related to code maintainability as well as runtime performance.  I have been experimenting in a Drill \"play build node\" with having a single, one-size-fits-all variable width vector class that represents any decimal value efficiently (I call it \"VarDecimal\").  It's difficult to even get this to compile (with all of the FreeMarker use, and the numerous conversions between all of the decimal and non-decimal types), but eventually I hope to experiment with this to deal with the DRILL-4184 problem I encountered a number of months ago (for which I have a pull request PR-372 with a short-term, but not a clean, fix).\nAs food for thought, while looking at this experimental \"VarDecimal\" thing, I noticed that there are (numerous) casts/conversions between all of the pairwise combinations of different decimal precisions (DECIMAL9, DECIMAL18, DECIMAL28, DECIMAL38, both dense and sparse, from what I recall), and between all of these and all other types that have numeric interpretation.  Eventually replacing all of these different DECIMAL\\* fixed width representations with a single VarDecimal variable width representation (one-size-fits-all) would be much more efficient (memory-wise) at runtime (for typical scenarios where most actual numeric values don't require the full precision to represent), would greatly simplify parts of the Drill code, and would fix DRILL-4184 cleanly. \nUntil some major re-work can be done for Drill decimal support, we will probably have to settle for small, incremental improvements.  I would say that PR-517 represents one such improvement.\n\n```\nOn Thursday, August 4, 2016 9:31 PM, Paul Rogers <notifications@github.com> wrote:\n```\n\n The plot thickens. I tried the fix of setting the precision to a constant of 10. This uncovered a larger issue. The template in question generates cast functions for (INTEGER, BIGINT) x (DECIMAL9, DECIMAL18, DECIMAL28) and perhaps others. The constant of 10 does not, of course, work for BIGINT (long) values.The trick is that precision=10 won't work for DECIMAL9 either. Dave's solution has a similar problem. Dave sets the precision to whatever is right for the input value, which seems great. But, that value could be too large for the output DECIMAL type.What we need is to set the precision to the min( max int precision, max decimal precision ). Or, if we use Dave's proposed solution, max( input arg precision, max decimal precision ).In either case, the code must handle overflow. Passing a Long.MAX_VALUE or even Integer.MAX_VALUE to CastBigIntDecimal9( ) should cause an overflow error or data truncation. I'll research how that worked previously to see if we've uncovered a new issue, or if a solution already exists.—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237741658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237752043","html_url":"https://github.com/apache/drill/pull/559#issuecomment-237752043","issue_url":"https://api.github.com/repos/apache/drill/issues/559","id":237752043,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzc1MjA0Mw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T04:24:47Z","updated_at":"2016-08-05T04:24:47Z","author_association":"CONTRIBUTOR","body":"@amansinha100 , could you please review this patch?\n\nUnit test / functional regression have passed. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237752043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237905454","html_url":"https://github.com/apache/drill/pull/559#issuecomment-237905454","issue_url":"https://api.github.com/repos/apache/drill/issues/559","id":237905454,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzkwNTQ1NA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T17:02:53Z","updated_at":"2016-08-05T17:02:53Z","author_association":"CONTRIBUTOR","body":"@amansinha100 , thanks for your comments. Could you please take another look?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237905454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237911942","html_url":"https://github.com/apache/drill/pull/559#issuecomment-237911942","issue_url":"https://api.github.com/repos/apache/drill/issues/559","id":237911942,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzkxMTk0Mg==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T17:29:42Z","updated_at":"2016-08-05T17:29:42Z","author_association":"NONE","body":"LGTM.  +1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237911942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976311","html_url":"https://github.com/apache/drill/pull/517#issuecomment-237976311","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":237976311,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk3NjMxMQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T22:00:51Z","updated_at":"2016-08-05T22:00:51Z","author_association":"CONTRIBUTOR","body":"Hi Dave,\n\nI agree that Drill Decimal support clearly needs attention. I'm expermenting with adjusting the template code to at least generate a meaningful conversion for all int x decimal types when the values fit.\n\nLooks like current behavior will be that if we convert an int that is too large for a scale of 0, we won't adjust the scale. That is, if we always leave scale=0, then we'll do the following obviously wrong converstion:\n\nbig int: 123,456,789,012\nDec 9: 456,789,012\n\nWe want a scale of 3, so that the answer is:\n\nDec 9: 123,456,789,000\n\nAnd, of course, we should round the least significant digit, which it seems we don't do.\n\nSo, our fix will work only for the simple case, not for the more complex case.\n\nWe could leverage your fix to properly set the scale as well as the precision.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976692","html_url":"https://github.com/apache/drill/pull/517#issuecomment-237976692","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":237976692,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk3NjY5Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T22:03:03Z","updated_at":"2016-08-05T22:03:03Z","author_association":"CONTRIBUTOR","body":"Based on above discussion, I played around with the proposed solution. The following takes into consideration the max precision of both the input and output types. It DOES NOT handle truncation properly (but nor do any of the other solutions.)\n\nHere is the revised code:\n\n```\n    if (precision.value <= 0) {\n<#--\n        // since input precision is nonpositive, calculate precision for this integer value\n        long precisionTmp = in.value == 0 ? 1 : in.value;  // precision for value 0 will be 1\n        int precisionCounter = 0;\n        while (precisionTmp != 0) {\n            ++precisionCounter;\n            precisionTmp /= 10;\n        }\n        out.precision = precisionCounter;\n-->\n        // Since precision is not provided, select one appropriate for the\n        // largest integer value and the target decimal type.\n\n        // Note: if the integer is too large for the target precision, silent\n        // truncation of the highest part of the number will occur. This is\n        // obviously bad. What should happen is we shift scale and discard\n        // the low-order digits.\n        // That is, if we convert 123,456,789,012 to Dec9, the result is\n        // 456,789,012 which is very obviously very wrong. It should be\n        // 123,456,789,000.\n        <#-- A correct solution requires a modification of the code\n             commented out above. -->\n\n      <#-- Precision needed by the largest from type value. -->\n      <#if type.from.equals( \"Int\" )>\n        <#assign inPrec = 10>\n      <#elseif type.from.equals( \"BigInt\" )>\n        <#assign inPrec = 19>\n      <#else>\n        <#-- Yes, create invalid syntax: that way the compiler will tell us we missed a type. -->\n        <#assign inPrec = \"Unexpected from type: ${type.from}\">\n      </#if>\n\n      <#-- Maximum precision allowed by the to type. -->\n      <#if type.to.startsWith(\"Decimal9\")>\n        <#assign maxPrec = 9>\n      <#elseif type.to.startsWith(\"Decimal18\")>\n        <#assign maxPrec = 18>\n      <#elseif type.to.startsWith(\"Decimal28\")>\n        <#assign maxPrec = 28>\n      <#elseif type.to.startsWith(\"Decimal38\")>\n        <#assign maxPrec = 38>\n      <#else>\n        <#-- Yes, create invalid syntax: that way the compiler will tell us we missed a type. -->\n        <#assign maxPrec = \"Unexpected to type: ${type.to}\">\n      </#if>\n      <#-- Note that this calculation is done here, rather than in static variables,\n           because static members are not allowed for this function. -->\n      <#if inPrec < maxPrec>\n        // Maximum precision needed by the largest ${type.from} value.\n        out.precision = ${inPrec};\n      <#else>\n        // Maximum precision allowed by the ${type.to} type.\n        out.precision = ${maxPrec};\n      </#if>\n    }\n    else {\n        // since input precision is positive, assume it is correct, and use it\n        out.precision = (int) precision.value;\n        out.scale = (int) scale.value;\n    }\n```\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976885","html_url":"https://github.com/apache/drill/pull/517#issuecomment-237976885","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":237976885,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk3Njg4NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T22:04:21Z","updated_at":"2016-08-05T22:04:21Z","author_association":"CONTRIBUTOR","body":"As a next step, using Dave's solution would better handle truncation: based on the precision of the input value, adjust the scale to truncate low-order digits.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237976885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237980560","html_url":"https://github.com/apache/drill/pull/556#issuecomment-237980560","issue_url":"https://api.github.com/repos/apache/drill/issues/556","id":237980560,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk4MDU2MA==","user":{"login":"adityakishore","id":2080248,"node_id":"MDQ6VXNlcjIwODAyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/2080248?v=4","gravatar_id":"","url":"https://api.github.com/users/adityakishore","html_url":"https://github.com/adityakishore","followers_url":"https://api.github.com/users/adityakishore/followers","following_url":"https://api.github.com/users/adityakishore/following{/other_user}","gists_url":"https://api.github.com/users/adityakishore/gists{/gist_id}","starred_url":"https://api.github.com/users/adityakishore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adityakishore/subscriptions","organizations_url":"https://api.github.com/users/adityakishore/orgs","repos_url":"https://api.github.com/users/adityakishore/repos","events_url":"https://api.github.com/users/adityakishore/events{/privacy}","received_events_url":"https://api.github.com/users/adityakishore/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T22:26:59Z","updated_at":"2016-08-05T22:26:59Z","author_association":"MEMBER","body":"LGTM.\n\n+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237980560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237984157","html_url":"https://github.com/apache/drill/pull/527#issuecomment-237984157","issue_url":"https://api.github.com/repos/apache/drill/issues/527","id":237984157,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk4NDE1Nw==","user":{"login":"vkorukanti","id":1719945,"node_id":"MDQ6VXNlcjE3MTk5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1719945?v=4","gravatar_id":"","url":"https://api.github.com/users/vkorukanti","html_url":"https://github.com/vkorukanti","followers_url":"https://api.github.com/users/vkorukanti/followers","following_url":"https://api.github.com/users/vkorukanti/following{/other_user}","gists_url":"https://api.github.com/users/vkorukanti/gists{/gist_id}","starred_url":"https://api.github.com/users/vkorukanti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vkorukanti/subscriptions","organizations_url":"https://api.github.com/users/vkorukanti/orgs","repos_url":"https://api.github.com/users/vkorukanti/repos","events_url":"https://api.github.com/users/vkorukanti/events{/privacy}","received_events_url":"https://api.github.com/users/vkorukanti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T22:52:24Z","updated_at":"2016-08-05T22:52:24Z","author_association":"MEMBER","body":"Rebased the patch and addressed review comments.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237984157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/237990533","html_url":"https://github.com/apache/drill/pull/527#issuecomment-237990533","issue_url":"https://api.github.com/repos/apache/drill/issues/527","id":237990533,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzk5MDUzMw==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-05T23:44:55Z","updated_at":"2016-08-05T23:44:55Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/237990533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238044386","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238044386","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238044386,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODA0NDM4Ng==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-06T19:27:04Z","updated_at":"2016-08-06T19:27:04Z","author_association":"CONTRIBUTOR","body":"To clarify the previous comment... In the case where the maximum required precision for the int type is greater than the maximum precision of the target decimal type, we use Dave's code to figure out the actual precision of the int value. Then, we figure out scale as:\n\n```\nscale = value precision - max decimal precision\n```\n\nThis, if you try to store 123,456,789,012 into an Dec9, you would get 123,456,789,000 (truncate the lower-order digits.) The solution does not handle rounding, but that can be added.\n\nNote that the decision to use Dave's code would be in the template: it would apply for, say, BigInt to Dec9 and that kind of thing. The logic to detect this case is already in the suggested code snippet.\n\n```\n  <#if inPrec < maxPrec>\n    ...\n  <#else>\n    // Put Dave's find-the-precision logic here\n    if ( out.precision > ${maxPrec} ) {\n        out.scale = out.precision - ${maxPrec};\n        out.precision = ${maxPrec};\n    }\n  </#endif>\n```\n\nI have not tested the above; it is just a pseudocode suggestion.       \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238044386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238051913","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238051913","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238051913,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODA1MTkxMw==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-06T22:17:36Z","updated_at":"2016-08-06T22:17:36Z","author_association":"CONTRIBUTOR","body":"The scale is a schema-level property of that column of data, that is never changed on the fly, to deal with problematic truncation, or otherwise.  If anybody is interested in a detail explanation, or other tidbits about how decimal types work, just let me know (daveoshinsky@yahoo.com). \n\n```\nOn Saturday, August 6, 2016 3:27 PM, Paul Rogers <notifications@github.com> wrote:\n```\n\n To clarify the previous comment... In the case where the maximum required precision for the int type is greater than the maximum precision of the target decimal type, we use Dave's code to figure out the actual precision of the int value. Then, we figure out scale as:scale = value precision - max decimal precision\nThis, if you try to store 123,456,789,012 into an Dec9, you would get 123,456,789,000 (truncate the lower-order digits.) The solution does not handle rounding, but that can be added.Note that the decision to use Dave's code would be in the template: it would apply for, say, BigInt to Dec9 and that kind of thing. The logic to detect this case is already in the suggested code snippet.  <#if inPrec < maxPrec>\n    ...\n  <#else>\n    // Put Dave's find-the-precision logic here\n    if ( out.precision > ${maxPrec} ) {\n        out.scale = out.precision - ${maxPrec};\n        out.precision = ${maxPrec};\n    }\n  </#endif>\nI have not tested the above; it is just a pseudocode suggestion. —\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238051913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238059558","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238059558","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238059558,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODA1OTU1OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-07T02:31:51Z","updated_at":"2016-08-07T02:31:51Z","author_association":"CONTRIBUTOR","body":"Good point. So, we'd want to issue an overflow error in the cast method, but it seems Drill has no way to do that. So, for now, maybe just leave it at the version that works when numbers are in range, and file a JIRA for the out-of-range case.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238059558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238097727","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238097727","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238097727,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODA5NzcyNw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-07T18:00:55Z","updated_at":"2016-08-07T18:00:55Z","author_association":"CONTRIBUTOR","body":"As a follow-up, the case we're focusing on is an implicit cast: one created by the system to convert an integer to a decimal type in order to do an equality check. To avoid the scale issue, the code that does the explcit cast should check the type of integer and select a target decimal type that will hold all values of that int type with a scale of 0. Does the code do that now? It may be that the decimal type must also be cast so that the equality has the same types. That is, if we compare Dec9 with Integer, we need a scale of 10 for the Int, so we must cast the Int to Dec18. As a result, we must cast the Dec9 to Dec18.\n\nThe reason for all of this is that the casts are done statically. A more efficient solution would be for the the run-time code to make a decision based on actual values, but Drill is not set up that way. Another solution would be to have an in-memory form of a decimal that caries the precision and scale so we can set the scale per value. But, Drill is not set up that way either.\n\nSo, the change we've been discussing (setting scale based on int and decimal types, ignoring overflow for now) seems the only short-term solution for 1.8.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238097727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238098381","html_url":"https://github.com/apache/drill/pull/560#issuecomment-238098381","issue_url":"https://api.github.com/repos/apache/drill/issues/560","id":238098381,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODA5ODM4MQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-07T18:12:24Z","updated_at":"2016-08-07T18:12:24Z","author_association":"MEMBER","body":"@jinfengni , could you please review?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238098381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238102929","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238102929","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238102929,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODEwMjkyOQ==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-07T19:28:21Z","updated_at":"2016-08-07T19:28:21Z","author_association":"CONTRIBUTOR","body":"The change to the cast function implementation will impact not only implicit cast, but also explicit cast. You are right that the test case of employee_id = 170 will trigger implicit cast. However, if you have an explicit cast  \"select cast(int_column as decimal)  from ...\", you will also see the impact of the code change.  \n\nI could not understand what you mean by \"casts are done statically\".  For implicit cast, the cast function is inserted dynamically in execution time, only after Drill knows the incoming batch schema.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238102929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238142791","html_url":"https://github.com/apache/drill/pull/562#issuecomment-238142791","issue_url":"https://api.github.com/repos/apache/drill/issues/562","id":238142791,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODE0Mjc5MQ==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T05:06:16Z","updated_at":"2016-08-08T05:06:16Z","author_association":"NONE","body":"@jinfengni could you pls review this patch  ?  I have put some explanation in the JIRA itself. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238142791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238186564","html_url":"https://github.com/apache/drill/pull/548#issuecomment-238186564","issue_url":"https://api.github.com/repos/apache/drill/issues/548","id":238186564,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODE4NjU2NA==","user":{"login":"xwinie","id":3609288,"node_id":"MDQ6VXNlcjM2MDkyODg=","avatar_url":"https://avatars.githubusercontent.com/u/3609288?v=4","gravatar_id":"","url":"https://api.github.com/users/xwinie","html_url":"https://github.com/xwinie","followers_url":"https://api.github.com/users/xwinie/followers","following_url":"https://api.github.com/users/xwinie/following{/other_user}","gists_url":"https://api.github.com/users/xwinie/gists{/gist_id}","starred_url":"https://api.github.com/users/xwinie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xwinie/subscriptions","organizations_url":"https://api.github.com/users/xwinie/orgs","repos_url":"https://api.github.com/users/xwinie/repos","events_url":"https://api.github.com/users/xwinie/events{/privacy}","received_events_url":"https://api.github.com/users/xwinie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T09:31:05Z","updated_at":"2016-08-08T09:32:41Z","author_association":"NONE","body":"hi：\n我用go odbc 连接drill，默认会在sql后面加上limit 0，go语言的odbc连接其他数据库，并无此情况。\n![image](https://cloud.githubusercontent.com/assets/3609288/17475370/47acbb82-5d8d-11e6-9ac6-02eaefe0b4f0.png)\ndrill:\n![image](https://cloud.githubusercontent.com/assets/3609288/17475384/55b81ef6-5d8d-11e6-85ee-c3cd5cc39748.png)\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238186564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238203248","html_url":"https://github.com/apache/drill/pull/549#issuecomment-238203248","issue_url":"https://api.github.com/repos/apache/drill/issues/549","id":238203248,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODIwMzI0OA==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T10:51:43Z","updated_at":"2018-04-29T22:18:02Z","author_association":"MEMBER","body":"@jinfengni Agree. It will be better to merge this patch after rebasing to the lastest version of calcite. Because currently I'm not sure how to solve this task in different manner than mine.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238203248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238316800","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238316800","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238316800,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODMxNjgwMA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T17:45:01Z","updated_at":"2016-08-08T17:45:01Z","author_association":"CONTRIBUTOR","body":"\"Dynamic\" meant \"for each data value.\" \"Static\" meant \"at compile time.\" We make our type decisions at compile time. That is too early to adjust scale based on actual input values. It is a real nuisance that scale is associated with the type, not the value.\n\nDave filed a bug to track the additional issues. See DRILL-4834.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238316800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238318352","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238318352","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238318352,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODMxODM1Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T17:47:52Z","updated_at":"2016-08-08T17:47:52Z","author_association":"CONTRIBUTOR","body":"What is the resolution here? Dave, do you want to review & adopt the suggested code several posts back? That code passed the unit tests that you provided, plus those aready in Drill (using the unit tests you suggested in an earlier post.) Then, update this PR with the results. Sounds like Jinfeng can then review the code & accept the PR. As we've said, the fix is not perfect, but it does work for every int/decimal type if the user is careful to provide int values that fit within the target decimal type.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238318352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238324891","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238324891","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238324891,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODMyNDg5MQ==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T18:06:17Z","updated_at":"2016-08-08T18:06:17Z","author_association":"CONTRIBUTOR","body":"Paul, do you mean the long piece of code with conditions on various destination precision types, that sets inPrec and maxPrec, and then selects the smaller of the two for the resulting precision?  I think it's just way simpler to use the calculated precision, as I suggested earlier.  That also works, and it's less code to look at, and less code to potentially be broken.  I do have a bias against the heavy, heavy use of FreeMarker everywhere.  It's just a recipe for bugs piled on top of bugs, and all of the numerous FreeMarker conditions are not likely to be tested for quite some time. \n\n```\nOn Monday, August 8, 2016 1:48 PM, Paul Rogers <notifications@github.com> wrote:\n```\n\n What is the resolution here? Dave, do you want to review & adopt the suggested code several posts back? That code passed the unit tests that you provided, plus those aready in Drill (using the unit tests you suggested in an earlier post.) Then, update this PR with the results. Sounds like Jinfeng can then review the code & accept the PR. As we've said, the fix is not perfect, but it does work for every int/decimal type if the user is careful to provide int values that fit within the target decimal type.—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238324891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238332809","html_url":"https://github.com/apache/drill/pull/530#issuecomment-238332809","issue_url":"https://api.github.com/repos/apache/drill/issues/530","id":238332809,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODMzMjgwOQ==","user":{"login":"vkorukanti","id":1719945,"node_id":"MDQ6VXNlcjE3MTk5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1719945?v=4","gravatar_id":"","url":"https://api.github.com/users/vkorukanti","html_url":"https://github.com/vkorukanti","followers_url":"https://api.github.com/users/vkorukanti/followers","following_url":"https://api.github.com/users/vkorukanti/following{/other_user}","gists_url":"https://api.github.com/users/vkorukanti/gists{/gist_id}","starred_url":"https://api.github.com/users/vkorukanti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vkorukanti/subscriptions","organizations_url":"https://api.github.com/users/vkorukanti/orgs","repos_url":"https://api.github.com/users/vkorukanti/repos","events_url":"https://api.github.com/users/vkorukanti/events{/privacy}","received_events_url":"https://api.github.com/users/vkorukanti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T18:32:29Z","updated_at":"2016-08-08T18:32:29Z","author_association":"MEMBER","body":"Added option for changing the timeout. Also added a new RequestStatus type `TIMEOUT`. @parthchandra New changes are in a separate commit. I will create a JIRA for adding cancel.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238332809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238348268","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238348268","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238348268,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM0ODI2OA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T19:25:30Z","updated_at":"2016-08-08T19:25:30Z","author_association":"CONTRIBUTOR","body":"I'm not fully convinced that we should check the precision for each input value for this castIntDecimal function. \n\nThe argument of proposed patch is parameter \"precision=0\" is not valid, and has to be calculated on-the-fly or \"dynamically\" for each input value.  To me, 1) if \"precision=0\" is a wrong input to this function, then we should fix the place where precision=0 is passed in.  2) why would you treat \"precision=0\" only?  what if I pass in \"precision = 1\", and a integer value of 123456? in such case, do we think \"precison=1\" is valid or not? \n\nRegarding the overflow problem, that seems to be a separate issue, and probably is true for most of the existing decimal functions. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238348268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238351190","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238351190","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238351190,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM1MTE5MA==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T19:37:21Z","updated_at":"2016-08-08T19:37:21Z","author_association":"CONTRIBUTOR","body":"The overflow problem will require separate changes to fix, from any changes we make in the short-term to fix this issue (see DRILL-4834).  However, if I understand some of Paul's findings earlier, the two issues are related as follows.  If we choose a large precision based only on the kind of integer that is input to the cast (either an int, or a long, but not minimized to represent the integer value to be casted), then we are more likely to encounter the overflow issue, because this precision is more likely to exceed the capacity of the destination decimal of the cast.  Is that right, Paul?  Given the risk of overflow, it is safer to choose the absolute minimum precision possible, which is what the changes I made to CastIntDecimal.java are doing.  We can't avoid overflow in every situation, but we can try to minimize the chances of it.  My understanding is that the actual integer value to be casted isn't available in ExpressionTreeMaterializer.java; at least, I did not see how to get it.  And that integer value is required to compute the minimum precision to represent that value.  I don't see how to fix this problem reliably in ExpressionTreeMaterializer.java, as I said earlier.  If you (Jinfeng) know how to do that, why don't you just take the changes in PR-517, and then check changes in on top of those to fix the problem your way?  At least, you get my unit test, which was for a condition (DRILL-4704) that was never tested by any earlier unit test. \n\n```\nOn Monday, August 8, 2016 3:25 PM, Jinfeng Ni <notifications@github.com> wrote:\n```\n\n I'm not fully convinced that we should check the precision for each input value for this castIntDecimal function. The argument of proposed patch is parameter \"precision=0\" is not valid, and has to be calculated on-the-fly or \"dynamically\" for each input value. To me, 1) if \"precision=0\" is a wrong input to this function, then we should fix the place where precision=0 is passed in. 2) why would you treat \"precision=0\" only? what if I pass in \"precision = 1\", and a integer value of 123456? in such case, do we think \"precison=1\" is valid or not? Regarding the overflow problem, that seems to be a separate issue, and probably is true for most of the existing decimal functions. —\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238351190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238357624","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238357624","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238357624,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM1NzYyNA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T19:58:10Z","updated_at":"2016-08-08T19:58:10Z","author_association":"CONTRIBUTOR","body":"This is the prototype patch I tried [1]. I replied with the link in our prior direct communication. \n\n[1] https://github.com/jinfengni/incubator-drill/commits/review/DRILL-4704\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238357624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238357944","html_url":"https://github.com/apache/drill/pull/530#issuecomment-238357944","issue_url":"https://api.github.com/repos/apache/drill/issues/530","id":238357944,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM1Nzk0NA==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T19:59:05Z","updated_at":"2016-08-08T19:59:05Z","author_association":"CONTRIBUTOR","body":"+1, pending minor comments\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238357944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238360389","html_url":"https://github.com/apache/drill/pull/561#issuecomment-238360389","issue_url":"https://api.github.com/repos/apache/drill/issues/561","id":238360389,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM2MDM4OQ==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T20:07:46Z","updated_at":"2016-08-08T20:07:46Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238360389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238363345","html_url":"https://github.com/apache/drill/pull/530#issuecomment-238363345","issue_url":"https://api.github.com/repos/apache/drill/issues/530","id":238363345,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM2MzM0NQ==","user":{"login":"vkorukanti","id":1719945,"node_id":"MDQ6VXNlcjE3MTk5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/1719945?v=4","gravatar_id":"","url":"https://api.github.com/users/vkorukanti","html_url":"https://github.com/vkorukanti","followers_url":"https://api.github.com/users/vkorukanti/followers","following_url":"https://api.github.com/users/vkorukanti/following{/other_user}","gists_url":"https://api.github.com/users/vkorukanti/gists{/gist_id}","starred_url":"https://api.github.com/users/vkorukanti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vkorukanti/subscriptions","organizations_url":"https://api.github.com/users/vkorukanti/orgs","repos_url":"https://api.github.com/users/vkorukanti/repos","events_url":"https://api.github.com/users/vkorukanti/events{/privacy}","received_events_url":"https://api.github.com/users/vkorukanti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T20:18:36Z","updated_at":"2016-08-08T20:18:36Z","author_association":"MEMBER","body":"pushed the squashed commit that contains the review changes.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238363345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238372724","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238372724","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238372724,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM3MjcyNA==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T20:50:28Z","updated_at":"2016-08-08T20:50:28Z","author_association":"CONTRIBUTOR","body":"Got it.  I added a commit, but cleaned up your changes to centralize the duplicated code in a function.  As discussed, this method might increase the chances of an overflow, but it avoids changing the cast.  Also, if there are any other places in the code that pass an invalid (zero) precision to the cast, those will now exhibit the same bug, as the cast is vulnerable (without my earlier fix) to such a bad argument. \n\n```\nOn Monday, August 8, 2016 3:58 PM, Jinfeng Ni <notifications@github.com> wrote:\n```\n\n This is the prototype patch I tried [1]. I replied with the link in our prior direct communication. [1] https://github.com/jinfengni/incubator-drill/commits/review/DRILL-4704—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238372724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238379245","html_url":"https://github.com/apache/drill/pull/532#issuecomment-238379245","issue_url":"https://api.github.com/repos/apache/drill/issues/532","id":238379245,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM3OTI0NQ==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T21:13:06Z","updated_at":"2016-08-08T21:13:06Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238379245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238394950","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238394950","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238394950,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM5NDk1MA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T22:17:03Z","updated_at":"2016-08-08T22:17:03Z","author_association":"CONTRIBUTOR","body":"Since we will have a discussion for long term plan of decimal type support (tomorrow hangout), I think it makes sense to apply a small-scoped change to fix this incorrect query result issue. For the overflow problem or decimal type design in general, we could  continue our discussion either in hangout or dev list.\n\nBased on that, I'm inclined to merge this patch. @amansinha100 , could you please take a look at the new change, and see if it addressed your prior concern?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238394950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238400565","html_url":"https://github.com/apache/drill/pull/562#issuecomment-238400565","issue_url":"https://api.github.com/repos/apache/drill/issues/562","id":238400565,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODQwMDU2NQ==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-08T22:43:55Z","updated_at":"2016-08-08T22:43:55Z","author_association":"CONTRIBUTOR","body":"+1 \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238400565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238414391","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238414391","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238414391,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODQxNDM5MQ==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-09T00:02:09Z","updated_at":"2016-08-09T00:02:09Z","author_association":"NONE","body":"couple of minor comments; otherwise LGTM.  \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238414391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238444080","html_url":"https://github.com/apache/drill/pull/517#issuecomment-238444080","issue_url":"https://api.github.com/repos/apache/drill/issues/517","id":238444080,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODQ0NDA4MA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-09T03:30:20Z","updated_at":"2016-08-09T03:30:20Z","author_association":"CONTRIBUTOR","body":"I'll make minor change to the commit based on Aman's comment, and re-run regression and merge if everything is fine. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238444080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238578121","html_url":"https://github.com/apache/drill/pull/563#issuecomment-238578121","issue_url":"https://api.github.com/repos/apache/drill/issues/563","id":238578121,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODU3ODEyMQ==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-09T14:51:01Z","updated_at":"2016-08-09T14:51:01Z","author_association":"NONE","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238578121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/238646231","html_url":"https://github.com/apache/drill/pull/564#issuecomment-238646231","issue_url":"https://api.github.com/repos/apache/drill/issues/564","id":238646231,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODY0NjIzMQ==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-09T18:28:51Z","updated_at":"2016-08-09T18:28:51Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/238646231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/239030246","html_url":"https://github.com/apache/drill/pull/480#issuecomment-239030246","issue_url":"https://api.github.com/repos/apache/drill/issues/480","id":239030246,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTAzMDI0Ng==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-10T22:58:42Z","updated_at":"2016-08-10T22:58:42Z","author_association":"CONTRIBUTOR","body":"@parthchandra please review.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/239030246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/239038706","html_url":"https://github.com/apache/drill/pull/562#issuecomment-239038706","issue_url":"https://api.github.com/repos/apache/drill/issues/562","id":239038706,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTAzODcwNg==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-10T23:48:00Z","updated_at":"2016-08-10T23:48:00Z","author_association":"NONE","body":"Closing based on comments in DRILL-4833. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/239038706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/239041135","html_url":"https://github.com/apache/drill/pull/480#issuecomment-239041135","issue_url":"https://api.github.com/repos/apache/drill/issues/480","id":239041135,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTA0MTEzNQ==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-11T00:02:49Z","updated_at":"2016-08-11T00:02:49Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/239041135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/239238268","html_url":"https://github.com/apache/drill/pull/566#issuecomment-239238268","issue_url":"https://api.github.com/repos/apache/drill/issues/566","id":239238268,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTIzODI2OA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-11T17:52:55Z","updated_at":"2016-08-11T17:52:55Z","author_association":"CONTRIBUTOR","body":"+1 \n\nLGTM.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/239238268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/240225233","html_url":"https://github.com/apache/drill/pull/570#issuecomment-240225233","issue_url":"https://api.github.com/repos/apache/drill/issues/570","id":240225233,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDIyNTIzMw==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-16T20:20:22Z","updated_at":"2016-08-16T20:20:22Z","author_association":"CONTRIBUTOR","body":"The initial set of check-ins as of 8/16/2016 demonstrates use of a new one-size-fits-all VARDECIMAL type, initially only to support variable width BINARY decimal columns from Parquet files (see DRILL-4184).   For now, the new VARDECIMAL type exists alongside all of the other decimal types.  If this change looks good, we can eventually clean up the decimal logic by deprecating all of the other (fixed width) decimal types, and use VARDECIMAL only.  The Cast behavior may be somewhat strange at present (it was seen to cast from an int to VARDECIMAL via FLOAT8).  A unit test with some test data is included.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/240225233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/240317317","html_url":"https://github.com/apache/drill/pull/569#issuecomment-240317317","issue_url":"https://api.github.com/repos/apache/drill/issues/569","id":240317317,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDMxNzMxNw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T05:31:10Z","updated_at":"2016-08-17T05:31:10Z","author_association":"CONTRIBUTOR","body":"+1\n\nLGTM\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/240317317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/240561011","html_url":"https://github.com/apache/drill/pull/570#issuecomment-240561011","issue_url":"https://api.github.com/repos/apache/drill/issues/570","id":240561011,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDU2MTAxMQ==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-17T21:53:33Z","updated_at":"2016-08-17T21:53:33Z","author_association":"CONTRIBUTOR","body":"Cast problems now appear to be fixed.  The main change is to add to DecimalFunctions for the new VarDecimal type.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/240561011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/240845267","html_url":"https://github.com/apache/drill/pull/572#issuecomment-240845267","issue_url":"https://api.github.com/repos/apache/drill/issues/572","id":240845267,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDg0NTI2Nw==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-18T20:24:19Z","updated_at":"2016-08-18T20:24:19Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/240845267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/241476310","html_url":"https://github.com/apache/drill/pull/518#issuecomment-241476310","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":241476310,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTQ3NjMxMA==","user":{"login":"jaltekruse","id":365366,"node_id":"MDQ6VXNlcjM2NTM2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/365366?v=4","gravatar_id":"","url":"https://api.github.com/users/jaltekruse","html_url":"https://github.com/jaltekruse","followers_url":"https://api.github.com/users/jaltekruse/followers","following_url":"https://api.github.com/users/jaltekruse/following{/other_user}","gists_url":"https://api.github.com/users/jaltekruse/gists{/gist_id}","starred_url":"https://api.github.com/users/jaltekruse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaltekruse/subscriptions","organizations_url":"https://api.github.com/users/jaltekruse/orgs","repos_url":"https://api.github.com/users/jaltekruse/repos","events_url":"https://api.github.com/users/jaltekruse/events{/privacy}","received_events_url":"https://api.github.com/users/jaltekruse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-22T16:51:30Z","updated_at":"2016-08-22T16:51:30Z","author_association":"CONTRIBUTOR","body":"After this was discussed at the Hangout a few weeks back, I had been thinking about it more.\n\nMy initial request was for warnings to be returned along with query results. Some initial work was posted last fall to add warnings to the RPC protocol, but unfortunately it was not brought to completion. These kinds of warnings can be received by JDBC and ODBC sources and many tools show them to users.\n\nhttps://github.com/apache/drill/pull/263\n\nIn the hangout we discussed that this changeset is currently logging when part of a file is ignored. I don't believe that there is currently an expectation that users should have to grep through a log file to find out any additional information about the execution of a successful query, the log files are there for admins to debug system issues.\n\nI still think it would be good to have a way to remove the need to look through the log file to see if this behavior was used in a query, but as there wasn't a lot of concern expressed by others when we discussed it, I'm changing my vote to a +0.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/241476310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/241503010","html_url":"https://github.com/apache/drill/pull/573#issuecomment-241503010","issue_url":"https://api.github.com/repos/apache/drill/issues/573","id":241503010,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTUwMzAxMA==","user":{"login":"jcmcote","id":10093762,"node_id":"MDQ6VXNlcjEwMDkzNzYy","avatar_url":"https://avatars.githubusercontent.com/u/10093762?v=4","gravatar_id":"","url":"https://api.github.com/users/jcmcote","html_url":"https://github.com/jcmcote","followers_url":"https://api.github.com/users/jcmcote/followers","following_url":"https://api.github.com/users/jcmcote/following{/other_user}","gists_url":"https://api.github.com/users/jcmcote/gists{/gist_id}","starred_url":"https://api.github.com/users/jcmcote/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcmcote/subscriptions","organizations_url":"https://api.github.com/users/jcmcote/orgs","repos_url":"https://api.github.com/users/jcmcote/repos","events_url":"https://api.github.com/users/jcmcote/events{/privacy}","received_events_url":"https://api.github.com/users/jcmcote/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-22T18:20:59Z","updated_at":"2016-08-22T18:20:59Z","author_association":"CONTRIBUTOR","body":"Please review.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/241503010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/241901663","html_url":"https://github.com/apache/drill/pull/575#issuecomment-241901663","issue_url":"https://api.github.com/repos/apache/drill/issues/575","id":241901663,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTkwMTY2Mw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-23T22:34:13Z","updated_at":"2016-08-23T22:34:13Z","author_association":"CONTRIBUTOR","body":"+1 \nLGTM.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/241901663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/242202917","html_url":"https://github.com/apache/drill/pull/576#issuecomment-242202917","issue_url":"https://api.github.com/repos/apache/drill/issues/576","id":242202917,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjIwMjkxNw==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-24T20:47:38Z","updated_at":"2016-08-24T20:47:38Z","author_association":"CONTRIBUTOR","body":"LGTM. +1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/242202917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243732120","html_url":"https://github.com/apache/drill/pull/573#issuecomment-243732120","issue_url":"https://api.github.com/repos/apache/drill/issues/573","id":243732120,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzczMjEyMA==","user":{"login":"jcmcote","id":10093762,"node_id":"MDQ6VXNlcjEwMDkzNzYy","avatar_url":"https://avatars.githubusercontent.com/u/10093762?v=4","gravatar_id":"","url":"https://api.github.com/users/jcmcote","html_url":"https://github.com/jcmcote","followers_url":"https://api.github.com/users/jcmcote/followers","following_url":"https://api.github.com/users/jcmcote/following{/other_user}","gists_url":"https://api.github.com/users/jcmcote/gists{/gist_id}","starred_url":"https://api.github.com/users/jcmcote/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcmcote/subscriptions","organizations_url":"https://api.github.com/users/jcmcote/orgs","repos_url":"https://api.github.com/users/jcmcote/repos","events_url":"https://api.github.com/users/jcmcote/events{/privacy}","received_events_url":"https://api.github.com/users/jcmcote/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T11:08:39Z","updated_at":"2016-08-31T11:08:39Z","author_association":"CONTRIBUTOR","body":"Please review\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243732120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243896252","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243896252","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243896252,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg5NjI1Mg==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T20:47:56Z","updated_at":"2016-08-31T20:47:56Z","author_association":"CONTRIBUTOR","body":"Per my understanding User Exception was meant for errors on the server side that are to bet sent back to the user. Are you extending that definition?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243896252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243904825","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243904825","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243904825,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkwNDgyNQ==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T21:17:05Z","updated_at":"2016-08-31T21:17:05Z","author_association":"CONTRIBUTOR","body":"This also breaks client/wire compatibility. In previous discussions, we said that we would avoid breaking compatibility. If you proceed with this, you'll need to add a compatibility layer in the server that understands the different client versions and whether a server can return this value on the wire.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243904825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243925509","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243925509","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243925509,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkyNTUwOQ==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T22:45:25Z","updated_at":"2016-08-31T22:45:39Z","author_association":"CONTRIBUTOR","body":"Per [Hakim's comment](https://github.com/apache/drill/pull/460/files#diff-158c887d198393117d3a1bbc42114a8bR344), SYSTEM type is meant for unexpected errors that do not have a \"nice\" error message yet. However in some error cases on the client side, there can be nice error messages, as shown in these changes.\n\nRegarding compatibility: the server should not produce CLIENT type user exceptions, so old clients can talk to new servers; mentioned in the CLIENT type description as _some error on the client side_.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243925509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243926385","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243926385","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243926385,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkyNjM4NQ==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T22:49:37Z","updated_at":"2016-08-31T22:49:37Z","author_association":"CONTRIBUTOR","body":"It seems error-prone/dangerous to change the wire protocol for something that will never be sent on the wire. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243926385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243928033","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243928033","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243928033,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkyODAzMw==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T22:58:36Z","updated_at":"2016-08-31T22:58:36Z","author_association":"CONTRIBUTOR","body":"For now, I am not sure how else to fix this; will punt until compatibility later is introduced.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243928033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243934066","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243934066","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243934066,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkzNDA2Ng==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T23:33:34Z","updated_at":"2016-08-31T23:33:34Z","author_association":"CONTRIBUTOR","body":"Since it is all on the client/in the same jvm, why not just throw an exception and catch it? No need to jump through all the hoops that UserException goes through since you're never trying to propagate between multiple nodes.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243934066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/243949064","html_url":"https://github.com/apache/drill/pull/567#issuecomment-243949064","issue_url":"https://api.github.com/repos/apache/drill/issues/567","id":243949064,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzk0OTA2NA==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-01T01:16:49Z","updated_at":"2016-09-01T01:16:49Z","author_association":"CONTRIBUTOR","body":"I am confused here. The patch enhances the catch clauses of thrown exceptions and, in a way, \"corrects\" what was being reported to the user as a SYSTEM (server) error to CLIENT error since these exceptions happened on the client side (abd eventually a UserException needs to be reported).\n\nI tried to extend UserException to ClientException, but no contextual information can be added because of how the UserException.Builder is setup. I will punt this.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/243949064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/244977497","html_url":"https://github.com/apache/drill/pull/570#issuecomment-244977497","issue_url":"https://api.github.com/repos/apache/drill/issues/570","id":244977497,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDk3NzQ5Nw==","user":{"login":"daveoshinsky","id":6596555,"node_id":"MDQ6VXNlcjY1OTY1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6596555?v=4","gravatar_id":"","url":"https://api.github.com/users/daveoshinsky","html_url":"https://github.com/daveoshinsky","followers_url":"https://api.github.com/users/daveoshinsky/followers","following_url":"https://api.github.com/users/daveoshinsky/following{/other_user}","gists_url":"https://api.github.com/users/daveoshinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/daveoshinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveoshinsky/subscriptions","organizations_url":"https://api.github.com/users/daveoshinsky/orgs","repos_url":"https://api.github.com/users/daveoshinsky/repos","events_url":"https://api.github.com/users/daveoshinsky/events{/privacy}","received_events_url":"https://api.github.com/users/daveoshinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-06T14:56:50Z","updated_at":"2016-09-06T14:56:50Z","author_association":"CONTRIBUTOR","body":"Please review \"one-size-fits-all\" VARDECIMAL implementation in this pull request.  Initially, it exists alongside all of the other decimal types, and is only used for variable-width BINARY decimal in Parquet files.  If reviews look good, we can extend it to eventually replace other decimal types.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/244977497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/245126205","html_url":"https://github.com/apache/drill/pull/579#issuecomment-245126205","issue_url":"https://api.github.com/repos/apache/drill/issues/579","id":245126205,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTEyNjIwNQ==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-06T23:19:26Z","updated_at":"2016-09-06T23:19:26Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/245126205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/245749243","html_url":"https://github.com/apache/drill/pull/583#issuecomment-245749243","issue_url":"https://api.github.com/repos/apache/drill/issues/583","id":245749243,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTc0OTI0Mw==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-08T21:36:14Z","updated_at":"2016-09-08T21:36:14Z","author_association":"NONE","body":"@jinfengni could you pls review ? \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/245749243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/245759475","html_url":"https://github.com/apache/drill/pull/583#issuecomment-245759475","issue_url":"https://api.github.com/repos/apache/drill/issues/583","id":245759475,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTc1OTQ3NQ==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-08T22:17:58Z","updated_at":"2016-09-08T22:17:58Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/245759475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246078234","html_url":"https://github.com/apache/drill/pull/585#issuecomment-246078234","issue_url":"https://api.github.com/repos/apache/drill/issues/585","id":246078234,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjA3ODIzNA==","user":{"login":"Ben-Zvi","id":5465159,"node_id":"MDQ6VXNlcjU0NjUxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5465159?v=4","gravatar_id":"","url":"https://api.github.com/users/Ben-Zvi","html_url":"https://github.com/Ben-Zvi","followers_url":"https://api.github.com/users/Ben-Zvi/followers","following_url":"https://api.github.com/users/Ben-Zvi/following{/other_user}","gists_url":"https://api.github.com/users/Ben-Zvi/gists{/gist_id}","starred_url":"https://api.github.com/users/Ben-Zvi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ben-Zvi/subscriptions","organizations_url":"https://api.github.com/users/Ben-Zvi/orgs","repos_url":"https://api.github.com/users/Ben-Zvi/repos","events_url":"https://api.github.com/users/Ben-Zvi/events{/privacy}","received_events_url":"https://api.github.com/users/Ben-Zvi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-10T01:13:21Z","updated_at":"2016-09-10T01:13:21Z","author_association":"CONTRIBUTOR","body":"Below are results from testing; first run with not enough disk space, and the second with a missing storage for the spill:\n\n0: jdbc:drill:zk=local> create table store_sales_20(ss_item_sk, ss_customer_sk, ss_cdemo_sk, ss_hdemo_sk, s_sold_date_sk, ss_promo_sk) partition by (ss_promo_sk) as\n. . . . . . . . . . . >  select\n. . . . . . . . . . . >    case when columns[2] = '' then cast(null as varchar(100)) else cast(columns[2] as varchar(100)) end,\n. . . . . . . . . . . >    case when columns[3] = '' then cast(null as varchar(100)) else cast(columns[3] as varchar(100)) end,\n. . . . . . . . . . . >    case when columns[4] = '' then cast(null as varchar(100)) else cast(columns[4] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[5] = '' then cast(null as varchar(100)) else cast(columns[5] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[0] = '' then cast(null as varchar(100)) else cast(columns[0] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[8] = '' then cast(null as varchar(100)) else cast(columns[8] as varchar(100)) end\n. . . . . . . . . . . > FROM dfs.`/Users/boazben-zvi/data/store_sales/store_sales.dat`;\nError: RESOURCE ERROR: External Sort encountered an error while spilling to disk\n\njava.io.IOException: No space left on device\nFragment 0:0\n\n[Error Id: 35d13ef6-f88a-4a80-9f5e-ddb15efc9d92 on 10.250.57.63:31010](state=,code=0)\n0: jdbc:drill:zk=local> create table store_sales_20(ss_item_sk, ss_customer_sk, ss_cdemo_sk, ss_hdemo_sk, s_sold_date_sk, ss_promo_sk) partition by (ss_promo_sk) as\n. . . . . . . . . . . >  select\n. . . . . . . . . . . >    case when columns[2] = '' then cast(null as varchar(100)) else cast(columns[2] as varchar(100)) end,\n. . . . . . . . . . . >    case when columns[3] = '' then cast(null as varchar(100)) else cast(columns[3] as varchar(100)) end,\n. . . . . . . . . . . >    case when columns[4] = '' then cast(null as varchar(100)) else cast(columns[4] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[5] = '' then cast(null as varchar(100)) else cast(columns[5] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[0] = '' then cast(null as varchar(100)) else cast(columns[0] as varchar(100)) end, \n. . . . . . . . . . . >    case when columns[8] = '' then cast(null as varchar(100)) else cast(columns[8] as varchar(100)) end\n. . . . . . . . . . . > FROM dfs.`/Users/boazben-zvi/data/store_sales/store_sales.dat`;\nError: RESOURCE ERROR: External Sort encountered an error while spilling to disk\n\nMkdirs failed to create /tmp/drill/spill/282cbdbc-630a-2218-3871-165491f5e96c_majorfragment0_minorfragment0_operator6 (exists=false, cwd=file:/Users/boazben-zvi/IdeaProjects/drill)\nFragment 0:0\n\n[Error Id: dea8b3fd-9661-48b5-9a3c-11d2dadf8f07 on 10.250.57.63:31010](state=,code=0)\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246078234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246080885","html_url":"https://github.com/apache/drill/pull/585#issuecomment-246080885","issue_url":"https://api.github.com/repos/apache/drill/issues/585","id":246080885,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjA4MDg4NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-10T01:51:48Z","updated_at":"2016-09-10T01:51:48Z","author_association":"CONTRIBUTOR","body":"LGTM\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246080885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246205508","html_url":"https://github.com/apache/drill/pull/586#issuecomment-246205508","issue_url":"https://api.github.com/repos/apache/drill/issues/586","id":246205508,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjIwNTUwOA==","user":{"login":"jacques-n","id":183350,"node_id":"MDQ6VXNlcjE4MzM1MA==","avatar_url":"https://avatars.githubusercontent.com/u/183350?v=4","gravatar_id":"","url":"https://api.github.com/users/jacques-n","html_url":"https://github.com/jacques-n","followers_url":"https://api.github.com/users/jacques-n/followers","following_url":"https://api.github.com/users/jacques-n/following{/other_user}","gists_url":"https://api.github.com/users/jacques-n/gists{/gist_id}","starred_url":"https://api.github.com/users/jacques-n/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacques-n/subscriptions","organizations_url":"https://api.github.com/users/jacques-n/orgs","repos_url":"https://api.github.com/users/jacques-n/repos","events_url":"https://api.github.com/users/jacques-n/events{/privacy}","received_events_url":"https://api.github.com/users/jacques-n/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-11T21:21:04Z","updated_at":"2016-09-11T21:21:04Z","author_association":"CONTRIBUTOR","body":"LGTM +1\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246205508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246209689","html_url":"https://github.com/apache/drill/pull/586#issuecomment-246209689","issue_url":"https://api.github.com/repos/apache/drill/issues/586","id":246209689,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjIwOTY4OQ==","user":{"login":"agirish","id":2224090,"node_id":"MDQ6VXNlcjIyMjQwOTA=","avatar_url":"https://avatars.githubusercontent.com/u/2224090?v=4","gravatar_id":"","url":"https://api.github.com/users/agirish","html_url":"https://github.com/agirish","followers_url":"https://api.github.com/users/agirish/followers","following_url":"https://api.github.com/users/agirish/following{/other_user}","gists_url":"https://api.github.com/users/agirish/gists{/gist_id}","starred_url":"https://api.github.com/users/agirish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agirish/subscriptions","organizations_url":"https://api.github.com/users/agirish/orgs","repos_url":"https://api.github.com/users/agirish/repos","events_url":"https://api.github.com/users/agirish/events{/privacy}","received_events_url":"https://api.github.com/users/agirish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-11T22:41:51Z","updated_at":"2016-09-11T22:41:51Z","author_association":"MEMBER","body":"+1\nFunctional and TPC-H SF100 tests from [1] successful. Also verified building Drill with mapr profile and accessing MapR-DB binary tables using the maprdb format plugin. \n\n[1] https://github.com/mapr/drill-test-framework\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246209689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246436093","html_url":"https://github.com/apache/drill/pull/518#issuecomment-246436093","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":246436093,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjQzNjA5Mw==","user":{"login":"ssriniva123","id":1776159,"node_id":"MDQ6VXNlcjE3NzYxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1776159?v=4","gravatar_id":"","url":"https://api.github.com/users/ssriniva123","html_url":"https://github.com/ssriniva123","followers_url":"https://api.github.com/users/ssriniva123/followers","following_url":"https://api.github.com/users/ssriniva123/following{/other_user}","gists_url":"https://api.github.com/users/ssriniva123/gists{/gist_id}","starred_url":"https://api.github.com/users/ssriniva123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssriniva123/subscriptions","organizations_url":"https://api.github.com/users/ssriniva123/orgs","repos_url":"https://api.github.com/users/ssriniva123/repos","events_url":"https://api.github.com/users/ssriniva123/events{/privacy}","received_events_url":"https://api.github.com/users/ssriniva123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-12T18:02:48Z","updated_at":"2016-09-12T18:02:48Z","author_association":"CONTRIBUTOR","body":"Folks,\nI have tests on my local drill setup with various combinations of invalid json format. The only caveat is that some records may be skipped if JSON is not properly delimitted by }. Can this be reviewed for next release ? I can work on the documentation.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246436093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246535007","html_url":"https://github.com/apache/drill/pull/586#issuecomment-246535007","issue_url":"https://api.github.com/repos/apache/drill/issues/586","id":246535007,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjUzNTAwNw==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T00:13:11Z","updated_at":"2016-09-13T00:13:11Z","author_association":"CONTRIBUTOR","body":"+1. Since legal has approved, I think this can be merged.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246535007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246543189","html_url":"https://github.com/apache/drill/pull/518#issuecomment-246543189","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":246543189,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjU0MzE4OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T01:07:13Z","updated_at":"2016-09-13T03:32:53Z","author_association":"CONTRIBUTOR","body":"Thanks much for your contribution! Sorry it is taking a while to review the code.\n\nI've read over the code changes a couple of times. The options part is fine. However, the parser part seems a bit too complex and may not handle all cases of interest. I worry that the code may only handle the error shown in the test input file: a missing close quote:\n\n```\n{ \"foo\" : \"bar }\n{ \"foo\" : \"mumble\" }\n```\n\nIt seems that the code may simply try to resume reading at the point of failure. Since the only test case is a missing close quote, the parser will \"naturally\" read all tokens up to EOL. \n\nBut, the implementation seems to not handle the general syntax error case. For example:\n\n```\n{ \"foo\" :: 10 }\n{ \"foo\" : 20 }\n```\n\nThe paser will fail on the second colon. When resuming, the parser will see another colon and fail again. Maybe the parser would eventually fail enough to find the EOL. But, we can construct cases where things would end badly:\n\n```\n{ \"a\": 1, \"foo\" :: 10, \"x\": { \"bar\", 20, \"y\": \"mumble\" } }\n{ \"a\", 2, \"foo\" : 20, \"x\": { \"bar\", 30, \"y\": \"stumble\" } }\n```\n\nIt seems that, under the proposed implementation, the parser may decide that { \"bar\" ... starts a new valid record, with the result of jumbled records (and unexpected schema changes):\n\n```\n(a)\n(bar, y)\n(a, x(bar, y))\n```\n\nThe message here is that to do a more general recovery, we have to have some known good recovery point. Pure JSON is not suited to recovery. Fortunately, the JSON we read is not true JSON, rather it is a file of JSON objects. The file-of-json-object structure offers two possible recovery points.\n\nIf we require that each JSON record start on a new line (but, see follow-up comment below), then we can use newline as our recovery point:\n\n```\n{ \"foo\" :: 10 }\n{ \"foo\" : 20 }\n```\n\nIn the above, the first record is badly formed. But, we know where the next record begins because of the newline separator. In the earlier example, we'd discard the entire first record rather than attempting to (mis-) read parts of the record.\n\nIf, however, we can't count on the newline, then we need some other syntactic trick. Perhaps we can look for \"}/s*{\" (that is, close bracket, optional white space, open bracket):\n\n```\n{ \"foo\" :: \n{ \"foo\" : 20 }\n{ \"foo\" : 30 }\n```\n\nHere, we'd actually discard both the first and second records because we'd only find the recovery patttern between the second and third records. (The \"} {\" pattern can never occur inside a JSON object, it would have to be \"}, {\" instead.)\n\nUsing EOL as delimiter is easiest: we don't need lookahead. But, we require that a newline separate records. (Newlines within records can be handled, but we'll omit that for now...)\n\nUsing \"}/s*{\" as the recovery is a bit harder: we need to read ahead by one token, then push the token back on the input.\n\nIf we do the above, then the reader algorithm should look something like this:\n\n```\nwhile ( more records to read ) {\n    try {\n        read the record\n    } catch ( parse exception ) {\n        read and discard tokens until we get to an EOL (or the \"}/s*{\")\n        reset the value vector pointer back one step to discard any partially loaded values.\n    }\n}\n```\n\nThe above can be shown to be correct by working through a simple state machine and set of examples.\n\nAlternatively, it might help to include here (or in comments in code) an explanation of the proposed recovery mechanism so it is easier for reviewers to verify correctness.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246543189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246561203","html_url":"https://github.com/apache/drill/pull/367#issuecomment-246561203","issue_url":"https://api.github.com/repos/apache/drill/issues/367","id":246561203,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjU2MTIwMw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T03:12:38Z","updated_at":"2016-09-13T03:12:38Z","author_association":"CONTRIBUTOR","body":"@nagix Are you still working on this?  What is the status?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246561203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246564613","html_url":"https://github.com/apache/drill/pull/518#issuecomment-246564613","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":246564613,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjU2NDYxMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T03:38:50Z","updated_at":"2016-09-13T03:38:50Z","author_association":"CONTRIBUTOR","body":"Upon reflection, it seems that newline is not an adequate marker to separate JSON records. Many of our samples have internal newlines. If a newline appears inside the JSON record, then we are subject to the same incorrect recovery as illustrated with the \"a, x, bar, y\" example in the earlier comment.\n\nFurther, if the JSON tokenizer is like most, it probably discards whitespace, not returning EOL as a token.\n\nSo, it seems that the best (or only) option is to scan for the \"} {\" pair. This requires two specific improvements:\n- A \"token discarder\" that uses a state machine to look for the \"} {\" pairs, and\n- An indirection around the get-token method so we can push the \"{\" token back onto the input.\n\nThese changes, along with the pseudo-code shown earlier may provide as good a solution as we can get. (Phrased that way because some errors will cause two records to be discarded, as explained earlier.) Combine that with the options and error reporting from the original pull request and we are probably pretty close.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246564613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246591362","html_url":"https://github.com/apache/drill/pull/518#issuecomment-246591362","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":246591362,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjU5MTM2Mg==","user":{"login":"ssriniva123","id":1776159,"node_id":"MDQ6VXNlcjE3NzYxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1776159?v=4","gravatar_id":"","url":"https://api.github.com/users/ssriniva123","html_url":"https://github.com/ssriniva123","followers_url":"https://api.github.com/users/ssriniva123/followers","following_url":"https://api.github.com/users/ssriniva123/following{/other_user}","gists_url":"https://api.github.com/users/ssriniva123/gists{/gist_id}","starred_url":"https://api.github.com/users/ssriniva123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssriniva123/subscriptions","organizations_url":"https://api.github.com/users/ssriniva123/orgs","repos_url":"https://api.github.com/users/ssriniva123/repos","events_url":"https://api.github.com/users/ssriniva123/events{/privacy}","received_events_url":"https://api.github.com/users/ssriniva123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T06:51:42Z","updated_at":"2016-09-13T06:51:42Z","author_association":"CONTRIBUTOR","body":"Paul,\nThanks for taking the time out in writing out a detailed email. Here are some of my thoughts.\n- Drill uses the com.fasterxml.jackson.core.json.UTF8StreamJsonParser for parsing of JSON records. This parser does not rely on line delimiters for record separators but instead uses\n  the JSON structure as a natural way to signal End of record (EOR). There are methods internal\n  to the parser which check for line feeds but is not exposed to callers.\n- The CountingJsonReader uses the parser.skipChildren() method to skip the rest of the children for this record, hence it is not possible to accurately count and match the no of braces to cleanly skip that bad record.\n- One thought is to tap the inputsource of the parser on an exception condition, but is not\n  encouraged.\n\nMy thought process was exactly along the lines you have been thinking. On an exception scenario the code attempts to locate a closing bracket(}) followed by a opening bracket ({).\nThis is what is being done in the BaseJsonProcessor.processJSONException method. Please note that it works in all cases except when we do not have proper brackets to signify end of a JSON record. \n\nHope this explanation helps clarify.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246591362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/246847123","html_url":"https://github.com/apache/drill/pull/518#issuecomment-246847123","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":246847123,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Njg0NzEyMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-13T22:32:54Z","updated_at":"2016-09-13T22:32:54Z","author_association":"CONTRIBUTOR","body":"Poking around in the code a bit more, it looks like we rely on the Jackson JsonParser which delivers a stream of tokens. Here's the code in JsonReader:\n\n```\npublic ReadState write(ComplexWriter writer) throws IOException {\n  JsonToken t = parser.nextToken();\n```\n\nAs you pointed out, white space is consumed internally to the tokenizer. But we do get JSON tokens ({, }, identifier, number, etc.) Given this, you can scan ahead to find the close-open bracket pattern.\n\nThe trick seems to solve two problems. First, how do we handle tokens: The answer seems to be a few lines down:\n\n```\nReadState readState = writeToVector(writer, t);\n```\n\nGiven a start token, we write to vector. writeToVector is a recursive-descent parser that consumes tokens and does the right thing. Here, it accepts only a top-level object, rejecting all other tokens. For an object, we call writeDataSwitch (funny name, that) which recursively writes fields, objects, lists and the rest.\n\nSince this is a recursive-descent parser, JSON structure is represented by the call stack. To bail out of an invalid parse, we have to unwind the stack, which is what an exception does. So, that part may be good.\n\nThe next step is how to get the tokenizer (JsonParser) pointed at the right point so we can try to read the next object. That is where we need to consume tokens until we find the end-start bracket pair.\n\nBut, note that we have now consumed the start bracket, so we can't read it again when we gain call writeToVector. Checking the code, the JsonParser has no unget( ) method, unfortunately. To work around that, we need to \"push\" the token back onto the input. (Either actually doing so, or by having internal state that says that we've already read the open bracket.) \n\nWe also have to ask if the JSON parser keeps track of parse state. Looking at the code, it seems that JsonParser is really just a tokenizer: it has not state about the JSON structure. (Would be good to run a small test to verify this observation.)\n\nBy the way, the JSON parser class has lots of good stuff already there. For example, the parser itself will keep track of line numbers and file locations. Perhaps we can use that when reporting error positions.\n\nThe last bit is that we've been building up a record as we parser JSON. If we fail part way thorugh, we've got a half-build record. Again, here I'm a bit hazy on what Drill can do. Can we \"unwind\" the current record? Can we mark the record as one to ignore (with a select vector?) Or, do we live with the half-build record? Throwing away the half-built record would be best, if we can do it.\n\nAll that said, how much of the above does your proposed code change handle? What other parts might still need to be added?\n\nThanks!\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/246847123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/247380836","html_url":"https://github.com/apache/drill/pull/367#issuecomment-247380836","issue_url":"https://api.github.com/repos/apache/drill/issues/367","id":247380836,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzM4MDgzNg==","user":{"login":"nagix","id":723188,"node_id":"MDQ6VXNlcjcyMzE4OA==","avatar_url":"https://avatars.githubusercontent.com/u/723188?v=4","gravatar_id":"","url":"https://api.github.com/users/nagix","html_url":"https://github.com/nagix","followers_url":"https://api.github.com/users/nagix/followers","following_url":"https://api.github.com/users/nagix/following{/other_user}","gists_url":"https://api.github.com/users/nagix/gists{/gist_id}","starred_url":"https://api.github.com/users/nagix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nagix/subscriptions","organizations_url":"https://api.github.com/users/nagix/orgs","repos_url":"https://api.github.com/users/nagix/repos","events_url":"https://api.github.com/users/nagix/events{/privacy}","received_events_url":"https://api.github.com/users/nagix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-15T16:34:07Z","updated_at":"2016-09-15T16:34:07Z","author_association":"CONTRIBUTOR","body":"@cgivre Yes, I'm still working on this. Since the dependent library (metadata-extractor) has been updated, I need to add some changes according to it. I will push another commit shortly.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/247380836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/247717780","html_url":"https://github.com/apache/drill/pull/587#issuecomment-247717780","issue_url":"https://api.github.com/repos/apache/drill/issues/587","id":247717780,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzcxNzc4MA==","user":{"login":"chunhui-shi","id":9878787,"node_id":"MDQ6VXNlcjk4Nzg3ODc=","avatar_url":"https://avatars.githubusercontent.com/u/9878787?v=4","gravatar_id":"","url":"https://api.github.com/users/chunhui-shi","html_url":"https://github.com/chunhui-shi","followers_url":"https://api.github.com/users/chunhui-shi/followers","following_url":"https://api.github.com/users/chunhui-shi/following{/other_user}","gists_url":"https://api.github.com/users/chunhui-shi/gists{/gist_id}","starred_url":"https://api.github.com/users/chunhui-shi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunhui-shi/subscriptions","organizations_url":"https://api.github.com/users/chunhui-shi/orgs","repos_url":"https://api.github.com/users/chunhui-shi/repos","events_url":"https://api.github.com/users/chunhui-shi/events{/privacy}","received_events_url":"https://api.github.com/users/chunhui-shi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-16T21:52:52Z","updated_at":"2016-09-16T21:52:52Z","author_association":"CONTRIBUTOR","body":"+1, unit test passed.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/247717780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/247723284","html_url":"https://github.com/apache/drill/pull/587#issuecomment-247723284","issue_url":"https://api.github.com/repos/apache/drill/issues/587","id":247723284,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzcyMzI4NA==","user":{"login":"adityakishore","id":2080248,"node_id":"MDQ6VXNlcjIwODAyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/2080248?v=4","gravatar_id":"","url":"https://api.github.com/users/adityakishore","html_url":"https://github.com/adityakishore","followers_url":"https://api.github.com/users/adityakishore/followers","following_url":"https://api.github.com/users/adityakishore/following{/other_user}","gists_url":"https://api.github.com/users/adityakishore/gists{/gist_id}","starred_url":"https://api.github.com/users/adityakishore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adityakishore/subscriptions","organizations_url":"https://api.github.com/users/adityakishore/orgs","repos_url":"https://api.github.com/users/adityakishore/repos","events_url":"https://api.github.com/users/adityakishore/events{/privacy}","received_events_url":"https://api.github.com/users/adityakishore/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-16T22:27:48Z","updated_at":"2016-09-16T22:27:48Z","author_association":"MEMBER","body":"I have verified that this does not alter the content of binary package.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/247723284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/247737203","html_url":"https://github.com/apache/drill/pull/587#issuecomment-247737203","issue_url":"https://api.github.com/repos/apache/drill/issues/587","id":247737203,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzczNzIwMw==","user":{"login":"gparai","id":19275160,"node_id":"MDQ6VXNlcjE5Mjc1MTYw","avatar_url":"https://avatars.githubusercontent.com/u/19275160?v=4","gravatar_id":"","url":"https://api.github.com/users/gparai","html_url":"https://github.com/gparai","followers_url":"https://api.github.com/users/gparai/followers","following_url":"https://api.github.com/users/gparai/following{/other_user}","gists_url":"https://api.github.com/users/gparai/gists{/gist_id}","starred_url":"https://api.github.com/users/gparai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gparai/subscriptions","organizations_url":"https://api.github.com/users/gparai/orgs","repos_url":"https://api.github.com/users/gparai/repos","events_url":"https://api.github.com/users/gparai/events{/privacy}","received_events_url":"https://api.github.com/users/gparai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-17T00:28:23Z","updated_at":"2016-09-17T00:28:23Z","author_association":"NONE","body":"+1, unit tests passed.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/247737203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/247905738","html_url":"https://github.com/apache/drill/pull/584#issuecomment-247905738","issue_url":"https://api.github.com/repos/apache/drill/issues/584","id":247905738,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzkwNTczOA==","user":{"login":"zhztheplayer","id":11284395,"node_id":"MDQ6VXNlcjExMjg0Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/11284395?v=4","gravatar_id":"","url":"https://api.github.com/users/zhztheplayer","html_url":"https://github.com/zhztheplayer","followers_url":"https://api.github.com/users/zhztheplayer/followers","following_url":"https://api.github.com/users/zhztheplayer/following{/other_user}","gists_url":"https://api.github.com/users/zhztheplayer/gists{/gist_id}","starred_url":"https://api.github.com/users/zhztheplayer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhztheplayer/subscriptions","organizations_url":"https://api.github.com/users/zhztheplayer/orgs","repos_url":"https://api.github.com/users/zhztheplayer/repos","events_url":"https://api.github.com/users/zhztheplayer/events{/privacy}","received_events_url":"https://api.github.com/users/zhztheplayer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-19T03:28:08Z","updated_at":"2016-09-29T02:54:20Z","author_association":"MEMBER","body":" @dsbos \n@jinfengni \nCould you please review?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/247905738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/248172967","html_url":"https://github.com/apache/drill/pull/518#issuecomment-248172967","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":248172967,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODE3Mjk2Nw==","user":{"login":"ssriniva123","id":1776159,"node_id":"MDQ6VXNlcjE3NzYxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1776159?v=4","gravatar_id":"","url":"https://api.github.com/users/ssriniva123","html_url":"https://github.com/ssriniva123","followers_url":"https://api.github.com/users/ssriniva123/followers","following_url":"https://api.github.com/users/ssriniva123/following{/other_user}","gists_url":"https://api.github.com/users/ssriniva123/gists{/gist_id}","starred_url":"https://api.github.com/users/ssriniva123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssriniva123/subscriptions","organizations_url":"https://api.github.com/users/ssriniva123/orgs","repos_url":"https://api.github.com/users/ssriniva123/repos","events_url":"https://api.github.com/users/ssriniva123/events{/privacy}","received_events_url":"https://api.github.com/users/ssriniva123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-20T01:02:24Z","updated_at":"2016-09-20T01:02:24Z","author_association":"CONTRIBUTOR","body":"Apologize for getting back on this thread late, got tied up with some issues@work.\n\nPaul,\nThe json parser is not just a tokenizer, it keeps track of the JSON structure and understands various aspects of it like root, array/objectcontext and all parsing is done under that context.\n- we cannot keep track of {} accurately - For eg: The counting json processor does a parser. skipChildren which tries to skip to the end of the JSON, but this can rollover to next line when\n  there is a malformed JSON in the bottom most json sub object - see example below (missing \" in last json structure). This is similar behavior with the JsonReader.\n\n{\"balance\": 1000.0,\"num\": 100,\"is_vip\": true,\"name\": \"foo3\",\"curr\":{\"denom\":\"pound\",\"test\":{\"value  :false}}}\n- One possible solution is to rewind the input source to reset the stream (which is not recommended and there is no guarentee that all streams support mark/reset semantics.\n\nGiven where we are, I think the solution proposed works perfect for almost all malformed JSON's.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/248172967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/248463157","html_url":"https://github.com/apache/drill/pull/592#issuecomment-248463157","issue_url":"https://api.github.com/repos/apache/drill/issues/592","id":248463157,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODQ2MzE1Nw==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-20T23:09:16Z","updated_at":"2016-09-20T23:09:16Z","author_association":"CONTRIBUTOR","body":"Updated to address review comments\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/248463157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/248814422","html_url":"https://github.com/apache/drill/pull/518#issuecomment-248814422","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":248814422,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODgxNDQyMg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-22T05:12:18Z","updated_at":"2016-09-22T05:12:18Z","author_association":"CONTRIBUTOR","body":"Looks like you are right; the JsonParser is more than a simple tokenizer.\n\nWe're not the first to try this: http://stackoverflow.com/questions/37511496/recover-from-malformed-json-with-jackson (no answer)\n\nI tried an experiment and found that you are on the right track: the way you are using the JsonParser can be extended to ignore input until the start of the next object. A quick demonstration:\n\n```\nprivate static void recover(JsonParser parser) throws IOException {\n  for ( ; ; ) {\n    JsonToken token;\n    try {\n      token = parser.nextToken();\n    } catch( JsonParseException e ) { continue; }\n    if ( token == null ) return;\n    if ( token != JsonToken.END_OBJECT ) { continue; }\n    token = parser.nextToken();\n    if ( token == null ) return;\n    if ( token == JsonToken.START_OBJECT ) { return; }\n  }\n}\n```\n\nBasically, we keep reading tokens, and ignoring errors, until we successfully find the } { pair.\n\nAs we discussed before, to use the above in Drill, we have to discard the partly-built record, and start reading the next record assiming the parser is positioned **after** the START_OBJECT (\"{\") token, which we've already consumed. That should be simple.\n\nStill, to do proper recovery, we have to discard the partly-built JSON record. I've not looked into how to do that. If we don't do that, we return the bogus partly-built record. Worse, if we recover by trying to build a new record, we create more partly-built records, but with a different schema, possibly triggering a schema change event when not really necessary.\n\nAny ideas for how to solve that problem?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/248814422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/248921163","html_url":"https://github.com/apache/drill/pull/595#issuecomment-248921163","issue_url":"https://api.github.com/repos/apache/drill/issues/595","id":248921163,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODkyMTE2Mw==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-22T14:32:42Z","updated_at":"2016-09-22T14:32:42Z","author_association":"MEMBER","body":"@jaltekruse Could you please review?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/248921163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249363694","html_url":"https://github.com/apache/drill/pull/367#issuecomment-249363694","issue_url":"https://api.github.com/repos/apache/drill/issues/367","id":249363694,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTM2MzY5NA==","user":{"login":"nagix","id":723188,"node_id":"MDQ6VXNlcjcyMzE4OA==","avatar_url":"https://avatars.githubusercontent.com/u/723188?v=4","gravatar_id":"","url":"https://api.github.com/users/nagix","html_url":"https://github.com/nagix","followers_url":"https://api.github.com/users/nagix/followers","following_url":"https://api.github.com/users/nagix/following{/other_user}","gists_url":"https://api.github.com/users/nagix/gists{/gist_id}","starred_url":"https://api.github.com/users/nagix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nagix/subscriptions","organizations_url":"https://api.github.com/users/nagix/orgs","repos_url":"https://api.github.com/users/nagix/repos","events_url":"https://api.github.com/users/nagix/events{/privacy}","received_events_url":"https://api.github.com/users/nagix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-24T13:00:59Z","updated_at":"2016-09-24T13:00:59Z","author_association":"CONTRIBUTOR","body":"@cgivre I have made the code up to date. Can you review this?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249363694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249397124","html_url":"https://github.com/apache/drill/pull/367#issuecomment-249397124","issue_url":"https://api.github.com/repos/apache/drill/issues/367","id":249397124,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTM5NzEyNA==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-25T01:29:24Z","updated_at":"2016-09-25T01:29:24Z","author_association":"CONTRIBUTOR","body":"@nagix I'd be happy to review it, but I'm not a Drill committer. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249397124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249659210","html_url":"https://github.com/apache/drill/pull/518#issuecomment-249659210","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":249659210,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTY1OTIxMA==","user":{"login":"ssriniva123","id":1776159,"node_id":"MDQ6VXNlcjE3NzYxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1776159?v=4","gravatar_id":"","url":"https://api.github.com/users/ssriniva123","html_url":"https://github.com/ssriniva123","followers_url":"https://api.github.com/users/ssriniva123/followers","following_url":"https://api.github.com/users/ssriniva123/following{/other_user}","gists_url":"https://api.github.com/users/ssriniva123/gists{/gist_id}","starred_url":"https://api.github.com/users/ssriniva123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssriniva123/subscriptions","organizations_url":"https://api.github.com/users/ssriniva123/orgs","repos_url":"https://api.github.com/users/ssriniva123/repos","events_url":"https://api.github.com/users/ssriniva123/events{/privacy}","received_events_url":"https://api.github.com/users/ssriniva123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-26T18:42:04Z","updated_at":"2016-09-26T18:42:04Z","author_association":"CONTRIBUTOR","body":"There is not much to do except change the JSON parser to support this functionality.\n- Indicate to the parser that a current record terminates when it encounters a \\n (Of course\n  this then assumes that druid also aligns to record separators using a new line).\n  This is a change to make to the jackson parser.\n- Right now the current code works for all the standard cases except one case where the inner \n  most sub-structure within a JSON is malformed.\n\nGiven that this is a great recipe for approximation algorithms , I am requesting this change to be pulled in.\n\nIf need be we can work on change to the jackson parser using a different request.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249659210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249677509","html_url":"https://github.com/apache/drill/pull/518#issuecomment-249677509","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":249677509,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTY3NzUwOQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-26T19:49:50Z","updated_at":"2016-09-26T19:49:50Z","author_association":"CONTRIBUTOR","body":"As it turns out, the sample code shown was actually tested with a stock Jackson JSON parser: it does work. No parser changes are needed.\n\nThe issue is not whether we can make the parser do what is needed: the code posted in the comment above demonstrated a solution.\n\nThe issue is how we incorporate that code into the JSON parser to clean up partial records and prevent schema changes. When I have time, I'll investigate that question in greater depth.\n\nIMHO, without a proper fix, we should simply state that Drill does not support malformed JSON. If an input file might be incorrect, run it though a clean-up step before allowing Drill to scan it. Otherwise, we are opening the door to many hard-to-resolve bugs when people ask Drill to scan corrupt JSON: the result, without a proper fix, would be undefined -- which is worse than the current behavior that simply fails the scan with an error.\n\nLet's follow up again after I (or someone) has had a chance to figure out if we can undo a partially built record. If we can do that, then we've got a path to a clean solution: recover the parser (as shown earlier) and discard the in-flight record (as we need to research.)\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249677509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249776189","html_url":"https://github.com/apache/drill/pull/518#issuecomment-249776189","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":249776189,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTc3NjE4OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-27T06:18:50Z","updated_at":"2016-09-27T06:18:50Z","author_association":"CONTRIBUTOR","body":"The open question was how we can discard a partly-built record during recovery. As far as I can tell (veterans, please correct me), the JSONRecordReader keeps track of the record count. So, all we have to do is not increment the count when we want to discard a record. Look in\n\n```\nJSONRecordReader.next( )\n  ...\n  outside: while(recordCount < DEFAULT_ROWS_PER_BATCH) {\n    writer.setPosition(recordCount); // Sets the position for the next read.\n    write = jsonReader.write(writer); // Write the record. We can catch errors\n                                      // and recover here??\n     ...\n      recordCount++; // Don't do this on a bad record\n  ...\n  writer.setValueCount(recordCount); // The record reader controls the record count.\n```\n\nThis seems to show the elements of a solution:\n1. Try to read the record.\n2. If a failure occurs, catch it here and clean up, as in the previous post.\n3. Don't increment the record count. We reuse the current one on the next record read.\n\nNow the only open question is how we clean up the in-flight record in case some columns are not present in the next record. Anyone know how to set a vector position to null (for optional) default value (for required) or zero-length (for repeated)?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249776189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249778404","html_url":"https://github.com/apache/drill/pull/518#issuecomment-249778404","issue_url":"https://api.github.com/repos/apache/drill/issues/518","id":249778404,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTc3ODQwNA==","user":{"login":"ssriniva123","id":1776159,"node_id":"MDQ6VXNlcjE3NzYxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1776159?v=4","gravatar_id":"","url":"https://api.github.com/users/ssriniva123","html_url":"https://github.com/ssriniva123","followers_url":"https://api.github.com/users/ssriniva123/followers","following_url":"https://api.github.com/users/ssriniva123/following{/other_user}","gists_url":"https://api.github.com/users/ssriniva123/gists{/gist_id}","starred_url":"https://api.github.com/users/ssriniva123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssriniva123/subscriptions","organizations_url":"https://api.github.com/users/ssriniva123/orgs","repos_url":"https://api.github.com/users/ssriniva123/repos","events_url":"https://api.github.com/users/ssriniva123/events{/privacy}","received_events_url":"https://api.github.com/users/ssriniva123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-27T06:34:44Z","updated_at":"2016-09-27T06:34:44Z","author_association":"CONTRIBUTOR","body":"Paul,\nThe code you have listed is semantically equivalent to that of what I already I have submitted for pull and will not solve handling of all malformed json records. Also the code for reporting the \nerror records is working correctly as long as is it is reported by the Parser correctly.\n\nAs I explained earlier the JSON parser is not just a simple tokenizer, it keeps track of internal state,\nhence the issue. SERDE's in hive etc work because they  are record oriented with clean record demarkations using a new line.\n\nOne solution is to submit a patch to jackson parser to expose a method to skip to new line in the\nevent of a parsing exception. This can be parametrized so that behavior can customized.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249778404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249944897","html_url":"https://github.com/apache/drill/pull/597#issuecomment-249944897","issue_url":"https://api.github.com/repos/apache/drill/issues/597","id":249944897,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTk0NDg5Nw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-27T17:56:11Z","updated_at":"2016-09-27T17:56:11Z","author_association":"CONTRIBUTOR","body":"comment\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249944897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/249990023","html_url":"https://github.com/apache/drill/pull/597#issuecomment-249990023","issue_url":"https://api.github.com/repos/apache/drill/issues/597","id":249990023,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTk5MDAyMw==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-27T20:34:56Z","updated_at":"2016-09-27T20:34:56Z","author_association":"CONTRIBUTOR","body":"updated with review comments.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/249990023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/250039318","html_url":"https://github.com/apache/drill/pull/595#issuecomment-250039318","issue_url":"https://api.github.com/repos/apache/drill/issues/595","id":250039318,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDAzOTMxOA==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-28T00:34:24Z","updated_at":"2016-09-28T00:34:24Z","author_association":"CONTRIBUTOR","body":"@vdiravka can you repost this PR with the commits split into Jason's original work and then with your fixes on top? We should give credit where it is due. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/250039318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/250156796","html_url":"https://github.com/apache/drill/pull/595#issuecomment-250156796","issue_url":"https://api.github.com/repos/apache/drill/issues/595","id":250156796,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDE1Njc5Ng==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-28T12:48:46Z","updated_at":"2016-09-28T12:48:46Z","author_association":"MEMBER","body":"@parthchandra Done. Now it involves 2 Jason original commits (only with resolved git version conflicts) and one my commit on top.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/250156796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/250211575","html_url":"https://github.com/apache/drill/pull/598#issuecomment-250211575","issue_url":"https://api.github.com/repos/apache/drill/issues/598","id":250211575,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDIxMTU3NQ==","user":{"login":"sfc-gh-zfong","id":15160707,"node_id":"MDQ6VXNlcjE1MTYwNzA3","avatar_url":"https://avatars.githubusercontent.com/u/15160707?v=4","gravatar_id":"","url":"https://api.github.com/users/sfc-gh-zfong","html_url":"https://github.com/sfc-gh-zfong","followers_url":"https://api.github.com/users/sfc-gh-zfong/followers","following_url":"https://api.github.com/users/sfc-gh-zfong/following{/other_user}","gists_url":"https://api.github.com/users/sfc-gh-zfong/gists{/gist_id}","starred_url":"https://api.github.com/users/sfc-gh-zfong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfc-gh-zfong/subscriptions","organizations_url":"https://api.github.com/users/sfc-gh-zfong/orgs","repos_url":"https://api.github.com/users/sfc-gh-zfong/repos","events_url":"https://api.github.com/users/sfc-gh-zfong/events{/privacy}","received_events_url":"https://api.github.com/users/sfc-gh-zfong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-28T15:57:31Z","updated_at":"2016-09-28T15:57:31Z","author_association":"NONE","body":"@amansinha100 - can you review this pull request.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/250211575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/250583574","html_url":"https://github.com/apache/drill/pull/597#issuecomment-250583574","issue_url":"https://api.github.com/repos/apache/drill/issues/597","id":250583574,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDU4MzU3NA==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-29T20:35:56Z","updated_at":"2016-09-29T20:35:56Z","author_association":"CONTRIBUTOR","body":"updated with all review comments taken care of. Please review.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/250583574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/250585499","html_url":"https://github.com/apache/drill/pull/597#issuecomment-250585499","issue_url":"https://api.github.com/repos/apache/drill/issues/597","id":250585499,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDU4NTQ5OQ==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-29T20:43:31Z","updated_at":"2016-09-29T20:43:31Z","author_association":"CONTRIBUTOR","body":"+1\n\nLGTM.\n\nIf possible, please run a performance workload.  The patch supposedly should not impact the performance workload. But in case I might miss something, it would be good to run the performance regression to make sure. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/250585499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240484","html_url":"https://github.com/apache/drill/pull/328#issuecomment-251240484","issue_url":"https://api.github.com/repos/apache/drill/issues/328","id":251240484,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTI0MDQ4NA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-03T22:02:08Z","updated_at":"2016-10-03T22:02:08Z","author_association":"CONTRIBUTOR","body":"this PR has been merged to drill 1.6.0. Close this PR. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240803","html_url":"https://github.com/apache/drill/pull/342#issuecomment-251240803","issue_url":"https://api.github.com/repos/apache/drill/issues/342","id":251240803,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTI0MDgwMw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-03T22:03:37Z","updated_at":"2016-10-03T22:03:37Z","author_association":"CONTRIBUTOR","body":"Close this PR, as the patch has been merged to Drill. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240940","html_url":"https://github.com/apache/drill/pull/471#issuecomment-251240940","issue_url":"https://api.github.com/repos/apache/drill/issues/471","id":251240940,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTI0MDk0MA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-03T22:04:18Z","updated_at":"2016-10-03T22:04:18Z","author_association":"CONTRIBUTOR","body":"Close this PR as it has been merged to Drill. \n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/251240940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/252094329","html_url":"https://github.com/apache/drill/pull/600#issuecomment-252094329","issue_url":"https://api.github.com/repos/apache/drill/issues/600","id":252094329,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjA5NDMyOQ==","user":{"login":"karthik-man","id":430469,"node_id":"MDQ6VXNlcjQzMDQ2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/430469?v=4","gravatar_id":"","url":"https://api.github.com/users/karthik-man","html_url":"https://github.com/karthik-man","followers_url":"https://api.github.com/users/karthik-man/followers","following_url":"https://api.github.com/users/karthik-man/following{/other_user}","gists_url":"https://api.github.com/users/karthik-man/gists{/gist_id}","starred_url":"https://api.github.com/users/karthik-man/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthik-man/subscriptions","organizations_url":"https://api.github.com/users/karthik-man/orgs","repos_url":"https://api.github.com/users/karthik-man/repos","events_url":"https://api.github.com/users/karthik-man/events{/privacy}","received_events_url":"https://api.github.com/users/karthik-man/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-06T21:29:37Z","updated_at":"2016-10-06T21:29:37Z","author_association":"NONE","body":"I can't see NullableFixedByteAlignedReaders.java. Shows up as a binary file.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/252094329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/252101315","html_url":"https://github.com/apache/drill/pull/600#issuecomment-252101315","issue_url":"https://api.github.com/repos/apache/drill/issues/600","id":252101315,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjEwMTMxNQ==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-06T22:01:39Z","updated_at":"2016-10-06T22:01:39Z","author_association":"MEMBER","body":"@bitblender Sorry about this. That was hidden `\\^@` symbols.\nFixed.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/252101315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/252103604","html_url":"https://github.com/apache/drill/pull/595#issuecomment-252103604","issue_url":"https://api.github.com/repos/apache/drill/issues/595","id":252103604,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjEwMzYwNA==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-06T22:13:31Z","updated_at":"2016-10-06T22:13:31Z","author_association":"MEMBER","body":"Thanks @jaltekruse.\n@parthchandra Could you please take a look?\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/252103604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]