[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805159744","html_url":"https://github.com/apache/couchdb/pull/3453#issuecomment-805159744","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3453","id":805159744,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTE1OTc0NA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T19:07:50Z","updated_at":"2021-03-23T19:07:50Z","author_association":"MEMBER","body":"Thank you for the review, @wohali and @nickva ! I'm about to merge this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805159744/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805170195","html_url":"https://github.com/apache/couchdb/pull/3447#issuecomment-805170195","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3447","id":805170195,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTE3MDE5NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T19:24:10Z","updated_at":"2021-03-23T19:24:10Z","author_association":"CONTRIBUTOR","body":"The default behavior was characterized by @davisp during the initial PR for the new batcher: https://github.com/apache/couchdb/pull/3127#issue-478920470\r\n\r\nDuring overload, especially if using a remote `couch_eval` instances like [ateles](https://github.com/cloudant-labs/ateles), the retries or any slowdowns there would also be counted against the TX time, that is something to worry about. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805170195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805275826","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-805275826","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":805275826,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTI3NTgyNg==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T21:29:35Z","updated_at":"2021-03-23T21:53:51Z","author_association":"NONE","body":"> Thanks @janl !\r\n> \r\n> Looks like a minor naming mistake in `couchdb-ci/build.sh` prevented the arm and ppc images from getting pushed to docker hub correctly. I'm rebuilding the containers now, just to freshen them, pushing, and that should get us back in business.\r\n\r\nHi, my name Amir Sanjar leading the IBM power-enabled team. I apologize for losing access to your ppc64le worker, let me help you here. What is your HW requirement (i.e. cores, storage, public net access, Linux distro..) ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805275826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805295009","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805295009","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805295009,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTI5NTAwOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T22:00:35Z","updated_at":"2021-03-23T22:00:35Z","author_association":"MEMBER","body":"Hi @afsanjar , I have moved this to a new issue, this is not related to CI failing on `main`.\r\n\r\nI'm hoping you can work with someone on the IBM Cloudant team such as @nickva to help coordinate this effort.\r\n\r\nWe lost our access to CI workers on or around 2020.09.01, when IBM Cloud discontinued the workers we had been using.\r\n\r\nPreviously we had 2 SoftLayer worker nodes in the \"cp2-4x8\" profile. Here's their old definitions in our infrastructure management repo (Ansible based): https://github.com/apache/couchdb-infra-cm/commit/ee7206c6124a725624187570193d6b52e6f5a9b6\r\n\r\nThey would ahve been running Ubuntu, probably 18.04, and had Docker installed. Note that our builds run inside Docker, but we require dedicated services at the moment, and cannot support pure Docker-based Jenkins workers.\r\n\r\nCan you work backwards from this or do you need us to dig out what \"cp2-4x8\" used to mean for IBM Cloud/SoftLayer?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805295009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805353503","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805353503","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805353503,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTM1MzUwMw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-23T23:43:58Z","updated_at":"2021-03-23T23:43:58Z","author_association":"MEMBER","body":"Hi @afsanjar, building on what Joan shared, we were using worker nodes from the \"VPC on POWER\" program, so I guess these were POWER9 instances with 4 vCPUs and 8 GB RAM.\r\n\r\nMost of our other workers nodes still run in an IBM Cloud VPC, but the master is a CloudBees instance hosted by the ASF at https://ci-couchdb.apache.org, so yes, the worker nodes will need public network access.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805353503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805444943","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805444943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805444943,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ0NDk0Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T02:52:59Z","updated_at":"2021-03-24T02:52:59Z","author_association":"CONTRIBUTOR","body":"Hi Amir. The repository which manages the workers is https://github.com/apache/couchdb-infra-cm.  It uses Ansible and there is a discovery [API call](https://github.com/apache/couchdb-infra-cm/blob/main/tools/gen-config#L71-L86) which looks through and gathers all the available instances. Ideally the new instances would be query-able in a similar manner. But, if needed, we can add another query there to get the ppc64le workers.\r\n\r\nPing me internally at IBM if you need help. Search for \"Nick\" (or \"Nicolae\") Vatamaniuc, and I should have access to create and update these worker instances.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805444943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805451825","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805451825","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805451825,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ1MTgyNQ==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T03:07:03Z","updated_at":"2021-03-24T03:07:03Z","author_association":"NONE","body":"Hi Adam and Joan,\nThanks for your replies. We are working toward providing a dedicated\nbuild/test HW for ppc64le asap. Meanwhile, what are other outstanding\nissues for ppc64le enablements?\n\n\nOn Tue, Mar 23, 2021 at 6:44 PM Adam Kocoloski ***@***.***>\nwrote:\n\n> Hi @afsanjar <https://github.com/afsanjar>, building on what Joan shared,\n> we were using worker nodes from the \"VPC on POWER\" program, so I guess\n> these were POWER9 instances with 4 vCPUs and 8 GB RAM.\n>\n> Most of our other workers nodes still run in an IBM Cloud VPC, but the\n> master is a CloudBees instance hosted by the ASF at\n> https://ci-couchdb.apache.org, so yes, the worker nodes will need public\n> network access.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/3454#issuecomment-805353503>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AE3DPVDR6KNZMF27JXG72IDTFERU3ANCNFSM4ZWBGD4A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805451825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805462778","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805462778","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805462778,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ2Mjc3OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T03:39:51Z","updated_at":"2021-03-24T03:39:51Z","author_association":"MEMBER","body":"There are no known regressions, but with the significant changes to our code base made over the last 6 months, we are in no position to re-add ppc64le to the supported platform list until CI has been running for at least a few iterations with no failures on the platform.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805462778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805469113","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805469113","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805469113,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ2OTExMw==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T04:01:33Z","updated_at":"2021-03-24T04:01:33Z","author_association":"NONE","body":"Yes, of course. Trust me Joan it is not in our interest to have a defective\nproduct as well. My intend was to size the effort so I could allocate\nenough resources.\nBtw, I am an Apache Bigtop PMC member, what is the process to join as a\ncontributor and committer?\n\nOn Tue, Mar 23, 2021 at 10:40 PM Joan Touzet ***@***.***>\nwrote:\n\n> There are no known regressions, but with the significant changes to our\n> code base made over the last 6 months, we are in no position to re-add\n> ppc64le to the supported platform list until CI has been running for at\n> least a few iterations with no failures on the platform.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/3454#issuecomment-805462778>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AE3DPVFIPSUXZZQY77VZZBLTFFNJLANCNFSM4ZWBGD4A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805469113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805472793","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805472793","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805472793,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ3Mjc5Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T04:10:58Z","updated_at":"2021-03-24T04:10:58Z","author_association":"MEMBER","body":"Good to hear. Thanks for your help! Really, it makes a huge difference. I only wish this help had come before I had to take the step to remove ppc64le from our supported build list.\r\n\r\nYou're already a contributor (from our [bylaws](https://couchdb.apache.org/bylaws.html)):\r\n\r\n> A contributor is someone who makes contributions to the community, project, documentation, or code.\r\n> \r\n> There is no special requirement to become a contributor. If you have a great idea for the project, you can get to work immediately. There is no need to ask permission. Most things can be accomplished by contributors with no special privileges or status on the project. Assistance can be provided if you need access to project resources to get your work done.\r\n>\r\n> A contributor who makes sustained contributions to the project may be invited to become a committer. \r\n\r\nTo become a committer is not an overnight thing. Of course, given sustained commitment to the project, the PMC generally invites people who stand out as meeting these criteria:\r\n\r\n> A committer is someone who is committed to the project. In return for their commitment, they are given a binding vote in certain project decisions. Committers are hence responsible for the ongoing health of the project and the community.\r\n>\r\n> We recognise commitment in many different areas. These include, but are not limited to: \r\n> \r\n> * Community (community management, ticket triage, helping new users, events etc.) \r\n> * Project (blogging, marketing, design, UX, branding, etc) \r\n> * Documentation (documentation, localisation/internationalisation, etc.) \r\n> * Code (new features, bug fixing, quality assurance, release management etc.) \r\n>\r\n> ...\r\n> **To make this clear, we have chosen to define a committer as someone who is committed. We mean this in the sense of being loyal to the project and its interests. It is a position of trust, not an expectation of activity level. Anyone who is supportive of the community and the project will be considered as a candidate for being a committer.**\r\n>\r\n> As a matter of convenience, committers are also given write access to all of the public project infrastructure, including source control repositories, website, issue tracker, wiki, and blog. Access to social media accounts, and other third-party services, will be granted upon request. \r\n\r\n\r\nThanks again for your help!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805472793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805483239","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805483239","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805483239,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTQ4MzIzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T04:36:42Z","updated_at":"2021-03-24T04:36:42Z","author_association":"MEMBER","body":"I would say that, 3.x aside, the 4.x release cycle will eventually come, and we'll need ppc-savvy resources on hand to help deal with any problems found at that time. Your team's support is most welcome when that happens.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805483239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805580114","html_url":"https://github.com/apache/couchdb/issues/3420#issuecomment-805580114","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3420","id":805580114,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTU4MDExNA==","user":{"login":"MatthijsBurgh","id":18014833,"node_id":"MDQ6VXNlcjE4MDE0ODMz","avatar_url":"https://avatars.githubusercontent.com/u/18014833?v=4","gravatar_id":"","url":"https://api.github.com/users/MatthijsBurgh","html_url":"https://github.com/MatthijsBurgh","followers_url":"https://api.github.com/users/MatthijsBurgh/followers","following_url":"https://api.github.com/users/MatthijsBurgh/following{/other_user}","gists_url":"https://api.github.com/users/MatthijsBurgh/gists{/gist_id}","starred_url":"https://api.github.com/users/MatthijsBurgh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MatthijsBurgh/subscriptions","organizations_url":"https://api.github.com/users/MatthijsBurgh/orgs","repos_url":"https://api.github.com/users/MatthijsBurgh/repos","events_url":"https://api.github.com/users/MatthijsBurgh/events{/privacy}","received_events_url":"https://api.github.com/users/MatthijsBurgh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T07:45:13Z","updated_at":"2021-03-24T07:45:13Z","author_association":"NONE","body":"I don't experience this issue anymore on GitHub Actions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805580114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805661762","html_url":"https://github.com/apache/couchdb/pull/3455#issuecomment-805661762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3455","id":805661762,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTY2MTc2Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T09:57:22Z","updated_at":"2021-03-24T09:57:22Z","author_association":"MEMBER","body":"@chewbranca in particular for finding some of the operational difficulties of my original approach.\r\n@janl for his thoughts on the impact of the multiplying effect inherent to this change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805661762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805800742","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-805800742","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":805800742,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTgwMDc0Mg==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T13:01:34Z","updated_at":"2021-03-24T13:01:34Z","author_association":"NONE","body":"Thanks a lot, Nick. We'll definitely reach out to you in the next few days\nfor a chat. My internal IBM handle is \"@Amir Sanjar\" and email is\n***@***.***\n\nOn Tue, Mar 23, 2021 at 9:53 PM Nick Vatamaniuc ***@***.***>\nwrote:\n\n> Hi Amir. The repository which manages the workers is\n> https://github.com/apache/couchdb-infra-cm. It uses Ansible and there is\n> a discovery API call\n> <https://github.com/apache/couchdb-infra-cm/blob/main/tools/gen-config#L71-L86>\n> which looks through and gathers all the available instances. Ideally the\n> new instances would be query-able in a similar manner. But, if needed, we\n> can add another query there to get the ppc64le workers.\n>\n> Ping me internally at IBM if you need help. Search for \"Nick\" (or\n> \"Nicolae\") Vatamaniuc, and I should have access to create and update these\n> worker instances.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/3454#issuecomment-805444943>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AE3DPVBRIDOCG6YI4GGNISDTFFHZRANCNFSM4ZWBGD4A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805800742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805969589","html_url":"https://github.com/apache/couchdb/pull/3455#issuecomment-805969589","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3455","id":805969589,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTk2OTU4OQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T16:25:55Z","updated_at":"2021-03-24T16:25:55Z","author_association":"MEMBER","body":"am having second thoughts after discussing with rob allen.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/805969589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806176704","html_url":"https://github.com/apache/couchdb/issues/3451#issuecomment-806176704","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3451","id":806176704,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjE3NjcwNA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-24T20:48:34Z","updated_at":"2021-03-25T13:23:50Z","author_association":"CONTRIBUTOR","body":"Do you see any elevated metrics like memory or CPU usage? And would you be able to add more logging on the client to capture the error that comes back with a bad request?\r\n\r\nIt's hard to say what it could be without being able to reproduce it.  Could be that the client connection pool gets messed up and client connections which are in a bad or intermediate state (still receiving) end up recycled. Maybe if session cookies are used the clients don't know how to get new ones, so try switching to basic auth only for a bit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806176704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806572077","html_url":"https://github.com/apache/couchdb/issues/3451#issuecomment-806572077","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3451","id":806572077,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjU3MjA3Nw==","user":{"login":"tudordumitriu","id":4671554,"node_id":"MDQ6VXNlcjQ2NzE1NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4671554?v=4","gravatar_id":"","url":"https://api.github.com/users/tudordumitriu","html_url":"https://github.com/tudordumitriu","followers_url":"https://api.github.com/users/tudordumitriu/followers","following_url":"https://api.github.com/users/tudordumitriu/following{/other_user}","gists_url":"https://api.github.com/users/tudordumitriu/gists{/gist_id}","starred_url":"https://api.github.com/users/tudordumitriu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tudordumitriu/subscriptions","organizations_url":"https://api.github.com/users/tudordumitriu/orgs","repos_url":"https://api.github.com/users/tudordumitriu/repos","events_url":"https://api.github.com/users/tudordumitriu/events{/privacy}","received_events_url":"https://api.github.com/users/tudordumitriu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T11:23:26Z","updated_at":"2021-03-25T11:23:26Z","author_association":"NONE","body":"Thanks @nickva \r\nWe're pretty much on the same line here, and I do suspect the problem is the connection management not the request, mainly because of technical reasons we are trying to reuse HttpClient in .Net (because they have a stranger lifecycle management - and if you abuse them you basically get a really bad performance)\r\nSo with that being said, what we have already tried in this specific case and seems to be holding is creating a new instance of the HttpClient, so that must be it, connection management, some resource being released or something like that.\r\nAnyways, will keep it like that for a while and see how that goes.\r\nAppreciate it!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806572077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806636379","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-806636379","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":806636379,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjYzNjM3OQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T12:20:05Z","updated_at":"2021-03-25T12:20:05Z","author_association":"MEMBER","body":"There are many docker pull rate limit issues. I'll put this on hold until we get to have the images in a place where rate limits don't affect us.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806636379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806768726","html_url":"https://github.com/apache/couchdb/pull/3459#issuecomment-806768726","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3459","id":806768726,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNjc2ODcyNg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T13:44:44Z","updated_at":"2021-03-25T13:44:44Z","author_association":"MEMBER","body":"Thank you for the review, @nickva ! I'm about to merge this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/806768726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807056938","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-807056938","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":807056938,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzA1NjkzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T16:33:20Z","updated_at":"2021-03-25T16:33:20Z","author_association":"MEMBER","body":"@bessbd While we wait for ASF, those should only be happening around midnight, North America time. They'll be colliding with the job that keeps our Docker images fresh on each machine - so that we don't have to `docker pull` for every job we run. I can try reducing the frequency to every few days if you would like to try that.\r\n\r\nAre you seeing them during the US business hours?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807056938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807127308","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-807127308","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":807127308,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzEyNzMwOA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T17:18:16Z","updated_at":"2021-03-25T17:18:16Z","author_association":"MEMBER","body":"https://ci-couchdb.apache.org/job/jenkins-cm1/job/FullPlatformMatrix/job/main/110/ says 10am UTC-ish. Depending on the coast, it could be close to midnight somewhere in the US.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807127308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807144385","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-807144385","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":807144385,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzE0NDM4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T17:29:07Z","updated_at":"2021-03-25T17:29:07Z","author_association":"MEMBER","body":"OK, I've reduced the frequency of the mass downloader script to once a week, on Sunday mornings. Let's see if that helps.\r\n\r\nIf we push any new Docker images (and Infra doesn't come through with the new namespace for us) we'll have to manually trigger that job, which may temporarily put us over the rate limit.\r\n\r\nCan you pick this ticket back up now?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807144385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807183719","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-807183719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":807183719,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzE4MzcxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T17:53:37Z","updated_at":"2021-03-25T17:53:37Z","author_association":"MEMBER","body":"For reference, the FreeBSD box is:\r\n\r\n```\r\nCPU: Intel(R) Xeon(R) CPU E5-2667 v2 @ 3.30GHz (3300.00-MHz K8-class CPU)\r\nreal memory  = 8589934592 (8192 MB)\r\navail memory = 8271409152 (7888 MB)\r\n```\r\n\r\nshared across 2 Jenkins workers, each in their own jail.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807183719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807222236","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-807222236","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":807222236,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzIyMjIzNg==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T18:17:26Z","updated_at":"2021-03-25T18:17:26Z","author_association":"NONE","body":"We are trying to provide the community OpenStack direct access to create more Power VMs as needed. Would that work?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807222236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807274064","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-807274064","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":807274064,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzI3NDA2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T18:49:27Z","updated_at":"2021-03-25T18:49:27Z","author_association":"MEMBER","body":"I'll let @nickva answer, but as long as the machines don't disappear out from under us randomly, or we're not forced to re-set up machines on a regular basis it should be fine. Our current Jenkins system takes a bit of effort to add and maintain new machines, so, dynamic (re-)allocation isn't really a great option for us.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807274064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807336336","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-807336336","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":807336336,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzMzNjMzNg==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T19:29:56Z","updated_at":"2021-03-25T19:29:56Z","author_association":"NONE","body":"Got that. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807336336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807416688","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-807416688","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":807416688,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzQxNjY4OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T20:21:53Z","updated_at":"2021-03-25T20:21:53Z","author_association":"CONTRIBUTOR","body":"@afsanjar It would be ideal it the ppc nodes could be added again to the existing (functional) cloud.ibm.com account we're already using. The Ansible script would make it easy to manage all the nodes together.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807416688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807480194","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-807480194","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":807480194,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzQ4MDE5NA==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T21:01:34Z","updated_at":"2021-03-25T21:02:07Z","author_association":"NONE","body":"@nickva We are ultimately moving that way as part of the IBM Cloud PowerVS project https://www.ibm.com/cloud/power-virtual-server. However, currently, the Linux support is still under development, i.e., no ubuntu support yet. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807480194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807569130","html_url":"https://github.com/apache/couchdb/pull/3460#issuecomment-807569130","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3460","id":807569130,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzU2OTEzMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T21:55:43Z","updated_at":"2021-03-25T21:55:43Z","author_association":"MEMBER","body":"What would you say to moving those `?FDB_*` and `?IS_RETRYABLE` macros to erlfdb instead of fabric2? Seems like those would be generally useful to erlfdb users in general. I'd also rename the retryable macro to `?FDB_IS_RETRYABLE` for namespacey reasons.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807569130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807575225","html_url":"https://github.com/apache/couchdb/pull/3460#issuecomment-807575225","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3460","id":807575225,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzU3NTIyNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-25T21:59:17Z","updated_at":"2021-03-25T21:59:17Z","author_association":"CONTRIBUTOR","body":"@davisp both good ideas. We'll add a new include file in erlfdb and then include that in fabric2.hrl","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807575225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807907979","html_url":"https://github.com/apache/couchdb/pull/3416#issuecomment-807907979","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3416","id":807907979,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzkwNzk3OQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-26T03:23:12Z","updated_at":"2021-03-26T03:23:12Z","author_association":"CONTRIBUTOR","body":"@chewbranca \r\n\r\nThose were my exact thoughts when I was writing this up as having an app/gen_server was a bit of overkill. The bulk of the code is in the wrapper which does the conversion so it wouldn't make sense to add the extra supervision tree. The two reasons of adding it however were 1) We're going to add _active_task info as well later on and I didn't want to have a huge chunk of code inside chttpd_node to combine 3 different sources of stats info (stats, system, active_tasks) as it'll get messier.  2) The addition of the mochiweb_server was the deciding factor as now we needed a separate process to linger around. Even though it's optional, I'd rather not have a non-supervised mochiweb server lingering in the vm.\r\n\r\nThe reason for the mochiweb_server was to bypass the need to have a username/password in certain situations. One of those situations that arose was the need to store credentials inside a Prometheus config file. It was an internal scrape but forcing the storage of credentials meant additional security parameters in place such that the credentials would not leak. It would be more secure in that scenario not to use credentials. Thus, it's configurable and OFF by default. Would love some additional thoughts on this cc @janl @wohali.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807907979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807918692","html_url":"https://github.com/apache/couchdb/pull/3460#issuecomment-807918692","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3460","id":807918692,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzkxODY5Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-26T04:00:28Z","updated_at":"2021-03-26T04:00:28Z","author_association":"CONTRIBUTOR","body":"@davisp ready for another look. It turns there was no need to add an include file, erlfdb already had one and I had forgotten about it. Then, including it in fabric2.hrl made it pretty easy overall.  Also, set the prefix to `ERLFDB_` just to match the rest of the macros in include file.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/807918692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808121455","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-808121455","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":808121455,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODEyMTQ1NQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-26T10:59:45Z","updated_at":"2021-03-26T11:00:14Z","author_association":"MEMBER","body":"> OK, I've reduced the frequency of the mass downloader script to once a week, on Sunday mornings. Let's see if that helps.\r\n> \r\n> If we push any new Docker images (and Infra doesn't come through with the new namespace for us) we'll have to manually trigger that job, which may temporarily put us over the rate limit.\r\n> \r\n> Can you pick this ticket back up now?\r\n\r\nI've re-assigned myself. Let's see how it goes.\r\n\r\nThank you for the pull rate limit workaround, @wohali !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808121455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808140507","html_url":"https://github.com/apache/couchdb/pull/3455#issuecomment-808140507","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3455","id":808140507,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODE0MDUwNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-26T11:30:27Z","updated_at":"2021-03-26T11:30:27Z","author_association":"MEMBER","body":"closing for now, might come back to it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808140507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808961938","html_url":"https://github.com/apache/couchdb/pull/3465#issuecomment-808961938","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3465","id":808961938,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODk2MTkzOA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-28T21:26:23Z","updated_at":"2021-03-28T21:26:23Z","author_association":"MEMBER","body":"Thank you for the review, @nickva !\r\n\r\nI just realized I missed the \"un-skipping\" of `Standard config options are present`. I'll add that to this PR before merging, if you don't mind.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/808961938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809002417","html_url":"https://github.com/apache/couchdb/pull/3465#issuecomment-809002417","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3465","id":809002417,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTAwMjQxNw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T01:12:21Z","updated_at":"2021-03-29T01:12:21Z","author_association":"CONTRIBUTOR","body":"@bessbd sounds good!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809002417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809313427","html_url":"https://github.com/apache/couchdb/pull/1253#issuecomment-809313427","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1253","id":809313427,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTMxMzQyNw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T11:47:09Z","updated_at":"2021-03-29T11:47:09Z","author_association":"MEMBER","body":"> @janl This is very stale. Any plans to get this in? I am preparing to mass-close old PRs that never got merged.\r\n\r\n@janl / @wohali : ping","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809313427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809368160","html_url":"https://github.com/apache/couchdb/pull/2759#issuecomment-809368160","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2759","id":809368160,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTM2ODE2MA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T13:15:44Z","updated_at":"2021-03-29T13:15:44Z","author_association":"MEMBER","body":"Hi @iblis17,\r\n\r\nThank you for this patch!\r\nDo you think you could include a test with this change?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809368160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809369419","html_url":"https://github.com/apache/couchdb/pull/2832#issuecomment-809369419","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2832","id":809369419,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTM2OTQxOQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T13:17:35Z","updated_at":"2021-03-29T13:18:56Z","author_association":"MEMBER","body":"Do we want this in `3.2` or do we intend to add the version option in `>3.x` onwards?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809369419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809391314","html_url":"https://github.com/apache/couchdb/pull/2832#issuecomment-809391314","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2832","id":809391314,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTM5MTMxNA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T13:48:14Z","updated_at":"2021-03-29T13:48:14Z","author_association":"CONTRIBUTOR","body":"There were no consensus https://lists.apache.org/thread.html/rcc742c0fdca0363bb338b54526045720868597ea35ee6842aef174e0%40%3Cdev.couchdb.apache.org%3E.\r\n\r\nHowever Adam started new discussion about it recently https://github.com/apache/couchdb/blob/main/src/chttpd/src/chttpd_httpd_handlers.erl#L62:L495\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809391314/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809507373","html_url":"https://github.com/apache/couchdb/pull/2946#issuecomment-809507373","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2946","id":809507373,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUwNzM3Mw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:03:50Z","updated_at":"2021-03-29T16:03:50Z","author_association":"CONTRIBUTOR","body":"Hi @ChrisPaprocki, sincere apologies for missing this last year! Since you opened this, I also discovered this issue, and fixed it independently on 3.x branch with https://github.com/apache/couchdb/pull/3392 and ported to main with https://github.com/apache/couchdb/pull/3426. Can you please confirm that fixe works for you, and if not reopen this issue with details of the ongoing problem? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809507373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809509928","html_url":"https://github.com/apache/couchdb/pull/3184#issuecomment-809509928","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3184","id":809509928,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUwOTkyOA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:07:20Z","updated_at":"2021-03-29T16:07:20Z","author_association":"MEMBER","body":"@chewbranca : should we merge this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809509928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809511597","html_url":"https://github.com/apache/couchdb/pull/3260#issuecomment-809511597","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3260","id":809511597,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUxMTU5Nw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:09:48Z","updated_at":"2021-03-29T16:09:48Z","author_association":"MEMBER","body":"@rnewson : is this PR applicable for `3.x`? I know there is no `erlfb:transactional`, but does the issue ever happen there?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809511597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809516219","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-809516219","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":809516219,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUxNjIxOQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:16:43Z","updated_at":"2021-03-29T16:16:43Z","author_association":"MEMBER","body":"@jaydoane : should we merge this so that it's available in the upcoming `3.x`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809516219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809524183","html_url":"https://github.com/apache/couchdb/pull/3416#issuecomment-809524183","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3416","id":809524183,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUyNDE4Mw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:28:41Z","updated_at":"2021-03-29T16:28:41Z","author_association":"MEMBER","body":"@tonysun83 : do we want to have this in `3.x` too?\r\nOther: I couldn't find E2E tests for this PR. Are they in progress or did I miss something?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809524183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809525032","html_url":"https://github.com/apache/couchdb/pull/3428#issuecomment-809525032","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3428","id":809525032,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUyNTAzMg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:29:55Z","updated_at":"2021-03-29T16:29:55Z","author_association":"MEMBER","body":"@janl : should we merge this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809525032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809533234","html_url":"https://github.com/apache/couchdb/pull/1253#issuecomment-809533234","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1253","id":809533234,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTUzMzIzNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T16:41:42Z","updated_at":"2021-03-29T16:41:42Z","author_association":"MEMBER","body":"@bessbd I think what Jan proposed in https://github.com/apache/couchdb/pull/1253#issuecomment-404873979 is basically done. We've pushed the default limit in 3.x pretty low, and as you know 4.0 changes all the rules.\r\n\r\nI think it is probably safe to close this out, but I'd like to see @janl +1 that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809533234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590329","html_url":"https://github.com/apache/couchdb/issues/4229#issuecomment-1280590329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4229","id":1280590329,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzMjk=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T20:22:59Z","updated_at":"2021-03-29T20:22:59Z","author_association":"MEMBER","body":"We addressed the `-name` portion of this in apache/couchdb-documentation#596.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590351","html_url":"https://github.com/apache/couchdb/issues/4227#issuecomment-1280590351","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4227","id":1280590351,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzNTE=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T20:52:32Z","updated_at":"2021-03-29T20:52:32Z","author_association":"MEMBER","body":"@ceremcem Any progress on this, especially with `3.x`? We're preparing for a 3.2 release, so you've got maybe 2 weeks to get a doc suggestion in before then.\r\n\r\nThe easy thing to do would be recommending the use of `-o autodefrag`; if that is insufficient, we may simply add a \"do not use CouchDB on a BTRFS volume\" warning as a known issue, and leave it at that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809715279","html_url":"https://github.com/apache/couchdb/issues/3472#issuecomment-809715279","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3472","id":809715279,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTcxNTI3OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T21:07:51Z","updated_at":"2021-03-29T21:07:51Z","author_association":"CONTRIBUTOR","body":"Good idea. Those settings are all over the place currently. Some settings like `max_http_request_size` are in httpd section only and are re-used by chttpd handling code.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809715279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590285","html_url":"https://github.com/apache/couchdb/issues/4226#issuecomment-1280590285","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4226","id":1280590285,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAyODU=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T21:33:22Z","updated_at":"2021-03-29T21:33:22Z","author_association":"MEMBER","body":"Guidance from e.g. @tonysun83 or @garrensmith would be useful as to which selectors incur this performance penalty.\r\n\r\nWould love to get this in for 3.2.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590285/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809734364","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-809734364","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":809734364,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTczNDM2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T21:43:42Z","updated_at":"2021-03-29T21:43:42Z","author_association":"MEMBER","body":"I have +1'ed this for 3.2.0... is there any reason it shouldn't land?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809734364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590355","html_url":"https://github.com/apache/couchdb/issues/4227#issuecomment-1280590355","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4227","id":1280590355,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzNTU=","user":{"login":"ceremcem","id":6639874,"node_id":"MDQ6VXNlcjY2Mzk4NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6639874?v=4","gravatar_id":"","url":"https://api.github.com/users/ceremcem","html_url":"https://github.com/ceremcem","followers_url":"https://api.github.com/users/ceremcem/followers","following_url":"https://api.github.com/users/ceremcem/following{/other_user}","gists_url":"https://api.github.com/users/ceremcem/gists{/gist_id}","starred_url":"https://api.github.com/users/ceremcem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ceremcem/subscriptions","organizations_url":"https://api.github.com/users/ceremcem/orgs","repos_url":"https://api.github.com/users/ceremcem/repos","events_url":"https://api.github.com/users/ceremcem/events{/privacy}","received_events_url":"https://api.github.com/users/ceremcem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T21:59:57Z","updated_at":"2021-03-29T21:59:57Z","author_association":"CONTRIBUTOR","body":"Hi @wohali. I just didn't spare time to debug any further. I got the schedule, I'll do my best. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809768501","html_url":"https://github.com/apache/couchdb/pull/3416#issuecomment-809768501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3416","id":809768501,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTc2ODUwMQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T22:49:50Z","updated_at":"2021-03-29T22:50:12Z","author_association":"CONTRIBUTOR","body":"@bessbd  I'd like to get some consensus on this before writing E2E tests. I think the goal is probably just for 4.x for now, but let's see how the discussion develops","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809768501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809842074","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-809842074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":809842074,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTg0MjA3NA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T01:44:02Z","updated_at":"2021-03-30T01:44:40Z","author_association":"CONTRIBUTOR","body":"> I have +1'ed this for 3.2.0... is there any reason it shouldn't land?\r\n\r\nI need to squash it somewhat first, but also not merging it makes Day Job ™️ somewhat easier in the near term. It may be time to bite that bullet though, if it's really needed in 3.2.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809842074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809910564","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-809910564","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":809910564,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTkxMDU2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T05:03:48Z","updated_at":"2021-03-30T05:03:48Z","author_association":"MEMBER","body":"I don't understand... if you can let me know what you mean on IRC or email I'd appreciate it? Not merging something is really confusing. Yes I'd like this in 3.2.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/809910564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810163563","html_url":"https://github.com/apache/couchdb/issues/1497#issuecomment-810163563","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1497","id":810163563,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDE2MzU2Mw==","user":{"login":"yhilem","id":13407261,"node_id":"MDQ6VXNlcjEzNDA3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/13407261?v=4","gravatar_id":"","url":"https://api.github.com/users/yhilem","html_url":"https://github.com/yhilem","followers_url":"https://api.github.com/users/yhilem/followers","following_url":"https://api.github.com/users/yhilem/following{/other_user}","gists_url":"https://api.github.com/users/yhilem/gists{/gist_id}","starred_url":"https://api.github.com/users/yhilem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhilem/subscriptions","organizations_url":"https://api.github.com/users/yhilem/orgs","repos_url":"https://api.github.com/users/yhilem/repos","events_url":"https://api.github.com/users/yhilem/events{/privacy}","received_events_url":"https://api.github.com/users/yhilem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T12:01:32Z","updated_at":"2021-03-30T12:01:32Z","author_association":"NONE","body":"IBM Cloudant supports HTTP/2 : \"HTTP2 support for higher performance connections to IBM Cloudant\" (https://github.com/IBM/cloudant-java-sdk)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810163563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810287068","html_url":"https://github.com/apache/couchdb/pull/3175#issuecomment-810287068","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3175","id":810287068,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDI4NzA2OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T14:07:43Z","updated_at":"2021-03-30T14:07:43Z","author_association":"CONTRIBUTOR","body":"@davisp This has some useful bits mixed with some already committed stuff. Looks like it was auto-rebased by github (`Base automatically changed from feature-ebtree-views to main`?).  Should we rebase it and see what it looks like? The pending tag would nice to have and cleanup of js and quorum tests too.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810287068/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810329620","html_url":"https://github.com/apache/couchdb/issues/2951#issuecomment-810329620","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2951","id":810329620,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDMyOTYyMA==","user":{"login":"Terreii","id":2980750,"node_id":"MDQ6VXNlcjI5ODA3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/2980750?v=4","gravatar_id":"","url":"https://api.github.com/users/Terreii","html_url":"https://github.com/Terreii","followers_url":"https://api.github.com/users/Terreii/followers","following_url":"https://api.github.com/users/Terreii/following{/other_user}","gists_url":"https://api.github.com/users/Terreii/gists{/gist_id}","starred_url":"https://api.github.com/users/Terreii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Terreii/subscriptions","organizations_url":"https://api.github.com/users/Terreii/orgs","repos_url":"https://api.github.com/users/Terreii/repos","events_url":"https://api.github.com/users/Terreii/events{/privacy}","received_events_url":"https://api.github.com/users/Terreii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T14:55:28Z","updated_at":"2021-03-30T14:55:28Z","author_association":"CONTRIBUTOR","body":"I'm happy to report, that I have solved my route block (while mine wasn't as big as in the Suez Canal 🙃).\r\nTurns out that you can't run tests if they are deactivated.\r\n\r\nSo my pull request will be to branch `3.x`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810329620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810337969","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-810337969","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":810337969,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDMzNzk2OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:05:28Z","updated_at":"2021-03-30T15:05:28Z","author_association":"CONTRIBUTOR","body":"It might be nice to squash the 250+ commits to just a few or even one, just from an ergonomic point of view. Most of the commits I don't see us needing to ever check out individually, like say caring that rebar was upgraded in 2011 or handling riak specific checks and such.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810337969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810344773","html_url":"https://github.com/apache/couchdb/pull/3468#issuecomment-810344773","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3468","id":810344773,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM0NDc3Mw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:14:14Z","updated_at":"2021-03-30T15:14:14Z","author_association":"MEMBER","body":"I would be open to downgrading the permissions check to a non-fatal error message. I suspect we could end up with a lot of situations where CouchDB refuses to start but the ability to modify the cluster file is a non-issue; e.g. it's a single-server deployment, or a cluster where the FDB server nodes are co-located with the CouchDB nodes (and likely able to modify the cluster file themselves).\r\n\r\nThe situation we're concerned about is where CouchDB is running as a stateless node and only using the local FDB client to communicate with a remote FDB cluster, _and_ that cluster's coordinators end up changing over time, _and_ there's no out-of-band mechanism to ensure the cluster file gets updated on the CouchDB nodes. It's a fairly sophisticated scenario, and I'd be comfortable with CouchDB logging an error message on startup along with some documentation about the appropriate permissions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810344773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810346328","html_url":"https://github.com/apache/couchdb/issues/1497#issuecomment-810346328","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1497","id":810346328,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM0NjMyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:16:16Z","updated_at":"2021-03-30T15:16:16Z","author_association":"MEMBER","body":"@yhilem Yup, and they also use a proxy in front of CouchDB. This is recommended standard practice. Terminate your HTTP/2 (or QUIC!) SSL connection at e.g. haproxy, then haproxy forwards it on to CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810346328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810359018","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810359018","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810359018,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM1OTAxOA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:32:59Z","updated_at":"2021-03-30T15:32:59Z","author_association":"MEMBER","body":"@bessbd this functionality is used throughout all the fabric2 and couch_views test. I think it's pretty well covered there. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810359018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810364766","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810364766","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810364766,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM2NDc2Ng==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:38:18Z","updated_at":"2021-03-30T15:38:18Z","author_association":"MEMBER","body":"> @bessbd this functionality is used throughout all the fabric2 and couch_views test. I think it's pretty well covered there.\r\n\r\nThat I get. I'd just like to make sure we avoid accidentally (partially) reverting this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810364766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810370749","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810370749","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810370749,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM3MDc0OQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:43:46Z","updated_at":"2021-03-30T15:44:14Z","author_association":"MEMBER","body":"@bessbd could you give me an example?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810370749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810377536","html_url":"https://github.com/apache/couchdb/issues/1752#issuecomment-810377536","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1752","id":810377536,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDM3NzUzNg==","user":{"login":"VG-Fin","id":81638434,"node_id":"MDQ6VXNlcjgxNjM4NDM0","avatar_url":"https://avatars.githubusercontent.com/u/81638434?v=4","gravatar_id":"","url":"https://api.github.com/users/VG-Fin","html_url":"https://github.com/VG-Fin","followers_url":"https://api.github.com/users/VG-Fin/followers","following_url":"https://api.github.com/users/VG-Fin/following{/other_user}","gists_url":"https://api.github.com/users/VG-Fin/gists{/gist_id}","starred_url":"https://api.github.com/users/VG-Fin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VG-Fin/subscriptions","organizations_url":"https://api.github.com/users/VG-Fin/orgs","repos_url":"https://api.github.com/users/VG-Fin/repos","events_url":"https://api.github.com/users/VG-Fin/events{/privacy}","received_events_url":"https://api.github.com/users/VG-Fin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T15:53:05Z","updated_at":"2021-03-30T15:53:05Z","author_association":"NONE","body":"Hi @janl,\r\n\r\nWhen you said \"ensure consistent UUID and consistent http secret accross all nodes in a cluster, so they must be done manually.\"\r\n\r\nSo you basically copied the UUID of your first node to the second one as well as the 'couch_httpd_auth' ? \r\nWhat happen if you add a new node to the cluster and you want to keep the same UUID ? also a simple copy?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810377536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810401262","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810401262","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810401262,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQwMTI2Mg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T16:25:44Z","updated_at":"2021-03-30T16:25:44Z","author_association":"MEMBER","body":"> @bessbd could you give me an example?\r\n\r\nIf I understand correctly, the essence of this PR is https://github.com/apache/couchdb/pull/3481/files#diff-eb8693c8aa6baf90841ed8bc66c04cbc525af0bb34368e3201ab4891b954190eL2157-R2157 . I'd just like to make sure that we don't inadvertently undo that change.\r\nI had no heavy QA in mind, just a single-line eunit `meck`-y check to assert that `couch_mrview:validate` is called at the right time. (We could even assert `couch_index_server:validate` wasn't called, if that's a fundamental part of this change.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810401262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810468180","html_url":"https://github.com/apache/couchdb/pull/3312#issuecomment-810468180","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3312","id":810468180,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ2ODE4MA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:07:28Z","updated_at":"2021-03-30T18:07:28Z","author_association":"CONTRIBUTOR","body":"> It might be nice to squash the 250+ commits to just a few or even one, just from an ergonomic point of view. Most of the commits I don't see us needing to ever check out individually, like say caring that rebar was upgraded in 2011 or handling riak specific checks and such.\r\n\r\nYeah, that's a really good idea. We certainly don't need to keep track of all those early Basho commits!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810468180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810801703","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810801703","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810801703,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDgwMTcwMw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T06:15:32Z","updated_at":"2021-03-31T13:12:54Z","author_association":"CONTRIBUTOR","body":"There are very few places where we need to call `acquire_context/1` and `release_context/1` so I am ok with proposed change. However I wanted to make sure you did consider a different option, which is something like the following:\r\n\r\n```\r\n-module(couch_eval).\r\n\r\n-export([\r\n    ...\r\n-  map_docs/2\r\n+  map_docs/2,\r\n+  with_context/2,\r\n+  try_compile/3\r\n]).\r\n\r\nwith_context(#{language := Language}, Fun) ->\r\n    try acquire_context(Language) of\r\n        {ok, Ctx} -> Fun(Ctx)\r\n    after\r\n        release_context(Ctx)\r\n    end.\r\n    \r\n\r\n%% this would be private function\r\nacquire_context(Language) ->\r\n    ApiMod = get_api_mod(Language),\r\n    {ok, Ctx} = ApiMod:acquire_context(),\r\n    {ok, {ApiMod, Ctx}}.\r\n```\r\n\r\nThen the caller would look like:\r\n\r\n```\r\n-module(couch_mrview).\r\n\r\nvalidate(DbName, _IsDbPartitioned,  DDoc) ->\r\n    ...\r\n    Views =/= [] andalso couch_eval:with_context(#{language => Lang}, fun(Ctx) ->\r\n         lists:foreach(fun(V) -> ValidateView(Ctx, V) end, Views)     \r\n    end),\r\n    ok.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810801703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810852468","html_url":"https://github.com/apache/couchdb/pull/3363#issuecomment-810852468","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3363","id":810852468,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg1MjQ2OA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T07:44:44Z","updated_at":"2021-03-31T07:44:44Z","author_association":"CONTRIBUTOR","body":"I was unable to reproduce the issue on main without the patch. Using database corruption method.\r\n\r\n```\r\nrr(couch_db).\r\nOptions = [{user_ctx, #user_ctx{roles = [<<\"admin\">>]}}, {interactive, true}].\r\n{ok, #{db_prefix := Prefix, tx := Tx} = Db} = fabric2_db:create(<<\"pr-3363\">>, Options).\r\nfabric2_fdb:transactional(Db, fun(#{tx := Tx}) ->  erlfdb:clear_range_startswith(Tx, Prefix) end).\r\n```\r\n\r\n```\r\ncurl -s -u adm:pass http://127.0.0.1:15984/pr-3363/_all_docs | jq '.'\r\n{\r\n  \"error\": \"unknown_error\",\r\n  \"reason\": \"badarg\",\r\n  \"ref\": 1157647193\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810852468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810899027","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-810899027","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":810899027,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg5OTAyNw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T08:55:54Z","updated_at":"2021-03-31T08:55:54Z","author_association":"CONTRIBUTOR","body":"> I had no heavy QA in mind, just a single-line eunit meck-y check to assert that couch_mrview:validate is called at the right time. (We could even assert couch_index_server:validate wasn't called, if that's a fundamental part of this change.)\r\n\r\nSince `couch_index_server:validate/2` is no longer used we could break it and other tests would fail if we partially revert the PR.\r\n\r\n```\r\n-module(couch_index_server).\r\n...\r\nvalidate(_Db, _DDoc) ->\r\n    error({assert, ?MODULE, ?FUNCTION_NAME, ?FUNCTION_ARITY, ?LINE}).\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/810899027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811016853","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-811016853","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":811016853,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTAxNjg1Mw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T12:05:17Z","updated_at":"2021-03-31T12:05:17Z","author_association":"MEMBER","body":"> > I had no heavy QA in mind, just a single-line eunit meck-y check to assert that couch_mrview:validate is called at the right time. (We could even assert couch_index_server:validate wasn't called, if that's a fundamental part of this change.)\r\n> \r\n> Since `couch_index_server:validate/2` is no longer used we could break it and other tests would fail if we partially revert the PR.\r\n> \r\n> ```\r\n> -module(couch_index_server).\r\n> ...\r\n> validate(_Db, _DDoc) ->\r\n>     error({assert, ?MODULE, ?FUNCTION_NAME, ?FUNCTION_ARITY, ?LINE}).\r\n> ```\r\n\r\nI didn't know that `couch_index_server:validate` would become dead code after this change. So we might as well remove the `fun` altogether then, right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811016853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811048201","html_url":"https://github.com/apache/couchdb/pull/3481#issuecomment-811048201","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3481","id":811048201,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTA0ODIwMQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T12:59:45Z","updated_at":"2021-03-31T12:59:45Z","author_association":"MEMBER","body":"@bessbd right. I've deleted the function. I think that is the best approach. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811048201/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811687143","html_url":"https://github.com/apache/couchdb/pull/3486#issuecomment-811687143","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3486","id":811687143,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTY4NzE0Mw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T06:48:28Z","updated_at":"2021-04-01T07:12:03Z","author_association":"MEMBER","body":"I guess I have to open the branch in `apache/couchdb` to get a `main`-like build. Closing this.\r\n\r\nEdit: superseded by https://github.com/apache/couchdb/pull/3488","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811687143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811687833","html_url":"https://github.com/apache/couchdb/pull/3486#issuecomment-811687833","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3486","id":811687833,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTY4NzgzMw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T06:49:51Z","updated_at":"2021-04-01T06:49:51Z","author_association":"MEMBER","body":"This is related to https://github.com/apache/couchdb/issues/3394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811687833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811688071","html_url":"https://github.com/apache/couchdb/pull/3488#issuecomment-811688071","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3488","id":811688071,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTY4ODA3MQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T06:50:22Z","updated_at":"2021-04-01T06:50:22Z","author_association":"MEMBER","body":"This is related to https://github.com/apache/couchdb/issues/3394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811688071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811921994","html_url":"https://github.com/apache/couchdb/pull/3363#issuecomment-811921994","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3363","id":811921994,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTkyMTk5NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T13:49:45Z","updated_at":"2021-04-01T13:49:45Z","author_association":"CONTRIBUTOR","body":"I also tried a different method of reproducing and also unable to trigger the stack trace in the response.\r\n\r\n```\r\n~/dev/couchdb on  main [$?]\r\n❯ curl --user adm:pass -X PUT http://127.0.0.1:15984/pr-3366\r\n{\"ok\":true}\r\n\r\n~/dev/couchdb on  main [$?]\r\n❯ curl --user adm:pass -X GET http://127.0.0.1:15984/pr-3366/_all_docs\r\n{\"total_rows\":0,\"offset\":null,\"rows\":[\r\n\r\n]}\r\n\r\n~/dev/couchdb on  main [$?]\r\n❯ fdbcli --exec 'writemode on; clearrange \"\" \\xFF'\r\n>>> writemode on\r\n>>> clearrange  \\xff\r\nCommitted (9545526301752)\r\n\r\n~/dev/couchdb on  main [$?]\r\n❯ curl --user adm:pass -X GET http://127.0.0.1:15984/pr-3366/_all_docs\r\n{\"error\":\"unknown_error\",\"reason\":\"badarg\",\"ref\":2541622152}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/811921994/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812187029","html_url":"https://github.com/apache/couchdb/issues/3454#issuecomment-812187029","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3454","id":812187029,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjE4NzAyOQ==","user":{"login":"afsanjar","id":20330452,"node_id":"MDQ6VXNlcjIwMzMwNDUy","avatar_url":"https://avatars.githubusercontent.com/u/20330452?v=4","gravatar_id":"","url":"https://api.github.com/users/afsanjar","html_url":"https://github.com/afsanjar","followers_url":"https://api.github.com/users/afsanjar/followers","following_url":"https://api.github.com/users/afsanjar/following{/other_user}","gists_url":"https://api.github.com/users/afsanjar/gists{/gist_id}","starred_url":"https://api.github.com/users/afsanjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afsanjar/subscriptions","organizations_url":"https://api.github.com/users/afsanjar/orgs","repos_url":"https://api.github.com/users/afsanjar/repos","events_url":"https://api.github.com/users/afsanjar/events{/privacy}","received_events_url":"https://api.github.com/users/afsanjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T21:39:53Z","updated_at":"2021-04-01T21:39:53Z","author_association":"NONE","body":"Update: @nickva and I have finalized a plan to enable Power CI/CD without\nany change to the existing CI/CD structure.\n We will address the last hurdle tomorrow.\n\nOn Thu, Mar 25, 2021 at 3:22 PM Nick Vatamaniuc ***@***.***>\nwrote:\n\n> @afsanjar <https://github.com/afsanjar> It would be ideal it the ppc\n> nodes could be added again to the existing (functional) cloud.ibm.com\n> account we're already using. The Ansible script would make it easy to\n> manage all the nodes together.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/3454#issuecomment-807416688>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AE3DPVECOQKDW2W3ZPZBAG3TFOLPJANCNFSM4ZWBGD4A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812187029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812715247","html_url":"https://github.com/apache/couchdb/pull/3488#issuecomment-812715247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3488","id":812715247,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcxNTI0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:04:44Z","updated_at":"2021-04-02T21:04:44Z","author_association":"CONTRIBUTOR","body":"@bessbd I thought we could do a slightly more thorough check for the max string only in C right before we call the collator code https://github.com/apache/couchdb/pull/3490","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812715247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812715895","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-812715895","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":812715895,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcxNTg5NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:06:40Z","updated_at":"2021-04-02T21:06:40Z","author_association":"CONTRIBUTOR","body":"It was interesting that we didn't hit this issue on CentOS 7 on 3.x so I was curious and traced the `less` call when running that mango test:\r\n\r\n```\r\n10:9:04.429561 <0.11140.1> couch_ejson_compare:less_nif([{<<\"ÿÿÿÿ\">>}], [{[{<<\"forename\">>,<<\"Eddie\">>}]}])\r\n\r\n10:9:04.429783 <0.11140.1> couch_ejson_compare:less_nif/2 error badarg\r\n\r\n10:9:04.429984 <0.11140.1> couch_ejson_compare:less_erl([{<<\"ÿÿÿÿ\">>}], [{[{<<\"forename\">>,<<\"Eddie\">>}]}])\r\n\r\n10:9:04.430254 <0.11140.1> couch_ejson_compare:less_list([{<<\"ÿÿÿÿ\">>}], [{[{<<\"forename\">>,<<\"Eddie\">>}]}])\r\n\r\n10:9:04.430506 <0.11140.1> couch_ejson_compare:less_erl({<<\"ÿÿÿÿ\">>}, {[{<<\"forename\">>,<<\"Eddie\">>}]})\r\n\r\n10:9:04.430745 <0.11140.1> couch_ejson_compare:less_erl/2 --> 1\r\n\r\n10:9:04.430903 <0.11140.1> couch_ejson_compare:less_list/2 --> 1\r\n\r\n10:9:04.431088 <0.11140.1> couch_ejson_compare:less_erl/2 --> 1\r\n```\r\n\r\nApparently in `3.x` we compare an object `{[{<<\"forename\">>,<<\"Eddie\">>}]}` against a (highest?) marker, but that marker is not an object but a tuple with one element `{<<\"ÿÿÿÿ\">>}`. `less_nif/2` then notices the object is not valid ejson and throws a `badarg` error.  The the code then falls back to Erlang using `less_erl/2` and at least in this case return the correct result (highest marker is greater than (`1`) than the object).\r\n\r\nIn `main` we compare against an actual object `{[{<<\"ÿÿÿÿ\">>, <<>>}]}` so everything gets unpacked nicely then the old unicode library at least older than 59 (and possible 53) didn't error out, but also didn't sort the `<<255,255,255,255>>` as the highest element as intended. Here is centos 7 with libicu-50.2-4.el7_7.x86_64, for example\r\n```\r\ncouch_ejson_compare:less(<<\"forename\">>, <<255,255,255,255>>).\r\n1\r\n> couch_ejson_compare:less(<<\"/\">>, <<255,255,255,255>>).\r\n-1\r\n> couch_ejson_compare:less(<<\"0\">>, <<255,255,255,255>>).\r\n1\r\n```\r\n\r\nand on mac os with icu4c 59:\r\n```\r\n> couch_ejson_compare:less(<<\"forename\">>, <<255,255,255,255>>).\r\n-1\r\n> couch_ejson_compare:less(<<\"/\">>, <<255,255,255,255>>).\r\n-1\r\n> couch_ejson_compare:less(<<\"0\">>, <<255,255,255,255>>).\r\n-1\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812715895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812716570","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-812716570","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":812716570,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcxNjU3MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:08:47Z","updated_at":"2021-04-02T21:44:17Z","author_association":"CONTRIBUTOR","body":"I have an alternative fix that should be a bit more general https://github.com/apache/couchdb/pull/3490 to fix the above issue","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812716570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812719590","html_url":"https://github.com/apache/couchdb/issues/3394#issuecomment-812719590","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3394","id":812719590,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcxOTU5MA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:16:55Z","updated_at":"2021-04-02T21:16:55Z","author_association":"MEMBER","body":"Thank you for taking the time and doing the investigation, @nickva !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812719590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812721292","html_url":"https://github.com/apache/couchdb/pull/3490#issuecomment-812721292","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3490","id":812721292,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcyMTI5Mg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:21:01Z","updated_at":"2021-04-02T22:05:56Z","author_association":"MEMBER","body":"Thank you for this PR, @nickva !\r\nWhen I opened https://github.com/apache/couchdb/pull/3488/commits/4bccaa576a3d56912286e80dafb45e9bf43a137e , my thought was that the sentinel value(s) should never actually be passed to \"low level\" code. Ie. it's a nice thing that those sentinels could actually be items that \"order well\", but they aren't items that are to be compared with others.\r\nHaving said that, I'd be +1 on this change, too.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812721292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812723151","html_url":"https://github.com/apache/couchdb/pull/3488#issuecomment-812723151","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3488","id":812723151,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcyMzE1MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:27:03Z","updated_at":"2021-04-02T21:30:03Z","author_association":"CONTRIBUTOR","body":"I thought of making it bit more general since noticed we'd have to handle perhaps `less({[?MAX_JSON_OBJ], _}, _) -> gt` and maybe also `{[?MAX_JSON_OBJ], _}, {[?MAX_JSON_OBJ], _} -> eq`. The one clause would work currently as is,  but, if we change the logic in the future it might get an unexpected failure. Then there is also the `?HIGHEST_KEY` macro which I think is not used in `main` but it may be one day before CentOS 7 is retired and it would unexpectedly fail as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812723151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812723352","html_url":"https://github.com/apache/couchdb/pull/3416#issuecomment-812723352","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3416","id":812723352,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcyMzM1Mg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T21:27:44Z","updated_at":"2021-04-02T21:27:44Z","author_association":"MEMBER","body":"> @bessbd I'd like to get some consensus on this before writing E2E tests.\r\n\r\nSure, that works too!\r\nFor me personally it's easier to start with the tests when reviewing a PR. That's like a best description of what's happening in a change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812723352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812734598","html_url":"https://github.com/apache/couchdb/pull/3488#issuecomment-812734598","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3488","id":812734598,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjczNDU5OA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T22:05:21Z","updated_at":"2021-04-02T22:05:21Z","author_association":"MEMBER","body":"> @bessbd I thought we could do a slightly more thorough check for the max string only in C right before we call the collator code #3490\r\n\r\nI responded over at https://github.com/apache/couchdb/pull/3490#issuecomment-812721292","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812734598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812891475","html_url":"https://github.com/apache/couchdb/pull/3490#issuecomment-812891475","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3490","id":812891475,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjg5MTQ3NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-03T16:44:03Z","updated_at":"2021-04-03T20:55:00Z","author_association":"CONTRIBUTOR","body":"I left a more complete response in https://github.com/apache/couchdb/pull/3488#issuecomment-812723151 but the idea is it's a bit more general and works along the lines of how current libicu version does (treating `FFFF `as special), so when we stop supporting CentOS 7 we can remove just that one max handling section and let libicu do the right thing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/812891475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813034902","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-813034902","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":813034902,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzAzNDkwMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-04T13:38:26Z","updated_at":"2021-04-04T18:00:06Z","author_association":"MEMBER","body":"Added `erlang_version` and `javascript_version` to our welcome message:\r\n\r\n```\r\n{\r\n  \"couchdb\": \"Welcome\",\r\n  \"version\": \"3.1.1-813ecd4-dirty\",\r\n  \"git_sha\": \"813ecd4\",\r\n  \"erlang_version\": \"23.2.7\",\r\n  \"javascript_engine\": {\r\n    \"name\": \"spidermonkey\",\r\n    \"version\": 86\r\n  },\r\n  \"uuid\": \"fake_uuid_for_dev\",\r\n  \"features\": [\r\n    \"access-ready\",\r\n    \"partitioned\",\r\n    \"pluggable-storage-engines\",\r\n    \"reshard\",\r\n    \"scheduler\"\r\n  ],\r\n  \"vendor\": {\r\n    \"name\": \"The Apache Software Foundation\"\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813034902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813037271","html_url":"https://github.com/apache/couchdb/pull/3483#issuecomment-813037271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3483","id":813037271,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzAzNzI3MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-04T13:53:35Z","updated_at":"2021-04-04T13:53:35Z","author_association":"MEMBER","body":"this is neat, let’s get it into 3.2.0 :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813037271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590128","html_url":"https://github.com/apache/couchdb/issues/4225#issuecomment-1280590128","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4225","id":1280590128,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAxMjg=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T03:18:17Z","updated_at":"2021-04-05T03:18:17Z","author_association":"MEMBER","body":"No, the code has bitrotted, it is 8+ years old. The `bulk_docs` operation would have to have `\"new_edits\": false` added prior to the `docs` array to create those conflicts.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813563345","html_url":"https://github.com/apache/couchdb/pull/3490#issuecomment-813563345","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3490","id":813563345,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzU2MzM0NQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T18:33:38Z","updated_at":"2021-04-05T18:35:35Z","author_association":"MEMBER","body":"> I left a more complete response in [#3488 (comment)](https://github.com/apache/couchdb/pull/3488#issuecomment-812723151) but the idea is it's a bit more general and works along the lines of how current libicu version does (treating `FFFF `as special), so when we stop supporting CentOS 7 we can remove just that one max handling section and let libicu do the right thing.\r\n\r\nI still don't get why (lower level) C code should be aware of a specific higher level (marker) constant (in erlang - caller code). - https://github.com/apache/couchdb/pull/3490/files#diff-e07aa2cf62bca24d714bb7b5d125f77a906db4145a60672e532e27a324b7dcf7R69-R73 . Sounds like a Separation of concerns violation.\r\n\r\nNevertheless, I'm confident that we're better off with this PR merged than without. +1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813563345/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813905192","html_url":"https://github.com/apache/couchdb/issues/1530#issuecomment-813905192","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1530","id":813905192,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzkwNTE5Mg==","user":{"login":"meSmashsta","id":12151336,"node_id":"MDQ6VXNlcjEyMTUxMzM2","avatar_url":"https://avatars.githubusercontent.com/u/12151336?v=4","gravatar_id":"","url":"https://api.github.com/users/meSmashsta","html_url":"https://github.com/meSmashsta","followers_url":"https://api.github.com/users/meSmashsta/followers","following_url":"https://api.github.com/users/meSmashsta/following{/other_user}","gists_url":"https://api.github.com/users/meSmashsta/gists{/gist_id}","starred_url":"https://api.github.com/users/meSmashsta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meSmashsta/subscriptions","organizations_url":"https://api.github.com/users/meSmashsta/orgs","repos_url":"https://api.github.com/users/meSmashsta/repos","events_url":"https://api.github.com/users/meSmashsta/events{/privacy}","received_events_url":"https://api.github.com/users/meSmashsta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T07:45:17Z","updated_at":"2021-04-07T08:58:36Z","author_association":"NONE","body":"Guys you can use existing libraries that implements Erlang's term format (https://erlang.org/doc/apps/erts/erl_ext_dist.html), such as:\r\n\r\nhttps://www.npmjs.com/package/bert-elixir\r\nhttps://www.npmjs.com/package/erlang\r\nhttps://github.com/okeuday/erlang_js","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/813905192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814017001","html_url":"https://github.com/apache/couchdb/pull/3488#issuecomment-814017001","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3488","id":814017001,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDAxNzAwMQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T10:38:26Z","updated_at":"2021-04-06T10:38:26Z","author_association":"MEMBER","body":"Superseded by https://github.com/apache/couchdb/pull/3490","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814017001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814159145","html_url":"https://github.com/apache/couchdb/pull/3483#issuecomment-814159145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3483","id":814159145,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE1OTE0NQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:18:59Z","updated_at":"2021-04-06T14:18:59Z","author_association":"MEMBER","body":"Once this is merged, I think it needs a docs update. @Terreii : are you interested in opening a PR for docs, too?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814159145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814176545","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-814176545","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":814176545,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE3NjU0NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:41:14Z","updated_at":"2021-04-06T14:41:14Z","author_association":"CONTRIBUTOR","body":"@janl looks good, I like having the extra info in there.  But am wondering, since this is changing the top level API, if we should do a mailing list shout-out. I anticipate there being some resistance around \"security\" aspects or others may have other opinions on the shape of the results.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814176545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814180985","html_url":"https://github.com/apache/couchdb/pull/3260#issuecomment-814180985","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3260","id":814180985,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE4MDk4NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:46:32Z","updated_at":"2021-04-06T14:46:32Z","author_association":"CONTRIBUTOR","body":"This is a nice PR to have. I will test with with buggify mode enabled and with some of the recent fixes to handle multiple-responses reverted (to validate that we get nicer error than retransmitted responses when they happen).\r\n\r\n@bessbd may not apply to 3.x as much as don't usually retry top level request handling closures","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814180985/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814183119","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-814183119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":814183119,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE4MzExOQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:49:20Z","updated_at":"2021-04-06T14:49:20Z","author_association":"MEMBER","body":"knowing some folks (*cough* IBM *cough*) would likely prefer not to reveal more version numbers, can we consider a config toggle?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814183119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814183648","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-814183648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":814183648,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE4MzY0OA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:49:59Z","updated_at":"2021-04-06T14:49:59Z","author_association":"MEMBER","body":"and noting that the OTP version comes back in the Server response header already.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814183648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814186183","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-814186183","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":814186183,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE4NjE4Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T14:53:22Z","updated_at":"2021-04-06T14:53:22Z","author_association":"MEMBER","body":"@nickva sure thing, will do\r\n\r\n@rnewson happy to add a `ibm_security_through_obscurity` toggle ;)\r\n\r\nRe the OTP version:\r\n\r\n1. we only send the major version, but that’s often not enough\r\n2. I opted against updating the `Server` header with more bytes that will always be the same for an installation.\r\n  - I’d rather add an option to disable the header and save the bytes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814186183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814197028","html_url":"https://github.com/apache/couchdb/pull/3425#issuecomment-814197028","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3425","id":814197028,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDE5NzAyOA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T15:07:18Z","updated_at":"2021-04-06T15:07:18Z","author_association":"MEMBER","body":"Ideally we'd address these things together. there are a few spots where couchdb shows \"internal\" information that is strictly unrelated to its role as a database (the couchdb version, erlang version, spidermonkey version, erlang node names, pids, etc).\r\n\r\nI agree that hiding version numbers is a \"security through obscurity\" approach but I can't be the only person who has to regularly defend their presence in audits, etc. In my situation, I can and do argue that the couchdb version number signals _compatibility_ and does not necessary mean we're running that verbatim code.\r\n\r\nAll this to say, perhaps it is time for a new admin-only endpoint into which we can put all the internal details instead. It is clearly useful to be able to interrogate the various version numbers through the http api, but users don't need that.\r\n\r\nFor the welcome message, I suggest showing something of value to users, namely \"ES5\" versus \"ES6\".\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/814197028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]