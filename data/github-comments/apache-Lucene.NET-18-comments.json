[{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1344250385","html_url":"https://github.com/apache/lucenenet/issues/778#issuecomment-1344250385","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/778","id":1344250385,"node_id":"IC_kwDOAAJ06c5QH6IR","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T12:31:42Z","updated_at":"2022-12-09T12:36:52Z","author_association":"CONTRIBUTOR","body":"That is correct for the most part. There have been several newer issues added that don't have a 4.8.0 milestone that probably should, though.\r\n\r\nTrying to determine exactly what is blocking the release requires analysis to work out, which makes a list like that a lot of work to maintain. For sure we have a blocker if:\r\n\r\n1. The solution to the issue requires a [breaking API change](https://learn.microsoft.com/en-us/dotnet/standard/library-guidance/breaking-changes#source-breaking-change). See [Changes that affect compatibility](https://learn.microsoft.com/en-us/dotnet/core/compatibility/).\r\n2. The solution to the issue requires a [breaking behavioral change](https://learn.microsoft.com/en-us/dotnet/standard/library-guidance/breaking-changes#behavior-breaking-change).\r\n3. It is a high priority bug\r\n\r\n> NOTE: In general, we shouldn't have any breaking binary changes because for the most part we are using the same binary formats as Lucene. That said, there is an open task to add [tests to verify 2-way compatibility](https://github.com/apache/lucenenet/issues/270), as this hasn't been run for several years and there have been a large number of changes since then.\r\n\r\nIf the feature requires an additive change, it can generally wait unless the priority is high (normal and low priority are not blockers, but are \"could haves\" that would be accepted if submitted as PRs).\r\n\r\n[Reviewing tests](https://github.com/apache/lucenenet/issues/259) is blocking the release. The tests we have reviewed so far have revealed that we are missing asserts and other test features. They have also revealed several other usability issues that need to be addressed, and I suspect the review may bring up a few more of those issues.\r\n\r\nAnd of course, making [ICU4N](https://github.com/NightOwl888/ICU4N) stable is also still a blocker (unless we opt to delay release of everything that depends on it). All of our other dependencies are stable, but some have up-for-grabs tasks that would be nice additions to have. For example, neither ICU4N or J2N have API documentation websites even though the APIs are extensively documented as XML doc comments. I suspect if we had documentation, people would be more likely to find and report behaviors that conflict with the documentation (i.e. bugs). So, while the documentation is not blocking the release, adding it would help us track down issues that may be.\r\n\r\nIn general, anything that is using the [Future milestone](https://github.com/apache/lucenenet/milestone/4) can wait until after the release.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1344250385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1345632056","html_url":"https://github.com/apache/lucenenet/issues/779#issuecomment-1345632056","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/779","id":1345632056,"node_id":"IC_kwDOAAJ06c5QNLc4","user":{"login":"jeme","id":1609615,"node_id":"MDQ6VXNlcjE2MDk2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/1609615?v=4","gravatar_id":"","url":"https://api.github.com/users/jeme","html_url":"https://github.com/jeme","followers_url":"https://api.github.com/users/jeme/followers","following_url":"https://api.github.com/users/jeme/following{/other_user}","gists_url":"https://api.github.com/users/jeme/gists{/gist_id}","starred_url":"https://api.github.com/users/jeme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeme/subscriptions","organizations_url":"https://api.github.com/users/jeme/orgs","repos_url":"https://api.github.com/users/jeme/repos","events_url":"https://api.github.com/users/jeme/events{/privacy}","received_events_url":"https://api.github.com/users/jeme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-11T19:06:26Z","updated_at":"2022-12-11T19:06:26Z","author_association":"CONTRIBUTOR","body":"Most/all issues from the Lucene (Java) version that has been fixed later than v4.8 will obviously be in this v. of Lucene.NET as it targets that version (v4.8) - since that issue is marked as fixed in 9.0, it's a given that it affects Lucene.NET as is.\r\n\r\nNot sure what the procedure for that is here.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1345632056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1345793948","html_url":"https://github.com/apache/lucenenet/issues/437#issuecomment-1345793948","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/437","id":1345793948,"node_id":"IC_kwDOAAJ06c5QNy-c","user":{"login":"Varorbc","id":5714438,"node_id":"MDQ6VXNlcjU3MTQ0Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/5714438?v=4","gravatar_id":"","url":"https://api.github.com/users/Varorbc","html_url":"https://github.com/Varorbc","followers_url":"https://api.github.com/users/Varorbc/followers","following_url":"https://api.github.com/users/Varorbc/following{/other_user}","gists_url":"https://api.github.com/users/Varorbc/gists{/gist_id}","starred_url":"https://api.github.com/users/Varorbc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Varorbc/subscriptions","organizations_url":"https://api.github.com/users/Varorbc/orgs","repos_url":"https://api.github.com/users/Varorbc/repos","events_url":"https://api.github.com/users/Varorbc/events{/privacy}","received_events_url":"https://api.github.com/users/Varorbc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T03:00:25Z","updated_at":"2022-12-12T03:00:25Z","author_association":"NONE","body":"@NightOwl888 any update?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1345793948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1346748338","html_url":"https://github.com/apache/lucenenet/issues/780#issuecomment-1346748338","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/780","id":1346748338,"node_id":"IC_kwDOAAJ06c5QRb-y","user":{"login":"chenhh021","id":26926033,"node_id":"MDQ6VXNlcjI2OTI2MDMz","avatar_url":"https://avatars.githubusercontent.com/u/26926033?v=4","gravatar_id":"","url":"https://api.github.com/users/chenhh021","html_url":"https://github.com/chenhh021","followers_url":"https://api.github.com/users/chenhh021/followers","following_url":"https://api.github.com/users/chenhh021/following{/other_user}","gists_url":"https://api.github.com/users/chenhh021/gists{/gist_id}","starred_url":"https://api.github.com/users/chenhh021/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenhh021/subscriptions","organizations_url":"https://api.github.com/users/chenhh021/orgs","repos_url":"https://api.github.com/users/chenhh021/repos","events_url":"https://api.github.com/users/chenhh021/events{/privacy}","received_events_url":"https://api.github.com/users/chenhh021/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T15:44:18Z","updated_at":"2022-12-12T15:44:18Z","author_association":"CONTRIBUTOR","body":"PR created.  It doesn't port the whole Lucene patch where a new base class was created, but applies minimum change solve the problem.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1346748338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1346762144","html_url":"https://github.com/apache/lucenenet/issues/779#issuecomment-1346762144","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/779","id":1346762144,"node_id":"IC_kwDOAAJ06c5QRfWg","user":{"login":"chenhh021","id":26926033,"node_id":"MDQ6VXNlcjI2OTI2MDMz","avatar_url":"https://avatars.githubusercontent.com/u/26926033?v=4","gravatar_id":"","url":"https://api.github.com/users/chenhh021","html_url":"https://github.com/chenhh021","followers_url":"https://api.github.com/users/chenhh021/followers","following_url":"https://api.github.com/users/chenhh021/following{/other_user}","gists_url":"https://api.github.com/users/chenhh021/gists{/gist_id}","starred_url":"https://api.github.com/users/chenhh021/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenhh021/subscriptions","organizations_url":"https://api.github.com/users/chenhh021/orgs","repos_url":"https://api.github.com/users/chenhh021/repos","events_url":"https://api.github.com/users/chenhh021/events{/privacy}","received_events_url":"https://api.github.com/users/chenhh021/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T15:49:38Z","updated_at":"2022-12-12T15:49:38Z","author_association":"CONTRIBUTOR","body":"Anyway, I think a PR will act as a good reference for someone meet the same problem, so I'm working for one.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1346762144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1354767743","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1354767743","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1354767743,"node_id":"IC_kwDOAAJ06c5QwB1_","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T13:29:51Z","updated_at":"2022-12-16T13:35:25Z","author_association":"CONTRIBUTOR","body":"Hello @NightOwl888, I find this is interesting to me I could like to work on this issue. Totally new for FTS, Thanks!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1354767743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355221633","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1355221633","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1355221633,"node_id":"IC_kwDOAAJ06c5QxwqB","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T17:01:02Z","updated_at":"2022-12-16T17:01:02Z","author_association":"CONTRIBUTOR","body":"@Jeevananthan-23  Thanks for volunteering to tackle this.  In general we try to port the Java code to .NET as literally as possible while also adhering to standard .NET coding conventions.  \r\n\r\nThis unit test will need to be ported a bit less literally then most code since it's written to test that Lucene handles a JRE crash without corrupting the index.  While we don't have a JRE in .NET, the analogous thing to test would be to test that the index does not get corrupted if the Lucene thread is terminated at a random interval.  \r\n\r\nThis could be accomplished by 1) running the Lucene code on a different thread then the unit test and then terminating the Lucene thread after a random time period or 2) by having the test launch a separate process (which will of course inherently has a thread) that runs Lucene and then killing that process after a random interval.  \r\n\r\nEither approach would probably work fine.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355221633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355228404","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1355228404","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1355228404,"node_id":"IC_kwDOAAJ06c5QxyT0","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T17:06:27Z","updated_at":"2022-12-16T17:06:27Z","author_association":"CONTRIBUTOR","body":"Hi @Jeevananthan-23. Thanks for volunteering.\r\n\r\nI don't believe that .NET has a built-in \"crash\" function that can be executed from the outside of a process like Java does, so we will need to change the approach. My thought is to do something along the lines of:\r\n\r\n1. Have the test generate the C# code to create a basic console app that runs 2 threads.\r\n   a. Thread 1 will execute the code in the `TestNRTThreads.TestNRTThreads_Mem()` method up to 10 times. This test should be modified to check for the directory to create the index in from an environment variable, and if the environment variable isn't passed to proceed with a random index directory as it currently does.\r\n   b. Thread 2 will sleep for a random number of milliseconds (between 3000 and 4000) and then throw an uncaught exception. This will crash the application on .NET Core. Inherit`ThreadJob` to make the thread, similar to how they are done in Java. `ThreadJob` automatically re-throws the exception when you call `Join`, which if we leave uncaught will also crash on .NET Framework.\r\n2. The test would use `System.Diagnostics.Process` to call `dotnet run` to compile and run the console app. It should attach an in-memory listener to STDERR so it can confirm that an error occurred.\r\n3. The test should create a random temp directory name and pass the name to the console app using the `EnvironmentVariables `property of `System.Diagnostics.Process.StartInfo`.\r\n4. The test will wait for the process to exit before proceeding.\r\n5. Once it has exited, the test should check to ensure the output of STDERR has a length greater than 0.\r\n6. Next, proceed with the original `checkIndexes(tempDir)` test with the directory that was created in step 3.\r\n\r\nOf course, if during your research you think you have found another approach that works, you can modify it accordingly. But please use the original `TestNRTThreads.TestNRTThreads_Mem()` and `checkIndexes(tempDir)` to generate the index and check to see that it is not corrupted.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355228404/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355952643","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1355952643","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1355952643,"node_id":"IC_kwDOAAJ06c5Q0jID","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T02:03:29Z","updated_at":"2022-12-17T02:03:29Z","author_association":"CONTRIBUTOR","body":"Actually, after thinking this through a bit more, rather than wiring up a new console app, it makes more sense to simply fire up `dotnet test` and point it to the assembly that has the test in it with an [NUnit filter](https://docs.nunit.org/articles/nunit/running-tests/Test-Selection-Language.html) to only run the one test. The test framework extends NUnit and contains a lot of plumbing that will be required to get test to set up properly so this will save a lot of work.\r\n\r\nWe don't need to dynamically compile anything because the project this test is in contains the test we need to run. So by the time we run the test there is already a DLL file that we can pass to `dotnet test` to run. The test just needs to use the assembly that it is in to get the full path of the DLL file to execute. See https://stackoverflow.com/a/52956.\r\n\r\nAs for target framework, we have another test where we have done that already.\r\n\r\n- [InstallationTest](https://github.com/apache/lucenenet/blob/c0c480409e2d3424fbdcc563426c66cacbf72632/src/dotnet/tools/Lucene.Net.Tests.Cli/InstallationTest.cs#L123-L129) reads a custom `MetaDataAttribute` where the moniker for the current target framework is compiled into the assembly.\r\n- The build adds the `MetaDataAttribute` [here](https://github.com/apache/lucenenet/blob/c0c480409e2d3424fbdcc563426c66cacbf72632/src/dotnet/tools/Lucene.Net.Tests.Cli/Lucene.Net.Tests.Cli.csproj#L52-L58). Simply use the same approach in the `Lucene.Net.Tests._I-J.csproj` file.\r\n\r\nThe above test also has an example of using `System.Diagnostics.Process` to launch an external command.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355952643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355954120","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1355954120","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1355954120,"node_id":"IC_kwDOAAJ06c5Q0jfI","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T02:08:57Z","updated_at":"2022-12-17T02:08:57Z","author_association":"CONTRIBUTOR","body":"Of course, we still would need a second thread to kill the process, so we can use a similar approach as in Java and just subclass the original test to run and execute that test in the 2nd process. It can use the environment variable that is passing the directory of the index to determine whether it is the original test or the one that is spawned from the original.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1355954120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1356351250","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1356351250","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1356351250,"node_id":"IC_kwDOAAJ06c5Q2EcS","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T17:41:41Z","updated_at":"2022-12-17T17:42:51Z","author_association":"CONTRIBUTOR","body":"Sounds Challenging to me let me dive deep into it🤿. Thank you for your explanation!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1356351250/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1358694734","html_url":"https://github.com/apache/lucenenet/issues/784#issuecomment-1358694734","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/784","id":1358694734,"node_id":"IC_kwDOAAJ06c5Q_AlO","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T01:02:35Z","updated_at":"2022-12-20T01:02:35Z","author_association":"CONTRIBUTOR","body":"`RAMBufferSizeMB` is for *increasing* the amount of allocations to improve performance when indexing a large number documents, as pointed out in [the demo](https://github.com/apache/lucenenet/blob/master/src/Lucene.Net.Demo/IndexFiles.cs#L103-L107).\r\n\r\n`RAMPerThreadHardLimitMB` controls how frequently a background flush will occur.\r\n\r\nBoth of these settings are fully implemented and a flush will cause Lucene.NET to release the references. But at the end of the day, the garbage collector is in charge after the references have been released by Lucene.NET.\r\n\r\nSee [Fundamentals of garbage collection](https://learn.microsoft.com/en-us/dotnet/standard/garbage-collection/fundamentals)\r\n\r\nWhile it is generally discouraged to run a garbage collection yourself, .NET does provide a [GC.Collect](https://learn.microsoft.com/en-us/dotnet/api/system.gc.collect?view=net-7.0) method to explicitly force a garbage collection. If you run the garbage collector and the amount of RAM doesn't decrease, then perhaps we have an issue.\r\n\r\nHowever, do keep in mind that the debugger in Visual Studio adds a lot of memory overhead that won't be seen in production.\r\n\r\n> **NOTE**: If this is a .NET Framework app or your app is using the .NET Standard 2.0 target of Lucene.NET, there may be another reason for this. The `ConditionalWeakTable<TKey, TValue>` is missing an enumerator prior to .NET Standard 2.1, which is required in several places by Lucene. We [worked around the issue using weak events](https://github.com/apache/lucenenet/pull/613), but at the end of the day `WeakReference` holds onto references longer than `ConditionalWeakTable<TKey, TValue>`. In these cases, not even calling `GC.Collect` can recover the memory, the only option is to wait for the memory to be released.\r\n>\r\n> There is another option using [WPF WeakEventManager](https://learn.microsoft.com/en-us/dotnet/desktop/wpf/events/weak-event-patterns?view=netdesktop-6.0) that uses `ConditionalWeakTable<TKey, TValue>` plus some native code to resolve the issue, but since there is no support for this on .NET Standard 2.0, we didn't explore this option any further. But since we are now considering dropping support for .NET Standard 2.0 anyway, perhaps it is worth another look.\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1358694734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359096876","html_url":"https://github.com/apache/lucenenet/issues/784#issuecomment-1359096876","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/784","id":1359096876,"node_id":"IC_kwDOAAJ06c5RAiws","user":{"login":"PeterOeClausen","id":6975621,"node_id":"MDQ6VXNlcjY5NzU2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6975621?v=4","gravatar_id":"","url":"https://api.github.com/users/PeterOeClausen","html_url":"https://github.com/PeterOeClausen","followers_url":"https://api.github.com/users/PeterOeClausen/followers","following_url":"https://api.github.com/users/PeterOeClausen/following{/other_user}","gists_url":"https://api.github.com/users/PeterOeClausen/gists{/gist_id}","starred_url":"https://api.github.com/users/PeterOeClausen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PeterOeClausen/subscriptions","organizations_url":"https://api.github.com/users/PeterOeClausen/orgs","repos_url":"https://api.github.com/users/PeterOeClausen/repos","events_url":"https://api.github.com/users/PeterOeClausen/events{/privacy}","received_events_url":"https://api.github.com/users/PeterOeClausen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T09:51:51Z","updated_at":"2022-12-20T09:53:51Z","author_association":"NONE","body":"Thanks for the response.\r\nCalling `GC.Collect()` doesn't help either.\r\nLoading the data, and creating the 54326 documents does not increase memory usage significantly. Memory jumps when I add the documents using either `writer.AddDocuments(docs);` or `writer.AddDocument(doc);`\r\nI've even tried creating a seperate method:\r\n```cs\r\n        private void WriteDocuments(IEnumerable<IEnumerable<IIndexableField>> docs)\r\n        {\r\n            using var analyzer = new KeywordAnalyzer();\r\n            using var directory = FSDirectory.Open(IndexPath);\r\n            var config = new IndexWriterConfig(LuceneVersion, analyzer)\r\n            {\r\n                OpenMode = OpenMode.CREATE, // Use OpenMode.CREATE to overwrite, or OpenMode.APPEND to just open\r\n                RAMBufferSizeMB = 100,\r\n                RAMPerThreadHardLimitMB = 100,\r\n            };\r\n\r\n            using var writer = new IndexWriter(directory, config);\r\n            foreach (var doc in docs)\r\n            {\r\n                writer.AddDocument(doc);\r\n            }\r\n            writer.Commit();\r\n            writer.Dispose();\r\n            directory.Dispose();\r\n            analyzer.Dispose();\r\n        }\r\n```\r\nAnd calling `GC.Collect()` afterwards - no effect.\r\n\r\nWe're currently running this in a Singleton service in an Umbraco 10 project - both the Umbraco project, and the project the search is in targets `net6.0`. We are not using `.NET Standard 2.0`. We also have no global variables, so GC should be able to pick up the objects no longer in use.\r\n\r\nAlso we're using `LuceneVersion.LUCENE_48`.\r\n\r\nI think the next thing I want to try out is running it in a Console App, outside of Umbraco, and see how memory behaves with 54326 documents with similar search fields.\r\n\r\nI'll write again on what I'll find.\r\n\r\nIt seems weird to me that the NuGet package is so popular (18,671,634 total downloads) - yet I couldn't find anyone else reporting on memory issues... It might be our setup - will investigate :-)","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359096876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359280385","html_url":"https://github.com/apache/lucenenet/issues/784#issuecomment-1359280385","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/784","id":1359280385,"node_id":"IC_kwDOAAJ06c5RBPkB","user":{"login":"PeterOeClausen","id":6975621,"node_id":"MDQ6VXNlcjY5NzU2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6975621?v=4","gravatar_id":"","url":"https://api.github.com/users/PeterOeClausen","html_url":"https://github.com/PeterOeClausen","followers_url":"https://api.github.com/users/PeterOeClausen/followers","following_url":"https://api.github.com/users/PeterOeClausen/following{/other_user}","gists_url":"https://api.github.com/users/PeterOeClausen/gists{/gist_id}","starred_url":"https://api.github.com/users/PeterOeClausen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PeterOeClausen/subscriptions","organizations_url":"https://api.github.com/users/PeterOeClausen/orgs","repos_url":"https://api.github.com/users/PeterOeClausen/repos","events_url":"https://api.github.com/users/PeterOeClausen/events{/privacy}","received_events_url":"https://api.github.com/users/PeterOeClausen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T12:21:54Z","updated_at":"2022-12-20T12:22:11Z","author_association":"NONE","body":"Created a Console Application, installed Bogus and Lucene.\r\nI see very different results running `writer.AddDocument(document)` versus `writer.AddDocuments(documents)`:\r\n\r\n```cs\r\nusing Bogus;\r\nusing Lucene.Net.Analysis.Core;\r\nusing Lucene.Net.Documents;\r\nusing Lucene.Net.Index;\r\nusing Lucene.Net.Store;\r\nusing Lucene.Net.Util;\r\nusing static ConsoleAppForPrototyping.Program;\r\n\r\nnamespace ConsoleAppForPrototyping {\r\n    public class Program\r\n    {\r\n        public static void Main(string[] args)\r\n        {\r\n            Console.WriteLine(\"Hello, World!\");\r\n            var p = new Program();\r\n            p.Run();\r\n            Console.WriteLine(\"Done creating index!\");\r\n            while (true) { }\r\n        }\r\n\r\n        public class Row\r\n        {\r\n            public Guid Id { get; set; }\r\n            public string Name { get; set; }\r\n            public DateTime Date { get; set; }\r\n        }\r\n\r\n        public void Run()\r\n        {\r\n            var rowFaker = new Faker<Row>()\r\n                .StrictMode(true)\r\n                .RuleFor(o => o.Id, f => Guid.NewGuid())\r\n                .RuleFor(o => o.Name, f => f.Name.FullName())\r\n                .RuleFor(o => o.Date, f => f.Date.Future());\r\n\r\n            var luceneVersion = LuceneVersion.LUCENE_48;\r\n            using var analyzer = new KeywordAnalyzer();\r\n            using var directory = FSDirectory.Open(\"../../../App_Data\");\r\n            var config = new IndexWriterConfig(luceneVersion, analyzer)\r\n            {\r\n                OpenMode = OpenMode.CREATE,\r\n            };\r\n            using var writer = new IndexWriter(directory, config);\r\n\r\n            // Config\r\n            for (int i = 0; i < 1000000; i++)\r\n            {\r\n                if(i % 100 == 0)\r\n                {\r\n                    Console.WriteLine(i);\r\n                }\r\n                var row = rowFaker.Generate();\r\n\r\n                var document = new Document();\r\n                document.Add(new StringField(\"id\", row.Id.ToString(), Field.Store.YES));\r\n                document.Add(new StringField(\"name\", row.Name, Field.Store.YES));\r\n                document.Add(new StringField(\"date\", row.Date.ToString(), Field.Store.YES));\r\n                writer.AddDocument(document);\r\n            }\r\n\r\n            writer.Commit();\r\n            writer.Dispose();\r\n            directory.Dispose();\r\n            analyzer.Dispose();\r\n        }\r\n    }\r\n}\r\n```\r\n![image](https://user-images.githubusercontent.com/6975621/208662017-302591ea-210e-4aa2-8e56-bdfec38ac961.png)\r\n\r\nStuff is added and released from memory with `writer.AddDocument(document)`, ending up consuming 56mb.\r\n\r\n**Versus**:\r\n```cs\r\nusing Bogus;\r\nusing Lucene.Net.Analysis.Core;\r\nusing Lucene.Net.Documents;\r\nusing Lucene.Net.Index;\r\nusing Lucene.Net.Store;\r\nusing Lucene.Net.Util;\r\nusing static ConsoleAppForPrototyping.Program;\r\n\r\nnamespace ConsoleAppForPrototyping {\r\n    public class Program\r\n    {\r\n        public static void Main(string[] args)\r\n        {\r\n            Console.WriteLine(\"Hello, World!\");\r\n            var p = new Program();\r\n            p.Run();\r\n            Console.WriteLine(\"Done creating index!\");\r\n            while (true) { }\r\n        }\r\n\r\n        public class Row\r\n        {\r\n            public Guid Id { get; set; }\r\n            public string Name { get; set; }\r\n            public DateTime Date { get; set; }\r\n        }\r\n\r\n        public void Run()\r\n        {\r\n            var rowFaker = new Faker<Row>()\r\n                .StrictMode(true)\r\n                .RuleFor(o => o.Id, f => Guid.NewGuid())\r\n                .RuleFor(o => o.Name, f => f.Name.FullName())\r\n                .RuleFor(o => o.Date, f => f.Date.Future());\r\n\r\n            var luceneVersion = LuceneVersion.LUCENE_48;\r\n            using var analyzer = new KeywordAnalyzer();\r\n            using var directory = FSDirectory.Open(\"../../../App_Data\");\r\n            var config = new IndexWriterConfig(luceneVersion, analyzer)\r\n            {\r\n                OpenMode = OpenMode.CREATE, // Use OpenMode.CREATE to overwrite, or OpenMode.APPEND to just open\r\n            };\r\n            using var writer = new IndexWriter(directory, config);\r\n\r\n            // Config\r\n            var documentList = new List<Document>();\r\n            for (int i = 0; i < 1000000; i++)\r\n            {\r\n                if(i % 100 == 0)\r\n                {\r\n                    Console.WriteLine(i);\r\n                }\r\n                var row = rowFaker.Generate();\r\n\r\n                var document = new Document();\r\n                document.Add(new StringField(\"id\", row.Id.ToString(), Field.Store.YES));\r\n                document.Add(new StringField(\"name\", row.Name, Field.Store.YES));\r\n                document.Add(new StringField(\"date\", row.Date.ToString(), Field.Store.YES));\r\n                documentList.Add(document);\r\n            }\r\n            writer.AddDocuments(documentList);\r\n\r\n            writer.Commit();\r\n            writer.Dispose();\r\n            directory.Dispose();\r\n            analyzer.Dispose();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/6975621/208663974-acd01214-3858-4451-bc49-bc2fcc1aa5a3.png)\r\nFirst it consumes up to 6 GB.\r\n\r\nAnd after 4.5 minutes it runs garbage collection and ends up at 609mb.\r\n![image](https://user-images.githubusercontent.com/6975621/208664233-dbe00475-4172-4943-9b23-f9a9f4261d63.png)\r\n\r\n**Two things I found:**\r\n\r\n1) It seems to me that `writer.AddDocument(document);` handles memory better in this scenario\r\n2) Garbage collection does pick it up, though it may take some time (in second senario 4,5 minutes).\r\n\r\nSo I think I'll experiment further with our project and use `.AddDocument(document);` instead of `.AddDocuments(documents);`.\r\n\r\nClosing.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359280385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359441519","html_url":"https://github.com/apache/lucenenet/issues/784#issuecomment-1359441519","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/784","id":1359441519,"node_id":"IC_kwDOAAJ06c5RB25v","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T14:23:22Z","updated_at":"2022-12-20T14:23:22Z","author_association":"CONTRIBUTOR","body":"Hi @PeterOeClausen - Thanks for sharing your code for your two approaches.  This helps alot.  I'm not so sure that the memory differences you are seeing have anything to do with LuceneNET per se.  \r\n\r\nThe key reason you see so much memory allocation with `writer.AddDocuments`  is that the `documentList` you are passing has a million documents in it.  So this memory allocation is happening simply due to building the `documentList` even if you never call `writer.AddDocuments`. \r\n\r\n If you were calling `writer.AddDocuments` with a list of 10 documents and called that in a loop 100,000 times then the memory allocations would be much closer to what you are seeing by calling `writer.AddDocument` with a single document done 1 million times.\r\n\r\nOne final note,  even for the `writer.AddDocument` case you can reduce allocations further if you like.  You can use the same `Document` over and over by settings it's values before calling `writer.AddDocument` . In this way there is only ever one `Document` allocated rather then 1 millions that eventually need to be garbage collected.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1359441519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362475955","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1362475955","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1362475955,"node_id":"IC_kwDOAAJ06c5RNbuz","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T06:43:44Z","updated_at":"2022-12-22T07:13:34Z","author_association":"CONTRIBUTOR","body":"I think can't stress test internally in my system maybe something is wrong with my code it taking a long time to run 095802353c9a2f4b3600382050bad354583b43cf . Please check the code for the test if possible is there something wrong let me know **(Process and ThreadPumper issue)**. **Thanks!**","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362475955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362590769","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1362590769","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1362590769,"node_id":"IC_kwDOAAJ06c5RN3wx","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T09:10:39Z","updated_at":"2022-12-22T09:10:39Z","author_association":"CONTRIBUTOR","body":"Looks like it is coming along.\r\n\r\n1. I think the main issue is that you are not passing the name of the test DLL to dotnet test. If not passed a name, it will run all of the tests, which could take a several minutes.\r\n2. I don't think that `ThreadPumper` makes any sense in .NET. `ThreadPumper` is a Java-only thing. We can just attach `StandardOutput` events directly from process and it should \"just work\" without any \"pumping\". See: https://stackoverflow.com/a/285841 and https://stackoverflow.com/a/9730455\r\n3. Since we will have a random directory name, it is important that it is passed to the spawned thread from the original thread in an environment variable so the spawned thread knows where to create the index and the final check can use the same directory after the crash to check it. You are passing one in, but the second process (in the `SetUp()` method) needs to use it if is passed in. This is critical because the test in the base class uses this value when it creates the index. We need to use `TempDir.FullName` as the value of the `\"tempDir\"` environment variable that is passed to the spawned process. We can also use the `\"tempDir\"` environment variable instead of `\"tests.crashmode\"` to detect which process we are running and to set the `TempDir` in `SetUp()` of the spawned process. See the example below.\r\n4. We can eliminate everything in CrashJRE and simply throw an exception to bring down the runtime. However, we need to ensure that the crash thread `Join()` method call is before the loop for `Join()` method call. I think we will need two threads for this to work 1) A thread to run the crash (which we have) and 2) A thread to run the loop for `base.TestNRTThreads_Mem()`. The main thread should call `Join()` and wait for both of the other threads to complete. We may need some experimentation with what priority will work, though. ThreadJob will catch the exception and re-throw it when `Join()` is called, which is definitely where this needs to happen on .NET Framework. It should work on .NET Core also, but it would be a better test in that environment if we override `SafeRun(ThreadStart)` and leave the implementation empty so the exception happens during the thread run instead of at the `Join()` on the main thread.\r\n5. For the test name matching, I think we might need to use the contains (`~`) operator instead of the equality (`=`) operator. Also the name to use [is `Name` rather than `TestName` on NUnit](https://learn.microsoft.com/en-us/dotnet/core/testing/selective-unit-tests?pivots=nunit). If that advice doesn't help, you might want to create a throwaway project with a couple of tests in it to experiment with getting it to execute one and not the other.\r\n\r\n```c#\r\n        [SetUp]\r\n        public override void SetUp()\r\n        {\r\n            base. Setup();\r\n            var tempDir = Environment.GetEnvironmentVariable(\"tempDir\");\r\n            if (tempDir is null)\r\n            {\r\n                TempDir = CreateTempDir(\"netcrash\");\r\n                TempDir.Delete();\r\n                TempDir.Create();\r\n            }\r\n            else\r\n            {\r\n                TempDir = new DirectoryInfo(tempDir);\r\n            }\r\n        }\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362590769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362654504","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1362654504","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1362654504,"node_id":"IC_kwDOAAJ06c5ROHUo","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T10:14:04Z","updated_at":"2022-12-22T16:44:56Z","author_association":"CONTRIBUTOR","body":"Wait - about passing a temp directory. Let's not do that. I looked at the code and it is passing `tests.seed`, which will sync up the directory name (as well as make the spawned process repeatable).\r\n\r\nSo, let's NOT do:\r\n\r\n```c#\r\n        [SetUp]\r\n        public override void SetUp()\r\n        {\r\n            base. Setup();\r\n            var tempDir = Environment.GetEnvironmentVariable(\"tempDir\");\r\n            if (tempDir is null)\r\n            {\r\n                TempDir = CreateTempDir(\"netcrash\");\r\n                TempDir.Delete();\r\n                TempDir.Create();\r\n            }\r\n            else\r\n            {\r\n                TempDir = new DirectoryInfo(tempDir);\r\n            }\r\n        }\r\n```\r\n\r\nAnd instead pass the system properties. We have renamed them in .NET using a `:` because `.` has a special meaning. This can either be passed as an environment variable or on the command line, although, the latter is a [bit of black magic](https://github.com/microsoft/vstest-docs/blob/main/docs/RunSettingsArguments.md).\r\n\r\nYou are missing a bunch of command line arguments to get this to work. This is probably the bare minimum of what we need.\r\n\r\n```c#\r\nProcessStartInfo startInfo = new ProcessStartInfo\r\n{\r\n    FileName = \"dotnet\",\r\n    Arguments = String.Join(\" \", new[] {\r\n        \"test\", this.GetType().Assembly.Location,\r\n        \"--framework\", GetTargetFramework(),\r\n        \"--filter\", \"Name~TestIndexWriterOnJRECrash\",\r\n        \"--logger:\\\"console;verbosity=normal\\\"\",\r\n        \"--no-build\",\r\n        // NOTE: This is special syntax that dotnet test supports to pass .runsettings on the command line\r\n        \"--\", $\"RunConfiguration.TargetPlatform={GetTargetPlatform()}\" }),\r\n    WorkingDirectory = theDirectory,\r\n    EnvironmentVariables = {\r\n        { \"lucene:tests:seed\", RandomizedContext.CurrentContext.RandomSeedAsHex }, \r\n        { \"lucene:tests:culture\", Thread.CurrentThread.CurrentCulture.Name }, \r\n        { \"tests:crashmode\", \"true\" }, \r\n        // passing NIGHTLY to this test makes it run for much longer, easier to catch it in the act...\r\n        { \"lucene:tests:nightly\", \"true\" }\r\n    },\r\n    RedirectStandardOutput = true,\r\n    RedirectStandardError = true,\r\n    UseShellExecute = false\r\n};\r\n```\r\n\r\nAnd yes, that means we can keep the existing `SetUp()` method and `tests:crashmode` environment variable code.\r\n\r\nI am not sure how much testing has been done with passing system properties as environment variables has been done, but I know for certain the command line approach works if the above code does not.\r\n\r\n> **NOTE:** The `lucene:` prefix is required for environment variables as system properties only. When passing system properties on the command line, this prefix is not required. If you change the code to read `SystemProperties.GetProperty(\"tests:crashmode\")` instead of `Environment.GetEnvironmentVariable(\"tests.crashmode\")` then all of the properties can be passed in the same way (that is, specified as `\"lucene:tests:crashmode\"` in an environment variable or `\"tests:crashmode\"` on the command line).\r\n\r\nNote that I don't know for certain this is the right filter. I got it working before, but I thought I specified `~=` or `=~` in that case.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1362654504/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1363030294","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1363030294","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1363030294,"node_id":"IC_kwDOAAJ06c5RPjEW","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T16:23:13Z","updated_at":"2022-12-22T17:21:40Z","author_association":"CONTRIBUTOR","body":"Let me check further it's consuming my memory a lot because it takes all the test classes so filter variables are not correct.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1363030294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1368506671","html_url":"https://github.com/apache/lucenenet/issues/763#issuecomment-1368506671","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/763","id":1368506671,"node_id":"IC_kwDOAAJ06c5RkcEv","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-01T18:45:37Z","updated_at":"2023-01-01T18:45:37Z","author_association":"CONTRIBUTOR","body":"@tonyguo2022, Interesting use case and their are alot of solutions provided for your question but I need to understand it more.(i.e) your use case is just use the Lucene library to index your data and storage to cloud back?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1368506671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1368691729","html_url":"https://github.com/apache/lucenenet/issues/763#issuecomment-1368691729","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/763","id":1368691729,"node_id":"IC_kwDOAAJ06c5RlJQR","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-02T06:43:22Z","updated_at":"2023-01-02T06:43:22Z","author_association":"CONTRIBUTOR","body":"> For the record, there are already existing Lucene directory implementations for various cloud platforms and products. Some would need to be ported to .NET, others might already exist on .NET (some of which don't yet support 4.8.0).\r\n> \r\n> [#631 (comment)](https://github.com/apache/lucenenet/issues/631#issuecomment-1086764962) https://github.com/azure-contrib/AzureDirectory https://github.com/tomlm/Lucene.Net.Store.Azure https://stackoverflow.com/a/59381272 https://github.com/albogdano/lucene-s3directory https://docs.jboss.org/author/display/ISPN50/Infinispan%20as%20a%20Directory%20for%20Lucene.html https://cwiki.apache.org/confluence/display/lucene/AvailableLockFactories\r\n> \r\n> Lucene is highly optimized to use a local file system. Swapping the directory implementation is one way to extend Lucene, but it will come at a pretty significant performance penalty to write to a blob storage provider (as you can see by the notes on each implementation). There are existing cloud products that emulate a local file system that may or may not do the job better of moving your index off of the server it runs on.\r\n> \r\n> However, rolling your own `Directory` implementation is a major job that will take a significant amount of effort to perform well and be stable enough to use.\r\n> \r\n> Note that there is a [Lucene.Net.Replicator](https://lucenenet.apache.org/docs/4.8.0-beta00016/api/replicator/Lucene.Net.Replicator.html) module that is designed to synchronize an index across multiple servers by hosting a listener on a server and having each client request a copy periodically. I haven't tried, but I suspect there is a way to utilize it to safely copy the index to cloud storage at periodic intervals. I wouldn't recommend copying the index outside of a locking context, though, because Lucene.NET may lock the files at unpredictable times and it may not be practical to copy them without getting copy errors.\r\n\r\nSo insightful conversion throughout this topic, I should also add my points here as @NightOwl888 mentioned it's great to implement **[nrt-replication](https://github.com/Yelp/nrtsearch#near-real-time-replication)**. **Yelp Engineers implemented this kind of project for their **NRT-Search engine** to fulfill the need for Large cluster management. But NRT-Replication seems a good alternative to document-based replication when it comes to costs associated with maintaining large clusters. Scaling document-based clusters up/down promptly could be slower due to data migration between nodes apart from paying the cost for reindexing on all nodes.**\r\n\r\nHope it will help,\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1368691729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1375503460","html_url":"https://github.com/apache/lucenenet/issues/768#issuecomment-1375503460","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/768","id":1375503460,"node_id":"IC_kwDOAAJ06c5R_IRk","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T11:43:37Z","updated_at":"2023-01-09T11:43:37Z","author_association":"CONTRIBUTOR","body":"@NightOwl888, I submitted the PR and look forward to your feedback. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1375503460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1381978237","html_url":"https://github.com/apache/lucenenet/issues/788#issuecomment-1381978237","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/788","id":1381978237,"node_id":"IC_kwDOAAJ06c5SX1B9","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T14:54:36Z","updated_at":"2023-01-13T14:54:36Z","author_association":"CONTRIBUTOR","body":"It's not as simple as adding support for multiple terms because you probably want to update each document with a different document.  :-)  ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1381978237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1381980436","html_url":"https://github.com/apache/lucenenet/issues/788#issuecomment-1381980436","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/788","id":1381980436,"node_id":"IC_kwDOAAJ06c5SX1kU","user":{"login":"Evengard","id":798735,"node_id":"MDQ6VXNlcjc5ODczNQ==","avatar_url":"https://avatars.githubusercontent.com/u/798735?v=4","gravatar_id":"","url":"https://api.github.com/users/Evengard","html_url":"https://github.com/Evengard","followers_url":"https://api.github.com/users/Evengard/followers","following_url":"https://api.github.com/users/Evengard/following{/other_user}","gists_url":"https://api.github.com/users/Evengard/gists{/gist_id}","starred_url":"https://api.github.com/users/Evengard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Evengard/subscriptions","organizations_url":"https://api.github.com/users/Evengard/orgs","repos_url":"https://api.github.com/users/Evengard/repos","events_url":"https://api.github.com/users/Evengard/events{/privacy}","received_events_url":"https://api.github.com/users/Evengard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T14:56:37Z","updated_at":"2023-01-13T14:56:37Z","author_association":"NONE","body":"Well, actually, under the hood it is just atomic delete and add anyway. So we can just delete all matching terms and add all new documents under the hood, I guess...\r\n\r\nI may be wrong though.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1381980436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382038986","html_url":"https://github.com/apache/lucenenet/issues/788#issuecomment-1382038986","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/788","id":1382038986,"node_id":"IC_kwDOAAJ06c5SYD3K","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T15:46:30Z","updated_at":"2023-01-13T15:46:30Z","author_association":"CONTRIBUTOR","body":"I think that's true.  So I guess you'd like to pass in a list of terms and a list of documents to UpdateDocuments? Semantically that feels weird but I get the logic of it.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382038986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382052575","html_url":"https://github.com/apache/lucenenet/issues/788#issuecomment-1382052575","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/788","id":1382052575,"node_id":"IC_kwDOAAJ06c5SYHLf","user":{"login":"Evengard","id":798735,"node_id":"MDQ6VXNlcjc5ODczNQ==","avatar_url":"https://avatars.githubusercontent.com/u/798735?v=4","gravatar_id":"","url":"https://api.github.com/users/Evengard","html_url":"https://github.com/Evengard","followers_url":"https://api.github.com/users/Evengard/followers","following_url":"https://api.github.com/users/Evengard/following{/other_user}","gists_url":"https://api.github.com/users/Evengard/gists{/gist_id}","starred_url":"https://api.github.com/users/Evengard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Evengard/subscriptions","organizations_url":"https://api.github.com/users/Evengard/orgs","repos_url":"https://api.github.com/users/Evengard/repos","events_url":"https://api.github.com/users/Evengard/events{/privacy}","received_events_url":"https://api.github.com/users/Evengard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T15:59:10Z","updated_at":"2023-01-13T15:59:10Z","author_association":"NONE","body":"Yeah, something like that. It may feel weird, but it kinda mimics the DeleteDocuments API too.\r\nMaybe it would be viable to have both variants (with one Term and with a list of Terms), but I'm unsure it is beneficial.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382052575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382236875","html_url":"https://github.com/apache/lucenenet/issues/788#issuecomment-1382236875","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/788","id":1382236875,"node_id":"IC_kwDOAAJ06c5SY0LL","user":{"login":"Evengard","id":798735,"node_id":"MDQ6VXNlcjc5ODczNQ==","avatar_url":"https://avatars.githubusercontent.com/u/798735?v=4","gravatar_id":"","url":"https://api.github.com/users/Evengard","html_url":"https://github.com/Evengard","followers_url":"https://api.github.com/users/Evengard/followers","following_url":"https://api.github.com/users/Evengard/following{/other_user}","gists_url":"https://api.github.com/users/Evengard/gists{/gist_id}","starred_url":"https://api.github.com/users/Evengard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Evengard/subscriptions","organizations_url":"https://api.github.com/users/Evengard/orgs","repos_url":"https://api.github.com/users/Evengard/repos","events_url":"https://api.github.com/users/Evengard/events{/privacy}","received_events_url":"https://api.github.com/users/Evengard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T18:38:47Z","updated_at":"2023-01-13T18:39:05Z","author_association":"NONE","body":"Now that I think about it, maybe UpdateDocuments even should have a Query overload as well, like DeleteDocuments do.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1382236875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1400373239","html_url":"https://github.com/apache/lucenenet/issues/789#issuecomment-1400373239","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/789","id":1400373239,"node_id":"IC_kwDOAAJ06c5Td__3","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-23T13:43:59Z","updated_at":"2023-01-23T13:43:59Z","author_association":"CONTRIBUTOR","body":"I don't see how it would produce different results. \r\n\r\nSeems like a `PhraseQuery` of one world would rightly result in a `TermQuery`.  Wouldn't you think?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1400373239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1411136762","html_url":"https://github.com/apache/lucenenet/pull/787#issuecomment-1411136762","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/787","id":1411136762,"node_id":"IC_kwDOAAJ06c5UHDz6","user":{"login":"vrdc90","id":12944048,"node_id":"MDQ6VXNlcjEyOTQ0MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/12944048?v=4","gravatar_id":"","url":"https://api.github.com/users/vrdc90","html_url":"https://github.com/vrdc90","followers_url":"https://api.github.com/users/vrdc90/followers","following_url":"https://api.github.com/users/vrdc90/following{/other_user}","gists_url":"https://api.github.com/users/vrdc90/gists{/gist_id}","starred_url":"https://api.github.com/users/vrdc90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrdc90/subscriptions","organizations_url":"https://api.github.com/users/vrdc90/orgs","repos_url":"https://api.github.com/users/vrdc90/repos","events_url":"https://api.github.com/users/vrdc90/events{/privacy}","received_events_url":"https://api.github.com/users/vrdc90/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T22:10:22Z","updated_at":"2023-01-31T22:10:22Z","author_association":"CONTRIBUTOR","body":"No problemo :)\r\nI opened new PR [here](https://github.com/apache/lucenenet/pull/790)","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1411136762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1416770750","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1416770750","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1416770750,"node_id":"IC_kwDOAAJ06c5UcjS-","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-04T14:42:34Z","updated_at":"2023-02-04T14:42:34Z","author_association":"CONTRIBUTOR","body":"This is very similar to the question titled \"Is there a way to customize segment names?\" on the lucene mailing list: https://lists.apache.org/list?dev@lucene.apache.org:2022-12\r\n\r\nIt seems that there is nothing built-in that can track segment names for a failover situation, and it is not something that they intend to support. You might want to direct your question to the [lucene developer mailing list](https://lucene.apache.org/core/discussion.html), as they will likely have a better answer than you can find here.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1416770750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1420800686","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1420800686","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1420800686,"node_id":"IC_kwDOAAJ06c5Ur7Ku","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T13:47:55Z","updated_at":"2023-02-07T13:47:55Z","author_association":"CONTRIBUTOR","body":"It seems like this is the type of functionality that is added by Solr or OpenSearch. So you may want to checkout out their Repos for code that would be helpful.  Both are under Apache License I believe.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1420800686/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1425519725","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1425519725","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1425519725,"node_id":"IC_kwDOAAJ06c5U97Rt","user":{"login":"nzdev","id":834725,"node_id":"MDQ6VXNlcjgzNDcyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/834725?v=4","gravatar_id":"","url":"https://api.github.com/users/nzdev","html_url":"https://github.com/nzdev","followers_url":"https://api.github.com/users/nzdev/followers","following_url":"https://api.github.com/users/nzdev/following{/other_user}","gists_url":"https://api.github.com/users/nzdev/gists{/gist_id}","starred_url":"https://api.github.com/users/nzdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzdev/subscriptions","organizations_url":"https://api.github.com/users/nzdev/orgs","repos_url":"https://api.github.com/users/nzdev/repos","events_url":"https://api.github.com/users/nzdev/events{/privacy}","received_events_url":"https://api.github.com/users/nzdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T09:39:10Z","updated_at":"2023-02-10T09:39:10Z","author_association":"NONE","body":"I think you would need to backport this feature from the lucene 5.0 codec https://issues.apache.org/jira/browse/LUCENE-5895 ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1425519725/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1426883252","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1426883252","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1426883252,"node_id":"IC_kwDOAAJ06c5VDIK0","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-11T21:47:08Z","updated_at":"2023-02-11T21:47:08Z","author_association":"CONTRIBUTOR","body":"It does sure looks like it's not being used anywhere. I looked at the Java version 4.8, and the code matches what we have ported. But then, in the latest version, it's all commented out. They most likely realized that they are not using it either. Example:\r\n\r\nhttps://github.com/apache/lucene/blob/main/lucene/queryparser/src/java/org/apache/lucene/queryparser/classic/QueryParserTokenManager.java#L24\r\n\r\nIt feels like it's a simple enough code change...","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1426883252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1426960200","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1426960200","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1426960200,"node_id":"IC_kwDOAAJ06c5VDa9I","user":{"login":"eladmarg","id":3823205,"node_id":"MDQ6VXNlcjM4MjMyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/3823205?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmarg","html_url":"https://github.com/eladmarg","followers_url":"https://api.github.com/users/eladmarg/followers","following_url":"https://api.github.com/users/eladmarg/following{/other_user}","gists_url":"https://api.github.com/users/eladmarg/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmarg/subscriptions","organizations_url":"https://api.github.com/users/eladmarg/orgs","repos_url":"https://api.github.com/users/eladmarg/repos","events_url":"https://api.github.com/users/eladmarg/events{/privacy}","received_events_url":"https://api.github.com/users/eladmarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-12T07:14:41Z","updated_at":"2023-02-12T07:14:41Z","author_association":"CONTRIBUTOR","body":"if so, we can comment this as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1426960200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429468683","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1429468683","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1429468683,"node_id":"IC_kwDOAAJ06c5VM_YL","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T10:12:25Z","updated_at":"2023-02-14T11:06:42Z","author_association":"CONTRIBUTOR","body":"> It seems like this is the type of functionality that is added by Solr or OpenSearch. So you may want to checkout out their Repos for code that would be helpful. Both are under Apache License I believe.\r\n\r\nThanks, @rclabo  pointing me to the right repos https://github.com/opensearch-project/OpenSearch/issues/2229 great Design Proposal on **Segment Replication**.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429468683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429506076","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1429506076","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1429506076,"node_id":"IC_kwDOAAJ06c5VNIgc","user":{"login":"nzdev","id":834725,"node_id":"MDQ6VXNlcjgzNDcyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/834725?v=4","gravatar_id":"","url":"https://api.github.com/users/nzdev","html_url":"https://github.com/nzdev","followers_url":"https://api.github.com/users/nzdev/followers","following_url":"https://api.github.com/users/nzdev/following{/other_user}","gists_url":"https://api.github.com/users/nzdev/gists{/gist_id}","starred_url":"https://api.github.com/users/nzdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzdev/subscriptions","organizations_url":"https://api.github.com/users/nzdev/orgs","repos_url":"https://api.github.com/users/nzdev/repos","events_url":"https://api.github.com/users/nzdev/events{/privacy}","received_events_url":"https://api.github.com/users/nzdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T10:40:41Z","updated_at":"2023-02-14T10:40:41Z","author_association":"NONE","body":"Interesting link @Jeevananthan-23 . I think this exists already in Lucene 6 in replicator as nrt replication?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429506076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429508759","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1429508759","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1429508759,"node_id":"IC_kwDOAAJ06c5VNJKX","user":{"login":"nzdev","id":834725,"node_id":"MDQ6VXNlcjgzNDcyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/834725?v=4","gravatar_id":"","url":"https://api.github.com/users/nzdev","html_url":"https://github.com/nzdev","followers_url":"https://api.github.com/users/nzdev/followers","following_url":"https://api.github.com/users/nzdev/following{/other_user}","gists_url":"https://api.github.com/users/nzdev/gists{/gist_id}","starred_url":"https://api.github.com/users/nzdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nzdev/subscriptions","organizations_url":"https://api.github.com/users/nzdev/orgs","repos_url":"https://api.github.com/users/nzdev/repos","events_url":"https://api.github.com/users/nzdev/events{/privacy}","received_events_url":"https://api.github.com/users/nzdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T10:42:38Z","updated_at":"2023-02-14T10:42:38Z","author_association":"NONE","body":"Would be interesting to see the NRT replication from v6 if it can be backported to v4. Here is a start https://github.com/nzdev/lucenenet/tree/feature/nrt-v6/src/Lucene.Net.Replicator/Nrt.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429508759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429553371","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1429553371","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1429553371,"node_id":"IC_kwDOAAJ06c5VNUDb","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T11:14:33Z","updated_at":"2023-02-14T12:32:24Z","author_association":"CONTRIBUTOR","body":"@nzdev, the question is how to manage a failover kind of distributed consensus. My proposal is to copy the merged segment from the primary node and transfers it to replicas by using consensus Raft. https://github.com/opensearch-project/OpenSearch/issues/2212 discussion on shard promotion inside the cluster.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1429553371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1448061298","html_url":"https://github.com/apache/lucenenet/issues/785#issuecomment-1448061298","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/785","id":1448061298,"node_id":"IC_kwDOAAJ06c5WT6ly","user":{"login":"CrommVardek","id":14314577,"node_id":"MDQ6VXNlcjE0MzE0NTc3","avatar_url":"https://avatars.githubusercontent.com/u/14314577?v=4","gravatar_id":"","url":"https://api.github.com/users/CrommVardek","html_url":"https://github.com/CrommVardek","followers_url":"https://api.github.com/users/CrommVardek/followers","following_url":"https://api.github.com/users/CrommVardek/following{/other_user}","gists_url":"https://api.github.com/users/CrommVardek/gists{/gist_id}","starred_url":"https://api.github.com/users/CrommVardek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CrommVardek/subscriptions","organizations_url":"https://api.github.com/users/CrommVardek/orgs","repos_url":"https://api.github.com/users/CrommVardek/repos","events_url":"https://api.github.com/users/CrommVardek/events{/privacy}","received_events_url":"https://api.github.com/users/CrommVardek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-28T12:00:33Z","updated_at":"2023-02-28T12:00:33Z","author_association":"NONE","body":"The null fields were returned because of this analyzer used to index and search : \r\n\r\n` private readonly StandardAnalyzer _standardAnalyzer = new(AppLuceneVersion);`\r\n\r\nMeaning some lastname (Will, To, etc.) were considered stopWords. fields are therefore set to NULL and the sort would sort them like the field was empty (null).\r\n\r\nModifying to `private readonly StandardAnalyzer _standardAnalyzer = new(AppLuceneVersion, CharArraySet.EMPTY_SET);` solved the issue.\r\n\r\nIMHO, stops words set should be opt-in, and constructor that does not have the CharArraySet's parmater should default to CharArraySet.EMPTY_SET not the ENGLISH_STOP_WORDS_SET. Mostly because : Not everyone is building search engines for english only. Not everyone is build search engines for common words only. Using default ENGLISH_STOP_WORDS_SET is assuming a certain business case / usage of the search engine... But really it should not interfer with the context of usage.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1448061298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1469449863","html_url":"https://github.com/apache/lucenenet/issues/791#issuecomment-1469449863","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/791","id":1469449863,"node_id":"IC_kwDOAAJ06c5XlgaH","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-15T06:58:50Z","updated_at":"2023-03-15T06:58:50Z","author_association":"CONTRIBUTOR","body":"> Would be interesting to see the NRT replication from v6 if it can be backported to v4. Here is a start https://github.com/nzdev/lucenenet/tree/feature/nrt-v6/src/Lucene.Net.Replicator/Nrt.\r\n\r\nHi @nzdev, I could like to discuss this more can you connect [here](https://www.linkedin.com/in/jeevananthan-s/)","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1469449863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482772393","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1482772393","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1482772393,"node_id":"IC_kwDOAAJ06c5YYU-p","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T13:09:40Z","updated_at":"2023-03-24T13:09:40Z","author_association":"CONTRIBUTOR","body":"This question was asked a few months ago and the answer hasn't likely changed much.  Please see [#778](https://github.com/apache/lucenenet/issues/778).  In that thread you will see references to [#437 Comment](https://github.com/apache/lucenenet/issues/437#issuecomment-992014580) which contains a wealth of information on the topic.\r\n\r\nIn all of this, one thing you should keep in mind is that many people (even Microsoft!) currently use portions of Lucene 4.8 in production.  So that is to say the product is already very stable.  \r\n\r\nCompanies using 4.8 in production just need to be awere there may be some minor API changes on the road to a final 4.8 release.  But honestly, that's not a lot different than using a Production release that has a major new release.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482772393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482803172","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1482803172","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1482803172,"node_id":"IC_kwDOAAJ06c5YYcfk","user":{"login":"jeffreywstevens","id":637945,"node_id":"MDQ6VXNlcjYzNzk0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/637945?v=4","gravatar_id":"","url":"https://api.github.com/users/jeffreywstevens","html_url":"https://github.com/jeffreywstevens","followers_url":"https://api.github.com/users/jeffreywstevens/followers","following_url":"https://api.github.com/users/jeffreywstevens/following{/other_user}","gists_url":"https://api.github.com/users/jeffreywstevens/gists{/gist_id}","starred_url":"https://api.github.com/users/jeffreywstevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeffreywstevens/subscriptions","organizations_url":"https://api.github.com/users/jeffreywstevens/orgs","repos_url":"https://api.github.com/users/jeffreywstevens/repos","events_url":"https://api.github.com/users/jeffreywstevens/events{/privacy}","received_events_url":"https://api.github.com/users/jeffreywstevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T13:31:21Z","updated_at":"2023-03-24T13:31:21Z","author_association":"NONE","body":"In my opinion, if you know people are using it, and you feel it is stable, you might as well call it a release and remove the beta designation. \r\n\r\nI am confident it works for most use cases. However, I can't get some developers to consider it. If it gets escalated, it will most likely get dropped.\r\n\r\nI feel it is time to go forward. ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482803172/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482917379","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1482917379","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1482917379,"node_id":"IC_kwDOAAJ06c5YY4YD","user":{"login":"Shazwazza","id":1742685,"node_id":"MDQ6VXNlcjE3NDI2ODU=","avatar_url":"https://avatars.githubusercontent.com/u/1742685?v=4","gravatar_id":"","url":"https://api.github.com/users/Shazwazza","html_url":"https://github.com/Shazwazza","followers_url":"https://api.github.com/users/Shazwazza/followers","following_url":"https://api.github.com/users/Shazwazza/following{/other_user}","gists_url":"https://api.github.com/users/Shazwazza/gists{/gist_id}","starred_url":"https://api.github.com/users/Shazwazza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shazwazza/subscriptions","organizations_url":"https://api.github.com/users/Shazwazza/orgs","repos_url":"https://api.github.com/users/Shazwazza/repos","events_url":"https://api.github.com/users/Shazwazza/events{/privacy}","received_events_url":"https://api.github.com/users/Shazwazza/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T14:42:08Z","updated_at":"2023-03-24T14:42:08Z","author_association":"CONTRIBUTOR","body":"I'm definitely in agreement with @jeffreywstevens here. I know there are some recent commits and changes done in the past several months which would warrant a new beta release, but after that I also think we should procure an RTM release. Any changes after that can just be patch versions. \r\n\r\nWould need buy in from @rclabo + @NightOwl888 ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1482917379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483018659","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1483018659","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1483018659,"node_id":"IC_kwDOAAJ06c5YZRGj","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T15:44:23Z","updated_at":"2023-03-24T15:44:23Z","author_association":"CONTRIBUTOR","body":"I'm totally on board with that.  In the past two years I've had to make way more changes to my code base due to ASP.NET Core API changes than I have had to for Lucene.NET 4.8 API changes.  I feel that LuceneNET 4.8 is super stable (hats off to @NightOwl888!!!) and is worthy of an RTM release.  \r\n\r\nSure there are some aspects that may not be perfectly on par with Java Lucene 4.8 (OpenNLP comes to mind), but those areas tend to be auxiliary functionality that have no easy route for porting. \r\n\r\nThe core functionality seems rock solid and awesome from my perspective.  And I think so many more devs will use this amazing project if it's RTM.  ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483018659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483023955","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1483023955","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1483023955,"node_id":"IC_kwDOAAJ06c5YZSZT","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T15:48:00Z","updated_at":"2023-03-24T15:48:00Z","author_association":"CONTRIBUTOR","body":"I know @NightOwl888 is under a lot of pressure right now due to a deadline on another project, so he might not be able to chime in for a while.  \r\n\r\nThat doesn't mean he isn't interested in this discussion; it just means he is juggling a lot at the moment.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483023955/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483075959","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1483075959","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1483075959,"node_id":"IC_kwDOAAJ06c5YZfF3","user":{"login":"Shazwazza","id":1742685,"node_id":"MDQ6VXNlcjE3NDI2ODU=","avatar_url":"https://avatars.githubusercontent.com/u/1742685?v=4","gravatar_id":"","url":"https://api.github.com/users/Shazwazza","html_url":"https://github.com/Shazwazza","followers_url":"https://api.github.com/users/Shazwazza/followers","following_url":"https://api.github.com/users/Shazwazza/following{/other_user}","gists_url":"https://api.github.com/users/Shazwazza/gists{/gist_id}","starred_url":"https://api.github.com/users/Shazwazza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shazwazza/subscriptions","organizations_url":"https://api.github.com/users/Shazwazza/orgs","repos_url":"https://api.github.com/users/Shazwazza/repos","events_url":"https://api.github.com/users/Shazwazza/events{/privacy}","received_events_url":"https://api.github.com/users/Shazwazza/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T16:22:21Z","updated_at":"2023-03-24T16:22:21Z","author_association":"CONTRIBUTOR","body":"@rclabo IIRC there were quite a lot of commits and fixes since the last release, do you think we should look to ship one more beta?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483075959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483497070","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1483497070","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1483497070,"node_id":"IC_kwDOAAJ06c5YbF5u","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-24T22:16:19Z","updated_at":"2023-03-24T22:16:19Z","author_association":"CONTRIBUTOR","body":"@Shazwazza Probably, but honestly...I feel like that question is above my pay grade :-)  \r\n\r\nI have enormous respect for @NightOwl888 and would certainly defer to his judgment.  ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1483497070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1484216741","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1484216741","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1484216741,"node_id":"IC_kwDOAAJ06c5Yd1ml","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-26T20:40:30Z","updated_at":"2023-03-26T20:40:30Z","author_association":"CONTRIBUTOR","body":"I have some time on my hands and can dedicate helping out with the efforts.\r\n\r\nJust from looking over the NuGet download stats, the 4.8 beta packages outnumber the last production 3.3 release, in terms of downloads:\r\n\r\nhttps://www.nuget.org/stats/packages/Lucene.Net?groupby=Version\r\n\r\n<img width=\"861\" alt=\"image\" src=\"https://user-images.githubusercontent.com/911757/227803359-80c6c700-be8e-49f9-ac20-670251064d96.png\">\r\n\r\nThese numbers could be misleading and inflated due to automated CI builds but still paint a good picture for 4.8 usage. Some of us are using 4.8 betas in prod without issues, and anecdotally we hear about that from other people too. If another beta release makes prod 4.8 a reality, let's go for it.\r\n\r\nUntil @NightOwl888 can chime in, I will start pulling together the changelog and see what the new beta release would look like, and we can try pushing that out and get the ball rolling.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1484216741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1486214475","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1486214475","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1486214475,"node_id":"IC_kwDOAAJ06c5YldVL","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-28T04:55:16Z","updated_at":"2023-03-28T04:55:16Z","author_association":"CONTRIBUTOR","body":"I put together a draft for the next release; I believe people with commit access should be able to see it in the releases page:\r\n\r\nhttps://github.com/apache/lucenenet/releases\r\n\r\nIt's pretty meaty.\r\n\r\nAs the next step, I will review the communication from @NightOwl888 from the previous beta build and see what we need to do to proceed. From the top of my head, there is a PMC vote and then the publishing of the NuGet packages if the vote passes. I also want to set up local tests for handling indexes produced by previous versions to ensure the current version can work and open it, etc.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1486214475/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1490726451","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1490726451","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1490726451,"node_id":"IC_kwDOAAJ06c5Y2q4z","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-30T18:15:24Z","updated_at":"2023-03-30T18:15:24Z","author_association":"CONTRIBUTOR","body":"Just a quick status update, I am going through the steps outlined [here](https://lucenenet.apache.org/contributing/make-release.html) to ensure I have all the bits correctly set up locally to do the release.\r\n\r\nOne thing I am not clear about is the Azure Pipelines and the access that is needed there to make a release. But I haven't gotten to that part yet, so I haven't explored it too deeply.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1490726451/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1491070182","html_url":"https://github.com/apache/lucenenet/pull/794#issuecomment-1491070182","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/794","id":1491070182,"node_id":"IC_kwDOAAJ06c5Y3-zm","user":{"login":"triandco","id":61586052,"node_id":"MDQ6VXNlcjYxNTg2MDUy","avatar_url":"https://avatars.githubusercontent.com/u/61586052?v=4","gravatar_id":"","url":"https://api.github.com/users/triandco","html_url":"https://github.com/triandco","followers_url":"https://api.github.com/users/triandco/followers","following_url":"https://api.github.com/users/triandco/following{/other_user}","gists_url":"https://api.github.com/users/triandco/gists{/gist_id}","starred_url":"https://api.github.com/users/triandco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triandco/subscriptions","organizations_url":"https://api.github.com/users/triandco/orgs","repos_url":"https://api.github.com/users/triandco/repos","events_url":"https://api.github.com/users/triandco/events{/privacy}","received_events_url":"https://api.github.com/users/triandco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-30T22:55:44Z","updated_at":"2023-03-30T22:55:44Z","author_association":"NONE","body":"I’m closing this PR because have realised that this TextStartPos and Text EndPos does not represent the original position of the token after further testing. It is only used to keep track of the sequence fragment length, which is not particularly useful for downstream processing.  ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1491070182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1497926689","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1497926689","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1497926689,"node_id":"IC_kwDOAAJ06c5ZSIwh","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-05T18:21:55Z","updated_at":"2023-04-05T18:21:55Z","author_association":"CONTRIBUTOR","body":"@xsharper I just gave this a spin and can't reproduce it. Here is my code: https://github.com/laimis/lucene-issue-792\r\n\r\nPerhaps you are using a different library version, not the latest beta build? Check out my csproj for references that I am using.\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1497926689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498149412","html_url":"https://github.com/apache/lucenenet/pull/796#issuecomment-1498149412","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/796","id":1498149412,"node_id":"IC_kwDOAAJ06c5ZS_Ik","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-05T20:59:09Z","updated_at":"2023-04-05T20:59:09Z","author_association":"CONTRIBUTOR","body":"Thanks for that. I made the adjustments. I see that TernaryTree is being subclassed by HyphenationTree but in this case, it did not override Init and initialized its version of protected members in its own constructor.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498149412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498333286","html_url":"https://github.com/apache/lucenenet/pull/796#issuecomment-1498333286","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/796","id":1498333286,"node_id":"IC_kwDOAAJ06c5ZTsBm","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T00:30:53Z","updated_at":"2023-04-06T00:30:53Z","author_association":"CONTRIBUTOR","body":"Closing this and will reopen a PR that starts with simple fixes.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498333286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498491724","html_url":"https://github.com/apache/lucenenet/pull/797#issuecomment-1498491724","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/797","id":1498491724,"node_id":"IC_kwDOAAJ06c5ZUStM","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T04:57:18Z","updated_at":"2023-04-06T04:57:18Z","author_association":"CONTRIBUTOR","body":"To summarize:\r\n\r\n- ShingleFilter.cs change is for CircularSequence class that's private inside of ShingleFilter class.\r\n- Lucene45DocValuesProducer.cs change is for the internal class inside of it, Int64BinaryDocValues, that's internal and none of our stuff was overriding the virtual method.\r\n- MinShouldMatchSumScorer.cs is an internal class and none of our stuff was overriding the method.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1498491724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499042333","html_url":"https://github.com/apache/lucenenet/pull/798#issuecomment-1499042333","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/798","id":1499042333,"node_id":"IC_kwDOAAJ06c5ZWZId","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T13:10:27Z","updated_at":"2023-04-06T13:10:27Z","author_association":"CONTRIBUTOR","body":"I think that all things considered this is a fine approach and probably the one I'd have chosen as well.  ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499042333/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499356253","html_url":"https://github.com/apache/lucenenet/pull/798#issuecomment-1499356253","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/798","id":1499356253,"node_id":"IC_kwDOAAJ06c5ZXlxd","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T16:55:56Z","updated_at":"2023-04-06T16:55:56Z","author_association":"CONTRIBUTOR","body":"Thanks for taking a look! I added the comments about how to properly override. Will make sure to mention breaking when merging.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499356253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499356853","html_url":"https://github.com/apache/lucenenet/pull/798#issuecomment-1499356853","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/798","id":1499356853,"node_id":"IC_kwDOAAJ06c5ZXl61","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T16:56:28Z","updated_at":"2023-04-06T16:56:28Z","author_association":"CONTRIBUTOR","body":"Oh, no need to mention, it already does it. Nice!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499356853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499622393","html_url":"https://github.com/apache/lucenenet/pull/801#issuecomment-1499622393","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/801","id":1499622393,"node_id":"IC_kwDOAAJ06c5ZYmv5","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-06T20:58:36Z","updated_at":"2023-04-06T20:58:36Z","author_association":"CONTRIBUTOR","body":"Taking a look at the failures, somehow locally I did not trigger them...","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1499622393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500559349","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1500559349","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1500559349,"node_id":"IC_kwDOAAJ06c5ZcLf1","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-07T19:08:24Z","updated_at":"2023-04-07T19:08:24Z","author_association":"CONTRIBUTOR","body":"A quick update. We have sorted out access etc., and are actively working on finishing up a few remaining things that will allow us to push 4.8 beta 17. I can dedicate a decent amount of time now and have been pushing PRs with the remaining fixes. Shad has chimed in as well and has started some work too. No ETA, but we are back up and pushing to the finish line. You can observe our progress here by watching PRs coming in and out: https://github.com/apache/lucenenet/pulls?q=is%3Apr+is%3Aclosed\r\n\r\nOur focus areas are 1) fixing the findings by SonarCloud code scans that indicate a problem with converted code where base class constructors call virtual methods that can be overridden in subclasses and cause issues with the state not being initialized properly. 2) Fix Close/Dispose issue with the analyzers #271\r\n\r\nAnd then we will regroup and see where we are at with 4.8 release. There is still some work/considerations to be made about ICU4N. No ETA, as I don't think we can estimate how long this will take, but we can take it as we go and make regular status updates.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500559349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500560214","html_url":"https://github.com/apache/lucenenet/pull/803#issuecomment-1500560214","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/803","id":1500560214,"node_id":"IC_kwDOAAJ06c5ZcLtW","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-07T19:09:45Z","updated_at":"2023-04-07T19:09:45Z","author_association":"CONTRIBUTOR","body":"Merging this one since it was similar to SnowballProgram.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500560214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500788950","html_url":"https://github.com/apache/lucenenet/pull/801#issuecomment-1500788950","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/801","id":1500788950,"node_id":"IC_kwDOAAJ06c5ZdDjW","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-08T04:38:13Z","updated_at":"2023-04-08T04:38:13Z","author_association":"CONTRIBUTOR","body":"Thank you for the review. I went ahead and addressed the issues with separate PRs. I left out DirectoryTaxonomyReader.cs and will take it in another PR. Closing this one without merging.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1500788950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1501027936","html_url":"https://github.com/apache/lucenenet/pull/809#issuecomment-1501027936","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/809","id":1501027936,"node_id":"IC_kwDOAAJ06c5Zd95g","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-09T03:10:24Z","updated_at":"2023-04-09T03:10:24Z","author_association":"CONTRIBUTOR","body":"After some discussions internally, we decided to go with option B. We will accept a IRollingBufferItemFactory interface and use it to create new items. The callers can then use default (which basically just does new()) or provide their own.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1501027936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1501040418","html_url":"https://github.com/apache/lucenenet/pull/809#issuecomment-1501040418","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/809","id":1501040418,"node_id":"IC_kwDOAAJ06c5ZeA8i","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-09T04:54:12Z","updated_at":"2023-04-09T04:54:12Z","author_association":"CONTRIBUTOR","body":"Yeah! That was a good session of exploring solutions.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1501040418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1502346958","html_url":"https://github.com/apache/lucenenet/issues/817#issuecomment-1502346958","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/817","id":1502346958,"node_id":"IC_kwDOAAJ06c5Zi_7O","user":{"login":"rclabo","id":6945499,"node_id":"MDQ6VXNlcjY5NDU0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6945499?v=4","gravatar_id":"","url":"https://api.github.com/users/rclabo","html_url":"https://github.com/rclabo","followers_url":"https://api.github.com/users/rclabo/followers","following_url":"https://api.github.com/users/rclabo/following{/other_user}","gists_url":"https://api.github.com/users/rclabo/gists{/gist_id}","starred_url":"https://api.github.com/users/rclabo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rclabo/subscriptions","organizations_url":"https://api.github.com/users/rclabo/orgs","repos_url":"https://api.github.com/users/rclabo/repos","events_url":"https://api.github.com/users/rclabo/events{/privacy}","received_events_url":"https://api.github.com/users/rclabo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-10T21:24:54Z","updated_at":"2023-04-10T21:24:54Z","author_association":"CONTRIBUTOR","body":"In general, LuceneNET has great concurrency support.  The parallel DrillSideways implementation you mentioned is specifically for facets.  That particular feature wasn't added until Lucene 9.  As such it won't be added to LuceneNET 4.8.  \r\n\r\nHowever, it is currently hoped that after LuceneNET 4.8 has a production release, we will begin working on catching up LuceneNET to the latest version of Java Lucene.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1502346958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1502965652","html_url":"https://github.com/apache/lucenenet/issues/817#issuecomment-1502965652","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/817","id":1502965652,"node_id":"IC_kwDOAAJ06c5ZlW-U","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-11T09:13:09Z","updated_at":"2023-04-11T09:13:09Z","author_association":"CONTRIBUTOR","body":"\r\n> In general, LuceneNET has great concurrency support. The parallel DrillSideways implementation you mentioned is specifically for facets. That particular feature wasn't added until Lucene 9. As such it won't be added to LuceneNET 4.8.\r\n\r\nparallel DrillSideways implementation is added back in Lucene 7 and Better Segment Thread Map algo is part of Lucene 9 expecting both the improvements added to LuceneNet 4.8. \r\n> \r\n> However, it is currently hoped that after LuceneNET 4.8 has a production release, we will begin working on catching up LuceneNET to the latest version of Java Lucene.\r\n\r\nComing back to LuceneNet concurrency is not supported for Async also some of the concurrency works rely on Dedicated ThreadPool with the help of TaskScheduler APIs like IndexSearch, ConcurrentMergerScheduler and etc.., To handle this kind of scenario LuceneNet uses `LimitedConcurrencyLevelTaskScheduler.cs`.   ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1502965652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1506338689","html_url":"https://github.com/apache/lucenenet/pull/825#issuecomment-1506338689","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/825","id":1506338689,"node_id":"IC_kwDOAAJ06c5ZyOeB","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T04:45:04Z","updated_at":"2023-04-13T04:45:04Z","author_association":"CONTRIBUTOR","body":"@NightOwl888 this is ready for the review. I was going to port the test changes, but that test is not there yet in our version and the AnalyzingInfixSuggester will undergo changes from the version we have to the version that's references in 2017 JIRA ticket. I am leaving the test out. I feel comfortable with our current test coverage for this class that we can proceed as is.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1506338689/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1506414824","html_url":"https://github.com/apache/lucenenet/pull/826#issuecomment-1506414824","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/826","id":1506414824,"node_id":"IC_kwDOAAJ06c5ZyhDo","user":{"login":"eladmarg","id":3823205,"node_id":"MDQ6VXNlcjM4MjMyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/3823205?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmarg","html_url":"https://github.com/eladmarg","followers_url":"https://api.github.com/users/eladmarg/followers","following_url":"https://api.github.com/users/eladmarg/following{/other_user}","gists_url":"https://api.github.com/users/eladmarg/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmarg/subscriptions","organizations_url":"https://api.github.com/users/eladmarg/orgs","repos_url":"https://api.github.com/users/eladmarg/repos","events_url":"https://api.github.com/users/eladmarg/events{/privacy}","received_events_url":"https://api.github.com/users/eladmarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T06:24:38Z","updated_at":"2023-04-13T06:24:38Z","author_association":"CONTRIBUTOR","body":"fantastic! \r\nsometimes the priority queue size is so small, no need even to rent and allocate on the stack is much faster.\r\n\r\nby the way, net 7 finally introduce [PriorityQueue](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.priorityqueue-2?view=net-7.0) implementation, however this one seems to be more specific and faster.\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1506414824/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507235148","html_url":"https://github.com/apache/lucenenet/pull/821#issuecomment-1507235148","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/821","id":1507235148,"node_id":"IC_kwDOAAJ06c5Z1pVM","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T16:12:31Z","updated_at":"2023-04-13T16:12:31Z","author_association":"CONTRIBUTOR","body":"@NightOwl888 this is ready to for your review","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507235148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507264237","html_url":"https://github.com/apache/lucenenet/pull/824#issuecomment-1507264237","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/824","id":1507264237,"node_id":"IC_kwDOAAJ06c5Z1wbt","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T16:34:49Z","updated_at":"2023-04-13T16:34:49Z","author_association":"CONTRIBUTOR","body":"Added the comments suggesting the culture info override.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507264237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507470857","html_url":"https://github.com/apache/lucenenet/pull/821#issuecomment-1507470857","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/821","id":1507470857,"node_id":"IC_kwDOAAJ06c5Z2i4J","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T18:58:56Z","updated_at":"2023-04-13T18:58:56Z","author_association":"CONTRIBUTOR","body":"@NightOwl888 ready for another pass","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507470857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507622628","html_url":"https://github.com/apache/lucenenet/pull/834#issuecomment-1507622628","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/834","id":1507622628,"node_id":"IC_kwDOAAJ06c5Z3H7k","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-13T21:19:22Z","updated_at":"2023-04-13T21:19:22Z","author_association":"CONTRIBUTOR","body":"Adjusted the code based on your feedback, please take a look!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1507622628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1510583826","html_url":"https://github.com/apache/lucenenet/pull/786#issuecomment-1510583826","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/786","id":1510583826,"node_id":"IC_kwDOAAJ06c5aCa4S","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-17T02:00:17Z","updated_at":"2023-04-17T02:00:17Z","author_association":"CONTRIBUTOR","body":"Thanks for the PR.\r\n\r\nI went through and completed this task, as it was clearly going to take a lot of back and forth to work out, especially being that I admittedly didn't have a complete picture of what the test was doing. Several things it does are very subtle and you have to consider the implementation of how the test framework functions in order to work them out.\r\n\r\n1. The test has no asserts to verify the index. The test passes whether `CheckIndexes()` returns `true` or `false`. This was confusing at first, but the `TestUtil.CheckIndex()` method will throw an exception if it detects index corruption, which is the failure condition we are looking for.\r\n2. Passing the directory path to the forked test was a bit of a challenge. Especially being that the `tmpDir` system property hadn't been implemented and the test internally calls `GetTempDirectory()` with no way to override. In fact, the test framework is still missing a few features. So, this test framework feature had to be implemented to get this test to function.\r\n3. The test framework automatically deletes the index directory at the end of a test run (and technically, it is cleaned up prior to that at the end of the `TestNRTThreads_Mem()` method. This had me scratching my head for awhile as to how we would have any results to test on disk. The test relies on the crash to ensure the index stays persisted. This also means there will only ever by a single index (or no index) to check even though the base class test is called in a loop several times.\r\n4. Being that the test runs inside NUnit and NUnit has safeguards in place to ensure an uncaught exception doesn't bring down the test runner, it would have been challenging to bypass this behavior. It turned out to be simpler to crash the process from the outside using [Process.Kill()](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.kill?view=net-7.0). Unfortunately, `Process.Kill()` doesn't function to kill the current process, only another process.\r\n5. Getting the process id of the process to kill was also challenging. `dotnet test` runs an executable named `vstest.console.exe`. This executable in turn runs `testhost.exe` which runs the tests. It is the latter we need to kill, not the process that we originally started. I went down several wrong turns before I realized that the process id could simply be logged to a file and then read back from our original test so it could start the thread to kill it after x amount of time. However, that does mean another shared path that we have to create in the original test and pass the file name to the fork.\r\n6. I originally suggested using environment variables to configure system properties locally. However, in our CI environments we create a `lucene.testSettings.json` file rather than passing them in on the command line. This configuration file overrides any environment variables and it applies to all tests in all subdirectories where it exists. So, for the settings to override the config file, we needed to pass the settings on the command line and the syntax for doing so is [very ugly and requires escaping](https://github.com/microsoft/vstest/issues/862#issuecomment-621737720). Fortunately, because we are using `UseShellExecute = false` we don't have any inconsistency between Windows, Linux, and macOS, but it does require a different syntax to properly escape in C# in order to pass the correct escape characters into `dotnet test`.\r\n\r\nUltimately, we got it done, though. It took a lot of research and analysis to pull off.\r\n\r\nDo note that creating the directory has been moved inside of the loop because I realized that if it were left a single shared directory all of the loops would put results into the same temp directory that is checked. And since they are checked in lexicographical order and always return on the first index checked, there is a high probability that if the first check fails most of the rest of the checks would also fail.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1510583826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518224999","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518224999","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518224999,"node_id":"IC_kwDOAAJ06c5afkZn","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-21T18:57:05Z","updated_at":"2023-04-22T02:47:40Z","author_association":"CONTRIBUTOR","body":"The failing tests do not appear to be there due to my changes.\r\n\r\nreturn new J2N.Randomizer(random.NextInt64());\r\n\r\nNextInt64() is not available on Random before .net 6. Not sure what the fix here is for that, let me know if you have any suggestions, @NightOwl888 . Thanks!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518224999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518413339","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518413339","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518413339,"node_id":"IC_kwDOAAJ06c5agSYb","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-21T23:08:26Z","updated_at":"2023-04-22T02:51:24Z","author_association":"CONTRIBUTOR","body":"I think I see what I can do here next, remove .net5 and .net46 targets for the facet project should make the issue go away. Me removing Slow attribute enabled a new code path. Should be able to adjust later today.\r\n\r\nUPDATE: never mind, the test projects inherit the framework target node value, so changing it there would change it everywhere.\r\n\r\nNot sure how to proceed here. It feels like we either stop using NextInt64 or drop .net5?","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518413339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518698814","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518698814","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518698814,"node_id":"IC_kwDOAAJ06c5ahYE-","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-22T16:34:28Z","updated_at":"2023-04-22T16:34:28Z","author_association":"CONTRIBUTOR","body":"> Not sure how to proceed here. It feels like we either stop using NextInt64 or drop .net5?\r\n\r\n[NextInt64()](https://github.com/NightOwl888/RandomizedTesting/blob/main/src/RandomizedTesting.Generators/Support/RandomExtensions.cs#L119) is an extension method in RandomizedTesting.Generators. However, I noticed that it doesn't cascade the call to the correct random implementation when the `Random` instance is a `J2N.Randomizer`, which I have submitted a fix for in https://github.com/NightOwl888/RandomizedTesting/pull/1. That won't affect what you are doing, though and we can upgrade RandomizedTesting.Generators later.\r\n\r\nWe most definitely do not want to drop tests for `net5.0` and `net461` as that would leave a gap in our test coverage. Namely, we wouldn't have any tests for the `netstandard2.1` or `netstandard2.0` assemblies.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518698814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518920761","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518920761","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518920761,"node_id":"IC_kwDOAAJ06c5aiOQ5","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-23T02:14:10Z","updated_at":"2023-04-23T02:14:10Z","author_association":"CONTRIBUTOR","body":"Figured out what's up with the NextInt64 call, I removed the using for extension method as my IDE showed it as not being used, but as we can see, that gets used under different .net framework versions. I will have to keep that in mind.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518920761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518920852","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518920852","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518920852,"node_id":"IC_kwDOAAJ06c5aiOSU","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-23T02:14:37Z","updated_at":"2023-04-23T02:14:37Z","author_association":"CONTRIBUTOR","body":"@NightOwl888 ready for your review again.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518920852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518921816","html_url":"https://github.com/apache/lucenenet/pull/838#issuecomment-1518921816","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/838","id":1518921816,"node_id":"IC_kwDOAAJ06c5aiOhY","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-23T02:20:37Z","updated_at":"2023-04-23T02:21:14Z","author_association":"CONTRIBUTOR","body":"> Figured out what's up with the NextInt64 call, I removed the using for extension method as my IDE showed it as not being used, but as we can see, that gets used under different .net framework versions. I will have to keep that in mind\r\n\r\nActually, since we consistently use J2N.Randomizer, it will call the overridden NextInt64() since it is a subclass of System.Random. The concrete method takes precedence over the extension method. But as previously mentioned, the extension method currently has a different implementation than the concrete method, so it will vary depending on whether dotnet supplies the method or not. ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1518921816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1519611247","html_url":"https://github.com/apache/lucenenet/issues/817#issuecomment-1519611247","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/817","id":1519611247,"node_id":"IC_kwDOAAJ06c5ak21v","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-24T08:22:15Z","updated_at":"2023-04-24T08:22:15Z","author_association":"CONTRIBUTOR","body":"cc: @NightOwl888 , @laimis ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1519611247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1523048546","html_url":"https://github.com/apache/lucenenet/issues/836#issuecomment-1523048546","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/836","id":1523048546,"node_id":"IC_kwDOAAJ06c5ax-Bi","user":{"login":"Jeevananthan-23","id":71455761,"node_id":"MDQ6VXNlcjcxNDU1NzYx","avatar_url":"https://avatars.githubusercontent.com/u/71455761?v=4","gravatar_id":"","url":"https://api.github.com/users/Jeevananthan-23","html_url":"https://github.com/Jeevananthan-23","followers_url":"https://api.github.com/users/Jeevananthan-23/followers","following_url":"https://api.github.com/users/Jeevananthan-23/following{/other_user}","gists_url":"https://api.github.com/users/Jeevananthan-23/gists{/gist_id}","starred_url":"https://api.github.com/users/Jeevananthan-23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jeevananthan-23/subscriptions","organizations_url":"https://api.github.com/users/Jeevananthan-23/orgs","repos_url":"https://api.github.com/users/Jeevananthan-23/repos","events_url":"https://api.github.com/users/Jeevananthan-23/events{/privacy}","received_events_url":"https://api.github.com/users/Jeevananthan-23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-26T09:03:20Z","updated_at":"2023-04-26T09:03:20Z","author_association":"CONTRIBUTOR","body":"@NightOwl888, as a part of investigating Lucene.Net.Facet and making sure the concurrency for DrillSideways class should implement as Lucene(Java) DrillSideways implementation with ConcurrentDrillSideways [here](https://github.com/apache/lucene/blob/0a525ce2aba572855ce045e77f3a8c9acac5a199/lucene/facet/src/java/org/apache/lucene/facet/DrillSideways.java#L123) \r\n\r\n On large document set, the single threaded collection can be really slow #817 \r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1523048546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1526443005","html_url":"https://github.com/apache/lucenenet/pull/844#issuecomment-1526443005","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/844","id":1526443005,"node_id":"IC_kwDOAAJ06c5a-6v9","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T20:55:22Z","updated_at":"2023-04-27T20:55:22Z","author_association":"CONTRIBUTOR","body":"Applied the changes locally, can confirm that TestBig() looks better now.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1526443005/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1526618118","html_url":"https://github.com/apache/lucenenet/issues/262#issuecomment-1526618118","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/262","id":1526618118,"node_id":"IC_kwDOAAJ06c5a_lgG","user":{"login":"Almas1997","id":2045710,"node_id":"MDQ6VXNlcjIwNDU3MTA=","avatar_url":"https://avatars.githubusercontent.com/u/2045710?v=4","gravatar_id":"","url":"https://api.github.com/users/Almas1997","html_url":"https://github.com/Almas1997","followers_url":"https://api.github.com/users/Almas1997/followers","following_url":"https://api.github.com/users/Almas1997/following{/other_user}","gists_url":"https://api.github.com/users/Almas1997/gists{/gist_id}","starred_url":"https://api.github.com/users/Almas1997/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Almas1997/subscriptions","organizations_url":"https://api.github.com/users/Almas1997/orgs","repos_url":"https://api.github.com/users/Almas1997/repos","events_url":"https://api.github.com/users/Almas1997/events{/privacy}","received_events_url":"https://api.github.com/users/Almas1997/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T22:19:37Z","updated_at":"2023-04-27T22:19:37Z","author_association":"NONE","body":"I'm porting my application from .Net framework/Lucene 3.0.3 to .Net 7/Lucene 4.8.0.\r\nAfter several single thread/multithread tests I discovered that using of SimpleFSDirectory is almost 2 times faster than MMapDirectory. \r\nIndex size is ~ 150Mb\r\nJetBrains dottrace shows that most of time is spent by MMap related stuff.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1526618118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1527500107","html_url":"https://github.com/apache/lucenenet/pull/844#issuecomment-1527500107","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/844","id":1527500107,"node_id":"IC_kwDOAAJ06c5bC81L","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-28T12:35:40Z","updated_at":"2023-04-28T12:35:40Z","author_association":"CONTRIBUTOR","body":"This also fixes #836. The randomization seed being reused across threads ends up triggering caching paths as well as generating less data during the tests, thus matching java Lucene behavior and running times. ","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1527500107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528549551","html_url":"https://github.com/apache/lucenenet/pull/847#issuecomment-1528549551","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/847","id":1528549551,"node_id":"IC_kwDOAAJ06c5bG9Cv","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T02:55:43Z","updated_at":"2023-04-29T02:55:43Z","author_association":"CONTRIBUTOR","body":"This fixes #408","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528549551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528628725","html_url":"https://github.com/apache/lucenenet/pull/847#issuecomment-1528628725","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/847","id":1528628725,"node_id":"IC_kwDOAAJ06c5bHQX1","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T03:49:59Z","updated_at":"2023-04-29T03:49:59Z","author_association":"CONTRIBUTOR","body":"Tests on azure: https://dev.azure.com/lucene-net-temp4/Main/_build/results?buildId=236&view=results","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528628725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528876126","html_url":"https://github.com/apache/lucenenet/pull/847#issuecomment-1528876126","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/847","id":1528876126,"node_id":"IC_kwDOAAJ06c5bIMxe","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T21:26:20Z","updated_at":"2023-04-29T21:26:20Z","author_association":"CONTRIBUTOR","body":"Alright, thanks for the feedback, really useful! I ended up including DirectoryTaxonomyReader in this PR, in addition to the writer. Adjusted the description for that.\r\n\r\nThis edit pass also includes more XML docs updates, more comments as well.\r\n\r\nI did not end up doing the IndexFactory suggested updated for several reasons:\r\n\r\n- the change surface increases quite a bit if we go that route, trying to keep the PRs useful while addressing the issues but at the same time not changing too many things at the same time\r\n\r\n- I went through with the exercise initially to use separate indexconfig and indexwriter factories just to see what it would look like and it felt awkward, as the DirectoryTaxonomyWriter ties the two together. Adding all the additional constructors to account for permutations of writerfactory and config factory also do not seem to add much value just increase the surface area that needs to be maintained and documented.\r\n\r\n- conceptually how TaxonomyDirectoryWriter intends to use config and writer is quite different from let's say AnalyzingInfixSuggester. The latter requires analyzer, the former ignores it.\r\n\r\n- AnalyzingInfixSuggester is second to last place where we need to eliminate virtual method call and with its specific way of using the writer, we should keep that logic tied to it vs pushing to the core of Lucene.Net.Index namespace.\r\n\r\nHopefully these make sense!","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528876126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528921497","html_url":"https://github.com/apache/lucenenet/issues/839#issuecomment-1528921497","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/839","id":1528921497,"node_id":"IC_kwDOAAJ06c5bIX2Z","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-30T02:18:20Z","updated_at":"2023-04-30T02:18:20Z","author_association":"CONTRIBUTOR","body":"That's a shame, I should have known it was too good to be true as a fix.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1528921497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1529910883","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1529910883","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1529910883,"node_id":"IC_kwDOAAJ06c5bMJZj","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-01T16:15:13Z","updated_at":"2023-05-01T16:15:13Z","author_association":"CONTRIBUTOR","body":"Closing this issue as I haven't heard back from the poster. I was not able to reproduce the issue with the latest beta builds: https://github.com/laimis/lucene-issue-792/blob/main/Program.cs\r\n\r\nI am sure we will comment out the debug stream once we port to further versions, but I am reluctant to do so ahead of those efforts as we are adding changes to complete 4.8","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1529910883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1530572595","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1530572595","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1530572595,"node_id":"IC_kwDOAAJ06c5bOq8z","user":{"login":"xsharper","id":14009277,"node_id":"MDQ6VXNlcjE0MDA5Mjc3","avatar_url":"https://avatars.githubusercontent.com/u/14009277?v=4","gravatar_id":"","url":"https://api.github.com/users/xsharper","html_url":"https://github.com/xsharper","followers_url":"https://api.github.com/users/xsharper/followers","following_url":"https://api.github.com/users/xsharper/following{/other_user}","gists_url":"https://api.github.com/users/xsharper/gists{/gist_id}","starred_url":"https://api.github.com/users/xsharper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xsharper/subscriptions","organizations_url":"https://api.github.com/users/xsharper/orgs","repos_url":"https://api.github.com/users/xsharper/repos","events_url":"https://api.github.com/users/xsharper/events{/privacy}","received_events_url":"https://api.github.com/users/xsharper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-01T23:36:15Z","updated_at":"2023-05-01T23:37:09Z","author_association":"NONE","body":"Sorry, didn't realize it's specific to stdout implementation in .NET 4.8 on Windows. With project file as below\r\n\r\nluceneplayground.exe >output.txt\r\n\r\nproduces 5 bytes:\r\n\r\n41 EF BB BF 42\r\n\r\n```\r\n <Project Sdk=\"Microsoft.NET.Sdk\">\r\n  <PropertyGroup>\r\n    <OutputType>Exe</OutputType>\r\n    <TargetFramework>net48</TargetFramework>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <PackageReference Include=\"Lucene.Net\" Version=\"4.8.0-beta00016\" />\r\n    <PackageReference Include=\"Lucene.Net.Analysis.Common\" Version=\"4.8.0-beta00016\" />\r\n    <PackageReference Include=\"Lucene.Net.QueryParser\" Version=\"4.8.0-beta00016\" />\r\n  </ItemGroup>\r\n</Project>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1530572595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1531343995","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1531343995","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1531343995,"node_id":"IC_kwDOAAJ06c5bRnR7","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T11:58:36Z","updated_at":"2023-05-02T11:58:36Z","author_association":"CONTRIBUTOR","body":"Well would you look at that, can reproduce it indeed if switching to .net 4.8. Reopened for us to take a look here.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1531343995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1533098322","html_url":"https://github.com/apache/lucenenet/issues/842#issuecomment-1533098322","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/842","id":1533098322,"node_id":"IC_kwDOAAJ06c5bYTlS","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T14:10:00Z","updated_at":"2023-05-03T14:10:00Z","author_association":"CONTRIBUTOR","body":"When you say \"creates duplicate data\", what do you mean by that? The code snippet you posted does not appear to be doing any kind of index writing, so it does not seem like the issue is somewhere in Lucene and could be somewhere in your code.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1533098322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1533350609","html_url":"https://github.com/apache/lucenenet/pull/848#issuecomment-1533350609","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/848","id":1533350609,"node_id":"IC_kwDOAAJ06c5bZRLR","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T16:31:46Z","updated_at":"2023-05-03T16:31:46Z","author_association":"CONTRIBUTOR","body":"Azure test results: https://dev.azure.com/lucene-net-temp4/Main/_build/results?buildId=239&view=results (pass, 48 mins run time)","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1533350609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1534876045","html_url":"https://github.com/apache/lucenenet/issues/839#issuecomment-1534876045","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/839","id":1534876045,"node_id":"IC_kwDOAAJ06c5bfFmN","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-04T14:23:20Z","updated_at":"2023-05-04T14:23:20Z","author_association":"CONTRIBUTOR","body":"AnalyzingInfixSuggester has been modified to use config factory (#848) and we technically do not need #825 anymore. Still eventually we will get to the modifications in 825 but it will be as part of move to versions beyond 4.8.\r\n","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1534876045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1534898342","html_url":"https://github.com/apache/lucenenet/issues/670#issuecomment-1534898342","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/670","id":1534898342,"node_id":"IC_kwDOAAJ06c5bfLCm","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-04T14:37:18Z","updated_at":"2023-05-04T14:37:18Z","author_association":"CONTRIBUTOR","body":"All the issues that were reported by this rule have been addressed. Thank you for setting this up and reporting it!\r\n\r\nThe fixing PRs have been linked to the issue and can be reviewed to see what was done. In some cases we were able to ignore the warning, in other cases we created private methods that can be called from the constructor, as well as the virtual methods where it was safe to do so. In publicly exposed classes that needed the functionality we introduced factory classes that are passed to the constructor and can be extended to introduce custom behavior.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1534898342/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1542549521","html_url":"https://github.com/apache/lucenenet/issues/785#issuecomment-1542549521","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/785","id":1542549521,"node_id":"IC_kwDOAAJ06c5b8XAR","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T17:15:24Z","updated_at":"2023-05-10T17:15:24Z","author_association":"CONTRIBUTOR","body":"What you need to do here is use StringField, and not a TextField when adding lastname-sort field to the index. This will ensure that the field is not analyzed when it's being stored.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1542549521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1542698121","html_url":"https://github.com/apache/lucenenet/issues/793#issuecomment-1542698121","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/793","id":1542698121,"node_id":"IC_kwDOAAJ06c5b87SJ","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T19:30:21Z","updated_at":"2023-05-10T19:30:21Z","author_association":"CONTRIBUTOR","body":"We made some more progress. One of the items on the \"TODO\" before the release, #670 , has been addressed.\r\n\r\nI am taking a look at what to take care of next, most likely #271, although lacking a lot of context there but hopefully can find a way to clear it up a bit more.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1542698121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1544439765","html_url":"https://github.com/apache/lucenenet/issues/792#issuecomment-1544439765","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/792","id":1544439765,"node_id":"IC_kwDOAAJ06c5cDkfV","user":{"login":"laimis","id":911757,"node_id":"MDQ6VXNlcjkxMTc1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/911757?v=4","gravatar_id":"","url":"https://api.github.com/users/laimis","html_url":"https://github.com/laimis","followers_url":"https://api.github.com/users/laimis/followers","following_url":"https://api.github.com/users/laimis/following{/other_user}","gists_url":"https://api.github.com/users/laimis/gists{/gist_id}","starred_url":"https://api.github.com/users/laimis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laimis/subscriptions","organizations_url":"https://api.github.com/users/laimis/orgs","repos_url":"https://api.github.com/users/laimis/repos","events_url":"https://api.github.com/users/laimis/events{/privacy}","received_events_url":"https://api.github.com/users/laimis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:54:21Z","updated_at":"2023-05-11T17:55:39Z","author_association":"CONTRIBUTOR","body":"I was able to dig into this further, and this is rather bizarre. So first, I confirmed that Lucene.NET codebase is not doing anything funky here and is not writing those bytes explicitly. It's .net framework writing a BOM marker out when it does this in QueryParserTokenManager:\r\n\r\n```\r\ntemp_writer = new StreamWriter(Console.OpenStandardOutput(), Console.Out.Encoding);\r\ntemp_writer.AutoFlush = true;\r\n```\r\n\r\nIn your code example, you set the Console.OutputEncoding to Encoding.UTF8 and that's what it gets back when doing Console.Out.Encoding. AutoFlush being set to true flushes the stream behind the scenes and flushes the BOM marker.\r\n\r\nWhy doesn't it do that in .net 7 (that's the only .net core fx I tried, it might not be doing that in other .net core versions either)? It appears that something is different between framework versions as to how this line is handled:\r\n\r\n`Console.OutputEncoding=Encoding.UTF8;`\r\n\r\nI wrote a quick test where I output to console Console.OutputEncoding and Console.Out.Encoding properties:\r\n\r\n```\r\nConsole.WriteLine(\"before Console.Out encoding: \" + Console.Out.Encoding);\r\nConsole.WriteLine(\"before Console.OutputEncoding: \" + Console.OutputEncoding);\r\nConsole.OutputEncoding=System.Text.Encoding.UTF8;\r\nConsole.WriteLine(\"after Console.Out encoding: \" + Console.Out.Encoding);\r\nConsole.WriteLine(\"after Console.OutputEncoding: \" + Console.OutputEncoding);\r\n```\r\n\r\nIn .net fx 4.8, here is the output on my machine:\r\n\r\n> before Console.Out encoding: System.Text.SBCSCodePageEncoding\r\n> before Console.OutputEncoding: System.Text.SBCSCodePageEncoding\r\n> after Console.Out encoding: System.Text.UTF8Encoding\r\n> after Console.OutputEncoding: System.Text.UTF8Encoding\r\n\r\nNow .net 7:\r\n\r\n> before Console.Out encoding: System.Text.OSEncoding\r\n> before Console.OutputEncoding: System.Text.OSEncoding\r\n> after Console.Out encoding: System.Text.ConsoleEncoding\r\n> after Console.OutputEncoding: System.Text.UTF8Encoding\r\n\r\nSystem.Out.Encoding in .net 7 is not set to UTF8Encoding when you set Console.OutputEncoding and thus the BOM marker is not written out.\r\n\r\nReally bizarre.\r\n\r\nAnyway, I will keep this issue open because we can comment out the code that Lucene Java version commented out but at least we know exactly what's going on. You could argue that perhaps Console.Out.Encoding should not be used in QueryParserTokenManager and instead Console.OutputEncoding should be used. But that's the only place where this is happening and commenting out should close the chapter on this.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1544439765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1546627315","html_url":"https://github.com/apache/lucenenet/issues/851#issuecomment-1546627315","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/851","id":1546627315,"node_id":"IC_kwDOAAJ06c5cL6jz","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T11:28:42Z","updated_at":"2023-05-13T12:56:32Z","author_association":"CONTRIBUTOR","body":"This is basically a duplicate of [#460](https://github.com/apache/lucenenet/issues/460), except that issue provides more details about options we could consider and this is the option that we will probably ultimately go with.\r\n\r\nIt is no longer recommend putting IKVM Maven-hosted libraries on NuGet. So we technically should no longer use [OpenNLP.NET](https://github.com/sergey-tihon/OpenNLP.NET).\r\n\r\nInstead, there is now a `<MavenReference>` that can be used like `<PackageReference>`. This option downloads the library from Maven and converts it on the fly to IL code. It also resolves the correct version of the Maven components to use based on any other Maven dependencies.\r\n\r\n```xml\r\n  <ItemGroup>\r\n    <PackageReference Include=\"IKVM.Maven.Sdk\" Version=\"8.5.0-prerelease0001\" />\r\n  </ItemGroup>\r\n  \r\n  <ItemGroup>\r\n    <MavenReference Include=\"org.apache.opennlp:opennlp-tools\" Version=\"1.9.4\" />\r\n  </ItemGroup>\r\n```\r\n\r\nThat being said, there have been some reports of some libraries not being able to be built on macOS with IKVM. Using the [OpenNLP.NET](https://github.com/sergey-tihon/OpenNLP.NET) library circumvents that problem because we are depending on a compiled library that doesn't need to be built when a macOS machine references us.\r\n\r\nThere has been some work in https://github.com/ikvmnet/ikvm/pull/311 to get it building on macOS, but I am not sure how ready it is. I am also not sure if the problems even come into play for `opennlp-tools` or any of the other opennlp packages. I have done some testing, but haven't yet run into any issues on macOS with opennlp-tools.\r\n\r\nOf course, moving from [OpenNLP.NET](https://github.com/sergey-tihon/OpenNLP.NET) to `<MavenReference>` is a breaking change for anyone that depends on us. So, we should aim to migrate sooner rather than later, even if macOS support isn't yet ready.\r\n\r\n> NOTE: The [lucene-analyzers-opennlp package](https://mvnrepository.com/artifact/org.apache.lucene/lucene-analyzers-opennlp/8.2.0) references only [opennlp-tools](https://mvnrepository.com/artifact/org.apache.opennlp/opennlp-tools/1.9.1). However, [OpenNLP.NET](https://github.com/sergey-tihon/OpenNLP.NET) packs all OpenNLP packages into the same DLL. It is possible users may need to use other opennlp packages from Maven depending on their requirements. `<MavenReference>` helps to ensure all of these other packages and any opennlp dependencies are version and API compatible.\r\n\r\n> NOTE: We should probably aim to use the latest stable version of `IKVM.Maven.Sdk`. Releases happen fairly frequently, thanks to Jerome. I suspect it will be out of pre-release before we are ready to roll 4.8.0-beta00017. 8.5.0-prerelease0001 updates to a more recent version of Java SE 8, which probably contains lots of security patches the older one doesn't have.\r\n\r\n### Testing macOS Builds\r\n\r\nWe can test to ensure that builds will work on macOS. However, I would suggest making a temporary change to ensure that it works and then revert it once we have it confirmed.\r\n\r\nFor Azure DevOps, we have it set up to always build on Windows, but that should be easy to change [here](https://github.com/apache/lucenenet/blob/33b40ab102aa28d47b4fce89c12e62b01e3f7439/azure-pipelines.yml#L102). This has never been tested AFAIK, so there is a chance that it won't work due to some other scripting issue.\r\n\r\nFor GitHub Actions, the test projects are built on the fly on the same platform they are tested on. All that we would need to test an IKVM build on macOS is to run the generation script and pass in `@('windows-latest', 'ubuntu-latest', 'macos-latest')` [here](https://github.com/apache/lucenenet/blob/33b40ab102aa28d47b4fce89c12e62b01e3f7439/.github/workflows/Generate-TestWorkflows.ps1#L73). This has already been tested, so it should \"just work\".\r\n\r\n### Fallback Plan\r\n\r\nIf we have a problem building on macOS, we can report the issue to [IKVM](https://github.com/ikvmnet/ikvm).\r\n\r\nIf the build issue isn't fixed before the 4.8.0-beta00017 release, we can revert to using OpenNLP.NET for the time being using the changes from #852. Fortunately, this package doesn't have a lot of downloads, so the switch back to `<MavenReference>` later won't affect many users.\r\n\r\nAlternatively, we could just release with `<MavenReference>` and when IKVM is patched it will be possible to build on macOS by adding a direct `<PackageReference>` to a specific version of IKVM that has the patch.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1546627315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1546725029","html_url":"https://github.com/apache/lucenenet/issues/772#issuecomment-1546725029","issue_url":"https://api.github.com/repos/apache/lucenenet/issues/772","id":1546725029,"node_id":"IC_kwDOAAJ06c5cMSal","user":{"login":"NightOwl888","id":1538288,"node_id":"MDQ6VXNlcjE1MzgyODg=","avatar_url":"https://avatars.githubusercontent.com/u/1538288?v=4","gravatar_id":"","url":"https://api.github.com/users/NightOwl888","html_url":"https://github.com/NightOwl888","followers_url":"https://api.github.com/users/NightOwl888/followers","following_url":"https://api.github.com/users/NightOwl888/following{/other_user}","gists_url":"https://api.github.com/users/NightOwl888/gists{/gist_id}","starred_url":"https://api.github.com/users/NightOwl888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightOwl888/subscriptions","organizations_url":"https://api.github.com/users/NightOwl888/orgs","repos_url":"https://api.github.com/users/NightOwl888/repos","events_url":"https://api.github.com/users/NightOwl888/events{/privacy}","received_events_url":"https://api.github.com/users/NightOwl888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T18:23:05Z","updated_at":"2023-05-13T18:23:05Z","author_association":"CONTRIBUTOR","body":"@Dunnymeister\r\n\r\nThe fix will be in the next beta release. In the meantime, use `new DateTime().ToUniversalTime()` to work around.","reactions":{"url":"https://api.github.com/repos/apache/lucenenet/issues/comments/1546725029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]