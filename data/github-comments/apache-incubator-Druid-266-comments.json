[{"url":"https://api.github.com/repos/apache/druid/issues/comments/515571795","html_url":"https://github.com/apache/druid/issues/8171#issuecomment-515571795","issue_url":"https://api.github.com/repos/apache/druid/issues/8171","id":515571795,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU3MTc5NQ==","user":{"login":"WilliamWhispell","id":1390230,"node_id":"MDQ6VXNlcjEzOTAyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1390230?v=4","gravatar_id":"","url":"https://api.github.com/users/WilliamWhispell","html_url":"https://github.com/WilliamWhispell","followers_url":"https://api.github.com/users/WilliamWhispell/followers","following_url":"https://api.github.com/users/WilliamWhispell/following{/other_user}","gists_url":"https://api.github.com/users/WilliamWhispell/gists{/gist_id}","starred_url":"https://api.github.com/users/WilliamWhispell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilliamWhispell/subscriptions","organizations_url":"https://api.github.com/users/WilliamWhispell/orgs","repos_url":"https://api.github.com/users/WilliamWhispell/repos","events_url":"https://api.github.com/users/WilliamWhispell/events{/privacy}","received_events_url":"https://api.github.com/users/WilliamWhispell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T19:27:01Z","updated_at":"2019-07-26T19:27:01Z","author_association":"NONE","body":"For this test, my datasource contained about 70,000 rows and they all were in the same segment. Only data for 2019-07-26 was loaded. About 30,000 entries are null.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515571795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515592007","html_url":"https://github.com/apache/druid/pull/6972#issuecomment-515592007","issue_url":"https://api.github.com/repos/apache/druid/issues/6972","id":515592007,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU5MjAwNw==","user":{"login":"mohammadjkhan","id":18354068,"node_id":"MDQ6VXNlcjE4MzU0MDY4","avatar_url":"https://avatars.githubusercontent.com/u/18354068?v=4","gravatar_id":"","url":"https://api.github.com/users/mohammadjkhan","html_url":"https://github.com/mohammadjkhan","followers_url":"https://api.github.com/users/mohammadjkhan/followers","following_url":"https://api.github.com/users/mohammadjkhan/following{/other_user}","gists_url":"https://api.github.com/users/mohammadjkhan/gists{/gist_id}","starred_url":"https://api.github.com/users/mohammadjkhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohammadjkhan/subscriptions","organizations_url":"https://api.github.com/users/mohammadjkhan/orgs","repos_url":"https://api.github.com/users/mohammadjkhan/repos","events_url":"https://api.github.com/users/mohammadjkhan/events{/privacy}","received_events_url":"https://api.github.com/users/mohammadjkhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T20:38:23Z","updated_at":"2019-07-26T20:42:08Z","author_association":"CONTRIBUTOR","body":"> @nishantmonu51 @jon-wei\r\n> \r\n> To summarize some of the comments and feedbacks in this PR, and to establish a consensus/direction for next steps, the following are being adopted within this PR that I’m now working on:\r\n> \r\n> 1. Remove all Authenticator and Escalator rolling credential update logic/feature.\r\n> 2. Keep LDAP functionality within existing basic auth extension as already done in the PR\r\n> 3. Expose additional LDAP config properties for SSLContext so users can configure/set the keystore, truststore, protocol, etc\r\n> 4. Separate out the authorizer checks between metadata-backed store user and LDAP group since the incoming request would be authorized against only one or the other\r\n> \r\n> Thanks\r\n\r\n@nishantmonu51 @jon-wei The above requested changes based on your review are completed/done. Also fixed https://github.com/apache/incubator-druid/pull/6972#discussion_r270156604","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515592007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515620162","html_url":"https://github.com/apache/druid/pull/8115#issuecomment-515620162","issue_url":"https://api.github.com/repos/apache/druid/issues/8115","id":515620162,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyMDE2Mg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T22:40:38Z","updated_at":"2019-07-26T22:40:38Z","author_association":"CONTRIBUTOR","body":"/subscribe","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515620162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515621173","html_url":"https://github.com/apache/druid/pull/8100#issuecomment-515621173","issue_url":"https://api.github.com/repos/apache/druid/issues/8100","id":515621173,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyMTE3Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T22:46:44Z","updated_at":"2019-07-26T22:46:44Z","author_association":"CONTRIBUTOR","body":"Hey @samarthjain, I see this error in CI,\r\n\r\n```\r\nCaused by: java.lang.ClassNotFoundException: org.apache.druid.query.expression.LookupEnabledTestExprMacroTable\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\t... 28 more\r\n```\r\n\r\nYou probably need this in your pom:\r\n\r\n```\r\n        <dependency>\r\n            <groupId>org.apache.druid</groupId>\r\n            <artifactId>druid-server</artifactId>\r\n            <version>${project.parent.version}</version>\r\n            <scope>test</scope>\r\n        </dependency>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515621173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515625588","html_url":"https://github.com/apache/druid/pull/8048#issuecomment-515625588","issue_url":"https://api.github.com/repos/apache/druid/issues/8048","id":515625588,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyNTU4OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T23:12:46Z","updated_at":"2019-07-26T23:12:46Z","author_association":"CONTRIBUTOR","body":"> Thanks for trying to help us make Apache Druid (incubating) be the best it can be! Please fill out as much of the following information as is possible (where relevant) to help make the intention and scope of this PR clear in order to ease review.\r\n\r\nSomething like this would be nice, how about also mentioning that in addition filling in relevant things, people should delete things that are _irrelevant_.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515625588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515625938","html_url":"https://github.com/apache/druid/pull/8100#issuecomment-515625938","issue_url":"https://api.github.com/repos/apache/druid/issues/8100","id":515625938,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyNTkzOA==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T23:15:00Z","updated_at":"2019-07-26T23:15:00Z","author_association":"CONTRIBUTOR","body":"Hmm, I do have that dependency added.\r\nhttps://github.com/apache/incubator-druid/blob/adeac28b1e774990ba5fad8a52e2d7d3abe7160c/extensions-contrib/tdigestsketch/pom.xml#L157\r\n\r\nTaking a closer look.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515625938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515626507","html_url":"https://github.com/apache/druid/pull/8100#issuecomment-515626507","issue_url":"https://api.github.com/repos/apache/druid/issues/8100","id":515626507,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyNjUwNw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T23:18:19Z","updated_at":"2019-07-26T23:18:19Z","author_association":"CONTRIBUTOR","body":"Oh, actually I think you need this:\r\n\r\n```\r\n        <dependency>\r\n            <groupId>org.apache.druid</groupId>\r\n            <artifactId>druid-server</artifactId>\r\n            <version>${project.parent.version}</version>\r\n            <type>test-jar</type>\r\n            <scope>test</scope>\r\n        </dependency>\r\n```\r\n\r\n(The `<type>test-jar</type>` part in particular)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515626507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515645366","html_url":"https://github.com/apache/druid/pull/8162#issuecomment-515645366","issue_url":"https://api.github.com/repos/apache/druid/issues/8162","id":515645366,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY0NTM2Ng==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T02:40:07Z","updated_at":"2019-07-27T02:40:07Z","author_association":"CONTRIBUTOR","body":"Just pushing random commits into here to get Travis to re-run","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515645366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515645855","html_url":"https://github.com/apache/druid/pull/8164#issuecomment-515645855","issue_url":"https://api.github.com/repos/apache/druid/issues/8164","id":515645855,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY0NTg1NQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T02:49:20Z","updated_at":"2019-07-27T02:49:20Z","author_association":"CONTRIBUTOR","body":"not as part of this PR but in the future it could be cool to have the option to render a diff:\r\na la https://securingsincity.github.io/react-ace/diff.html","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515645855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515663246","html_url":"https://github.com/apache/druid/pull/8060#issuecomment-515663246","issue_url":"https://api.github.com/repos/apache/druid/issues/8060","id":515663246,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY2MzI0Ng==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T07:54:09Z","updated_at":"2019-07-27T07:54:09Z","author_association":"CONTRIBUTOR","body":"@leventov  self reviewed again! and merged with the master branch!  looks good to me. let me know if you want me to open new PR by closing the existing one! ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515663246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515699040","html_url":"https://github.com/apache/druid/pull/8115#issuecomment-515699040","issue_url":"https://api.github.com/repos/apache/druid/issues/8115","id":515699040,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY5OTA0MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T17:03:16Z","updated_at":"2019-07-27T17:03:16Z","author_association":"CONTRIBUTOR","body":"@himanshug I requested a review to you :)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515699040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515715161","html_url":"https://github.com/apache/druid/pull/8177#issuecomment-515715161","issue_url":"https://api.github.com/repos/apache/druid/issues/8177","id":515715161,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTcxNTE2MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-27T21:34:54Z","updated_at":"2019-07-27T21:34:54Z","author_association":"CONTRIBUTOR","body":"The test failures look suspicious. There is no such method as `ByteBuffer position(int)` in `java.nio.ByteBuffer` in Java 8, which is what the error message is referring to. I wonder if the curator-framework jar was built with JDK 9+ (unintentionally? since I don't think they intended to drop Java 8 support).\r\n\r\n```\r\n[ERROR] testSanity(org.apache.druid.curator.announcement.AnnouncerTest)  Time elapsed: 1.158 s  <<< ERROR!\r\njava.lang.NoSuchMethodError: java.nio.ByteBuffer.position(I)Ljava/nio/ByteBuffer;\r\n\tat org.apache.curator.framework.imps.GzipCompressionProvider.skip(GzipCompressionProvider.java:319)\r\n\tat org.apache.curator.framework.imps.GzipCompressionProvider.doReadHeader(GzipCompressionProvider.java:290)\r\n\tat org.apache.curator.framework.imps.GzipCompressionProvider.readGzipHeader(GzipCompressionProvider.java:273)\r\n\tat org.apache.curator.framework.imps.GzipCompressionProvider.decompress(GzipCompressionProvider.java:195)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515715161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763342","html_url":"https://github.com/apache/druid/issues/6433#issuecomment-515763342","issue_url":"https://api.github.com/repos/apache/druid/issues/6433","id":515763342,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc2MzM0Mg==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T13:33:23Z","updated_at":"2019-07-28T13:33:48Z","author_association":"CONTRIBUTOR","body":"This is still the case.  Adding a unit test in **CalciteQueryTest** (for testing) with query\r\n` SELECT min('foo') FROM druid.foo` \r\nresults in the following:\r\n\r\n```\r\njava.lang.RuntimeException: Error while applying rule DruidQueryRule(AGGREGATE), args [rel#20:LogicalAggregate.NONE.[](input=rel#19:Subset#2.NONE.[],group={},EXPR$0=MIN($0)), rel#26:DruidQueryRel.NONE.[](query={\"queryType\":\"scan\",\"dataSource\":{\"type\":\"table\",\"name\":\"foo\"},\"intervals\":{\"type\":\"intervals\",\"intervals\":[\"-146136543-09-08T08:23:32.096Z/146140482-04-24T15:36:27.903Z\"]},\"virtualColumns\":[{\"type\":\"expression\",\"name\":\"v0\",\"expression\":\"'foo'\",\"outputType\":\"STRING\"}],\"resultFormat\":\"compactedList\",\"batchSize\":20480,\"limit\":9223372036854775807,\"order\":\"none\",\"filter\":null,\"columns\":[\"v0\"],\"legacy\":false,\"context\":{\"defaultTimeout\":300000,\"maxScatterGatherBytes\":9223372036854775807,\"sqlCurrentTimestamp\":\"2000-01-01T00:00:00Z\",\"sqlQueryId\":\"dummy\",\"vectorize\":\"false\"},\"descending\":false,\"granularity\":{\"type\":\"all\"}},signature={v0:STRING})]\r\n\r\n\tat org.apache.calcite.plan.volcano.VolcanoRuleCall.onMatch(VolcanoRuleCall.java:236)\r\n\tat org.apache.calcite.plan.volcano.VolcanoPlanner.findBestExp(VolcanoPlanner.java:646)\r\n\tat org.apache.calcite.tools.Programs$RuleSetProgram.run(Programs.java:339)\r\n\tat org.apache.calcite.tools.Programs$SequenceProgram.run(Programs.java:358)\r\n\tat org.apache.calcite.prepare.PlannerImpl.transform(PlannerImpl.java:337)\r\n\tat org.apache.druid.sql.calcite.planner.DruidPlanner.planWithDruidConvention(DruidPlanner.java:119)\r\n\tat org.apache.druid.sql.calcite.planner.DruidPlanner.plan(DruidPlanner.java:89)\r\n\tat org.apache.druid.sql.SqlLifecycle.plan(SqlLifecycle.java:141)\r\n\tat org.apache.druid.sql.SqlLifecycle.planAndAuthorize(SqlLifecycle.java:207)\r\n\tat org.apache.druid.sql.SqlLifecycle.runSimple(SqlLifecycle.java:244)\r\n\tat org.apache.druid.sql.calcite.BaseCalciteQueryTest.getResults(BaseCalciteQueryTest.java:619)\r\n\tat org.apache.druid.sql.calcite.BaseCalciteQueryTest.getResults(BaseCalciteQueryTest.java:566)\r\n\tat org.apache.druid.sql.calcite.BaseCalciteQueryTest.testQuery(BaseCalciteQueryTest.java:554)\r\n\tat org.apache.druid.sql.calcite.BaseCalciteQueryTest.testQuery(BaseCalciteQueryTest.java:464)\r\n\tat org.apache.druid.sql.calcite.CalciteQueryTest.testMin(CalciteQueryTest.java:5513)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.apache.druid.sql.calcite.util.QueryLogHook$1.evaluate(QueryLogHook.java:95)\r\n\tat org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)\r\n\tat org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)\r\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: org.apache.druid.java.util.common.ISE: Cannot create aggregator factory for type[STRING]\r\n\tat org.apache.druid.sql.calcite.aggregation.builtin.MinSqlAggregator.createMinAggregatorFactory(MinSqlAggregator.java:72)\r\n\tat org.apache.druid.sql.calcite.aggregation.builtin.MinSqlAggregator.getAggregation(MinSqlAggregator.java:53)\r\n\tat org.apache.druid.sql.calcite.aggregation.builtin.SimpleSqlAggregator.toDruidAggregation(SimpleSqlAggregator.java:86)\r\n\tat org.apache.druid.sql.calcite.rule.GroupByRules.translateAggregateCall(GroupByRules.java:131)\r\n\tat org.apache.druid.sql.calcite.rel.DruidQuery.computeAggregations(DruidQuery.java:435)\r\n\tat org.apache.druid.sql.calcite.rel.DruidQuery.computeGrouping(DruidQuery.java:285)\r\n\tat org.apache.druid.sql.calcite.rel.DruidQuery.<init>(DruidQuery.java:167)\r\n\tat org.apache.druid.sql.calcite.rel.PartialDruidQuery.build(PartialDruidQuery.java:306)\r\n\tat org.apache.druid.sql.calcite.rel.DruidQueryRel.toDruidQuery(DruidQueryRel.java:97)\r\n\tat org.apache.druid.sql.calcite.rel.DruidQueryRel.toDruidQueryForExplaining(DruidQueryRel.java:109)\r\n\tat org.apache.druid.sql.calcite.rel.DruidRel.isValidDruidQuery(DruidRel.java:62)\r\n\tat org.apache.druid.sql.calcite.rule.DruidRules$DruidQueryRule.onMatch(DruidRules.java:132)\r\n\tat org.apache.calcite.plan.volcano.VolcanoRuleCall.onMatch(VolcanoRuleCall.java:212)\r\n\t... 44 more\r\n```\r\nWhat is expected here to handle this ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763347","html_url":"https://github.com/apache/druid/issues/6433#issuecomment-515763347","issue_url":"https://api.github.com/repos/apache/druid/issues/6433","id":515763347,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc2MzM0Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T13:33:24Z","updated_at":"2019-07-28T13:33:24Z","author_association":"NONE","body":"This issue is no longer marked as stale.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763552","html_url":"https://github.com/apache/druid/issues/8166#issuecomment-515763552","issue_url":"https://api.github.com/repos/apache/druid/issues/8166","id":515763552,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc2MzU1Mg==","user":{"login":"nata7che","id":6080519,"node_id":"MDQ6VXNlcjYwODA1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/6080519?v=4","gravatar_id":"","url":"https://api.github.com/users/nata7che","html_url":"https://github.com/nata7che","followers_url":"https://api.github.com/users/nata7che/followers","following_url":"https://api.github.com/users/nata7che/following{/other_user}","gists_url":"https://api.github.com/users/nata7che/gists{/gist_id}","starred_url":"https://api.github.com/users/nata7che/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nata7che/subscriptions","organizations_url":"https://api.github.com/users/nata7che/orgs","repos_url":"https://api.github.com/users/nata7che/repos","events_url":"https://api.github.com/users/nata7che/events{/privacy}","received_events_url":"https://api.github.com/users/nata7che/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T13:36:24Z","updated_at":"2019-07-28T13:36:24Z","author_association":"NONE","body":"This is really problematic for us for production reasons....","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515763552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515791287","html_url":"https://github.com/apache/druid/pull/8164#issuecomment-515791287","issue_url":"https://api.github.com/repos/apache/druid/issues/8164","id":515791287,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc5MTI4Nw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T20:10:08Z","updated_at":"2019-07-28T20:10:08Z","author_association":"CONTRIBUTOR","body":"@mcbrewster could you fix conflicts please","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515791287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515791310","html_url":"https://github.com/apache/druid/pull/8172#issuecomment-515791310","issue_url":"https://api.github.com/repos/apache/druid/issues/8172","id":515791310,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc5MTMxMA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-28T20:10:24Z","updated_at":"2019-07-28T20:10:24Z","author_association":"CONTRIBUTOR","body":"@mcbrewster could you fix conflicts please","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515791310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515829203","html_url":"https://github.com/apache/druid/pull/8060#issuecomment-515829203","issue_url":"https://api.github.com/repos/apache/druid/issues/8060","id":515829203,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTgyOTIwMw==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T03:12:44Z","updated_at":"2019-07-29T03:12:44Z","author_association":"CONTRIBUTOR","body":"@leventov Sorry for squash and force push's, I did not recognize commits will be used for monitoring my changes against review! ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515829203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515842415","html_url":"https://github.com/apache/druid/issues/7818#issuecomment-515842415","issue_url":"https://api.github.com/repos/apache/druid/issues/7818","id":515842415,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTg0MjQxNQ==","user":{"login":"erindru","id":1001316,"node_id":"MDQ6VXNlcjEwMDEzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1001316?v=4","gravatar_id":"","url":"https://api.github.com/users/erindru","html_url":"https://github.com/erindru","followers_url":"https://api.github.com/users/erindru/followers","following_url":"https://api.github.com/users/erindru/following{/other_user}","gists_url":"https://api.github.com/users/erindru/gists{/gist_id}","starred_url":"https://api.github.com/users/erindru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erindru/subscriptions","organizations_url":"https://api.github.com/users/erindru/orgs","repos_url":"https://api.github.com/users/erindru/repos","events_url":"https://api.github.com/users/erindru/events{/privacy}","received_events_url":"https://api.github.com/users/erindru/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T04:44:06Z","updated_at":"2019-07-29T04:44:06Z","author_association":"NONE","body":"This also affects 0.15.0-incubating, and creating the directory also doesnt fix it\r\n\r\nI wonder if the bundled Zookeeper is wrong, eg https://stackoverflow.com/a/56631033","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515842415/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515881038","html_url":"https://github.com/apache/druid/pull/8177#issuecomment-515881038","issue_url":"https://api.github.com/repos/apache/druid/issues/8177","id":515881038,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTg4MTAzOA==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T07:38:29Z","updated_at":"2019-07-29T07:38:29Z","author_association":"MEMBER","body":"@gianm Yep, this is a known bug for curator, more details:\r\nhttps://issues.apache.org/jira/browse/CURATOR-523","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515881038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/515881970","html_url":"https://github.com/apache/druid/pull/6768#issuecomment-515881970","issue_url":"https://api.github.com/repos/apache/druid/issues/6768","id":515881970,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTg4MTk3MA==","user":{"login":"elloooooo","id":4433949,"node_id":"MDQ6VXNlcjQ0MzM5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4433949?v=4","gravatar_id":"","url":"https://api.github.com/users/elloooooo","html_url":"https://github.com/elloooooo","followers_url":"https://api.github.com/users/elloooooo/followers","following_url":"https://api.github.com/users/elloooooo/following{/other_user}","gists_url":"https://api.github.com/users/elloooooo/gists{/gist_id}","starred_url":"https://api.github.com/users/elloooooo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elloooooo/subscriptions","organizations_url":"https://api.github.com/users/elloooooo/orgs","repos_url":"https://api.github.com/users/elloooooo/repos","events_url":"https://api.github.com/users/elloooooo/events{/privacy}","received_events_url":"https://api.github.com/users/elloooooo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T07:41:29Z","updated_at":"2019-07-29T07:41:29Z","author_association":"CONTRIBUTOR","body":"Can I revive the PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/515881970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516044350","html_url":"https://github.com/apache/druid/issues/8171#issuecomment-516044350","issue_url":"https://api.github.com/repos/apache/druid/issues/8171","id":516044350,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjA0NDM1MA==","user":{"login":"WilliamWhispell","id":1390230,"node_id":"MDQ6VXNlcjEzOTAyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1390230?v=4","gravatar_id":"","url":"https://api.github.com/users/WilliamWhispell","html_url":"https://github.com/WilliamWhispell","followers_url":"https://api.github.com/users/WilliamWhispell/followers","following_url":"https://api.github.com/users/WilliamWhispell/following{/other_user}","gists_url":"https://api.github.com/users/WilliamWhispell/gists{/gist_id}","starred_url":"https://api.github.com/users/WilliamWhispell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilliamWhispell/subscriptions","organizations_url":"https://api.github.com/users/WilliamWhispell/orgs","repos_url":"https://api.github.com/users/WilliamWhispell/repos","events_url":"https://api.github.com/users/WilliamWhispell/events{/privacy}","received_events_url":"https://api.github.com/users/WilliamWhispell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T15:38:29Z","updated_at":"2019-07-29T15:38:29Z","author_association":"NONE","body":"Looks like all the time is spent inside the IsNull check of HistoricalDoubleColumnSelectorWithNulls. All of the time is spent in BitIterator.skipAllBefore which is called inside of ImmutableConciseSet.contains. I'm not sure why the other non-double fields don't see this performance issue.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516044350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516102356","html_url":"https://github.com/apache/druid/pull/8189#issuecomment-516102356","issue_url":"https://api.github.com/repos/apache/druid/issues/8189","id":516102356,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEwMjM1Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T18:10:40Z","updated_at":"2019-07-29T18:10:40Z","author_association":"CONTRIBUTOR","body":"@ccaominh thanks for raising this PR. +1 after CI.\r\n\r\nI'm seeing the below error with `druid-s3-extensions`.\r\n\r\n```\r\nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nCould not load Logmanager \"org.apache.logging.log4j.jul.LogManager\"\r\njava.lang.ClassNotFoundException: org.apache.logging.log4j.jul.LogManager\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at java.util.logging.LogManager$1.run(LogManager.java:195)\r\n        at java.util.logging.LogManager$1.run(LogManager.java:181)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at java.util.logging.LogManager.<clinit>(LogManager.java:181)\r\n        at java.util.logging.Logger.demandLogger(Logger.java:448)\r\n        at java.util.logging.Logger.getLogger(Logger.java:502)\r\n        at com.google.inject.internal.util.Stopwatch.<clinit>(Stopwatch.java:27)\r\n        at com.google.inject.internal.InternalInjectorCreator.<init>(InternalInjectorCreator.java:61)\r\n        at com.google.inject.Guice.createInjector(Guice.java:96)\r\n        at com.google.inject.Guice.createInjector(Guice.java:73)\r\n        at org.apache.druid.guice.GuiceInjectors.makeStartupInjector(GuiceInjectors.java:56)\r\n        at org.apache.druid.cli.Main.main(Main.java:95)\r\nJul 28, 2019 9:05:32 PM org.hibernate.validator.internal.util.Version <clinit>\r\nINFO: HV000001: Hibernate Validator 5.1.3.Final\r\nException in thread \"main\" com.google.common.util.concurrent.ExecutionError: java.lang.NoClassDefFoundError: com/amazonaws/ClientConfiguration\r\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2199)\r\n        at com.google.common.cache.LocalCache.get(LocalCache.java:3934)\r\n        at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3938)\r\n        at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4821)\r\n        at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4827)\r\n        at com.google.inject.internal.FailableCache.get(FailableCache.java:48)\r\n        at com.google.inject.internal.MembersInjectorStore.get(MembersInjectorStore.java:68)\r\n        at com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:993)\r\n        at com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:1000)\r\n        at com.google.inject.internal.InjectorImpl.injectMembers(InjectorImpl.java:986)\r\n        at org.apache.druid.initialization.Initialization$ModuleList.addModule(Initialization.java:450)\r\n        at org.apache.druid.initialization.Initialization.makeInjectorWithModules(Initialization.java:416)\r\n        at org.apache.druid.cli.GuiceRunnable.makeInjector(GuiceRunnable.java:68)\r\n        at org.apache.druid.cli.ServerRunnable.run(ServerRunnable.java:56)\r\n        at org.apache.druid.cli.Main.main(Main.java:112)\r\nCaused by: java.lang.NoClassDefFoundError: com/amazonaws/ClientConfiguration\r\n        at java.lang.Class.getDeclaredMethods0(Native Method)\r\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n        at java.lang.Class.getDeclaredMethods(Class.java:1975)\r\n        at com.google.inject.spi.InjectionPoint.getInjectionPoints(InjectionPoint.java:688)\r\n        at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:380)\r\n        at com.google.inject.internal.MembersInjectorStore.createWithListeners(MembersInjectorStore.java:93)\r\n        at com.google.inject.internal.MembersInjectorStore.access$000(MembersInjectorStore.java:37)\r\n        at com.google.inject.internal.MembersInjectorStore$1.create(MembersInjectorStore.java:45)\r\n        at com.google.inject.internal.MembersInjectorStore$1.create(MembersInjectorStore.java:42)\r\n        at com.google.inject.internal.FailableCache$1.load(FailableCache.java:37)\r\n        at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3524)\r\n        at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2317)\r\n        at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2280)\r\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2195)\r\n        ... 14 more\r\nCaused by: java.lang.ClassNotFoundException: com.amazonaws.ClientConfiguration\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        ... 28 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516102356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516122590","html_url":"https://github.com/apache/druid/pull/8107#issuecomment-516122590","issue_url":"https://api.github.com/repos/apache/druid/issues/8107","id":516122590,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEyMjU5MA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T19:07:48Z","updated_at":"2019-07-29T19:07:48Z","author_association":"CONTRIBUTOR","body":"@himanshug \r\n\r\nI changed the interrupt to use future.cancel(true), and added a comment about how it's not possible to truly force a hard shutdown there (my intent in putting it there was for hypothetical cases where a task's stopGracefully takes too long or has a bug and doesn't result in a shutdown, but the task is still interruptible)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516122590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516131783","html_url":"https://github.com/apache/druid/issues/8171#issuecomment-516131783","issue_url":"https://api.github.com/repos/apache/druid/issues/8171","id":516131783,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEzMTc4Mw==","user":{"login":"WilliamWhispell","id":1390230,"node_id":"MDQ6VXNlcjEzOTAyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1390230?v=4","gravatar_id":"","url":"https://api.github.com/users/WilliamWhispell","html_url":"https://github.com/WilliamWhispell","followers_url":"https://api.github.com/users/WilliamWhispell/followers","following_url":"https://api.github.com/users/WilliamWhispell/following{/other_user}","gists_url":"https://api.github.com/users/WilliamWhispell/gists{/gist_id}","starred_url":"https://api.github.com/users/WilliamWhispell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilliamWhispell/subscriptions","organizations_url":"https://api.github.com/users/WilliamWhispell/orgs","repos_url":"https://api.github.com/users/WilliamWhispell/repos","events_url":"https://api.github.com/users/WilliamWhispell/events{/privacy}","received_events_url":"https://api.github.com/users/WilliamWhispell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T19:35:12Z","updated_at":"2019-07-29T19:35:12Z","author_association":"NONE","body":"For now I've switched to using a roaring index and all field types seem to perform well. So I believe this issue affects only some field types like double when using the concise index type.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516131783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516136368","html_url":"https://github.com/apache/druid/pull/6972#issuecomment-516136368","issue_url":"https://api.github.com/repos/apache/druid/issues/6972","id":516136368,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEzNjM2OA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T19:48:25Z","updated_at":"2019-07-29T19:48:25Z","author_association":"CONTRIBUTOR","body":"@mohammadjkhan Great, thanks! I'll review this week","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516136368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516137723","html_url":"https://github.com/apache/druid/pull/8038#issuecomment-516137723","issue_url":"https://api.github.com/repos/apache/druid/issues/8038","id":516137723,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEzNzcyMw==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T19:52:38Z","updated_at":"2019-07-29T19:52:38Z","author_association":"CONTRIBUTOR","body":"Implemented both the strategies and made the strategy configurable. However there is one implementation glitch due to which `SegmentLoaderLocalCacheManagerTest.testRetrySuccessAtSecondLocation()` is failing.\r\n\r\nHere's the scenario. For example, assume strategy configured is least bytes used strategy and there are two locations - loc1 and loc2 each on different disks disk1 and disk2 respectively. loc1 has the least bytes used. The strategy picks loc1 and before `SegmentLoaderLocalCacheManager` loads a segment if disk1 fails or is not writable the segment loading fails. The strategy has no way (with my impl) to find if loc1 is bad, this results in the strategy picking loc1 every time failing all segment load attempts. What is a clean way to handle this ? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516137723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516157707","html_url":"https://github.com/apache/druid/pull/8115#issuecomment-516157707","issue_url":"https://api.github.com/repos/apache/druid/issues/8115","id":516157707,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE1NzcwNw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T20:52:40Z","updated_at":"2019-07-29T20:52:40Z","author_association":"CONTRIBUTOR","body":"@jihoonson sure, I did want to go through it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516157707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516163249","html_url":"https://github.com/apache/druid/pull/8152#issuecomment-516163249","issue_url":"https://api.github.com/repos/apache/druid/issues/8152","id":516163249,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE2MzI0OQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T21:09:01Z","updated_at":"2019-07-29T21:09:01Z","author_association":"MEMBER","body":"Integration tests passed locally btw, merging","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516163249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516163548","html_url":"https://github.com/apache/druid/pull/8174#issuecomment-516163548","issue_url":"https://api.github.com/repos/apache/druid/issues/8174","id":516163548,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE2MzU0OA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T21:09:56Z","updated_at":"2019-07-29T21:09:56Z","author_association":"MEMBER","body":"Same deal with the travis integration test timeout, and wonky team-city for backport, will merge this once integration tests pass for me locally","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516163548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516189572","html_url":"https://github.com/apache/druid/pull/8174#issuecomment-516189572","issue_url":"https://api.github.com/repos/apache/druid/issues/8174","id":516189572,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE4OTU3Mg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T22:41:51Z","updated_at":"2019-07-29T22:41:51Z","author_association":"MEMBER","body":"integration tests passed here for me too, merging","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516189572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516191749","html_url":"https://github.com/apache/druid/issues/8175#issuecomment-516191749","issue_url":"https://api.github.com/repos/apache/druid/issues/8175","id":516191749,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE5MTc0OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T22:51:34Z","updated_at":"2019-07-29T22:51:34Z","author_association":"CONTRIBUTOR","body":"have you tried some combination of `<MiddleManager_IP:PORT>/druid/worker/v1/disable` as described in https://druid.apache.org/docs/latest/operations/rolling-updates.html#rolling-restart-graceful-termination-based ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516191749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516198639","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516198639","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516198639,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE5ODYzOQ==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T23:21:55Z","updated_at":"2019-07-29T23:21:55Z","author_association":"CONTRIBUTOR","body":"@ccl0326 thank you for your contribution! I have verified that this fixes the issue.\r\nI have taken the liberty to create a pull request so it will be ready for 0.15.1, but if you prefer, I can close this one and you can create a separate pull request.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516198639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516203536","html_url":"https://github.com/apache/druid/pull/8100#issuecomment-516203536","issue_url":"https://api.github.com/repos/apache/druid/issues/8100","id":516203536,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIwMzUzNg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T23:46:17Z","updated_at":"2019-07-29T23:46:17Z","author_association":"CONTRIBUTOR","body":"@samarthjain Can you fix conflicts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516203536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516207348","html_url":"https://github.com/apache/druid/pull/8038#issuecomment-516207348","issue_url":"https://api.github.com/repos/apache/druid/issues/8038","id":516207348,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIwNzM0OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T00:05:40Z","updated_at":"2019-07-30T00:05:40Z","author_association":"CONTRIBUTOR","body":"@jihoonson  is trying to widen the scope of StorageLocation class a bit in https://github.com/apache/incubator-druid/pull/8115 , so he should probably check this one out.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516207348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516208580","html_url":"https://github.com/apache/druid/pull/8177#issuecomment-516208580","issue_url":"https://api.github.com/repos/apache/druid/issues/8177","id":516208580,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIwODU4MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T00:12:23Z","updated_at":"2019-07-30T00:12:23Z","author_association":"CONTRIBUTOR","body":"+1 when the build works","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516208580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516210135","html_url":"https://github.com/apache/druid/pull/8107#issuecomment-516210135","issue_url":"https://api.github.com/repos/apache/druid/issues/8107","id":516210135,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIxMDEzNQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T00:20:55Z","updated_at":"2019-07-30T00:21:08Z","author_association":"CONTRIBUTOR","body":"@clintropolis @jihoonson @himanshug Thanks a lot for the review!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516210135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516226794","html_url":"https://github.com/apache/druid/pull/8141#issuecomment-516226794","issue_url":"https://api.github.com/repos/apache/druid/issues/8141","id":516226794,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIyNjc5NA==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T01:50:52Z","updated_at":"2019-07-30T01:50:52Z","author_association":"CONTRIBUTOR","body":"👍 after conflict resolved","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516226794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516234329","html_url":"https://github.com/apache/druid/issues/8175#issuecomment-516234329","issue_url":"https://api.github.com/repos/apache/druid/issues/8175","id":516234329,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIzNDMyOQ==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T02:29:47Z","updated_at":"2019-07-30T02:29:47Z","author_association":"CONTRIBUTOR","body":"hmm i did overlook it indeed.\r\n\r\nthe docs say:\r\n\r\n```\r\n Tasks that have already started will run to completion\r\n```\r\n\r\ndoes that mean if we have a task with an 8 hour duration, we need to wait 8 hours?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516234329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516234980","html_url":"https://github.com/apache/druid/pull/8190#issuecomment-516234980","issue_url":"https://api.github.com/repos/apache/druid/issues/8190","id":516234980,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIzNDk4MA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T02:32:46Z","updated_at":"2019-07-30T02:32:46Z","author_association":"CONTRIBUTOR","body":"@jihoonson can you fix merge conflicts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516234980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516244272","html_url":"https://github.com/apache/druid/issues/4975#issuecomment-516244272","issue_url":"https://api.github.com/repos/apache/druid/issues/4975","id":516244272,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0NDI3Mg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T03:21:17Z","updated_at":"2019-07-30T03:21:17Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516244272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516247182","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516247182","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516247182,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0NzE4Mg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T03:37:08Z","updated_at":"2019-07-30T03:37:08Z","author_association":"MEMBER","body":"This appears to partially fix the issue in my testing, at least in terms of the broker being unable to start. \r\n\r\nHowever, there are some additional difficulties to use this extension. The middle-manager is unable to load this extension, it explodes on startup with a similar:\r\n\r\n```\r\nException in thread \"main\" java.lang.RuntimeException: com.google.inject.CreationException: Unable to create injector, see the following errors:\r\n\r\n1) No implementation for org.apache.druid.query.QuerySegmentWalker was bound.\r\n  while locating com.google.inject.Provider<org.apache.druid.query.QuerySegmentWalker>\r\n    for the 1st parameter of org.apache.druid.query.movingaverage.MovingAverageQueryToolChest.<init>(MovingAverageQueryToolChest.java:62)\r\n  at org.apache.druid.query.movingaverage.MovingAverageQueryModule.configure(MovingAverageQueryModule.java:48) (via modules: com.google.inject.util.Modules$OverrideModule -> org.apache.druid.query.movingaverage.MovingAverageQueryModule)\r\n\r\n2) No implementation for org.apache.druid.server.log.RequestLogger was bound.\r\n  while locating org.apache.druid.server.log.RequestLogger\r\n    for the 2nd parameter of org.apache.druid.query.movingaverage.MovingAverageQueryToolChest.<init>(MovingAverageQueryToolChest.java:62)\r\n  at org.apache.druid.query.movingaverage.MovingAverageQueryModule.configure(MovingAverageQueryModule.java:48) (via modules: com.google.inject.util.Modules$OverrideModule -> org.apache.druid.query.movingaverage.MovingAverageQueryModule)\r\n```\r\n\r\nso `druid.indexer.fork.property.druid.extensions.loadList` must be set to allow the peons to load a different set of extensions than the middle-manager, which isn't so big of a deal imo. The peon tasks for kafka indexing service did appear to startup and load the extension correctly when I did this.\r\n\r\nMore problematic, is the router, which is also unable to load this extension:\r\n\r\n```\r\nException in thread \"main\" java.lang.RuntimeException: com.google.inject.CreationException: Unable to create injector, see the following errors:\r\n\r\n1) No implementation for org.apache.druid.query.QuerySegmentWalker was bound.\r\n  while locating com.google.inject.Provider<org.apache.druid.query.QuerySegmentWalker>\r\n    for the 1st parameter of org.apache.druid.query.movingaverage.MovingAverageQueryToolChest.<init>(MovingAverageQueryToolChest.java:62)\r\n  at org.apache.druid.query.movingaverage.MovingAverageQueryModule.configure(MovingAverageQueryModule.java:48) (via modules: com.google.inject.util.Modules$OverrideModule -> org.apache.druid.query.movingaverage.MovingAverageQueryModule)\r\n```\r\n\r\nbecause without the extension loaded, the router is unable to perform serde on the query making any queries that use this extension unable to use the router if it's not loaded:\r\n\r\n<img width=\"768\" alt=\"Screen Shot 2019-07-29 at 8 24 52 PM\" src=\"https://user-images.githubusercontent.com/1577461/62098664-27639700-b240-11e9-884e-893ebf70dccc.png\">\r\n\r\nI'm unsure how to resolve this situation, i guess the router could inject null as a segment walker since none of this stuff will be called, it just needs the types to do serde, but that also seems sort of lame? Not sure what is best to do.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516247182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516247974","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516247974","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516247974,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0Nzk3NA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T03:41:44Z","updated_at":"2019-07-30T03:41:44Z","author_association":"MEMBER","body":"I think because of the above reason, and because 0.16.0 is right around the corner, I am going to go ahead and make `druid-0.15.1-incubating-rc1` without this patch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516247974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258590","html_url":"https://github.com/apache/druid/pull/8172#issuecomment-516258590","issue_url":"https://api.github.com/repos/apache/druid/issues/8172","id":516258590,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI1ODU5MA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T04:42:12Z","updated_at":"2019-07-30T04:42:12Z","author_association":"CONTRIBUTOR","body":"This looks good to me 👍 thank you for the contrib.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258778","html_url":"https://github.com/apache/druid/pull/8164#issuecomment-516258778","issue_url":"https://api.github.com/repos/apache/druid/issues/8164","id":516258778,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI1ODc3OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T04:43:07Z","updated_at":"2019-07-30T04:43:07Z","author_association":"CONTRIBUTOR","body":"looks good to me, 👍 thank you","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258885","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516258885","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516258885,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI1ODg4NQ==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T04:43:44Z","updated_at":"2019-07-30T04:48:14Z","author_association":"CONTRIBUTOR","body":"@clintropolis were the only issues found are on services other than the broker? \r\nIf so, this is because it is purpusfully compatible only with the Broker, and the documentation states so:\r\n_To use this extension, make sure to load druid-moving-average-query only to the Broker._\r\n I know other extensions have such guidelines (i.e. materialized-view).\r\n\r\nI think since the fix solves a blocking bug and doesn't add any behavior change, it would be a good candidate for  a minor release. also, the change is isolated to the extension code.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516258885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516259077","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516259077","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516259077,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI1OTA3Nw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T04:44:51Z","updated_at":"2019-07-30T04:44:51Z","author_association":"CONTRIBUTOR","body":"@gianm \r\nThank you for this analysis!  The current HllSketch starts at a very small size and grows in size by factors of 2 until it is just under the size of the dense sketch and then converts to dense mode, after which it stays fixed.  See the bottom chart [here](https://datasketches.github.io/docs/HLL/HLL.html).\r\n\r\nI have thought about an option that would eliminate the sparse mode.  An empty sketch would be created at full size.  Here is where we might be able to take advantage of a high-speed copy of pre-initialized memory upon sketch creation.  For the life of the sketch it would never need to allocate or clear any memory.  (If you are using HLL-4 mode, there is a little lookup cache that occasionally may need to resize, but that should be rare.)\r\n\r\nDruid (so far) always allocates space for the maximum size sketch and cannot take advantage of the fact that the size of the sketch for small cardinalities can be quite small and then grow.  If this is going to remain true, then it might make sense to add this option.   Druid is wasting a lot of memory because of the fixed allocation sizes and this has been discussed at length in other threads, which I'm not going to repeat here.  Nonetheless, I am likely out-of-date with what the latest thinking within the Druid team is on this topic, so please update me :) \r\n\r\nClearly our focus has been to optimize the best possible accuracy for a given size.  But if you are willing to allow the sketch to start at maximum size this may make sense for you.  It could mean a substantial speed up. When implemented, it will be a configuration option, so you could always play with it and change your mind.\r\n\r\nThe downside of eliminating the sparse mode is that the accuracy of the sketch for low cardinalities will be worse.  It will be within the error guarantees for a given _k_ and behave like the conventional Flajolet-Martin HLL sketch at low cardinalities.  Our HLL sparse mode takes advantage of new estimators that were developed for our CPC sketch which outperforms the accuracy / byte of almost any other HLL sketch out there by a large margin.\r\n\r\nWe are in the middle of this Apache migration, so implementing this may be some months out, unless we could get some help speeding up the migration :) :)\r\n\r\nLet me know if this makes sense to you.\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516259077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516266375","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516266375","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516266375,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI2NjM3NQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T05:20:40Z","updated_at":"2019-07-30T05:20:40Z","author_association":"MEMBER","body":">@clintropolis were the only issues found are on services other than the broker?\r\nIf so, this is because it is purpusfully compatible only with the Broker, and the documentation states so:\r\nTo use this extension, make sure to load druid-moving-average-query only to the Broker.\r\nI know other extensions have such guidelines (i.e. materialized-view).\r\n\r\n>I think since the fix solves a blocking bug and doesn't add any behavior change, it would be a good candidate for a minor release. also, the change is isolated to the extension code.\r\n\r\nI guess it is true the docs mention that only the broker is supported, I'll admit I am unfamiliar with this extension 😅. The docs probably should be updated to mention that it will not work if you query through a router at some point in the future (doesn't need to be this PR).\r\n\r\nI did just finish building an rc1 tag... but since I didn't push anything yet I will go ahead and +1 and do a backport once this is merged.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516266375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516293448","html_url":"https://github.com/apache/druid/pull/8195#issuecomment-516293448","issue_url":"https://api.github.com/repos/apache/druid/issues/8195","id":516293448,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI5MzQ0OA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T07:06:43Z","updated_at":"2019-07-30T07:06:43Z","author_association":"MEMBER","body":"same timing out integration test, merging","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516293448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516411997","html_url":"https://github.com/apache/druid/issues/8126#issuecomment-516411997","issue_url":"https://api.github.com/repos/apache/druid/issues/8126","id":516411997,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQxMTk5Nw==","user":{"login":"Eshcar","id":4384969,"node_id":"MDQ6VXNlcjQzODQ5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/4384969?v=4","gravatar_id":"","url":"https://api.github.com/users/Eshcar","html_url":"https://github.com/Eshcar","followers_url":"https://api.github.com/users/Eshcar/followers","following_url":"https://api.github.com/users/Eshcar/following{/other_user}","gists_url":"https://api.github.com/users/Eshcar/gists{/gist_id}","starred_url":"https://api.github.com/users/Eshcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eshcar/subscriptions","organizations_url":"https://api.github.com/users/Eshcar/orgs","repos_url":"https://api.github.com/users/Eshcar/repos","events_url":"https://api.github.com/users/Eshcar/events{/privacy}","received_events_url":"https://api.github.com/users/Eshcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T13:10:51Z","updated_at":"2019-07-30T13:10:51Z","author_association":"NONE","body":"As part of the work we are doing towards integrating Oak (off-heap based incremental index) integration into druid #5698, we invested some thought on how to bridge the gap between Oak--with its internal memory management, off-heap sketches--based on WritableMemory, and druid aggregators.\r\nI can share our thoughts, they aim to handle the same problems raised in this issue however the solution is different, hence it might be better to introduce it in a different issue.\r\nIn a nutshell, \r\n(1) Oak manages its memory and needs all allocations of buffers to go through the internal memory manager and only be exposed through Oak's API.\r\n(2) Off-heap sketches are based on WritableMemory, and can work with external memory manager that can allocate new WritableMemory when the sketch needs to grow\r\n(3) Druid aggregators access sketches through the aggregator API (init, aggregate, get) and a mapping from bytebuffer,position -> sketch\r\n\r\nWhat we suggest is to have oak manage the memory, including re-allocation of space when needed. Oak will implement its own WritebleMemory and MemoryRequestServer that are needed for a correct behaviour of the sketches wrt Oak index. Finally, we suggest to have a new Aggregator type - WritableMemoryAggregator that maps WritableMemory to sketch and can work the same way as buffer aggregators are working, and it does not need to worry about growing size of sketches. \r\n\r\nThere might be other alternatives for closing this loop; let's discuss them.\r\n\r\nDoes all this make sense @leventov @himanshug ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516411997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516458215","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-516458215","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":516458215,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ1ODIxNQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T15:00:20Z","updated_at":"2019-07-30T15:00:20Z","author_association":"NONE","body":"This issue is no longer marked as stale.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516458215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516458535","html_url":"https://github.com/apache/druid/issues/8126#issuecomment-516458535","issue_url":"https://api.github.com/repos/apache/druid/issues/8126","id":516458535,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ1ODUzNQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T15:01:01Z","updated_at":"2019-07-30T15:01:01Z","author_association":"MEMBER","body":"The \"WritableMemoryAggregator\" proposal is the new take on #3892. I support it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516458535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516461399","html_url":"https://github.com/apache/druid/pull/8177#issuecomment-516461399","issue_url":"https://api.github.com/repos/apache/druid/issues/8177","id":516461399,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ2MTM5OQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T15:07:31Z","updated_at":"2019-07-30T15:07:31Z","author_association":"CONTRIBUTOR","body":"@gianm can you fix test failures?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516461399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516488227","html_url":"https://github.com/apache/druid/issues/4113#issuecomment-516488227","issue_url":"https://api.github.com/repos/apache/druid/issues/4113","id":516488227,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ4ODIyNw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T16:12:24Z","updated_at":"2019-07-30T16:12:24Z","author_association":"MEMBER","body":"Addressed by #8110 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516488227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516488834","html_url":"https://github.com/apache/druid/issues/4899#issuecomment-516488834","issue_url":"https://api.github.com/repos/apache/druid/issues/4899","id":516488834,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ4ODgzNA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T16:14:09Z","updated_at":"2019-07-30T16:14:09Z","author_association":"NONE","body":"This issue is no longer marked as stale.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516488834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516499713","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516499713","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516499713,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ5OTcxMw==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T16:43:19Z","updated_at":"2019-07-30T16:43:19Z","author_association":"CONTRIBUTOR","body":"I would think that a similar change should be made to HllSketchBuildBufferAggregator","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516499713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516521930","html_url":"https://github.com/apache/druid/pull/8192#issuecomment-516521930","issue_url":"https://api.github.com/repos/apache/druid/issues/8192","id":516521930,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUyMTkzMA==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T17:45:38Z","updated_at":"2019-07-30T17:45:49Z","author_association":"CONTRIBUTOR","body":"> I guess it is true the docs mention that only the broker is supported, I'll admit I am unfamiliar with this extension 😅. The docs probably should be updated to mention that it will not work if you query through a router at some point in the future (doesn't need to be this PR).\r\n\r\nThank you!\r\nI will see what can I do in the future to make the extension load on at least all services in the Query server.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516521930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516529125","html_url":"https://github.com/apache/druid/pull/8038#issuecomment-516529125","issue_url":"https://api.github.com/repos/apache/druid/issues/8038","id":516529125,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUyOTEyNQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T18:04:29Z","updated_at":"2019-07-30T18:04:29Z","author_association":"CONTRIBUTOR","body":"Yeah, I will take a look probably next week.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516529125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516535132","html_url":"https://github.com/apache/druid/issues/4849#issuecomment-516535132","issue_url":"https://api.github.com/repos/apache/druid/issues/4849","id":516535132,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUzNTEzMg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T18:21:17Z","updated_at":"2019-07-30T18:21:17Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516535132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516535141","html_url":"https://github.com/apache/druid/issues/6506#issuecomment-516535141","issue_url":"https://api.github.com/repos/apache/druid/issues/6506","id":516535141,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUzNTE0MQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T18:21:18Z","updated_at":"2019-07-30T18:21:18Z","author_association":"NONE","body":"This issue has been marked as stale due to 280 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If this issue is still relevant, please simply write any comment. Even if closed, you can still revive the issue at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516535141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516550416","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516550416","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516550416,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU1MDQxNg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:00:42Z","updated_at":"2019-07-30T19:00:42Z","author_association":"CONTRIBUTOR","body":"> I would think that a similar change should be made to HllSketchBuildBufferAggregator\r\n\r\nI just added that too, and updated the PR title accordingly.\r\n\r\nBtw, I couldn't share code for creating the prebuilt sketches, because init does not behave the same way in the two flavors. The \"build\" flavor initializes based on tgtHllType, but the \"merge\" flavor always initializes using HLL_8. Do you know why that is?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516550416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516553469","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516553469","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516553469,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU1MzQ2OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:08:37Z","updated_at":"2019-07-30T19:08:37Z","author_association":"CONTRIBUTOR","body":"> Druid (so far) always allocates space for the maximum size sketch and cannot take advantage of the fact that the size of the sketch for small cardinalities can be quite small and then grow. If this is going to remain true, then it might make sense to add this option. Druid is wasting a lot of memory because of the fixed allocation sizes and this has been discussed at length in other threads, which I'm not going to repeat here. Nonetheless, I am likely out-of-date with what the latest thinking within the Druid team is on this topic, so please update me :)\r\n\r\nThe most recent discussion has been happening in here: #8126. I am not sure what form yet resizable aggregators will take but let's assume they will happen!\r\n\r\n> Clearly our focus has been to optimize the best possible accuracy for a given size. But if you are willing to allow the sketch to start at maximum size this may make sense for you. It could mean a substantial speed up. When implemented, it will be a configuration option, so you could always play with it and change your mind.\r\n\r\nIt definitely sounds like a useful option, especially if the accuracy decline isn't too bad. Maybe some hybrid approach would also be useful — starting at some medium point rather than very small or fully dense?\r\n\r\n> The downside of eliminating the sparse mode is that the accuracy of the sketch for low cardinalities will be worse. It will be within the error guarantees for a given _k_ and behave like the conventional Flajolet-Martin HLL sketch at low cardinalities. Our HLL sparse mode takes advantage of new estimators that were developed for our CPC sketch which outperforms the accuracy / byte of almost any other HLL sketch out there by a large margin.\r\n\r\nAny idea how much worse?\r\n\r\n> We are in the middle of this Apache migration, so implementing this may be some months out, unless we could get some help speeding up the migration :) :)\r\n\r\nI joined the DataSketches dev list a few days ago, anything I could do to help?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516553469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516563715","html_url":"https://github.com/apache/druid/pull/7701#issuecomment-516563715","issue_url":"https://api.github.com/repos/apache/druid/issues/7701","id":516563715,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU2MzcxNQ==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:40:16Z","updated_at":"2019-07-30T19:40:16Z","author_association":"CONTRIBUTOR","body":"Rebased onto master, just to keep up with upstream","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516563715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516568745","html_url":"https://github.com/apache/druid/pull/8190#issuecomment-516568745","issue_url":"https://api.github.com/repos/apache/druid/issues/8190","id":516568745,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU2ODc0NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:47:39Z","updated_at":"2019-07-30T19:47:39Z","author_association":"CONTRIBUTOR","body":"@fjy fixed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516568745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516569926","html_url":"https://github.com/apache/druid/pull/8176#issuecomment-516569926","issue_url":"https://api.github.com/repos/apache/druid/issues/8176","id":516569926,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU2OTkyNg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:50:55Z","updated_at":"2019-07-30T19:50:55Z","author_association":"CONTRIBUTOR","body":"Looking good, thank you for addressing my feedback so promptly. 👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516569926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516575812","html_url":"https://github.com/apache/druid/pull/8129#issuecomment-516575812","issue_url":"https://api.github.com/repos/apache/druid/issues/8129","id":516575812,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU3NTgxMg==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T20:07:45Z","updated_at":"2019-07-30T20:07:45Z","author_association":"CONTRIBUTOR","body":"Rebased as well","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516575812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516600348","html_url":"https://github.com/apache/druid/issues/8061#issuecomment-516600348","issue_url":"https://api.github.com/repos/apache/druid/issues/8061","id":516600348,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYwMDM0OA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T21:20:29Z","updated_at":"2019-07-30T21:22:18Z","author_association":"MEMBER","body":"Went through the proposal, I see one issue with this which needs more thought, \r\nAbove approach may break with autoscaling - \r\nConsider the case when phase1 task ran on a specific middlemanager and finished. (this was the only task running on it), the autoscaler decided to kill this MM as there is no task running on it. \r\nPhase 2 tasks running will be able to locate the data from phase 1 task. \r\n\r\ncan we consider using an intermediate directory on the deep storage for storing intermediate segments and phase 2 tasks can read from there ? \r\n\r\nAm i understanding it correctly, or it is supposed to work with current design ? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516600348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516628021","html_url":"https://github.com/apache/druid/pull/8047#issuecomment-516628021","issue_url":"https://api.github.com/repos/apache/druid/issues/8047","id":516628021,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYyODAyMQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:02:37Z","updated_at":"2019-07-30T23:02:37Z","author_association":"MEMBER","body":"Tagged for milestone 0.16.0 since this should be included in the same release with the rest of the multi-value expression support, to avoid a future behavior change on single input multi-value expressions.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516628021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516635216","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516635216","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516635216,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYzNTIxNg==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:34:39Z","updated_at":"2019-07-30T23:34:39Z","author_association":"CONTRIBUTOR","body":"Looks good to me.\r\nI would leave that comment in the init() though. Perhaps rephrase it a little. The objects are still \"constructed\" there by copying an empty union.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516635216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516636653","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516636653","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516636653,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYzNjY1Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:41:17Z","updated_at":"2019-07-30T23:41:32Z","author_association":"CONTRIBUTOR","body":"I rewrote the comment and added it to \"init\":\r\n\r\n```\r\n    // Copy prebuilt empty union object.\r\n    // Not necessary to cache a Union wrapper around the initialized memory, because:\r\n    //  - It is cheap to reconstruct by re-wrapping the memory in \"aggregate\" and \"get\".\r\n    //  - Unlike the HllSketch objects used by HllSketchBuildBufferAggregator, our Union objects never exceed the\r\n    //    max size and therefore do not need to be potentially moved in-heap.\r\n```\r\n\r\nI believe it is accurate but please let me know if I missed something.\r\n\r\nBTW, I removed the \"never move\" language because I believe it isn't accurate. \"relocate\" can still be called on the merge flavor -- it happens when e.g. the groupBy engine is resizing its internal hash table and moving objects around as a result. But the merge flavor shouldn't need to do anything special on a relocation, since it doesn't have any position based caches.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516636653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516638971","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516638971","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516638971,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYzODk3MQ==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:53:31Z","updated_at":"2019-07-30T23:53:31Z","author_association":"CONTRIBUTOR","body":"@gianm \r\nYou offered:\r\n\r\n> I joined the DataSketches dev list a few days ago, anything I could do to help?\r\n\r\nRather than muddying up this thread I have posted a [Migration Help] request on dev@datasketches.apache.org.  Assuming that is the \"proper\" place to put such a request.  I considered creating an issue on Memory, but thought I would try the \"Apache way\" first :).\r\n\r\nWe can try dev@, but if it gets too messy we can move to a GitHub issue.\r\n\r\nThanks!\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516638971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516641048","html_url":"https://github.com/apache/druid/issues/8061#issuecomment-516641048","issue_url":"https://api.github.com/repos/apache/druid/issues/8061","id":516641048,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY0MTA0OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T00:03:41Z","updated_at":"2019-07-31T00:03:41Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 good point! We currently have two provisioning strategies for auto scaling, i.e., `simple` and `pendingTaskBased`, and both of them look to terminate middleManagers if it has been a long time since they completed the last task. I think there could be two options available to avoid this issue.\r\n\r\n- Improve the provisioning strategy to consider intermediary data in middleManagers. If they are still serving intermediary data for parallel batch tasks, then the auto scaler shouldn't terminate them.\r\n- As you mentioned, store intermediary data on the deep storage.\r\n\r\nI'm inclined to the first approach because 1) it's more efficient to read data from middleManagers than from deep storage and 2) intermediary data cleanup for deep storage could be more complex than that for middleManagers (it's still doable though). What do you think?\r\n\r\nBTW, no matter what way we go, I think this issue could be fixed in a follow-up PR. Does this make sense?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516641048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516645112","html_url":"https://github.com/apache/druid/pull/8141#issuecomment-516645112","issue_url":"https://api.github.com/repos/apache/druid/issues/8141","id":516645112,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY0NTExMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T00:24:50Z","updated_at":"2019-07-31T00:24:50Z","author_association":"CONTRIBUTOR","body":"@dclim @clintropolis thank you for the review!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516645112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516647665","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516647665","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516647665,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY0NzY2NQ==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T00:39:17Z","updated_at":"2019-07-31T00:39:17Z","author_association":"CONTRIBUTOR","body":"looks good to me","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516647665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516649873","html_url":"https://github.com/apache/druid/pull/8194#issuecomment-516649873","issue_url":"https://api.github.com/repos/apache/druid/issues/8194","id":516649873,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY0OTg3Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T00:52:16Z","updated_at":"2019-07-31T00:52:16Z","author_association":"CONTRIBUTOR","body":"Thank you for the review!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516649873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516663207","html_url":"https://github.com/apache/druid/pull/6633#issuecomment-516663207","issue_url":"https://api.github.com/repos/apache/druid/issues/6633","id":516663207,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY2MzIwNw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T02:02:53Z","updated_at":"2019-07-31T02:02:53Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 4 weeks if no further activity occurs. If you think that's incorrect or this pull request should instead be reviewed, please simply write any comment. Even if closed, you can still revive the PR at any time or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516663207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516680203","html_url":"https://github.com/apache/druid/pull/7564#issuecomment-516680203","issue_url":"https://api.github.com/repos/apache/druid/issues/7564","id":516680203,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY4MDIwMw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T03:33:15Z","updated_at":"2019-07-31T03:33:15Z","author_association":"CONTRIBUTOR","body":"Duplicated by https://github.com/apache/incubator-druid/pull/8202","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516680203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516698275","html_url":"https://github.com/apache/druid/issues/8095#issuecomment-516698275","issue_url":"https://api.github.com/repos/apache/druid/issues/8095","id":516698275,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY5ODI3NQ==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T05:11:48Z","updated_at":"2019-07-31T05:11:48Z","author_association":"NONE","body":"@AlexanderSaydakov  \r\nHi, I merged 7666 into 0.14.2 and build from the source. Then an exception occurred at data ingestion.\r\nIt seems a ```groupBy``` query performed at realtime peon task which caused this exception.\r\n```\r\n2019-07-31T04:09:25,691 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch: AgMIAIAAAAABAAAAAAAAAAAAAAAAACxAAAAAAAAALEAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==\r\n2019-07-31T04:09:25,691 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch(bin): AgMIAIAAAAABAAAAAAAAAAAAAAAAACxAAAAAAAAALEAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==\r\n2019-07-31T04:09:25,691 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeAggregator - aggregate sketch by merge aggregator: AgMIGoAAAAABAAAAAAAAAAAAAAAAACxAAAAAAAAALEAAAAAAAAAsQA==\r\n2019-07-31T04:09:25,738 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch: AgMIGoAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAACAQEA=\r\n2019-07-31T04:09:25,738 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch(bin): AgMIGoAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAACAQEA=\r\n2019-07-31T04:09:25,738 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeAggregator - aggregate sketch by merge aggregator: AgMIGoAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAACAQEA=\r\n2019-07-31T04:09:25,741 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch: AgMIAIAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAPA/AAAAAAAA8D8AAAAAAAAAAAAAAAAAAPA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAA8D8AAAAAAIBAQAAAAAAAAAAAAAAAAAAA8D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\r\n2019-07-31T04:09:25,741 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchOperations - deser sketch(bin): AgMIAIAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAPA/AAAAAAAA8D8AAAAAAAAAAAAAAAAAAPA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAA8D8AAAAAAIBAQAAAAAAAAAAAAAAAAAAA8D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\r\n2019-07-31T04:09:25,741 INFO [task-runner-0-priority-0] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeAggregator - aggregate sketch by merge aggregator: AgMIGoAAAAASAAAAAAAAAAAAAAAAAAAAAAAAAACAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAACAQEA=\r\n2019-07-31T04:09:25,744 INFO [groupBy_SVR_ACTION_DATA_MIN_[2019-07-31T03:39:00.000Z/2019-07-31T04:09:00.000Z]] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeBufferAggregator - aggregate sketch by mergebuf aggregator: AgMIGoAAAACZAQAAAAAAAAAAAAAAAAAAAAAAAIBBx0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAABBAAAAAAAAAEEAAAAAAAAAQQAAAAAAAABRAAAAAAAAAFEAAAAAAAAAUQAAAAAAAABRAAAAAAAAAFEAAAAAAAAAYQAAAAAAAABhAAAAAAAAAHEAAAAAAAAAgQAAAAAAAACBAAAAAAAAAIkAAAAAAAAAiQAAAAAAAAChAAAAAAAAAKkAAAAAAAAAwQAAAAAAAADRAAAAAAAAAOkAAAAAAAAA9QAAAAAAAAD5AAAAAAAAAP0AAAAAAANCHQAAAAACAJsVAAAAAAIBBx0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAA8D8AAAAAAADwPwAAAAAAAPA/AAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAACEAAAAAAAAAIQAAAAAAAAAhAAAAAAAAAEEAAAAAAAAAQQAAAAAAAABBAAAAAAAAAEEAAAAAAAAAQQAAAAAAAABBAAAAAAAAAEEAAAAAAAAAUQAAAAAAAABRAAAAAAAAAGEAAAAAAAAAYQAAAAAAAABxAAAAAAAAAHEAAAAAAAAAcQAAAAAAAABxAAAAAAAAAIEAAAAAAAAAgQAAAAAAAACBAAAAAAAAAIkAAAAAAAAAkQAAAAAAAAChAAAAAAAAALkAAAAAAAAA4QAAAAAAAADtAAAAAAAAAPkAAAAAAAIBAQAAAAAAAgEFAAAAAAACAQkAAAAAAAIBDQAAAAAAAgENAAAAAAACASUAAAAAAAABQQAAAAAAAgFJAAAAAAABAXUAAAAAAAMBkQAAAAAAAWKFA\r\n2019-07-31T04:09:25,744 INFO [groupBy_SVR_ACTION_DATA_MIN_[2019-07-31T03:39:00.000Z/2019-07-31T04:09:00.000Z]] org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeBufferAggregator - aggregate sketch by mergebuf aggregator: AgMIGgABAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEAAAAAAAAAAAAAAAAAAAPA/AAAAAAAA8D8AAAAAAAAAQAAAAAAAAAhAAAAAAAAAGEAAAAAAAAAcQA==\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f3aadbfe3e1, pid=10710, tid=139879948633856\r\n#\r\n# JRE version: Java(TM) SE Runtime Environment (8.0_60-b27) (build 1.8.0_60-b27)\r\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.60-b23 mixed mode linux-amd64 compressed oops)\r\n# Problematic frame:\r\n# J 11067 C2 com.tingyun.com.yahoo.memory.NonNativeWritableMemoryImpl.getDouble(J)D (30 bytes) @ 0x00007f3aadbfe3e1 [0x00007f3aadbfe3a0+0x41]\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try \"ulimit -c unlimited\" before starting Java again\r\n#\r\n# An error report file with more information is saved as:\r\n# /data/tingyun/druid-0.12.3/hs_err_pid10710.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n#\r\n```\r\nReleated information in ```/data/tingyun/druid-0.12.3/hs_err_pid10710.log```:\r\n```\r\nRegister to memory mapping:\r\n\r\nRAX=0x000000010086ac78 is pointing into metadata\r\nRBX={method} {0x00007f38571e3b68} 'getDouble' '(J)D' in 'com/tingyun/com/yahoo/memory/NonNativeWritableMemoryImpl'\r\nRCX=0x0000000000000080 is an unknown value\r\nRDX=0x00007f38f00dea34 is an unknown value\r\nRSP=0x00007f3856a61e20 is pointing into the stack for thread: 0x00007f3880010000\r\nRBP=0x0000000000a80048 is an unknown value\r\nRSI=0x000000009b3e8a20 is an oop\r\ncom.tingyun.com.yahoo.memory.BBNonNativeWritableMemoryImpl\r\n - klass: 'com/tingyun/com/yahoo/memory/BBNonNativeWritableMemoryImpl'\r\nRDI=0x0000000000000000 is an unknown value\r\nR8 =0x0000000000000100 is an unknown value\r\nR9 =0x000000009b3fabd8 is an oop\r\ncom.tingyun.com.yahoo.sketches.quantiles.DirectDoublesSketchAccessor\r\n - klass: 'com/tingyun/com/yahoo/sketches/quantiles/DirectDoublesSketchAccessor'\r\nR10=0x000000002010d58f is an unknown value\r\nR11=0x0000000000000000 is an unknown value\r\nR12=0x0000000000000000 is an unknown value\r\nR13=0x00007f3856a61ed8 is pointing into the stack for thread: 0x00007f3880010000\r\nR14=0x00007f3856a62020 is pointing into the stack for thread: 0x00007f3880010000\r\nR15=0x00007f3880010000 is a thread\r\n...\r\n...\r\nStack: [0x00007f3856964000,0x00007f3856a65000],  sp=0x00007f3856a61e20,  free space=1015k\r\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nJ 11067 C2 com.tingyun.com.yahoo.memory.NonNativeWritableMemoryImpl.getDouble(J)D (30 bytes) @ 0x00007f3aadbfe3e1 [0x00007f3aadbfe3a0+0x41]\r\nJ 9754 C2 com.tingyun.com.yahoo.sketches.quantiles.DirectDoublesSketchAccessor.get(I)D (77 bytes) @ 0x00007f3aadd90ba8 [0x00007f3aadd90b20+0x88]\r\nJ 12669 C1 com.tingyun.com.yahoo.sketches.quantiles.DoublesMergeImpl.justZipWithStride(Lcom/tingyun/com/yahoo/sketches/quantiles/DoublesBufferAccessor;Lcom/tingyun/com/yahoo/sketches/quantiles/DoublesBufferAccessor;II)V (48 bytes) @ 0x00007f3aae91d6cc [0x00007f3aae91d500+0x1cc]\r\nj  com.tingyun.com.yahoo.sketches.quantiles.DoublesMergeImpl.downSamplingMergeInto(Lcom/tingyun/com/yahoo/sketches/quantiles/DoublesSketch;Lcom/tingyun/com/yahoo/sketches/quantiles/UpdateDoublesSketch;)V+198\r\nJ 13391 C2 com.tingyun.com.yahoo.sketches.quantiles.DoublesUnionImpl.updateLogic(ILcom/tingyun/com/yahoo/sketches/quantiles/UpdateDoublesSketch;Lcom/tingyun/com/yahoo/sketches/quantiles/DoublesSketch;)Lcom/tingyun/com/yahoo/sketches/quantiles/UpdateDoublesSketch; (552 bytes) @ 0x00007f3aaebd302c [0x00007f3aaebd1940+0x16ec]\r\nJ 7158 C2 com.tingyun.com.yahoo.sketches.quantiles.DoublesUnionImpl.update(Lcom/tingyun/com/yahoo/sketches/quantiles/DoublesSketch;)V (17 bytes) @ 0x00007f3aadc86d64 [0x00007f3aadc86d20+0x44]\r\nJ 13468 C1 org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchMergeBufferAggregator.aggregate(Ljava/nio/ByteBuffer;I)V (83 bytes) @ 0x00007f3aadf51a0c [0x00007f3aadf51380+0x68c]\r\nJ 13278 C2 org.apache.druid.query.groupby.epinephelinae.Grouper.aggregate(Ljava/lang/Object;)Lorg/apache/druid/query/groupby/epinephelinae/AggregateResult; (27 bytes) @ 0x00007f3aaeb60e10 [0x00007f3aaeb5ffc0+0xe50]\r\nJ 10418 C2 org.apache.druid.query.groupby.epinephelinae.GroupByQueryEngineV2$HashAggregateIterator.aggregateSingleValueDims(Lorg/apache/druid/query/groupby/epinephelinae/Grouper;)V (117 bytes) @ 0x00007f3aae2afb70 [0x00007f3aae2afa20+0x150]\r\nJ 13638 C2 org.apache.druid.query.groupby.epinephelinae.GroupByQueryEngineV2$GroupByEngineIterator.initNewDelegate()Lorg/apache/druid/query/groupby/epinephelinae/CloseableGrouperIterator; (48 bytes) @ 0x00007f3aae217c6c [0x00007f3aae215880+0x23ec]\r\nJ 10400 C2 org.apache.druid.query.groupby.epinephelinae.GroupByQueryEngineV2$GroupByEngineIterator.hasNext()Z (57 bytes) @ 0x00007f3aae273748 [0x00007f3aae273640+0x108]\r\nJ 13110 C2 org.apache.druid.java.util.common.guava.ConcatSequence$$Lambda$136.accumulate(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; (13 bytes) @ 0x00007f3aaea8987c [0x00007f3aaea89800+0x7c]\r\nJ 13399 C2 org.apache.druid.java.util.common.guava.FilteringAccumulator.accumulate(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; (27 bytes) @ 0x00007f3aad6b39e0 [0x00007f3aad6b3940+0xa0]\r\n```\r\nAny suggestions? Thanks!\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516698275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516703952","html_url":"https://github.com/apache/druid/pull/8203#issuecomment-516703952","issue_url":"https://api.github.com/repos/apache/druid/issues/8203","id":516703952,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcwMzk1Mg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T05:39:39Z","updated_at":"2019-07-31T05:39:39Z","author_association":"CONTRIBUTOR","body":"@vogievetsky can we add a way from datasources to tasks?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516703952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516736029","html_url":"https://github.com/apache/druid/issues/8126#issuecomment-516736029","issue_url":"https://api.github.com/repos/apache/druid/issues/8126","id":516736029,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjczNjAyOQ==","user":{"login":"Eshcar","id":4384969,"node_id":"MDQ6VXNlcjQzODQ5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/4384969?v=4","gravatar_id":"","url":"https://api.github.com/users/Eshcar","html_url":"https://github.com/Eshcar","followers_url":"https://api.github.com/users/Eshcar/followers","following_url":"https://api.github.com/users/Eshcar/following{/other_user}","gists_url":"https://api.github.com/users/Eshcar/gists{/gist_id}","starred_url":"https://api.github.com/users/Eshcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eshcar/subscriptions","organizations_url":"https://api.github.com/users/Eshcar/orgs","repos_url":"https://api.github.com/users/Eshcar/repos","events_url":"https://api.github.com/users/Eshcar/events{/privacy}","received_events_url":"https://api.github.com/users/Eshcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T07:41:43Z","updated_at":"2019-07-31T07:41:43Z","author_association":"NONE","body":"Thanks Roman.\r\n#3892 is a very long issue that splits into multiple discussions covering many different things, so I am not sure what is the bottom line. Also it has not been discussed over the last year.\r\n\r\nCan you summarize any progress made wrt Memory aggregator if any.\r\nIf it is blocked then what is the reason - is it community rejection due to backward compatibility? fear of performance degradation? or simply lack of working hands?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516736029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516737638","html_url":"https://github.com/apache/druid/issues/8126#issuecomment-516737638","issue_url":"https://api.github.com/repos/apache/druid/issues/8126","id":516737638,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjczNzYzOA==","user":{"login":"Eshcar","id":4384969,"node_id":"MDQ6VXNlcjQzODQ5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/4384969?v=4","gravatar_id":"","url":"https://api.github.com/users/Eshcar","html_url":"https://github.com/Eshcar","followers_url":"https://api.github.com/users/Eshcar/followers","following_url":"https://api.github.com/users/Eshcar/following{/other_user}","gists_url":"https://api.github.com/users/Eshcar/gists{/gist_id}","starred_url":"https://api.github.com/users/Eshcar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eshcar/subscriptions","organizations_url":"https://api.github.com/users/Eshcar/orgs","repos_url":"https://api.github.com/users/Eshcar/repos","events_url":"https://api.github.com/users/Eshcar/events{/privacy}","received_events_url":"https://api.github.com/users/Eshcar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T07:46:57Z","updated_at":"2019-07-31T07:46:57Z","author_association":"NONE","body":"2 naive question - \r\n1) Does buffer aggregators used by on-heap incremental index or only by off-heap  incremental index?\r\n2) If the answer to (1) is only off-heap incremental index, then does off-heap incremental index being used in production anywhere? does it perform well enough?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516737638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516746114","html_url":"https://github.com/apache/druid/issues/8061#issuecomment-516746114","issue_url":"https://api.github.com/repos/apache/druid/issues/8061","id":516746114,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc0NjExNA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T08:12:57Z","updated_at":"2019-07-31T08:12:57Z","author_association":"MEMBER","body":"Regarding the autoscaling, there are users who have developed autoscaling strategies outside druid e.g kubernetes users, use simple Horizontal Pod Autoscaler rules and keeping the autoscaling strategies simple help them write the rules easily. \r\n\r\nThinking more on the lines of deep storage, \r\n* data cleanup could be easy if we follow a hierarchy, e.g the baseTaskDir/supervisor-task-id of the supervisor task can serve as the base path for the intermediary location and MM can just ensure that the base path and any underlying sub-dirs are cleaned up when the supervisor task fails. \r\n* I see MM as very lightweight processes that have the responsiblity of orchestration of peons, monitoring and cleaning any leftover files/data. It would be great if we can keep it that way. \r\n* If we use deep storage as handoff for intermediate segments, we probably do not need any additional complexity in the MiddleManager to serve as an Intermediary Data Server.\r\n* Keeping MM simple would optionally keep us open to expanding our TaskRunners to directly leverage modern container orchestration platforms like kubernetes, marathon, Yarn, Yunicorn etc, where TaskRunners schedule peons directly in e.g. a kubernetes cluster. See Below Issues, although marked as stale, but i still believe there is value in those proposals -   \r\n  * Autoscaler for Marathon - https://github.com/apache/incubator-druid/issues/3451\r\n  * Druid on YARN - https://github.com/apache/incubator-druid/issues/4400\r\n\r\nEfficiency wise I agree that reading data from deep storage (especially when using s3) would be slower than reading it from another MM, but till now I have seen creation of Druid indexes and final segments to be the major bottleneck instead of data transfer.\r\n\r\nWhat do you think ? \r\n\r\nAgreed, it can be done in a follow-up PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516746114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516837218","html_url":"https://github.com/apache/druid/issues/5698#issuecomment-516837218","issue_url":"https://api.github.com/repos/apache/druid/issues/5698","id":516837218,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjgzNzIxOA==","user":{"login":"eranmeir","id":888803,"node_id":"MDQ6VXNlcjg4ODgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/888803?v=4","gravatar_id":"","url":"https://api.github.com/users/eranmeir","html_url":"https://github.com/eranmeir","followers_url":"https://api.github.com/users/eranmeir/followers","following_url":"https://api.github.com/users/eranmeir/following{/other_user}","gists_url":"https://api.github.com/users/eranmeir/gists{/gist_id}","starred_url":"https://api.github.com/users/eranmeir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eranmeir/subscriptions","organizations_url":"https://api.github.com/users/eranmeir/orgs","repos_url":"https://api.github.com/users/eranmeir/repos","events_url":"https://api.github.com/users/eranmeir/events{/privacy}","received_events_url":"https://api.github.com/users/eranmeir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T12:57:43Z","updated_at":"2019-07-31T12:57:43Z","author_association":"NONE","body":"@jon-wei, @gianm \r\n\r\nIn a previous comment I wrote:\r\n> ... We’ll use Druid’s emitted [metrics](https://druid.apache.org/docs/latest/operations/metrics.html) to measure ingestion throughput (via `ingest/rows/output`, `ingest/persists/time` and `ingest/merge/time`) and query latency (via `query/time`).\r\n\r\nI'm having trouble finding the above mentioned ingestion metrics in the logs (I configured a logging emitter and do see other metrics). It seems `RealtimeMetricsMonitor` is no longer supported? How would you suggest configuring the benchmark cluster to retrieve relevant metrics and calculate ingestion throughput? \r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516837218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516891348","html_url":"https://github.com/apache/druid/pull/8157#issuecomment-516891348","issue_url":"https://api.github.com/repos/apache/druid/issues/8157","id":516891348,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjg5MTM0OA==","user":{"login":"will-lauer","id":6795115,"node_id":"MDQ6VXNlcjY3OTUxMTU=","avatar_url":"https://avatars.githubusercontent.com/u/6795115?v=4","gravatar_id":"","url":"https://api.github.com/users/will-lauer","html_url":"https://github.com/will-lauer","followers_url":"https://api.github.com/users/will-lauer/followers","following_url":"https://api.github.com/users/will-lauer/following{/other_user}","gists_url":"https://api.github.com/users/will-lauer/gists{/gist_id}","starred_url":"https://api.github.com/users/will-lauer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/will-lauer/subscriptions","organizations_url":"https://api.github.com/users/will-lauer/orgs","repos_url":"https://api.github.com/users/will-lauer/repos","events_url":"https://api.github.com/users/will-lauer/events{/privacy}","received_events_url":"https://api.github.com/users/will-lauer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T15:09:19Z","updated_at":"2019-07-31T15:09:19Z","author_association":"CONTRIBUTOR","body":"@pjain1 While we certainly talked about using MISSING_SEGMENTS, I don't believe we ever actually implemented it in production, so while removing it completely probably won't break anything we have, it is less than desirable. I'd prefer to have a partial list than no list at all. Or at least some other indication that the list was non-empty.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516891348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516898768","html_url":"https://github.com/apache/druid/pull/8129#issuecomment-516898768","issue_url":"https://api.github.com/repos/apache/druid/issues/8129","id":516898768,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjg5ODc2OA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T15:27:04Z","updated_at":"2019-07-31T15:27:04Z","author_association":"CONTRIBUTOR","body":"@leventov I've removed all the unrelated changes and rebased against latest master. Let me know what you think. Would be great to get this in so I can continue on fixing all the `[Not]Null` annotations.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516898768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516916240","html_url":"https://github.com/apache/druid/pull/7306#issuecomment-516916240","issue_url":"https://api.github.com/repos/apache/druid/issues/7306","id":516916240,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjkxNjI0MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T16:09:03Z","updated_at":"2019-07-31T16:09:03Z","author_association":"MEMBER","body":"@vogievetsky could you please review changes in web-console in this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516916240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516928780","html_url":"https://github.com/apache/druid/pull/8138#issuecomment-516928780","issue_url":"https://api.github.com/repos/apache/druid/issues/8138","id":516928780,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjkyODc4MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T16:44:28Z","updated_at":"2019-07-31T16:44:28Z","author_association":"MEMBER","body":"@Fokko thanks.\r\n\r\nPlease, never force-push your PR branch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516928780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516931063","html_url":"https://github.com/apache/druid/issues/8150#issuecomment-516931063","issue_url":"https://api.github.com/repos/apache/druid/issues/8150","id":516931063,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjkzMTA2Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T16:51:22Z","updated_at":"2019-07-31T16:51:32Z","author_association":"MEMBER","body":"> Are you picturing a light mode of the console that never issues Druid SQL / native queries or are you thinking that the coordinator will route those queries to the broker?\r\n\r\nLight mode, I would say.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516931063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516937797","html_url":"https://github.com/apache/druid/pull/8207#issuecomment-516937797","issue_url":"https://api.github.com/repos/apache/druid/issues/8207","id":516937797,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjkzNzc5Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T17:09:35Z","updated_at":"2019-07-31T17:09:35Z","author_association":"MEMBER","body":"Duplicate of #8205","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516937797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516965006","html_url":"https://github.com/apache/druid/issues/8095#issuecomment-516965006","issue_url":"https://api.github.com/repos/apache/druid/issues/8095","id":516965006,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk2NTAwNg==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T18:24:29Z","updated_at":"2019-07-31T18:24:29Z","author_association":"CONTRIBUTOR","body":"I think this is the same issue as https://github.com/apache/incubator-druid/issues/8032\r\nShould be fixed by https://github.com/apache/incubator-druid/pull/8055\r\nand included into the upcoming 0.15.1 release","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516965006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516989358","html_url":"https://github.com/apache/druid/issues/4349#issuecomment-516989358","issue_url":"https://api.github.com/repos/apache/druid/issues/4349","id":516989358,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk4OTM1OA==","user":{"login":"WilliamWhispell","id":1390230,"node_id":"MDQ6VXNlcjEzOTAyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1390230?v=4","gravatar_id":"","url":"https://api.github.com/users/WilliamWhispell","html_url":"https://github.com/WilliamWhispell","followers_url":"https://api.github.com/users/WilliamWhispell/followers","following_url":"https://api.github.com/users/WilliamWhispell/following{/other_user}","gists_url":"https://api.github.com/users/WilliamWhispell/gists{/gist_id}","starred_url":"https://api.github.com/users/WilliamWhispell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilliamWhispell/subscriptions","organizations_url":"https://api.github.com/users/WilliamWhispell/orgs","repos_url":"https://api.github.com/users/WilliamWhispell/repos","events_url":"https://api.github.com/users/WilliamWhispell/events{/privacy}","received_events_url":"https://api.github.com/users/WilliamWhispell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T19:32:50Z","updated_at":"2019-07-31T19:32:50Z","author_association":"NONE","body":"I notice when ingesting csvs, where I want to allow for null values, I see:\r\n\r\nexceptions: [could not convert value [] to double,could not convert value [] to double,could not convert value [] to double,could not convert value [] to double,could not convert value [] to double,could not convert value [] to double,]\r\n\tat org.apache.druid.segment.incremental.IncrementalIndex.getCombinedParseException(IncrementalIndex.java:757) ~[druid-processing-0.15.0-incubating.jar:0.15.0-incubating]\r\n\tat org.apache.druid.segment.incremental.IncrementalIndex.add(IncrementalIndex.java:611) ~[druid-processing-0.15.0-incubating.jar:0.15.0-incubating]\r\n\tat org.apache.druid.segment.realtime.plumber.Sink.add(Sink.java:180) ~[druid-server-0.15.0-incubating.jar:0.15.0-incubating]\r\n\r\nI'd like to set maxParseExceptions to 0, but then these will halt the ingestion. How can we ingest null values for a double dimension without creating parse exceptions?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516989358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516990252","html_url":"https://github.com/apache/druid/pull/8205#issuecomment-516990252","issue_url":"https://api.github.com/repos/apache/druid/issues/8205","id":516990252,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk5MDI1Mg==","user":{"login":"ArtyomyuS","id":2368617,"node_id":"MDQ6VXNlcjIzNjg2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/2368617?v=4","gravatar_id":"","url":"https://api.github.com/users/ArtyomyuS","html_url":"https://github.com/ArtyomyuS","followers_url":"https://api.github.com/users/ArtyomyuS/followers","following_url":"https://api.github.com/users/ArtyomyuS/following{/other_user}","gists_url":"https://api.github.com/users/ArtyomyuS/gists{/gist_id}","starred_url":"https://api.github.com/users/ArtyomyuS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArtyomyuS/subscriptions","organizations_url":"https://api.github.com/users/ArtyomyuS/orgs","repos_url":"https://api.github.com/users/ArtyomyuS/repos","events_url":"https://api.github.com/users/ArtyomyuS/events{/privacy}","received_events_url":"https://api.github.com/users/ArtyomyuS/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T19:35:33Z","updated_at":"2019-07-31T19:35:33Z","author_association":"CONTRIBUTOR","body":"@leventov I updated. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516990252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516993449","html_url":"https://github.com/apache/druid/issues/8126#issuecomment-516993449","issue_url":"https://api.github.com/repos/apache/druid/issues/8126","id":516993449,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk5MzQ0OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T19:45:18Z","updated_at":"2019-07-31T19:45:18Z","author_association":"CONTRIBUTOR","body":"@Eshcar \r\n regarding memory management: I would like it to be an interface inside druid core and later be a pluggable entity that can be changed inside extensions e.g. say a oak based extension or users who know their data and can write a more appropriate one, they should be able to do so. that also allows ppl to experiment with different memory management strategies/impls.\r\n\r\nregarding growth strategy: current strategy I described was to double the size every time, but I also thought about  having following(notice that return type is \"int\" here not boolean)\r\n\r\n```\r\n  // Returns 0, if success\r\n  // Returns positive value, indicating what should be the size of bigger allocated BufferSize\r\n  // Returns negative value, indicating bigger buffer is needed and do something default\r\n  default int aggregate(ByteBuffer buff, int position, int capacity)\r\n  {\r\n    aggregate(buff, position);\r\n    return true;\r\n  }\r\n```\r\nthat could let aggregator impl control the growth strategy as it has best information about what it needs.\r\n\r\nlater if needed, \"default\" grown strategy could be made pluggable so that extension writers could control that. That said, It doesn't matter for OakIncrementalIndex as that would choose its own default growth strategy.\r\n\r\nregarding using Memory instead of ByteBuffer : I am sure that is good idea for performance, so instead of adding more methods to `BufferAggregator` , we can introduce `WritableMemoryAggregator`. Only wrinkle is around maintaining backward compatibility, I haven't thought it through but will definitely try it. That said, this is somewhat orthogonal and could be done separately but I agree it is good to do that from the get go if possible.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516993449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516994789","html_url":"https://github.com/apache/druid/issues/4888#issuecomment-516994789","issue_url":"https://api.github.com/repos/apache/druid/issues/4888","id":516994789,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk5NDc4OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T19:49:30Z","updated_at":"2019-07-31T19:49:30Z","author_association":"CONTRIBUTOR","body":"thanks to stalebot ,I had forgotten about this.\r\n\r\nIt turns out I have now gotten use cases where at least the aggregators need to have behavior (3) . I had created an issue to describe my thoughts in https://github.com/apache/incubator-druid/issues/8148 and I think I'm gonna make a PR soonish to make that change as using expressions with multi value columns is becoming tricky for the service that generates queries.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516994789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/516996774","html_url":"https://github.com/apache/druid/pull/8157#issuecomment-516996774","issue_url":"https://api.github.com/repos/apache/druid/issues/8157","id":516996774,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjk5Njc3NA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T19:55:44Z","updated_at":"2019-07-31T19:57:41Z","author_association":"CONTRIBUTOR","body":"> Also improved ResponseContext serialization. Previously the result of serialization was truncated if its length was greater than the limit. I believe it would be better to keep the context structure and make it deserializable thus the process of serialization removes max-length fields completely from the context until the final result length doesn't exceed the limit.\r\n\r\nI haven't looked at the code , but this is definitely an incompatibility with previous behavior, so should be tagged as such . It should also be mentioned in release notes. I don't think most customers would care about it.\r\nNow, if possible, a better strategy might be to retain all keys but trim the bigger ones so to keep serialized response limited.\r\nOr, don't change the behavior since we haven't had use cases where this has been a problem so far. In general, it might be good to keep refactoring sort of PRs separate from PRs that introduce a change in behavior.\r\nFinally, if this PR does get merged with a behavioral change, then should be tagged `incompatible` .","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/516996774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/517002503","html_url":"https://github.com/apache/druid/issues/8175#issuecomment-517002503","issue_url":"https://api.github.com/repos/apache/druid/issues/8175","id":517002503,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzAwMjUwMw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T20:13:07Z","updated_at":"2019-07-31T20:13:07Z","author_association":"CONTRIBUTOR","body":"> does that mean if we have a task with an 8 hour duration, we need to wait 8 hours?\r\n\r\nin general, yes\r\nhowever, after disabling the MM\r\nyou have the option of \"killing\" those tasks running on the disabled MM , kafka supervisor will automatically re-create them and they would not go to disabled MM\r\nOR, I think, kafka supervisor has a \"suspend/resume\" feature where you can send a request to suspend it temporarily which will wrap up the current state. and then you can resume which will re-create the tasks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/517002503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/517011059","html_url":"https://github.com/apache/druid/issues/4349#issuecomment-517011059","issue_url":"https://api.github.com/repos/apache/druid/issues/4349","id":517011059,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzAxMTA1OQ==","user":{"login":"WilliamWhispell","id":1390230,"node_id":"MDQ6VXNlcjEzOTAyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1390230?v=4","gravatar_id":"","url":"https://api.github.com/users/WilliamWhispell","html_url":"https://github.com/WilliamWhispell","followers_url":"https://api.github.com/users/WilliamWhispell/followers","following_url":"https://api.github.com/users/WilliamWhispell/following{/other_user}","gists_url":"https://api.github.com/users/WilliamWhispell/gists{/gist_id}","starred_url":"https://api.github.com/users/WilliamWhispell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilliamWhispell/subscriptions","organizations_url":"https://api.github.com/users/WilliamWhispell/orgs","repos_url":"https://api.github.com/users/WilliamWhispell/repos","events_url":"https://api.github.com/users/WilliamWhispell/events{/privacy}","received_events_url":"https://api.github.com/users/WilliamWhispell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T20:36:39Z","updated_at":"2019-07-31T20:36:39Z","author_association":"NONE","body":"I think the bug is with https://github.com/apache/incubator-druid/blob/82b248cc1778d24b6f37864e113d8c77250d0cdf/core/src/main/java/org/apache/druid/common/config/NullHandling.java#L82, I'm thinking that should be !replaceWithDefault() as when we aren't using default values, we need to convert the object to null","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/517011059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/517034018","html_url":"https://github.com/apache/druid/pull/8157#issuecomment-517034018","issue_url":"https://api.github.com/repos/apache/druid/issues/8157","id":517034018,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzAzNDAxOA==","user":{"login":"esevastyanov","id":1766814,"node_id":"MDQ6VXNlcjE3NjY4MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1766814?v=4","gravatar_id":"","url":"https://api.github.com/users/esevastyanov","html_url":"https://github.com/esevastyanov","followers_url":"https://api.github.com/users/esevastyanov/followers","following_url":"https://api.github.com/users/esevastyanov/following{/other_user}","gists_url":"https://api.github.com/users/esevastyanov/gists{/gist_id}","starred_url":"https://api.github.com/users/esevastyanov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esevastyanov/subscriptions","organizations_url":"https://api.github.com/users/esevastyanov/orgs","repos_url":"https://api.github.com/users/esevastyanov/repos","events_url":"https://api.github.com/users/esevastyanov/events{/privacy}","received_events_url":"https://api.github.com/users/esevastyanov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T21:45:48Z","updated_at":"2019-07-31T21:45:48Z","author_association":"CONTRIBUTOR","body":"Thanks, everyone. I updated the logic of truncation and kept it as general as possible without mentioning custom context keys. New algorithm removes some values from resulting (serialized) JSON arrays (no matter if it's `MISSING_SEGMENTS` or `UNCOVERED_INTERVALS`) to satisfy the length limit. So as previously, the serialized context has some but not all array's values if the limit exceeded. I also added a boolean indicator if a context was truncated. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/517034018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/517065779","html_url":"https://github.com/apache/druid/pull/8197#issuecomment-517065779","issue_url":"https://api.github.com/repos/apache/druid/issues/8197","id":517065779,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA2NTc3OQ==","user":{"login":"ccaominh","id":9208416,"node_id":"MDQ6VXNlcjkyMDg0MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9208416?v=4","gravatar_id":"","url":"https://api.github.com/users/ccaominh","html_url":"https://github.com/ccaominh","followers_url":"https://api.github.com/users/ccaominh/followers","following_url":"https://api.github.com/users/ccaominh/following{/other_user}","gists_url":"https://api.github.com/users/ccaominh/gists{/gist_id}","starred_url":"https://api.github.com/users/ccaominh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccaominh/subscriptions","organizations_url":"https://api.github.com/users/ccaominh/orgs","repos_url":"https://api.github.com/users/ccaominh/repos","events_url":"https://api.github.com/users/ccaominh/events{/privacy}","received_events_url":"https://api.github.com/users/ccaominh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T23:59:38Z","updated_at":"2019-07-31T23:59:38Z","author_association":"CONTRIBUTOR","body":"@gianm, @clintropolis: Ready for re-review","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/517065779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/517071666","html_url":"https://github.com/apache/druid/pull/8210#issuecomment-517071666","issue_url":"https://api.github.com/repos/apache/druid/issues/8210","id":517071666,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA3MTY2Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T00:30:06Z","updated_at":"2019-08-01T00:30:06Z","author_association":"CONTRIBUTOR","body":"I wish I could see number of tasks running as a column in the table, then click into those tasks to reach the tasks views.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/517071666/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]