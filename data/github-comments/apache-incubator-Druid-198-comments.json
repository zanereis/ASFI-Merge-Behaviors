[{"url":"https://api.github.com/repos/apache/druid/issues/comments/412990974","html_url":"https://github.com/apache/druid/issues/6171#issuecomment-412990974","issue_url":"https://api.github.com/repos/apache/druid/issues/6171","id":412990974,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjk5MDk3NA==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T19:39:06Z","updated_at":"2018-08-14T19:39:06Z","author_association":"CONTRIBUTOR","body":">@gianm thanks for the comment but not sure about taskResource. AFAIK, processing threads are used for query processing in peons. Does taskResource affect to the processing configuration too? Or, does it have an effect that a MM is allocated less tasks, so that each task can use more processing threads?\r\n\r\n@gianm could you clarify this please","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/412990974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/412994975","html_url":"https://github.com/apache/druid/pull/6162#issuecomment-412994975","issue_url":"https://api.github.com/repos/apache/druid/issues/6162","id":412994975,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjk5NDk3NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T19:53:16Z","updated_at":"2018-08-14T19:53:16Z","author_association":"CONTRIBUTOR","body":"Thanks. Would you please add a doc for this? Probably you can add it to https://github.com/apache/incubator-druid/blob/master/docs/content/development/build.md.\r\n\r\nAlso, if you want, you can change the travis script to not make the distribution tarball, so that we can check it helps Travis jobs to succeed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/412994975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413019439","html_url":"https://github.com/apache/druid/pull/6173#issuecomment-413019439","issue_url":"https://api.github.com/repos/apache/druid/issues/6173","id":413019439,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAxOTQzOQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:18:09Z","updated_at":"2018-08-14T21:18:09Z","author_association":"CONTRIBUTOR","body":"Hi @samarthjain, thank you for the PR. Would you add some more details about this change to the PR description? It's not intuitive to me because it looks that any class annotated with `LifecycleStart` and `LifecycleStop` should be started/stopped automatically without this change if they are properly added to the `Lifecycle`. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413019439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413021541","html_url":"https://github.com/apache/druid/pull/6158#issuecomment-413021541","issue_url":"https://api.github.com/repos/apache/druid/issues/6158","id":413021541,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAyMTU0MQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:25:49Z","updated_at":"2018-08-14T21:25:49Z","author_association":"CONTRIBUTOR","body":"@asdf2014 thanks! I've left some comments and restarted the failed jobs.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413021541/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413021864","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413021864","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413021864,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAyMTg2NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:27:02Z","updated_at":"2018-08-14T21:27:02Z","author_association":"CONTRIBUTOR","body":"@gianm please check the build failure.\r\n\r\n```\r\n/home/travis/build/apache/incubator-druid/server/src/test/java/io/druid/segment/realtime/appenderator/StreamAppenderatorDriverTest.java:362: error: incompatible types: bad return type in lambda expression\r\n    return (segments, commitMetadata) -> true;\r\n                                         ^\r\n    boolean cannot be converted to SegmentPublishResult\r\n/home/travis/build/apache/incubator-druid/server/src/test/java/io/druid/segment/realtime/appenderator/StreamAppenderatorDriverTest.java:371: error: incompatible types: bad return type in lambda expression\r\n      return false;\r\n             ^\r\n    boolean cannot be converted to SegmentPublishResult\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413021864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413022276","html_url":"https://github.com/apache/druid/pull/5938#issuecomment-413022276","issue_url":"https://api.github.com/repos/apache/druid/issues/5938","id":413022276,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAyMjI3Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:28:38Z","updated_at":"2018-08-14T21:28:38Z","author_association":"CONTRIBUTOR","body":"Please check the build failure.\r\n\r\n```\r\n[ERROR] Forbidden field access: java.lang.System#out [prints to System.out; should only be used for debugging, not in production code]\r\n[ERROR]   in io.druid.query.topn.types.NumericTopNColumnSelectorStrategy (NumericTopNColumnSelectorStrategy.java:153)\r\n[ERROR] Forbidden method invocation: java.lang.String#format(java.lang.String,java.lang.Object[]) [Uses default locale]\r\n[ERROR]   in io.druid.query.topn.types.NumericTopNColumnSelectorStrategy (NumericTopNColumnSelectorStrategy.java:153)\r\n[ERROR] Forbidden field access: java.lang.System#out [prints to System.out; should only be used for debugging, not in production code]\r\n[ERROR]   in io.druid.query.topn.TopNLexicographicResultBuilder (TopNLexicographicResultBuilder.java:79)\r\n[ERROR] Scanned 1596 (and 630 related) class file(s) for forbidden API invocations (in 1.63s), 3 error(s).\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413022276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413022801","html_url":"https://github.com/apache/druid/pull/6158#issuecomment-413022801","issue_url":"https://api.github.com/repos/apache/druid/issues/6158","id":413022801,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAyMjgwMQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:30:30Z","updated_at":"2018-08-14T21:30:30Z","author_association":"MEMBER","body":"Nice! :+1: after changes @jihoonson suggested","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413022801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413026337","html_url":"https://github.com/apache/druid/pull/6173#issuecomment-413026337","issue_url":"https://api.github.com/repos/apache/druid/issues/6173","id":413026337,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAyNjMzNw==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T21:44:14Z","updated_at":"2018-08-14T21:44:14Z","author_association":"CONTRIBUTOR","body":"Thanks for taking a look, @jihoonson. I have updated the PR description.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413026337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413033275","html_url":"https://github.com/apache/druid/pull/6159#issuecomment-413033275","issue_url":"https://api.github.com/repos/apache/druid/issues/6159","id":413033275,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzAzMzI3NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T22:13:35Z","updated_at":"2018-08-14T22:13:35Z","author_association":"CONTRIBUTOR","body":"The last travis job has actually succeeded: https://travis-ci.org/apache/incubator-druid/jobs/415334532. I'm merging this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413033275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413040496","html_url":"https://github.com/apache/druid/pull/6076#issuecomment-413040496","issue_url":"https://api.github.com/repos/apache/druid/issues/6076","id":413040496,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA0MDQ5Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T22:48:39Z","updated_at":"2018-08-14T22:51:11Z","author_association":"CONTRIBUTOR","body":"I updated the patch with the following:\r\n- Added mutual TLS to the integration tests. All druid services will have both plaintext and TLS port enabled with client cert checking enabled. A new test that accesses TLS and non-TLS endpoints on each service has been added.\r\n- Adjusted the timers in the integration tests: I shortened the retry periods and increased the number of retries\r\n- Fixed some timing issues in certain integration tests (like feeding events to a worker task before it's ready)\r\n- Fixes coordinator -> overlord proxy requests when TLS is enabled (the OverlordProxyServlet was not using a http client with the proper SSLContext)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413040496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413040567","html_url":"https://github.com/apache/druid/pull/6076#issuecomment-413040567","issue_url":"https://api.github.com/repos/apache/druid/issues/6076","id":413040567,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA0MDU2Nw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T22:49:02Z","updated_at":"2018-08-14T22:49:02Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413040567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052577","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413052577","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413052577,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA1MjU3Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T23:57:05Z","updated_at":"2018-08-14T23:57:05Z","author_association":"CONTRIBUTOR","body":"@jihoonson thanks, I pushed again.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052638","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413052638","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413052638,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA1MjYzOA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T23:57:25Z","updated_at":"2018-08-14T23:57:25Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052980","html_url":"https://github.com/apache/druid/pull/6152#issuecomment-413052980","issue_url":"https://api.github.com/repos/apache/druid/issues/6152","id":413052980,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA1Mjk4MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-14T23:59:27Z","updated_at":"2018-08-14T23:59:27Z","author_association":"CONTRIBUTOR","body":"Ok, I further checked and it seems that setting locale works. Closing this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413052980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413060382","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413060382","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413060382,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA2MDM4Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T00:45:33Z","updated_at":"2018-08-15T00:45:33Z","author_association":"CONTRIBUTOR","body":"There are still some build failures.\r\n\r\n```\r\n[ERROR] COMPILATION ERROR : \r\n[ERROR] /home/travis/build/apache/incubator-druid/server/src/test/java/io/druid/segment/realtime/appenderator/BatchAppenderatorDriverTest.java:[197,42] incompatible types: bad return type in lambda expression\r\n    boolean cannot be converted to io.druid.indexing.overlord.SegmentPublishResult\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:testCompile (default-testCompile) on project druid-server: Compilation failure\r\n[ERROR] /home/travis/build/apache/incubator-druid/server/src/test/java/io/druid/segment/realtime/appenderator/BatchAppenderatorDriverTest.java:[197,42] incompatible types: bad return type in lambda expression\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413060382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413061200","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413061200","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413061200,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA2MTIwMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T00:50:46Z","updated_at":"2018-08-15T00:50:46Z","author_association":"CONTRIBUTOR","body":"OMG, sorry, I'll check more thoroughly before I push again.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413061200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413089187","html_url":"https://github.com/apache/druid/pull/6173#issuecomment-413089187","issue_url":"https://api.github.com/repos/apache/druid/issues/6173","id":413089187,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA4OTE4Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T04:12:47Z","updated_at":"2018-08-15T04:12:47Z","author_association":"CONTRIBUTOR","body":"@gianm sounds good to me.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413089187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413089530","html_url":"https://github.com/apache/druid/pull/6155#issuecomment-413089530","issue_url":"https://api.github.com/repos/apache/druid/issues/6155","id":413089530,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzA4OTUzMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T04:15:44Z","updated_at":"2018-08-15T04:15:44Z","author_association":"CONTRIBUTOR","body":"Hmm, now some unit tests are failing and looks legitimate.\r\n\r\n```\r\nFailed tests: \r\n  StreamAppenderatorDriverFailTest.testFailDuringPublish \r\nExpected: (an instance of java.util.concurrent.ExecutionException and exception with cause an instance of io.druid.java.util.common.ISE and exception with message a string containing \"Failed to publish segments[[DataSegment{size=0, shardSpec=NumberedShardSpec{partitionNum=0, partitions=0}, metrics=[], dimensions=[], version='abc123', loadSpec={}, interval=2000-01-01T00:00:00.000Z/2000-01-01T01:00:00.000Z, dataSource='foo', binaryVersion='0'}, DataSegment{size=0, shardSpec=NumberedShardSpec{partitionNum=0, partitions=0}, metrics=[], dimensions=[], version='abc123', loadSpec={}, interval=2000-01-01T01:00:00.000Z/2000-01-01T02:00:00.000Z, dataSource='foo', binaryVersion='0'}]]\")\r\n     but: exception with message a string containing \"Failed to publish segments[[DataSegment{size=0, shardSpec=NumberedShardSpec{partitionNum=0, partitions=0}, metrics=[], dimensions=[], version='abc123', loadSpec={}, interval=2000-01-01T00:00:00.000Z/2000-01-01T01:00:00.000Z, dataSource='foo', binaryVersion='0'}, DataSegment{size=0, shardSpec=NumberedShardSpec{partitionNum=0, partitions=0}, metrics=[], dimensions=[], version='abc123', loadSpec={}, interval=2000-01-01T01:00:00.000Z/2000-01-01T02:00:00.000Z, dataSource='foo', binaryVersion='0'}]]\" message was \"io.druid.java.util.common.ISE: Failed to publish segments.\"\r\nStacktrace was: java.util.concurrent.ExecutionException: io.druid.java.util.common.ISE: Failed to publish segments.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413089530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413104150","html_url":"https://github.com/apache/druid/pull/6173#issuecomment-413104150","issue_url":"https://api.github.com/repos/apache/druid/issues/6173","id":413104150,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzEwNDE1MA==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T06:15:23Z","updated_at":"2018-08-15T06:15:23Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews. I have updated the PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413104150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413117840","html_url":"https://github.com/apache/druid/issues/401#issuecomment-413117840","issue_url":"https://api.github.com/repos/apache/druid/issues/401","id":413117840,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzExNzg0MA==","user":{"login":"xianyinxin","id":15028683,"node_id":"MDQ6VXNlcjE1MDI4Njgz","avatar_url":"https://avatars.githubusercontent.com/u/15028683?v=4","gravatar_id":"","url":"https://api.github.com/users/xianyinxin","html_url":"https://github.com/xianyinxin","followers_url":"https://api.github.com/users/xianyinxin/followers","following_url":"https://api.github.com/users/xianyinxin/following{/other_user}","gists_url":"https://api.github.com/users/xianyinxin/gists{/gist_id}","starred_url":"https://api.github.com/users/xianyinxin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xianyinxin/subscriptions","organizations_url":"https://api.github.com/users/xianyinxin/orgs","repos_url":"https://api.github.com/users/xianyinxin/repos","events_url":"https://api.github.com/users/xianyinxin/events{/privacy}","received_events_url":"https://api.github.com/users/xianyinxin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T07:33:07Z","updated_at":"2018-08-15T07:33:07Z","author_association":"NONE","body":"Any update on this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413117840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413343886","html_url":"https://github.com/apache/druid/pull/6181#issuecomment-413343886","issue_url":"https://api.github.com/repos/apache/druid/issues/6181","id":413343886,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzM0Mzg4Ng==","user":{"login":"rpless","id":2407674,"node_id":"MDQ6VXNlcjI0MDc2NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2407674?v=4","gravatar_id":"","url":"https://api.github.com/users/rpless","html_url":"https://github.com/rpless","followers_url":"https://api.github.com/users/rpless/followers","following_url":"https://api.github.com/users/rpless/following{/other_user}","gists_url":"https://api.github.com/users/rpless/gists{/gist_id}","starred_url":"https://api.github.com/users/rpless/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpless/subscriptions","organizations_url":"https://api.github.com/users/rpless/orgs","repos_url":"https://api.github.com/users/rpless/repos","events_url":"https://api.github.com/users/rpless/events{/privacy}","received_events_url":"https://api.github.com/users/rpless/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T21:30:15Z","updated_at":"2018-08-15T21:30:15Z","author_association":"CONTRIBUTOR","body":"At some point I switch from the Druid intellij format back to my defaults and missed all the checkstyle warnings. Fixing them. Sorry about that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413343886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413348392","html_url":"https://github.com/apache/druid/issues/5473#issuecomment-413348392","issue_url":"https://api.github.com/repos/apache/druid/issues/5473","id":413348392,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzM0ODM5Mg==","user":{"login":"syedkhassan","id":31999923,"node_id":"MDQ6VXNlcjMxOTk5OTIz","avatar_url":"https://avatars.githubusercontent.com/u/31999923?v=4","gravatar_id":"","url":"https://api.github.com/users/syedkhassan","html_url":"https://github.com/syedkhassan","followers_url":"https://api.github.com/users/syedkhassan/followers","following_url":"https://api.github.com/users/syedkhassan/following{/other_user}","gists_url":"https://api.github.com/users/syedkhassan/gists{/gist_id}","starred_url":"https://api.github.com/users/syedkhassan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syedkhassan/subscriptions","organizations_url":"https://api.github.com/users/syedkhassan/orgs","repos_url":"https://api.github.com/users/syedkhassan/repos","events_url":"https://api.github.com/users/syedkhassan/events{/privacy}","received_events_url":"https://api.github.com/users/syedkhassan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-15T21:46:16Z","updated_at":"2018-08-15T21:46:16Z","author_association":"NONE","body":"Any update on union query using SQL ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413348392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413402400","html_url":"https://github.com/apache/druid/pull/6158#issuecomment-413402400","issue_url":"https://api.github.com/repos/apache/druid/issues/6158","id":413402400,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzQwMjQwMA==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T02:21:46Z","updated_at":"2018-08-16T02:21:46Z","author_association":"MEMBER","body":"Hi, @jihoonson . Thanks for your comments. I removed unnecessary boxing of Long type variables. Since some methods / constructors / annotations declare the type of the parameter, I cannot patch other suggestions.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413402400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413404880","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-413404880","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":413404880,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzQwNDg4MA==","user":{"login":"huang2012chao","id":13690781,"node_id":"MDQ6VXNlcjEzNjkwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13690781?v=4","gravatar_id":"","url":"https://api.github.com/users/huang2012chao","html_url":"https://github.com/huang2012chao","followers_url":"https://api.github.com/users/huang2012chao/followers","following_url":"https://api.github.com/users/huang2012chao/following{/other_user}","gists_url":"https://api.github.com/users/huang2012chao/gists{/gist_id}","starred_url":"https://api.github.com/users/huang2012chao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huang2012chao/subscriptions","organizations_url":"https://api.github.com/users/huang2012chao/orgs","repos_url":"https://api.github.com/users/huang2012chao/repos","events_url":"https://api.github.com/users/huang2012chao/events{/privacy}","received_events_url":"https://api.github.com/users/huang2012chao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T02:36:13Z","updated_at":"2018-08-16T02:39:54Z","author_association":"NONE","body":"@jihoonson \r\nif i insert some data  into kafka ,the task will success! just like the task id =[index_kafka_kafka_ins_de42264b8a929b1_cpgcjopj]\r\nThere many task failed in the KIS,like this :\r\n\r\n2018-08-15T12:04:05,611 INFO [qtp1310871029-50] io.druid.indexing.overlord.ForkingTaskRunner - Killing process for task: index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:05,664 INFO [forking-task-runner-0] io.druid.storage.hdfs.tasklog.HdfsTaskLogs - Writing task log to: hdfs://master:9000/druid/indexing-logs/index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:07,929 INFO [forking-task-runner-0] io.druid.storage.hdfs.tasklog.HdfsTaskLogs - Wrote task log to: hdfs://master:9000/druid/indexing-logs/index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:07,929 INFO [forking-task-runner-0] io.druid.indexing.overlord.ForkingTaskRunner - Exception caught during execution\r\njava.io.IOException: Stream closed\r\n\tat java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170) ~[?:1.8.0_181]\r\n\tat java.io.BufferedInputStream.read1(BufferedInputStream.java:291) ~[?:1.8.0_181]\r\n\tat java.io.BufferedInputStream.read(BufferedInputStream.java:345) ~[?:1.8.0_181]\r\n\tat java.io.FilterInputStream.read(FilterInputStream.java:107) ~[?:1.8.0_181]\r\n\tat com.google.common.io.ByteStreams.copy(ByteStreams.java:175) ~[guava-16.0.1.jar:?]\r\n\tat io.druid.indexing.overlord.ForkingTaskRunner$1.call(ForkingTaskRunner.java:452) [druid-indexing-service-0.12.1.jar:0.12.1]\r\n\tat io.druid.indexing.overlord.ForkingTaskRunner$1.call(ForkingTaskRunner.java:224) [druid-indexing-service-0.12.1.jar:0.12.1]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_181]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_181]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_181]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]\r\n2018-08-15T12:04:08,279 INFO [forking-task-runner-0] io.druid.indexing.overlord.ForkingTaskRunner - Removing task directory: var/druid/task/index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:08,783 INFO [WorkerTaskMonitor] io.druid.indexing.worker.WorkerTaskMonitor - Job's finished. Completed [index_kafka_kafka_ins_a2b40069b9da776_hkjphola] with status [FAILED]\r\n\r\nI guess it happed because there it no message push into kafka?\r\ni have used  druid 0.10.2.0 ,kafka 2.11-1.0.0,zookeeper 3.4.10.\r\nif you find anything error to configure,pelease tell me! \r\n![image](https://user-images.githubusercontent.com/13690781/44183638-650a0580-a13e-11e8-9888-4251164e0467.png)\r\nthe success log like [index_kafka_kafka_ins_de42264b8a929b1_cpgcjopj]:\r\n[index_kafka_kafka_ins_de42264b8a929b1_cpgcjopj.txt](https://github.com/apache/incubator-druid/files/2292232/index_kafka_kafka_ins_de42264b8a929b1_cpgcjopj.txt)\r\n\r\nin the overlord the failed task log:\r\n2018-08-15T12:04:06,040 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.overlord.MetadataTaskStorage - Updating task index_kafka_kafka_ins_a2b40069b9da776_hkjphola to status: TaskStatus{id=index_kafka_kafka_ins_a2b40069b9da776_hkjphola, status=FAILED, duration=-1}\r\n2018-08-15T12:04:07,560 WARN [KafkaSupervisor-kafka_disk-Reporting-0] io.druid.indexing.kafka.supervisor.KafkaSupervisor - Lag metric: Kafka partitions [0, 1, 2] do not match task partitions []\r\n2018-08-15T12:04:07,560 INFO [KafkaSupervisor-kafka_disk-Reporting-0] io.druid.java.util.emitter.core.LoggingEmitter - Event [{\"feed\":\"metrics\",\"timestamp\":\"2018-08-15T12:04:07.560Z\",\"service\":\"druid/overlord\",\"host\":\"master:8090\",\"version\":\"0.12.1\",\"metric\":\"ingest/kafka/lag\",\"value\":0,\"dataSource\":\"kafka_disk\"}]\r\n2018-08-15T12:04:07,569 WARN [KafkaSupervisor-kafka_ins-Reporting-0] io.druid.indexing.kafka.supervisor.KafkaSupervisor - Lag metric: Kafka partitions [0, 1, 2] do not match task partitions []\r\n2018-08-15T12:04:07,569 INFO [KafkaSupervisor-kafka_ins-Reporting-0] io.druid.java.util.emitter.core.LoggingEmitter - Event [{\"feed\":\"metrics\",\"timestamp\":\"2018-08-15T12:04:07.569Z\",\"service\":\"druid/overlord\",\"host\":\"master:8090\",\"version\":\"0.12.1\",\"metric\":\"ingest/kafka/lag\",\"value\":0,\"dataSource\":\"kafka_ins\"}]\r\n2018-08-15T12:04:08,587 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.RemoteTaskRunner - Worker[slave2:8091] wrote FAILED status for task [index_kafka_kafka_ins_a2b40069b9da776_hkjphola] on [TaskLocation{host='slave2', port=8102, tlsPort=-1}]\r\n2018-08-15T12:04:08,587 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.RemoteTaskRunner - Worker[slave2:8091] completed task[index_kafka_kafka_ins_a2b40069b9da776_hkjphola] with status[FAILED]\r\n2018-08-15T12:04:08,587 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.TaskQueue - Received FAILED status for task: index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:08,954 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.overlord.TaskQueue - Task done: KafkaIndexTask{id=index_kafka_kafka_ins_a2b40069b9da776_hkjphola, type=index_kafka, dataSource=kafka_ins}\r\n2018-08-15T12:04:08,955 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.RemoteTaskRunner - Cleaning up task[index_kafka_kafka_ins_a2b40069b9da776_hkjphola] on worker[slave2:8091]\r\n2018-08-15T12:04:08,978 WARN [Curator-PathChildrenCache-3] io.druid.indexing.overlord.TaskQueue - Unknown task completed: index_kafka_kafka_ins_a2b40069b9da776_hkjphola\r\n2018-08-15T12:04:08,978 INFO [Curator-PathChildrenCache-3] io.druid.java.util.emitter.core.LoggingEmitter - Event [{\"feed\":\"metrics\",\"timestamp\":\"2018-08-15T12:04:08.978Z\",\"service\":\"druid/overlord\",\"host\":\"master:8090\",\"version\":\"0.12.1\",\"metric\":\"task/run/time\",\"value\":103077,\"dataSource\":\"kafka_ins\",\"taskStatus\":\"FAILED\",\"taskType\":\"index_kafka\"}]\r\n2018-08-15T12:04:08,978 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.TaskQueue - Task FAILED: KafkaIndexTask{id=index_kafka_kafka_ins_a2b40069b9da776_hkjphola, type=index_kafka, dataSource=kafka_ins} (103077 run duration)\r\n2018-08-15T12:04:08,978 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.TaskRunnerUtils - Task [index_kafka_kafka_ins_a2b40069b9da776_hkjphola] status changed to [FAILED].\r\n2018-08-15T12:04:08,979 INFO [Curator-PathChildrenCache-3] io.druid.indexing.overlord.RemoteTaskRunner - Task[index_kafka_kafka_ins_a2b40069b9da776_hkjphola] went bye bye.\r\n2018-08-15T12:04:08,990 INFO [KafkaIndexTaskClient-kafka_disk-0] io.druid.indexing.kafka.KafkaIndexTaskClient - No TaskLocation available for task [index_kafka_kafka_disk_8258b8d8c8b7341_fgmoceab], this task may not have been assigned to a worker yet or may have already completed\r\n2018-08-15T12:04:08,992 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.kafka.supervisor.KafkaSupervisor - {id='kafka_ins', generationTime=2018-08-15T12:04:08.992Z, payload={dataSource='kafka_ins', topic='ins', partitions=3, replicas=1, durationSeconds=3600, active=[{id='index_kafka_kafka_ins_a2b40069b9da776_hkjphola', startTime=null, remainingSeconds=null}], publishing=[{id='index_kafka_kafka_ins_de42264b8a929b1_cpgcjopj', startTime=2018-08-15T10:49:33.227Z, remainingSeconds=925}]}}\r\n2018-08-15T12:04:09,001 INFO [KafkaSupervisor-kafka_disk] io.druid.indexing.kafka.supervisor.KafkaSupervisor - {id='kafka_disk', generationTime=2018-08-15T12:04:09.001Z, payload={dataSource='kafka_disk', topic='disk', partitions=3, replicas=1, durationSeconds=3600, active=[{id='index_kafka_kafka_disk_8258b8d8c8b7341_fgmoceab', startTime=null, remainingSeconds=null}], publishing=[{id='index_kafka_kafka_disk_8258b8d8c8b7341_fpojhnlo', startTime=2018-08-15T10:59:25.500Z, remainingSeconds=1650}]}}\r\n2018-08-15T12:04:09,005 WARN [KafkaSupervisor-kafka_ins] io.druid.indexing.kafka.supervisor.KafkaSupervisor - Task [index_kafka_kafka_ins_a2b40069b9da776_hkjphola] failed to return start time, killing task\r\n2018-08-15T12:04:09,317 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.kafka.supervisor.KafkaSupervisor - Number of tasks [0] does not match configured numReplicas [1] in task group [0], creating more tasks\r\n2018-08-15T12:04:09,318 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.overlord.MetadataTaskStorage - Inserting task index_kafka_kafka_ins_a2b40069b9da776_epkmnncf with status: TaskStatus{id=index_kafka_kafka_ins_a2b40069b9da776_epkmnncf, status=RUNNING, duration=-1}\r\n2018-08-15T12:04:09,983 INFO [KafkaSupervisor-kafka_ins] io.druid.indexing.overlord.TaskLockbox - Adding task[index_kafka_kafka_ins_a2b40069b9da776_epkmnncf] to activeTasks\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413404880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413414637","html_url":"https://github.com/apache/druid/pull/6162#issuecomment-413414637","issue_url":"https://api.github.com/repos/apache/druid/issues/6162","id":413414637,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzQxNDYzNw==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T03:36:20Z","updated_at":"2018-08-16T03:42:17Z","author_association":"MEMBER","body":"@jihoonson Indeed, it is necessary to double check it. After adding the -Pdist option, it seems that I can see from the [log](https://travis-ci.org/apache/incubator-druid/jobs/416639456#L862) that this option is already works, and the exec-maven-plugin plugin starts running.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413414637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413513916","html_url":"https://github.com/apache/druid/issues/5698#issuecomment-413513916","issue_url":"https://api.github.com/repos/apache/druid/issues/5698","id":413513916,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzUxMzkxNg==","user":{"login":"sanastas","id":12136181,"node_id":"MDQ6VXNlcjEyMTM2MTgx","avatar_url":"https://avatars.githubusercontent.com/u/12136181?v=4","gravatar_id":"","url":"https://api.github.com/users/sanastas","html_url":"https://github.com/sanastas","followers_url":"https://api.github.com/users/sanastas/followers","following_url":"https://api.github.com/users/sanastas/following{/other_user}","gists_url":"https://api.github.com/users/sanastas/gists{/gist_id}","starred_url":"https://api.github.com/users/sanastas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanastas/subscriptions","organizations_url":"https://api.github.com/users/sanastas/orgs","repos_url":"https://api.github.com/users/sanastas/repos","events_url":"https://api.github.com/users/sanastas/events{/privacy}","received_events_url":"https://api.github.com/users/sanastas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T11:28:52Z","updated_at":"2018-08-16T11:28:52Z","author_association":"NONE","body":"Here is the latest pull request #6184 :\r\nhttps://github.com/apache/incubator-druid/pull/6184","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413513916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413599355","html_url":"https://github.com/apache/druid/issues/6183#issuecomment-413599355","issue_url":"https://api.github.com/repos/apache/druid/issues/6183","id":413599355,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzU5OTM1NQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T16:09:18Z","updated_at":"2018-08-16T16:09:18Z","author_association":"CONTRIBUTOR","body":"is this one https://github.com/druid-io/docker-druid not good enough ? i can run it on my work station.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413599355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413630853","html_url":"https://github.com/apache/druid/issues/6115#issuecomment-413630853","issue_url":"https://api.github.com/repos/apache/druid/issues/6115","id":413630853,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzYzMDg1Mw==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-16T17:53:26Z","updated_at":"2018-08-16T17:53:26Z","author_association":"MEMBER","body":"Sounds good, I also want this. I opened a pr to support it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413630853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413886758","html_url":"https://github.com/apache/druid/pull/6185#issuecomment-413886758","issue_url":"https://api.github.com/repos/apache/druid/issues/6185","id":413886758,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzg4Njc1OA==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T14:38:30Z","updated_at":"2018-08-17T14:38:58Z","author_association":"MEMBER","body":"@gianm Can you help restart the failed travis [job](https://travis-ci.org/apache/incubator-druid/jobs/417090154). Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413886758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413907836","html_url":"https://github.com/apache/druid/pull/6185#issuecomment-413907836","issue_url":"https://api.github.com/repos/apache/druid/issues/6185","id":413907836,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzkwNzgzNg==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T15:48:50Z","updated_at":"2018-08-17T15:48:50Z","author_association":"MEMBER","body":"have restarted the failing travis. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413907836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413923900","html_url":"https://github.com/apache/druid/issues/6133#issuecomment-413923900","issue_url":"https://api.github.com/repos/apache/druid/issues/6133","id":413923900,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzkyMzkwMA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T16:45:44Z","updated_at":"2018-08-17T16:45:44Z","author_association":"CONTRIBUTOR","body":"I've bisected and this is caused by line https://github.com/apache/incubator-druid/blob/1c8032f9f3715c93e64673cbe6c2ccf5fca8e843/services/src/main/java/io/druid/cli/CliOverlord.java#L191, added in 56ab4363ea30ead876c11b43e1480ff6c0dfd941. Removing the line fixes the problem at hand, but I'm not sure it wouldn't break something else.\r\n\r\n/cc @jihoonson ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413923900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413926401","html_url":"https://github.com/apache/druid/issues/6133#issuecomment-413926401","issue_url":"https://api.github.com/repos/apache/druid/issues/6133","id":413926401,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzkyNjQwMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T16:55:39Z","updated_at":"2018-08-17T16:55:39Z","author_association":"CONTRIBUTOR","body":"It's used whenever the leader coordinator needs to talk to the leader indexer. Probably better to replace that line with:\r\n\r\n```\r\nbinder.bind(IndexingServiceClient.class).to(HttpIndexingServiceClient.class).in(LazySingleton.class);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413926401/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413928961","html_url":"https://github.com/apache/druid/issues/6172#issuecomment-413928961","issue_url":"https://api.github.com/repos/apache/druid/issues/6172","id":413928961,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzkyODk2MQ==","user":{"login":"mkuthan","id":1560526,"node_id":"MDQ6VXNlcjE1NjA1MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1560526?v=4","gravatar_id":"","url":"https://api.github.com/users/mkuthan","html_url":"https://github.com/mkuthan","followers_url":"https://api.github.com/users/mkuthan/followers","following_url":"https://api.github.com/users/mkuthan/following{/other_user}","gists_url":"https://api.github.com/users/mkuthan/gists{/gist_id}","starred_url":"https://api.github.com/users/mkuthan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkuthan/subscriptions","organizations_url":"https://api.github.com/users/mkuthan/orgs","repos_url":"https://api.github.com/users/mkuthan/repos","events_url":"https://api.github.com/users/mkuthan/events{/privacy}","received_events_url":"https://api.github.com/users/mkuthan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T17:05:35Z","updated_at":"2018-08-17T17:05:42Z","author_association":"NONE","body":"In our config load balancer checks /druid/broker/v1/loadstatus endpoint. No downtime during rolling update/restart of brokers.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413928961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413931586","html_url":"https://github.com/apache/druid/pull/6168#issuecomment-413931586","issue_url":"https://api.github.com/repos/apache/druid/issues/6168","id":413931586,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzkzMTU4Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T17:15:40Z","updated_at":"2018-08-17T17:15:40Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413931586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/413943708","html_url":"https://github.com/apache/druid/issues/6163#issuecomment-413943708","issue_url":"https://api.github.com/repos/apache/druid/issues/6163","id":413943708,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzk0MzcwOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T17:59:49Z","updated_at":"2018-08-17T17:59:49Z","author_association":"CONTRIBUTOR","body":"@pdeva I think no, however, the issue should clear up after your rolling update is done. If you see any issues persisting for more than a few hours then please raise a new issue describing what you are seeing. Sorry for the inconvenience!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/413943708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414004689","html_url":"https://github.com/apache/druid/issues/6124#issuecomment-414004689","issue_url":"https://api.github.com/repos/apache/druid/issues/6124","id":414004689,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAwNDY4OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T22:35:24Z","updated_at":"2018-08-17T22:35:24Z","author_association":"CONTRIBUTOR","body":"I think this may be fixed by #6155, but would like to double-check that there are no lingering issues due to the fact that the sequences persist file and the appenderator persist file are separate files.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414004689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414015356","html_url":"https://github.com/apache/druid/pull/6187#issuecomment-414015356","issue_url":"https://api.github.com/repos/apache/druid/issues/6187","id":414015356,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAxNTM1Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-17T23:58:14Z","updated_at":"2018-08-17T23:58:14Z","author_association":"CONTRIBUTOR","body":"The build seems to be failing","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414015356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414017677","html_url":"https://github.com/apache/druid/pull/6187#issuecomment-414017677","issue_url":"https://api.github.com/repos/apache/druid/issues/6187","id":414017677,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAxNzY3Nw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T00:21:08Z","updated_at":"2018-08-18T00:21:08Z","author_association":"CONTRIBUTOR","body":"@fjy The backport was incomplete, I fixed it now","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414017677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414035827","html_url":"https://github.com/apache/druid/issues/5709#issuecomment-414035827","issue_url":"https://api.github.com/repos/apache/druid/issues/5709","id":414035827,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAzNTgyNw==","user":{"login":"peferron","id":7009852,"node_id":"MDQ6VXNlcjcwMDk4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7009852?v=4","gravatar_id":"","url":"https://api.github.com/users/peferron","html_url":"https://github.com/peferron","followers_url":"https://api.github.com/users/peferron/followers","following_url":"https://api.github.com/users/peferron/following{/other_user}","gists_url":"https://api.github.com/users/peferron/gists{/gist_id}","starred_url":"https://api.github.com/users/peferron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peferron/subscriptions","organizations_url":"https://api.github.com/users/peferron/orgs","repos_url":"https://api.github.com/users/peferron/repos","events_url":"https://api.github.com/users/peferron/events{/privacy}","received_events_url":"https://api.github.com/users/peferron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T06:22:45Z","updated_at":"2018-08-18T06:22:45Z","author_association":"CONTRIBUTOR","body":"I'm thinking about working on this. Some help scoping the first PR would be welcome. Keeping it small would be preferred since I haven't contributed to Druid before.\r\n\r\nBasic idea: make brokers cycle through the list of available servers when retrying. Should support historical replicas, KIS task replicas, etc.\r\n\r\nOut of scope:\r\n\r\n- Making brokers report per-server failure metrics via API or emitter. We'll need that to build automation that can identify failing servers and trigger recovery steps, but it looks like it could be done in a separate PR.\r\n- Sharing a blacklist across queries within a broker. It doesn't seem absolutely necessary, and it also looks like it could be done in a separate PR, perhaps by adding a new `ServerSelectorStrategy` that takes failure metrics into account when sorting the list.\r\n- Responding with partial results. The goal here is to increase resiliency while still returning full results.\r\n\r\nIf the basic idea looks good, I'll come back with a more detailed proposal about the changes to make, and hopefully get some feedback on that as well before working on the code and submitting the PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414035827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414037802","html_url":"https://github.com/apache/druid/issues/6024#issuecomment-414037802","issue_url":"https://api.github.com/repos/apache/druid/issues/6024","id":414037802,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAzNzgwMg==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T07:07:20Z","updated_at":"2018-08-18T07:07:20Z","author_association":"MEMBER","body":"Hi, @drcrallen . Perhaps this issues should be closed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414037802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414037878","html_url":"https://github.com/apache/druid/issues/5939#issuecomment-414037878","issue_url":"https://api.github.com/repos/apache/druid/issues/5939","id":414037878,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAzNzg3OA==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T07:09:17Z","updated_at":"2018-08-18T07:09:17Z","author_association":"MEMBER","body":"Hi, @leventov . Maybe this issues should be closed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414037878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414039382","html_url":"https://github.com/apache/druid/pull/5978#issuecomment-414039382","issue_url":"https://api.github.com/repos/apache/druid/issues/5978","id":414039382,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDAzOTM4Mg==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T07:45:02Z","updated_at":"2018-08-18T08:14:21Z","author_association":"MEMBER","body":"Hi, @gianm . Maybe put a timeout `Rule` in the head of test class, such as `@Rule public Timeout globalTimeout = Timeout.seconds(60)`, which will be better than placing the `@Test(timeout = 60_000L)` annotation in each method. Also, if we need reduce the timeout value for some special test cases, we can add `@Test(timeout = 50_000L)` to them, because there is no priority relationship between the `Test` annotation and the `Rule` instance, it only depends on whether the running time of the test case has already satisfy one of them first. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414039382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414042464","html_url":"https://github.com/apache/druid/issues/6174#issuecomment-414042464","issue_url":"https://api.github.com/repos/apache/druid/issues/6174","id":414042464,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA0MjQ2NA==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T08:45:53Z","updated_at":"2018-08-18T08:48:51Z","author_association":"MEMBER","body":"Hi, @jihoonson . I also encountered this issues in job#[417558893](https://travis-ci.org/apache/incubator-druid/jobs/417558893#L2440). Should we add the following code to avoid it, similar to the [operation](https://github.com/apache/incubator-druid/blob/master/extensions-core/kafka-indexing-service/src/test/java/io/druid/indexing/kafka/supervisor/KafkaSupervisorTest.java#L2188-L2190) in the `testCheckpointForUnknownTaskGroup` test case?\r\n\r\n```java\r\nwhile (serviceEmitter.getStackTrace() != null) {\r\n  Thread.sleep(100);\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414042464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414062584","html_url":"https://github.com/apache/druid/issues/6088#issuecomment-414062584","issue_url":"https://api.github.com/repos/apache/druid/issues/6088","id":414062584,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA2MjU4NA==","user":{"login":"RestfulBlue","id":32250229,"node_id":"MDQ6VXNlcjMyMjUwMjI5","avatar_url":"https://avatars.githubusercontent.com/u/32250229?v=4","gravatar_id":"","url":"https://api.github.com/users/RestfulBlue","html_url":"https://github.com/RestfulBlue","followers_url":"https://api.github.com/users/RestfulBlue/followers","following_url":"https://api.github.com/users/RestfulBlue/following{/other_user}","gists_url":"https://api.github.com/users/RestfulBlue/gists{/gist_id}","starred_url":"https://api.github.com/users/RestfulBlue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RestfulBlue/subscriptions","organizations_url":"https://api.github.com/users/RestfulBlue/orgs","repos_url":"https://api.github.com/users/RestfulBlue/repos","events_url":"https://api.github.com/users/RestfulBlue/events{/privacy}","received_events_url":"https://api.github.com/users/RestfulBlue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T14:41:32Z","updated_at":"2018-08-18T14:41:32Z","author_association":"NONE","body":"Current implementation of select query is almost unusable. It cant be limited and can kill entire cluster. i hope this change will be implemented in near future. after that, i think current select query can be removed at all =) ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414062584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414066933","html_url":"https://github.com/apache/druid/pull/5978#issuecomment-414066933","issue_url":"https://api.github.com/repos/apache/druid/issues/5978","id":414066933,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA2NjkzMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T15:41:05Z","updated_at":"2018-08-18T15:41:05Z","author_association":"CONTRIBUTOR","body":"@asdf2014 It sounds like a nice idea. I didn't know about the Rule.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414066933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414067552","html_url":"https://github.com/apache/druid/pull/5978#issuecomment-414067552","issue_url":"https://api.github.com/repos/apache/druid/issues/5978","id":414067552,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA2NzU1Mg==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T15:49:37Z","updated_at":"2018-08-18T15:50:17Z","author_association":"MEMBER","body":"Yep, there is a [wiki](https://github.com/junit-team/junit4/wiki/rules#timeout-rule) about `Rule` in junit, so you can easily understand it. BTW, if we plan to use it, then we must upgrade the junit to `4.12` version.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414067552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414076612","html_url":"https://github.com/apache/druid/issues/6190#issuecomment-414076612","issue_url":"https://api.github.com/repos/apache/druid/issues/6190","id":414076612,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA3NjYxMg==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T18:12:58Z","updated_at":"2018-08-18T18:12:58Z","author_association":"MEMBER","body":"Imagine it, if we use the `portFinder ` to get a unused port in a thread, meanwhile use the `tlsPortFinder ` to get a unused port in another thread. Obviously leads to potential port conflicts.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414076612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414077483","html_url":"https://github.com/apache/druid/issues/6174#issuecomment-414077483","issue_url":"https://api.github.com/repos/apache/druid/issues/6174","id":414077483,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA3NzQ4Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T18:26:29Z","updated_at":"2018-08-18T18:26:29Z","author_association":"CONTRIBUTOR","body":"@asdf2014 yes, I think so.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414077483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414077537","html_url":"https://github.com/apache/druid/issues/6024#issuecomment-414077537","issue_url":"https://api.github.com/repos/apache/druid/issues/6024","id":414077537,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA3NzUzNw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T18:27:23Z","updated_at":"2018-08-18T18:27:23Z","author_association":"CONTRIBUTOR","body":"@asdf2014 thanks for checking. I think we can close this issue now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414077537/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414080582","html_url":"https://github.com/apache/druid/issues/6105#issuecomment-414080582","issue_url":"https://api.github.com/repos/apache/druid/issues/6105","id":414080582,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDA4MDU4Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-18T19:18:58Z","updated_at":"2018-08-18T19:18:58Z","author_association":"CONTRIBUTOR","body":"Fwiw, some situations where ability to sort by other-than-time would be expected to be useful:\r\n\r\n1. Timeseries data (ironically). Timeseries data is usually modeled as \"series\" of \"points\" where each series has a \"metric\" (like its name) and \"tags\" that can be used to differentiate it from other series with the same \"metric\". In Druid you'd model this by making each point into a row, and making the metric and tags into dimensions. It's best to store these rows sorted by metric, so the rows for a particular metric compress better (since they are likely to have a lot of the same tag values), and so we can retrieve all the points for a series faster (since they will have better locality of storage).\r\n2. Clickstream data when you want to do session analyses on it. The idea would be to partition by day first, then by session id (we do already support this: segmentGranularity DAY, and single-dimension partitioning via Hadoop indexing). Then within a segment, sort by session id. It makes it possible to do queries like \"count the number of sessions where X, then Y, then Z happened\" in linear time and constant memory.\r\n3. Multi-tenant datasets, where you store data for different tenants in the same Druid dataSource. In this case you'd want to both partition and sort by tenant_id. It should improve both compression ratio and query time.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414080582/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414106311","html_url":"https://github.com/apache/druid/issues/6174#issuecomment-414106311","issue_url":"https://api.github.com/repos/apache/druid/issues/6174","id":414106311,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDEwNjMxMQ==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-19T06:14:25Z","updated_at":"2018-08-19T06:14:25Z","author_association":"MEMBER","body":"Okay, thanks for your confirmation. I will open a `PR` to solve this problem.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414106311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414143789","html_url":"https://github.com/apache/druid/pull/5938#issuecomment-414143789","issue_url":"https://api.github.com/repos/apache/druid/issues/5938","id":414143789,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE0Mzc4OQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-19T17:49:15Z","updated_at":"2018-08-19T17:49:15Z","author_association":"CONTRIBUTOR","body":"@gianm this is having a hard time passing integration tests","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414143789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414162618","html_url":"https://github.com/apache/druid/pull/5737#issuecomment-414162618","issue_url":"https://api.github.com/repos/apache/druid/issues/5737","id":414162618,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE2MjYxOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-19T23:08:28Z","updated_at":"2018-08-19T23:08:28Z","author_association":"MEMBER","body":"Related: #6161","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414162618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414172408","html_url":"https://github.com/apache/druid/issues/6189#issuecomment-414172408","issue_url":"https://api.github.com/repos/apache/druid/issues/6189","id":414172408,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE3MjQwOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T01:17:46Z","updated_at":"2018-08-20T01:17:46Z","author_association":"CONTRIBUTOR","body":"Hi @RestfulBlue, it sounds like an interesting idea. Are you imagining adding a Lucene index as a companion to a Druid segment (i.e. adding one as a new column, maybe) or as an alternate format (a new type of StorageAdapter)?\r\n\r\nOne other thing you could look at is using Druid's multivalue dimensions. The idea would be to support text search by tokenizing input fields into arrays and storing them as multivalue dimensions. Then, you can do a search by tokening the search string the same way and retrieving the relevant terms from the inverted index of the multivalue dimension.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414172408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414174269","html_url":"https://github.com/apache/druid/issues/6088#issuecomment-414174269","issue_url":"https://api.github.com/repos/apache/druid/issues/6088","id":414174269,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE3NDI2OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T01:35:22Z","updated_at":"2018-08-20T01:35:22Z","author_association":"CONTRIBUTOR","body":"> FYI: I'd just like to see this kept as option in the query, so ones that do no need sorting avoid the performance hit.\r\n\r\nAgreed, we should keep the default as unsorted.\r\n\r\n> Current implementation of select query is almost unusable. It cant be limited and can kill entire cluster. i hope this change will be implemented in near future. after that, i think current select query can be removed at all =)\r\n\r\nI'd definitely love to be able to remove the select query. I believe its design is not salvageable.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414174269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414175186","html_url":"https://github.com/apache/druid/issues/5709#issuecomment-414175186","issue_url":"https://api.github.com/repos/apache/druid/issues/5709","id":414175186,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE3NTE4Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T01:43:20Z","updated_at":"2018-08-20T01:43:39Z","author_association":"CONTRIBUTOR","body":"Hi @peferron,\r\n\r\nThat scope sounds useful for an initial patch. I think the biggest risk is that queries that are doomed to failure, possibly because of resource limits being exceeded, will get retried too much and double/triple the load on the cluster (depending on how many retries are allowed). Some suggestions to mitigate that:\r\n\r\n- Check the error code (if there is one) and don't retry on codes like RESOURCE_LIMIT_EXCEEDED, UNAUTHORIZED, or QUERY_TIMEOUT. (The latter one because, probably, the overall timeout of the query has passed by then anyway.)\r\n- Don't retry more than X subqueries per query.\r\n\r\nAnother thing to think about is that it is possible for results to be partially retrieved (and partially processed) and then for the subquery to fail midway through (before all results have come in). In this case, it's probably not possible for the broker to recover, since subquery results have already been mixed into the overall query results. The query may need to be retried from scratch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414175186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414175659","html_url":"https://github.com/apache/druid/pull/5938#issuecomment-414175659","issue_url":"https://api.github.com/repos/apache/druid/issues/5938","id":414175659,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE3NTY1OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T01:47:39Z","updated_at":"2018-08-20T01:47:39Z","author_association":"CONTRIBUTOR","body":"I wasn't sure if it was timing out (we are pretty close to the timeout) or if there was something wrong with the patch that affects the integration tests. I'll take a closer look soon.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414175659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414184680","html_url":"https://github.com/apache/druid/pull/6195#issuecomment-414184680","issue_url":"https://api.github.com/repos/apache/druid/issues/6195","id":414184680,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE4NDY4MA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T03:02:22Z","updated_at":"2018-08-20T03:02:22Z","author_association":"CONTRIBUTOR","body":"@gianm Works fine, as far as I can tell. With and without `asOverlord` set and with standalone Overlord running.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414184680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414190292","html_url":"https://github.com/apache/druid/issues/5709#issuecomment-414190292","issue_url":"https://api.github.com/repos/apache/druid/issues/5709","id":414190292,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDE5MDI5Mg==","user":{"login":"peferron","id":7009852,"node_id":"MDQ6VXNlcjcwMDk4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7009852?v=4","gravatar_id":"","url":"https://api.github.com/users/peferron","html_url":"https://github.com/peferron","followers_url":"https://api.github.com/users/peferron/followers","following_url":"https://api.github.com/users/peferron/following{/other_user}","gists_url":"https://api.github.com/users/peferron/gists{/gist_id}","starred_url":"https://api.github.com/users/peferron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peferron/subscriptions","organizations_url":"https://api.github.com/users/peferron/orgs","repos_url":"https://api.github.com/users/peferron/repos","events_url":"https://api.github.com/users/peferron/events{/privacy}","received_events_url":"https://api.github.com/users/peferron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T03:51:33Z","updated_at":"2018-08-20T03:51:33Z","author_association":"CONTRIBUTOR","body":"Thanks for the feedback @gianm.\r\n\r\nDon't these issues already exist today when `druid.broker.retryPolicy.numTries > 1`? The idea would be to respect this parameter, but in a smarter way, by trying a different replica (if available) on each try.\r\n\r\nYou're right that it could create more load in some situations, though. For example, a query that would have hit the same bad historical twice and failed immediately (in a scenario where failures are immediate) may now hit a good historical on the 2nd try and return successfully, at the expense of increased cluster load. If you set `numTries > 1` that's probably what you want, but we could put this new behavior behind an opt-in configuration parameter to be safe.\r\n\r\nI'm not sure how the partially processed results that you described are handled today when `druid.broker.retryPolicy.numTries > 1`. I need to spend a bit more time with the code.\r\n\r\nBTW, looking at `RetryQueryRunner`, it seems like we're trying `numTries + 1` times total (one initial try + `numTries` retries), contrary to what the docs and the name of the parameter indicate. If there's indeed a bug there then everyone may already have retries enabled by default. I need to run a few unit tests to make sure I'm not missing anything there though.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414190292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414200342","html_url":"https://github.com/apache/druid/issues/5709#issuecomment-414200342","issue_url":"https://api.github.com/repos/apache/druid/issues/5709","id":414200342,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDIwMDM0Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T05:22:20Z","updated_at":"2018-08-20T05:22:20Z","author_association":"CONTRIBUTOR","body":"> Don't these issues already exist today when druid.broker.retryPolicy.numTries > 1? The idea would be to respect this parameter, but in a smarter way, by trying a different replica (if available) on each try.\r\n\r\nIIRC, RetryQueryRunner only retries in a specific situation: when a segment has moved to another server since the time the broker made the query. Specifically it looks at the `X-Druid-Response-Context` header for the key that lists missing segments (as reported by ReportTimelineMissingSegmentQueryRunner). I don't think it retries on errors or anything else like that. So it shouldn't have those issues I mentioned, because it's not as general as what this issue aims to accomplish.\r\n\r\n> BTW, looking at RetryQueryRunner, it seems like we're trying numTries + 1 times total (one initial try + numTries retries), contrary to what the docs and the name of the parameter indicate. If there's indeed a bug there then everyone may already have retries enabled by default. I need to run a few unit tests to make sure I'm not missing anything there though.\r\n\r\nInteresting, well, either way more unit tests are valuable!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414200342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414226981","html_url":"https://github.com/apache/druid/pull/6016#issuecomment-414226981","issue_url":"https://api.github.com/repos/apache/druid/issues/6016","id":414226981,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDIyNjk4MQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T07:46:31Z","updated_at":"2018-08-20T07:46:31Z","author_association":"MEMBER","body":"Ok, apologies for the delay on providing an update for the native experiments. The short is the numbers look better to me - especially when retrieving a smaller number of rows, and I find the implementation cleaner. You can find the branch in comparison to this branch, here: https://github.com/clintropolis/druid/compare/shapeshift...clintropolis:shapeshift-native\r\n\r\nMy first set of experiments were done with the 'native' branch in a hybrid state, where both FastPFor implementations could be tested side by side, where once I collected enough better results compelled me to go ahead and completely sketch out the implementation.\r\n\r\n![lineitem-1-select-speed-native-1](https://user-images.githubusercontent.com/1577461/44325613-290cc400-a40e-11e8-9ecf-f1f7cd284166.gif)\r\n\r\nI tested the branch in this state on both my macos dev laptop and on a c5.large running linux in aws, both environments show a similar performance difference testing FastPFor vs JavaFastPFor.\r\n\r\nAfter fully transforming the `shapeshift-native` branch, I've also started to run the complete set of benchmarks I've collected for this PR. Here are is a composite of the results of this branch and the native branch for the 'wiki-2' segment:\r\n\r\n![wiki-2-native-vs-java-select-speed-1](https://user-images.githubusercontent.com/1577461/44325772-8acd2e00-a40e-11e8-851d-86d7e4e52930.gif)\r\n\r\nI like the native implementation better personally, it's faster, has no large heap arrays, and I find it more straightforward. But I only consider it halfway refactored, as the serialization side still relies on int arrays rather than direct buffers. Switching serialization to buffers may also be the path to having a strategy like `CompressedVSizeColumnarIntsSerializer` where we could produce larger blocks without increasing the impact on indexing, though i think it would have the effect of requiring larger buffers on the decode side (256kb instead of 64kb, to support 64k value blocks, which might be worth it in order for 'shapeshift' to win all the time on both speed and size).\r\n\r\nThe native stuff is provided through a new top level project, `druid-processing-native` which has both java and c++ code, as well as the c++ version of FastPFor pulled in as a submodule. I modeled the setup roughly on the lz4 java implementation we use, and in fact borrowed the resource library loader code with minor modification. Currently, I have it so the native code is built into a `libDruidProcessingNative` for each platform (macos and linux so far) and placed in the resources so they will be present in the jar, similar to how the lz4 native java library that we use does. This is currently done with a shell script, `build.sh` which initializes the git submodule, builds `FastPFor`(requires cmake), and builds the c++ jni sources, placing the resulting library for the platform being built (`libDruidProcessingNative.so` or `libDruidProcessingNative.dylib`) in the resources. This build is done entirely out of band from maven build, at the moment, and only really needs to be done if c++ sources directly in the project are modified, OR if we want to update the `FastPFor` library itself. The maven part of the build just builds the java side of stuff, packing the native objects in the resulting jar.\r\n\r\nNext I plan to follow up and see why the java and c++ fastfor libraries do not seem compatible, as it could be nice to have the option to fall back to the java implementation. Additionally, I want to find out if it's a bug that I have to do a memory copy if the address of the chunk i want to decode isn't aligned to the nearest 16 bytes (which may make the native implementation even faster, since the chunk is most often not aligned).\r\n\r\nI also intend to keep working my way through the benchmarks with the native implementation and comparing to java. More importantly, I'm going to test it out on an actual cluster and try to confirm it behaves as expected in the real world too.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414226981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414312967","html_url":"https://github.com/apache/druid/issues/6196#issuecomment-414312967","issue_url":"https://api.github.com/repos/apache/druid/issues/6196","id":414312967,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDMxMjk2Nw==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T13:17:04Z","updated_at":"2018-08-20T13:17:04Z","author_association":"MEMBER","body":"Data load to Druid must have a timestamp field, you can preprocess your data to add one.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414312967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414314670","html_url":"https://github.com/apache/druid/issues/4841#issuecomment-414314670","issue_url":"https://api.github.com/repos/apache/druid/issues/4841","id":414314670,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDMxNDY3MA==","user":{"login":"kskalski","id":775012,"node_id":"MDQ6VXNlcjc3NTAxMg==","avatar_url":"https://avatars.githubusercontent.com/u/775012?v=4","gravatar_id":"","url":"https://api.github.com/users/kskalski","html_url":"https://github.com/kskalski","followers_url":"https://api.github.com/users/kskalski/followers","following_url":"https://api.github.com/users/kskalski/following{/other_user}","gists_url":"https://api.github.com/users/kskalski/gists{/gist_id}","starred_url":"https://api.github.com/users/kskalski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kskalski/subscriptions","organizations_url":"https://api.github.com/users/kskalski/orgs","repos_url":"https://api.github.com/users/kskalski/repos","events_url":"https://api.github.com/users/kskalski/events{/privacy}","received_events_url":"https://api.github.com/users/kskalski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T13:22:39Z","updated_at":"2018-08-20T13:22:39Z","author_association":"NONE","body":"Is it a viable solution to replace hadoop-aws with a more recent version (from newer Hadoop release) to obtain a working S3A storage or will it cause some other incompatibilites with rest of the jars?\r\n\r\nIt would be nice if Druid distributed a fixed version of hadoop-aws.jar that works correctly with aws-java-sdk distributed with it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414314670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414403229","html_url":"https://github.com/apache/druid/pull/5957#issuecomment-414403229","issue_url":"https://api.github.com/repos/apache/druid/issues/5957","id":414403229,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDQwMzIyOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T17:45:06Z","updated_at":"2018-08-20T17:45:27Z","author_association":"MEMBER","body":"@nishantmonu51 could you please continue review?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414403229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414415523","html_url":"https://github.com/apache/druid/pull/6184#issuecomment-414415523","issue_url":"https://api.github.com/repos/apache/druid/issues/6184","id":414415523,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDQxNTUyMw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T18:24:54Z","updated_at":"2018-08-20T18:24:54Z","author_association":"CONTRIBUTOR","body":"@sanastas thanks will try to take look by the end of this week.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414415523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414457118","html_url":"https://github.com/apache/druid/issues/6196#issuecomment-414457118","issue_url":"https://api.github.com/repos/apache/druid/issues/6196","id":414457118,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDQ1NzExOA==","user":{"login":"ghulands","id":127462,"node_id":"MDQ6VXNlcjEyNzQ2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/127462?v=4","gravatar_id":"","url":"https://api.github.com/users/ghulands","html_url":"https://github.com/ghulands","followers_url":"https://api.github.com/users/ghulands/followers","following_url":"https://api.github.com/users/ghulands/following{/other_user}","gists_url":"https://api.github.com/users/ghulands/gists{/gist_id}","starred_url":"https://api.github.com/users/ghulands/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghulands/subscriptions","organizations_url":"https://api.github.com/users/ghulands/orgs","repos_url":"https://api.github.com/users/ghulands/repos","events_url":"https://api.github.com/users/ghulands/events{/privacy}","received_events_url":"https://api.github.com/users/ghulands/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T20:45:23Z","updated_at":"2018-08-20T20:45:23Z","author_association":"NONE","body":"@QiuMM that is not accurate. If you have data that is partitioned and are ingesting it based on that partitioning you don't have to have a column in that data to contain an actual timestamp. You can specify the timestamp spec as follows\r\n\r\n\"timestampSpec\": {\r\n              \"format\": \"yyyy-MM-dd\",\r\n              \"column\": \"ts\",\r\n              \"missingValue\": \"2018-08-20\"\r\n          }\r\n\r\nts does not need to exist.\r\n\r\nHope that helps @ranjan321 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414457118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414461699","html_url":"https://github.com/apache/druid/issues/6199#issuecomment-414461699","issue_url":"https://api.github.com/repos/apache/druid/issues/6199","id":414461699,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDQ2MTY5OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-20T21:00:35Z","updated_at":"2018-08-20T21:00:35Z","author_association":"CONTRIBUTOR","body":"I have been working on vectorized query engines and I think this would dovetail great with them. Hope to have something to post up soon.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414461699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414541871","html_url":"https://github.com/apache/druid/issues/6196#issuecomment-414541871","issue_url":"https://api.github.com/repos/apache/druid/issues/6196","id":414541871,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDU0MTg3MQ==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T03:55:37Z","updated_at":"2018-08-21T03:55:37Z","author_association":"MEMBER","body":"@ghulands Got it, thanks for your reminder.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414541871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414559566","html_url":"https://github.com/apache/druid/issues/6196#issuecomment-414559566","issue_url":"https://api.github.com/repos/apache/druid/issues/6196","id":414559566,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDU1OTU2Ng==","user":{"login":"ranjan321","id":15337254,"node_id":"MDQ6VXNlcjE1MzM3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/15337254?v=4","gravatar_id":"","url":"https://api.github.com/users/ranjan321","html_url":"https://github.com/ranjan321","followers_url":"https://api.github.com/users/ranjan321/followers","following_url":"https://api.github.com/users/ranjan321/following{/other_user}","gists_url":"https://api.github.com/users/ranjan321/gists{/gist_id}","starred_url":"https://api.github.com/users/ranjan321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranjan321/subscriptions","organizations_url":"https://api.github.com/users/ranjan321/orgs","repos_url":"https://api.github.com/users/ranjan321/repos","events_url":"https://api.github.com/users/ranjan321/events{/privacy}","received_events_url":"https://api.github.com/users/ranjan321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T06:03:28Z","updated_at":"2018-08-21T06:03:28Z","author_association":"NONE","body":"@ghulands Thanks for your input..it is perfectly working fine","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414559566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414677522","html_url":"https://github.com/apache/druid/issues/4844#issuecomment-414677522","issue_url":"https://api.github.com/repos/apache/druid/issues/4844","id":414677522,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDY3NzUyMg==","user":{"login":"Gauravshah","id":620559,"node_id":"MDQ6VXNlcjYyMDU1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/620559?v=4","gravatar_id":"","url":"https://api.github.com/users/Gauravshah","html_url":"https://github.com/Gauravshah","followers_url":"https://api.github.com/users/Gauravshah/followers","following_url":"https://api.github.com/users/Gauravshah/following{/other_user}","gists_url":"https://api.github.com/users/Gauravshah/gists{/gist_id}","starred_url":"https://api.github.com/users/Gauravshah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gauravshah/subscriptions","organizations_url":"https://api.github.com/users/Gauravshah/orgs","repos_url":"https://api.github.com/users/Gauravshah/repos","events_url":"https://api.github.com/users/Gauravshah/events{/privacy}","received_events_url":"https://api.github.com/users/Gauravshah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T13:40:35Z","updated_at":"2018-08-21T13:40:35Z","author_association":"NONE","body":"was this fixed in 0.11.0 ? we are using 0.11.0 and still seeing 0 on count metrics.\r\ncc @ShilpaSivanesan","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414677522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414716031","html_url":"https://github.com/apache/druid/issues/4844#issuecomment-414716031","issue_url":"https://api.github.com/repos/apache/druid/issues/4844","id":414716031,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDcxNjAzMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T15:28:32Z","updated_at":"2018-08-21T15:28:32Z","author_association":"CONTRIBUTOR","body":"I believe it was fixed by #4517 when QueryResource became a singleton again. At least, I'm looking at `query/success/count` on some clusters running 0.12.x versions and they look like they're reporting it OK.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414716031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414718335","html_url":"https://github.com/apache/druid/issues/4844#issuecomment-414718335","issue_url":"https://api.github.com/repos/apache/druid/issues/4844","id":414718335,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDcxODMzNQ==","user":{"login":"Gauravshah","id":620559,"node_id":"MDQ6VXNlcjYyMDU1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/620559?v=4","gravatar_id":"","url":"https://api.github.com/users/Gauravshah","html_url":"https://github.com/Gauravshah","followers_url":"https://api.github.com/users/Gauravshah/followers","following_url":"https://api.github.com/users/Gauravshah/following{/other_user}","gists_url":"https://api.github.com/users/Gauravshah/gists{/gist_id}","starred_url":"https://api.github.com/users/Gauravshah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gauravshah/subscriptions","organizations_url":"https://api.github.com/users/Gauravshah/orgs","repos_url":"https://api.github.com/users/Gauravshah/repos","events_url":"https://api.github.com/users/Gauravshah/events{/privacy}","received_events_url":"https://api.github.com/users/Gauravshah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T15:34:26Z","updated_at":"2018-08-21T15:34:26Z","author_association":"NONE","body":"thank you @gianm ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414718335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414740481","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414740481","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414740481,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc0MDQ4MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T16:40:21Z","updated_at":"2018-08-21T16:40:21Z","author_association":"CONTRIBUTOR","body":"It might be good time to retire CuratorInventoryManager and switch segment management and discovery on http versions.\r\nI tested for a long while, also I think @jihoonson told that you guys had some clusters running with http version.\r\nhow do we feel about making http version default from next release? it is all backward compatible and users shouldn't see any behavioral change.\r\nonce http is default, we can remove zk version after 1-2 releases.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414740481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414759793","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414759793","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414759793,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc1OTc5Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T17:40:14Z","updated_at":"2018-08-21T17:40:14Z","author_association":"CONTRIBUTOR","body":"@himanshug would you give us more details about your test environments?\r\n\r\nIn our company, we are still testing it in our test cluster, but not in production yet. One thing I'm concerned is the increasing HTTP connections. On the other day, I could see Kafka indexing service was using too many HTTP connections compared to the number of worker threads even though the cluster was not using HTTP-based orverlords or coordinators. The number of HTTP connections was a few thousand which is not so high, but I'm not sure what is the proper default configuration for the number of worker threads.\r\n\r\nAlso, there is at least a critical bug which causes a deadlock when starting up (https://github.com/apache/incubator-druid/issues/6201).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414759793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414760515","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414760515","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414760515,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc2MDUxNQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T17:42:20Z","updated_at":"2018-08-21T17:42:20Z","author_association":"CONTRIBUTOR","body":"Also, I would say we should remove all remaining codes writing data on ZK in HTTP-based overlords/coordinators before making it default.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414760515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414762194","html_url":"https://github.com/apache/druid/issues/4841#issuecomment-414762194","issue_url":"https://api.github.com/repos/apache/druid/issues/4841","id":414762194,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc2MjE5NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T17:47:26Z","updated_at":"2018-08-21T17:47:26Z","author_association":"CONTRIBUTOR","body":"Hi @kskalski, a possible solution is to build your own hadoop-aws.jar which shades all conflicting dependencies in it. At least aws-java-sdk and jackson should be shaded.\r\n\r\nProbably recent versions of hadoop-aws would work because they're shading the common libraries, but I haven't tested them.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414762194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414780324","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414780324","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414780324,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc4MDMyNA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T18:43:16Z","updated_at":"2018-08-21T19:29:50Z","author_association":"CONTRIBUTOR","body":"@jihoonson \r\nMy test environment had 3 brokers, 2 coordinators, 2 overlords, ~40 Middle Managers (each running about 6 kafka indexing tasks created by kafka supervisor), about 15-20 Historicals.\r\n\r\nsome background and information is noted in https://groups.google.com/forum/#!msg/druid-development/eIWDPfhpM_U/AzMRxSQGAgAJ\r\nbut, there are 3 completely  _independent_ things here...\r\n1) switching coordinator to use HTTP (using `HttpLoadQueuePeon`) for segment assignment (load/drop)\r\n2) switching broker/coordinator to use HTTP (using `HttpServerInventoryView`) for discovering what segments are served by queryable nodes (historicals, and peons doing indexing)\r\n3) switching overlord to use HTTP for task mgmt (using `HttpRemoteTaskRunner`)\r\n\r\nIn my comment above I was talking about trying making (1) and (2) default after a bit of testing on some more clusters that you have.\r\n\r\nlooks like #6201 pertains to (3) , so let us not consider enabling (3) by default at this time until we get to the bottom of #6201 .\r\n\r\nHowever, after (1), (2) and (3) are done with druid clusters using HTTP . And, we remove coordinator/overlord service announcement that is always done in ZK, to support tranquility.\r\nThen , technically, it becomes possible to write extensions for discovery that don't necessarily use zookeeper and use say etcd instead. However, this is also an independent activity which will take its own time, so don't want to make it a prerequisite for trying out http or default to it as we gain more confidence with those features. And, remove zookeeper code in phases that is not needed (i.e. after say 4-6 months from a release where specific thing was made default)\r\n\r\neach of (1), (2) lead to one additional connection per broker/coordinator to each queryable node.\r\n(3) leads to one additional connection per overlord to each MiddleManager node.\r\n\r\nOn broker/coordinator/overlord side, `EscalatedGlobal httpClient` is used for making requests, so connections from their pools are used, no new connection pools are created.\r\n\r\n> One thing I'm concerned is the increasing HTTP connections.\r\n\r\ntheoretically, it should be OK and so far testing above , I haven't seen any connections issue popping up due to these features. but, concern is valid and we can be more confident only as we roll it on more clusters.\r\n\r\n> On the other day, I could see Kafka indexing service was using too many HTTP connections compared to the number of worker threads even though the cluster was not using HTTP-based orverlords or coordinators. The number of HTTP connections was a few thousand which is not so high, but I'm not sure what is the proper default configuration for the number of worker threads.\r\n\r\nI am assuming you meant overlord http client [worker threads] had thousands of outbound open connections.\r\nfor `EscalatedGlobal` client used by KIS as well, number of connections are set at https://github.com/apache/incubator-druid/blob/master/server/src/main/java/io/druid/guice/http/HttpClientModule.java#L140 (default value is 20 ).\r\nSo, at overlord, from that httpClient, maximum possible connections = 20 (or whatever is configured) X (number of KIS task peons, and any other processes that overlord could talk to using this client over HTTP)\r\nfrom https://github.com/apache/incubator-druid/blob/master/server/src/main/java/io/druid/initialization/Initialization.java#L377 , I see there are at least 3 other HttpClient instances created with their own connection pools, so see if those are using the connections.\r\nif above accounts for thousands of connections, then it is explained or else there is some bug in `HttpClient` code and it creates more connections than it is told to.\r\nIt would be good if you take a look at what host:port those connections are going to and see if those connections numbers make sense from the expectations above.\r\n\r\nthat said, features in (1), (2), (3) don't necessarily worsen the situation because we have far more http requests all around going on due to other features. I may be proven wrong in the end, but we wouldn't know till we try :) .\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414780324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414782610","html_url":"https://github.com/apache/druid/pull/6181#issuecomment-414782610","issue_url":"https://api.github.com/repos/apache/druid/issues/6181","id":414782610,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc4MjYxMA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T18:50:29Z","updated_at":"2018-08-21T18:50:29Z","author_association":"CONTRIBUTOR","body":"@rpless Thanks for the contribution!\r\n\r\n> I also noticed that the version of the postgres driver is quite old. The latest version is 42.2.4.jre7. Should I bump up it up to that either here or in a another PR?\r\n\r\nLet's do that in a separate PR","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414782610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414789216","html_url":"https://github.com/apache/druid/pull/6181#issuecomment-414789216","issue_url":"https://api.github.com/repos/apache/druid/issues/6181","id":414789216,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc4OTIxNg==","user":{"login":"rpless","id":2407674,"node_id":"MDQ6VXNlcjI0MDc2NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2407674?v=4","gravatar_id":"","url":"https://api.github.com/users/rpless","html_url":"https://github.com/rpless","followers_url":"https://api.github.com/users/rpless/followers","following_url":"https://api.github.com/users/rpless/following{/other_user}","gists_url":"https://api.github.com/users/rpless/gists{/gist_id}","starred_url":"https://api.github.com/users/rpless/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpless/subscriptions","organizations_url":"https://api.github.com/users/rpless/orgs","repos_url":"https://api.github.com/users/rpless/repos","events_url":"https://api.github.com/users/rpless/events{/privacy}","received_events_url":"https://api.github.com/users/rpless/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:12:20Z","updated_at":"2018-08-21T19:29:50Z","author_association":"CONTRIBUTOR","body":"Thanks for the feedback @jon-wei! I've updated the PR with it.\r\n\r\n> Let's do that in a separate PR\r\n\r\nSounds good.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414789216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414789398","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414789398","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414789398,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc4OTM5OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:13:02Z","updated_at":"2018-08-21T19:13:02Z","author_association":"CONTRIBUTOR","body":"@himanshug thanks for the details.\r\n\r\n> 1. switching coordinator to use HTTP (using HttpLoadQueuePeon) for segment assignment (load/drop)\r\n> 2. switching broker/coordinator to use HTTP (using HttpServerInventoryView) for discovering what segments are served by queryable nodes (historicals, and peons doing indexing)\r\n> 3. switching overlord to use HTTP for task mgmt (using HttpRemoteTaskRunner)\r\nIn my comment above I was talking about trying making (1) and (2) default after a bit of testing on some more clusters that you have.\r\n> \r\n> looks like #6201 pertains to (3) , so let us not consider enabling (3) by default at this time until we get to the bottom of #6201 .\r\n\r\nThanks. It sounds good to me.\r\n\r\n> However, after (1), (2) and (3) are done with druid clusters using HTTP . And, we remove coordinator/overlord service announcement that is always done in ZK, to support tranquility.\r\nThen , technically, it becomes possible to write extensions for discovery that don't necessarily use zookeeper and use say etcd instead. However, this is also an independent activity which will take its own time, so don't want to make it a prerequisite for trying out http or default to it as we gain more confidence with those features. And, remove zookeeper code in phases that is not needed (i.e. after say 4-6 months from a release where specific thing was made default)\r\n\r\nThis sounds good to me. What I meant for removing remaining codes writing data on ZK is [this kind of things](https://github.com/apache/incubator-druid/blob/master/indexing-service/src/main/java/io/druid/indexing/overlord/hrtr/HttpRemoteTaskRunnerFactory.java#L54). Would you tell us that there are some reasons that we can't remove these things right now? If not, I think we should clear them out before making it default. Looks that these things only remain for HTTP-based task allocation, so it might not be an issue for `1.` and `2.`.\r\nFor tranquility, I would say we don't have to improve tranquility to support HTTP-based overlords at this point.\r\n\r\nFor the number of HTTP connections, I have checked those connections and they were all valid. The issue was the small number of HTTP server/client worker threads, not the large number of HTTP connections. (For configurations for the number of worker threads, see https://github.com/apache/incubator-druid/blob/master/server/src/main/java/io/druid/guice/http/DruidHttpClientConfig.java#L46 and https://github.com/apache/incubator-druid/blob/master/extensions-core/kafka-indexing-service/src/main/java/io/druid/indexing/kafka/supervisor/KafkaSupervisor.java#L281-L283.) So, I'm not worrying about a few additional HTTP connections, but we may need to change the default configurations because default configurations should not make users confused. If there are only one additional connection per master/worker, I guess it would be fine.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414789398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414793443","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414793443","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414793443,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc5MzQ0Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:27:48Z","updated_at":"2018-08-21T19:30:18Z","author_association":"CONTRIBUTOR","body":"> What I meant for removing remaining codes writing data on ZK is [this kind of things](https://github.com/apache/incubator-druid/blob/master/indexing-service/src/main/java/io/druid/indexing/overlord/hrtr/HttpRemoteTaskRunnerFactory.java#L54). \r\n\r\nI see, well that specific code snippet has to exist to allow users change from `RemoteTaskRunner` to `HttpRemoteTaskRunner` easily. MiddleManagers are configured to keep on announcing task status in ZK even after you switch overlord to use HTTP , so the zk cleanup still needs to happen. Once everyone is using HTTP remote task runner, then we can disable MM from announcing task status in ZK and remove the code you mentioned.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414793443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414796201","html_url":"https://github.com/apache/druid/issues/6176#issuecomment-414796201","issue_url":"https://api.github.com/repos/apache/druid/issues/6176","id":414796201,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc5NjIwMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:38:15Z","updated_at":"2018-08-21T19:38:15Z","author_association":"CONTRIBUTOR","body":"Thanks. It sounds like this is definitely needed to support rolling update if HTTP task runner becomes default.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414796201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414796348","html_url":"https://github.com/apache/druid/issues/6201#issuecomment-414796348","issue_url":"https://api.github.com/repos/apache/druid/issues/6201","id":414796348,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc5NjM0OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:38:48Z","updated_at":"2018-08-21T19:39:06Z","author_association":"CONTRIBUTOR","body":"@jon-wei do you have full thread dump ? above shows threads waiting to get hold of locks but doesn't show which threads have the hold of lock (that might indicate why the locks are not getting freed up for others).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414796348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414797778","html_url":"https://github.com/apache/druid/issues/6201#issuecomment-414797778","issue_url":"https://api.github.com/repos/apache/druid/issues/6201","id":414797778,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc5Nzc3OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:44:07Z","updated_at":"2018-08-21T19:44:07Z","author_association":"CONTRIBUTOR","body":"Here it is: [http-remote-task-runner-jstack.txt](https://github.com/apache/incubator-druid/files/2307787/http-remote-task-runner-jstack.txt)\r\n\r\nIt looks like HttpRemoteTaskRunner and TaskQueue blocks each other.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414797778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414801194","html_url":"https://github.com/apache/druid/pull/6076#issuecomment-414801194","issue_url":"https://api.github.com/repos/apache/druid/issues/6076","id":414801194,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgwMTE5NA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T19:56:08Z","updated_at":"2018-08-21T19:56:23Z","author_association":"CONTRIBUTOR","body":"> Different private keys and certs for the client and server. (Can be the same root CA, and same CN/altNames, but generate two different keys, and two different keyStores.)\r\n\r\nThe services and clients have different keys/certs, I'll update the patch to rename the client files so that this is more apparent","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414801194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414808208","html_url":"https://github.com/apache/druid/issues/6201#issuecomment-414808208","issue_url":"https://api.github.com/repos/apache/druid/issues/6201","id":414808208,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgwODIwOA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T20:19:48Z","updated_at":"2018-08-21T21:23:33Z","author_association":"CONTRIBUTOR","body":"great, that helps.\r\n\r\nI think I understand the problem. HRTR is calling notification on attached listeners while still holding the `statusLock` , those listener's reaction ends up doing something that needs `statusLock` . Solution would be to call the listeners without holding `statusLock` .\r\nwhich means `TaskRunnerUtils.notifyXX` should be called outside the lock. It has the mechanism to run listener in an executor service, but it appears `SameThreadExecutor` is used everywhere.\r\n I will raise a PR sometime soon.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414808208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414823704","html_url":"https://github.com/apache/druid/pull/6162#issuecomment-414823704","issue_url":"https://api.github.com/repos/apache/druid/issues/6162","id":414823704,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgyMzcwNA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:13:35Z","updated_at":"2018-08-21T21:14:01Z","author_association":"CONTRIBUTOR","body":"Thanks @asdf2014. Would you check this warning which is seen when building the project.\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[WARNING]\r\n[WARNING] Some problems were encountered while building the effective model for io.druid:distribution:pom:0.13.0-SNAPSHOT\r\n[WARNING] 'profiles.profile[dist].plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:exec-maven-plugin @ io.druid:distribution:[unknown-version], /Users/jihoonson/Codes/druid/distribution/pom.xml, line 152, column 29\r\n[WARNING]\r\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n[WARNING]\r\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n[WARNING]\r\n[WARNING] The project io.druid:druid-benchmarks:jar:0.13.0-SNAPSHOT uses prerequisites which is only intended for maven-plugin projects but not for non maven-plugin projects. For such purposes you should use the maven-enforcer-plugin. See https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Build Order:\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414823704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414825895","html_url":"https://github.com/apache/druid/pull/5280#issuecomment-414825895","issue_url":"https://api.github.com/repos/apache/druid/issues/5280","id":414825895,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgyNTg5NQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:21:48Z","updated_at":"2018-08-21T21:21:48Z","author_association":"CONTRIBUTOR","body":"@gianm re-merged with master and fixed build, it should be good to go now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414825895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414829197","html_url":"https://github.com/apache/druid/issues/5400#issuecomment-414829197","issue_url":"https://api.github.com/repos/apache/druid/issues/5400","id":414829197,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgyOTE5Nw==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:34:12Z","updated_at":"2018-08-21T21:34:12Z","author_association":"CONTRIBUTOR","body":"Related #6201 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414829197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414831746","html_url":"https://github.com/apache/druid/issues/6177#issuecomment-414831746","issue_url":"https://api.github.com/repos/apache/druid/issues/6177","id":414831746,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgzMTc0Ng==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:44:08Z","updated_at":"2018-08-21T21:44:08Z","author_association":"CONTRIBUTOR","body":"Problem could be with expectation as well. Segment-A's interval doesn't reflect the actual data it contains. If indexing was done with data being available until May-2017, segment granularity should've been chosen to be monthly.\r\n\"fixing\" it would probably mean doing no filtering at broker because we don't peek inside the segment at that point.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414831746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414832077","html_url":"https://github.com/apache/druid/issues/5400#issuecomment-414832077","issue_url":"https://api.github.com/repos/apache/druid/issues/5400","id":414832077,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgzMjA3Nw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:45:14Z","updated_at":"2018-08-21T21:45:14Z","author_association":"CONTRIBUTOR","body":"this also seems to be the same cause, let me close this one and continue putting updates on #6201 .","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414832077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414834488","html_url":"https://github.com/apache/druid/issues/6199#issuecomment-414834488","issue_url":"https://api.github.com/repos/apache/druid/issues/6199","id":414834488,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgzNDQ4OA==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:54:34Z","updated_at":"2018-08-21T21:54:34Z","author_association":"CONTRIBUTOR","body":"Looking forward to that. Is your implementation already taking care of lookup query vectorization? If not I can come back to this and work on it once your PR is out.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414834488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414835147","html_url":"https://github.com/apache/druid/issues/6199#issuecomment-414835147","issue_url":"https://api.github.com/repos/apache/druid/issues/6199","id":414835147,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgzNTE0Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:57:09Z","updated_at":"2018-08-21T21:57:09Z","author_association":"CONTRIBUTOR","body":"It's not, just the inner parts of the query engines.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414835147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414835392","html_url":"https://github.com/apache/druid/issues/6177#issuecomment-414835392","issue_url":"https://api.github.com/repos/apache/druid/issues/6177","id":414835392,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDgzNTM5Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-21T21:58:05Z","updated_at":"2018-08-21T21:58:05Z","author_association":"CONTRIBUTOR","body":"I think we could filter at the broker, we just want to check any segment that overlaps with the one that has the latest chunk. So in the example above we should have checked any segment that overlaps with 2017/2018. We could still safely ignore anything from prior to 2017.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414835392/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414933972","html_url":"https://github.com/apache/druid/issues/6189#issuecomment-414933972","issue_url":"https://api.github.com/repos/apache/druid/issues/6189","id":414933972,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDkzMzk3Mg==","user":{"login":"RestfulBlue","id":32250229,"node_id":"MDQ6VXNlcjMyMjUwMjI5","avatar_url":"https://avatars.githubusercontent.com/u/32250229?v=4","gravatar_id":"","url":"https://api.github.com/users/RestfulBlue","html_url":"https://github.com/RestfulBlue","followers_url":"https://api.github.com/users/RestfulBlue/followers","following_url":"https://api.github.com/users/RestfulBlue/following{/other_user}","gists_url":"https://api.github.com/users/RestfulBlue/gists{/gist_id}","starred_url":"https://api.github.com/users/RestfulBlue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RestfulBlue/subscriptions","organizations_url":"https://api.github.com/users/RestfulBlue/orgs","repos_url":"https://api.github.com/users/RestfulBlue/repos","events_url":"https://api.github.com/users/RestfulBlue/events{/privacy}","received_events_url":"https://api.github.com/users/RestfulBlue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T07:08:52Z","updated_at":"2018-08-22T07:08:52Z","author_association":"NONE","body":"Hi , multivalue dimensions will work only in some generic simple case, for example where logs have simple form with space separated words. But even with this form of data, it need external preprocessing, which will be grow with time. For example by first it just split by space, when we realize we also want to split by all special characters, when we realize what we also want to search by part of word, so we k skip n gramm, etc. With what external preprocessing will slowly move to things, what lucene doing. Also with what we cant simply get source text, for like select * from table limit 100, because data in multivalue column splitted and optimized for search. So this requiere denormalization of data and cost additional space.\r\n\r\nSimple lucene indexing looks like this :\r\n\r\n```java\r\n   Analyzer analyzer = new StandardAnalyzer();\r\n\r\n    // Store the index in memory:\r\n    Directory directory = new RAMDirectory();\r\n    // To store an index on disk, use this instead:\r\n    //Directory directory = FSDirectory.open(\"/tmp/testindex\");\r\n    IndexWriterConfig config = new IndexWriterConfig(analyzer);\r\n    IndexWriter iwriter = new IndexWriter(directory, config);\r\n    Document doc = new Document();\r\n    String text = \"This is the text to be indexed.\";\r\n    doc.add(new Field(\"fieldname\", text, TextField.TYPE_STORED));\r\n    iwriter.addDocument(doc);\r\n    iwriter.close();\r\n    \r\n    // Now search the index:\r\n    DirectoryReader ireader = DirectoryReader.open(directory);\r\n    IndexSearcher isearcher = new IndexSearcher(ireader);\r\n    // Parse a simple query that searches for \"text\":\r\n    QueryParser parser = new QueryParser(\"fieldname\", analyzer);\r\n    Query query = parser.parse(\"text\");\r\n    ScoreDoc[] hits = isearcher.search(query, null, 1000).scoreDocs;\r\n    assertEquals(1, hits.length);\r\n    // Iterate through the results:\r\n    for (int i = 0; i < hits.length; i++) {\r\n      Document hitDoc = isearcher.doc(hits[i].doc);\r\n      assertEquals(\"This is the text to be indexed.\", hitDoc.get(\"fieldname\"));\r\n    }\r\n    ireader.close();\r\n    directory.close();\r\n```\r\n\r\ni think adding it as new column will be great. The main reason is what lucene is more heavy than simple token indexing. Mixing disabled indexing, tokening and lucene in one table can greatly reduce total amount of required disk space compare to full lucene indexing","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414933972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414960119","html_url":"https://github.com/apache/druid/issues/4841#issuecomment-414960119","issue_url":"https://api.github.com/repos/apache/druid/issues/4841","id":414960119,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDk2MDExOQ==","user":{"login":"kskalski","id":775012,"node_id":"MDQ6VXNlcjc3NTAxMg==","avatar_url":"https://avatars.githubusercontent.com/u/775012?v=4","gravatar_id":"","url":"https://api.github.com/users/kskalski","html_url":"https://github.com/kskalski","followers_url":"https://api.github.com/users/kskalski/followers","following_url":"https://api.github.com/users/kskalski/following{/other_user}","gists_url":"https://api.github.com/users/kskalski/gists{/gist_id}","starred_url":"https://api.github.com/users/kskalski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kskalski/subscriptions","organizations_url":"https://api.github.com/users/kskalski/orgs","repos_url":"https://api.github.com/users/kskalski/repos","events_url":"https://api.github.com/users/kskalski/events{/privacy}","received_events_url":"https://api.github.com/users/kskalski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T08:48:36Z","updated_at":"2018-08-22T08:48:36Z","author_association":"NONE","body":"FIY, I tried using hadoop-aws.jar from Hadoop 2.9 release, but it required a lot of other jars to be replaced, both in hadoop-dependencies and from Druid's extensions/druid-hdfs-storage/ (e.g. aws-java-sdk used by hadoop's 2.9 is already newer than Druid 0.12.1's version, so I had to make both directories converge). Ultimately S3A started working, but the way to achieve it was quite messy.\r\n\r\nNot sure if shading would work, I couldn't build the custom jar, because Hadoop 2.7 requires dependencies (protoc) that are no longer available on OS at my disposal. For now I settled with using S3N, but it forces provising AWS secret credentials in plain text within config / task spec, so it's a pain.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414960119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414971399","html_url":"https://github.com/apache/druid/issues/6197#issuecomment-414971399","issue_url":"https://api.github.com/repos/apache/druid/issues/6197","id":414971399,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDk3MTM5OQ==","user":{"login":"josephglanville","id":605591,"node_id":"MDQ6VXNlcjYwNTU5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/605591?v=4","gravatar_id":"","url":"https://api.github.com/users/josephglanville","html_url":"https://github.com/josephglanville","followers_url":"https://api.github.com/users/josephglanville/followers","following_url":"https://api.github.com/users/josephglanville/following{/other_user}","gists_url":"https://api.github.com/users/josephglanville/gists{/gist_id}","starred_url":"https://api.github.com/users/josephglanville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josephglanville/subscriptions","organizations_url":"https://api.github.com/users/josephglanville/orgs","repos_url":"https://api.github.com/users/josephglanville/repos","events_url":"https://api.github.com/users/josephglanville/events{/privacy}","received_events_url":"https://api.github.com/users/josephglanville/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T09:28:30Z","updated_at":"2018-08-22T09:28:30Z","author_association":"CONTRIBUTOR","body":"It's partially familiarity with Guice but also familiarity with Jackson. I have been intending to write something about this for a while but never seem to find the time.\r\nIt's also worth pointing out that adding configuration is not well documented either, i.e usage of `JsonConfigProvider`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414971399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414972131","html_url":"https://github.com/apache/druid/issues/6198#issuecomment-414972131","issue_url":"https://api.github.com/repos/apache/druid/issues/6198","id":414972131,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDk3MjEzMQ==","user":{"login":"josephglanville","id":605591,"node_id":"MDQ6VXNlcjYwNTU5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/605591?v=4","gravatar_id":"","url":"https://api.github.com/users/josephglanville","html_url":"https://github.com/josephglanville","followers_url":"https://api.github.com/users/josephglanville/followers","following_url":"https://api.github.com/users/josephglanville/following{/other_user}","gists_url":"https://api.github.com/users/josephglanville/gists{/gist_id}","starred_url":"https://api.github.com/users/josephglanville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josephglanville/subscriptions","organizations_url":"https://api.github.com/users/josephglanville/orgs","repos_url":"https://api.github.com/users/josephglanville/repos","events_url":"https://api.github.com/users/josephglanville/events{/privacy}","received_events_url":"https://api.github.com/users/josephglanville/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T09:31:06Z","updated_at":"2018-08-22T09:31:06Z","author_association":"CONTRIBUTOR","body":"mmaped files are not considered direct memory AFAICT but yes, realtime nodes, peons and historicals all need memory in reserve for the Linux page cache which is responsible for paging files the have been mmaped in and out of memory.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414972131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/414976760","html_url":"https://github.com/apache/druid/issues/6172#issuecomment-414976760","issue_url":"https://api.github.com/repos/apache/druid/issues/6172","id":414976760,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDk3Njc2MA==","user":{"login":"lyman","id":205238,"node_id":"MDQ6VXNlcjIwNTIzOA==","avatar_url":"https://avatars.githubusercontent.com/u/205238?v=4","gravatar_id":"","url":"https://api.github.com/users/lyman","html_url":"https://github.com/lyman","followers_url":"https://api.github.com/users/lyman/followers","following_url":"https://api.github.com/users/lyman/following{/other_user}","gists_url":"https://api.github.com/users/lyman/gists{/gist_id}","starred_url":"https://api.github.com/users/lyman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyman/subscriptions","organizations_url":"https://api.github.com/users/lyman/orgs","repos_url":"https://api.github.com/users/lyman/repos","events_url":"https://api.github.com/users/lyman/events{/privacy}","received_events_url":"https://api.github.com/users/lyman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T09:47:48Z","updated_at":"2018-08-22T09:47:48Z","author_association":"NONE","body":"The problem of checking /druid/broker/v1/loadstatus is that it returns 200 even if the segment view is not initialized. This requires the load balancer to be able to check not only http code but also response content to keep response correct.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/414976760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/415083794","html_url":"https://github.com/apache/druid/issues/6198#issuecomment-415083794","issue_url":"https://api.github.com/repos/apache/druid/issues/6198","id":415083794,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTA4Mzc5NA==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T15:56:43Z","updated_at":"2018-08-22T15:56:43Z","author_association":"MEMBER","body":"I have figured it out. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/415083794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]