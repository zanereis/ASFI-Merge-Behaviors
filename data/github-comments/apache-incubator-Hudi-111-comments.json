[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795014068","html_url":"https://github.com/apache/hudi/pull/2378#issuecomment-795014068","issue_url":"https://api.github.com/repos/apache/hudi/issues/2378","id":795014068,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTAxNDA2OA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T07:24:34Z","updated_at":"2021-03-10T07:24:34Z","author_association":"MEMBER","body":"> @garyli1019 : whats the status of the PR in general. when do you think we can get this landed.\r\n\r\n@nsivabalan my concern is `CatalystScan` is not a stable API, not sure if this could be a problem. Need a Spark expert to take a look here. @umehrot2 @zhedoubushishi @pengzhiwei2018 any of you guys able to take a look here?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795014068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795059575","html_url":"https://github.com/apache/hudi/pull/2655#issuecomment-795059575","issue_url":"https://api.github.com/repos/apache/hudi/issues/2655","id":795059575,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTA1OTU3NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T08:11:00Z","updated_at":"2021-03-13T23:11:32Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2655?src=pr&el=h1) Report\n> Merging [#2655](https://codecov.io/gh/apache/hudi/pull/2655?src=pr&el=desc) (6c53828) into [master](https://codecov.io/gh/apache/hudi/commit/c4a66324cdd3e289e0bf18bdd150b95ee6e4c66c?el=desc) (c4a6632) will **increase** coverage by `0.52%`.\n> The diff coverage is `100.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2655/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2655?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2655      +/-   ##\n============================================\n+ Coverage     51.54%   52.06%   +0.52%     \n- Complexity     3492     3578      +86     \n============================================\n  Files           462      465       +3     \n  Lines         21881    22270     +389     \n  Branches       2327     2375      +48     \n============================================\n+ Hits          11278    11595     +317     \n- Misses         9624     9660      +36     \n- Partials        979     1015      +36     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.01% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.51% <ø> (+0.02%)` | `0.00 <ø> (ø)` | |\n| hudiflink | `53.57% <ø> (+3.22%)` | `0.00 <ø> (ø)` | |\n| hudihadoopmr | `33.44% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `70.78% <100.00%> (+0.93%)` | `0.00 <0.00> (ø)` | |\n| hudisync | `49.62% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `64.36% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.43% <ø> (-0.11%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2655?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3Bhcmsvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9odWRpL0hvb2RpZVNwYXJrU3FsV3JpdGVyLnNjYWxh) | `56.41% <100.00%> (+5.05%)` | `0.00 <0.00> (ø)` | |\n| [...hudi/source/format/cow/CopyOnWriteInputFormat.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L2Nvdy9Db3B5T25Xcml0ZUlucHV0Rm9ybWF0LmphdmE=) | `56.08% <0.00%> (-29.22%)` | `20.00% <0.00%> (+14.00%)` | :arrow_down: |\n| [...java/org/apache/hudi/source/HoodieTableSource.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvSG9vZGllVGFibGVTb3VyY2UuamF2YQ==) | `67.54% <0.00%> (-8.11%)` | `28.00% <0.00%> (-6.00%)` | |\n| [...ies/sources/helpers/DatePartitionPathSelector.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9EYXRlUGFydGl0aW9uUGF0aFNlbGVjdG9yLmphdmE=) | `54.68% <0.00%> (-1.57%)` | `13.00% <0.00%> (ø%)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `70.00% <0.00%> (-0.35%)` | `52.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/source/format/mor/InstantRange.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L21vci9JbnN0YW50UmFuZ2UuamF2YQ==) | `72.22% <0.00%> (ø)` | `3.00% <0.00%> (?%)` | |\n| [...a/org/apache/hudi/operator/StreamReadOperator.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9vcGVyYXRvci9TdHJlYW1SZWFkT3BlcmF0b3IuamF2YQ==) | `90.54% <0.00%> (ø)` | `15.00% <0.00%> (?%)` | |\n| [...he/hudi/operator/StreamReadMonitoringFunction.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9vcGVyYXRvci9TdHJlYW1SZWFkTW9uaXRvcmluZ0Z1bmN0aW9uLmphdmE=) | `76.25% <0.00%> (ø)` | `35.00% <0.00%> (?%)` | |\n| [...apache/hudi/common/model/HoodieCommitMetadata.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZUNvbW1pdE1ldGFkYXRhLmphdmE=) | `44.87% <0.00%> (+0.42%)` | `38.00% <0.00%> (+4.00%)` | |\n| [...di/operator/transform/RowDataToHoodieFunction.java](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9vcGVyYXRvci90cmFuc2Zvcm0vUm93RGF0YVRvSG9vZGllRnVuY3Rpb24uamF2YQ==) | `90.90% <0.00%> (+0.90%)` | `6.00% <0.00%> (+1.00%)` | |\n| ... and [9 more](https://codecov.io/gh/apache/hudi/pull/2655/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795059575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795171222","html_url":"https://github.com/apache/hudi/issues/2614#issuecomment-795171222","issue_url":"https://api.github.com/repos/apache/hudi/issues/2614","id":795171222,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTE3MTIyMg==","user":{"login":"root18039532923","id":45333549,"node_id":"MDQ6VXNlcjQ1MzMzNTQ5","avatar_url":"https://avatars.githubusercontent.com/u/45333549?v=4","gravatar_id":"","url":"https://api.github.com/users/root18039532923","html_url":"https://github.com/root18039532923","followers_url":"https://api.github.com/users/root18039532923/followers","following_url":"https://api.github.com/users/root18039532923/following{/other_user}","gists_url":"https://api.github.com/users/root18039532923/gists{/gist_id}","starred_url":"https://api.github.com/users/root18039532923/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/root18039532923/subscriptions","organizations_url":"https://api.github.com/users/root18039532923/orgs","repos_url":"https://api.github.com/users/root18039532923/repos","events_url":"https://api.github.com/users/root18039532923/events{/privacy}","received_events_url":"https://api.github.com/users/root18039532923/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T09:51:29Z","updated_at":"2021-03-10T09:51:29Z","author_association":"NONE","body":"ok,I need to download the master of hudi-0.7.0,and package it?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795171222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795337425","html_url":"https://github.com/apache/hudi/pull/2640#issuecomment-795337425","issue_url":"https://api.github.com/repos/apache/hudi/issues/2640","id":795337425,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTMzNzQyNQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T12:20:49Z","updated_at":"2021-03-10T12:20:49Z","author_association":"CONTRIBUTOR","body":"@garyli1019 Do you need to review this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795337425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795346578","html_url":"https://github.com/apache/hudi/pull/2640#issuecomment-795346578","issue_url":"https://api.github.com/repos/apache/hudi/issues/2640","id":795346578,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTM0NjU3OA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T12:29:42Z","updated_at":"2021-03-10T12:29:42Z","author_association":"MEMBER","body":"> @garyli1019 Do you need to review this PR?\r\n\r\n@yanghua sorry, too busy at work. Might have to miss this PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795346578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795517625","html_url":"https://github.com/apache/hudi/pull/2640#issuecomment-795517625","issue_url":"https://api.github.com/repos/apache/hudi/issues/2640","id":795517625,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTUxNzYyNQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T14:40:38Z","updated_at":"2021-03-10T14:40:38Z","author_association":"CONTRIBUTOR","body":"> > @garyli1019 Do you need to review this PR?\r\n> \r\n> @yanghua sorry, too busy at work. Might have to miss this PR.\r\n\r\nOK, understood, I have been also busy recently.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795517625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795734772","html_url":"https://github.com/apache/hudi/issues/2639#issuecomment-795734772","issue_url":"https://api.github.com/repos/apache/hudi/issues/2639","id":795734772,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTczNDc3Mg==","user":{"login":"rubenssoto","id":36298331,"node_id":"MDQ6VXNlcjM2Mjk4MzMx","avatar_url":"https://avatars.githubusercontent.com/u/36298331?v=4","gravatar_id":"","url":"https://api.github.com/users/rubenssoto","html_url":"https://github.com/rubenssoto","followers_url":"https://api.github.com/users/rubenssoto/followers","following_url":"https://api.github.com/users/rubenssoto/following{/other_user}","gists_url":"https://api.github.com/users/rubenssoto/gists{/gist_id}","starred_url":"https://api.github.com/users/rubenssoto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubenssoto/subscriptions","organizations_url":"https://api.github.com/users/rubenssoto/orgs","repos_url":"https://api.github.com/users/rubenssoto/repos","events_url":"https://api.github.com/users/rubenssoto/events{/privacy}","received_events_url":"https://api.github.com/users/rubenssoto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T16:56:52Z","updated_at":"2021-03-10T16:56:52Z","author_association":"NONE","body":"I have the same problem with Hudi 0.6.0 EMR version on EMR 6.x, Using Hudi 0.7.0 on the same EMR version works perfectly.\r\n\r\nHudi 0.6.0 doesn't have support for spark 3, so AWS made changes to make it work.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/795734772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796056154","html_url":"https://github.com/apache/hudi/issues/2614#issuecomment-796056154","issue_url":"https://api.github.com/repos/apache/hudi/issues/2614","id":796056154,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjA1NjE1NA==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T20:33:37Z","updated_at":"2021-03-10T20:33:37Z","author_association":"MEMBER","body":"@root18039532923 yes, You may find [this page](https://github.com/apache/hudi#building-apache-hudi-from-source) useful to build from source","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796056154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796374056","html_url":"https://github.com/apache/hudi/issues/2623#issuecomment-796374056","issue_url":"https://api.github.com/repos/apache/hudi/issues/2623","id":796374056,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM3NDA1Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:08:33Z","updated_at":"2021-03-11T02:08:33Z","author_association":"CONTRIBUTOR","body":"Yes, that is what I guess cc @n3nash ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796374056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796384834","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-796384834","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":796384834,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM4NDgzNA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:29:02Z","updated_at":"2021-03-11T02:29:02Z","author_association":"CONTRIBUTOR","body":"@nsivabalan : Can you please take a look ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796384834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796385452","html_url":"https://github.com/apache/hudi/issues/2657#issuecomment-796385452","issue_url":"https://api.github.com/repos/apache/hudi/issues/2657","id":796385452,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM4NTQ1Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:30:19Z","updated_at":"2021-03-11T02:30:19Z","author_association":"CONTRIBUTOR","body":"@garyli1019 : Would you mind taking a look at this. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796385452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796392798","html_url":"https://github.com/apache/hudi/pull/2651#issuecomment-796392798","issue_url":"https://api.github.com/repos/apache/hudi/issues/2651","id":796392798,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM5Mjc5OA==","user":{"login":"pengzhiwei2018","id":42458891,"node_id":"MDQ6VXNlcjQyNDU4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/42458891?v=4","gravatar_id":"","url":"https://api.github.com/users/pengzhiwei2018","html_url":"https://github.com/pengzhiwei2018","followers_url":"https://api.github.com/users/pengzhiwei2018/followers","following_url":"https://api.github.com/users/pengzhiwei2018/following{/other_user}","gists_url":"https://api.github.com/users/pengzhiwei2018/gists{/gist_id}","starred_url":"https://api.github.com/users/pengzhiwei2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengzhiwei2018/subscriptions","organizations_url":"https://api.github.com/users/pengzhiwei2018/orgs","repos_url":"https://api.github.com/users/pengzhiwei2018/repos","events_url":"https://api.github.com/users/pengzhiwei2018/events{/privacy}","received_events_url":"https://api.github.com/users/pengzhiwei2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:45:40Z","updated_at":"2021-03-11T02:45:40Z","author_association":"NONE","body":"> and\r\n\r\n\r\n\r\n> Thanks @pengzhiwei2018 for your effort and contributions around Spark SQL. I took a quick glance, and in general I agree with the idea of have our in-house Spark index implementation that opens the doors for other features we want to build. However, I see a number of high level concerns right now.\r\n> \r\n> This is affecting a critical code path, and it might be better to take this step by step. Can we first try to support `HoodieFileIndex` with the existing behavior Hudi has of supporting globbed paths ?. Once we have that, as next step we can build on it to also support just `basePath` based listing and partition pruning which is also needed for your Spark SQL Support.\r\n\r\nSounds good! I am agree with you that first  support both behavior.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796392798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796393373","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-796393373","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":796393373,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM5MzM3Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:46:52Z","updated_at":"2021-03-11T02:46:52Z","author_association":"CONTRIBUTOR","body":"@rswagatika : Sorry for the delay. Finally got a chance to look at it. It does look there are about 20 versions per file present. I do see compactions ran successfully. So, no issues with it. My only suspicion is cleaner did not even seem to start contrary to the configurations you gave and the experience you had with running cleaner in CLI. At this point, the driver logs (with INFO) is what would help.  @n3nash : Do you have any other thoughts on this ?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796393373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796457125","html_url":"https://github.com/apache/hudi/pull/2658#issuecomment-796457125","issue_url":"https://api.github.com/repos/apache/hudi/issues/2658","id":796457125,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjQ1NzEyNQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T05:07:08Z","updated_at":"2021-03-11T10:05:02Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2658?src=pr&el=h1) Report\n> Merging [#2658](https://codecov.io/gh/apache/hudi/pull/2658?src=pr&el=desc) (b2e7d2a) into [master](https://codecov.io/gh/apache/hudi/commit/2fdae6835ce3fcad3111205d2373a69b34788483?el=desc) (2fdae68) will **increase** coverage by `17.61%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2658/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2658?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #2658       +/-   ##\n=============================================\n+ Coverage     51.87%   69.48%   +17.61%     \n+ Complexity     3556      363     -3193     \n=============================================\n  Files           465       53      -412     \n  Lines         22165     1963    -20202     \n  Branches       2357      235     -2122     \n=============================================\n- Hits          11498     1364    -10134     \n+ Misses         9667      465     -9202     \n+ Partials       1000      134      -866     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `69.48% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2658?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../versioning/compaction/CompactionPlanMigrator.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL3ZlcnNpb25pbmcvY29tcGFjdGlvbi9Db21wYWN0aW9uUGxhbk1pZ3JhdG9yLmphdmE=) | | | |\n| [...he/hudi/common/model/BootstrapBaseFileMapping.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0Jvb3RzdHJhcEJhc2VGaWxlTWFwcGluZy5qYXZh) | | | |\n| [.../main/java/org/apache/hudi/util/AvroConvertor.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS91dGlsL0F2cm9Db252ZXJ0b3IuamF2YQ==) | | | |\n| [...src/main/java/org/apache/hudi/cli/TableHeader.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL1RhYmxlSGVhZGVyLmphdmE=) | | | |\n| [...he/hudi/common/table/timeline/dto/TimelineDTO.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL2R0by9UaW1lbGluZURUTy5qYXZh) | | | |\n| [.../hudi/source/format/mor/MergeOnReadTableState.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L21vci9NZXJnZU9uUmVhZFRhYmxlU3RhdGUuamF2YQ==) | | | |\n| [.../hudi/async/SparkStreamingAsyncCompactService.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3Bhcmsvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvYXN5bmMvU3BhcmtTdHJlYW1pbmdBc3luY0NvbXBhY3RTZXJ2aWNlLmphdmE=) | | | |\n| [.../common/util/queue/FunctionBasedQueueProducer.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvcXVldWUvRnVuY3Rpb25CYXNlZFF1ZXVlUHJvZHVjZXIuamF2YQ==) | | | |\n| [.../java/org/apache/hudi/common/util/RateLimiter.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvUmF0ZUxpbWl0ZXIuamF2YQ==) | | | |\n| [...he/hudi/common/table/timeline/dto/FilePathDTO.java](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL2R0by9GaWxlUGF0aERUTy5qYXZh) | | | |\n| ... and [396 more](https://codecov.io/gh/apache/hudi/pull/2658/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796457125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796484032","html_url":"https://github.com/apache/hudi/pull/2659#issuecomment-796484032","issue_url":"https://api.github.com/repos/apache/hudi/issues/2659","id":796484032,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjQ4NDAzMg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T06:06:55Z","updated_at":"2021-03-11T10:08:55Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2659?src=pr&el=h1) Report\n> Merging [#2659](https://codecov.io/gh/apache/hudi/pull/2659?src=pr&el=desc) (1792be6) into [master](https://codecov.io/gh/apache/hudi/commit/2fdae6835ce3fcad3111205d2373a69b34788483?el=desc) (2fdae68) will **increase** coverage by `17.61%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2659/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2659?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #2659       +/-   ##\n=============================================\n+ Coverage     51.87%   69.48%   +17.61%     \n+ Complexity     3556      363     -3193     \n=============================================\n  Files           465       53      -412     \n  Lines         22165     1963    -20202     \n  Branches       2357      235     -2122     \n=============================================\n- Hits          11498     1364    -10134     \n+ Misses         9667      465     -9202     \n+ Partials       1000      134      -866     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `69.48% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2659?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../org/apache/hudi/metadata/HoodieTableMetadata.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllVGFibGVNZXRhZGF0YS5qYXZh) | | | |\n| [.../org/apache/hudi/cli/commands/TempViewCommand.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL1RlbXBWaWV3Q29tbWFuZC5qYXZh) | | | |\n| [.../java/org/apache/hudi/common/util/RateLimiter.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvUmF0ZUxpbWl0ZXIuamF2YQ==) | | | |\n| [...util/jvm/OpenJ9MemoryLayoutSpecification32bit.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvanZtL09wZW5KOU1lbW9yeUxheW91dFNwZWNpZmljYXRpb24zMmJpdC5qYXZh) | | | |\n| [...i/common/table/log/block/HoodieHFileDataBlock.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9ibG9jay9Ib29kaWVIRmlsZURhdGFCbG9jay5qYXZh) | | | |\n| [...java/org/apache/hudi/hive/util/HiveSchemaUtil.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1zeW5jL2h1ZGktaGl2ZS1zeW5jL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2hpdmUvdXRpbC9IaXZlU2NoZW1hVXRpbC5qYXZh) | | | |\n| [...pache/hudi/common/model/HoodieArchivedLogFile.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZUFyY2hpdmVkTG9nRmlsZS5qYXZh) | | | |\n| [...metadata/HoodieMetadataMergedLogRecordScanner.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0YWRhdGEvSG9vZGllTWV0YWRhdGFNZXJnZWRMb2dSZWNvcmRTY2FubmVyLmphdmE=) | | | |\n| [...va/org/apache/hudi/common/fs/ConsistencyGuard.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL0NvbnNpc3RlbmN5R3VhcmQuamF2YQ==) | | | |\n| [...a/org/apache/hudi/common/util/CompactionUtils.java](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvQ29tcGFjdGlvblV0aWxzLmphdmE=) | | | |\n| ... and [401 more](https://codecov.io/gh/apache/hudi/pull/2659/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796484032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796552639","html_url":"https://github.com/apache/hudi/issues/2637#issuecomment-796552639","issue_url":"https://api.github.com/repos/apache/hudi/issues/2637","id":796552639,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjU1MjYzOQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T08:11:48Z","updated_at":"2021-03-11T08:11:48Z","author_association":"CONTRIBUTOR","body":"@Sugamber The `HoodieRecordPayload` provides 2 API's to perform custom merges \r\n\r\n1) preCombine \r\n2) combineAndGetUpdateValue\r\n\r\nEach of these API's is a callback that provides you with the `other payload`. In case of preCombine this could be another payload while performing an in-memory reduce by key operation while for combineAndGetUpdateValue, the payload provided in the callback is the latest one in storage. \r\n\r\nSee an example here -> https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/model/OverwriteWithLatestAvroPayload.java#L50 \r\n\r\nThis payload simply takes the latest payload, you could just add custom logic in above 2 methods and achieve desired behavior. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796552639/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796829101","html_url":"https://github.com/apache/hudi/issues/2652#issuecomment-796829101","issue_url":"https://api.github.com/repos/apache/hudi/issues/2652","id":796829101,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjgyOTEwMQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T15:42:06Z","updated_at":"2021-03-11T15:42:23Z","author_association":"CONTRIBUTOR","body":"> 1. does the mapping of [<key,partitionpath> -> fileGroupId ]  changed after clustering ?  the record may wrote to another filegroup?\r\n> 2. clusting sort the columns, does it change the physical path of the record to different location which not a partition path by using inlinefs ?\r\n> 3. does clustering work on full hudi table or we can choose some partitions?\r\n> 4. why clustering ignore the file which size over the targetFileSize? if we ignore it, we should cost time for full scan this file.\r\n> 5. when some file is compacting , does clutering scheduler will ignore these files , and then clustering running will still \r\n\r\n@shenbinglife @vinothchandar hello,  i can reply it .\r\n1. yes, the mapping changed. Will write to another file group.\r\n2. clustering sort ,just make the records in a filegroup are sorted. It use spark RDDCustomColumnsSortPartitioner.\r\n3. Now it will work on full table. And  every time will choose \"hoodie.clustering.plan.strategy.daybased.lookback.partitions\" num partition to clustering. You can set the param.\r\n4. Clustering will make small file to large file. Because with large file  spark or presto can split it . Performance better.\r\n5. yes","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796829101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796847977","html_url":"https://github.com/apache/hudi/pull/2662#issuecomment-796847977","issue_url":"https://api.github.com/repos/apache/hudi/issues/2662","id":796847977,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Njg0Nzk3Nw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T16:06:55Z","updated_at":"2021-03-12T08:08:12Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2662?src=pr&el=h1) Report\n> Merging [#2662](https://codecov.io/gh/apache/hudi/pull/2662?src=pr&el=desc) (01978ab) into [master](https://codecov.io/gh/apache/hudi/commit/e8e6708aea1ace4aecaba594d7fd84a0b5cac635?el=desc) (e8e6708) will **decrease** coverage by `0.03%`.\n> The diff coverage is `56.75%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2662/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2662?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2662      +/-   ##\n============================================\n- Coverage     51.99%   51.96%   -0.04%     \n- Complexity     3566     3574       +8     \n============================================\n  Files           465      465              \n  Lines         22187    22268      +81     \n  Branches       2360     2375      +15     \n============================================\n+ Hits          11537    11571      +34     \n- Misses         9649     9685      +36     \n- Partials       1001     1012      +11     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.01% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.51% <ø> (-0.03%)` | `0.00 <ø> (ø)` | |\n| hudiflink | `53.57% <56.75%> (+0.08%)` | `0.00 <25.00> (ø)` | |\n| hudihadoopmr | `33.44% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `69.84% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisync | `49.62% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `64.36% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.02% <ø> (-0.46%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2662?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...va/org/apache/hudi/factory/HoodieTableFactory.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9mYWN0b3J5L0hvb2RpZVRhYmxlRmFjdG9yeS5qYXZh) | `76.92% <ø> (ø)` | `5.00 <0.00> (ø)` | |\n| [...hudi/source/format/mor/MergeOnReadInputFormat.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L21vci9NZXJnZU9uUmVhZElucHV0Rm9ybWF0LmphdmE=) | `30.58% <0.00%> (ø)` | `9.00 <0.00> (ø)` | |\n| [...hudi/source/format/cow/CopyOnWriteInputFormat.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L2Nvdy9Db3B5T25Xcml0ZUlucHV0Rm9ybWF0LmphdmE=) | `56.08% <47.82%> (-29.22%)` | `20.00 <15.00> (+14.00)` | :arrow_down: |\n| [...a/org/apache/hudi/source/format/FilePathUtils.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvZm9ybWF0L0ZpbGVQYXRoVXRpbHMuamF2YQ==) | `67.42% <85.71%> (+0.30%)` | `41.00 <6.00> (-1.00)` | :arrow_up: |\n| [...java/org/apache/hudi/source/HoodieTableSource.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zb3VyY2UvSG9vZGllVGFibGVTb3VyY2UuamF2YQ==) | `67.54% <90.90%> (+0.20%)` | `28.00 <3.00> (ø)` | |\n| [...c/main/java/org/apache/hudi/util/StreamerUtil.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS91dGlsL1N0cmVhbWVyVXRpbC5qYXZh) | `49.53% <100.00%> (+7.22%)` | `16.00 <1.00> (ø)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/hudi/pull/2662/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `79.31% <0.00%> (-10.35%)` | `15.00% <0.00%> (-1.00%)` | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796847977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796849186","html_url":"https://github.com/apache/hudi/pull/2663#issuecomment-796849186","issue_url":"https://api.github.com/repos/apache/hudi/issues/2663","id":796849186,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Njg0OTE4Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T16:08:33Z","updated_at":"2021-03-11T16:08:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2663?src=pr&el=h1) Report\n> Merging [#2663](https://codecov.io/gh/apache/hudi/pull/2663?src=pr&el=desc) (2d4ed9c) into [master](https://codecov.io/gh/apache/hudi/commit/2fdae6835ce3fcad3111205d2373a69b34788483?el=desc) (2fdae68) will **decrease** coverage by `42.34%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2663/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2663?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master   #2663       +/-   ##\n============================================\n- Coverage     51.87%   9.52%   -42.35%     \n+ Complexity     3556      48     -3508     \n============================================\n  Files           465      53      -412     \n  Lines         22165    1963    -20202     \n  Branches       2357     235     -2122     \n============================================\n- Hits          11498     187    -11311     \n+ Misses         9667    1763     -7904     \n+ Partials       1000      13      -987     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `9.52% <ø> (-59.96%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2663?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-3.00%)` | |\n| [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-10.00%)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [...apache/hudi/utilities/sources/JsonKafkaSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkthZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-6.00%)` | |\n| [...pache/hudi/utilities/sources/ParquetDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUGFycXVldERGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-5.00%)` | |\n| [...lities/schema/SchemaProviderWithPostProcessor.java](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFQcm92aWRlcldpdGhQb3N0UHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| ... and [436 more](https://codecov.io/gh/apache/hudi/pull/2663/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/796849186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797078556","html_url":"https://github.com/apache/hudi/pull/2653#issuecomment-797078556","issue_url":"https://api.github.com/repos/apache/hudi/issues/2653","id":797078556,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzA3ODU1Ng==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T22:00:30Z","updated_at":"2021-03-11T22:00:30Z","author_association":"CONTRIBUTOR","body":"@n3nash @vinothchandar : patch is ready to be reviewed. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797078556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797086910","html_url":"https://github.com/apache/hudi/issues/2515#issuecomment-797086910","issue_url":"https://api.github.com/repos/apache/hudi/issues/2515","id":797086910,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzA4NjkxMA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T22:17:05Z","updated_at":"2021-03-11T22:17:05Z","author_association":"CONTRIBUTOR","body":"@t0il3ts0ap : I spent sometime looking at the code. Looks like we do fallback to RowbasedSchemaProvider if you schema provider is not set. So, wondering why do you provide a schemaProvider and then return null for target schema. IMO, that may not be the right usage of the deltastreamer tool. I would recommend either setting the right schema in schemaProvider or do not provider schemaProvider so that hudi will automatically fetch from dataframe schema. \r\n@n3nash @vinothchandar @bhasudha : correct me if my suggestion is wrong. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797086910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797230466","html_url":"https://github.com/apache/hudi/issues/2515#issuecomment-797230466","issue_url":"https://api.github.com/repos/apache/hudi/issues/2515","id":797230466,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzIzMDQ2Ng==","user":{"login":"low-on-mana","id":8509512,"node_id":"MDQ6VXNlcjg1MDk1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/8509512?v=4","gravatar_id":"","url":"https://api.github.com/users/low-on-mana","html_url":"https://github.com/low-on-mana","followers_url":"https://api.github.com/users/low-on-mana/followers","following_url":"https://api.github.com/users/low-on-mana/following{/other_user}","gists_url":"https://api.github.com/users/low-on-mana/gists{/gist_id}","starred_url":"https://api.github.com/users/low-on-mana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/low-on-mana/subscriptions","organizations_url":"https://api.github.com/users/low-on-mana/orgs","repos_url":"https://api.github.com/users/low-on-mana/repos","events_url":"https://api.github.com/users/low-on-mana/events{/privacy}","received_events_url":"https://api.github.com/users/low-on-mana/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T04:43:53Z","updated_at":"2021-03-12T04:43:53Z","author_association":"CONTRIBUTOR","body":"@nsivabalan oh I see. Well I am reading from kafka topic where data is present in avro schema, so I am forced to use a source schema for it. \r\nAnd since I am using transformer to add/remove/change fields, I wanted to infer target schema easily from `Dataset<Row>` instead of doing schema manipulations manually.\r\nIsn't `NullTargetSchemaRegistryProvider` provided for the same. Btw, the issue is not coming when using COW table or when using this [pr](https://github.com/apache/hudi/pull/2655) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797230466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797253060","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-797253060","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":797253060,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzI1MzA2MA==","user":{"login":"shenbinglife","id":16119667,"node_id":"MDQ6VXNlcjE2MTE5NjY3","avatar_url":"https://avatars.githubusercontent.com/u/16119667?v=4","gravatar_id":"","url":"https://api.github.com/users/shenbinglife","html_url":"https://github.com/shenbinglife","followers_url":"https://api.github.com/users/shenbinglife/followers","following_url":"https://api.github.com/users/shenbinglife/following{/other_user}","gists_url":"https://api.github.com/users/shenbinglife/gists{/gist_id}","starred_url":"https://api.github.com/users/shenbinglife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenbinglife/subscriptions","organizations_url":"https://api.github.com/users/shenbinglife/orgs","repos_url":"https://api.github.com/users/shenbinglife/repos","events_url":"https://api.github.com/users/shenbinglife/events{/privacy}","received_events_url":"https://api.github.com/users/shenbinglife/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T05:51:41Z","updated_at":"2021-03-12T05:51:41Z","author_association":"NONE","body":"can you add me to the slack group please? My email is shenbinglife@163.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797253060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797307517","html_url":"https://github.com/apache/hudi/issues/2637#issuecomment-797307517","issue_url":"https://api.github.com/repos/apache/hudi/issues/2637","id":797307517,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzMwNzUxNw==","user":{"login":"Sugamber","id":43312063,"node_id":"MDQ6VXNlcjQzMzEyMDYz","avatar_url":"https://avatars.githubusercontent.com/u/43312063?v=4","gravatar_id":"","url":"https://api.github.com/users/Sugamber","html_url":"https://github.com/Sugamber","followers_url":"https://api.github.com/users/Sugamber/followers","following_url":"https://api.github.com/users/Sugamber/following{/other_user}","gists_url":"https://api.github.com/users/Sugamber/gists{/gist_id}","starred_url":"https://api.github.com/users/Sugamber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sugamber/subscriptions","organizations_url":"https://api.github.com/users/Sugamber/orgs","repos_url":"https://api.github.com/users/Sugamber/repos","events_url":"https://api.github.com/users/Sugamber/events{/privacy}","received_events_url":"https://api.github.com/users/Sugamber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T07:56:57Z","updated_at":"2021-03-12T07:56:57Z","author_association":"NONE","body":"@n3nash  How can we pass custom class name? I copied same class as CustomRecordUpdate and tried to set during save. It throws class not found exception.\r\n` writeDF.write.format(\"org.apache.hudi\")\r\n      .options(hudiConfMap)\r\n      .option(\"hoodie.datasource.write.payload.class\", classOf[CustomRecordUpdate].getName)\r\n      .option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, \"col1\")\r\n      .option(DataSourceWriteOptions.PARTITIONPATH_FIELD_OPT_KEY, \"col2\")\r\n      .option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, \"col3\")\r\n      .option(HoodieWriteConfig.TABLE_NAME, tableName.toString)\r\n      .mode(SaveMode.Append)\r\n      .save(tablePath.toString)`\r\n\r\nI tried all three ways of scala api but non of them worked.\r\n`classOf[CustomRecordUpdate].getCanonicalName\r\nclassOf[CustomRecordUpdate].getName  classOf[CustomRecordUpdate].getSimpleName`\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797307517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797350759","html_url":"https://github.com/apache/hudi/pull/2666#issuecomment-797350759","issue_url":"https://api.github.com/repos/apache/hudi/issues/2666","id":797350759,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzM1MDc1OQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T09:12:49Z","updated_at":"2021-03-17T02:18:53Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2666?src=pr&el=h1) Report\n> Merging [#2666](https://codecov.io/gh/apache/hudi/pull/2666?src=pr&el=desc) (7eeba90) into [master](https://codecov.io/gh/apache/hudi/commit/74241947c123c860a1b0344f25cef316440a70d6?el=desc) (7424194) will **decrease** coverage by `42.17%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2666/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2666?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master   #2666       +/-   ##\n============================================\n- Coverage     51.70%   9.52%   -42.18%     \n+ Complexity     3584      48     -3536     \n============================================\n  Files           475      53      -422     \n  Lines         22495    1963    -20532     \n  Branches       2393     235     -2158     \n============================================\n- Hits          11630     187    -11443     \n+ Misses         9852    1763     -8089     \n+ Partials       1013      13     -1000     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `9.52% <ø> (-60.42%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2666?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-3.00%)` | |\n| [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-10.00%)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [...apache/hudi/utilities/sources/JsonKafkaSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkthZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-6.00%)` | |\n| [...pache/hudi/utilities/sources/ParquetDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUGFycXVldERGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-5.00%)` | |\n| [...lities/schema/SchemaProviderWithPostProcessor.java](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFQcm92aWRlcldpdGhQb3N0UHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| ... and [451 more](https://codecov.io/gh/apache/hudi/pull/2666/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797350759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797434562","html_url":"https://github.com/apache/hudi/issues/2661#issuecomment-797434562","issue_url":"https://api.github.com/repos/apache/hudi/issues/2661","id":797434562,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzQzNDU2Mg==","user":{"login":"jonashartwig","id":8947747,"node_id":"MDQ6VXNlcjg5NDc3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/8947747?v=4","gravatar_id":"","url":"https://api.github.com/users/jonashartwig","html_url":"https://github.com/jonashartwig","followers_url":"https://api.github.com/users/jonashartwig/followers","following_url":"https://api.github.com/users/jonashartwig/following{/other_user}","gists_url":"https://api.github.com/users/jonashartwig/gists{/gist_id}","starred_url":"https://api.github.com/users/jonashartwig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonashartwig/subscriptions","organizations_url":"https://api.github.com/users/jonashartwig/orgs","repos_url":"https://api.github.com/users/jonashartwig/repos","events_url":"https://api.github.com/users/jonashartwig/events{/privacy}","received_events_url":"https://api.github.com/users/jonashartwig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T11:34:56Z","updated_at":"2021-03-12T11:34:56Z","author_association":"NONE","body":"I checked the config section again. There is a property to set to create proper hive partitions. Here is the fixed code:\r\n\r\n```scala\r\nimport org.apache.spark.sql.Row\r\nval rdd = spark.sparkContext.parallelize(List(Row(1, \"a\")))\r\nimport org.apache.spark.sql.types._\r\nval df = spark.createDataFrame(rdd, StructType(List(StructField(\"int\", IntegerType), StructField(\"string\", StringType))))\r\n\r\nimport org.apache.hudi.QuickstartUtils._\r\nimport scala.collection.JavaConversions._\r\nimport org.apache.spark.sql.SaveMode._\r\nimport org.apache.hudi.DataSourceReadOptions._\r\nimport org.apache.hudi.DataSourceWriteOptions._\r\nimport org.apache.hudi.config.HoodieWriteConfig._\r\ndf.write.format(\"hudi\").partitionBy(\"int\").mode(Overwrite).option(HIVE_STYLE_PARTITIONING_OPT_KEY, \"true\").option(TABLE_NAME, \"hudi\").option(PRECOMBINE_FIELD_OPT_KEY, \"int\").option(RECORDKEY_FIELD_OPT_KEY, \"int\").option(PARTITIONPATH_FIELD_OPT_KEY, \"int\").save(\"/data/test/swe/base/hudi/hudi\")\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797434562/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797515929","html_url":"https://github.com/apache/hudi/pull/2669#issuecomment-797515929","issue_url":"https://api.github.com/repos/apache/hudi/issues/2669","id":797515929,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzUxNTkyOQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T14:14:33Z","updated_at":"2021-03-15T07:10:01Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2669?src=pr&el=h1) Report\n> Merging [#2669](https://codecov.io/gh/apache/hudi/pull/2669?src=pr&el=desc) (50d4722) into [master](https://codecov.io/gh/apache/hudi/commit/20786ab8a2a1e7735ab846e92802fb9f4449adc9?el=desc) (20786ab) will **decrease** coverage by `42.48%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2669/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2669?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master   #2669       +/-   ##\n============================================\n- Coverage     52.00%   9.52%   -42.49%     \n+ Complexity     3579      48     -3531     \n============================================\n  Files           465      53      -412     \n  Lines         22268    1963    -20305     \n  Branches       2375     235     -2140     \n============================================\n- Hits          11581     187    -11394     \n+ Misses         9676    1763     -7913     \n+ Partials       1011      13      -998     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `9.52% <ø> (-60.02%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2669?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...va/org/apache/hudi/utilities/IdentitySplitter.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0lkZW50aXR5U3BsaXR0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-3.00%)` | |\n| [...a/org/apache/hudi/utilities/sources/RowSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUm93U291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [.../org/apache/hudi/utilities/sources/AvroSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-1.00%)` | |\n| [...rg/apache/hudi/utilities/sources/CsvDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQ3N2REZTU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-10.00%)` | |\n| [...g/apache/hudi/utilities/sources/JsonDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkRGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| [...apache/hudi/utilities/sources/JsonKafkaSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvbkthZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-6.00%)` | |\n| [...pache/hudi/utilities/sources/ParquetDFSSource.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvUGFycXVldERGU1NvdXJjZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-5.00%)` | |\n| [...lities/schema/SchemaProviderWithPostProcessor.java](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFQcm92aWRlcldpdGhQb3N0UHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-4.00%)` | |\n| ... and [398 more](https://codecov.io/gh/apache/hudi/pull/2669/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797515929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797661017","html_url":"https://github.com/apache/hudi/pull/2671#issuecomment-797661017","issue_url":"https://api.github.com/repos/apache/hudi/issues/2671","id":797661017,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY2MTAxNw==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T18:03:32Z","updated_at":"2021-03-12T18:03:32Z","author_association":"MEMBER","body":"@akanungoz we need to file a bug and link the ticket id to this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797661017/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797665038","html_url":"https://github.com/apache/hudi/pull/2494#issuecomment-797665038","issue_url":"https://api.github.com/repos/apache/hudi/issues/2494","id":797665038,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY2NTAzOA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T18:10:19Z","updated_at":"2021-03-12T18:10:19Z","author_association":"MEMBER","body":"@vinothchandar  PTAL. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797665038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797759321","html_url":"https://github.com/apache/hudi/pull/2671#issuecomment-797759321","issue_url":"https://api.github.com/repos/apache/hudi/issues/2671","id":797759321,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzc1OTMyMQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T21:14:32Z","updated_at":"2021-03-12T21:14:32Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2671?src=pr&el=h1) Report\n> Merging [#2671](https://codecov.io/gh/apache/hudi/pull/2671?src=pr&el=desc) (e3dff4d) into [master](https://codecov.io/gh/apache/hudi/commit/20786ab8a2a1e7735ab846e92802fb9f4449adc9?el=desc) (20786ab) will **increase** coverage by `17.42%`.\n> The diff coverage is `33.33%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2671/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2671?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #2671       +/-   ##\n=============================================\n+ Coverage     52.00%   69.43%   +17.42%     \n+ Complexity     3579      363     -3216     \n=============================================\n  Files           465       53      -412     \n  Lines         22268     1963    -20305     \n  Branches       2375      235     -2140     \n=============================================\n- Hits          11581     1363    -10218     \n+ Misses         9676      466     -9210     \n+ Partials       1011      134      -877     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `69.43% <33.33%> (-0.11%)` | `0.00 <5.00> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2671?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...ies/sources/helpers/DatePartitionPathSelector.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9EYXRlUGFydGl0aW9uUGF0aFNlbGVjdG9yLmphdmE=) | `54.68% <33.33%> (-1.57%)` | `13.00 <5.00> (ø)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `70.00% <0.00%> (-0.35%)` | `52.00% <0.00%> (-1.00%)` | |\n| [...src/main/java/org/apache/hudi/cli/TableHeader.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL1RhYmxlSGVhZGVyLmphdmE=) | | | |\n| [...va/org/apache/hudi/common/fs/ConsistencyGuard.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL0NvbnNpc3RlbmN5R3VhcmQuamF2YQ==) | | | |\n| [...java/org/apache/hudi/common/engine/EngineType.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2VuZ2luZS9FbmdpbmVUeXBlLmphdmE=) | | | |\n| [...he/hudi/common/model/EmptyHoodieRecordPayload.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0VtcHR5SG9vZGllUmVjb3JkUGF5bG9hZC5qYXZh) | | | |\n| [...ache/hudi/common/util/collection/DiskBasedMap.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvY29sbGVjdGlvbi9EaXNrQmFzZWRNYXAuamF2YQ==) | | | |\n| [...til/jvm/HotSpotMemoryLayoutSpecification64bit.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvanZtL0hvdFNwb3RNZW1vcnlMYXlvdXRTcGVjaWZpY2F0aW9uNjRiaXQuamF2YQ==) | | | |\n| [...che/hudi/common/table/log/HoodieLogFileReader.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9Ib29kaWVMb2dGaWxlUmVhZGVyLmphdmE=) | | | |\n| [.../java/org/apache/hudi/hadoop/InputPathHandler.java](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL0lucHV0UGF0aEhhbmRsZXIuamF2YQ==) | | | |\n| ... and [404 more](https://codecov.io/gh/apache/hudi/pull/2671/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797759321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797797580","html_url":"https://github.com/apache/hudi/pull/2374#issuecomment-797797580","issue_url":"https://api.github.com/repos/apache/hudi/issues/2374","id":797797580,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzc5NzU4MA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T22:43:34Z","updated_at":"2021-03-12T22:44:32Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Addressed your feedback comments and build is ready. Some more things to note:\r\n\r\n1. Added explicit dependency on `curator` to control the versions, earlier brought in through transitive dependency. NOTE that the latest stable version for curator is 4.X but we have to use curator version 2.X since 4.X is not backwards compatible with Zookeeper 2.x and 3.X while curator 2.X is backwards and forward compatible. The latest stable version of curator brings in many new features which are not applicable to us, so it should be OK to use 2.X\r\n2. Added Spark Datasource based nodes to HoodieTestSuite and added a test case to run through optimistic locking enabled with Spark datasource. NOTE that we can only test using `ZookeeperBasedLockProvider` for tests and cannot use `HiveMetastoreBasedLockProvider`. This is because embedded  hive metastore only allows one Hive client. When we use spark, spark's HiveExternalCatalog already creates an internal hive client, when hudi tries to create a new hive client through the `HiveMetastoreBasedLockProvider`, it throws underlying derby related exceptions. Some workarounds are to not use derby and are mentioned here -> https://issues.apache.org/jira/browse/HIVE-21302 but this requires a change to the underlying choice of DB for hive metastore itself. Hence, for now, we can only use ZK locks for in-memory unit tests. Ran it against production setup of HiveMetastore to validate this is only a unit test problem. \r\n3. Added more tests and introduced TestSimpleConcurrentFileWritesConflictResolutionStrategy to ensure the right candidate streams are always used. \r\n4. Added another section to quickstart on how to enable optimistic locks. This PR -> https://github.com/apache/hudi/pull/2660 has the details. Validated this by turning on INFO logs on docker to confirm that locking works.\r\n\r\nSome warnings ( I will add these to the docs when I send the PR for documentation)\r\n1. `DeltaStreamer` cannot work with multi-writer. Currently we copy checkpoints from the previous commit to the next - this breaks when we perform multi-writing. \r\n2. Configs for retries and timeouts for locking can vary because of many factors : response times of file system APIs, number of commits to check conflict resolution against etc. We need to document that folks have to choose sane timeouts and retries for their use-case if defaults don't work. \r\n3. Incremental pull using TimelineAPI's will not work for clients. There will be a follow up PR for this in progress.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797797580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797866333","html_url":"https://github.com/apache/hudi/issues/2657#issuecomment-797866333","issue_url":"https://api.github.com/repos/apache/hudi/issues/2657","id":797866333,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzg2NjMzMw==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T04:47:04Z","updated_at":"2021-03-13T04:47:04Z","author_association":"MEMBER","body":"hi @stackfun , thanks for reporting this issue. Would you try spark datasource to query as well? We can narrow this issue down if it only happens to hive.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797866333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797880725","html_url":"https://github.com/apache/hudi/pull/2651#issuecomment-797880725","issue_url":"https://api.github.com/repos/apache/hudi/issues/2651","id":797880725,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzg4MDcyNQ==","user":{"login":"pengzhiwei2018","id":42458891,"node_id":"MDQ6VXNlcjQyNDU4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/42458891?v=4","gravatar_id":"","url":"https://api.github.com/users/pengzhiwei2018","html_url":"https://github.com/pengzhiwei2018","followers_url":"https://api.github.com/users/pengzhiwei2018/followers","following_url":"https://api.github.com/users/pengzhiwei2018/following{/other_user}","gists_url":"https://api.github.com/users/pengzhiwei2018/gists{/gist_id}","starred_url":"https://api.github.com/users/pengzhiwei2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengzhiwei2018/subscriptions","organizations_url":"https://api.github.com/users/pengzhiwei2018/orgs","repos_url":"https://api.github.com/users/pengzhiwei2018/repos","events_url":"https://api.github.com/users/pengzhiwei2018/events{/privacy}","received_events_url":"https://api.github.com/users/pengzhiwei2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T07:09:25Z","updated_at":"2021-03-13T07:09:25Z","author_association":"NONE","body":"Hi @umehrot2 , I have update the code. \r\nMain changes:\r\n1) Use `HoodieTableMetadata` to load files in partition.\r\n2) Cancel the limit of enable the `URL_ENCODE_PARTITIONING_OPT_KEY` for partition prune.\r\n3) Add more test case for this in `TestHooodieFileIndex`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797880725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797881238","html_url":"https://github.com/apache/hudi/issues/2668#issuecomment-797881238","issue_url":"https://api.github.com/repos/apache/hudi/issues/2668","id":797881238,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzg4MTIzOA==","user":{"login":"Tandoy","id":56899730,"node_id":"MDQ6VXNlcjU2ODk5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/56899730?v=4","gravatar_id":"","url":"https://api.github.com/users/Tandoy","html_url":"https://github.com/Tandoy","followers_url":"https://api.github.com/users/Tandoy/followers","following_url":"https://api.github.com/users/Tandoy/following{/other_user}","gists_url":"https://api.github.com/users/Tandoy/gists{/gist_id}","starred_url":"https://api.github.com/users/Tandoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tandoy/subscriptions","organizations_url":"https://api.github.com/users/Tandoy/orgs","repos_url":"https://api.github.com/users/Tandoy/repos","events_url":"https://api.github.com/users/Tandoy/events{/privacy}","received_events_url":"https://api.github.com/users/Tandoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T07:13:56Z","updated_at":"2021-03-13T07:13:56Z","author_association":"NONE","body":"**Solution**\r\n1.Replace cdh-spark with parquet and avro jar packages of hudi/hudi-cli/target/lib/\r\n2.Start command modification `spark-shell \\ --packages org.apache.spark:spark-avro_2.11:2.4.4 \\ --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer' \\ --jars /opt/apps/hudi/packaging/hudi-spark-bundle/target/hudi-spark-bundle_2.11-0.7.0.jar`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/797881238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798539921","html_url":"https://github.com/apache/hudi/pull/2660#issuecomment-798539921","issue_url":"https://api.github.com/repos/apache/hudi/issues/2660","id":798539921,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODUzOTkyMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T15:50:38Z","updated_at":"2021-03-13T15:50:38Z","author_association":"MEMBER","body":"lets also add all remaining documentation for multi writer/pending rollback into this one PR. This needs updating configuration page. A section on concurrency in \"Writing data\"","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798539921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798542080","html_url":"https://github.com/apache/hudi/pull/2660#issuecomment-798542080","issue_url":"https://api.github.com/repos/apache/hudi/issues/2660","id":798542080,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODU0MjA4MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T15:52:08Z","updated_at":"2021-03-13T15:52:08Z","author_association":"MEMBER","body":"and also a blog detailing an end-end example","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798542080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798542821","html_url":"https://github.com/apache/hudi/pull/2374#issuecomment-798542821","issue_url":"https://api.github.com/repos/apache/hudi/issues/2374","id":798542821,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODU0MjgyMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T15:52:37Z","updated_at":"2021-03-13T15:52:37Z","author_association":"MEMBER","body":">DeltaStreamer cannot work with multi-writer. Currently we copy checkpoints from the previous commit to the next - this breaks when we perform multi-writing.\r\n\r\nBut we should be able to allow backfills using spark sql, which don't really mess with checkpoints? We cannot ignore this scenario. Can you look into how we can provide best practices","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798542821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798561695","html_url":"https://github.com/apache/hudi/pull/2378#issuecomment-798561695","issue_url":"https://api.github.com/repos/apache/hudi/issues/2378","id":798561695,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODU2MTY5NQ==","user":{"login":"yui2010","id":3294003,"node_id":"MDQ6VXNlcjMyOTQwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/3294003?v=4","gravatar_id":"","url":"https://api.github.com/users/yui2010","html_url":"https://github.com/yui2010","followers_url":"https://api.github.com/users/yui2010/followers","following_url":"https://api.github.com/users/yui2010/following{/other_user}","gists_url":"https://api.github.com/users/yui2010/gists{/gist_id}","starred_url":"https://api.github.com/users/yui2010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yui2010/subscriptions","organizations_url":"https://api.github.com/users/yui2010/orgs","repos_url":"https://api.github.com/users/yui2010/repos","events_url":"https://api.github.com/users/yui2010/events{/privacy}","received_events_url":"https://api.github.com/users/yui2010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T16:06:27Z","updated_at":"2021-03-13T16:06:27Z","author_association":"CONTRIBUTOR","body":"Add testPrunePartitionsWithMisplacedReturnData test case to demo misplacement of the returned data","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798561695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798591032","html_url":"https://github.com/apache/hudi/issues/2609#issuecomment-798591032","issue_url":"https://api.github.com/repos/apache/hudi/issues/2609","id":798591032,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODU5MTAzMg==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T16:28:18Z","updated_at":"2021-03-13T16:28:18Z","author_association":"CONTRIBUTOR","body":"@bhasudha : Do you mind taking a look at this. Looks like customer is prototyping hudi and is a blocker for now. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798591032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798596523","html_url":"https://github.com/apache/hudi/issues/2589#issuecomment-798596523","issue_url":"https://api.github.com/repos/apache/hudi/issues/2589","id":798596523,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODU5NjUyMw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T16:32:31Z","updated_at":"2021-03-13T16:34:54Z","author_association":"CONTRIBUTOR","body":"@t0il3ts0ap : yes, I am working on a potential fix for this issue. \r\njira: https://issues.apache.org/jira/browse/HUDI-1687\r\nPR: https://github.com/apache/hudi/pull/2654/\r\n\r\ncrux of the issue:\r\nIn deltastreamer w/ a transformer, if schema provider is set, hudi takes it as is. Only if schema provider is not configured, hudi falls back to RowbasedSchemaProvider (which is the behavior you expect). \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798596523/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798606859","html_url":"https://github.com/apache/hudi/issues/2637#issuecomment-798606859","issue_url":"https://api.github.com/repos/apache/hudi/issues/2637","id":798606859,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODYwNjg1OQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T16:40:05Z","updated_at":"2021-03-13T16:40:05Z","author_association":"CONTRIBUTOR","body":"@Sugamber : did you confirm that your class exists in class path while you run your spark job. classOf[CustomRecordUpdate].getName should have worked. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798606859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798640139","html_url":"https://github.com/apache/hudi/issues/2639#issuecomment-798640139","issue_url":"https://api.github.com/repos/apache/hudi/issues/2639","id":798640139,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY0MDEzOQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:06:08Z","updated_at":"2021-03-13T17:07:56Z","author_association":"CONTRIBUTOR","body":"@afeldman1 : is it possible for you to try hudi 0.7.0 with EMR? The time increase definitely seems unacceptable.\r\n\r\nCan you try setting this config and let us know how it goes. \r\nhoodie.datasource.write.row.writer.enable -> true\r\nDataSourceWriteOptions.OPERATION_OPT_KEY -> DataSourceWriteOptions.BULK_INSERT_OPERATION_OPT_VAL\r\nThis will perform write operations directly using the spark native `Row` representation w/o converting to JavaRDD[HoodieRecord]\r\n\r\nWrt difference between \"insert\" and \"bulk_insert\" operation:\r\nIn bulk insert, you can configure different sort modes. \r\nGLOBAL_SORT: all incoming records are sorted globally before being partitioned and written to hudi.\r\nPARTITION_SORT: records are locally sorted for each RDD partition after coalesce and then written to hudi.\r\nNONE: if you don't prefer any ordering with bulk_insert. \r\n\r\nIf your record keys are completely random, you might as well set this [sort mode ](https://hudi.apache.org/docs/configurations.html#withBulkInsertSortMode)to NONE. \r\nNONE is expected to match spark.write.parquet() in terms of number of files, overheads.\r\n\r\nAnd, can you provide spark UI for stages with spark 3.0.1 for the job that's taking hours as well. \r\n\r\nI have one clarification as well: If you are incrementally ingesting data, why not consider \"upsert\" as your operation. Or are you just trying to load data into hudi for first time and trying out different approaches. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798640139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798648747","html_url":"https://github.com/apache/hudi/issues/2644#issuecomment-798648747","issue_url":"https://api.github.com/repos/apache/hudi/issues/2644","id":798648747,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY0ODc0Nw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:14:21Z","updated_at":"2021-03-30T15:11:14Z","author_association":"CONTRIBUTOR","body":"@pj001 : Can you give us more details on what's the issue here. Do you mean to say, while reading data from COW table w/ incremental query, you see inconsistent results? If yes, can you throw some light on what do you mean by inconsistent. Do you see records from a diff commit or don't see all records from a commit of interest. More details would be easy for us to debug further. \r\n\r\nWrt cleaning, yes, cleaner will periodically clean your older commits. If you wish to retain all of your commits, you might have to modify cleaner related configs in hudi accordingly. Let us know if you need any help in this regards as well. \r\n\r\nonce you respond, can you please remove \"awaiting-user-response\" label for the issue. If possible add \"awaiting-community-help\" label. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798648747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798657123","html_url":"https://github.com/apache/hudi/issues/2647#issuecomment-798657123","issue_url":"https://api.github.com/repos/apache/hudi/issues/2647","id":798657123,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY1NzEyMw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:21:14Z","updated_at":"2021-03-30T15:10:11Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 : Can you provide the details that Balaji have asked. \r\nAlso, few clarifications.\r\n1. You mean to say that, if you don't provide any partition filters (\"select * from table\") in hive, it works. But only when you provide a partition filter(select * from table where ds=‘2020-03-08’), you don't see any results. Is my understanding right?\r\n2. Have you tried listing all partitions for Hudi Table in hive using beeline or some other tool. Can you paste the output.\r\n3. Can you provide us w/ all hive sync related configs you set with hudi while writing. \r\n4. How is hive sync executed? do you use standalone Hive sync tool, or do you enable hive sync as part of hudi write. \r\n\r\nonce you respond, can you please remove \"awaiting-user-response\" label for the issue. If possible add \"awaiting-community-help\" label. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798657123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798661227","html_url":"https://github.com/apache/hudi/issues/2648#issuecomment-798661227","issue_url":"https://api.github.com/repos/apache/hudi/issues/2648","id":798661227,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY2MTIyNw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:24:11Z","updated_at":"2021-03-30T15:09:30Z","author_association":"CONTRIBUTOR","body":"@n3nash : Can you take a look at this hbase index related issue. I remember seeing a similar [issue](https://github.com/apache/hudi/issues/2633) relating to a fileGroup w/ just a log file w/o base file. Not sure if its related. once you respond, can you please remove \"awaiting-community-help\" label for the issue and add \"awaiting-user-response\" label.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798661227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798667808","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-798667808","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":798667808,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY2NzgwOA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:28:47Z","updated_at":"2021-03-13T17:28:47Z","author_association":"CONTRIBUTOR","body":"@shivabansal1046 : Can you provide us w/ you full configs you use while writing to hudi. \r\nAlso, can you clarify something: \r\nBy \"behaving like upsert i.e. updating the matching rows\", you mean that, if a record exists in hudi dataset in storage and you have a matching record in your incoming batch of ingest, you see both these are updated and when you query you see only the latest version? \r\nOr do you mean to say, if you have two records within the same batch of ingestion w/ same record key and with \"insert\" operation these both are merged and written as one record to hudi dataset. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798667808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798679115","html_url":"https://github.com/apache/hudi/issues/2664#issuecomment-798679115","issue_url":"https://api.github.com/repos/apache/hudi/issues/2664","id":798679115,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY3OTExNQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:38:09Z","updated_at":"2021-03-13T17:38:22Z","author_association":"CONTRIBUTOR","body":"@rubenssoto : how do you write to hudi? Do you use delta streamer or do you have your own spark job that writes to hudi directly? \r\nAlso, what do you mean by \"all my parquet files disappeared.\" ? Do you mean to say, due to cleaning, your files are disappeared? I don't quite get this. \r\n\r\nAlso, I assume this empty dataframe is not a one off thing, but its happens regularly w/ your pipeline and hence you wish to see what's the best way forward. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798679115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798687278","html_url":"https://github.com/apache/hudi/issues/2664#issuecomment-798687278","issue_url":"https://api.github.com/repos/apache/hudi/issues/2664","id":798687278,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY4NzI3OA==","user":{"login":"rubenssoto","id":36298331,"node_id":"MDQ6VXNlcjM2Mjk4MzMx","avatar_url":"https://avatars.githubusercontent.com/u/36298331?v=4","gravatar_id":"","url":"https://api.github.com/users/rubenssoto","html_url":"https://github.com/rubenssoto","followers_url":"https://api.github.com/users/rubenssoto/followers","following_url":"https://api.github.com/users/rubenssoto/following{/other_user}","gists_url":"https://api.github.com/users/rubenssoto/gists{/gist_id}","starred_url":"https://api.github.com/users/rubenssoto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubenssoto/subscriptions","organizations_url":"https://api.github.com/users/rubenssoto/orgs","repos_url":"https://api.github.com/users/rubenssoto/repos","events_url":"https://api.github.com/users/rubenssoto/events{/privacy}","received_events_url":"https://api.github.com/users/rubenssoto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:44:34Z","updated_at":"2021-03-13T17:44:34Z","author_association":"NONE","body":"Hello @nsivabalan \r\n\r\nIm using my own spark job, yeah I think because of cleaning all my parquet files were gone.\r\n\r\nYeah that's it, we are ingesting data from an application called AppsFlyer, they send CSV files each hour, but when they don't have data to send, they send empty csv files with columns only.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798687278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798690194","html_url":"https://github.com/apache/hudi/issues/2664#issuecomment-798690194","issue_url":"https://api.github.com/repos/apache/hudi/issues/2664","id":798690194,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODY5MDE5NA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T17:46:45Z","updated_at":"2021-03-13T17:46:45Z","author_association":"CONTRIBUTOR","body":"got it. thanks. \r\nif checkpointing is not an issue, I would suggest to filter out at your end and avoid writing to hudi to make it easy. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798690194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798740067","html_url":"https://github.com/apache/hudi/issues/2664#issuecomment-798740067","issue_url":"https://api.github.com/repos/apache/hudi/issues/2664","id":798740067,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc0MDA2Nw==","user":{"login":"rubenssoto","id":36298331,"node_id":"MDQ6VXNlcjM2Mjk4MzMx","avatar_url":"https://avatars.githubusercontent.com/u/36298331?v=4","gravatar_id":"","url":"https://api.github.com/users/rubenssoto","html_url":"https://github.com/rubenssoto","followers_url":"https://api.github.com/users/rubenssoto/followers","following_url":"https://api.github.com/users/rubenssoto/following{/other_user}","gists_url":"https://api.github.com/users/rubenssoto/gists{/gist_id}","starred_url":"https://api.github.com/users/rubenssoto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubenssoto/subscriptions","organizations_url":"https://api.github.com/users/rubenssoto/orgs","repos_url":"https://api.github.com/users/rubenssoto/repos","events_url":"https://api.github.com/users/rubenssoto/events{/privacy}","received_events_url":"https://api.github.com/users/rubenssoto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T18:23:12Z","updated_at":"2021-03-13T18:23:12Z","author_association":"NONE","body":"What do you mean by \"checkpointing\"?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798740067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798777358","html_url":"https://github.com/apache/hudi/issues/2664#issuecomment-798777358","issue_url":"https://api.github.com/repos/apache/hudi/issues/2664","id":798777358,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc3NzM1OA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T20:04:59Z","updated_at":"2021-03-13T20:04:59Z","author_association":"CONTRIBUTOR","body":"never mind. If you can filter and avoid doing empty commits on your end, that would be nice. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798777358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798799217","html_url":"https://github.com/apache/hudi/issues/2515#issuecomment-798799217","issue_url":"https://api.github.com/repos/apache/hudi/issues/2515","id":798799217,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc5OTIxNw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T23:04:02Z","updated_at":"2021-03-13T23:04:02Z","author_association":"CONTRIBUTOR","body":"got it, thanks. \r\n@n3nash @bvaradar @vinothchandar : What's the purpose of NullSchemaRegistry. When one can use it. \r\n@t0il3ts0ap : So, you are using NullTargetSchemaRegistryProvider as your schemaProvider w/ deltastreamer and with a transformer ? is my understanding right. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798799217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798810019","html_url":"https://github.com/apache/hudi/issues/2657#issuecomment-798810019","issue_url":"https://api.github.com/repos/apache/hudi/issues/2657","id":798810019,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODgxMDAxOQ==","user":{"login":"stackfun","id":68627128,"node_id":"MDQ6VXNlcjY4NjI3MTI4","avatar_url":"https://avatars.githubusercontent.com/u/68627128?v=4","gravatar_id":"","url":"https://api.github.com/users/stackfun","html_url":"https://github.com/stackfun","followers_url":"https://api.github.com/users/stackfun/followers","following_url":"https://api.github.com/users/stackfun/following{/other_user}","gists_url":"https://api.github.com/users/stackfun/gists{/gist_id}","starred_url":"https://api.github.com/users/stackfun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stackfun/subscriptions","organizations_url":"https://api.github.com/users/stackfun/orgs","repos_url":"https://api.github.com/users/stackfun/repos","events_url":"https://api.github.com/users/stackfun/events{/privacy}","received_events_url":"https://api.github.com/users/stackfun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T00:55:23Z","updated_at":"2021-03-14T00:55:23Z","author_association":"NONE","body":"Spark datasource works.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798810019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798849454","html_url":"https://github.com/apache/hudi/pull/2500#issuecomment-798849454","issue_url":"https://api.github.com/repos/apache/hudi/issues/2500","id":798849454,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg0OTQ1NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:11:18Z","updated_at":"2021-03-14T07:11:18Z","author_association":"MEMBER","body":"Pushed small refactors. Will merge once CI passes\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798849454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798850321","html_url":"https://github.com/apache/hudi/pull/2625#issuecomment-798850321","issue_url":"https://api.github.com/repos/apache/hudi/issues/2625","id":798850321,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1MDMyMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:21:04Z","updated_at":"2021-03-14T07:21:15Z","author_association":"MEMBER","body":"@nsivabalan thanks for this. I think generating thrice is okay. Don't see any other way, to avoid this. \r\n\r\nWhenever we can, we should avoid any breaking changes . So can we not change name of the existing bundle name for spark2. i.e `hudi-spark2-bundle_2.12-0.8.0-SNAPSHOT.jar` ? We can just generate one for spark3 called `hudi-spark3-bundle_2.12-0.8.0-SNAPSHOT.jar`\r\n\r\nHaving sparkbundle.version is okay. can we set this through the spark3 maven profile though? That way if you run a run for spark3, the bundle is called `hudi-spark3... ` ? Keeping this in-sync with `spark.version` inside pom is a better approach. less variables to remember at the command line . wdyt? \r\n\r\n\r\n>Do we need to stop uploading hudi-spark_2.12-0.7.0.jar\r\n\r\nSo this is what users who write spark jobs depend on today. We should keep this as-is? They will ultimately compile their application against the right spark version anyway.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798850321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851074","html_url":"https://github.com/apache/hudi/pull/2601#issuecomment-798851074","issue_url":"https://api.github.com/repos/apache/hudi/issues/2601","id":798851074,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1MTA3NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:29:24Z","updated_at":"2021-03-14T07:29:24Z","author_association":"MEMBER","body":"@vburenin got it. We want to keep the parquet version matched with the spark version, w.r.t hudi. Spark3.1 still seems to be on 1.10.1 \r\n\r\nhttps://github.com/apache/spark/blob/branch-3.1/pom.xml#L138\r\n\r\nOnce #2625 is landed, lets see what the spark land is saying about 1.11.1? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851125","html_url":"https://github.com/apache/hudi/pull/2590#issuecomment-798851125","issue_url":"https://api.github.com/repos/apache/hudi/issues/2590","id":798851125,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1MTEyNQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:30:02Z","updated_at":"2021-03-14T07:30:02Z","author_association":"MEMBER","body":"Closing this, given \r\n@nsivabalan has broken this up more into other PRs","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851341","html_url":"https://github.com/apache/hudi/pull/2650#issuecomment-798851341","issue_url":"https://api.github.com/repos/apache/hudi/issues/2650","id":798851341,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1MTM0MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:31:06Z","updated_at":"2021-03-14T07:31:06Z","author_association":"MEMBER","body":"cc @n3nash can you chime in here? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798851341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798854077","html_url":"https://github.com/apache/hudi/pull/2655#issuecomment-798854077","issue_url":"https://api.github.com/repos/apache/hudi/issues/2655","id":798854077,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1NDA3Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:41:04Z","updated_at":"2021-03-14T07:41:04Z","author_association":"MEMBER","body":"@nsivabalan can you please mark any new PRs with the sev labels? the previous PR I had had a `sev:critical`. This way we won't lose track of any important fixes. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798854077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798855802","html_url":"https://github.com/apache/hudi/issues/2515#issuecomment-798855802","issue_url":"https://api.github.com/repos/apache/hudi/issues/2515","id":798855802,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1NTgwMg==","user":{"login":"low-on-mana","id":8509512,"node_id":"MDQ6VXNlcjg1MDk1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/8509512?v=4","gravatar_id":"","url":"https://api.github.com/users/low-on-mana","html_url":"https://github.com/low-on-mana","followers_url":"https://api.github.com/users/low-on-mana/followers","following_url":"https://api.github.com/users/low-on-mana/following{/other_user}","gists_url":"https://api.github.com/users/low-on-mana/gists{/gist_id}","starred_url":"https://api.github.com/users/low-on-mana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/low-on-mana/subscriptions","organizations_url":"https://api.github.com/users/low-on-mana/orgs","repos_url":"https://api.github.com/users/low-on-mana/repos","events_url":"https://api.github.com/users/low-on-mana/events{/privacy}","received_events_url":"https://api.github.com/users/low-on-mana/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:47:17Z","updated_at":"2021-03-14T07:47:17Z","author_association":"CONTRIBUTOR","body":"@nsivabalan Ya I provide target schema as null and using deltastreamer & transformer.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798855802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798856643","html_url":"https://github.com/apache/hudi/pull/1562#issuecomment-798856643","issue_url":"https://api.github.com/repos/apache/hudi/issues/1562","id":798856643,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1NjY0Mw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T07:56:51Z","updated_at":"2021-03-14T07:56:51Z","author_association":"MEMBER","body":"Closing this in favor of #2619 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798856643/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798858167","html_url":"https://github.com/apache/hudi/pull/2309#issuecomment-798858167","issue_url":"https://api.github.com/repos/apache/hudi/issues/2309","id":798858167,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1ODE2Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T08:11:14Z","updated_at":"2021-03-14T08:11:14Z","author_association":"MEMBER","body":"@n3nash @nbalajee @prashantwason @nsivabalan this PR sounds important, but can someone please summarize its state? also this needs a rebase with only the necessary changes.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798858167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798858222","html_url":"https://github.com/apache/hudi/issues/2409#issuecomment-798858222","issue_url":"https://api.github.com/repos/apache/hudi/issues/2409","id":798858222,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg1ODIyMg==","user":{"login":"wosow","id":34565079,"node_id":"MDQ6VXNlcjM0NTY1MDc5","avatar_url":"https://avatars.githubusercontent.com/u/34565079?v=4","gravatar_id":"","url":"https://api.github.com/users/wosow","html_url":"https://github.com/wosow","followers_url":"https://api.github.com/users/wosow/followers","following_url":"https://api.github.com/users/wosow/following{/other_user}","gists_url":"https://api.github.com/users/wosow/gists{/gist_id}","starred_url":"https://api.github.com/users/wosow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wosow/subscriptions","organizations_url":"https://api.github.com/users/wosow/orgs","repos_url":"https://api.github.com/users/wosow/repos","events_url":"https://api.github.com/users/wosow/events{/privacy}","received_events_url":"https://api.github.com/users/wosow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T08:11:50Z","updated_at":"2021-03-14T08:15:34Z","author_association":"NONE","body":"> @wosow : also, few quick questions as we triage the issue.\r\n> \r\n> * Were you running older version of Hudi and encountered this after upgrade? in other words, older Hudi version you were able to run successfully and with 0.7.0 there is a bug.\r\n> * Is this affecting your production? trying to gauge the severity.\r\n> * Or you are trying out a POC ? and this is the first time trying out Hudi.\r\n\r\n    ```\r\nThere is no impact on the production environment, only the problem occurred in the test 0.6.0, and the test was not \r\nperformed in the 0.7.0.\r\n       In addition, I have another question. I use sqoop to import the data in mysql to HDFS, and then use Spark to read and write the Hudi table. The table type is MOR. If I want to use asynchronous compaction, what parameters need to be configured,  asynchronous Is Compaction automatic? Need manual intervention? Or is it necessary to manually intervene Compaction after opening asynchronous Compaction? If it is necessary to manually execute Compaction manually on a regular basis, what parameters need to be configured for manual Compaction, and what are the commands for manual Compaction? Looking forward to your answer! ! !\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798858222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798864560","html_url":"https://github.com/apache/hudi/issues/2409#issuecomment-798864560","issue_url":"https://api.github.com/repos/apache/hudi/issues/2409","id":798864560,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg2NDU2MA==","user":{"login":"wosow","id":34565079,"node_id":"MDQ6VXNlcjM0NTY1MDc5","avatar_url":"https://avatars.githubusercontent.com/u/34565079?v=4","gravatar_id":"","url":"https://api.github.com/users/wosow","html_url":"https://github.com/wosow","followers_url":"https://api.github.com/users/wosow/followers","following_url":"https://api.github.com/users/wosow/following{/other_user}","gists_url":"https://api.github.com/users/wosow/gists{/gist_id}","starred_url":"https://api.github.com/users/wosow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wosow/subscriptions","organizations_url":"https://api.github.com/users/wosow/orgs","repos_url":"https://api.github.com/users/wosow/repos","events_url":"https://api.github.com/users/wosow/events{/privacy}","received_events_url":"https://api.github.com/users/wosow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T08:16:40Z","updated_at":"2021-03-14T08:16:40Z","author_association":"NONE","body":"> @wosow Were you able to resolve your issue ?\r\n\r\nno","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798864560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798871487","html_url":"https://github.com/apache/hudi/pull/2580#issuecomment-798871487","issue_url":"https://api.github.com/repos/apache/hudi/issues/2580","id":798871487,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg3MTQ4Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T08:53:57Z","updated_at":"2021-03-14T08:53:57Z","author_association":"MEMBER","body":"@n3nash Adding the transtion time to the end of the current timeline files, separated by a dot . i.e t1.commit.requested.t2 seems okay. But unsure how the code would handle the cases where state=completed. i.e we only have t1.commit.t2 and somehow the parsing has to intelligently handle that t2 is a timestamp and not one of the states right. I think we have to do a upgrade/downgrade step here for sure, whichever way we go.\r\n\r\ndid you have more high level thoughts on this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798871487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798875296","html_url":"https://github.com/apache/hudi/pull/2374#issuecomment-798875296","issue_url":"https://api.github.com/repos/apache/hudi/issues/2374","id":798875296,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg3NTI5Ng==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T09:24:25Z","updated_at":"2021-03-14T09:32:09Z","author_association":"CONTRIBUTOR","body":"@vinothchandar It's possible to allow backfills using spark-sql but there are some corner cases. Consider the following:\r\n\r\n1. Ingestion job running with commit c4 (checkpoint = c3)\r\n2. Ingestion job finishes with commit c4 (checkpoint = c3)\r\n3. Someone runs a spark-sql job to backfill some data in an older partition, commit c5. Since this spark-sql job (unlike deltastreamer) does not handle checkpoint copying from prev metadata to next, it would be the client's job to do this. \r\n4. If they fail to do this, deltastreamer next ingestion c6 will read no checkpoint from c5. \r\n\r\nI've made the following changes:\r\n\r\n1) To make this manageable, I've added the following config : `hoodie.write.meta.key.prefixes`. One can set this config to ensure that during the critical section, if this config is set, it will copy over all the metadata for the keys that match with the prefix set in this config from the latest metadata to the current commit.\r\n2) Made changes and added these multi-writer tests to `HoodieDeltaStreamer` as well. Technically, one can do the backfill using `HoodieDeltaStreamer` or `Spark-SQL`. For `HoodieDeltaStreamer` they would have to set some custom checkpoint or mark it to null to ensure that the job just picks the data from the backfill location, for Spark-SQL it would not matter. \r\n\r\nYes, I am going to add documents on best practices / things to watch out in the other PR I opened for documentation. I will do that after resolving any further comments and landing this PR in the next couple of days.\r\n\r\nNOTE: The test may be failing because of some thread.sleep related code that I'm trying to remove. Will update tomorrow.  \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798875296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798876972","html_url":"https://github.com/apache/hudi/pull/2612#issuecomment-798876972","issue_url":"https://api.github.com/repos/apache/hudi/issues/2612","id":798876972,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODg3Njk3Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T09:37:57Z","updated_at":"2021-03-14T09:37:57Z","author_association":"MEMBER","body":"@nsivabalan my changes are in. Please feel free to land, once you take a pass. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798876972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798971624","html_url":"https://github.com/apache/hudi/pull/2494#issuecomment-798971624","issue_url":"https://api.github.com/repos/apache/hudi/issues/2494","id":798971624,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODk3MTYyNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T20:11:31Z","updated_at":"2021-03-14T20:11:31Z","author_association":"MEMBER","body":"@prashantwason We can remove the reuse configuration - i.e no need to have this behavior be user controlled. \r\n\r\nbut ultimately, we still need to close everything out,  where metadata table is opened from executors. I am going to just introduce a boolean variable within `HoodieBackedTableMetadata` ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/798971624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799044094","html_url":"https://github.com/apache/hudi/issues/2623#issuecomment-799044094","issue_url":"https://api.github.com/repos/apache/hudi/issues/2623","id":799044094,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA0NDA5NA==","user":{"login":"root18039532923","id":45333549,"node_id":"MDQ6VXNlcjQ1MzMzNTQ5","avatar_url":"https://avatars.githubusercontent.com/u/45333549?v=4","gravatar_id":"","url":"https://api.github.com/users/root18039532923","html_url":"https://github.com/root18039532923","followers_url":"https://api.github.com/users/root18039532923/followers","following_url":"https://api.github.com/users/root18039532923/following{/other_user}","gists_url":"https://api.github.com/users/root18039532923/gists{/gist_id}","starred_url":"https://api.github.com/users/root18039532923/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/root18039532923/subscriptions","organizations_url":"https://api.github.com/users/root18039532923/orgs","repos_url":"https://api.github.com/users/root18039532923/repos","events_url":"https://api.github.com/users/root18039532923/events{/privacy}","received_events_url":"https://api.github.com/users/root18039532923/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T02:15:32Z","updated_at":"2021-03-15T02:15:32Z","author_association":"NONE","body":"@n3nash ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799044094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799047482","html_url":"https://github.com/apache/hudi/pull/2309#issuecomment-799047482","issue_url":"https://api.github.com/repos/apache/hudi/issues/2309","id":799047482,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA0NzQ4Mg==","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T02:27:38Z","updated_at":"2021-03-15T02:27:38Z","author_association":"CONTRIBUTOR","body":"> @n3nash @nbalajee @prashantwason @nsivabalan this PR sounds important, but can someone please summarize its state? also this needs a rebase with only the necessary changes.\r\n\r\nThe changes overall looks good from my side, but this PR has to do a rebase because it introduces many conflicts commits from master branch.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799047482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799059684","html_url":"https://github.com/apache/hudi/pull/2673#issuecomment-799059684","issue_url":"https://api.github.com/repos/apache/hudi/issues/2673","id":799059684,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA1OTY4NA==","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T03:11:57Z","updated_at":"2021-03-15T09:03:30Z","author_association":"CONTRIBUTOR","body":"cc @garyli1019 @nsivabalan  , could you help me review this pr, thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799059684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799061373","html_url":"https://github.com/apache/hudi/pull/2673#issuecomment-799061373","issue_url":"https://api.github.com/repos/apache/hudi/issues/2673","id":799061373,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA2MTM3Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T03:17:52Z","updated_at":"2021-03-15T07:18:49Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2673?src=pr&el=h1) Report\n> Merging [#2673](https://codecov.io/gh/apache/hudi/pull/2673?src=pr&el=desc) (2ecca39) into [master](https://codecov.io/gh/apache/hudi/commit/e93c6a569310ce55c5a0fc0655328e7fd32a9da2?el=desc) (e93c6a5) will **increase** coverage by `0.01%`.\n> The diff coverage is `85.71%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2673/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2673?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2673      +/-   ##\n============================================\n+ Coverage     51.99%   52.00%   +0.01%     \n  Complexity     3580     3580              \n============================================\n  Files           466      466              \n  Lines         22275    22282       +7     \n  Branches       2374     2375       +1     \n============================================\n+ Hits          11581    11587       +6     \n- Misses         9686     9687       +1     \n  Partials       1008     1008              \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.01% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.49% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiflink | `53.57% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudihadoopmr | `33.44% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `69.91% <85.71%> (+0.07%)` | `0.00 <0.00> (ø)` | |\n| hudisync | `49.62% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `64.36% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.48% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2673?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/2673/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3Bhcmsvc3JjL21haW4vc2NhbGEvb3JnL2FwYWNoZS9odWRpL0hvb2RpZVNwYXJrU3FsV3JpdGVyLnNjYWxh) | `52.15% <85.71%> (+0.79%)` | `0.00 <0.00> (ø)` | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799061373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799071055","html_url":"https://github.com/apache/hudi/pull/2334#issuecomment-799071055","issue_url":"https://api.github.com/repos/apache/hudi/issues/2334","id":799071055,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA3MTA1NQ==","user":{"login":"pengzhiwei2018","id":42458891,"node_id":"MDQ6VXNlcjQyNDU4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/42458891?v=4","gravatar_id":"","url":"https://api.github.com/users/pengzhiwei2018","html_url":"https://github.com/pengzhiwei2018","followers_url":"https://api.github.com/users/pengzhiwei2018/followers","following_url":"https://api.github.com/users/pengzhiwei2018/following{/other_user}","gists_url":"https://api.github.com/users/pengzhiwei2018/gists{/gist_id}","starred_url":"https://api.github.com/users/pengzhiwei2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengzhiwei2018/subscriptions","organizations_url":"https://api.github.com/users/pengzhiwei2018/orgs","repos_url":"https://api.github.com/users/pengzhiwei2018/repos","events_url":"https://api.github.com/users/pengzhiwei2018/events{/privacy}","received_events_url":"https://api.github.com/users/pengzhiwei2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T03:52:44Z","updated_at":"2021-03-15T03:56:43Z","author_association":"NONE","body":"> @pengzhiwei2018 first of all, thanks for these great contributions.\r\n> \r\n> Wrt inputSchema vs writeSchema, I actually feel writeSchema already stands for inputSchema, input is what is being written, right? We can probably just leave it as is. and introduce new `tableSchema` variables as you have in the `HoodieWriteHandle` class.?\r\n> \r\n> Like someone else pointed out as well, so far, we are using read and write schemas consistently. Love to not introduce a new input schema, unless its absolutely necessary .\r\n\r\nHi @vinothchandar ,thanks for your reply on this issue.\r\nYes, in most case ,the `writeSchema` is the same with the `inputSchema`  which can stands for the `inputSchema` . But in the case in this PR (test case in [TestCOWDataSource](https://github.com/apache/hudi/pull/2334/files#diff-9429f5bc432f70ea4801e306dd817416b76e6ab68d41a278e222c989ce5c9824)) we write the table twice:\r\nFirst, we write a \"id: long\" to the table. The input schema is \"a:long\", the table schema is \"a:long\". \r\nSecond, we write a \"id:int\" to the table. The input schema is \"a:int\", but the table schema is \"a:long\" as the previous write. The write schema should be the same with the table schema, or else an Exception would throw out which is the problem we want to solve in this PR.\r\nSo in this case, we need to distinguish the difference between the `inputSchema` and `writeSchema`. The `inputSchema` is the incoming records's schema, but the `writeSchema` is always the `tableSchema`. \r\n\r\n- The `inputSchema` is used to parser the record from the incoming data.\r\n- The `tableSchema` is used to write and read record from the table. When we want to write or read record to the table, we use the `tableSchema`.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799071055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799088028","html_url":"https://github.com/apache/hudi/issues/2639#issuecomment-799088028","issue_url":"https://api.github.com/repos/apache/hudi/issues/2639","id":799088028,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTA4ODAyOA==","user":{"login":"maxiaoniu","id":10332342,"node_id":"MDQ6VXNlcjEwMzMyMzQy","avatar_url":"https://avatars.githubusercontent.com/u/10332342?v=4","gravatar_id":"","url":"https://api.github.com/users/maxiaoniu","html_url":"https://github.com/maxiaoniu","followers_url":"https://api.github.com/users/maxiaoniu/followers","following_url":"https://api.github.com/users/maxiaoniu/following{/other_user}","gists_url":"https://api.github.com/users/maxiaoniu/gists{/gist_id}","starred_url":"https://api.github.com/users/maxiaoniu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxiaoniu/subscriptions","organizations_url":"https://api.github.com/users/maxiaoniu/orgs","repos_url":"https://api.github.com/users/maxiaoniu/repos","events_url":"https://api.github.com/users/maxiaoniu/events{/privacy}","received_events_url":"https://api.github.com/users/maxiaoniu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T04:51:21Z","updated_at":"2021-03-15T04:51:21Z","author_association":"NONE","body":"Might be related with this\r\n```\r\nImportant\r\nAmazon EMR 6.1.0 and 6.2.0 include a performance issue that can critically affect all Hudi insert, upsert, and delete operations. If you plan to use Hudi with Amazon EMR 6.1.0 or 6.2.0, you should contact AWS support to obtain a patched Hudi RPM.\r\n```\r\nhttps://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-whatsnew.html\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799088028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799175366","html_url":"https://github.com/apache/hudi/pull/1929#issuecomment-799175366","issue_url":"https://api.github.com/repos/apache/hudi/issues/1929","id":799175366,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTE3NTM2Ng==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T07:13:20Z","updated_at":"2021-03-15T07:13:20Z","author_association":"CONTRIBUTOR","body":"@nsivabalan   This PR has been modified based on the comments，\r\nhttps://github.com/apache/hudi/pull/2666\r\nPlease review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799175366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799186819","html_url":"https://github.com/apache/hudi/pull/2374#issuecomment-799186819","issue_url":"https://api.github.com/repos/apache/hudi/issues/2374","id":799186819,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTE4NjgxOQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T07:32:57Z","updated_at":"2021-03-15T07:32:57Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Build succeeds locally and should pass on jenkins (will check tomorrow morning), ready for review. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799186819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799193044","html_url":"https://github.com/apache/hudi/pull/2666#issuecomment-799193044","issue_url":"https://api.github.com/repos/apache/hudi/issues/2666","id":799193044,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTE5MzA0NA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T07:43:50Z","updated_at":"2021-03-15T07:43:50Z","author_association":"CONTRIBUTOR","body":"The content in this pr https://github.com/apache/hudi/pull/1929 comment is resolved here, please review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799193044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799193666","html_url":"https://github.com/apache/hudi/pull/2666#issuecomment-799193666","issue_url":"https://api.github.com/repos/apache/hudi/issues/2666","id":799193666,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTE5MzY2Ng==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T07:44:54Z","updated_at":"2021-03-15T07:44:54Z","author_association":"CONTRIBUTOR","body":"@n3nash @satishkotha @yanghua  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799193666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799201945","html_url":"https://github.com/apache/hudi/issues/2652#issuecomment-799201945","issue_url":"https://api.github.com/repos/apache/hudi/issues/2652","id":799201945,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTIwMTk0NQ==","user":{"login":"shenbinglife","id":16119667,"node_id":"MDQ6VXNlcjE2MTE5NjY3","avatar_url":"https://avatars.githubusercontent.com/u/16119667?v=4","gravatar_id":"","url":"https://api.github.com/users/shenbinglife","html_url":"https://github.com/shenbinglife","followers_url":"https://api.github.com/users/shenbinglife/followers","following_url":"https://api.github.com/users/shenbinglife/following{/other_user}","gists_url":"https://api.github.com/users/shenbinglife/gists{/gist_id}","starred_url":"https://api.github.com/users/shenbinglife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenbinglife/subscriptions","organizations_url":"https://api.github.com/users/shenbinglife/orgs","repos_url":"https://api.github.com/users/shenbinglife/repos","events_url":"https://api.github.com/users/shenbinglife/events{/privacy}","received_events_url":"https://api.github.com/users/shenbinglife/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T07:59:03Z","updated_at":"2021-03-15T07:59:03Z","author_association":"NONE","body":"Thanks a lot","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799201945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799211234","html_url":"https://github.com/apache/hudi/issues/2637#issuecomment-799211234","issue_url":"https://api.github.com/repos/apache/hudi/issues/2637","id":799211234,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTIxMTIzNA==","user":{"login":"Sugamber","id":43312063,"node_id":"MDQ6VXNlcjQzMzEyMDYz","avatar_url":"https://avatars.githubusercontent.com/u/43312063?v=4","gravatar_id":"","url":"https://api.github.com/users/Sugamber","html_url":"https://github.com/Sugamber","followers_url":"https://api.github.com/users/Sugamber/followers","following_url":"https://api.github.com/users/Sugamber/following{/other_user}","gists_url":"https://api.github.com/users/Sugamber/gists{/gist_id}","starred_url":"https://api.github.com/users/Sugamber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sugamber/subscriptions","organizations_url":"https://api.github.com/users/Sugamber/orgs","repos_url":"https://api.github.com/users/Sugamber/repos","events_url":"https://api.github.com/users/Sugamber/events{/privacy}","received_events_url":"https://api.github.com/users/Sugamber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T08:13:19Z","updated_at":"2021-03-15T08:13:19Z","author_association":"NONE","body":"@nsivabalan  Yes, \r\nI have added the jar file in both driver and executor class path.\r\n`spark-submit --jars /path/lib/orders-poc-1.0.41-SNAPSHOT-shaded.jar,/path/hudi-support-jars/org.apache.avro_avro-1.8.2.jar,/path/hudi-support-jars/spark-avro_2.11-2.4.4.jar,/path/hudi-support-jars/hudi-spark-bundle_2.11-0.7.0.jar --master yarn --deploy-mode cluster --num-executors 2 --executor-cores 4 --executor-memory 8g --driver-memory=8g --queue=default --conf spark.serializer=org.apache.spark.serializer.KryoSerializer --conf spark.driver.extraClassPath=org.apache.avro_avro-1.8.2.jar:spark-avro_2.11-2.4.4.jar:hudi-spark-bundle_2.11-0.7.0.jar:/path/lib/orders-poc-1.0.41-SNAPSHOT-shaded.jar --conf spark.executor.extraClassPath=org.apache.avro_avro-1.8.2.jar:spark-avro_2.11-2.4.4.jar:hudi-spark-bundle_2.11-0.7.0.jar:/path/lib/orders-poc-1.0.41-SNAPSHOT-shaded.jar --files /path/hive-site.xml,/path/resources/hudiConf.conf --class com.app.workflows.RecordPartialUpdate lib/orders-poc-1.0.41-SNAPSHOT-shaded.jar/`\r\n\r\nI'm able to find class name in jar using linux command.\r\n`find /path/orders-poc-1.0.41-SNAPSHOT-shaded.jar|xargs grep CustomRecordUpdate\r\nBinary file /path/orders-poc-1.0.41-SNAPSHOT-shaded.jar matches`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799211234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799291092","html_url":"https://github.com/apache/hudi/pull/2674#issuecomment-799291092","issue_url":"https://api.github.com/repos/apache/hudi/issues/2674","id":799291092,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTI5MTA5Mg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T10:05:36Z","updated_at":"2021-03-15T10:10:29Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2674?src=pr&el=h1) Report\n> Merging [#2674](https://codecov.io/gh/apache/hudi/pull/2674?src=pr&el=desc) (8419357) into [master](https://codecov.io/gh/apache/hudi/commit/fc6c5f4285098d18cd7f6e81785f59e68a3b6862?el=desc) (fc6c5f4) will **increase** coverage by `0.06%`.\n> The diff coverage is `83.33%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2674/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2674?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2674      +/-   ##\n============================================\n+ Coverage     51.96%   52.03%   +0.06%     \n- Complexity     3579     3580       +1     \n============================================\n  Files           466      466              \n  Lines         22275    22294      +19     \n  Branches       2374     2374              \n============================================\n+ Hits          11576    11601      +25     \n+ Misses         9690     9685       -5     \n+ Partials       1009     1008       -1     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.01% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.46% <ø> (+0.01%)` | `0.00 <ø> (ø)` | |\n| hudiflink | `53.96% <83.33%> (+0.39%)` | `0.00 <4.00> (ø)` | |\n| hudihadoopmr | `33.44% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `69.84% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisync | `49.62% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `64.36% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.48% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2674?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...g/apache/hudi/sink/StreamWriteOperatorFactory.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zaW5rL1N0cmVhbVdyaXRlT3BlcmF0b3JGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...ache/hudi/sink/StreamWriteOperatorCoordinator.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zaW5rL1N0cmVhbVdyaXRlT3BlcmF0b3JDb29yZGluYXRvci5qYXZh) | `69.37% <20.00%> (+0.23%)` | `32.00 <0.00> (ø)` | |\n| [...in/java/org/apache/hudi/table/HoodieTableSink.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS90YWJsZS9Ib29kaWVUYWJsZVNpbmsuamF2YQ==) | `14.28% <50.00%> (-2.39%)` | `2.00 <1.00> (ø)` | |\n| [...java/org/apache/hudi/sink/StreamWriteFunction.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zaW5rL1N0cmVhbVdyaXRlRnVuY3Rpb24uamF2YQ==) | `85.04% <90.90%> (+1.04%)` | `22.00 <0.00> (ø)` | |\n| [...apache/hudi/sink/event/BatchWriteSuccessEvent.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zaW5rL2V2ZW50L0JhdGNoV3JpdGVTdWNjZXNzRXZlbnQuamF2YQ==) | `92.30% <100.00%> (+6.59%)` | `9.00 <3.00> (+1.00)` | |\n| [...java/org/apache/hudi/table/HoodieTableFactory.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS90YWJsZS9Ib29kaWVUYWJsZUZhY3RvcnkuamF2YQ==) | `76.92% <100.00%> (ø)` | `5.00 <0.00> (ø)` | |\n| [...e/hudi/common/table/log/HoodieLogFormatWriter.java](https://codecov.io/gh/apache/hudi/pull/2674/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9Ib29kaWVMb2dGb3JtYXRXcml0ZXIuamF2YQ==) | `79.68% <0.00%> (+1.56%)` | `26.00% <0.00%> (ø%)` | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799291092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799292031","html_url":"https://github.com/apache/hudi/pull/2650#issuecomment-799292031","issue_url":"https://api.github.com/repos/apache/hudi/issues/2650","id":799292031,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTI5MjAzMQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T10:06:51Z","updated_at":"2021-03-15T10:06:51Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2650?src=pr&el=h1) Report\n> Merging [#2650](https://codecov.io/gh/apache/hudi/pull/2650?src=pr&el=desc) (1a5cb70) into [master](https://codecov.io/gh/apache/hudi/commit/899ae70fdb70c1511c099a64230fd91b2fe8d4ee?el=desc) (899ae70) will **increase** coverage by `0.39%`.\n> The diff coverage is `0.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2650/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2650?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #2650      +/-   ##\n============================================\n+ Coverage     51.58%   51.97%   +0.39%     \n- Complexity     3285     3579     +294     \n============================================\n  Files           446      466      +20     \n  Lines         20409    22275    +1866     \n  Branches       2116     2374     +258     \n============================================\n+ Hits          10528    11578    +1050     \n- Misses         9003     9689     +686     \n- Partials        878     1008     +130     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.01% <ø> (+0.14%)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.46% <0.00%> (+0.04%)` | `0.00 <0.00> (ø)` | |\n| hudiflink | `53.57% <ø> (+2.28%)` | `0.00 <ø> (ø)` | |\n| hudihadoopmr | `33.44% <ø> (+0.28%)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `69.84% <ø> (+0.17%)` | `0.00 <ø> (ø)` | |\n| hudisync | `49.62% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `64.36% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.48% <ø> (+0.04%)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2650?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../apache/hudi/common/table/TableSchemaResolver.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL1RhYmxlU2NoZW1hUmVzb2x2ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...pache/hudi/common/table/HoodieTableMetaClient.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL0hvb2RpZVRhYmxlTWV0YUNsaWVudC5qYXZh) | `68.31% <0.00%> (-2.46%)` | `43.00% <0.00%> (-1.00%)` | |\n| [...i/common/table/timeline/HoodieDefaultTimeline.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL0hvb2RpZURlZmF1bHRUaW1lbGluZS5qYXZh) | `82.66% <0.00%> (-2.27%)` | `59.00% <0.00%> (ø%)` | |\n| [...che/hudi/common/table/log/HoodieLogFileReader.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9Ib29kaWVMb2dGaWxlUmVhZGVyLmphdmE=) | `66.09% <0.00%> (-1.77%)` | `23.00% <0.00%> (+1.00%)` | :arrow_down: |\n| [.../hadoop/utils/HoodieRealtimeRecordReaderUtils.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3V0aWxzL0hvb2RpZVJlYWx0aW1lUmVjb3JkUmVhZGVyVXRpbHMuamF2YQ==) | `71.79% <0.00%> (-1.25%)` | `30.00% <0.00%> (ø%)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `70.34% <0.00%> (-0.37%)` | `53.00% <0.00%> (+1.00%)` | :arrow_down: |\n| [...ies/sources/helpers/DatePartitionPathSelector.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9EYXRlUGFydGl0aW9uUGF0aFNlbGVjdG9yLmphdmE=) | `54.68% <0.00%> (-0.16%)` | `13.00% <0.00%> (ø%)` | |\n| [...src/main/java/org/apache/hudi/sink/CommitSink.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9zaW5rL0NvbW1pdFNpbmsuamF2YQ==) | `0.00% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [.../org/apache/hudi/util/RowDataToAvroConverters.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS91dGlsL1Jvd0RhdGFUb0F2cm9Db252ZXJ0ZXJzLmphdmE=) | `42.05% <0.00%> (ø)` | `8.00% <0.00%> (ø%)` | |\n| [...che/hudi/common/table/timeline/HoodieTimeline.java](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL0hvb2RpZVRpbWVsaW5lLmphdmE=) | `91.30% <0.00%> (ø)` | `44.00% <0.00%> (ø%)` | |\n| ... and [74 more](https://codecov.io/gh/apache/hudi/pull/2650/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799292031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799469658","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-799469658","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":799469658,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTQ2OTY1OA==","user":{"login":"shivabansal1046","id":25811833,"node_id":"MDQ6VXNlcjI1ODExODMz","avatar_url":"https://avatars.githubusercontent.com/u/25811833?v=4","gravatar_id":"","url":"https://api.github.com/users/shivabansal1046","html_url":"https://github.com/shivabansal1046","followers_url":"https://api.github.com/users/shivabansal1046/followers","following_url":"https://api.github.com/users/shivabansal1046/following{/other_user}","gists_url":"https://api.github.com/users/shivabansal1046/gists{/gist_id}","starred_url":"https://api.github.com/users/shivabansal1046/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivabansal1046/subscriptions","organizations_url":"https://api.github.com/users/shivabansal1046/orgs","repos_url":"https://api.github.com/users/shivabansal1046/repos","events_url":"https://api.github.com/users/shivabansal1046/events{/privacy}","received_events_url":"https://api.github.com/users/shivabansal1046/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T14:34:56Z","updated_at":"2021-03-15T14:34:56Z","author_association":"NONE","body":"Hi,\r\n\r\nBelow are the configs I am using\r\n.write\r\n      .format(\"org.apache.hudi\").\r\n      options(getQuickstartWriteConfigs).\r\n      option(TABLE_TYPE_OPT_KEY, \"MERGE_ON_READ\").\r\n      option(OPERATION_OPT_KEY, \"INSERT\").\r\n      option(PRECOMBINE_FIELD_OPT_KEY, \"last_update_time\").\r\n      option(RECORDKEY_FIELD_OPT_KEY, \"id\").\r\n      option(PARTITIONPATH_FIELD_OPT_KEY, \"creation_date\").\r\n      option(TABLE_NAME, \"my_hudi_table\")\r\n      .mode(SaveMode.Append)\r\n      .save(args(1))\r\n\r\nAnd to your other question, I already have record in HUDI, and during another run its overwriting the record with record having same key. With insert option I am expecting it should simply insert new record without checking if record with same key is present or not.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799469658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799494981","html_url":"https://github.com/apache/hudi/pull/2666#issuecomment-799494981","issue_url":"https://api.github.com/repos/apache/hudi/issues/2666","id":799494981,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTQ5NDk4MQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:07:11Z","updated_at":"2021-03-15T15:07:11Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 : Thanks for the contribution. There are 2 to 3 PRs with similar goal. Did you get happen to check out existing ones before putting this up? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799494981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799497945","html_url":"https://github.com/apache/hudi/pull/2673#issuecomment-799497945","issue_url":"https://api.github.com/repos/apache/hudi/issues/2673","id":799497945,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTQ5Nzk0NQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:11:14Z","updated_at":"2021-03-15T15:11:31Z","author_association":"CONTRIBUTOR","body":"@xiarixiaoyao : thanks for your contribution. Were you able to test out the fix in your env. That subsequent writes don't incur OOMs.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799497945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799507450","html_url":"https://github.com/apache/hudi/pull/2619#issuecomment-799507450","issue_url":"https://api.github.com/repos/apache/hudi/issues/2619","id":799507450,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUwNzQ1MA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:23:12Z","updated_at":"2021-03-15T15:23:12Z","author_association":"CONTRIBUTOR","body":"@vburenin : Did you get a chance to work on this PR. We would like to have this in before our next release. If you are strapped for time, let me know. I will try to squeeze in sometime this week. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799507450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799511127","html_url":"https://github.com/apache/hudi/pull/2438#issuecomment-799511127","issue_url":"https://api.github.com/repos/apache/hudi/issues/2438","id":799511127,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUxMTEyNw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:27:38Z","updated_at":"2021-03-15T15:27:38Z","author_association":"CONTRIBUTOR","body":"hey folks. may I know what's the status of this PR. I see this could benefit others in the community as well. Do you think we can take it across the finish line by this weekend. so that we have it for upcoming release? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799511127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799511860","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-799511860","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":799511860,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUxMTg2MA==","user":{"login":"pengzhiwei2018","id":42458891,"node_id":"MDQ6VXNlcjQyNDU4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/42458891?v=4","gravatar_id":"","url":"https://api.github.com/users/pengzhiwei2018","html_url":"https://github.com/pengzhiwei2018","followers_url":"https://api.github.com/users/pengzhiwei2018/followers","following_url":"https://api.github.com/users/pengzhiwei2018/following{/other_user}","gists_url":"https://api.github.com/users/pengzhiwei2018/gists{/gist_id}","starred_url":"https://api.github.com/users/pengzhiwei2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengzhiwei2018/subscriptions","organizations_url":"https://api.github.com/users/pengzhiwei2018/orgs","repos_url":"https://api.github.com/users/pengzhiwei2018/repos","events_url":"https://api.github.com/users/pengzhiwei2018/events{/privacy}","received_events_url":"https://api.github.com/users/pengzhiwei2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:28:34Z","updated_at":"2021-03-15T15:28:34Z","author_association":"NONE","body":"Hi @shivabansal1046 , currently hudi would do the insert operator when you have specified a rowkey for insert. You can use `UuidKeyGenKeyGenerator` as the row key to walk around this.\r\n\r\nFirst define a `UuidKeyGenKeyGenerator` class.\r\n> \r\nclass UuidKeyGenKeyGenerator(props: TypedProperties) extends ComplexKeyGenerator(props) {\r\n\r\n    override def getRecordKey(record: GenericRecord): String = {\r\n      UUID.randomUUID().toString\r\n    }\r\n  }\r\n\r\nThen config the `DataSourceWriteOptions#KEYGENERATOR_CLASS_OPT_KEY` to `classOf[UuidKeyGenKeyGenerator]`.\r\nYou can have a try , hope it can help you~\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799511860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799512747","html_url":"https://github.com/apache/hudi/pull/2438#issuecomment-799512747","issue_url":"https://api.github.com/repos/apache/hudi/issues/2438","id":799512747,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUxMjc0Nw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:29:41Z","updated_at":"2021-03-15T15:29:41Z","author_association":"CONTRIBUTOR","body":"no problem\r\n\r\n\r\n\r\n\r\n\r\n------------------ Original ------------------\r\nFrom: Sivabalan Narayanan ***@***.***&gt;\r\nDate: Mon,Mar 15,2021 11:28 PM\r\nTo: apache/hudi ***@***.***&gt;\r\nCc: liujinhui ***@***.***&gt;, Mention ***@***.***&gt;\r\nSubject: Re: [apache/hudi] [HUDI-1447] DeltaStreamer kafka source supports consuming from specified timestamp (#2438)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799512747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799525731","html_url":"https://github.com/apache/hudi/pull/2619#issuecomment-799525731","issue_url":"https://api.github.com/repos/apache/hudi/issues/2619","id":799525731,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUyNTczMQ==","user":{"login":"vburenin","id":4350891,"node_id":"MDQ6VXNlcjQzNTA4OTE=","avatar_url":"https://avatars.githubusercontent.com/u/4350891?v=4","gravatar_id":"","url":"https://api.github.com/users/vburenin","html_url":"https://github.com/vburenin","followers_url":"https://api.github.com/users/vburenin/followers","following_url":"https://api.github.com/users/vburenin/following{/other_user}","gists_url":"https://api.github.com/users/vburenin/gists{/gist_id}","starred_url":"https://api.github.com/users/vburenin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vburenin/subscriptions","organizations_url":"https://api.github.com/users/vburenin/orgs","repos_url":"https://api.github.com/users/vburenin/repos","events_url":"https://api.github.com/users/vburenin/events{/privacy}","received_events_url":"https://api.github.com/users/vburenin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:46:36Z","updated_at":"2021-03-15T15:46:36Z","author_association":"CONTRIBUTOR","body":"@nsivabalan I am very strapped by time. I will be able get back to it only next Q. The overall change is trivial. If you could continue, it would be great. As soon as this one is done, I will publish another PR for SchemaRegistryProvider.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799525731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799528507","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-799528507","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":799528507,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTUyODUwNw==","user":{"login":"shivabansal1046","id":25811833,"node_id":"MDQ6VXNlcjI1ODExODMz","avatar_url":"https://avatars.githubusercontent.com/u/25811833?v=4","gravatar_id":"","url":"https://api.github.com/users/shivabansal1046","html_url":"https://github.com/shivabansal1046","followers_url":"https://api.github.com/users/shivabansal1046/followers","following_url":"https://api.github.com/users/shivabansal1046/following{/other_user}","gists_url":"https://api.github.com/users/shivabansal1046/gists{/gist_id}","starred_url":"https://api.github.com/users/shivabansal1046/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivabansal1046/subscriptions","organizations_url":"https://api.github.com/users/shivabansal1046/orgs","repos_url":"https://api.github.com/users/shivabansal1046/repos","events_url":"https://api.github.com/users/shivabansal1046/events{/privacy}","received_events_url":"https://api.github.com/users/shivabansal1046/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T15:50:16Z","updated_at":"2021-03-15T15:50:16Z","author_association":"NONE","body":"Hi pengzhiwei2018,\r\n\r\nAre you suggesting to add extra column which is generated key?\r\nIs this workaround or this is how it should be?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799528507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799571386","html_url":"https://github.com/apache/hudi/pull/2438#issuecomment-799571386","issue_url":"https://api.github.com/repos/apache/hudi/issues/2438","id":799571386,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTU3MTM4Ng==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T16:46:08Z","updated_at":"2021-03-15T16:46:54Z","author_association":"CONTRIBUTOR","body":"Thanks for your contribution. this is going to be useful to the community. \r\nFew high level questions.\r\n1. Why not we leverage DeltaSreamerConfig.checkpoint to pass in a timestamp for Kafka source? Or do we expect the format of this config to be \"topic_name,partition_num:offset,partition_num:offset,....\" and hence we need a new config for timestamp based checkpoint. \r\n2. If yes to (1), Did we think about parsing the checkpoint config and determining whether its above format or timestamp and then proceeding from there. Just trying to avoid introducing new configs if possible. \r\n3. Checkpoint in deltastreamer in general is getting too complicated. I definitely see a benefit in this patch. But, is there a way we can abstract it out based on source. Bcoz, the new config introduced as part of this PR, is very specific to Kafka. So, trying to see if we can keep it abstracted out from deltastreamer if possible. \r\n4. I see KafkaConsumer.offsetsForTimes() could return null for partitions w/ msgs of old format. So, what's the expected behavior for such partitions. Do we resume from earliest offset? \r\n\r\n@n3nash @vinothchandar : open to hear your thoughts if any. One of my suggestion above, could potentially add apis to Source and hence CCing you. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799571386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799740584","html_url":"https://github.com/apache/hudi/pull/2494#issuecomment-799740584","issue_url":"https://api.github.com/repos/apache/hudi/issues/2494","id":799740584,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTc0MDU4NA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T20:46:47Z","updated_at":"2021-03-15T20:46:47Z","author_association":"MEMBER","body":"Looks good @vinothchandar ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799740584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799814201","html_url":"https://github.com/apache/hudi/pull/2679#issuecomment-799814201","issue_url":"https://api.github.com/repos/apache/hudi/issues/2679","id":799814201,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTgxNDIwMQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T23:07:57Z","updated_at":"2021-03-15T23:07:57Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2679?src=pr&el=h1) Report\n> Merging [#2679](https://codecov.io/gh/apache/hudi/pull/2679?src=pr&el=desc) (818439b) into [master](https://codecov.io/gh/apache/hudi/commit/3b36cb805d066a3112e3a355ef502dbe4b2c1824?el=desc) (3b36cb8) will **increase** coverage by `17.44%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2679/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2679?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #2679       +/-   ##\n=============================================\n+ Coverage     51.98%   69.43%   +17.44%     \n+ Complexity     3580      363     -3217     \n=============================================\n  Files           466       53      -413     \n  Lines         22318     1963    -20355     \n  Branches       2377      235     -2142     \n=============================================\n- Hits          11603     1363    -10240     \n+ Misses         9706      466     -9240     \n+ Partials       1009      134      -875     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `?` | `?` | |\n| hudiclient | `?` | `?` | |\n| hudicommon | `?` | `?` | |\n| hudiflink | `?` | `?` | |\n| hudihadoopmr | `?` | `?` | |\n| hudisparkdatasource | `?` | `?` | |\n| hudisync | `?` | `?` | |\n| huditimelineservice | `?` | `?` | |\n| hudiutilities | `69.43% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/2679?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...di/utilities/sources/helpers/IncrSourceHelper.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvaGVscGVycy9JbmNyU291cmNlSGVscGVyLmphdmE=) | `54.54% <ø> (ø)` | `4.00 <0.00> (ø)` | |\n| [...he/hudi/common/model/BootstrapBaseFileMapping.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0Jvb3RzdHJhcEJhc2VGaWxlTWFwcGluZy5qYXZh) | | | |\n| [...n/java/org/apache/hudi/internal/DefaultSource.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay1kYXRhc291cmNlL2h1ZGktc3BhcmsyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9odWRpL2ludGVybmFsL0RlZmF1bHRTb3VyY2UuamF2YQ==) | | | |\n| [...java/org/apache/hudi/table/format/FormatUtils.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1mbGluay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS90YWJsZS9mb3JtYXQvRm9ybWF0VXRpbHMuamF2YQ==) | | | |\n| [...a/org/apache/hudi/common/util/CompactionUtils.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvQ29tcGFjdGlvblV0aWxzLmphdmE=) | | | |\n| [...ache/hudi/hadoop/utils/HoodieInputFormatUtils.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3V0aWxzL0hvb2RpZUlucHV0Rm9ybWF0VXRpbHMuamF2YQ==) | | | |\n| [...ache/hudi/common/table/timeline/TimelineUtils.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL1RpbWVsaW5lVXRpbHMuamF2YQ==) | | | |\n| [.../hudi/common/util/collection/LazyFileIterable.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvY29sbGVjdGlvbi9MYXp5RmlsZUl0ZXJhYmxlLmphdmE=) | | | |\n| [...ava/org/apache/hudi/cli/commands/TableCommand.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL1RhYmxlQ29tbWFuZC5qYXZh) | | | |\n| [...org/apache/hudi/hadoop/HoodieHFileInputFormat.java](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL0hvb2RpZUhGaWxlSW5wdXRGb3JtYXQuamF2YQ==) | | | |\n| ... and [404 more](https://codecov.io/gh/apache/hudi/pull/2679/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799814201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799888195","html_url":"https://github.com/apache/hudi/issues/2656#issuecomment-799888195","issue_url":"https://api.github.com/repos/apache/hudi/issues/2656","id":799888195,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTg4ODE5NQ==","user":{"login":"pengzhiwei2018","id":42458891,"node_id":"MDQ6VXNlcjQyNDU4ODkx","avatar_url":"https://avatars.githubusercontent.com/u/42458891?v=4","gravatar_id":"","url":"https://api.github.com/users/pengzhiwei2018","html_url":"https://github.com/pengzhiwei2018","followers_url":"https://api.github.com/users/pengzhiwei2018/followers","following_url":"https://api.github.com/users/pengzhiwei2018/following{/other_user}","gists_url":"https://api.github.com/users/pengzhiwei2018/gists{/gist_id}","starred_url":"https://api.github.com/users/pengzhiwei2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengzhiwei2018/subscriptions","organizations_url":"https://api.github.com/users/pengzhiwei2018/orgs","repos_url":"https://api.github.com/users/pengzhiwei2018/repos","events_url":"https://api.github.com/users/pengzhiwei2018/events{/privacy}","received_events_url":"https://api.github.com/users/pengzhiwei2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T02:09:39Z","updated_at":"2021-03-16T02:09:39Z","author_association":"NONE","body":"Hi @shivabansal1046 , no need to add a extra column,  just set `DataSourceWriteOptions#KEYGENERATOR_CLASS_OPT_KEY` to `classOf[UuidKeyGenKeyGenerator]` which generate a uuid key.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799888195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799905602","html_url":"https://github.com/apache/hudi/pull/2673#issuecomment-799905602","issue_url":"https://api.github.com/repos/apache/hudi/issues/2673","id":799905602,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTkwNTYwMg==","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T02:59:44Z","updated_at":"2021-03-16T02:59:44Z","author_association":"CONTRIBUTOR","body":"@nsivabalan  yes， since the problem of company information security, i cannot paste screenshot of test result and dump.\r\nbefore fix\r\nenv:  (executor 4 core 8G)*50\r\nstep1: merge(df, 800  , \"hudikey\", \"testOOM\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")   time cost: 616s\r\nstep2: merge(df, 800  , \"hudikey\", \"testOOM1\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 710s\r\nstep3: merge(df, 800  , \"hudikey\", \"testOOM2\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 676s\r\nstep4: merge(df, 800  , \"hudikey\", \"testOOM3\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 1077s\r\nstep5: merge(df, 800  , \"hudikey\", \"testOOM4\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 1154s\r\nstep6: merge(df, 800  , \"hudikey\", \"testOOM5\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 2055s (some executor oom)\r\n\r\n\r\nAnalysis dump: we find More than 90 percent of memory is consumed by cached rdd\r\n\r\nafter fix\r\nstep1: merge(df, 800  , \"hudikey\", \"testOOM\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")   time cost: 632s\r\nstep2: merge(df, 800  , \"hudikey\", \"testOOM1\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 710s\r\nstep3: merge(df, 800  , \"hudikey\", \"testOOM2\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 698s\r\nstep4: merge(df, 800  , \"hudikey\", \"testOOM3\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 723s\r\nstep5: merge(df, 800  , \"hudikey\", \"testOOM4\", DataSourceWriteOptions.COW_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 616s\r\nstep6: merge(df, 800  , \"hudikey\", \"testOOM5\", DataSourceWriteOptions.MOR_TABLE_TYPE_OPT_VAL, op = \"insert\")  time cost: 703s\r\n\r\nOne last point， when we cached some rdds， we should uncache those rdds timely once those rdds are not used。 spark can uncached rdds automaticly but this process is uncertain。","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/799905602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800020976","html_url":"https://github.com/apache/hudi/issues/2680#issuecomment-800020976","issue_url":"https://api.github.com/repos/apache/hudi/issues/2680","id":800020976,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDAyMDk3Ng==","user":{"login":"ztcheck","id":59900649,"node_id":"MDQ6VXNlcjU5OTAwNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/59900649?v=4","gravatar_id":"","url":"https://api.github.com/users/ztcheck","html_url":"https://github.com/ztcheck","followers_url":"https://api.github.com/users/ztcheck/followers","following_url":"https://api.github.com/users/ztcheck/following{/other_user}","gists_url":"https://api.github.com/users/ztcheck/gists{/gist_id}","starred_url":"https://api.github.com/users/ztcheck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ztcheck/subscriptions","organizations_url":"https://api.github.com/users/ztcheck/orgs","repos_url":"https://api.github.com/users/ztcheck/repos","events_url":"https://api.github.com/users/ztcheck/events{/privacy}","received_events_url":"https://api.github.com/users/ztcheck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T07:23:38Z","updated_at":"2021-04-07T09:46:03Z","author_association":"NONE","body":"My environment is k8s.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800020976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800041509","html_url":"https://github.com/apache/hudi/pull/2681#issuecomment-800041509","issue_url":"https://api.github.com/repos/apache/hudi/issues/2681","id":800041509,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDA0MTUwOQ==","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T07:58:41Z","updated_at":"2021-03-16T07:58:41Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/7644508/111274799-642c0e00-8670-11eb-87b0-dcf6bbee0acd.png)\r\nI want to collapse these two items but don't know how to, can someone give some help here ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800041509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800243025","html_url":"https://github.com/apache/hudi/pull/2683#issuecomment-800243025","issue_url":"https://api.github.com/repos/apache/hudi/issues/2683","id":800243025,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDI0MzAyNQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T13:07:23Z","updated_at":"2021-03-16T13:13:54Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/2683?src=pr&el=h1) Report\n> Merging [#2683](https://codecov.io/gh/apache/hudi/pull/2683?src=pr&el=desc) (f738c7c) into [release-0.7.0](https://codecov.io/gh/apache/hudi/commit/04731916a5dd782c1f1f248f85085245a4c7ee7d?el=desc) (0473191) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/2683/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/2683?src=pr&el=tree)\n\n```diff\n@@               Coverage Diff                @@\n##             release-0.7.0    #2683   +/-   ##\n================================================\n  Coverage            50.27%   50.27%           \n  Complexity            3051     3051           \n================================================\n  Files                  419      419           \n  Lines                18897    18897           \n  Branches              1937     1937           \n================================================\n  Hits                  9501     9501           \n  Misses                8622     8622           \n  Partials               774      774           \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| hudicli | `37.21% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiclient | `100.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudicommon | `51.49% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiflink | `0.00% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudihadoopmr | `33.16% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisparkdatasource | `65.85% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudisync | `48.61% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| huditimelineservice | `66.49% <ø> (ø)` | `0.00 <ø> (ø)` | |\n| hudiutilities | `69.48% <ø> (ø)` | `0.00 <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800243025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800338813","html_url":"https://github.com/apache/hudi/pull/2684#issuecomment-800338813","issue_url":"https://api.github.com/repos/apache/hudi/issues/2684","id":800338813,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDMzODgxMw==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T15:03:09Z","updated_at":"2021-03-16T15:03:09Z","author_association":"CONTRIBUTOR","body":"@peng-xin IMO, you just need to keep one PR, close this one, and remain #2683 . wdyt?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/800338813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]