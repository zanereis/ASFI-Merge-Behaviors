[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304547589","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304547589","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304547589,"node_id":"IC_kwDOACaFSM5NwdEF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T13:32:16Z","updated_at":"2022-11-05T13:35:46Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - You are right that it may not be a complete set. In fact the Google eclipse XML I found is almost 5 years old at this point so it may not have everything.\r\n\r\nAs you pointed out, we probably don't diverge too much but there are a few things that are different that I will point out below that would be nice to change. I had figured starting with the Google style guide as a base would be easiest but now I'm thinking maybe not since it's out of date. With your update to the latest format in #3066 I'm thinking it's actually easiest to just tweak that file with things we want to change.\r\n\r\nI have used Intellij the last couple of years but I used to use Eclipse for a long time so it wouldn't be too hard for me to download Eclipse again to make changes and work with you to do it (or if you wanted to do it that's fine, either way). Assuming we want to just start with our file as the basis (which I think makes sense now as stated), the main thing would be going through and figuring out what to modify to match. If you want I can grab Eclipse and try and tweak our current file to make some or all of the changes so that it's easier to compare instead of starting with the Google one. I can start from the new commit added in main in #3066 and then just redo everything and force push up. What do you think?\r\n\r\nI went through the diff briefly and noticed the following main things. There's probably more changes but these seemed to be the main ones that took up most of the diff.\r\n\r\n1. The number one thing of course is always requiring braces on control statements. I think this is hugely important not just for readability but for error prevention. It's easy to make mistakes inadvertently in the code if you don't require braces for single line control statements. Part of this is actually an errorpone change to require braces. The formatter will format the braces if they are there but doesn't add it. I had to actually use Intellij to add these and then turn on errorprone to fail if they are missing.\r\n2. Spacing after a comma with Generics. Our current format looks like `Iterator<Entry<Key,Value>> iterator();` and the new format looks like `Iterator<Entry<Key, Value>> iterator();` which I prefer.\r\n3. Control statement alignment, which we could change but I'm ok either way.  A couple of examples:\r\n```\r\n //Our current format\r\n  if (tLists.unassigned.size() + unloaded\r\n      > Manager.MAX_TSERVER_WORK_CHUNK * currentTServers.size()) {\r\n\r\n //Updated Google format\r\n  if (tLists.unassigned.size() + unloaded > Manager.MAX_TSERVER_WORK_CHUNK\r\n      * currentTServers.size()) {\r\n```\r\n\r\n```\r\n  //Our current format\r\n  if (manager.getSteadyTime() - tls.suspend.suspensionTime\r\n      < tableConf.getTimeInMillis(Property.TABLE_SUSPEND_DURATION)) {\r\n\r\n //Updated Google format\r\n  if (manager.getSteadyTime() - tls.suspend.suspensionTime < tableConf\r\n      .getTimeInMillis(Property.TABLE_SUSPEND_DURATION)) {\r\n```\r\n4. Some other line length changes.\r\n\r\n```\r\n  //Current format\r\n  public TabletServers getParticipatingTabletServers(@PathParam(\"tableId\") @NotNull @Pattern(\r\n      regexp = ALPHA_NUM_REGEX_TABLE_ID) String tableIdStr) {\r\n\r\n  //Google format\r\n  public TabletServers getParticipatingTabletServers(@PathParam(\"tableId\") @NotNull\r\n  @Pattern(regexp = ALPHA_NUM_REGEX_TABLE_ID) String tableIdStr) {\r\n```\r\n5. Javadoc changes to move variable comments to the same line\r\n\r\n```\r\n   //Current format\r\n   * @param key\r\n   *          Same restrictions on key as {@link #append(Key, Value)}.\r\n   * @param value\r\n   *          this parameter will be UTF-8 encoded. Must be non-null.\r\n   \r\n   //Google format\r\n   * @param key Same restrictions on key as {@link #append(Key, Value)}.\r\n   * @param value this parameter will be UTF-8 encoded. Must be non-null.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304547589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304553762","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304553762","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304553762,"node_id":"IC_kwDOACaFSM5Nweki","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T14:10:45Z","updated_at":"2022-11-05T14:10:45Z","author_association":"MEMBER","body":"I think some of those differences (especially the line-wrapping ones) are due to the missing items from the old Google config. I'll see if I can import/export/update the Google config, so we have an updated version to compare with.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304553762/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304555822","html_url":"https://github.com/apache/accumulo/issues/3023#issuecomment-1304555822","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3023","id":1304555822,"node_id":"IC_kwDOACaFSM5NwfEu","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T14:19:56Z","updated_at":"2022-11-05T14:20:38Z","author_association":"CONTRIBUTOR","body":"I started looking into this and there are 3 places where the stack traces are showing up, two of them in `FileCompactor` when `FileSKVWriter` is closed and 1 in `Compactor`. \r\n\r\nIn `Compactor`, I think we can definitely handle that by just catching the `CompactionCanceledException` and logging the message as a debug instead of error and full stack trace. We could log it as info but there's already info messages indicating the compaction is going to be cancelled before cancel is called on the JOB_HOLDER. This also is in line with the existing behavior of CompactableImpl.  https://github.com/apache/accumulo/blob/d5a35f2f59bf6c35369f1032189812f98021e3d2/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L1292-L1293\r\n\r\nFor the other two cases where errors are logged it's a bit tricky. There's no guarantee that the errors causing the file writer to fail closing are related to compaction being cancelled and could be another serious issue. I do think that logging the entire stack trace is a bit verbose either way and at the very least maybe only log the error message and keep the stack trace at debug level.\r\n\r\nI will submit a PR shortly with the proposed logging changes and then can discuss if the logging level changes makes sense or not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304555822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304560557","html_url":"https://github.com/apache/accumulo/issues/3005#issuecomment-1304560557","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3005","id":1304560557,"node_id":"IC_kwDOACaFSM5NwgOt","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T14:48:21Z","updated_at":"2022-11-05T14:48:21Z","author_association":"CONTRIBUTOR","body":"@EdColeman - This is an interesting idea. So to make sure I understand correctly the goal here would be to:\r\n\r\n1. Read any properties to update directly from Zookeeper without going through the cache.\r\n2. Update the properties directly in zookeeper without modifying the cache.\r\n3. Any values not already cached won't be added but anything that was cached would be reloaded on future cache reads because entries that had been cached but just were updated in ZK would be invalided since we listen to the ZK events and get notified of the update.\r\n\r\nAssuming I have that correct that seems reasonable to me. Making sure to read/update to ZK directly makes sense for updates as caching should primarily exist for making reads fast. Updates are generally not going to happen too often under normal conditions for properties so making sure to update directly to ZK and leaving the caching for the read use case primarily for performance makes sense.\r\n\r\nDo I have that correct? I can poke around this a bit when I have some time and see what kind of changes would be involved and the impact of the change if you haven't looked at it yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304560557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304577397","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304577397","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304577397,"node_id":"IC_kwDOACaFSM5NwkV1","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T16:25:00Z","updated_at":"2022-11-05T16:25:00Z","author_association":"MEMBER","body":"I updated the Google Style config by merely importing and exporting, and here's a minimal diff:\r\n\r\n<details>\r\n<summary>Toggle to view/hide the diff</summary>\r\n\r\n```diff\r\n--- contrib/eclipse-java-google-style.xml\t2022-11-05 12:00:13.653100277 -0400\r\n+++ contrib/eclipse-updated-java-google-style.xml\t2022-11-05 11:59:55.752138231 -0400\r\n@@ -22,8 +22,5 @@\r\n-<profiles version=\"13\">\r\n-    <profile kind=\"CodeFormatterProfile\" name=\"GoogleStyle\" version=\"13\">\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.codegen.inlineJsrBytecode\" value=\"enabled\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.codegen.targetPlatform\" value=\"1.7\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.compliance\" value=\"1.7\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.problem.assertIdentifier\" value=\"error\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.problem.enumIdentifier\" value=\"error\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.compiler.source\" value=\"1.7\"/>\r\n+<profiles version=\"22\">\r\n+    <profile kind=\"CodeFormatterProfile\" name=\"GoogleStyle\" version=\"22\">\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.align_assignment_statements_on_columns\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.align_fields_grouping_blank_lines\" value=\"2147483647\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.align_selector_in_method_invocation_on_expression_first_line\" value=\"false\"/>\r\n@@ -31,12 +28,10 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_field\" value=\"1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_field.count_dependent\" value=\"1585|-1|1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_local_variable\" value=\"1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_local_variable.count_dependent\" value=\"1585|-1|1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_method\" value=\"1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_method.count_dependent\" value=\"1585|-1|1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_package\" value=\"1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_package.count_dependent\" value=\"1585|-1|1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_parameter\" value=\"1040\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_parameter.count_dependent\" value=\"1040|-1|1040\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_type\" value=\"1585\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_type.count_dependent\" value=\"1585|-1|1585\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.align_variable_declarations_on_columns\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.align_with_spaces\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_additive_operator\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_enum_constant\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_field\" value=\"49\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_local_variable\" value=\"49\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_method\" value=\"49\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_package\" value=\"49\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_parameter\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_annotations_on_type\" value=\"49\"/>\r\n@@ -44 +38,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_allocation_expression.count_dependent\" value=\"16|5|80\"/>\r\n@@ -46 +39,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_annotation.count_dependent\" value=\"16|-1|16\"/>\r\n@@ -48 +40,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_enum_constant.count_dependent\" value=\"16|-1|16\"/>\r\n@@ -50 +41,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_explicit_constructor_call.count_dependent\" value=\"16|5|80\"/>\r\n@@ -52 +42,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_method_invocation.count_dependent\" value=\"16|5|80\"/>\r\n@@ -54 +44 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_arguments_in_qualified_allocation_expression.count_dependent\" value=\"16|4|80\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_assertion_message\" value=\"0\"/>\r\n@@ -56,4 +46 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_binary_expression\" value=\"16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_binary_expression.count_dependent\" value=\"16|-1|16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_cascading_method_invocation_with_arguments\" value=\"16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_cascading_method_invocation_with_arguments.count_dependent\" value=\"16|-1|16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_bitwise_operator\" value=\"16\"/>\r\n@@ -60,0 +48 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_compact_loops\" value=\"16\"/>\r\n@@ -61,0 +50 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_conditional_expression_chain\" value=\"0\"/>\r\n@@ -63 +51,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_enum_constants.count_dependent\" value=\"16|5|48\"/>\r\n@@ -65,6 +53,4 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_expressions_in_array_initializer.count_dependent\" value=\"16|5|80\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_field_declaration\" value=\"16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_for_statement\" value=\"16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_generic_type_arguments\" value=\"16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_generic_type_arguments.count_dependent\" value=\"16|-1|16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_local_variable_declaration\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_expressions_in_for_loop_header\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_expressions_in_switch_case_with_arrow\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_expressions_in_switch_case_with_colon\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_logical_operator\" value=\"16\"/>\r\n@@ -71,0 +58 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_module_statements\" value=\"16\"/>\r\n@@ -73,2 +60,2 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_multiple_fields.count_dependent\" value=\"16|-1|16\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_new_anonymous_class\" value=\"20\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_multiplicative_operator\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_parameterized_type_references\" value=\"0\"/>\r\n@@ -76 +62,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_parameters_in_constructor_declaration.count_dependent\" value=\"16|5|80\"/>\r\n@@ -78 +64,2 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_parameters_in_method_declaration.count_dependent\" value=\"16|5|80\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_record_components\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_relational_operator\" value=\"0\"/>\r\n@@ -81 +68,2 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_selector_in_method_invocation.count_dependent\" value=\"16|4|48\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_shift_operator\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_string_concatenation\" value=\"16\"/>\r\n@@ -84 +72 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_enum_declaration.count_dependent\" value=\"16|4|49\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_record_declaration\" value=\"16\"/>\r\n@@ -86 +74 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_type_declaration.count_dependent\" value=\"16|4|48\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_switch_case_with_arrow\" value=\"0\"/>\r\n@@ -88 +75,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_constructor_declaration.count_dependent\" value=\"16|4|48\"/>\r\n@@ -90 +77,3 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_method_declaration.count_dependent\" value=\"16|4|48\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_type_annotations\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_type_arguments\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_type_parameters\" value=\"0\"/>\r\n@@ -92,0 +82 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_after_last_class_body_declaration\" value=\"0\"/>\r\n@@ -93,0 +84 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_abstract_method\" value=\"1\"/>\r\n@@ -101,0 +93 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_statement_group_in_switch\" value=\"0\"/>\r\n@@ -110,0 +103 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.brace_position_for_lambda_body\" value=\"end_of_line\"/>\r\n@@ -111,0 +105,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.brace_position_for_record_constructor\" value=\"end_of_line\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.brace_position_for_record_declaration\" value=\"end_of_line\"/>\r\n@@ -113,0 +109,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.align_tags_descriptions_grouped\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.align_tags_names_descriptions\" value=\"false\"/>\r\n@@ -115,0 +113 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.count_line_length_from_starting_position\" value=\"true\"/>\r\n@@ -123,0 +122 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.indent_tag_description\" value=\"false\"/>\r\n@@ -124,0 +124 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.insert_new_line_between_different_tags\" value=\"do not insert\"/>\r\n@@ -130 +129,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.comment_new_line_at_start_of_html_paragraph\" value=\"true\"/>\r\n@@ -136 +134,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.force_if_else_statement_brace\" value=\"true\"/>\r\n@@ -141,0 +140 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_record_header\" value=\"true\"/>\r\n@@ -149,0 +149 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_after_annotation_on_enum_constant\" value=\"insert\"/>\r\n@@ -157,0 +158 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_after_type_annotation\" value=\"do not insert\"/>\r\n@@ -159,0 +161 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_before_closing_brace_in_array_initializer\" value=\"do not insert\"/>\r\n@@ -163,7 +165 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_annotation_declaration\" value=\"insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_anonymous_type_declaration\" value=\"do not insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_block\" value=\"insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_enum_constant\" value=\"do not insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_enum_declaration\" value=\"insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_method_body\" value=\"do not insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_new_line_in_empty_type_declaration\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_additive_operator\" value=\"insert\"/>\r\n@@ -170,0 +167,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_arrow_in_switch_case\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_arrow_in_switch_default\" value=\"insert\"/>\r\n@@ -174 +172 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_binary_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_bitwise_operator\" value=\"insert\"/>\r\n@@ -199,0 +198,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_permitted_types\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_record_components\" value=\"insert\"/>\r\n@@ -200,0 +201 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_switch_case_expressions\" value=\"insert\"/>\r\n@@ -203 +203,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comment_prefix\" value=\"do not insert\"/>\r\n@@ -204,0 +205,4 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_lambda_arrow\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_logical_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_multiplicative_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_not_operator\" value=\"do not insert\"/>\r\n@@ -220,0 +225 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_record_declaration\" value=\"do not insert\"/>\r\n@@ -228,0 +234 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_relational_operator\" value=\"insert\"/>\r\n@@ -230,0 +237,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_shift_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_string_concatenation\" value=\"insert\"/>\r\n@@ -231,0 +240 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_additive_operator\" value=\"insert\"/>\r\n@@ -232,0 +242,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_arrow_in_switch_case\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_arrow_in_switch_default\" value=\"insert\"/>\r\n@@ -235 +246 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_binary_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_bitwise_operator\" value=\"insert\"/>\r\n@@ -251,0 +263 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_record_declaration\" value=\"do not insert\"/>\r\n@@ -277,0 +290,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_comma_in_permitted_types\" value=\"do not insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_comma_in_record_components\" value=\"do not insert\"/>\r\n@@ -278,0 +293 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_comma_in_switch_case_expressions\" value=\"do not insert\"/>\r\n@@ -281,0 +297,3 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_lambda_arrow\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_logical_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_multiplicative_operator\" value=\"insert\"/>\r\n@@ -292,0 +311,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_record_constructor\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_record_declaration\" value=\"insert\"/>\r\n@@ -307,0 +328 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_record_declaration\" value=\"do not insert\"/>\r\n@@ -317,0 +339 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_relational_operator\" value=\"insert\"/>\r\n@@ -320,0 +343,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_shift_operator\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_before_string_concatenation\" value=\"insert\"/>\r\n@@ -331,0 +356,3 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_annotation_declaration_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_anonymous_type_declaration_on_one_line\" value=\"one_line_if_empty\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_code_block_on_one_line\" value=\"one_line_never\"/>\r\n@@ -333,0 +361,3 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_enum_constant_declaration_on_one_line\" value=\"one_line_if_empty\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_enum_declaration_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_if_then_body_block_on_one_line\" value=\"one_line_never\"/>\r\n@@ -334,0 +365,11 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_lambda_body_block_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_loop_body_block_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_method_body_on_one_line\" value=\"one_line_if_empty\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_record_constructor_on_one_line\" value=\"one_line_if_empty\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_record_declaration_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_simple_do_while_body_on_same_line\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_simple_for_body_on_same_line\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_simple_getter_setter_on_one_line\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_simple_while_body_on_same_line\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_switch_body_block_on_one_line\" value=\"one_line_never\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_switch_case_with_arrow_on_one_line\" value=\"one_line_never\"/>\r\n@@ -335,0 +377 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.keep_type_declaration_on_one_line\" value=\"one_line_never\"/>\r\n@@ -338,0 +381,2 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_blank_lines_after_code_block\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_blank_lines_at_beginning_of_code_block\" value=\"0\"/>\r\n@@ -339,0 +384,3 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_blank_lines_at_end_of_code_block\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_blank_lines_at_end_of_method_body\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_blank_lines_before_code_block\" value=\"0\"/>\r\n@@ -340,0 +388,11 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_annotation\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_catch_clause\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_enum_constant_declaration\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_for_statment\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_if_while_statement\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_lambda_declaration\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_method_delcaration\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_method_invocation\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_record_declaration\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_switch_statement\" value=\"common_lines\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.parentheses_positions_in_try_clause\" value=\"common_lines\"/>\r\n@@ -343,0 +402 @@\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.text_block_indentation\" value=\"0\"/>\r\n@@ -346 +405,7 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_binary_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_additive_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_assertion_message_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_assignment_operator\" value=\"false\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_bitwise_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_conditional_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_logical_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_multiplicative_operator\" value=\"true\"/>\r\n@@ -348,6 +413,4 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_comment_inline_tags\" value=\"false\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_non_simple_local_variable_annotation\" value=\"true\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_non_simple_member_annotation\" value=\"true\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_non_simple_package_annotation\" value=\"true\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_non_simple_parameter_annotation\" value=\"false\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_non_simple_type_annotation\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_relational_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_shift_operator\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_string_concatenation\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.wrap_before_switch_case_arrow_operator\" value=\"false\"/>\r\n@@ -355 +417,0 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.wrap_prefer_two_fragments\" value=\"false\"/>\r\n```\r\n\r\n</details>\r\n\r\nThe interesting thing about this is that it's not just new properties that were missing... but the old config had a bunch of properties that no longer exist and were removed. That didn't happen when I converted our existing config... that one only had additions, but no deletions. During the import process, it's not clear to me whether those deletions were translated to an equivalent new configuration property, or if they were merely dropped. If I only saw additions, I could make sure those additions matched the Eclipse defaults. But, with the deletions, it's not clear if some of these additions came from translating the deletions and should remain the way they are here, or if they should be set to the Eclipse defaults.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304577397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304582122","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304582122","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304582122,"node_id":"IC_kwDOACaFSM5Nwlfq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T16:31:54Z","updated_at":"2022-11-05T16:31:54Z","author_association":"MEMBER","body":"Ugh, very frustrating, GitHub lets you attach movie files to an issue, and a bunch of file formats I've never heard of, but won't let you attach a simple XML file.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304582122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304695328","html_url":"https://github.com/apache/accumulo/issues/3068#issuecomment-1304695328","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3068","id":1304695328,"node_id":"IC_kwDOACaFSM5NxBIg","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T02:02:13Z","updated_at":"2022-11-06T02:02:13Z","author_association":"MEMBER","body":"For what it's worth, I don't see any [relevant bugs reported in Fedora](https://bugzilla.redhat.com/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&classification=Fedora&product=Fedora&product=Fedora%20EPEL&component=java-11-openjdk). I could create one, but if it can be reproduced outside of Fedora, then reporting it in Fedora is not the right place. It could be a commons-vfs bug also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304695328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304839506","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1304839506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1304839506,"node_id":"IC_kwDOACaFSM5NxkVS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T16:32:50Z","updated_at":"2022-11-06T16:32:50Z","author_association":"CONTRIBUTOR","body":"> I think these changes are okay, but I'm not sure it's going to help folks who typically leave the debug logs enabled. In fact, it may make things worse for them, because now there's extra log statements, the basic one at warn and the more detailed stack trace at debug.\r\n\r\nI suppose one thing we could do is only log one statement regardless depending on what is enabled so we don't have the second log statement. We could add back in the debug is enabled check, and if it is, then only log the full stack trace (either at debug level or even error/warn level) and if it's not enabled then just log the 1 line statement and no stack trace.\r\n\r\nBut, in my opinion, that isn't necessary and the change here should be ok as is. I'm not really worried about the extra log statements because if someone turns on debug then they should expect to get flooded with log statements and information as that is the entire point. To me this is about fixing the non-debug use case (ie not development but production) where you don't want see a bunch of extra stuff that isn't a big deal and you wouldn't leave debug turned on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304839506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304842523","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304842523","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304842523,"node_id":"IC_kwDOACaFSM5NxlEb","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T16:47:40Z","updated_at":"2022-11-06T16:47:40Z","author_association":"CONTRIBUTOR","body":"That is interesting, so I'm not sure if we should go with the Google one as the base or ours. I don't really care too much as long as the end result is the same.\r\n\r\nAs you mentioned, there is no documentation anywhere. I still tried to search in case something was added recently but you are right, there really isn't. This is pretty surprising to me but I guess that means the intent is to not have people modify the XML directly but to only use the IDE and import/export. Still, the fact that i can't look up what the different properties mean/do and the possible values is super frustrating and is going to make this task much harder than it should be.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304842523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304862132","html_url":"https://github.com/apache/accumulo/issues/3068#issuecomment-1304862132","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3068","id":1304862132,"node_id":"IC_kwDOACaFSM5Nxp20","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T18:18:04Z","updated_at":"2022-11-06T18:18:04Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I can confirm that this fails on RHEL8 as well (but doesn't really tell us much as RHEL8 is based on Fedora).\r\n\r\nAnyways, I found the issue, it has to do with the mime type now being properly detected on the jar file as \"application/java-archive\" and the AccumuloVFSClassLoader.jar class in version 1.10 not having an entry for it.  You actually fixed this already in 2.1 here: https://github.com/apache/accumulo/blob/main/start/src/main/java/org/apache/accumulo/start/classloader/vfs/AccumuloVFSClassLoader.java#L288\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304862132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304862264","html_url":"https://github.com/apache/accumulo/issues/3068#issuecomment-1304862264","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3068","id":1304862264,"node_id":"IC_kwDOACaFSM5Nxp44","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T18:18:41Z","updated_at":"2022-11-06T18:18:41Z","author_association":"CONTRIBUTOR","body":"And here is the relevant pull request that fixes the issue: https://github.com/apache/accumulo/pull/2683\r\n\r\nWe just need to backport this to 1.10","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304862264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304867899","html_url":"https://github.com/apache/accumulo/issues/3068#issuecomment-1304867899","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3068","id":1304867899,"node_id":"IC_kwDOACaFSM5NxrQ7","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T18:50:08Z","updated_at":"2022-11-06T18:50:37Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - As you can see I back ported your fix in https://github.com/apache/accumulo/pull/3069 by cherry-picking it and tweaking the commit and message slightly. I'm not sure how you usually like to back port fixes (cherry-picking or merging, etc) so feel free to do something else if you don't like the cherry-pick commit.\r\n\r\nIn terms of what changed, I am not sure. We could try and go through the JDK version history but I don't think it matters too much. Clearly the new JDK 11 version now is returning that new mime type for the file so we should just add it and handle it as adding the new type fixes it either way just like it did for JDK 17.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304867899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304873767","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1304873767","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1304873767,"node_id":"IC_kwDOACaFSM5Nxssn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T19:20:32Z","updated_at":"2022-11-06T19:20:32Z","author_association":"MEMBER","body":"> But, in my opinion, that isn't necessary and the change here should be ok as is. I'm not really worried about the extra log statements because if someone turns on debug then they should expect to get flooded with log statements and information as that is the entire point. To me this is about fixing the non-debug use case (ie not development but production) where you don't want see a bunch of extra stuff that isn't a big deal and you wouldn't leave debug turned on.\r\n\r\nIn revisiting the original issue that prompted this, I'm thinking about what I, as a user, would want the behavior to be. I think that when a tablet split causes an external compaction task to be cancelled, I would want to see a single warning per cancelled task, at most, if there's something I should do about it (like issue a new compaction command), or just a single debug message if there's nothing for me to do about it (in the case of an automatic retry or something). In the message, I would want to see compaction identifying information (compaction id?) and information about the tablet that split, but I don't think it would be helpful to see a stack trace at all in this situation. I'm not sure if there are any other situations where this code is called, though, so I'd be careful to check that before suppressing the stack trace for all callers.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304873767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304875626","html_url":"https://github.com/apache/accumulo/pull/3069#issuecomment-1304875626","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3069","id":1304875626,"node_id":"IC_kwDOACaFSM5NxtJq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T19:32:07Z","updated_at":"2022-11-06T19:32:07Z","author_association":"CONTRIBUTOR","body":"> Awesome. It looks like they backported this change from JDK 17. I was wondering what would have motivated us to fix it in the newer branch... I guess it was testing with JDK 17.\r\n\r\nYeah, glad it was an easy fix. It didn't take too long to track down, I just created a unit test to replicate the issue with our classloader and just put a bunch of break points to compare what was happening in the working JDK vs new JDK and finally hit the part where it was returning the new mime type.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304875626/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304888598","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1304888598","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1304888598,"node_id":"IC_kwDOACaFSM5NxwUW","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-06T20:38:23Z","updated_at":"2022-11-06T20:38:23Z","author_association":"MEMBER","body":"Okay, I made an attempt to make the diff smaller, by identifying the settings that did not appear to be derived from the original Google Style import/export, but were just filled in by Eclipse with defaults. For those settings, I assume we're keeping the values from the current Accumulo configuration.\r\n\r\nSo, that leaves the following differences between the updated Google Style that I made, and what we currently have now in the Accumulo config:\r\n\r\n<details>\r\n<summary>Toggle this to view the diff</summary>\r\n\r\n```patch\r\n--- contrib/Eclipse-Accumulo-Codestyle.xml\t2022-11-05 23:40:23.013424723 -0400\r\n+++ contrib/eclipse-updated-java-google-style.xml\t2022-11-06 15:07:02.708634401 -0500\r\n@@ -23 +23 @@\r\n-    <profile kind=\"CodeFormatterProfile\" name=\"Accumulo\" version=\"22\">\r\n+    <profile kind=\"CodeFormatterProfile\" name=\"GoogleStyle\" version=\"22\">\r\n@@ -49 +49 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_conditional_expression\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_conditional_expression\" value=\"80\"/>\r\n@@ -51 +51 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_enum_constants\" value=\"48\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_enum_constants\" value=\"0\"/>\r\n@@ -57 +57 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_method_declaration\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_method_declaration\" value=\"0\"/>\r\n@@ -66 +66 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_resources_in_try\" value=\"16\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.alignment_for_resources_in_try\" value=\"80\"/>\r\n@@ -87,2 +87,2 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_imports\" value=\"1\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_member_type\" value=\"1\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_imports\" value=\"0\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_member_type\" value=\"0\"/>\r\n@@ -92 +92 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_import_groups\" value=\"1\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_import_groups\" value=\"0\"/>\r\n@@ -94 +94 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations\" value=\"1\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations\" value=\"2\"/>\r\n@@ -120 +120 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.comment.indent_parameter_description\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.indent_parameter_description\" value=\"false\"/>\r\n@@ -125 +125 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter\" value=\"do not insert\"/>\r\n@@ -148 +148 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.indentation.size\" value=\"2\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.indentation.size\" value=\"4\"/>\r\n@@ -197 +197 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference\" value=\"do not insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference\" value=\"insert\"/>\r\n@@ -202,2 +202,2 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments\" value=\"do not insert\"/>\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters\" value=\"do not insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments\" value=\"insert\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters\" value=\"insert\"/>\r\n@@ -387 +387 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve\" value=\"1\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve\" value=\"3\"/>\r\n@@ -399 +399 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line\" value=\"false\"/>\r\n@@ -404 +404 @@\r\n-        <setting id=\"org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations\" value=\"true\"/>\r\n+        <setting id=\"org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations\" value=\"false\"/>\r\n```\r\n\r\n</details>\r\n\r\nThe next steps would be:\r\n\r\n1. Identify what each of these actually change, and whether those changes are intended to conform to some element of the Google Style Guide,\r\n2. Decide which ones we want to adopt,\r\n3. (Unrelated to Google Style) - determine which other changes we might want to make by navigating the Eclipse GUI configuration options and tweaking the settings that specifically address new Java language features, in order to maintain consistency with our existing style choices, or pick them based on some other sufficient reasoning. For example, there are new options to format the constructors of the new record type. We may want to tweak those options so they are consistent with our formatting choices for regular classes' constructors.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1304888598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1306708036","html_url":"https://github.com/apache/accumulo/pull/3071#issuecomment-1306708036","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3071","id":1306708036,"node_id":"IC_kwDOACaFSM5N4shE","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T06:38:56Z","updated_at":"2022-11-08T06:38:56Z","author_association":"MEMBER","body":"@keith-turner You added the original method to get around a modernizer issue. Does this patch work for you? I could not reproduce any modernizer failures after applying these changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1306708036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307066793","html_url":"https://github.com/apache/accumulo/pull/3071#issuecomment-1307066793","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3071","id":1307066793,"node_id":"IC_kwDOACaFSM5N6EGp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T11:33:35Z","updated_at":"2022-11-08T11:33:35Z","author_association":"CONTRIBUTOR","body":"> @keith-turner You added the original method to get around a modernizer issue. Does this patch work for you? \r\n\r\nYeah it looks good.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307066793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307103808","html_url":"https://github.com/apache/accumulo/issues/3072#issuecomment-1307103808","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3072","id":1307103808,"node_id":"IC_kwDOACaFSM5N6NJA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T12:06:56Z","updated_at":"2022-11-08T12:06:56Z","author_association":"CONTRIBUTOR","body":"Looking at the code I am trying to understand when it might trigger. Looking on the server side there three reasons a scan can stop when there is still data.\r\n\r\nhttps://github.com/apache/accumulo/blob/d3a327740d02c4262f7860067f133772390e3975/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/TabletBase.java#L282\r\n\r\nThe intent of the metadatalocationobtainer is to read ahead and get locations of multiple rows when asked for a single location.  This populates the client cache for possible future reads.\r\n\r\nMy guess is that this case is saying I only got one metadata location and there are more, so maybe the tsever kicked me out early for some reason lets make one attempt to get a few more locations.  If that is the reason, not sure if this is worthwhile.  Later client location cache misses would cause subsequent metadata reads anyway.\r\n\r\nOf the three tablet server side conditions that cause the scan to send back a batch of data, it seems like only two would trigger this case.  One being the total size of the scan buffer, which could be caused by a large metadata row.  The other being the timeout.  Given we are using the whole row iterator, it does not seem like the condition for the number of entries would trigger on the server side.\r\n\r\nIt may be useful to add some logging for this case and see if it triggers under the suspected conditions, or if there is some unanticipated reason.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307103808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307264651","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1307264651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1307264651,"node_id":"IC_kwDOACaFSM5N60aL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T14:00:32Z","updated_at":"2022-11-08T14:00:32Z","author_association":"CONTRIBUTOR","body":"The CompactionEnv implementation that is used in External Compactions is [ExtCEnv](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/ExtCEnv.java). When [CompactionJobHolder.cancel()](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/CompactionJobHolder.java#L61) is called, then ExtCEnv.isCompactionEnabled() returns false. CompactionJobHolder.cancel() is called from several places in Compactor.java. When it's called from Compactor.checkIfCanceled, then it's not an error, the compaction is being canceled because the tablet split, the table was deleted, or the user canceled the compaction. I think in this case, it warrants a debug message. When CompactionJobHolder.cancel is called via Compactor.cancel(String) from Compactor.run(), it's preceded by an error message.\r\n\r\nI'm thinking that when env.isCompactionEnabled() returns false in FileCompactor.compactLocalityGroup() and a CompactionCanceledException is thrown, then FileCompactor.call() should log a debug message in the exception handler *and* suppress logging in the finally block.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307264651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307425451","html_url":"https://github.com/apache/accumulo/pull/2443#issuecomment-1307425451","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2443","id":1307425451,"node_id":"IC_kwDOACaFSM5N7bqr","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T15:45:31Z","updated_at":"2022-11-08T15:45:31Z","author_association":"MEMBER","body":"I merged main into this to resolve conflicts, and am marking it ready for review. I'm not sure what else needs to be done for this, but that can be ironed out in the review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307425451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307446321","html_url":"https://github.com/apache/accumulo/pull/574#issuecomment-1307446321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/574","id":1307446321,"node_id":"IC_kwDOACaFSM5N7gwx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T16:00:52Z","updated_at":"2022-11-08T16:00:52Z","author_association":"MEMBER","body":"What's the current status of this PR?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307446321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307838004","html_url":"https://github.com/apache/accumulo/pull/2443#issuecomment-1307838004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2443","id":1307838004,"node_id":"IC_kwDOACaFSM5N9AY0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T21:18:27Z","updated_at":"2022-11-08T21:18:27Z","author_association":"MEMBER","body":"Full ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307838004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307989093","html_url":"https://github.com/apache/accumulo/pull/3073#issuecomment-1307989093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3073","id":1307989093,"node_id":"IC_kwDOACaFSM5N9lRl","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T23:47:24Z","updated_at":"2022-11-08T23:47:24Z","author_association":"MEMBER","body":"This was a much smaller set of changes than I expected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1307989093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308083060","html_url":"https://github.com/apache/accumulo/pull/3073#issuecomment-1308083060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3073","id":1308083060,"node_id":"IC_kwDOACaFSM5N98N0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T01:45:27Z","updated_at":"2022-11-09T01:45:27Z","author_association":"MEMBER","body":"> LGTM - just some minor doc change suggestions\r\n\r\nThanks. I think I updated the wording to be better than what was there before. Will wait on full ITs before merging, though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308083060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308185088","html_url":"https://github.com/apache/accumulo/pull/3073#issuecomment-1308185088","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3073","id":1308185088,"node_id":"IC_kwDOACaFSM5N-VIA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T04:09:52Z","updated_at":"2022-11-09T04:09:52Z","author_association":"MEMBER","body":"All ITs passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308185088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308688651","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1308688651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1308688651,"node_id":"IC_kwDOACaFSM5OAQEL","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T12:37:04Z","updated_at":"2022-11-09T12:37:04Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - Thanks for coming up with that diff, it makes it a lot easier to see what actually changed. At least most of the names are pretty descriptive and somewhat self documenting. For example it's pretty easy to tell what `insert_space_after_comma_in_type_arguments` does and I'm definitely in favor of keep that change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308688651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308739970","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1308739970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1308739970,"node_id":"IC_kwDOACaFSM5OAcmC","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T13:17:03Z","updated_at":"2022-11-09T13:17:56Z","author_association":"CONTRIBUTOR","body":"Thanks for the explanation, I can catch the CompactionCanceledException in FileCompactor.call() [here](https://github.com/apache/accumulo/blob/7448970bc277bf1365bc0304b7d8f74412547617/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L261) and log a debug instead of an error since it would be expected and in the finally block can update the logging to check if cancelled to supresss logging on file close. \r\n\r\nAnd just to make sure I am following you, I think I would also want to only log a debug inside compactLocalityGroup() [here](https://github.com/apache/accumulo/blob/7448970bc277bf1365bc0304b7d8f74412547617/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L395) and get rid of the error as it's trying to close because compaction was cancelled and it's checking the flag using env.isCompactionEnabled(). ?\r\n\r\nLastly, I assume we still want/need to rethrow the CompactionCanceledException from call() so  that Compaction.createCompactionJob() gets it so it knows it didn't finish. It would log another debug there currently with the way the PR is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308739970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308790541","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1308790541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1308790541,"node_id":"IC_kwDOACaFSM5OAo8N","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T13:46:22Z","updated_at":"2022-11-09T13:46:22Z","author_association":"CONTRIBUTOR","body":"> Thanks for the explanation, I can catch the CompactionCanceledException in FileCompactor.call() [here](https://github.com/apache/accumulo/blob/7448970bc277bf1365bc0304b7d8f74412547617/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L261) and log a debug instead of an error since it would be expected and in the finally block can update the logging to check if cancelled to supresss logging on file close.\r\n\r\nYes, this is what I'm thinking.\r\n\r\n> And just to make sure I am following you, I think I would also want to only log a debug inside compactLocalityGroup() [here](https://github.com/apache/accumulo/blob/7448970bc277bf1365bc0304b7d8f74412547617/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L395) and get rid of the error as it's trying to close because compaction was cancelled and it's checking the flag using env.isCompactionEnabled(). ?\r\n\r\nSo, I'm not sure. We may want to change this to a `warn` or `info`. I would be interested in other opinions here. It's possible that there could be other cases outside of external compaction cancellation where we would want to know this happened.\r\n\r\n> Lastly, I assume we still want/need to rethrow the CompactionCanceledException from call() so that Compaction.createCompactionJob() gets it so it knows it didn't finish. It would log another debug there currently with the way the PR is.\r\n\r\nYes, I don't think we want to mess with the exceptions here, just the logging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308790541/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308792783","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1308792783","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1308792783,"node_id":"IC_kwDOACaFSM5OApfP","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T13:48:10Z","updated_at":"2022-11-09T13:48:10Z","author_association":"CONTRIBUTOR","body":"@dlmarion  - thanks, I'll make some changes and push up a new commit today and then we can discuss, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308792783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308977702","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1308977702","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1308977702,"node_id":"IC_kwDOACaFSM5OBWom","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T15:58:38Z","updated_at":"2022-11-09T15:58:38Z","author_association":"CONTRIBUTOR","body":"It appears I have screwed up the history here with trying to merge main/reverts so I'm just going to reset from 2.1 and force push\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308977702/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308980866","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1308980866","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1308980866,"node_id":"IC_kwDOACaFSM5OBXaC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T16:00:49Z","updated_at":"2022-11-09T16:00:49Z","author_association":"MEMBER","body":"> For example it's pretty easy to tell what `insert_space_after_comma_in_type_arguments` does and I'm definitely in favor of keep that change.\r\n\r\nFor that specific example, it took me awhile to find the corresponding style guide reasoning for that space. It seems to be section [4.6.2](https://google.github.io/styleguide/javaguide.html#s4.6.2-horizontal-whitespace), item number 5. I'm not a big fan of it, and think that generic type parameters are a good exception, in order to be concise. But I'm not entirely opposed, either. I think it depends on what the remaining differences are.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308980866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308991745","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1308991745","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1308991745,"node_id":"IC_kwDOACaFSM5OBaEB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T16:08:17Z","updated_at":"2022-11-09T16:08:17Z","author_association":"CONTRIBUTOR","body":"Ok I forced pushed up the latest, let me know what you think.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1308991745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309119246","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1309119246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1309119246,"node_id":"IC_kwDOACaFSM5OB5MO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T17:47:40Z","updated_at":"2022-11-09T17:47:40Z","author_association":"CONTRIBUTOR","body":"This looks good. Suggest testing it on single node to see what happens in the monitor when compactions are canceled. I saw it when the `ci` table split when using external compactions and running continuous ingest. If you want to test single node, and need help with the configuration, let me know.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309119246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309137080","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1309137080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1309137080,"node_id":"IC_kwDOACaFSM5OB9i4","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T17:57:44Z","updated_at":"2022-11-09T17:57:44Z","author_association":"CONTRIBUTOR","body":"> This looks good. Suggest testing it on single node to see what happens in the monitor when compactions are canceled. I saw it when the `ci` table split when using external compactions and running continuous ingest. If you want to test single node, and need help with the configuration, let me know.\r\n\r\nYeah I think testing would be good and I can report back how things look with log examples. I can message you on chat to get some info on setting up a good test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309137080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309204774","html_url":"https://github.com/apache/accumulo/issues/2821#issuecomment-1309204774","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2821","id":1309204774,"node_id":"IC_kwDOACaFSM5OCOEm","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T18:41:33Z","updated_at":"2022-11-09T18:41:33Z","author_association":"CONTRIBUTOR","body":"This was implemented as part of #2967 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309204774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309448589","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1309448589","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1309448589,"node_id":"IC_kwDOACaFSM5ODJmN","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-09T22:13:18Z","updated_at":"2022-11-09T22:13:18Z","author_association":"CONTRIBUTOR","body":"Sure that is fine, makes more sense that way now that I think about it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309448589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309926525","html_url":"https://github.com/apache/accumulo/pull/3074#issuecomment-1309926525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3074","id":1309926525,"node_id":"IC_kwDOACaFSM5OE-R9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T08:18:10Z","updated_at":"2022-11-10T08:18:10Z","author_association":"MEMBER","body":"This was very frustrating code to clean up, but I'm confident I've fixed the earlier bugs. I've already confirmed all the hung and failing tests from the first pass are fixed, but I will re-run the full ITs to be sure there's nothing else.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1309926525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1310187713","html_url":"https://github.com/apache/accumulo/pull/3067#issuecomment-1310187713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3067","id":1310187713,"node_id":"IC_kwDOACaFSM5OF-DB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T12:07:38Z","updated_at":"2022-11-10T12:33:49Z","author_association":"CONTRIBUTOR","body":"I ran this against Uno for a while with ingest running and a small split threshold to induce cancellations on tablet splits and saw the following in the logs:\r\n\r\n```\r\n2022-11-10T06:24:05,091 [compaction.FileCompactor] DEBUG: Compaction canceled 7;683c;664\r\n...\r\n2022-11-10T06:26:55,021 [compaction.FileCompactor] DEBUG: Compaction canceled 7;0214<\r\n```\r\nNo more stack trace or verbose output and I didn't see anything show up in the Monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1310187713/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1310472825","html_url":"https://github.com/apache/accumulo/pull/3074#issuecomment-1310472825","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3074","id":1310472825,"node_id":"IC_kwDOACaFSM5OHDp5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T15:34:54Z","updated_at":"2022-11-10T15:34:54Z","author_association":"MEMBER","body":"Full ITs finished successfully. Seems unrelated, but saw SaslConnectionParamsTest was a bit flaky in GitHub Actions. I forced it to run in a separate JVM fork from other tests, because it always worked for me when running on its own, so it seems likely another test in the same JVM was interfering with it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1310472825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312555755","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1312555755","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1312555755,"node_id":"IC_kwDOACaFSM5OPALr","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-12T19:27:15Z","updated_at":"2022-11-12T19:28:48Z","author_association":"CONTRIBUTOR","body":"Oops posted a comment before I was finished, I am working on a large comment that goes through each of the changes and describes them and has examples. I will have an update later today when I'm finished.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312555755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312604803","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1312604803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1312604803,"node_id":"IC_kwDOACaFSM5OPMKD","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T00:34:20Z","updated_at":"2022-11-13T00:50:56Z","author_association":"CONTRIBUTOR","body":"@ctubbsii -\r\n\r\nOk so to try and wrap this up I spent a lot of time today figuring out the formatting and reverse engineering the XML and what it maps to in the Eclipse IDE settings. I went through every single change and I figured out the exact setting in Eclipse and what it did. I ran all the changes through the formatter using `mvn clean formatter:format` and I captured examples in the code from both before and after the change. Interestingly, many of the white space formatting changes didn't show any different when running the plugin. I'm not sure if this has to do with my git diff settings but it seemed like it actually didn't change anything.\r\n\r\nBelow I have documented what the XML line maps to in the IDE and also the differences in each change if the formatter showed something. I also figured out what the values mean for the alignments (0,16, 32, etc) and documented that in a table.\r\n\r\n## Alignment Changes\r\n\r\n### XML Alignment value mappings to Eclipse IDE values:\r\n\r\n<details>\r\n\r\n| XML Value | IDE Value |\r\n|-----------|-----------|\r\n| 0         | Do not wrap    |\r\n| 16        | Wrap where necessary      |\r\n| 32        | Wrap first element, others where necessary      |\r\n| 48        | Wrap all elements, every element on a new line      |\r\n| 64        | Wrap all elements, indent all but the first element      |\r\n| 80        | Wrap all elements, except first element if necessary      |\r\n\r\n</details>\r\n\r\n### 1. org.eclipse.jdt.core.formatter.alignment_for_conditional_expression\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Line Wrapping -> Wrapping Settings -> Other expressions -> Conditionals`\r\n\r\n#### Before change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_conditional_expression\" value=\"16\"/>\r\n```\r\n\r\nValue `16` maps to `Wrap where necessary`\r\n\r\nExample:\r\n\r\n```java\r\nstartInclusive = options.containsKey(START_INCLUSIVE)\r\n    ? Boolean.parseBoolean(options.get(START_INCLUSIVE)) : true;\r\n\r\nlong computationCacheDuration = StringUtils.isNotBlank(propertyValue)\r\n  ? Long.parseLong(propertyValue) : defaultComputationCacheDuration;\r\n```\r\n\r\n#### After change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_conditional_expression\" value=\"80\"/>\r\n```\r\n\r\nValue `80` maps to `'Wrap all elements, except first element if necessary'`\r\n\r\nExample:\r\n\r\n```java\r\nstartInclusive =\r\n    options.containsKey(START_INCLUSIVE) ? Boolean.parseBoolean(options.get(START_INCLUSIVE))\r\n        : true;\r\n\r\nlong computationCacheDuration =\r\n  StringUtils.isNotBlank(propertyValue) ? Long.parseLong(propertyValue)\r\n      : defaultComputationCacheDuration;\r\n```\r\n</details>\r\n\r\n### 2. org.eclipse.jdt.core.formatter.alignment_for_enum_constants\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Line Wrapping -> Wrapping Settings -> 'enum' declaration -> Constants`\r\n\r\n#### Before change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_enum_constants\" value=\"48\"/>\r\n```\r\n\r\nValue `48` maps to `'Wrap all elements, every element on a new line'`\r\n\r\nExample:\r\n\r\n```java\r\npublic enum SecurityErrorCode {\r\n  DEFAULT_SECURITY_ERROR,\r\n  BAD_CREDENTIALS,\r\n  PERMISSION_DENIED,\r\n  USER_DOESNT_EXIST,\r\n  CONNECTION_ERROR,\r\n  USER_EXISTS,\r\n  GRANT_INVALID,\r\n  BAD_AUTHORIZATIONS,\r\n  INVALID_INSTANCEID,\r\n  TABLE_DOESNT_EXIST,\r\n  UNSUPPORTED_OPERATION,\r\n  INVALID_TOKEN,\r\n  AUTHENTICATOR_FAILED,\r\n  AUTHORIZOR_FAILED,\r\n  PERMISSIONHANDLER_FAILED,\r\n  TOKEN_EXPIRED,\r\n  SERIALIZATION_ERROR,\r\n  INSUFFICIENT_PROPERTIES,\r\n  NAMESPACE_DOESNT_EXIST\r\n}\r\n```\r\n\r\n\r\n#### After change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_enum_constants\" value=\"0\"/>\r\n```\r\n\r\nValue `0` maps to `'Do not wrap'`\r\n\r\nExample:\r\n\r\n```java\r\npublic enum SecurityErrorCode {\r\n  DEFAULT_SECURITY_ERROR, BAD_CREDENTIALS, PERMISSION_DENIED, USER_DOESNT_EXIST, CONNECTION_ERROR, USER_EXISTS, GRANT_INVALID, BAD_AUTHORIZATIONS, INVALID_INSTANCEID, TABLE_DOESNT_EXIST, UNSUPPORTED_OPERATION, INVALID_TOKEN, AUTHENTICATOR_FAILED, AUTHORIZOR_FAILED, PERMISSIONHANDLER_FAILED, TOKEN_EXPIRED, SERIALIZATION_ERROR, INSUFFICIENT_PROPERTIES, NAMESPACE_DOESNT_EXIST\r\n}\r\n```\r\n\r\n</details>\r\n\r\n### 3. org.eclipse.jdt.core.formatter.alignment_for_method_declaration\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Line Wrapping -> Wrapping Settings -> Method Declarations -> Declaration`\r\n\r\n##### Before change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_method_declaration\" value=\"16\"/>\r\n```\r\n\r\nValue `16` maps to `Wrap where necessary`\r\n\r\nExamples:\r\n\r\n```java\r\npublic static Pair<List<LogEntry>,SortedMap<StoredTabletFile,DataFileValue>>\r\n  getFileAndLogEntries(ServerContext context, KeyExtent extent) throws IOException {\r\n\r\npublic Map<String,Object>\r\n  getTabletServers(@QueryParam(\"s\") @Pattern(regexp = HOSTNAME_PORT_REGEX) String server) {\r\n```\r\n\r\n#### After change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_method_declaration\" value=\"0\"/>\r\n```\r\n\r\nValue `0` maps to `Do not wrap`\r\n\r\nExamples:\r\n\r\n```java\r\npublic static Pair<List<LogEntry>,SortedMap<StoredTabletFile,DataFileValue>> getFileAndLogEntries(\r\n  ServerContext context, KeyExtent extent) throws IOException {\r\n\r\npublic Map<String,Object> getTabletServers(\r\n  @QueryParam(\"s\") @Pattern(regexp = HOSTNAME_PORT_REGEX) String server) {\r\n```\r\n\r\n</details>\r\n\r\n### 4. org.eclipse.jdt.core.formatter.alignment_for_resources_in_try\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Line Wrapping -> Wrapping Settings -> Statements -> 'try-with-resources'`\r\n\r\n#### Before change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_resources_in_try\" value=\"16\"/>\r\n```\r\n\r\nValue `16` maps to `Wrap where necessary`\r\n\r\nExamples:\r\n\r\n```java\r\ntry (OutputStream fsOut = output.create(lmFile); JsonWriter writer =\r\n    new JsonWriter(new BufferedWriter(new OutputStreamWriter(fsOut, UTF_8)))) {\r\n\r\ntry (TestingServer zooKeeper = new TestingServer(); MiniAccumuloCluster accumulo =\r\n    new MiniAccumuloCluster(config.setExistingZooKeepers(zooKeeper.getConnectString()))) {\r\n```\r\n\r\n#### After change:\r\n\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.alignment_for_resources_in_try\" value=\"80\"/>\r\n```\r\n\r\nValue `48` maps to `Wrap all elements, every element on a new line`\r\n\r\nExamples:\r\n\r\n```java\r\ntry (OutputStream fsOut = output.create(lmFile);\r\n    JsonWriter writer =\r\n        new JsonWriter(new BufferedWriter(new OutputStreamWriter(fsOut, UTF_8)))) {\r\n\r\ntry (TestingServer zooKeeper = new TestingServer();\r\n    MiniAccumuloCluster accumulo =\r\n        new MiniAccumuloCluster(config.setExistingZooKeepers(zooKeeper.getConnectString()))) {\r\n```\r\n\r\n</details>\r\n\r\n## Blank Line Changes\r\n\r\n### 5. org.eclipse.jdt.core.formatter.blank_lines_before_imports\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Blank Lines -> Blank lines within compilation unit -> Before import declarations`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_imports\" value=\"1\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_imports\" value=\"0\"/>\r\n```\r\n\r\n**No differences when running the formatter.**\r\n\r\n</details>\r\n\r\n### 6. org.eclipse.jdt.core.formatter.blank_lines_before_member_type\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Blank Lines -> Blank lines within type delcarations -> Between member type declarations`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_member_type\" value=\"1\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_before_member_type\" value=\"0\"/>\r\n```\r\n\r\n**No differences when running the formatter.**\r\n\r\n</details>\r\n\r\n### 7. org.eclipse.jdt.core.formatter.blank_lines_between_import_groups\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:**`Blank Lines -> Blank lines within compilation unit -> Between import groups`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_import_groups\" value=\"1\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_import_groups\" value=\"0\"/>\r\n```\r\n\r\n**No differences when running the formatter.**\r\n\r\n</details>\r\n\r\n### 8. org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Blank Lines -> Blank lines within compilation unit -> Between class declarations`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations\" value=\"1\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations\" value=\"0\"/>\r\n```\r\n\r\n**No differences when running the formatter.**\r\n\r\n</details>\r\n\r\n## Indentation and Comment changes\r\n\r\n### 9. org.eclipse.jdt.core.formatter.indent_parameter_description\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Comments -> Javadocs -> Indent wrapped @param/@throws descriptions`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.comment.indent_parameter_description\" value=\"true\"/>\r\n```\r\n\r\nExample:\r\n\r\n```java\r\n/**\r\n* Factory method to create a ConditionalWriter connected to Accumulo.\r\n*\r\n* @param tableName\r\n*          the name of the table to query data from\r\n* @param config\r\n*          configuration used to create conditional writer\r\n*\r\n* @return ConditionalWriter object for writing ConditionalMutations\r\n* @throws TableNotFoundException\r\n*           when the specified table doesn't exist\r\n*/\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.comment.indent_parameter_description\" value=\"false\"/>\r\n```\r\n\r\nExample:\r\n\r\n```java\r\n/**\r\n* Factory method to create a Scanner with all of the user's authorizations.\r\n*\r\n* @param tableName\r\n*        the name of the table to query data from\r\n*\r\n* @return Scanner object for configuring and querying data with\r\n* @throws TableNotFoundException\r\n*         when the specified table doesn't exist\r\n*\r\n* @see IsolatedScanner\r\n*/\r\n```\r\n</details>\r\n\r\n### 10. org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Comments -> Javadocs -> New line before @param/@throws descriptions`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter\" value=\"insert\"/>\r\n```\r\n\r\nExample:\r\n\r\n```java\r\n/**\r\n* Constructor.\r\n*\r\n* @param vectorSize\r\n*          The vector size of <i>this</i> filter.\r\n* @param nbHash\r\n*          The number of hash functions to consider.\r\n* @param hashType\r\n*          type of the hashing function (see {@link Hash}).\r\n*/\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter\" value=\"do not insert\"/>\r\n```\r\n\r\nExample:\r\n\r\n```java\r\n/**\r\n* Constructor.\r\n*\r\n* @param vectorSize The vector size of <i>this</i> filter.\r\n* @param nbHash The number of hash functions to consider.\r\n* @param hashType type of the hashing function (see {@link Hash}).\r\n*/\r\n```\r\n</details>\r\n\r\n### 11. org.eclipse.jdt.core.formatter.indentation.size\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Indentation -> Indentation Size`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.indentation.size\" value=\"2\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.indentation.size\" value=\"4\"/>\r\n```\r\n\r\n**This doesn't make sense to me but I ran it through the formatter (mvn clean formatter:format) but it didn't change anything.\r\nI would have expected an indent of 4 of course.**\r\n\r\n</details>\r\n\r\n## Spaces after commas\r\n\r\n### 12.  org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Whitespace -> Parameterized types -> Type reference -> After comma`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference\" value=\"do not insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\nSupplier<Map<String,String>> contextConfigSupplier\r\n\r\nprivate static void setContextConfig(Supplier<Map<String,String>> contextConfigSupplier)\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference\" value=\"insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\nSupplier<Map<String, String>> contextConfigSupplier\r\n\r\nprivate static void setContextConfig(Supplier<Map<String, String>> contextConfigSupplier)\r\n```\r\n\r\n</details>\r\n\r\n### 13. org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Whitespace -> Parameterized types -> Type Arguments -> After comma`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments\" value=\"do not insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\nfinal var builder = ImmutableMap.<String,String>builder();\r\n\r\nfinal var imb = ImmutableMap.<String,Long>builder();\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments\" value=\"insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\n    final var builder = ImmutableMap.<String, String>builder();\r\n\r\n    final var imb = ImmutableMap.<String, Long>builder();\r\n```\r\n</details>\r\n\r\n### 14. org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Whitespace -> Parameterized types -> Type Arguments -> After comma in parameters`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters\" value=\"do not insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\npublic class PairLexicoder<A extends Comparable<A>,B extends Comparable<B>>\r\n\r\npublic class SynchronizedIterator<K extends WritableComparable<?>,V extends Writable>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters\" value=\"insert\"/>\r\n```\r\n\r\nExamples:\r\n\r\n```java\r\npublic class PairLexicoder<A extends Comparable<A>, B extends Comparable<B>>\r\n\r\npublic class SynchronizedIterator<K extends WritableComparable<?>, V extends Writable>\r\n```\r\n</details>\r\n\r\n##  Remaining Whitespace changes\r\n\r\n### 15. org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Blank Lines -> Number of empty lines to preserve`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve\" value=\"1\"/>\r\n```\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve\" value=\"3\"/>\r\n```\r\n\r\n**No changes running formatter**\r\n\r\n</details>\r\n\r\n### 16. org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `New Lines -> Before empty statement`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line\" value=\"true\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line\" value=\"false\"/>\r\n```\r\n\r\n**No difference with formatter**\r\n\r\n</details>\r\n\r\n### 17. org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations\r\n\r\n<details>\r\n\r\n**Eclipse IDE Mapping:** `Indentation -> Tab policy -> Use spaces to indent wrapped lines`\r\n\r\n#### Before change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations\" value=\"true\"/>\r\n```\r\n\r\n#### After change:\r\n```xml\r\n<setting id=\"org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations\" value=\"false\"/>\r\n```\r\n\r\n**No difference with formatter**\r\n\r\n</details>\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312604803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312631644","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1312631644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1312631644,"node_id":"IC_kwDOACaFSM5OPStc","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T03:44:21Z","updated_at":"2022-11-13T03:44:21Z","author_association":"MEMBER","body":"> Ok so to try and wrap this up I spent a lot of time today figuring out the formatting and reverse engineering the XML and what it maps to in the Eclipse IDE settings. I went through every single change and I figured out the exact setting in Eclipse and what it did. I ran all the changes through the formatter using `mvn clean formatter:format` and I captured examples in the code from both before and after the change.\r\n\r\nThat's really valuable. I wish Eclipse itself had documented these in the detail you have investigated. I think they see the config file as \"internal\" storage format and not worth documenting, but as a contributor / co-maintainer of formatter-maven-plugin, I disagree. :smiley_cat: I wonder if you could contribute these to Eclipse's own documentation, as a starting point for them to take over.\r\n\r\n> Interestingly, many of the white space formatting changes didn't show any different when running the plugin. I'm not sure if this has to do with my git diff settings but it seemed like it actually didn't change anything.\r\n\r\nIt's entirely possible we just didn't have any existing code that these would apply to. Possibly, because of other settings that made them less likely to matter.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1312631644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314223461","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314223461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314223461,"node_id":"IC_kwDOACaFSM5OVXVl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T18:51:41Z","updated_at":"2022-11-14T18:51:41Z","author_association":"CONTRIBUTOR","body":"This change is not in response to a new reported issue, but something that I have seen on busy clusters in the past. On busy clusters I have seen the case where the page cache flush process is very active. I think there is an opportunity here to help alleviate the cache pressure by telling the operating system that it doesn't need to cache the WAL after we write it, because we aren't going to be reading it. In fact, there is likely another commit here that I could make that is the opposite side of this - we can tell the operating system to drop or not cache the WAL during recovery as we are going to read it once and then be done with it. \r\n\r\nIIRC, under the hood this calls [posix_fadvise](https://linux.die.net/man/2/posix_fadvise) and the native code is located [here](https://github.com/apache/hadoop/blame/trunk/hadoop-common-project/hadoop-common/src/main/native/src/org/apache/hadoop/io/nativeio/NativeIO.c#L167). ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314223461/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314272943","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314272943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314272943,"node_id":"IC_kwDOACaFSM5OVjav","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T19:33:59Z","updated_at":"2022-11-14T19:33:59Z","author_association":"CONTRIBUTOR","body":"Failed test is due to connection timeout downloading Maven dependency\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314272943/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314274166","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314274166","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314274166,"node_id":"IC_kwDOACaFSM5OVjt2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T19:35:13Z","updated_at":"2022-11-14T19:35:13Z","author_association":"CONTRIBUTOR","body":"IIRC in previous situations like this, you had suggested to people that changes should be made in the most recent version and then cherry-picked backwards.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314274166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314290954","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314290954","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314290954,"node_id":"IC_kwDOACaFSM5OVn0K","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T19:51:38Z","updated_at":"2022-11-14T19:51:38Z","author_association":"MEMBER","body":"> IIRC in previous situations like this, you had suggested to people that changes should be made in the most recent version and then cherry-picked backwards.\r\n\r\nThe circumstances differ here from that suggestion in a several important ways:\r\n\r\n1. Both 2.x and 1.x versions had releases, and the proposed change was only being considered for the earlier 1.x version without consideration of the newer 2.x versions,\r\n2. The code had already changed substantially in 2.x, which would have required a different design from the proposed 1.x change, meaning we couldn't just consider the change in 1.x; consideration of the change in 2.x may have informed design choices for the 1.x version (it would be bad if 1.x went one direction, and 2.x went a different direction, so we needed to consider 2.x in order to ensure the changes in 1.x were headed in the same direction),\r\n3. The proposed changes then were non-trivial, and were still being polished, and it would have been premature to apply to an older stable release without fully understanding its impact, and\r\n4. Depending on how things went after considering the changes in 2.x, we may have decided we didn't want to make the changes in 1.x\r\n\r\nIn this case, however:\r\n\r\n1. there is no newer released version to consider,\r\n2. the code between the branches is still identical,\r\n3. the changes are trivial, and\r\n4. we know up-front that we want to apply the changes to the earlier branch\r\n\r\nUnder circumstances like this, it's a matter of considering what is most efficient for tooling. If this were applied to the main branch, we'd cherry-pick the changes directly to the 2.1 branch, then merge forward back into the main branch, resulting in two identical commits in the history of the main branch. There's no reason to do that here, since the end result is the same. It's better under these circumstances to apply to the 2.1 branch and do one merge into the main branch, leaving only the one substantive commit and one trivial merge commit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314290954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314294641","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314294641","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314294641,"node_id":"IC_kwDOACaFSM5OVotx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T19:55:42Z","updated_at":"2022-11-14T19:55:42Z","author_association":"MEMBER","body":"Also, we don't need to label 3.0.0 as a target version, because unless 3.0.0 is released prior to 2.1.1, everything in a patch release is always included in the next `.0` release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314294641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314306578","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314306578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314306578,"node_id":"IC_kwDOACaFSM5OVroS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T20:05:42Z","updated_at":"2022-11-14T20:05:42Z","author_association":"CONTRIBUTOR","body":"Closed in favor of #3077 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314306578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314308430","html_url":"https://github.com/apache/accumulo/pull/3076#issuecomment-1314308430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3076","id":1314308430,"node_id":"IC_kwDOACaFSM5OVsFO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T20:07:03Z","updated_at":"2022-11-14T20:07:03Z","author_association":"MEMBER","body":"FWIW, if you just force push to your branch, you don't need to create a new PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314308430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314321887","html_url":"https://github.com/apache/accumulo/pull/3077#issuecomment-1314321887","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3077","id":1314321887,"node_id":"IC_kwDOACaFSM5OVvXf","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T20:16:11Z","updated_at":"2022-11-14T20:16:11Z","author_association":"CONTRIBUTOR","body":"See https://issues.apache.org/jira/browse/HDFS-4817 for more information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314321887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314366801","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1314366801","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1314366801,"node_id":"IC_kwDOACaFSM5OV6VR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T20:55:01Z","updated_at":"2022-11-14T20:55:01Z","author_association":"CONTRIBUTOR","body":"I think there are two things that could be done here (assuming successful compaction):\r\n\r\n  1. Call setDropBehind(true) for the compaction input files so that the DataNodes can drop the files from their page caches.\r\n  2. Remove (or cause to be removed faster) any cached blocks in the BlockCache for the compaction input files.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314366801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314371758","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1314371758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1314371758,"node_id":"IC_kwDOACaFSM5OV7iu","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T21:00:19Z","updated_at":"2022-11-14T21:00:19Z","author_association":"CONTRIBUTOR","body":"In this case we are assuming that a compacted file will not be needed in the near future.  Is that a valid assumption?  I could see some places where that is not true (e.g. accumulo.metadata table).\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314371758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314382412","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1314382412","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1314382412,"node_id":"IC_kwDOACaFSM5OV-JM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T21:09:08Z","updated_at":"2022-11-14T21:09:08Z","author_association":"CONTRIBUTOR","body":"I'm assuming that a tablet read *some time after* a compaction will not read any of the compacted files. If ScanServers are not being used, then that timeframe is likely very small. If ScanServers are being used, then the timeframe is the metadata cache expiration property value. Something also to consider is that compactions performed externally won't have access to the BlockCache, so this might be something internal to the BlockCache.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1314382412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315283430","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315283430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315283430,"node_id":"IC_kwDOACaFSM5OZaHm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T13:04:59Z","updated_at":"2022-11-15T13:04:59Z","author_association":"CONTRIBUTOR","body":"> I think there are two things that could be done here (assuming successful compaction):\r\n>\r\n> 1. Call setDropBehind(true) for the compaction input files so that the DataNodes can drop the files from their page caches.\r\n> 2. Remove (or cause to be removed faster) any cached blocks in the BlockCache for the compaction input files.\r\n\r\nWe should not have to worry about compactions causing blocks to be cached. When a file is opened for compaction [here](https://github.com/apache/accumulo/blob/f389518b6b9c4897e017edade95f927846214e6e/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L314-L316) no accumulo block caches are passed in.\r\n\r\nWould be nice to setDropBehind(true) for compaction input files.  Could also do that for the output file.  The output file is created [here](https://github.com/apache/accumulo/blob/f389518b6b9c4897e017edade95f927846214e6e/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L215).  \r\n\r\nSeems like we would need to modify the internal reader and writer builders to support the set drop behind option.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315283430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315288609","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315288609","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315288609,"node_id":"IC_kwDOACaFSM5OZbYh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T13:08:38Z","updated_at":"2022-11-15T13:08:38Z","author_association":"CONTRIBUTOR","body":"> We should not have to worry about compactions causing blocks to be cached.\r\n\r\nI was more thinking that we could somehow remove (or mark for early removal) cached blocks for files there were recently input files for a successful compaction. I have looked at the cache's and this may not be possible. We may just have to wait for them to be evicted normally.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315288609/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315293006","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315293006","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315293006,"node_id":"IC_kwDOACaFSM5OZcdO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T13:11:40Z","updated_at":"2022-11-15T13:11:40Z","author_association":"CONTRIBUTOR","body":"> Could also do that for the output file.\r\n\r\nI wasn't suggesting that. I'm not sure how long the FADVISE hint persists. For example, if we created a new file during compaction and called setDropBehind() on it, at what point would the DN hosts cache the files in their page cache?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315293006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315330215","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315330215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315330215,"node_id":"IC_kwDOACaFSM5OZlin","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T13:44:30Z","updated_at":"2022-11-15T13:44:30Z","author_association":"CONTRIBUTOR","body":"Some good points were raised in the comments in https://issues.apache.org/jira/browse/HBASE-10052 and https://issues.apache.org/jira/browse/HBASE-14098. It looks like they settled on using this feature on input and output files of large compactions only.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315330215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315560777","html_url":"https://github.com/apache/accumulo/pull/3079#issuecomment-1315560777","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3079","id":1315560777,"node_id":"IC_kwDOACaFSM5Oad1J","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T16:27:17Z","updated_at":"2022-11-15T16:27:17Z","author_association":"CONTRIBUTOR","body":"Be sure to look at commit msg for explanation of changes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315560777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315880513","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315880513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315880513,"node_id":"IC_kwDOACaFSM5Obr5B","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T21:23:07Z","updated_at":"2022-11-15T21:23:07Z","author_association":"CONTRIBUTOR","body":"> For example, if we created a new file during compaction and called setDropBehind() on it, at what point would the DN hosts cache the files in their page cache?\r\n\r\nThats a good question.  I was assuming it was scoped to the lifetime of the file output stream, but not sure now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315880513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315885313","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315885313","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315885313,"node_id":"IC_kwDOACaFSM5ObtEB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T21:28:03Z","updated_at":"2022-11-15T21:28:03Z","author_association":"CONTRIBUTOR","body":"So, looking at https://linux.die.net/man/3/posix_fadvise, the advisory information is attached to the file descriptor. Each process, in this case the DataNode, has it's own file descriptor table. I don't know enough about the file descriptors on Linux to know if a you write a file and close it, then open it later, could it have the same file descriptor (and advisory information)?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315885313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315930089","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315930089","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315930089,"node_id":"IC_kwDOACaFSM5Ob3_p","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:14:13Z","updated_at":"2022-11-15T22:14:13Z","author_association":"CONTRIBUTOR","body":"Digging around in the hadoop code I think it creates an output stream per output block in the DN and calls fadvise on its file descriptor.  So it does seem like its tightly scoped to the clients output stream, but not completely sure, got a bit lost, below are some things I was looking at.  Did not look at the input path.\r\n\r\nhttps://github.com/apache/hadoop/blob/branch-3.3.5/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockReceiver.java#L928\r\n\r\nhttps://github.com/apache/hadoop/blob/5ca626e3e3ea29c2c90632129a57e73e3a1a420a/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/fsdataset/ReplicaOutputStreams.java#L157\r\n\r\nhttps://github.com/apache/hadoop/blob/5ca626e3e3ea29c2c90632129a57e73e3a1a420a/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/nativeio/NativeIO.java#L407\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315930089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315942135","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315942135","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315942135,"node_id":"IC_kwDOACaFSM5Ob673","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:22:19Z","updated_at":"2022-11-15T22:22:19Z","author_association":"CONTRIBUTOR","body":"It's in the [BlockSender.close](https://github.com/apache/hadoop/blob/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockSender.java#L480) in the DataNode. So, after it sends the block to the client, it may (depending on the specified options) set POSIX_FADV_DONTNEED on a range of the file descriptor for the file (that is that block).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315942135/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315963932","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315963932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315963932,"node_id":"IC_kwDOACaFSM5OcAQc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:40:56Z","updated_at":"2022-11-15T22:40:56Z","author_association":"CONTRIBUTOR","body":" >It's in the [BlockSender.close](https://github.com/apache/hadoop/blob/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/BlockSender.java#L480) in the DataNode. So, after it sends the block to the client, it may (depending on the specified options) set POSIX_FADV_DONTNEED on a range of the file descriptor for the file (that is that block).\r\n\r\nIf it reads the entire block and drops it from cache after reading it, then I suppose the smaller the hadoop block size the better it is for the cache in that case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315963932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315967145","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315967145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315967145,"node_id":"IC_kwDOACaFSM5OcBCp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:44:39Z","updated_at":"2022-11-15T22:47:09Z","author_association":"CONTRIBUTOR","body":"I didn't look closely at the range accounting. I think you can read a range, so if you do that, then it marks that range as not needed in the page cache. If you read the whole block, then it likely marks the entire file as not needed in the page cache.\r\n\r\n> then I suppose the smaller the hadoop block size the better it is for the cache in that case.\r\n\r\nI think that depends on what you mean by better. Dropping a larger block from the cache because it's not needed seems like it would be better than leaving it there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315967145/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315974009","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315974009","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315974009,"node_id":"IC_kwDOACaFSM5OcCt5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:53:01Z","updated_at":"2022-11-15T22:53:28Z","author_association":"CONTRIBUTOR","body":"For the case of reading a file, I wonder if it only drops the caches on the replicas it read from of from all replicas (even then ones it did not read from.)\r\n\r\nOne case where dropping the caches could have an impact is when a file is shared between multiple tablets.  A situation like the following.\r\n\r\n * Table A has files F1,F2,F3\r\n * Table A splits into Tablets B and C\r\n * Tablet B compacts F1 and F2 into F4\r\n * Tablet C is running scans against F1 and F2\r\n\r\nIn the case above maybe the compaction for Tablet B could cause some performance problems for Tablet C.  I don't think this case is something to worry about, I just thought it was interesting.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315974009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315979727","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1315979727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1315979727,"node_id":"IC_kwDOACaFSM5OcEHP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T22:58:30Z","updated_at":"2022-11-15T22:58:30Z","author_association":"CONTRIBUTOR","body":"> I wonder if it only drops the caches on the replicas it read from\r\n\r\nI believe that is the case, I added that in my commit [comment](https://github.com/apache/accumulo/pull/3079/commits/f180381655b45c97e29d51c7418ea9b33359ae9c). In the case of a shared file, they should be different byte offsets of the same file. I guess Accumulo can't take advantage of that because of the RFile structure. I'm not sure that the compaction would cause an issue against a running scan. I'm thinking that those blocks might already be cached at the TabletServer level.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1315979727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316490539","html_url":"https://github.com/apache/accumulo/pull/3080#issuecomment-1316490539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3080","id":1316490539,"node_id":"IC_kwDOACaFSM5OeA0r","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:19:12Z","updated_at":"2022-11-16T07:19:12Z","author_association":"MEMBER","body":"This would remove a little less than 5% of our lines of code, but would still need follow on work to remove the replication table when upgrading from an earlier version.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316490539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316520411","html_url":"https://github.com/apache/accumulo/pull/1656#issuecomment-1316520411","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1656","id":1316520411,"node_id":"IC_kwDOACaFSM5OeIHb","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:42:15Z","updated_at":"2022-11-16T07:42:15Z","author_association":"MEMBER","body":"Closing this based on most recent reviewer comments and lack of subsequent activity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316520411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316522317","html_url":"https://github.com/apache/accumulo/pull/574#issuecomment-1316522317","issue_url":"https://api.github.com/repos/apache/accumulo/issues/574","id":1316522317,"node_id":"IC_kwDOACaFSM5OeIlN","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:44:09Z","updated_at":"2022-11-16T07:44:09Z","author_association":"MEMBER","body":"Closing this due to lack of recent interest/activity. Please reopen or create a new PR if circumstances change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316522317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316526438","html_url":"https://github.com/apache/accumulo/pull/1359#issuecomment-1316526438","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1359","id":1316526438,"node_id":"IC_kwDOACaFSM5OeJlm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:48:09Z","updated_at":"2022-11-16T07:48:09Z","author_association":"MEMBER","body":"Closing due to lack of activity and lack of response to the code review feedback. There are also merge conflicts and this may be OBE. Please reopen (and rebase) or create a new PR if this is still an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316526438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316539931","html_url":"https://github.com/apache/accumulo/pull/2535#issuecomment-1316539931","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2535","id":1316539931,"node_id":"IC_kwDOACaFSM5OeM4b","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:53:07Z","updated_at":"2022-11-16T07:53:07Z","author_association":"MEMBER","body":"Closing due to lack of activity, and lack of a motivating use case. The implementation is tricky, and it's not clear there's a strong motivation to provide this. Please reopen or create a new PR if there is a strong need that warrants us providing this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316539931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316542105","html_url":"https://github.com/apache/accumulo/issues/2226#issuecomment-1316542105","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2226","id":1316542105,"node_id":"IC_kwDOACaFSM5OeNaZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:54:00Z","updated_at":"2022-11-16T07:54:00Z","author_association":"MEMBER","body":"Closing this due to lack of interest/need. See discussion on PR #2535 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316542105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316550723","html_url":"https://github.com/apache/accumulo/issues/572#issuecomment-1316550723","issue_url":"https://api.github.com/repos/apache/accumulo/issues/572","id":1316550723,"node_id":"IC_kwDOACaFSM5OePhD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T07:59:21Z","updated_at":"2022-11-16T07:59:21Z","author_association":"MEMBER","body":"Closing due to lack of activity and OBE, because all the replication code is deprecated. This can be reopened if somebody takes on maintenance of the replication feature, and this is still an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316550723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316555468","html_url":"https://github.com/apache/accumulo/issues/1124#issuecomment-1316555468","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1124","id":1316555468,"node_id":"IC_kwDOACaFSM5OeQrM","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T08:03:39Z","updated_at":"2022-11-16T08:03:39Z","author_association":"MEMBER","body":"Closing due to lack of activity/interest. I also think the value of shortening the service names to no longer match exactly with the the class names on the class path is questionable, as it may make it more difficult for users to troubleshoot, and may create configuration ambiguities, depending on the contents of the class path. Using the class name works, and seems safest. If there's still an interest in pursuing this, please reopen or let's discuss a design/plan on the mailing list.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316555468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316559109","html_url":"https://github.com/apache/accumulo/issues/2613#issuecomment-1316559109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2613","id":1316559109,"node_id":"IC_kwDOACaFSM5OeRkF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T08:06:50Z","updated_at":"2022-11-16T08:06:50Z","author_association":"MEMBER","body":"I have not seen this in quite some time. None of the recent CI failures were caused by this. I think we can close this. We can reopen if it starts occurring again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1316559109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1317150080","html_url":"https://github.com/apache/accumulo/issues/3078#issuecomment-1317150080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3078","id":1317150080,"node_id":"IC_kwDOACaFSM5Ogh2A","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T14:55:04Z","updated_at":"2022-11-16T14:55:04Z","author_association":"CONTRIBUTOR","body":"> I think that depends on what you mean by better. Dropping a larger block from the cache because it's not needed seems like it would be better than leaving it there.\r\n\r\nYeah, better to drop it in either case.  Was thinking that large blocks can push more stuff out of cache than smaller ones.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1317150080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318023042","html_url":"https://github.com/apache/accumulo/pull/3082#issuecomment-1318023042","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3082","id":1318023042,"node_id":"IC_kwDOACaFSM5Oj2-C","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T03:46:21Z","updated_at":"2022-11-17T03:46:21Z","author_association":"MEMBER","body":"It looks like these changes cause a few ITs to fail. This should not be merged until those are resolved.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318023042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318589468","html_url":"https://github.com/apache/accumulo/pull/3080#issuecomment-1318589468","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3080","id":1318589468,"node_id":"IC_kwDOACaFSM5OmBQc","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T12:50:11Z","updated_at":"2022-11-17T12:50:11Z","author_association":"MEMBER","body":"All ITs passed with these changes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318589468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318818052","html_url":"https://github.com/apache/accumulo/pull/3082#issuecomment-1318818052","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3082","id":1318818052,"node_id":"IC_kwDOACaFSM5Om5EE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T15:36:39Z","updated_at":"2022-11-17T15:36:39Z","author_association":"CONTRIBUTOR","body":"Fixed IT issue in 6e17cc9. There was some code dealing with the replication table that handled ReplicationTableOfflineException. Kicked off another IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318818052/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318920123","html_url":"https://github.com/apache/accumulo/pull/3082#issuecomment-1318920123","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3082","id":1318920123,"node_id":"IC_kwDOACaFSM5OnR-7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:49:53Z","updated_at":"2022-11-17T16:49:53Z","author_association":"CONTRIBUTOR","body":"Full IT passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1318920123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1319152385","html_url":"https://github.com/apache/accumulo/pull/3081#issuecomment-1319152385","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3081","id":1319152385,"node_id":"IC_kwDOACaFSM5OoKsB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T20:17:32Z","updated_at":"2022-11-17T20:17:32Z","author_association":"CONTRIBUTOR","body":"Full IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1319152385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1319579469","html_url":"https://github.com/apache/accumulo/pull/3081#issuecomment-1319579469","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3081","id":1319579469,"node_id":"IC_kwDOACaFSM5Opy9N","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T05:50:12Z","updated_at":"2022-11-18T05:50:12Z","author_association":"MEMBER","body":"I don't think anybody has suggested or is planning a 2.2. Doing a 2.2 also risks putting us in branch-hell (it's frustrating enough that we have 3 branches to maintain, one for each LTM and main, adding more 2.x release lines in addition to the 3.x ones would make it worse). We've talked about a 3.0. I would target that on the main branch, or hold off for a 3.1 if we want 3.0 to just include cleanup and immediately work on 3.1.\r\n\r\nThe autogenerated thrift changes are making it harder to load the diffs on GitHub. If you want to, you could revert the autogenerated changes for the purposes of code review (with the understanding that it won't compile and they'd have to be added back in a subsequent commit once reviewed). Otherwise, I might need to go to the command line and look at the diffs locally to finish my review (which is fine, too; it's up to you).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1319579469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320001500","html_url":"https://github.com/apache/accumulo/pull/3081#issuecomment-1320001500","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3081","id":1320001500,"node_id":"IC_kwDOACaFSM5OrZ_c","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T13:34:43Z","updated_at":"2022-11-18T13:34:43Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - Um, I did something. It's not a total revert.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320001500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320051953","html_url":"https://github.com/apache/accumulo/pull/3081#issuecomment-1320051953","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3081","id":1320051953,"node_id":"IC_kwDOACaFSM5OrmTx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T14:17:35Z","updated_at":"2022-11-18T14:17:35Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - How's that? I implemented the solution that I linked to in #3086 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320051953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320076223","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320076223","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320076223,"node_id":"IC_kwDOACaFSM5OrsO_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T14:34:24Z","updated_at":"2022-11-18T14:34:24Z","author_association":"CONTRIBUTOR","body":"I tested the solution to this in #3081 and it looks good to me...","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320076223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320087679","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320087679","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320087679,"node_id":"IC_kwDOACaFSM5OrvB_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T14:43:49Z","updated_at":"2022-11-18T14:43:49Z","author_association":"MEMBER","body":"That's very cool. I didn't know about this.\r\n\r\nSome points to consider:\r\n\r\n1. This makes it easier for unreviewed malicious code to sneak in via an innocuous pull request; we still have to review the contents of these directories before merging if they appear in a PR, and\r\n2. GitHub's UI shows these suppressed files in a format that is very similar to their automatic suppression of large diffs that still need to be reviewed, so you still have to scroll past them in the UI and read the message for each one to determine if they need to be reviewed individually.\r\n3. Since this only affects how generated files are displayed in GitHub, it's still nice to have a separate commit in the git history for when one is reviewing the logs on the command-line or in other git tools.\r\n\r\nGitHub's UI for this could be a little better. I'd rather have toggle to automatically hide/show all generated files, similar to GitHub's hide/show whitespace changes toggle. Also, I'd really like the generated code to be in a separate commit for the command-line history when we make big changes to the thrift files.\r\n\r\nMy conclusion: I think using this is probably better than not using it, but it doesn't help with everything we care about.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320087679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320116503","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320116503","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320116503,"node_id":"IC_kwDOACaFSM5Or2EX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T14:54:08Z","updated_at":"2022-11-18T14:54:08Z","author_association":"CONTRIBUTOR","body":"re point 1 above - I wonder if we can reduce some of the risk by removing all of the files in this directory and regenerating them during the release process.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320116503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320176760","html_url":"https://github.com/apache/accumulo/issues/3085#issuecomment-1320176760","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3085","id":1320176760,"node_id":"IC_kwDOACaFSM5OsEx4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T15:27:52Z","updated_at":"2022-11-18T15:27:52Z","author_association":"MEMBER","body":"Yes, those all should be 2.1.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320176760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320178959","html_url":"https://github.com/apache/accumulo/issues/3085#issuecomment-1320178959","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3085","id":1320178959,"node_id":"IC_kwDOACaFSM5OsFUP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T15:29:21Z","updated_at":"2022-11-18T15:29:21Z","author_association":"MEMBER","body":"We can manually update the docs on the website for those so they are correct before the 2.1.1 release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320178959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320182347","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320182347","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320182347,"node_id":"IC_kwDOACaFSM5OsGJL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T15:32:08Z","updated_at":"2022-11-18T15:32:45Z","author_association":"MEMBER","body":"> re point 1 above - I wonder if we can reduce some of the risk by removing all of the files in this directory and regenerating them during the release process.\r\n\r\nThat's already done. The release process activates the thrift profile. So, the main risk is to the developers prior to release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320182347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320262616","html_url":"https://github.com/apache/accumulo/pull/3064#issuecomment-1320262616","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3064","id":1320262616,"node_id":"IC_kwDOACaFSM5OsZvY","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T16:39:16Z","updated_at":"2022-11-18T16:39:16Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - The changes are ready for review. I force pushed 2 commits, the first commit contains the actual changes for the formatter xml and pom for checkstyle/errorprone config and the second are the changes actually applied to the code. If you want I can remove the second commit but the first 1 is pretty easy to just view by itself.\r\n\r\nI ended up only applying the Javadoc style changes (same line comments for parameters if short enough and indentation fixes for long changes) to the formatter and then I updated checkstyle and errorprone config to require braces for all control statements. \r\n\r\nLastly, to actually fix everything, I had to use my IDE to go through and apply all the missing braces as the formatter won't apply them to missing control statements (only fix the formatting if there) and then I ran the build so the formatter plugin would run and fix the Javadoc comments.\r\n\r\nAfter this is merged I figure we could look to see about anything else that is missing we want to add that might be new to JDK 17 but that may only need to be applied to main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320262616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320287421","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320287421","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320287421,"node_id":"IC_kwDOACaFSM5Osfy9","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T17:00:57Z","updated_at":"2022-11-18T17:00:57Z","author_association":"CONTRIBUTOR","body":"This is definitely a nice feature but as stated, number 1 is my main concern too. Would be easy to sneak in something or even just screw up the generated code by mistake and might get missed. \r\n\r\nAlso, when I view #3081 now it doesn't seem like there is an easy way to still view the diff for the generated code with a toggle option so it seems like it's completely hidden and no way to easily view it if you wanted which is kind of annoying.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320287421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320289091","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320289091","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320289091,"node_id":"IC_kwDOACaFSM5OsgND","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T17:02:34Z","updated_at":"2022-11-18T17:02:34Z","author_association":"MEMBER","body":"> it doesn't seem like there is an easy way to still view the diff for the generated code with a toggle option\r\n\r\nYou have to click on each \"Load diff\" link for each separate file. You can't do it for all at once.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320289091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320291290","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320291290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320291290,"node_id":"IC_kwDOACaFSM5Osgva","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T17:04:13Z","updated_at":"2022-11-18T17:04:13Z","author_association":"CONTRIBUTOR","body":"I don't understand how # 1 is a concern if the code in that directory is deleted and then regenerated at release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320291290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320300883","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320300883","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320300883,"node_id":"IC_kwDOACaFSM5OsjFT","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T17:12:08Z","updated_at":"2022-11-18T17:12:31Z","author_association":"CONTRIBUTOR","body":"> I don't understand how # 1 is a concern if the code in that directory is deleted and then regenerated at release.\r\n\r\nWell one issue could be is that there would be a long delay from when the issue was introduced vs catching it (if we don't do releases for a long time). So we could be potentially developing/testing against something that is not what will be generated later. And (in the unlikely chance) there was something introduced that was malicious it would be loaded on any developer machines still. \r\n\r\nI wonder if there is some way to auto detect changes to the directory when unintentional (ie we didn't run thrift). Not sure if there is some way to mark a directory as read only in Git or use some kind of git post commit hook or add something in maven to detect changes, etc. Maybe we could do something with Jenkins/CI to detect changes and report so we catch it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320300883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320331440","html_url":"https://github.com/apache/accumulo/issues/3086#issuecomment-1320331440","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3086","id":1320331440,"node_id":"IC_kwDOACaFSM5Osqiw","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T17:40:13Z","updated_at":"2022-11-18T17:40:13Z","author_association":"CONTRIBUTOR","body":"sure, but we could just change it from pre-release to when integration tests are done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320331440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320469752","html_url":"https://github.com/apache/accumulo/issues/3084#issuecomment-1320469752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3084","id":1320469752,"node_id":"IC_kwDOACaFSM5OtMT4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T20:02:08Z","updated_at":"2022-11-18T20:02:08Z","author_association":"CONTRIBUTOR","body":"Confirmed that there is more work to do here.  If you insert the following [here](https://github.com/apache/accumulo/blob/main/test/src/main/java/org/apache/accumulo/test/ScanServerIT.java#L158) the test fails.\r\n\r\n```\r\nTabletLocator.getLocator((ClientContext) client, TableId.of(client.tableOperations().tableIdMap().get(tableName))).invalidateCache();\r\n```\r\n\r\nThe reason it succeeds currently is that the table was online and a tablet was hosted. That information is in the TabletLocator. Once that information is no longer present, then the current client code fails.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320469752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320566966","html_url":"https://github.com/apache/accumulo/issues/3087#issuecomment-1320566966","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3087","id":1320566966,"node_id":"IC_kwDOACaFSM5OtkC2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T21:51:47Z","updated_at":"2022-11-18T21:51:47Z","author_association":"CONTRIBUTOR","body":"I looked at the 2.1 code and I think the same issue might exist.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320566966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320570149","html_url":"https://github.com/apache/accumulo/issues/3087#issuecomment-1320570149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3087","id":1320570149,"node_id":"IC_kwDOACaFSM5Otk0l","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T21:55:40Z","updated_at":"2022-11-18T21:55:40Z","author_association":"CONTRIBUTOR","body":"Without ZooKeeper how is the cluster running?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320570149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320573284","html_url":"https://github.com/apache/accumulo/issues/3087#issuecomment-1320573284","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3087","id":1320573284,"node_id":"IC_kwDOACaFSM5Otllk","user":{"login":"jwomeara","id":7132616,"node_id":"MDQ6VXNlcjcxMzI2MTY=","avatar_url":"https://avatars.githubusercontent.com/u/7132616?v=4","gravatar_id":"","url":"https://api.github.com/users/jwomeara","html_url":"https://github.com/jwomeara","followers_url":"https://api.github.com/users/jwomeara/followers","following_url":"https://api.github.com/users/jwomeara/following{/other_user}","gists_url":"https://api.github.com/users/jwomeara/gists{/gist_id}","starred_url":"https://api.github.com/users/jwomeara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwomeara/subscriptions","organizations_url":"https://api.github.com/users/jwomeara/orgs","repos_url":"https://api.github.com/users/jwomeara/repos","events_url":"https://api.github.com/users/jwomeara/events{/privacy}","received_events_url":"https://api.github.com/users/jwomeara/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T21:59:43Z","updated_at":"2022-11-18T22:00:56Z","author_association":"NONE","body":"It might not be there!  And if so, accumulo shouldn't be sticking around waiting for it indefinitely!\r\n\r\nSend the exception to me telling me how dumb I am so I can do something about it. 🤣","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1320573284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]