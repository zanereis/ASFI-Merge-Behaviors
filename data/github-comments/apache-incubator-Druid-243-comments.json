[{"url":"https://api.github.com/repos/apache/druid/issues/comments/500185208","html_url":"https://github.com/apache/druid/issues/1014#issuecomment-500185208","issue_url":"https://api.github.com/repos/apache/druid/issues/1014","id":500185208,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE4NTIwOA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T05:00:43Z","updated_at":"2019-06-09T05:00:43Z","author_association":"CONTRIBUTOR","body":"Since the first RC is about to come out, I think only regression bugs or very critical bugs could be release blockers. This issue looks related to the real time node which is deprecated and should be removed in the near future. I think we can just remove the real time node in 0.16.0.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500185208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500185888","html_url":"https://github.com/apache/druid/issues/7840#issuecomment-500185888","issue_url":"https://api.github.com/repos/apache/druid/issues/7840","id":500185888,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE4NTg4OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T05:21:18Z","updated_at":"2019-06-09T05:21:18Z","author_association":"CONTRIBUTOR","body":"May I ask how you wrote that ingestion spec that you posted?\r\nI can reproduce your issue and it seems to be because you are setting whacky stuff in the `tuningConfig`\r\n\r\n`targetPartitionSize` and `rowFlushBoundary` are related to hadoop ingestion if I am not mistaken, in any case they are not even listed in the [native index docs](http://druid.io/docs/latest/ingestion/native_tasks.html)\r\n\r\nI modified your spec to the one below by simply removing everything from the `tuningConfig` and it seems to work:\r\n\r\n![image](https://user-images.githubusercontent.com/177816/59155322-a821c600-8a3b-11e9-9feb-dc42a5cc16d6.png)\r\n\r\nHere is your spec with out the stuff in the  `tuningConfig`:\r\n\r\n```\r\n{\r\n  \"type\": \"index\",\r\n  \"spec\": {\r\n    \"dataSchema\": {\r\n      \"dataSource\": \"pageviews\",\r\n      \"parser\": {\r\n        \"type\": \"string\",\r\n        \"parseSpec\": {\r\n          \"format\": \"json\",\r\n          \"timestampSpec\": {\r\n            \"column\": \"timestamp\",\r\n            \"format\": \"auto\"\r\n          },\r\n          \"dimensionsSpec\": {\r\n            \"dimensions\": [],\r\n            \"dimensionExclusions\": [\r\n              \"eventId\",\r\n              \"userId\",\r\n              \"url\"\r\n            ],\r\n            \"spatialDimensions\": []\r\n          }\r\n        }\r\n      },\r\n      \"metricsSpec\": [\r\n        {\r\n          \"type\": \"count\",\r\n          \"name\": \"count\"\r\n        }\r\n      ],\r\n      \"granularitySpec\": {\r\n        \"type\": \"uniform\",\r\n        \"segmentGranularity\": \"DAY\",\r\n        \"queryGranularity\": \"HOUR\",\r\n        \"intervals\": [\r\n          \"2015-03-01/2015-04-01\"\r\n        ]\r\n      }\r\n    },\r\n    \"ioConfig\": {\r\n      \"type\": \"index\",\r\n      \"firehose\": {\r\n        \"type\": \"local\",\r\n        \"baseDir\": \"/Users/vadim/Downloads/\",\r\n        \"filter\": \"events.json\"\r\n      }\r\n    },\r\n    \"tuningConfig\": {\r\n      \"type\": \"index\"\r\n    }\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500185888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500187242","html_url":"https://github.com/apache/druid/issues/7840#issuecomment-500187242","issue_url":"https://api.github.com/repos/apache/druid/issues/7840","id":500187242,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE4NzI0Mg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T05:55:19Z","updated_at":"2019-06-09T05:55:19Z","author_association":"CONTRIBUTOR","body":"Boom: a video reply https://www.youtube.com/watch?v=X3nQd0KuqPU just for you @vadirajks \r\n\r\nHere is the generated spec from the video:\r\n\r\n```\r\n{\r\n  \"type\": \"index\",\r\n  \"dataSchema\": {\r\n    \"dataSource\": \"pageviews\",\r\n    \"granularitySpec\": {\r\n      \"type\": \"uniform\",\r\n      \"segmentGranularity\": \"DAY\",\r\n      \"queryGranularity\": \"HOUR\",\r\n      \"rollup\": true\r\n    },\r\n    \"parser\": {\r\n      \"type\": \"string\",\r\n      \"parseSpec\": {\r\n        \"format\": \"json\",\r\n        \"timestampSpec\": {\r\n          \"column\": \"timestamp\",\r\n          \"format\": \"iso\"\r\n        },\r\n        \"dimensionsSpec\": {\r\n          \"dimensions\": [\r\n            \"eventId\",\r\n            \"url\",\r\n            \"userId\"\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    \"metricsSpec\": [\r\n      {\r\n        \"name\": \"count\",\r\n        \"type\": \"count\"\r\n      }\r\n    ]\r\n  },\r\n  \"ioConfig\": {\r\n    \"type\": \"index\",\r\n    \"firehose\": {\r\n      \"type\": \"local\",\r\n      \"baseDir\": \"/Users/vadim/Downloads/\",\r\n      \"filter\": \"events.json\"\r\n    }\r\n  },\r\n  \"tuningConfig\": {\r\n    \"type\": \"index\"\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500187242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500198478","html_url":"https://github.com/apache/druid/pull/6365#issuecomment-500198478","issue_url":"https://api.github.com/repos/apache/druid/issues/6365","id":500198478,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE5ODQ3OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T09:28:28Z","updated_at":"2019-06-09T09:28:28Z","author_association":"CONTRIBUTOR","body":"@zhaojiandong could you have a look at the conflicted files please?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500198478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500216178","html_url":"https://github.com/apache/druid/issues/3390#issuecomment-500216178","issue_url":"https://api.github.com/repos/apache/druid/issues/3390","id":500216178,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDIxNjE3OA==","user":{"login":"sdenham","id":2816872,"node_id":"MDQ6VXNlcjI4MTY4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2816872?v=4","gravatar_id":"","url":"https://api.github.com/users/sdenham","html_url":"https://github.com/sdenham","followers_url":"https://api.github.com/users/sdenham/followers","following_url":"https://api.github.com/users/sdenham/following{/other_user}","gists_url":"https://api.github.com/users/sdenham/gists{/gist_id}","starred_url":"https://api.github.com/users/sdenham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdenham/subscriptions","organizations_url":"https://api.github.com/users/sdenham/orgs","repos_url":"https://api.github.com/users/sdenham/repos","events_url":"https://api.github.com/users/sdenham/events{/privacy}","received_events_url":"https://api.github.com/users/sdenham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T14:27:58Z","updated_at":"2019-06-09T14:27:58Z","author_association":"NONE","body":"Thank you @chowey!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500216178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500244898","html_url":"https://github.com/apache/druid/pull/7852#issuecomment-500244898","issue_url":"https://api.github.com/repos/apache/druid/issues/7852","id":500244898,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI0NDg5OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T21:00:33Z","updated_at":"2019-06-09T21:00:43Z","author_association":"CONTRIBUTOR","body":"> Would it bulk delete all the lookups in that tier? Or did you add it as a way to remove empty tiers that might be left behind in the current version of Druid?\r\n\r\nboth :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500244898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500256390","html_url":"https://github.com/apache/druid/issues/888#issuecomment-500256390","issue_url":"https://api.github.com/repos/apache/druid/issues/888","id":500256390,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI1NjM5MA==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T00:04:08Z","updated_at":"2019-06-10T00:04:17Z","author_association":"CONTRIBUTOR","body":"dont think so..","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500256390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500262706","html_url":"https://github.com/apache/druid/pull/7857#issuecomment-500262706","issue_url":"https://api.github.com/repos/apache/druid/issues/7857","id":500262706,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI2MjcwNg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T01:23:22Z","updated_at":"2019-06-10T01:23:22Z","author_association":"CONTRIBUTOR","body":"Seriously, if a cool data format that you like is missing from this list: https://github.com/apache/incubator-druid/pull/7857/files#diff-f8dbaf734865a56edec2eacbab371a77R27 please comment!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500262706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500292561","html_url":"https://github.com/apache/druid/issues/7439#issuecomment-500292561","issue_url":"https://api.github.com/repos/apache/druid/issues/7439","id":500292561,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI5MjU2MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T05:02:54Z","updated_at":"2019-06-10T05:02:54Z","author_association":"CONTRIBUTOR","body":"With the web console additions I believe this is completed","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500292561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500293441","html_url":"https://github.com/apache/druid/pull/7831#issuecomment-500293441","issue_url":"https://api.github.com/repos/apache/druid/issues/7831","id":500293441,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI5MzQ0MQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T05:09:42Z","updated_at":"2019-06-10T05:09:42Z","author_association":"CONTRIBUTOR","body":"I'll take a look tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500293441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500409759","html_url":"https://github.com/apache/druid/issues/3287#issuecomment-500409759","issue_url":"https://api.github.com/repos/apache/druid/issues/3287","id":500409759,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDQwOTc1OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T13:07:55Z","updated_at":"2019-06-10T13:07:55Z","author_association":"MEMBER","body":"This issue is not relevant / is already implemented; the current view on how `equals()` should look in `DataSegment` is expressed here: https://github.com/apache/incubator-druid/issues/6358#issuecomment-489102183.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500409759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500503667","html_url":"https://github.com/apache/druid/issues/7842#issuecomment-500503667","issue_url":"https://api.github.com/repos/apache/druid/issues/7842","id":500503667,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUwMzY2Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T17:23:57Z","updated_at":"2019-06-10T17:23:57Z","author_association":"MEMBER","body":"```\r\ndb9a714abe45acc2011799fe4dfd6b89c82653f321a4e92dab5903cd89b800d0\r\nSending build context to Docker daemon  136.6MB\r\nStep 1/31 : FROM imply/druiditbase:0.2\r\n ---> 765db104f306\r\nStep 2/31 : RUN echo \"[mysqld]\\ncharacter-set-server=utf8\\ncollation-server=utf8_bin\\n\" >> /etc/mysql/my.cnf\r\n ---> Using cache\r\n ---> ad36ebd753ea\r\nStep 3/31 : RUN find /var/lib/mysql -type f -exec touch {} \\; && /etc/init.d/mysql start       && echo \"CREATE USER 'druid'@'%' IDENTIFIED BY 'diurd'; GRANT ALL ON druid.* TO 'druid'@'%'; CREATE database druid DEFAULT CHARACTER SET utf8mb4;\" | mysql -u root       && /etc/init.d/mysql stop\r\n ---> Using cache\r\n ---> 159e843c63c9\r\nStep 4/31 : ADD lib/* /usr/local/druid/lib/\r\n ---> 030dd8ed2167\r\nStep 5/31 : ENV DEBIAN_FRONTEND=noninteractive\r\n ---> Running in a9dda1aac6c0\r\nRemoving intermediate container a9dda1aac6c0\r\n ---> 02a3a02e16e6\r\nStep 6/31 : RUN apt-get update && apt-get install -y --no-install-recommends apt-utils libmysql-java\r\n ---> Running in 75c78a31155a\r\nGet:1 http://security.ubuntu.com/ubuntu xenial-security InRelease [109 kB]\r\nGet:2 http://archive.ubuntu.com/ubuntu xenial InRelease [247 kB]\r\nGet:3 http://security.ubuntu.com/ubuntu xenial-security/main amd64 Packages [855 kB]\r\nGet:4 http://archive.ubuntu.com/ubuntu xenial-updates InRelease [109 kB]\r\nGet:5 http://archive.ubuntu.com/ubuntu xenial-backports InRelease [107 kB]\r\nGet:6 http://archive.ubuntu.com/ubuntu xenial/main amd64 Packages [1558 kB]\r\nGet:7 http://security.ubuntu.com/ubuntu xenial-security/restricted amd64 Packages [12.7 kB]\r\nGet:8 http://security.ubuntu.com/ubuntu xenial-security/universe amd64 Packages [557 kB]\r\nGet:9 http://security.ubuntu.com/ubuntu xenial-security/multiverse amd64 Packages [6113 B]\r\nGet:10 http://archive.ubuntu.com/ubuntu xenial/restricted amd64 Packages [14.1 kB]\r\nGet:11 http://archive.ubuntu.com/ubuntu xenial/universe amd64 Packages [9827 kB]\r\nGet:12 http://archive.ubuntu.com/ubuntu xenial/multiverse amd64 Packages [176 kB]\r\nGet:13 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 Packages [1249 kB]\r\nGet:14 http://archive.ubuntu.com/ubuntu xenial-updates/restricted amd64 Packages [13.1 kB]\r\nGet:15 http://archive.ubuntu.com/ubuntu xenial-updates/universe amd64 Packages [968 kB]\r\nGet:16 http://archive.ubuntu.com/ubuntu xenial-updates/multiverse amd64 Packages [19.1 kB]\r\nGet:17 http://archive.ubuntu.com/ubuntu xenial-backports/main amd64 Packages [7942 B]\r\nGet:18 http://archive.ubuntu.com/ubuntu xenial-backports/universe amd64 Packages [8532 B]\r\nFetched 15.8 MB in 58s (271 kB/s)\r\nReading package lists...\r\nReading package lists...\r\nBuilding dependency tree...\r\nReading state information...\r\nThe following additional packages will be installed:\r\n  apt libapt-inst2.0 libapt-pkg5.0\r\nSuggested packages:\r\n  aptitude | synaptic | wajig dpkg-dev apt-doc python-apt libslf4j-java\r\nThe following NEW packages will be installed:\r\n  apt-utils libapt-inst2.0 libmysql-java\r\nThe following packages will be upgraded:\r\n  apt libapt-pkg5.0\r\n2 upgraded, 3 newly installed, 0 to remove and 41 not upgraded.\r\nNeed to get 3006 kB of archives.\r\nAfter this operation, 2473 kB of additional disk space will be used.\r\nGet:1 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libapt-pkg5.0 amd64 1.2.32 [713 kB]\r\nGet:2 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 apt amd64 1.2.32 [1086 kB]\r\nGet:3 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libapt-inst2.0 amd64 1.2.32 [55.8 kB]\r\nGet:4 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 apt-utils amd64 1.2.32 [196 kB]\r\nGet:5 http://archive.ubuntu.com/ubuntu xenial/universe amd64 libmysql-java all 5.1.38-1 [955 kB]\r\ndebconf: delaying package configuration, since apt-utils is not installed\r\nFetched 3006 kB in 9s (316 kB/s)\r\n(Reading database ... 13797 files and directories currently installed.)\r\nPreparing to unpack .../libapt-pkg5.0_1.2.32_amd64.deb ...\r\nUnpacking libapt-pkg5.0:amd64 (1.2.32) over (1.2.29ubuntu0.1) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\nSetting up libapt-pkg5.0:amd64 (1.2.32) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\n(Reading database ... 13797 files and directories currently installed.)\r\nPreparing to unpack .../archives/apt_1.2.32_amd64.deb ...\r\nUnpacking apt (1.2.32) over (1.2.29ubuntu0.1) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\nSetting up apt (1.2.32) ...\r\nInstalling new version of config file /etc/apt/apt.conf.d/01autoremove ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\nSelecting previously unselected package libapt-inst2.0:amd64.\r\n(Reading database ... 13806 files and directories currently installed.)\r\nPreparing to unpack .../libapt-inst2.0_1.2.32_amd64.deb ...\r\nUnpacking libapt-inst2.0:amd64 (1.2.32) ...\r\nSelecting previously unselected package apt-utils.\r\nPreparing to unpack .../apt-utils_1.2.32_amd64.deb ...\r\nUnpacking apt-utils (1.2.32) ...\r\nSelecting previously unselected package libmysql-java.\r\nPreparing to unpack .../libmysql-java_5.1.38-1_all.deb ...\r\nUnpacking libmysql-java (5.1.38-1) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\nSetting up libapt-inst2.0:amd64 (1.2.32) ...\r\nSetting up apt-utils (1.2.32) ...\r\nSetting up libmysql-java (5.1.38-1) ...\r\nProcessing triggers for libc-bin (2.23-0ubuntu11) ...\r\nRemoving intermediate container 75c78a31155a\r\n ---> c36a0f77fc0d\r\nStep 7/31 : RUN ln -sf /usr/share/java/mysql-connector-java.jar /usr/local/druid/lib/mysql-connector-java.jar\r\n ---> Running in 8163029f2fc3\r\nRemoving intermediate container 8163029f2fc3\r\n ---> fcee6844fed7\r\nStep 8/31 : RUN find /var/lib/mysql -type f -exec touch {} \\; && service mysql start       && java -cp \"/usr/local/druid/lib/*\" -Ddruid.metadata.storage.type=mysql org.apache.druid.cli.Main tools metadata-init --connectURI=\"jdbc:mysql://localhost:3306/druid\" --user=druid --password=diurd       && /etc/init.d/mysql stop\r\n ---> Running in 3fa4e3e5aaf0\r\n * Starting MySQL database server mysqld\r\n   ...done.\r\nJun 06, 2019 1:42:21 PM org.hibernate.validator.internal.util.Version <clinit>\r\nINFO: HV000001: Hibernate Validator 5.1.3.Final\r\n2019-06-06T13:42:21,935 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.common.config.NullValueHandlingConfig] from props[druid.generic.] as [org.apache.druid.common.config.NullValueHandlingConfig@5fe1ce85]\r\n2019-06-06T13:42:21,971 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.guice.ExtensionsConfig] from props[druid.extensions.] as [ExtensionsConfig{searchCurrentClassloader=true, directory='extensions', useExtensionClassloaderFirst=false, hadoopDependenciesDir='hadoop-dependencies', hadoopContainerDruidClasspath='null', addExtensionsToHadoopContainer=false, loadList=null}]\r\n2019-06-06T13:42:22,068 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.guice.ModulesConfig] from props[druid.modules.] as [ModulesConfig{excludeList=[]}]\r\n2019-06-06T13:42:22,200 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.storage.s3.S3StorageDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,201 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.firehose.s3.S3FirehoseDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,204 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.common.gcp.GcpModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,205 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.metadata.storage.mysql.MySQLMetadataStorageModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,211 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.testing.guice.ITTLSCertificateCheckerModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,216 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.common.aws.AWSModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,219 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.histogram.ApproximateHistogramDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,221 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.security.basic.BasicSecurityDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,224 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.https.SSLContextModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,227 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.indexing.kafka.KafkaIndexTaskModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,231 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.server.lookup.namespace.NamespaceExtractionModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,241 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.theta.SketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,243 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.theta.oldapi.OldApiSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,245 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,288 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.tuple.ArrayOfDoublesSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:22,291 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.hll.HllSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:42:23,300 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[interface org.apache.druid.server.security.Escalator] from props[druid.escalator.] as [NoopEscalator{}]\r\n2019-06-06T13:42:23,313 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.curator.CuratorConfig] from props[druid.zk.service.] as [org.apache.druid.curator.CuratorConfig@23940f86]\r\n2019-06-06T13:42:23,321 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.curator.ExhibitorConfig] from props[druid.exhibitor.service.] as [org.apache.druid.curator.ExhibitorConfig@4a7a965d]\r\n2019-06-06T13:42:23,399 INFO [main] org.apache.curator.utils.Compatibility - Running in ZooKeeper 3.4.x compatibility mode\r\n2019-06-06T13:42:23,401 WARN [main] org.apache.curator.retry.ExponentialBackoffRetry - maxRetries too large (30). Pinning to 29\r\n2019-06-06T13:42:23,461 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.initialization.ZkPathsConfig] from props[druid.zk.paths.] as [org.apache.druid.server.initialization.ZkPathsConfig@58d3f4be]\r\n2019-06-06T13:42:23,468 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.security.AuthConfig] from props[druid.auth.] as [AuthConfig{authenticatorChain=null, authorizers=null, unsecuredPaths=[], allowUnauthenticatedHttpOptions=false}]\r\n2019-06-06T13:42:23,527 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.metrics.DruidMonitorSchedulerConfig] from props[druid.monitoring.] as [org.apache.druid.server.metrics.DruidMonitorSchedulerConfig@41b1f51e]\r\n2019-06-06T13:42:23,531 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.metrics.MonitorsConfig] from props[druid.monitoring.] as [MonitorsConfig{monitors=[]}]\r\n2019-06-06T13:42:23,532 INFO [main] org.apache.druid.server.emitter.EmitterModule - Underlying emitter for ServiceEmitter: org.apache.druid.java.util.emitter.core.NoopEmitter@64f1fd08\r\n2019-06-06T13:42:23,533 INFO [main] org.apache.druid.server.emitter.EmitterModule - Extra service dimensions: {version=0.16.0-incubating-SNAPSHOT}\r\n2019-06-06T13:42:23,535 INFO [main] org.apache.druid.server.metrics.MetricsModule - Adding monitor[org.apache.druid.query.ExecutorServiceMonitor@2e807c54]\r\n2019-06-06T13:42:23,536 INFO [main] org.apache.druid.server.metrics.MetricsModule - Adding monitor[org.apache.druid.server.initialization.jetty.JettyServerModule$JettyMonitor@4c18621b]\r\n2019-06-06T13:42:23,550 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.metadata.storage.mysql.MySQLConnectorConfig] from props[druid.metadata.mysql.ssl.] as [MySQLConnectorConfig{useSSL='false', clientCertificateKeyStoreUrl='null', clientCertificateKeyStoreType='null', verifyServerCertificate='false', trustCertificateKeyStoreUrl='null', trustCertificateKeyStoreType='null', enabledSSLCipherSuites=null, enabledTLSProtocols=null}]\r\n2019-06-06T13:42:23,632 INFO [main] org.apache.druid.metadata.storage.mysql.MySQLConnector - Configured MySQL as metadata storage\r\n2019-06-06T13:42:24,005 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_dataSource]\r\n2019-06-06T13:42:24,020 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_pendingSegments]\r\n2019-06-06T13:42:24,067 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_segments]\r\n2019-06-06T13:42:24,098 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_rules]\r\n2019-06-06T13:42:24,122 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_config]\r\n2019-06-06T13:42:24,135 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_tasks]\r\n2019-06-06T13:42:24,159 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_tasklogs]\r\n2019-06-06T13:42:24,180 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_tasklocks]\r\n2019-06-06T13:42:24,209 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_audit]\r\n2019-06-06T13:42:24,261 INFO [main] org.apache.druid.metadata.SQLMetadataConnector - Creating table[druid_supervisors]\r\n * Stopping MySQL database server mysqld\r\n   ...done.\r\nRemoving intermediate container 3fa4e3e5aaf0\r\n ---> 0d54a842d7ee\r\nStep 9/31 : ADD sample-data.sql sample-data.sql\r\n ---> 1d52173b3afc\r\nStep 10/31 : RUN find /var/lib/mysql -type f -exec touch {} \\; && service mysql start       && cat sample-data.sql | mysql -u root druid       && /etc/init.d/mysql stop\r\n ---> Running in 6990b5641d87\r\n * Starting MySQL database server mysqld\r\n   ...done.\r\n * Stopping MySQL database server mysqld\r\n   ...done.\r\nRemoving intermediate container 6990b5641d87\r\n ---> 5b3aee086457\r\nStep 11/31 : ADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf\r\n ---> 64f26b1d64f5\r\nStep 12/31 : ADD run-mysql.sh /run-mysql.sh\r\n ---> f1fd8daeae2d\r\nStep 13/31 : ADD docker_ip docker_ip\r\n ---> 1c7176a01685\r\nStep 14/31 : RUN perl -pi -e \"s/#listeners=.*/listeners=INTERNAL:\\/\\/172.172.172.2:9092,EXTERNAL:\\/\\/172.172.172.2:9093/\" /usr/local/kafka/config/server.properties\r\n ---> Running in 9291c8613f7e\r\nRemoving intermediate container 9291c8613f7e\r\n ---> 1f1048baf413\r\nStep 15/31 : RUN perl -pi -e \"s/#advertised.listeners=.*/advertised.listeners=INTERNAL:\\/\\/172.172.172.2:9092,EXTERNAL:\\/\\/$(cat docker_ip):9093/\" /usr/local/kafka/config/server.properties\r\n ---> Running in a1e30c7d1a67\r\nRemoving intermediate container a1e30c7d1a67\r\n ---> e2227d34c928\r\nStep 16/31 : RUN perl -pi -e \"s/#listener.security.protocol.map=.*/listener.security.protocol.map=INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT\\ninter.broker.listener.name=INTERNAL/\" /usr/local/kafka/config/server.properties\r\n ---> Running in 4e5eaa8875d3\r\nRemoving intermediate container 4e5eaa8875d3\r\n ---> e7d3b1581709\r\nStep 17/31 : RUN perl\r\n ---> Running in 65b54cd5cf40\r\nRemoving intermediate container 65b54cd5cf40\r\n ---> 1bcb3f61a3cd\r\nStep 18/31 : ADD tls tls\r\n ---> 7e713a39eb71\r\nStep 19/31 : ADD client_tls client_tls\r\n ---> 5664ca7b6a9c\r\nStep 20/31 : EXPOSE 8081 8281\r\n ---> Running in d22fa4da4a8c\r\nRemoving intermediate container d22fa4da4a8c\r\n ---> afcd54890a98\r\nStep 21/31 : EXPOSE 8082 8282\r\n ---> Running in fe3336b40391\r\nRemoving intermediate container fe3336b40391\r\n ---> 07b06b16190b\r\nStep 22/31 : EXPOSE 8083 8283\r\n ---> Running in 67aa05561e45\r\nRemoving intermediate container 67aa05561e45\r\n ---> 2cffe76dec56\r\nStep 23/31 : EXPOSE 8090 8290\r\n ---> Running in af6ccb8489d6\r\nRemoving intermediate container af6ccb8489d6\r\n ---> b2385a0c3227\r\nStep 24/31 : EXPOSE 8091 8291\r\n ---> Running in ba7f4b0ba113\r\nRemoving intermediate container ba7f4b0ba113\r\n ---> b6e5706a61e1\r\nStep 25/31 : EXPOSE 3306\r\n ---> Running in b32669a4e48f\r\nRemoving intermediate container b32669a4e48f\r\n ---> 49d60ebebe6e\r\nStep 26/31 : EXPOSE 2181 2888 3888\r\n ---> Running in 9c962d7880ec\r\nRemoving intermediate container 9c962d7880ec\r\n ---> 755625e6c02f\r\nStep 27/31 : EXPOSE 8100 8101 8102 8103 8104 8105\r\n ---> Running in eceb5521dcbb\r\nRemoving intermediate container eceb5521dcbb\r\n ---> 2af9955649e3\r\nStep 28/31 : EXPOSE 8300 8301 8302 8303 8304 8305\r\n ---> Running in 7495ce6836a6\r\nRemoving intermediate container 7495ce6836a6\r\n ---> e911f6b42218\r\nStep 29/31 : EXPOSE 9092 9093\r\n ---> Running in dc131e16a2af\r\nRemoving intermediate container dc131e16a2af\r\n ---> 572abadb4dff\r\nStep 30/31 : WORKDIR /var/lib/druid\r\n ---> Running in 3fe9f944bb74\r\nRemoving intermediate container 3fe9f944bb74\r\n ---> c1e03f9d06aa\r\nStep 31/31 : ENTRYPOINT export HOST_IP=\"$(resolveip -s $HOSTNAME)\" && /tls/generate-server-certs-and-keystores.sh && exec /usr/bin/supervisord -c /etc/supervisor/conf.d/supervisord.conf\r\n ---> Running in aba3405c1933\r\nRemoving intermediate container aba3405c1933\r\n ---> be3328500aeb\r\nSuccessfully built be3328500aeb\r\nSuccessfully tagged druid/cluster:latest\r\nbf2fc0f5bead287b10fbc2d124b2b5d3bdd1a188f0e12e2a14ebcdf1386898da\r\n6d3a0eb4a76e8eb9f8c5eecac44082013378423aff7671a25b16da7f91d33ecf\r\nfeb2523a9591f3f5b902af894ac6d714b21515818022164726e1a712b24fb4f8\r\nbea098ac043aa55be5deeb6fc7017e906a577a8951adf39fe3f6b610e02c3a80\r\nd958ef13675dcade612c374e1b59122f89b27f323658def73cdb495378d13978\r\necae9635c9ff6e4d64136579b88fa36c3c0c971e9566f7adf087ff2f4676cf13\r\nbe71b2eb1dca0f30ede32d570e0037ed35b5b3ac29ed44a86a9784b9a9be933d\r\n17a4628e2d2bdf8803aa7464a8d008c52b708aab9ae59598cde6961642087d26\r\n133d3aabf3742ba272fb405649c454c5d3203850fdf2b7dbdc81789cf24a68d6\r\n60a551811617b0e5be7baa3c0743daa00938c3e704fb527020ab32af6489559b\r\n966f61175d1d31baaf95a830aabe7dce1a3782e15486014ab16ad41dec07e7d1\r\n[INFO]\r\n[INFO] --- maven-failsafe-plugin:2.22.0:integration-test (integration-tests) @ druid-integration-tests ---\r\n[INFO]\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running org.apache.druid.tests.security.ITTLSTest\r\nJun 06, 2019 1:43:09 PM org.hibernate.validator.internal.util.Version <clinit>\r\nINFO: HV000001: Hibernate Validator 5.1.3.Final\r\n2019-06-06T13:43:09,402 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.common.config.NullValueHandlingConfig] from props[druid.generic.] as [org.apache.druid.common.config.NullValueHandlingConfig@59532566]\r\n2019-06-06T13:43:09,415 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.guice.ModulesConfig] from props[druid.modules.] as [ModulesConfig{excludeList=[]}]\r\n2019-06-06T13:43:09,533 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.guice.ExtensionsConfig] from props[druid.extensions.] as [ExtensionsConfig{searchCurrentClassloader=true, directory='extensions', useExtensionClassloaderFirst=false, hadoopDependenciesDir='hadoop-dependencies', hadoopContainerDruidClasspath='null', addExtensionsToHadoopContainer=false, loadList=null}]\r\n2019-06-06T13:43:09,537 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.testing.guice.ITTLSCertificateCheckerModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,540 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.storage.s3.S3StorageDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,541 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.firehose.s3.S3FirehoseDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,543 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.theta.SketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,544 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.theta.oldapi.OldApiSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,546 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.quantiles.DoublesSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,548 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.tuple.ArrayOfDoublesSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,550 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.datasketches.hll.HllSketchModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,553 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.query.aggregation.histogram.ApproximateHistogramDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,554 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.metadata.storage.mysql.MySQLMetadataStorageModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,556 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.indexing.kafka.KafkaIndexTaskModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,558 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.security.basic.BasicSecurityDruidModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,560 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.server.lookup.namespace.NamespaceExtractionModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,561 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.https.SSLContextModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,565 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.common.aws.AWSModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,568 INFO [main] org.apache.druid.initialization.Initialization - Adding implementation [org.apache.druid.common.gcp.GcpModule] for class [interface org.apache.druid.initialization.DruidModule] from classpath extension\r\n2019-06-06T13:43:09,611 WARN [main] org.apache.druid.initialization.Log4jShutterDownerModule - Shutdown callback registry expected class [org.apache.druid.common.config.Log4jShutdown] found [org.apache.logging.log4j.core.util.DefaultShutdownCallbackRegistry]. Skipping shutdown registry\r\n2019-06-06T13:43:10,444 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[interface org.apache.druid.server.security.Escalator] from props[druid.escalator.] as [NoopEscalator{}]\r\n2019-06-06T13:43:10,463 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[interface org.apache.druid.testing.IntegrationTestingConfigProvider] from props[druid.test.config.] as [org.apache.druid.testing.DockerConfigProvider@4ed5a1b0]\r\n2019-06-06T13:43:10,471 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.curator.ExhibitorConfig] from props[druid.exhibitor.service.] as [org.apache.druid.curator.ExhibitorConfig@2d0b05]\r\n2019-06-06T13:43:10,545 INFO [main] org.apache.curator.utils.Compatibility - Running in ZooKeeper 3.4.x compatibility mode\r\n2019-06-06T13:43:10,547 WARN [main] org.apache.curator.retry.ExponentialBackoffRetry - maxRetries too large (30). Pinning to 29\r\n2019-06-06T13:43:10,588 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.initialization.ZkPathsConfig] from props[druid.zk.paths.] as [org.apache.druid.server.initialization.ZkPathsConfig@58d3f4be]\r\n2019-06-06T13:43:10,596 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.security.AuthConfig] from props[druid.auth.] as [AuthConfig{authenticatorChain=null, authorizers=null, unsecuredPaths=[], allowUnauthenticatedHttpOptions=false}]\r\n2019-06-06T13:43:10,649 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.metrics.DruidMonitorSchedulerConfig] from props[druid.monitoring.] as [org.apache.druid.server.metrics.DruidMonitorSchedulerConfig@2c26ba07]\r\n2019-06-06T13:43:10,654 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.server.metrics.MonitorsConfig] from props[druid.monitoring.] as [MonitorsConfig{monitors=[]}]\r\n2019-06-06T13:43:10,658 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.java.util.emitter.core.LoggingEmitterConfig] from props[druid.emitter.logging.] as [LoggingEmitterConfig{loggerClass='org.apache.druid.java.util.emitter.core.LoggingEmitter', logLevel='info'}]\r\n2019-06-06T13:43:10,660 INFO [main] org.apache.druid.server.metrics.MetricsModule - Adding monitor[org.apache.druid.server.initialization.jetty.JettyServerModule$JettyMonitor@59c500f7]\r\n2019-06-06T13:43:10,679 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.https.SSLClientConfig] from props[druid.client.https.] as [SSLClientConfig{protocol='null', trustStoreType='null', trustStorePath='client_tls/truststore.jks', trustStoreAlgorithm='null', keyStorePath='client_tls/client.jks', keyStoreType='null', certAlias='druid', keyManagerFactoryAlgorithm='null', validateHostnames='null'}]\r\n2019-06-06T13:43:10,687 INFO [main] org.apache.druid.guice.JsonConfigurator - Loaded class[class org.apache.druid.guice.http.DruidHttpClientConfig] from props[druid.broker.http.] as [org.apache.druid.guice.http.DruidHttpClientConfig@13803a94]\r\n2019-06-06T13:43:10,690 INFO [main] org.apache.druid.https.SSLContextProvider - Creating SslContext for https client using config [SSLClientConfig{protocol='null', trustStoreType='null', trustStorePath='client_tls/truststore.jks', trustStoreAlgorithm='null', keyStorePath='client_tls/client.jks', keyStoreType='null', certAlias='druid', keyManagerFactoryAlgorithm='null', validateHostnames='null'}]\r\n[INFO]\r\n[INFO] Results:\r\n[INFO]\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO]\r\n[INFO]\r\n[INFO] --- maven-failsafe-plugin:2.22.0:verify (integration-tests) @ druid-integration-tests ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Summary:\r\n[INFO]\r\n[INFO] druid-integration-tests 0.16.0-incubating-SNAPSHOT . FAILURE [03:17 min]\r\n[INFO] druid-benchmarks ................................... SKIPPED\r\n[INFO] druid-avro-extensions .............................. SKIPPED\r\n[INFO] druid-bloom-filter ................................. SKIPPED\r\n[INFO] druid-kerberos ..................................... SKIPPED\r\n[INFO] druid-hdfs-storage ................................. SKIPPED\r\n[INFO] druid-stats ........................................ SKIPPED\r\n[INFO] druid-kafka-eight .................................. SKIPPED\r\n[INFO] druid-kafka-extraction-namespace ................... SKIPPED\r\n[INFO] druid-kinesis-indexing-service ..................... SKIPPED\r\n[INFO] druid-orc-extensions ............................... SKIPPED\r\n[INFO] druid-parquet-extensions ........................... SKIPPED\r\n[INFO] postgresql-metadata-storage ........................ SKIPPED\r\n[INFO] druid-protobuf-extensions .......................... SKIPPED\r\n[INFO] druid-lookups-cached-single ........................ SKIPPED\r\n[INFO] druid-ec2-extensions ............................... SKIPPED\r\n[INFO] druid-google-extensions ............................ SKIPPED\r\n[INFO] druid-influx-extensions ............................ SKIPPED\r\n[INFO] druid-azure-extensions ............................. SKIPPED\r\n[INFO] druid-cassandra-storage ............................ SKIPPED\r\n[INFO] druid-rocketmq ..................................... SKIPPED\r\n[INFO] druid-cloudfiles-extensions ........................ SKIPPED\r\n[INFO] graphite-emitter ................................... SKIPPED\r\n[INFO] druid-kafka-eight-simple-consumer .................. SKIPPED\r\n[INFO] druid-rabbitmq ..................................... SKIPPED\r\n[INFO] druid-distinctcount ................................ SKIPPED\r\n[INFO] statsd-emitter ..................................... SKIPPED\r\n[INFO] druid-time-min-max ................................. SKIPPED\r\n[INFO] druid-virtual-columns .............................. SKIPPED\r\n[INFO] druid-thrift-extensions ............................ SKIPPED\r\n[INFO] ambari-metrics-emitter ............................. SKIPPED\r\n[INFO] sqlserver-metadata-storage ......................... SKIPPED\r\n[INFO] kafka-emitter ...................................... SKIPPED\r\n[INFO] druid-redis-cache .................................. SKIPPED\r\n[INFO] druid-opentsdb-emitter ............................. SKIPPED\r\n[INFO] materialized-view-maintenance ...................... SKIPPED\r\n[INFO] materialized-view-selection ........................ SKIPPED\r\n[INFO] druid-momentsketch ................................. SKIPPED\r\n[INFO] druid-moving-average-query ......................... SKIPPED\r\n[INFO] tdigestsketch ...................................... SKIPPED\r\n[INFO] druid-influxdb-emitter ............................. SKIPPED\r\n[INFO] distribution 0.16.0-incubating-SNAPSHOT ............ SKIPPED\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500503667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500572615","html_url":"https://github.com/apache/druid/issues/7842#issuecomment-500572615","issue_url":"https://api.github.com/repos/apache/druid/issues/7842","id":500572615,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDU3MjYxNQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T20:01:54Z","updated_at":"2019-06-10T20:01:54Z","author_association":"CONTRIBUTOR","body":"Do you have logs from before that?\r\n\r\nThe cert generation should be happening before the section you pasted, e.g.:\r\n\r\n```\r\n[INFO] --- exec-maven-plugin:1.2.1:exec (build-and-start-druid-cluster) @ druid-integration-tests ---\r\nError response from daemon: No such container: druid-historical\r\nError response from daemon: No such container: druid-historical\r\nError response from daemon: No such container: druid-coordinator\r\nError response from daemon: No such container: druid-coordinator\r\nError response from daemon: No such container: druid-overlord\r\nError response from daemon: No such container: druid-overlord\r\nError response from daemon: No such container: druid-router\r\nError response from daemon: No such container: druid-router\r\nError response from daemon: No such container: druid-router-permissive-tls\r\nError response from daemon: No such container: druid-router-permissive-tls\r\nError response from daemon: No such container: druid-router-no-client-auth-tls\r\nError response from daemon: No such container: druid-router-no-client-auth-tls\r\nError response from daemon: No such container: druid-router-custom-check-tls\r\nError response from daemon: No such container: druid-router-custom-check-tls\r\nError response from daemon: No such container: druid-broker\r\nError response from daemon: No such container: druid-broker\r\nError response from daemon: No such container: druid-middlemanager\r\nError response from daemon: No such container: druid-middlemanager\r\nError response from daemon: No such container: druid-zookeeper-kafka\r\nError response from daemon: No such container: druid-zookeeper-kafka\r\nError response from daemon: No such container: druid-metadata-storage\r\nError response from daemon: No such container: druid-metadata-storage\r\nError response from daemon: network druid-it-net not found\r\nGenerating RSA private key, 4096 bit long modulus\r\n..........................................................................................................................................................................................................++\r\n...................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................++\r\ne is 65537 (0x10001)\r\nGenerating RSA private key, 4096 bit long modulus\r\n.........................................................................................++\r\n...........++\r\ne is 65537 (0x10001)\r\nGenerating RSA private key, 1024 bit long modulus\r\n...............++++++\r\n......++++++\r\ne is 65537 (0x10001)\r\nUsing configuration from root_for_expired_client.cnf\r\nCheck that the request matches the signature\r\nSignature ok\r\nCertificate Details:\r\n        Serial Number: 286331157 (0x11111115)\r\n        Validity\r\n```\r\n\r\nFrom run_cluster.sh:\r\n\r\n```\r\n# so docker IP addr will be known during docker build\r\necho ${DOCKER_IP:=127.0.0.1} > $DOCKERDIR/docker_ip\r\n\r\n# setup client keystore\r\n./docker/tls/generate-client-certs-and-keystores.sh\r\nrm -rf docker/client_tls\r\ncp -r client_tls docker/client_tls\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500572615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500618982","html_url":"https://github.com/apache/druid/pull/7588#issuecomment-500618982","issue_url":"https://api.github.com/repos/apache/druid/issues/7588","id":500618982,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDYxODk4Mg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T22:33:29Z","updated_at":"2019-06-10T22:46:01Z","author_association":"MEMBER","body":"There are currently a few missing pieces for this functionality to work with Druid ingestion transformations, since there are a handful of places that lack the value coercion that is happening in the expression selectors on the query side. I'm trying to hunt down all the areas that need fixed up so everything works as expected, and depending on how large of a change it is and how far reviewed this PR is before I get it finished, I might prefer to do as a follow-up PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500618982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500675760","html_url":"https://github.com/apache/druid/pull/7831#issuecomment-500675760","issue_url":"https://api.github.com/repos/apache/druid/issues/7831","id":500675760,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDY3NTc2MA==","user":{"login":"acdn-mpreston","id":33030320,"node_id":"MDQ6VXNlcjMzMDMwMzIw","avatar_url":"https://avatars.githubusercontent.com/u/33030320?v=4","gravatar_id":"","url":"https://api.github.com/users/acdn-mpreston","html_url":"https://github.com/acdn-mpreston","followers_url":"https://api.github.com/users/acdn-mpreston/followers","following_url":"https://api.github.com/users/acdn-mpreston/following{/other_user}","gists_url":"https://api.github.com/users/acdn-mpreston/gists{/gist_id}","starred_url":"https://api.github.com/users/acdn-mpreston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acdn-mpreston/subscriptions","organizations_url":"https://api.github.com/users/acdn-mpreston/orgs","repos_url":"https://api.github.com/users/acdn-mpreston/repos","events_url":"https://api.github.com/users/acdn-mpreston/events{/privacy}","received_events_url":"https://api.github.com/users/acdn-mpreston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T03:46:48Z","updated_at":"2019-06-11T03:46:48Z","author_association":"NONE","body":"I am actually running into issues further in the logic after ingestion starts back up after the internalRest completes. I am going to do some further testing and may need to resubmit a change to the PR that will address the issue I am hitting. \r\n\r\nThis is the error I am hitting. Looks like the metadata gets stored as a start sequence number in the DB and that is causing problems for the next update to the metadata:\r\n\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | java.lang.RuntimeException: org.skife.jdbi.v2.exceptions.CallbackFailedException: org.apache.druid.java.util.common.IAE: Expected instance of org.apache.druid.indexing.seekablestream.SeekableStreamStartSequenceNumbers, got org.apache.druid.indexing.seekablestream.SeekableStreamEndSequenceNumbers\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.perform(SegmentTransactionalInsertAction.java:125) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.perform(SegmentTransactionalInsertAction.java:46) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.LocalTaskActionClient.submit(LocalTaskActionClient.java:74) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.http.OverlordResource$4.apply(OverlordResource.java:481) [druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.http.OverlordResource$4.apply(OverlordResource.java:470) [druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.http.OverlordResource.asLeaderWith(OverlordResource.java:802) [druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.http.OverlordResource.doAction(OverlordResource.java:467) [druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat sun.reflect.GeneratedMethodAccessor208.invoke(Unknown Source) ~[?:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66-internal]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66-internal]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409) [jersey-server-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409) [jersey-servlet-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558) [jersey-servlet-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733) [jersey-servlet-1.19.3.jar:1.19.3]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [javax.servlet-api-3.1.0.jar:3.1.0]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:286) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:276) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:181) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:120) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:135) [guice-servlet-4.1.0.jar:?]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.http.RedirectFilter.doFilter(RedirectFilter.java:71) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.security.PreResponseAuthorizationCheckFilter.doFilter(PreResponseAuthorizationCheckFilter.java:82) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.security.AllowOptionsResourceFilter.doFilter(AllowOptionsResourceFilter.java:75) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.security.AllowAllAuthenticator$1.doFilter(AllowAllAuthenticator.java:84) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.security.AuthenticationWrappingFilter.doFilter(AuthenticationWrappingFilter.java:59) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.server.security.SecuritySanityCheckFilter.doFilter(SecuritySanityCheckFilter.java:86) [druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1642) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:724) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.HandlerList.handle(HandlerList.java:61) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.Server.handle(Server.java:531) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281) [jetty-io-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) [jetty-io-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) [jetty-io-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:760) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:678) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_66-internal]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | Caused by: org.skife.jdbi.v2.exceptions.CallbackFailedException: org.apache.druid.java.util.common.IAE: Expected instance of org.apache.druid.indexing.seekablestream.SeekableStreamStartSequenceNumbers, got org.apache.druid.indexing.seekablestream.SeekableStreamEndSequenceNumbers\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.DBI.withHandle(DBI.java:284) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.DBI.inTransaction(DBI.java:353) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.SQLMetadataConnector.lambda$retryTransaction$1(SQLMetadataConnector.java:148) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.java.util.common.RetryUtils.retry(RetryUtils.java:86) ~[druid-core-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.java.util.common.RetryUtils.retry(RetryUtils.java:114) ~[druid-core-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.SQLMetadataConnector.retryTransaction(SQLMetadataConnector.java:148) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.IndexerSQLMetadataStorageCoordinator.announceHistoricalSegments(IndexerSQLMetadataStorageCoordinator.java:285) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.lambda$perform$0(SegmentTransactionalInsertAction.java:114) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.CriticalAction.perform(CriticalAction.java:53) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.TaskLockbox.doInCriticalSection(TaskLockbox.java:627) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.perform(SegmentTransactionalInsertAction.java:109) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \t... 72 more\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | Caused by: org.apache.druid.java.util.common.IAE: Expected instance of org.apache.druid.indexing.seekablestream.SeekableStreamStartSequenceNumbers, got org.apache.druid.indexing.seekablestream.SeekableStreamEndSequenceNumbers\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.seekablestream.SeekableStreamStartSequenceNumbers.plus(SeekableStreamStartSequenceNumbers.java:93) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.seekablestream.SeekableStreamDataSourceMetadata.plus(SeekableStreamDataSourceMetadata.java:77) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.IndexerSQLMetadataStorageCoordinator.updateDataSourceMetadataWithHandle(IndexerSQLMetadataStorageCoordinator.java:906) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.IndexerSQLMetadataStorageCoordinator$1.inTransaction(IndexerSQLMetadataStorageCoordinator.java:300) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.IndexerSQLMetadataStorageCoordinator$1.inTransaction(IndexerSQLMetadataStorageCoordinator.java:287) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.tweak.transactions.LocalTransactionHandler.inTransaction(LocalTransactionHandler.java:184) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.tweak.transactions.LocalTransactionHandler.inTransaction(LocalTransactionHandler.java:216) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.BasicHandle.inTransaction(BasicHandle.java:350) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.DBI$7.withHandle(DBI.java:357) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.DBI.withHandle(DBI.java:281) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.skife.jdbi.v2.DBI.inTransaction(DBI.java:353) ~[jdbi-2.63.1.jar:2.63.1]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.SQLMetadataConnector.lambda$retryTransaction$1(SQLMetadataConnector.java:148) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.java.util.common.RetryUtils.retry(RetryUtils.java:86) ~[druid-core-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.java.util.common.RetryUtils.retry(RetryUtils.java:114) ~[druid-core-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.SQLMetadataConnector.retryTransaction(SQLMetadataConnector.java:148) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.metadata.IndexerSQLMetadataStorageCoordinator.announceHistoricalSegments(IndexerSQLMetadataStorageCoordinator.java:285) ~[druid-server-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.lambda$perform$0(SegmentTransactionalInsertAction.java:114) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.CriticalAction.perform(CriticalAction.java:53) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.overlord.TaskLockbox.doInCriticalSection(TaskLockbox.java:627) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \tat org.apache.druid.indexing.common.actions.SegmentTransactionalInsertAction.perform(SegmentTransactionalInsertAction.java:109) ~[druid-indexing-service-0.14.1-incubating-SNAPSHOT.jar:0.14.1-incubating-SNAPSHOT]\r\naod_overlord.1.pdwnux00fc3t@europe-leader-q27v    | \t... 72 more","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500675760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500904844","html_url":"https://github.com/apache/druid/pull/7863#issuecomment-500904844","issue_url":"https://api.github.com/repos/apache/druid/issues/7863","id":500904844,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDkwNDg0NA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T15:51:51Z","updated_at":"2019-06-11T15:51:51Z","author_association":"CONTRIBUTOR","body":"@vogievetsky can you fix conflicts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500904844/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500954746","html_url":"https://github.com/apache/druid/issues/7207#issuecomment-500954746","issue_url":"https://api.github.com/repos/apache/druid/issues/7207","id":500954746,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDk1NDc0Ng==","user":{"login":"john-bodley","id":4567245,"node_id":"MDQ6VXNlcjQ1NjcyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/4567245?v=4","gravatar_id":"","url":"https://api.github.com/users/john-bodley","html_url":"https://github.com/john-bodley","followers_url":"https://api.github.com/users/john-bodley/followers","following_url":"https://api.github.com/users/john-bodley/following{/other_user}","gists_url":"https://api.github.com/users/john-bodley/gists{/gist_id}","starred_url":"https://api.github.com/users/john-bodley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/john-bodley/subscriptions","organizations_url":"https://api.github.com/users/john-bodley/orgs","repos_url":"https://api.github.com/users/john-bodley/repos","events_url":"https://api.github.com/users/john-bodley/events{/privacy}","received_events_url":"https://api.github.com/users/john-bodley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T17:56:18Z","updated_at":"2019-06-11T17:56:18Z","author_association":"MEMBER","body":"Confirmed that this works correctly on `0.13.0`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500954746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500957592","html_url":"https://github.com/apache/druid/pull/7863#issuecomment-500957592","issue_url":"https://api.github.com/repos/apache/druid/issues/7863","id":500957592,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDk1NzU5Mg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T18:04:09Z","updated_at":"2019-06-11T18:04:09Z","author_association":"CONTRIBUTOR","body":"Resolved conflicts","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500957592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500963555","html_url":"https://github.com/apache/druid/issues/7834#issuecomment-500963555","issue_url":"https://api.github.com/repos/apache/druid/issues/7834","id":500963555,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDk2MzU1NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T18:19:31Z","updated_at":"2019-06-11T18:19:31Z","author_association":"MEMBER","body":"There is a Gradle plugin for that: https://github.com/JetBrains/inspection-plugin\r\n\r\nLately, I frequently have a thought that it would be nice to move the project to Gradle because Maven builds take too long. Gradle's incremental builds are much more powerful.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500963555/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/500978513","html_url":"https://github.com/apache/druid/pull/7799#issuecomment-500978513","issue_url":"https://api.github.com/repos/apache/druid/issues/7799","id":500978513,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDk3ODUxMw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T19:00:08Z","updated_at":"2019-06-11T19:00:08Z","author_association":"CONTRIBUTOR","body":"This looks great  \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/500978513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501006522","html_url":"https://github.com/apache/druid/issues/7866#issuecomment-501006522","issue_url":"https://api.github.com/repos/apache/druid/issues/7866","id":501006522,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTAwNjUyMg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T20:18:24Z","updated_at":"2019-06-11T20:18:24Z","author_association":"CONTRIBUTOR","body":"composite build in gradle is quite nice, and would allow people to setup a mono repo with druid as one of the components.\r\n\r\nIt *might* be possible to have a gradle build but as a Maven plugin rather than pure gradle. Would that work in this case?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501006522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501066456","html_url":"https://github.com/apache/druid/issues/550#issuecomment-501066456","issue_url":"https://api.github.com/repos/apache/druid/issues/550","id":501066456,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTA2NjQ1Ng==","user":{"login":"tarekrached","id":167218,"node_id":"MDQ6VXNlcjE2NzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/167218?v=4","gravatar_id":"","url":"https://api.github.com/users/tarekrached","html_url":"https://github.com/tarekrached","followers_url":"https://api.github.com/users/tarekrached/followers","following_url":"https://api.github.com/users/tarekrached/following{/other_user}","gists_url":"https://api.github.com/users/tarekrached/gists{/gist_id}","starred_url":"https://api.github.com/users/tarekrached/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarekrached/subscriptions","organizations_url":"https://api.github.com/users/tarekrached/orgs","repos_url":"https://api.github.com/users/tarekrached/repos","events_url":"https://api.github.com/users/tarekrached/events{/privacy}","received_events_url":"https://api.github.com/users/tarekrached/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T23:53:05Z","updated_at":"2019-06-11T23:53:05Z","author_association":"CONTRIBUTOR","body":"fantastic","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501066456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501066553","html_url":"https://github.com/apache/druid/issues/591#issuecomment-501066553","issue_url":"https://api.github.com/repos/apache/druid/issues/591","id":501066553,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTA2NjU1Mw==","user":{"login":"tarekrached","id":167218,"node_id":"MDQ6VXNlcjE2NzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/167218?v=4","gravatar_id":"","url":"https://api.github.com/users/tarekrached","html_url":"https://github.com/tarekrached","followers_url":"https://api.github.com/users/tarekrached/followers","following_url":"https://api.github.com/users/tarekrached/following{/other_user}","gists_url":"https://api.github.com/users/tarekrached/gists{/gist_id}","starred_url":"https://api.github.com/users/tarekrached/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarekrached/subscriptions","organizations_url":"https://api.github.com/users/tarekrached/orgs","repos_url":"https://api.github.com/users/tarekrached/repos","events_url":"https://api.github.com/users/tarekrached/events{/privacy}","received_events_url":"https://api.github.com/users/tarekrached/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T23:53:39Z","updated_at":"2019-06-11T23:53:39Z","author_association":"CONTRIBUTOR","body":"miss u vad ;)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501066553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501082036","html_url":"https://github.com/apache/druid/issues/7836#issuecomment-501082036","issue_url":"https://api.github.com/repos/apache/druid/issues/7836","id":501082036,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTA4MjAzNg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T01:14:47Z","updated_at":"2019-06-12T01:14:47Z","author_association":"CONTRIBUTOR","body":"Related to https://github.com/apache/incubator-druid/issues/7869.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501082036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501170960","html_url":"https://github.com/apache/druid/pull/7810#issuecomment-501170960","issue_url":"https://api.github.com/repos/apache/druid/issues/7810","id":501170960,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTE3MDk2MA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T08:21:53Z","updated_at":"2019-06-12T08:21:53Z","author_association":"CONTRIBUTOR","body":"@gianm Anything more required to get this merged? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501170960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501231837","html_url":"https://github.com/apache/druid/issues/7029#issuecomment-501231837","issue_url":"https://api.github.com/repos/apache/druid/issues/7029","id":501231837,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTIzMTgzNw==","user":{"login":"lkm","id":1745971,"node_id":"MDQ6VXNlcjE3NDU5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1745971?v=4","gravatar_id":"","url":"https://api.github.com/users/lkm","html_url":"https://github.com/lkm","followers_url":"https://api.github.com/users/lkm/followers","following_url":"https://api.github.com/users/lkm/following{/other_user}","gists_url":"https://api.github.com/users/lkm/gists{/gist_id}","starred_url":"https://api.github.com/users/lkm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lkm/subscriptions","organizations_url":"https://api.github.com/users/lkm/orgs","repos_url":"https://api.github.com/users/lkm/repos","events_url":"https://api.github.com/users/lkm/events{/privacy}","received_events_url":"https://api.github.com/users/lkm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T11:26:30Z","updated_at":"2019-06-12T11:26:30Z","author_association":"CONTRIBUTOR","body":"@kamaci did you continue to work on this? I'm running into the same requirements","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501231837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501338847","html_url":"https://github.com/apache/druid/issues/7874#issuecomment-501338847","issue_url":"https://api.github.com/repos/apache/druid/issues/7874","id":501338847,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTMzODg0Nw==","user":{"login":"nl-brett-stime","id":45831302,"node_id":"MDQ6VXNlcjQ1ODMxMzAy","avatar_url":"https://avatars.githubusercontent.com/u/45831302?v=4","gravatar_id":"","url":"https://api.github.com/users/nl-brett-stime","html_url":"https://github.com/nl-brett-stime","followers_url":"https://api.github.com/users/nl-brett-stime/followers","following_url":"https://api.github.com/users/nl-brett-stime/following{/other_user}","gists_url":"https://api.github.com/users/nl-brett-stime/gists{/gist_id}","starred_url":"https://api.github.com/users/nl-brett-stime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nl-brett-stime/subscriptions","organizations_url":"https://api.github.com/users/nl-brett-stime/orgs","repos_url":"https://api.github.com/users/nl-brett-stime/repos","events_url":"https://api.github.com/users/nl-brett-stime/events{/privacy}","received_events_url":"https://api.github.com/users/nl-brett-stime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T15:57:12Z","updated_at":"2019-06-12T15:57:12Z","author_association":"NONE","body":"Nevermind. I think my github-fu failed. I'd selected the tag and searched for `PostgresqlFirehoseDatabaseConnector` and found results but it maybe the search results were actually from downstream of `druid-0.14.2-incubating`. Anyway, after cloning and pulling what must've been half of the public Maven repo I'm now seeing that the class isn't present at that tag.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501338847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501384983","html_url":"https://github.com/apache/druid/pull/7863#issuecomment-501384983","issue_url":"https://api.github.com/repos/apache/druid/issues/7863","id":501384983,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTM4NDk4Mw==","user":{"login":"lorem--ipsum","id":1224709,"node_id":"MDQ6VXNlcjEyMjQ3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1224709?v=4","gravatar_id":"","url":"https://api.github.com/users/lorem--ipsum","html_url":"https://github.com/lorem--ipsum","followers_url":"https://api.github.com/users/lorem--ipsum/followers","following_url":"https://api.github.com/users/lorem--ipsum/following{/other_user}","gists_url":"https://api.github.com/users/lorem--ipsum/gists{/gist_id}","starred_url":"https://api.github.com/users/lorem--ipsum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorem--ipsum/subscriptions","organizations_url":"https://api.github.com/users/lorem--ipsum/orgs","repos_url":"https://api.github.com/users/lorem--ipsum/repos","events_url":"https://api.github.com/users/lorem--ipsum/events{/privacy}","received_events_url":"https://api.github.com/users/lorem--ipsum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T17:51:39Z","updated_at":"2019-06-12T17:51:39Z","author_association":"CONTRIBUTOR","body":"I'm a little confused by the presence of the \"reset\" sub-section in the \"Start up druid services\" section:\r\n![image](https://user-images.githubusercontent.com/1224709/59374089-e8b16600-8cff-11e9-8d7e-b702847aca96.png)\r\n\r\nMaybe it could be live a little further?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501384983/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501414253","html_url":"https://github.com/apache/druid/pull/7873#issuecomment-501414253","issue_url":"https://api.github.com/repos/apache/druid/issues/7873","id":501414253,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTQxNDI1Mw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T19:06:06Z","updated_at":"2019-06-12T19:06:06Z","author_association":"CONTRIBUTOR","body":"How are is this tool getting run? I am adding a ton of images as part of https://github.com/apache/incubator-druid/pull/7863 and would like to compress them also (also there will probably be conflicts with this PR","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501414253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501454563","html_url":"https://github.com/apache/druid/pull/7871#issuecomment-501454563","issue_url":"https://api.github.com/repos/apache/druid/issues/7871","id":501454563,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTQ1NDU2Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T21:03:43Z","updated_at":"2019-06-12T21:03:43Z","author_association":"CONTRIBUTOR","body":"The integration tests part 1 failed because of the timeout of Travis. I ran them manually in my laptop and they succeeded. I'm going to merge this PR shortly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501454563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501454999","html_url":"https://github.com/apache/druid/issues/7869#issuecomment-501454999","issue_url":"https://api.github.com/repos/apache/druid/issues/7869","id":501454999,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTQ1NDk5OQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T21:05:04Z","updated_at":"2019-06-12T21:05:04Z","author_association":"CONTRIBUTOR","body":"Fixed in #7871.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501454999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501521351","html_url":"https://github.com/apache/druid/pull/7873#issuecomment-501521351","issue_url":"https://api.github.com/repos/apache/druid/issues/7873","id":501521351,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTUyMTM1MQ==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T02:11:59Z","updated_at":"2019-06-13T02:11:59Z","author_association":"MEMBER","body":"Hi, @vogievetsky . I tried to install `ImgBot` in Apache Druid, but I don't have this permission. So, I have to create a PR to submit these optimizations. If necessary, then I will create another PR after the #7863 has been merged.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501521351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501549353","html_url":"https://github.com/apache/druid/issues/7836#issuecomment-501549353","issue_url":"https://api.github.com/repos/apache/druid/issues/7836","id":501549353,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTU0OTM1Mw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T05:02:18Z","updated_at":"2019-06-13T05:02:18Z","author_association":"CONTRIBUTOR","body":"With  #7871 this issue will be fully fixed in the 0.15.0 release.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501549353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501574859","html_url":"https://github.com/apache/druid/issues/7879#issuecomment-501574859","issue_url":"https://api.github.com/repos/apache/druid/issues/7879","id":501574859,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTU3NDg1OQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T06:57:00Z","updated_at":"2019-06-13T06:57:00Z","author_association":"CONTRIBUTOR","body":"The list should also include the `sys.*` tables","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501574859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501692564","html_url":"https://github.com/apache/druid/pull/7838#issuecomment-501692564","issue_url":"https://api.github.com/repos/apache/druid/issues/7838","id":501692564,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTY5MjU2NA==","user":{"login":"eranmeir","id":888803,"node_id":"MDQ6VXNlcjg4ODgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/888803?v=4","gravatar_id":"","url":"https://api.github.com/users/eranmeir","html_url":"https://github.com/eranmeir","followers_url":"https://api.github.com/users/eranmeir/followers","following_url":"https://api.github.com/users/eranmeir/following{/other_user}","gists_url":"https://api.github.com/users/eranmeir/gists{/gist_id}","starred_url":"https://api.github.com/users/eranmeir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eranmeir/subscriptions","organizations_url":"https://api.github.com/users/eranmeir/orgs","repos_url":"https://api.github.com/users/eranmeir/repos","events_url":"https://api.github.com/users/eranmeir/events{/privacy}","received_events_url":"https://api.github.com/users/eranmeir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T13:00:58Z","updated_at":"2019-06-13T13:00:58Z","author_association":"NONE","body":"@leventov thanks for properly tagging this. Would greatly appreciate it if you could review the changes and/or tag relevant committers. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501692564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501738320","html_url":"https://github.com/apache/druid/issues/7837#issuecomment-501738320","issue_url":"https://api.github.com/repos/apache/druid/issues/7837","id":501738320,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTczODMyMA==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T14:54:12Z","updated_at":"2019-06-13T14:54:12Z","author_association":"CONTRIBUTOR","body":"@h00173922 \r\n`Unable to obtain password from user` is generally thrown from Java Kerberos classes and happens when it cannot use the keytab successfully (typically when it has no access to the keytab file or the file doesn't exist). When that happens, it will fallback to a prompt asking for password and this would almost always timeout and fail with that error message.\r\nSo you should probably check if the keytab is accessible by the user running the druid process.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501738320/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501746673","html_url":"https://github.com/apache/druid/issues/7884#issuecomment-501746673","issue_url":"https://api.github.com/repos/apache/druid/issues/7884","id":501746673,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTc0NjY3Mw==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T15:13:38Z","updated_at":"2019-06-13T15:13:38Z","author_association":"CONTRIBUTOR","body":"Due to some of the known issues with ZK, I believe there is an effort to reduce ZK dependency as much as possible. Relevant PRs/issues:\r\n#5104 #4966 #2312\r\nhttps://groups.google.com/forum/#!msg/druid-development/eIWDPfhpM_U/AzMRxSQGAgAJ\r\n\r\nWouldn't bundling ZK along with Druid push us in the opposite direction?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501746673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501749821","html_url":"https://github.com/apache/druid/issues/7884#issuecomment-501749821","issue_url":"https://api.github.com/repos/apache/druid/issues/7884","id":501749821,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTc0OTgyMQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T15:21:15Z","updated_at":"2019-06-13T15:21:15Z","author_association":"CONTRIBUTOR","body":"Agree with @vogievetsky. We're far away from removing our ZK dependency and it should be bundled with Druid.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501749821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501835469","html_url":"https://github.com/apache/druid/issues/7886#issuecomment-501835469","issue_url":"https://api.github.com/repos/apache/druid/issues/7886","id":501835469,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTgzNTQ2OQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T18:54:33Z","updated_at":"2019-06-13T18:54:33Z","author_association":"CONTRIBUTOR","body":"Hi @xvrl  \r\nDo you know if this a 0.15.0 regression?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501835469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501894156","html_url":"https://github.com/apache/druid/issues/7886#issuecomment-501894156","issue_url":"https://api.github.com/repos/apache/druid/issues/7886","id":501894156,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTg5NDE1Ng==","user":{"login":"xvrl","id":815147,"node_id":"MDQ6VXNlcjgxNTE0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/815147?v=4","gravatar_id":"","url":"https://api.github.com/users/xvrl","html_url":"https://github.com/xvrl","followers_url":"https://api.github.com/users/xvrl/followers","following_url":"https://api.github.com/users/xvrl/following{/other_user}","gists_url":"https://api.github.com/users/xvrl/gists{/gist_id}","starred_url":"https://api.github.com/users/xvrl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvrl/subscriptions","organizations_url":"https://api.github.com/users/xvrl/orgs","repos_url":"https://api.github.com/users/xvrl/repos","events_url":"https://api.github.com/users/xvrl/events{/privacy}","received_events_url":"https://api.github.com/users/xvrl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T21:59:00Z","updated_at":"2019-06-13T21:59:00Z","author_association":"MEMBER","body":"@vogievetsky looks like this startup behavior has been around since https://github.com/apache/incubator-druid/pull/5104/files . I'll have to look if the creation of empty completed task files is a regression or not","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501894156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501906246","html_url":"https://github.com/apache/druid/issues/7886#issuecomment-501906246","issue_url":"https://api.github.com/repos/apache/druid/issues/7886","id":501906246,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTkwNjI0Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T22:50:00Z","updated_at":"2019-06-13T22:50:00Z","author_association":"CONTRIBUTOR","body":"Yeah the 'Ignored.' is wrong at least.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501906246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501919772","html_url":"https://github.com/apache/druid/pull/7888#issuecomment-501919772","issue_url":"https://api.github.com/repos/apache/druid/issues/7888","id":501919772,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTkxOTc3Mg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T23:57:53Z","updated_at":"2019-06-13T23:57:53Z","author_association":"CONTRIBUTOR","body":"Looks great  thank you","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501919772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501950900","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-501950900","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":501950900,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTk1MDkwMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T03:06:06Z","updated_at":"2019-06-14T03:06:06Z","author_association":"CONTRIBUTOR","body":"@SandishKumarHN thanks for your contribution.\r\n\r\nI'm wondering why it took so long time. This test is supposed to finish really quickly. It took 1.255 sec in Intellij with my laptop. It took even shorter time in [Travis](https://travis-ci.org/apache/incubator-druid/jobs/545534922) as seen below:\r\n\r\n```\r\nRunning org.apache.druid.server.SegmentManagerThreadSafetyTest\r\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.304 sec - in org.apache.druid.server.SegmentManagerThreadSafetyTest\r\n```\r\n\r\nIf it took 6 seconds, I suspect something might go wrong with parallel segment loading. As I asked in the dev mailing list, would you please check there is any suspicious behavior in thread dump? I'm wondering what took so much time. If it's a sort of bug, we should fix it rather than increasing timeout.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501950900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501951582","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-501951582","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":501951582,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTk1MTU4Mg==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T03:10:35Z","updated_at":"2019-06-14T04:38:15Z","author_association":"CONTRIBUTOR","body":"@jihoonson in thread dump, I don't see anything related to any test or to this particular test SegmentManagerThreadSafetyTest, I all see is GC loggings. in SegmentManagerThreadSafetyTest there is a future method waiting for the result ? not sure how to calculate the response time. I will double check.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501951582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/501959644","html_url":"https://github.com/apache/druid/issues/7877#issuecomment-501959644","issue_url":"https://api.github.com/repos/apache/druid/issues/7877","id":501959644,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTk1OTY0NA==","user":{"login":"z1q1q7","id":8744267,"node_id":"MDQ6VXNlcjg3NDQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8744267?v=4","gravatar_id":"","url":"https://api.github.com/users/z1q1q7","html_url":"https://github.com/z1q1q7","followers_url":"https://api.github.com/users/z1q1q7/followers","following_url":"https://api.github.com/users/z1q1q7/following{/other_user}","gists_url":"https://api.github.com/users/z1q1q7/gists{/gist_id}","starred_url":"https://api.github.com/users/z1q1q7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/z1q1q7/subscriptions","organizations_url":"https://api.github.com/users/z1q1q7/orgs","repos_url":"https://api.github.com/users/z1q1q7/repos","events_url":"https://api.github.com/users/z1q1q7/events{/privacy}","received_events_url":"https://api.github.com/users/z1q1q7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T04:03:06Z","updated_at":"2019-06-14T04:03:06Z","author_association":"NONE","body":"I dump rows with **dump-segment** tools, and found that same <timestamp, dimensions> have different effective metrics(in my scene, different metrics will push at different time) in different persist files. So I guess query had not merge the result(missing metrics were filled with zero). ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/501959644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502014363","html_url":"https://github.com/apache/druid/issues/7864#issuecomment-502014363","issue_url":"https://api.github.com/repos/apache/druid/issues/7864","id":502014363,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjAxNDM2Mw==","user":{"login":"scheshan","id":7234391,"node_id":"MDQ6VXNlcjcyMzQzOTE=","avatar_url":"https://avatars.githubusercontent.com/u/7234391?v=4","gravatar_id":"","url":"https://api.github.com/users/scheshan","html_url":"https://github.com/scheshan","followers_url":"https://api.github.com/users/scheshan/followers","following_url":"https://api.github.com/users/scheshan/following{/other_user}","gists_url":"https://api.github.com/users/scheshan/gists{/gist_id}","starred_url":"https://api.github.com/users/scheshan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scheshan/subscriptions","organizations_url":"https://api.github.com/users/scheshan/orgs","repos_url":"https://api.github.com/users/scheshan/repos","events_url":"https://api.github.com/users/scheshan/events{/privacy}","received_events_url":"https://api.github.com/users/scheshan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T08:13:02Z","updated_at":"2019-06-14T08:13:02Z","author_association":"NONE","body":"Fixed. Our historic nodes are full of memory so cannot handle jobs.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502014363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502014387","html_url":"https://github.com/apache/druid/pull/7807#issuecomment-502014387","issue_url":"https://api.github.com/repos/apache/druid/issues/7807","id":502014387,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjAxNDM4Nw==","user":{"login":"Stephan3555","id":2537072,"node_id":"MDQ6VXNlcjI1MzcwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/2537072?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan3555","html_url":"https://github.com/Stephan3555","followers_url":"https://api.github.com/users/Stephan3555/followers","following_url":"https://api.github.com/users/Stephan3555/following{/other_user}","gists_url":"https://api.github.com/users/Stephan3555/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan3555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan3555/subscriptions","organizations_url":"https://api.github.com/users/Stephan3555/orgs","repos_url":"https://api.github.com/users/Stephan3555/repos","events_url":"https://api.github.com/users/Stephan3555/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan3555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T08:13:07Z","updated_at":"2019-06-14T08:13:22Z","author_association":"NONE","body":"We are running currently in the same issue. Is there a quickfix to solve this manually right now?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502014387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502035506","html_url":"https://github.com/apache/druid/issues/7824#issuecomment-502035506","issue_url":"https://api.github.com/repos/apache/druid/issues/7824","id":502035506,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjAzNTUwNg==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T09:16:07Z","updated_at":"2019-06-14T09:16:07Z","author_association":"NONE","body":"I found a lot of ```Allocating new littleEndByteBuf``` operations in the log. \r\nFinally, allocated 333023 littleEndByteBuf and the usage of direct memory arrived 18GB, and OS killed this task.\r\nThe ingested data was very small, just 2GB in six hours, and all the dimensions have very low cardinality. \r\nWhy the task need so many direct memory?\r\n@himanshug \r\nCan you give me some advices?  Thank you so much!\r\n```\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,020]\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,021]\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,022]\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,023]\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,024]\r\n2019-06-14T06:24:34,445 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,025]\r\n2019-06-14T06:24:34,446 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,026]\r\n2019-06-14T06:24:34,446 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,027]\r\n2019-06-14T06:24:34,446 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,028]\r\n2019-06-14T06:24:34,446 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,029]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502035506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502054701","html_url":"https://github.com/apache/druid/pull/7764#issuecomment-502054701","issue_url":"https://api.github.com/repos/apache/druid/issues/7764","id":502054701,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjA1NDcwMQ==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T10:15:56Z","updated_at":"2019-06-14T10:15:56Z","author_association":"CONTRIBUTOR","body":"@leventov Please review. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502054701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502073319","html_url":"https://github.com/apache/druid/pull/7876#issuecomment-502073319","issue_url":"https://api.github.com/repos/apache/druid/issues/7876","id":502073319,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjA3MzMxOQ==","user":{"login":"dylwylie","id":3107079,"node_id":"MDQ6VXNlcjMxMDcwNzk=","avatar_url":"https://avatars.githubusercontent.com/u/3107079?v=4","gravatar_id":"","url":"https://api.github.com/users/dylwylie","html_url":"https://github.com/dylwylie","followers_url":"https://api.github.com/users/dylwylie/followers","following_url":"https://api.github.com/users/dylwylie/following{/other_user}","gists_url":"https://api.github.com/users/dylwylie/gists{/gist_id}","starred_url":"https://api.github.com/users/dylwylie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dylwylie/subscriptions","organizations_url":"https://api.github.com/users/dylwylie/orgs","repos_url":"https://api.github.com/users/dylwylie/repos","events_url":"https://api.github.com/users/dylwylie/events{/privacy}","received_events_url":"https://api.github.com/users/dylwylie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T11:28:02Z","updated_at":"2019-06-14T11:28:02Z","author_association":"CONTRIBUTOR","body":"No complaints but curious if there's any particular motivation or anything cool that this enables?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502073319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502165078","html_url":"https://github.com/apache/druid/pull/7764#issuecomment-502165078","issue_url":"https://api.github.com/repos/apache/druid/issues/7764","id":502165078,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjE2NTA3OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T15:59:22Z","updated_at":"2019-06-14T15:59:22Z","author_association":"MEMBER","body":"The PR doesn't require my review because it has one approval from a committer and it's not tagged `Design Review`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502165078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502199495","html_url":"https://github.com/apache/druid/pull/7764#issuecomment-502199495","issue_url":"https://api.github.com/repos/apache/druid/issues/7764","id":502199495,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjE5OTQ5NQ==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T17:36:49Z","updated_at":"2019-06-14T17:36:49Z","author_association":"CONTRIBUTOR","body":"Thanks @leventov.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502199495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502213363","html_url":"https://github.com/apache/druid/pull/7082#issuecomment-502213363","issue_url":"https://api.github.com/repos/apache/druid/issues/7082","id":502213363,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjIxMzM2Mw==","user":{"login":"scrawfor","id":7061689,"node_id":"MDQ6VXNlcjcwNjE2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7061689?v=4","gravatar_id":"","url":"https://api.github.com/users/scrawfor","html_url":"https://github.com/scrawfor","followers_url":"https://api.github.com/users/scrawfor/followers","following_url":"https://api.github.com/users/scrawfor/following{/other_user}","gists_url":"https://api.github.com/users/scrawfor/gists{/gist_id}","starred_url":"https://api.github.com/users/scrawfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scrawfor/subscriptions","organizations_url":"https://api.github.com/users/scrawfor/orgs","repos_url":"https://api.github.com/users/scrawfor/repos","events_url":"https://api.github.com/users/scrawfor/events{/privacy}","received_events_url":"https://api.github.com/users/scrawfor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T18:20:00Z","updated_at":"2019-06-14T18:20:00Z","author_association":"CONTRIBUTOR","body":"@jihoonson Sorry for the lack of response, but that's fine. I haven't had much time these last few weeks, but I should now. I'll rebase and make the changes soon.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502213363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502216712","html_url":"https://github.com/apache/druid/pull/7863#issuecomment-502216712","issue_url":"https://api.github.com/repos/apache/druid/issues/7863","id":502216712,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjIxNjcxMg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T18:29:59Z","updated_at":"2019-06-14T18:29:59Z","author_association":"CONTRIBUTOR","body":"Updated all the screenshots, I think this is good to go","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502216712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502222308","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502222308","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502222308,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjIyMjMwOA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T18:47:07Z","updated_at":"2019-06-14T18:47:07Z","author_association":"CONTRIBUTOR","body":"That sounds strange. There should be something that shows what the test threads were doing in the thread dump if you dumped while the test was running. \r\n\r\nWhat `SegmentManagerThreadSafetyTest` does is basically creating 88 files of 15 bytes each and copying those files into another directory using 4 threads. Both directories where those files are created and copied to are under your temp directory in your local disk. So, even though `future.get()` is a blocking call, I'm not sure how it could take so long time unless there is a sort of bug. I bet it would take less than 1 second even if we do the same thing with a single thread. \r\n\r\nTravis CI is one of the worst test environment which runs all unit/integration tests with limited resources for every commit, and I've never seen this error before.\r\nSo, I'm not sure this problem is somehow related to your test environment or not. Would you tell me where you ran those tests? Like CPU cores, Java heap memory, your local disk spec, the command you used to run those tests, etc.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502222308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502238061","html_url":"https://github.com/apache/druid/pull/7807#issuecomment-502238061","issue_url":"https://api.github.com/repos/apache/druid/issues/7807","id":502238061,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjIzODA2MQ==","user":{"login":"acdn-mpreston","id":33030320,"node_id":"MDQ6VXNlcjMzMDMwMzIw","avatar_url":"https://avatars.githubusercontent.com/u/33030320?v=4","gravatar_id":"","url":"https://api.github.com/users/acdn-mpreston","html_url":"https://github.com/acdn-mpreston","followers_url":"https://api.github.com/users/acdn-mpreston/followers","following_url":"https://api.github.com/users/acdn-mpreston/following{/other_user}","gists_url":"https://api.github.com/users/acdn-mpreston/gists{/gist_id}","starred_url":"https://api.github.com/users/acdn-mpreston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acdn-mpreston/subscriptions","organizations_url":"https://api.github.com/users/acdn-mpreston/orgs","repos_url":"https://api.github.com/users/acdn-mpreston/repos","events_url":"https://api.github.com/users/acdn-mpreston/events{/privacy}","received_events_url":"https://api.github.com/users/acdn-mpreston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T19:39:22Z","updated_at":"2019-06-14T19:39:22Z","author_association":"NONE","body":"@Stephan3555 I have not been able to get a working fix yet. Every solution I create results in datasource metadata that is the \"wrong\" type later in the indexing process after the reset. The frustrating thing is the end and start sequence numbers are really the same and the addition of the conversion method from end sequence number to start sequence number looks to be a solution added to patch something quickly. I will post again if I figure something out.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502238061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502266819","html_url":"https://github.com/apache/druid/pull/7810#issuecomment-502266819","issue_url":"https://api.github.com/repos/apache/druid/issues/7810","id":502266819,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI2NjgxOQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T21:20:02Z","updated_at":"2019-06-14T21:20:02Z","author_association":"MEMBER","body":"Apologies for the delay getting this merged, got busy with some stuff, thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502266819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502268573","html_url":"https://github.com/apache/druid/pull/7838#issuecomment-502268573","issue_url":"https://api.github.com/repos/apache/druid/issues/7838","id":502268573,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI2ODU3Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T21:27:03Z","updated_at":"2019-06-14T21:27:03Z","author_association":"CONTRIBUTOR","body":"Hi @eranmeir, thanks for your contribution! It looks that the PDF you attached shows we can gain some performance benefit with this PR when multiple threads write into the same incremental index. But, I'm wondering if we need that kind of performance benefit. Currently, the most common use case is serving multiple queries from different threads while building an incremental index with a single thread. So, it's like the single write and multiple reads case. Also, in indexing, the most expensive part is I think segment merge rather than building incremental indexes.\r\n\r\nWould you elaborate more on your plan regarding this point of view? More specifically, do you see something we can do better when multiple threads write into the same incremental index?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502268573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502277035","html_url":"https://github.com/apache/druid/pull/7894#issuecomment-502277035","issue_url":"https://api.github.com/repos/apache/druid/issues/7894","id":502277035,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI3NzAzNQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T21:32:12Z","updated_at":"2019-06-14T21:32:12Z","author_association":"MEMBER","body":"[Travis failure looks maybe legitimate:](https://travis-ci.org/apache/incubator-druid/jobs/545864160#L9685) \r\n```\r\n[ERROR] Failed to execute goal com.github.spotbugs:spotbugs-maven-plugin:3.1.12:check (default-cli) on project druid-datasketches: failed with 1 bugs and 0 errors -> [Help 1]\r\n[ERROR] Failed to execute goal com.github.spotbugs:spotbugs-maven-plugin:3.1.12:check (default-cli) on project druid-influx-extensions: failed with 3 bugs and 0 errors -> [Help 1]\r\n[ERROR] Failed to execute goal com.github.spotbugs:spotbugs-maven-plugin:3.1.12:check (default-cli) on project ambari-metrics-emitter: failed with 1 bugs and 0 errors -> [Help 1]\r\n[ERROR] Failed to execute goal com.github.spotbugs:spotbugs-maven-plugin:3.1.12:check (default-cli) on project druid-momentsketch: failed with 1 bugs and 0 errors -> [Help 1]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502277035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502293675","html_url":"https://github.com/apache/druid/pull/7588#issuecomment-502293675","issue_url":"https://api.github.com/repos/apache/druid/issues/7588","id":502293675,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI5MzY3NQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T22:01:23Z","updated_at":"2019-06-14T22:01:23Z","author_association":"MEMBER","body":"I would like to do ingestion side support through transforms as a follow-up PR, I think maybe it could benefit from a slight refactoring and this PR is already big enough.\r\n\r\nThis PR should have no effect on multi-value dimensions used in transform spec, because it appears to already behave differently than the expression selectors in that instead of array values being translated to `null` for the expression they are instead fed into `String.valueOf` so they appear as a scalar string. As expected, using the array functions from this PR at ingestion time can have unexpected results because of the scalar string behavior and also lack of array result to list of string coercion on the expression outputs, but because of the string behavior it appears that this is also true of any expression on multi-value ingestion time inputs.\r\n\r\nI think my main outstanding question for this PR is whether or not this new expression selector behavior should be optional for now, because there is a potential performance impact for expression selectors with bindings from row based selectors since they will have to use `RowBasedExpressionColumnValueSelector` with it's per row check of input binding type. I do hope to eliminate nearly all of these cases in future work by enhancing the type information throughout the query pipeline, but i'm not certain how far in the future that actually is and I haven't had the chance to conduct thorough measurements on performance difference, which is why I brought this up. Also I could see a use for turning off this behavior if certain there are no multi-value dimensions. On the other hand though, we have a lot of options, I'm not sure we need more. Maybe some of the improvements done in this PR, like argument validation for functions being done at parse time instead of for each eval, make up enough for the `RowBasedExpressionColumnValueSelector` phase that it about evens out. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502293675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502314514","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502314514","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502314514,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjMxNDUxNA==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T00:00:00Z","updated_at":"2019-06-15T00:00:00Z","author_association":"CONTRIBUTOR","body":"@jihoonson  here are my system details:\r\n      Model Name: MacBook Pro\r\n      Model Identifier: MacBookPro15,1\r\n      Processor Name: Intel Core i7\r\n      Processor Speed: 2.6 GHz\r\n      Number of Processors: 1\r\n      Total Number of Cores: 6\r\n      L2 Cache (per Core): 256 KB\r\n      L3 Cache: 9 MB\r\n      Hyper-Threading Technology: Enabled\r\n      Memory: 16 GB\r\n$ java -XX:+PrintFlagsFinal -version | grep HeapSize\r\n    uintx ErgoHeapSizeLimit                         = 0                                   {product}\r\n    uintx HeapSizePerGCThread                       = 87241520                            {product}\r\n    uintx InitialHeapSize                          := 268435456                           {product}\r\n    uintx LargePageHeapSizeThreshold                = 134217728                           {product}\r\n    uintx MaxHeapSize                              := 4294967296                          {product}\r\njava version \"1.8.0_211\"\r\n$ diskutil info disk0 \r\n   Device Identifier:         disk0\r\n   Device Node:               /dev/disk0\r\n   Whole:                     Yes\r\n   Part of Whole:             disk0\r\n   Device / Media Name:       APPLE SSD AP0512M\r\n   Volume Name:               Not applicable (no file system)\r\n   Mounted:                   Not applicable (no file system)\r\n   File System:               None\r\n   Content (IOContent):       GUID_partition_scheme\r\n   OS Can Be Installed:       No\r\n   Media Type:                Generic\r\n   Protocol:                  PCI-Express\r\n   SMART Status:              Verified\r\n   Disk Size:                 500.3 GB (500277792768 Bytes) (exactly 977105064 512-Byte-Units)\r\n   Device Block Size:         4096 Bytes\r\n   Read-Only Media:           No\r\n   Read-Only Volume:          Not applicable (no file system)\r\n   Device Location:           Internal\r\n   Removable Media:           Fixed\r\n   Solid State:               Yes\r\n   Hardware AES Support:      Yes\r\n\r\nand I'm using the mvn test command to run the test and tried even running with IntelliJ tests\r\nI observed that segmentManager.loadSegment(segment); taking ~100 milliseconds for each segment. is that normal? if that's normal it makes sense why 5 seconds for the whole test.  ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502314514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502333141","html_url":"https://github.com/apache/druid/issues/7895#issuecomment-502333141","issue_url":"https://api.github.com/repos/apache/druid/issues/7895","id":502333141,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjMzMzE0MQ==","user":{"login":"justinborromeo","id":9417701,"node_id":"MDQ6VXNlcjk0MTc3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/9417701?v=4","gravatar_id":"","url":"https://api.github.com/users/justinborromeo","html_url":"https://github.com/justinborromeo","followers_url":"https://api.github.com/users/justinborromeo/followers","following_url":"https://api.github.com/users/justinborromeo/following{/other_user}","gists_url":"https://api.github.com/users/justinborromeo/gists{/gist_id}","starred_url":"https://api.github.com/users/justinborromeo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinborromeo/subscriptions","organizations_url":"https://api.github.com/users/justinborromeo/orgs","repos_url":"https://api.github.com/users/justinborromeo/repos","events_url":"https://api.github.com/users/justinborromeo/events{/privacy}","received_events_url":"https://api.github.com/users/justinborromeo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T04:19:46Z","updated_at":"2019-06-15T04:21:09Z","author_association":"CONTRIBUTOR","body":"Hi Dinesh,\r\n\r\nI think you misunderstand how the scan query is implemented.  Afaik, filtering using the index(es) occurs prior to batching.  When the historical reads rows into a batch (see `ScanQueryLimitRowIterator.java` for reference), this batch only contains filtered records.  Then, batches of `batchSize` rows are streamed back to the broker until `limit` rows have been returned (the only edge case being the last batch which might contain fewer than `batchSize` rows to avoid exceeding `limit`).\r\n\r\nThis differs from your understanding in that you're assuming that every row is being scanned and filtered through.  Rather than combining rows into batches prior to filtering, batching is used to combine results after filtering to be streamed back.\r\n\r\nReferring to the doc example, the `batchSize` property actually corresponds to a **maximum** batch size. Perhaps the property could be named better but it's too much pain to change the API for minimal benefit.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502333141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343122","html_url":"https://github.com/apache/druid/pull/7810#issuecomment-502343122","issue_url":"https://api.github.com/repos/apache/druid/issues/7810","id":502343122,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM0MzEyMg==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T07:31:20Z","updated_at":"2019-06-15T07:31:20Z","author_association":"CONTRIBUTOR","body":"No problem, thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343800","html_url":"https://github.com/apache/druid/pull/7894#issuecomment-502343800","issue_url":"https://api.github.com/repos/apache/druid/issues/7894","id":502343800,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM0MzgwMA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T07:42:06Z","updated_at":"2019-06-15T07:42:06Z","author_association":"CONTRIBUTOR","body":"Thanks @clintropolis @leventov \r\n\r\nThere were some more violations. I've now added all the rules to exclude all the errors. If this is merged, we can re-enable the rules by removing them from the XML, and fixing the code smells.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343958","html_url":"https://github.com/apache/druid/pull/7772#issuecomment-502343958","issue_url":"https://api.github.com/repos/apache/druid/issues/7772","id":502343958,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM0Mzk1OA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T07:44:50Z","updated_at":"2019-06-15T07:44:50Z","author_association":"CONTRIBUTOR","body":"Rebased onto master","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502343958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502344514","html_url":"https://github.com/apache/druid/issues/7821#issuecomment-502344514","issue_url":"https://api.github.com/repos/apache/druid/issues/7821","id":502344514,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM0NDUxNA==","user":{"login":"AzamAhmadloo","id":51315380,"node_id":"MDQ6VXNlcjUxMzE1Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/51315380?v=4","gravatar_id":"","url":"https://api.github.com/users/AzamAhmadloo","html_url":"https://github.com/AzamAhmadloo","followers_url":"https://api.github.com/users/AzamAhmadloo/followers","following_url":"https://api.github.com/users/AzamAhmadloo/following{/other_user}","gists_url":"https://api.github.com/users/AzamAhmadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/AzamAhmadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AzamAhmadloo/subscriptions","organizations_url":"https://api.github.com/users/AzamAhmadloo/orgs","repos_url":"https://api.github.com/users/AzamAhmadloo/repos","events_url":"https://api.github.com/users/AzamAhmadloo/events{/privacy}","received_events_url":"https://api.github.com/users/AzamAhmadloo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T07:54:07Z","updated_at":"2019-06-15T08:10:12Z","author_association":"NONE","body":"My error on master server fixed. Now my master server see middlemanager server correctly.\r\nI added druid.worker.ip=192.168.0.0 to conf/druid/middlemanager/runtime.properties\r\n\r\n\r\nThe error remains on historical server:\r\n\r\nWARN [main] org.apache.druid.discovery.DruidLeaderClient - Request[http://localhost:8081/druid/coordinator/v1/lookups/config/__default?detailed=true] failed.\r\norg.jboss.netty.channel.ChannelException: Faulty channel in resource pool\r\njava.net.ConnectException: Connection refused: localhost/127.0.0.1:8081\r\n\r\nHow to connect to coordinator server from historical server?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502344514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502355201","html_url":"https://github.com/apache/druid/pull/7876#issuecomment-502355201","issue_url":"https://api.github.com/repos/apache/druid/issues/7876","id":502355201,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM1NTIwMQ==","user":{"login":"asdf2014","id":8108788,"node_id":"MDQ6VXNlcjgxMDg3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/8108788?v=4","gravatar_id":"","url":"https://api.github.com/users/asdf2014","html_url":"https://github.com/asdf2014","followers_url":"https://api.github.com/users/asdf2014/followers","following_url":"https://api.github.com/users/asdf2014/following{/other_user}","gists_url":"https://api.github.com/users/asdf2014/gists{/gist_id}","starred_url":"https://api.github.com/users/asdf2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asdf2014/subscriptions","organizations_url":"https://api.github.com/users/asdf2014/orgs","repos_url":"https://api.github.com/users/asdf2014/repos","events_url":"https://api.github.com/users/asdf2014/events{/privacy}","received_events_url":"https://api.github.com/users/asdf2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T10:32:35Z","updated_at":"2019-06-15T10:32:35Z","author_association":"MEMBER","body":"Hi, @Dylan1312 . Yep, this new version contains a lot of bugfixes and new features. FYI, [JMH 1.20](http://mail.openjdk.java.net/pipermail/jmh-dev/2018-January/002723.html) and [JMH 1.21](http://mail.openjdk.java.net/pipermail/jmh-dev/2018-May/002753.html) are here.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502355201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502378576","html_url":"https://github.com/apache/druid/issues/7895#issuecomment-502378576","issue_url":"https://api.github.com/repos/apache/druid/issues/7895","id":502378576,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM3ODU3Ng==","user":{"login":"dinsaw","id":6128184,"node_id":"MDQ6VXNlcjYxMjgxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/6128184?v=4","gravatar_id":"","url":"https://api.github.com/users/dinsaw","html_url":"https://github.com/dinsaw","followers_url":"https://api.github.com/users/dinsaw/followers","following_url":"https://api.github.com/users/dinsaw/following{/other_user}","gists_url":"https://api.github.com/users/dinsaw/gists{/gist_id}","starred_url":"https://api.github.com/users/dinsaw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dinsaw/subscriptions","organizations_url":"https://api.github.com/users/dinsaw/orgs","repos_url":"https://api.github.com/users/dinsaw/repos","events_url":"https://api.github.com/users/dinsaw/events{/privacy}","received_events_url":"https://api.github.com/users/dinsaw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T16:05:03Z","updated_at":"2019-06-15T16:06:07Z","author_association":"CONTRIBUTOR","body":"Thanks @justinborromeo for clarification ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502378576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502381595","html_url":"https://github.com/apache/druid/pull/6016#issuecomment-502381595","issue_url":"https://api.github.com/repos/apache/druid/issues/6016","id":502381595,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM4MTU5NQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T16:44:55Z","updated_at":"2019-06-15T16:44:55Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 1 week if no further activity occurs. If you think thats incorrect or this pull request requires a review, please simply write any comment. If closed, you can revive the PR at any time and @mention a reviewer or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502381595/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502395860","html_url":"https://github.com/apache/druid/pull/7898#issuecomment-502395860","issue_url":"https://api.github.com/repos/apache/druid/issues/7898","id":502395860,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM5NTg2MA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T20:07:52Z","updated_at":"2019-06-15T20:07:52Z","author_association":"CONTRIBUTOR","body":"Thank you for the changes, looks great.  (the CI failure is not real, someone please restart travis)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502395860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502412342","html_url":"https://github.com/apache/druid/issues/7824#issuecomment-502412342","issue_url":"https://api.github.com/repos/apache/druid/issues/7824","id":502412342,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQxMjM0Mg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T01:48:37Z","updated_at":"2019-06-16T01:50:06Z","author_association":"CONTRIBUTOR","body":"Unfortunately, It is very hard to offer concrete advice on these things, I can give some general points for you to further investigate.\r\n\r\n> OS killed this task\r\n\r\nI am assuming that means linux OOM killer killed the process. If yes, then it probably can't be the memory used to load the segments in page cache as that doesn't count towards anonymous memory usage. So, that means the process really allocated loads of direct memory using those buffers you mentioned. \r\nThere could be a genuine memory leak there. You can identify that by doing a manual GC (e.g. using \"jcmd <pid> GC.run\" )  at time of high direct memory use, if GC frees up a whole bunch of direct memory then there is almost certainly a memory leak and we are not \"closing/cleaning\" discarded off-heap buffers. If you find that, you can try to then identify which buffers are we not cleaning up and/or create another ticket with your task log and analysis , someone else from community might be able to look into it.\r\nIf GC does not free significant direct memory that means all that memory is really in use and code needs optimization to reduce its memory usage. My suspicion is that, most of that off-heap buffers are probably being used to merge the intermediate persisted segment merging , playing with some of configuration described in https://druid.apache.org/docs/latest/ingestion/native_tasks.html#tuningconfig might increase/decrease off heap memory usage.  (especially maxRowsInMemory, maxBytesInMemory, maxTotalRows .. try reducing maxTotalRows )\r\n\r\nCheck whether segment handoffs are working fine, you can add \"pushTimeout\" setting from above if need be.\r\n\r\nyou might be hitting issue described in https://github.com/apache/incubator-druid/pull/6699 , if you can build druid with that patch applied then try that.\r\n\r\nThat said, please attache the task log of the process that ends up dead due to too much memory usage. I will take a quick look to see if there is something obvious that shows up.\r\n\r\nHTH.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502412342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502417029","html_url":"https://github.com/apache/druid/issues/7824#issuecomment-502417029","issue_url":"https://api.github.com/repos/apache/druid/issues/7824","id":502417029,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQxNzAyOQ==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T03:40:53Z","updated_at":"2019-06-16T03:40:53Z","author_association":"NONE","body":"@himanshug Thank you so much for the quick replay!\r\nI had performed a manual GC with using ```jcmd GC.run```, but did not free up the direct memory.\r\nThe task log of the process that ends up dead due to too much memory usage as below.\r\nThanks !\r\n```\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6865}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6866}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6867}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6868}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6869}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6870}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6871}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6872}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6873}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6874}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6875}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6876}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6877}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6878}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6879}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6880}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6881}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6882}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6883}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6884}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6885}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6886}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6887}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6888}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6889}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6890}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6891}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6892}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6893}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6894}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6895}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6896}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6897}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6898}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6899}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6900}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6901}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6902}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6903}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6904}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6905}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6906}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6907}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6908}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6909}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6910}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6911}]\r\n2019-06-14T06:24:10,907 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6912}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6913}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6914}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6915}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6916}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6917}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6918}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6919}]\r\n2019-06-14T06:24:10,908 INFO [appenderator_merge_0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Adding hydrant[FireHydrant{, queryable=ZJK_TEST_2019-06-13T06:00:00.000Z_2019-06-13T12:00:00.000Z_2019-06-14T06:17:24.368Z, count=6920}]\r\n2019-06-14T06:24:11,090 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-06-14T06:24:11,091 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 0 millis.\r\n2019-06-14T06:24:11,091 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 0 millis\r\n2019-06-14T06:24:11,415 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[20]\r\n2019-06-14T06:24:11,416 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[12]\r\n2019-06-14T06:24:11,419 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[4]\r\n2019-06-14T06:24:11,419 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[4]\r\n2019-06-14T06:24:11,419 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[4]\r\n2019-06-14T06:24:13,376 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[168]\r\n2019-06-14T06:24:13,376 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[168]\r\n2019-06-14T06:24:13,376 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMerger - Allocating dictionary merging direct buffer with size[64]\r\n****************** many many many Allocating dictionary merging direct buffer with size [*] *******************\r\n2019-06-14T06:24:13,987 INFO [appenderator_merge_0] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uri] conversions with cardinality[1,084] in 722 millis.\r\n2019-06-14T06:24:13,988 INFO [appenderator_merge_0] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 2,596 millis.\r\n2019-06-14T06:24:20,682 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[53]\r\n2019-06-14T06:24:20,682 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[54]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[55]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[56]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[57]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[58]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[59]\r\n2019-06-14T06:24:20,683 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[60]\r\n****************** many many many Allocating new littleEndByteBuf [*] until 333,029 *******************\r\n2019-06-14T06:24:34,446 INFO [appenderator_merge_0] org.apache.druid.segment.CompressedPools - Allocating new littleEndByteBuf[333,029]\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502417029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502428119","html_url":"https://github.com/apache/druid/issues/7824#issuecomment-502428119","issue_url":"https://api.github.com/repos/apache/druid/issues/7824","id":502428119,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQyODExOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T07:23:53Z","updated_at":"2019-06-16T07:23:53Z","author_association":"CONTRIBUTOR","body":"so there were 6920 segments to be merged together with 80 columns each, merging that does need alot of those buffers, about 6920*80 . I think there are too many intermediate persists because of `maxBytesInMemory` which in your case , by default, is `2g/6 = 341M` . OnHeapIncrementalIndex does overestimate the size due to sketches in there and might be persisting segments too aggressively. \r\n\r\nHere is what I would try out...\r\n\r\nset maxBytesInMemory = Integer.MAX_VALUE (to effectively disable it)\r\nadjust `maxRowsInMemory` (default 1000000) to a lower value or increase Xmx on task process so that it doesn't get into too much of GC . You might have to adjust `druid.worker.capacity=10` to a lower value if Xmx was increased. Now find the right balance of `maxRowsInMemory` and `Xmx` on task process so that you don't end up with thousands of segments to merge in the end but much lower number. That will drive down the off-heap buffer allocation .\r\n(Higher `maxRowsInMemory` means lower the number of segments to merge in the end but higher jvm heap utilization )\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502428119/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429134","html_url":"https://github.com/apache/druid/issues/7886#issuecomment-502429134","issue_url":"https://api.github.com/repos/apache/druid/issues/7886","id":502429134,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQyOTEzNA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T07:41:12Z","updated_at":"2019-06-16T07:41:12Z","author_association":"CONTRIBUTOR","body":"yeah startup should be more forgiving and also the code writing those files should try to write them atomically as much possible to reduce the likelihood of empty/corrupted files.\r\nI will fix it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429481","html_url":"https://github.com/apache/druid/issues/2919#issuecomment-502429481","issue_url":"https://api.github.com/repos/apache/druid/issues/2919","id":502429481,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQyOTQ4MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T07:47:21Z","updated_at":"2019-06-16T07:47:21Z","author_association":"CONTRIBUTOR","body":"I think so. closing it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429743","html_url":"https://github.com/apache/druid/issues/2372#issuecomment-502429743","issue_url":"https://api.github.com/repos/apache/druid/issues/2372","id":502429743,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQyOTc0Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T07:51:44Z","updated_at":"2019-06-16T07:51:44Z","author_association":"CONTRIBUTOR","body":"yes, closing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429888","html_url":"https://github.com/apache/druid/issues/1615#issuecomment-502429888","issue_url":"https://api.github.com/repos/apache/druid/issues/1615","id":502429888,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQyOTg4OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T07:54:29Z","updated_at":"2019-06-16T07:54:29Z","author_association":"CONTRIBUTOR","body":"sort of handled by https://github.com/apache/incubator-druid/pull/3643 and subsequent related changes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502429888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502449953","html_url":"https://github.com/apache/druid/issues/7904#issuecomment-502449953","issue_url":"https://api.github.com/repos/apache/druid/issues/7904","id":502449953,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQ0OTk1Mw==","user":{"login":"xueyumusic","id":95261,"node_id":"MDQ6VXNlcjk1MjYx","avatar_url":"https://avatars.githubusercontent.com/u/95261?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyumusic","html_url":"https://github.com/xueyumusic","followers_url":"https://api.github.com/users/xueyumusic/followers","following_url":"https://api.github.com/users/xueyumusic/following{/other_user}","gists_url":"https://api.github.com/users/xueyumusic/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyumusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyumusic/subscriptions","organizations_url":"https://api.github.com/users/xueyumusic/orgs","repos_url":"https://api.github.com/users/xueyumusic/repos","events_url":"https://api.github.com/users/xueyumusic/events{/privacy}","received_events_url":"https://api.github.com/users/xueyumusic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T12:59:25Z","updated_at":"2019-06-16T12:59:25Z","author_association":"CONTRIBUTOR","body":"Calcite has default value of [DEFAULT_IN_SUB_QUERY_THRESHOLD ](https://github.com/apache/calcite/blob/master/core/src/main/java/org/apache/calcite/sql2rel/SqlToRelConverter.java#L227) as 20. If length of values of in clause exceeds this config calcite will not convert `in` to `or` and convert in to a semi join of table.\r\nHowever druid set this config as [MAX_VALUE](https://github.com/apache/incubator-druid/blob/master/sql/src/main/java/org/apache/druid/sql/calcite/planner/PlannerFactory.java#L115) in PlannerFactory . If there is no special purpose of setting it as MAX_VALUE, maybe we could try using default value and see whether still has this performance problem. What do you think? @gianm ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502449953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502460913","html_url":"https://github.com/apache/druid/issues/7904#issuecomment-502460913","issue_url":"https://api.github.com/repos/apache/druid/issues/7904","id":502460913,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQ2MDkxMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-16T15:13:48Z","updated_at":"2019-06-16T15:13:48Z","author_association":"CONTRIBUTOR","body":"I think right now the Druid planner rules can not convert that kind of structure into a Druid query. Maybe if they could, then that approach would work. (However there might still be a performance issue if a user specified a ton of OR conditions rather than using IN?)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502460913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502497195","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502497195","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502497195,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjQ5NzE5NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T00:07:00Z","updated_at":"2019-06-17T00:07:00Z","author_association":"CONTRIBUTOR","body":"Thank you for providing details of your test environment. I assume you used the default heap configurations, and if so, they look fine.\r\n\r\n> I observed that segmentManager.loadSegment(segment); taking ~100 milliseconds for each segment. is that normal? if that's normal it makes sense why 5 seconds for the whole test.\r\n\r\nI don't think it's normal. `loadSegment` is a method essentially copying a file of 15 bytes from a temp directory to another one. It shouldn't take 100 ms and it actually took less than 1 ms in my laptop.\r\nWould you please check again where it takes so much time? Also, do you see this problem happening all the time whenever you run those tests?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502497195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502591292","html_url":"https://github.com/apache/druid/pull/7838#issuecomment-502591292","issue_url":"https://api.github.com/repos/apache/druid/issues/7838","id":502591292,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjU5MTI5Mg==","user":{"login":"eranmeir","id":888803,"node_id":"MDQ6VXNlcjg4ODgwMw==","avatar_url":"https://avatars.githubusercontent.com/u/888803?v=4","gravatar_id":"","url":"https://api.github.com/users/eranmeir","html_url":"https://github.com/eranmeir","followers_url":"https://api.github.com/users/eranmeir/followers","following_url":"https://api.github.com/users/eranmeir/following{/other_user}","gists_url":"https://api.github.com/users/eranmeir/gists{/gist_id}","starred_url":"https://api.github.com/users/eranmeir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eranmeir/subscriptions","organizations_url":"https://api.github.com/users/eranmeir/orgs","repos_url":"https://api.github.com/users/eranmeir/repos","events_url":"https://api.github.com/users/eranmeir/events{/privacy}","received_events_url":"https://api.github.com/users/eranmeir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T08:44:51Z","updated_at":"2019-06-17T08:50:41Z","author_association":"NONE","body":"@leventov Thanks for the review. I will soon add a commit that addresses the issues you raise. I have updated the attached pdf with raw numbers of pre- and post-fix benchmarks.\r\n\r\n@jihoonson Thanks for the feedback. We used Oak for indexing large amounts of data and saw significant performance gains from off-heap storage and multi-threaded indexing. This separate PR may be thought of as ground work for Oak, but multi-threaded performance gains are obviously independent. \r\n\r\nThe way I understand what you write, queries that happen before segment merge may benefit from increase in indexing throughput. \r\n\r\nWe haven't tried comparing costs of index building and segment merging. Perhaps we can try and leverage multi-threading in the merge process. I'll be happy to discuss this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502591292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502610905","html_url":"https://github.com/apache/druid/pull/7838#issuecomment-502610905","issue_url":"https://api.github.com/repos/apache/druid/issues/7838","id":502610905,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjYxMDkwNQ==","user":{"login":"sanastas","id":12136181,"node_id":"MDQ6VXNlcjEyMTM2MTgx","avatar_url":"https://avatars.githubusercontent.com/u/12136181?v=4","gravatar_id":"","url":"https://api.github.com/users/sanastas","html_url":"https://github.com/sanastas","followers_url":"https://api.github.com/users/sanastas/followers","following_url":"https://api.github.com/users/sanastas/following{/other_user}","gists_url":"https://api.github.com/users/sanastas/gists{/gist_id}","starred_url":"https://api.github.com/users/sanastas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanastas/subscriptions","organizations_url":"https://api.github.com/users/sanastas/orgs","repos_url":"https://api.github.com/users/sanastas/repos","events_url":"https://api.github.com/users/sanastas/events{/privacy}","received_events_url":"https://api.github.com/users/sanastas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T09:37:54Z","updated_at":"2019-06-17T09:37:54Z","author_association":"NONE","body":"@jihoonson , indeed thank you for raising this important question! I would like to add a bit to @eranmeir answer.\r\n\r\nWithout relevance to Oak, it might be interesting that other databases found it beneficial to make the inserts to in-memory component concurrent. Here is a [link](http://webee.technion.ac.il/~idish/ftp/clsm.pdf) to academic paper about cLSM (concurrent LSM) showing benefits from making in-memory component concurrent. And here are RocksDB [release notes](https://rocksdb.org/blog/2017/01/06/rocksdb-5-0-1-released.html) from 2017 presenting concurrent writes to memtable enabled as a default: \r\n> Options::allow_concurrent_memtable_write and Options::enable_write_thread_adaptive_yield are now true by default.\r\n\r\nAnd with relevance to Oak, OakMap brings with it two benefits: (1) taking the key-value mapping off-heap, (2) high multi-threading scalability. Due to off-heaping, the Oak-based IncrementalIndex might manage more data in-memory thus require less often flushes to disk. Such IncrementalIndex might be responsible for a bigger keys partition and that way cause *less merges*. Clearly, managing bigger map is more efficient when multi-thread writes are allowed and are efficient.  \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502610905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502616808","html_url":"https://github.com/apache/druid/issues/7875#issuecomment-502616808","issue_url":"https://api.github.com/repos/apache/druid/issues/7875","id":502616808,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjYxNjgwOA==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T09:55:24Z","updated_at":"2019-06-17T09:55:24Z","author_association":"CONTRIBUTOR","body":"@dclim I would like to work on this improvement.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502616808/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502643909","html_url":"https://github.com/apache/druid/issues/7875#issuecomment-502643909","issue_url":"https://api.github.com/repos/apache/druid/issues/7875","id":502643909,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY0MzkwOQ==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T11:27:05Z","updated_at":"2019-06-17T11:29:03Z","author_association":"CONTRIBUTOR","body":"@dclim  Please look at my questions and comments at https://github.com/apache/incubator-druid/pull/7907/files.   \r\n\r\nOther questions:\r\n\r\n1. I was unable to find a test class corresponding to S3TaskLogs.java. Can you please point me to the corresponding test class ?\r\n2. I haven't covered the fallback you mentioned in the PR I've raised yet.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502643909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502661852","html_url":"https://github.com/apache/druid/pull/7082#issuecomment-502661852","issue_url":"https://api.github.com/repos/apache/druid/issues/7082","id":502661852,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY2MTg1Mg==","user":{"login":"scrawfor","id":7061689,"node_id":"MDQ6VXNlcjcwNjE2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7061689?v=4","gravatar_id":"","url":"https://api.github.com/users/scrawfor","html_url":"https://github.com/scrawfor","followers_url":"https://api.github.com/users/scrawfor/followers","following_url":"https://api.github.com/users/scrawfor/following{/other_user}","gists_url":"https://api.github.com/users/scrawfor/gists{/gist_id}","starred_url":"https://api.github.com/users/scrawfor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scrawfor/subscriptions","organizations_url":"https://api.github.com/users/scrawfor/orgs","repos_url":"https://api.github.com/users/scrawfor/repos","events_url":"https://api.github.com/users/scrawfor/events{/privacy}","received_events_url":"https://api.github.com/users/scrawfor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T12:27:37Z","updated_at":"2019-06-17T12:28:17Z","author_association":"CONTRIBUTOR","body":"Actually, it looks like this was resolved with https://github.com/apache/incubator-druid/pull/7752.   I think this can be closed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502661852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502668353","html_url":"https://github.com/apache/druid/pull/7807#issuecomment-502668353","issue_url":"https://api.github.com/repos/apache/druid/issues/7807","id":502668353,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY2ODM1Mw==","user":{"login":"acdn-mpreston","id":33030320,"node_id":"MDQ6VXNlcjMzMDMwMzIw","avatar_url":"https://avatars.githubusercontent.com/u/33030320?v=4","gravatar_id":"","url":"https://api.github.com/users/acdn-mpreston","html_url":"https://github.com/acdn-mpreston","followers_url":"https://api.github.com/users/acdn-mpreston/followers","following_url":"https://api.github.com/users/acdn-mpreston/following{/other_user}","gists_url":"https://api.github.com/users/acdn-mpreston/gists{/gist_id}","starred_url":"https://api.github.com/users/acdn-mpreston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acdn-mpreston/subscriptions","organizations_url":"https://api.github.com/users/acdn-mpreston/orgs","repos_url":"https://api.github.com/users/acdn-mpreston/repos","events_url":"https://api.github.com/users/acdn-mpreston/events{/privacy}","received_events_url":"https://api.github.com/users/acdn-mpreston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T12:48:17Z","updated_at":"2019-06-17T12:48:17Z","author_association":"NONE","body":"Also @Stephan3555 you may want to follow https://github.com/apache/incubator-druid/pull/7831 as this is the commit against master that I had previously submitted, but then I ran into further issues with the fix. I am still trying to sort out a better fix, but it is a difficult problem to reproduce and each \"fix\" I put in exposes another break down the line in how the sequence number metadata is handled. There are a lot of assumptions about if the metadata will have start or end sequence number format at different parts on which I get hung up.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502668353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502678765","html_url":"https://github.com/apache/druid/issues/7858#issuecomment-502678765","issue_url":"https://api.github.com/repos/apache/druid/issues/7858","id":502678765,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY3ODc2NQ==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T13:19:07Z","updated_at":"2019-06-17T13:19:07Z","author_association":"CONTRIBUTOR","body":"@leventov What should be the detail message to be passed to the constructor args of UnsupportedOperationException ? To check my understanding, ImmutableDruidDataSource's equals() and hashCode() methods have to throw UnsupportedOperationException. Is there anything else that needs to be done.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502678765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502693657","html_url":"https://github.com/apache/druid/pull/7889#issuecomment-502693657","issue_url":"https://api.github.com/repos/apache/druid/issues/7889","id":502693657,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY5MzY1Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T13:58:23Z","updated_at":"2019-06-17T13:58:23Z","author_association":"MEMBER","body":"Another note for future development: please don't force-push your PR branch, see https://github.com/apache/incubator-druid/blob/master/CONTRIBUTING.md#if-your-pull-request-shows-conflicts-with-master.\r\n\r\nThanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502693657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502700077","html_url":"https://github.com/apache/druid/issues/7858#issuecomment-502700077","issue_url":"https://api.github.com/repos/apache/druid/issues/7858","id":502700077,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjcwMDA3Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T14:13:44Z","updated_at":"2019-06-17T14:13:44Z","author_association":"MEMBER","body":"What can also be done is adding static analysis checks to catching calling `ImmutableDruidDataSource.equals()` calls statically rather than in runtime: see https://github.com/apache/incubator-druid/issues/6358#issuecomment-489102183. You can prohibit `$x$.equals()` when the type of `$x$` is `ImmutableDruidDataSource`, as well as `$MapType$<ImmutableDruidDataSource, $ValueType$>` where `$MapType$` is `.*Map` (i. e. `HashMap`, `TreeMap`, etc.), and also similar for `$SetType$<ImmutableDruidDataSource>`.\r\n\r\nThe error message can say e. g. `\"ImmutableDruidDataSource shouldn't be used as the key in containers\"`. On the source code level, there should be a link to this issue for the explanation.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502700077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502762949","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502762949","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502762949,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc2Mjk0OQ==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T16:47:58Z","updated_at":"2019-06-17T16:47:58Z","author_association":"CONTRIBUTOR","body":"@jihoonson that's strange, SegmentManager.loadSegment(segment); taking ~100 milliseconds even after multiple retries. and also can you share your test code for getting time metrics for the test? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502762949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502768657","html_url":"https://github.com/apache/druid/issues/7875#issuecomment-502768657","issue_url":"https://api.github.com/repos/apache/druid/issues/7875","id":502768657,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc2ODY1Nw==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T17:04:10Z","updated_at":"2019-06-17T17:04:10Z","author_association":"CONTRIBUTOR","body":"@sashidhar thank you for your contribution! I left a few comments on your PR.\r\n\r\nRegarding the test class - I couldn't find one either. If you could create a simple one that exercises the functionality you added, that would be great.\r\n\r\nFor the fallback - I think it's fine either way, whether you want to do it here or elsewhere. I'm thinking something really simple - like, wrapping the call in a try-catch and then retrying it one time without getting the bucket ACL / setting the object ACL if it fails. I'd add a log in the catch statement as well so that it's clear that the initial call failed and it's doing a fallback.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502768657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502780887","html_url":"https://github.com/apache/druid/issues/7858#issuecomment-502780887","issue_url":"https://api.github.com/repos/apache/druid/issues/7858","id":502780887,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc4MDg4Nw==","user":{"login":"sashidhar","id":287761,"node_id":"MDQ6VXNlcjI4Nzc2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/287761?v=4","gravatar_id":"","url":"https://api.github.com/users/sashidhar","html_url":"https://github.com/sashidhar","followers_url":"https://api.github.com/users/sashidhar/followers","following_url":"https://api.github.com/users/sashidhar/following{/other_user}","gists_url":"https://api.github.com/users/sashidhar/gists{/gist_id}","starred_url":"https://api.github.com/users/sashidhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sashidhar/subscriptions","organizations_url":"https://api.github.com/users/sashidhar/orgs","repos_url":"https://api.github.com/users/sashidhar/repos","events_url":"https://api.github.com/users/sashidhar/events{/privacy}","received_events_url":"https://api.github.com/users/sashidhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T17:38:40Z","updated_at":"2019-06-17T17:38:40Z","author_association":"CONTRIBUTOR","body":"The side effect of adding a static analysis check catching ImmutableDruidDataSource.equals() is that assert statements in tests like [Assert.assertEquals(dataSource, objectMapper.readValue(json, ImmutableDruidDataSource.class));](https://github.com/apache/incubator-druid/blob/master/server/src/test/java/org/apache/druid/client/ImmutableDruidDataSourceTest.java) are flagged as errors. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502780887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502786956","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502786956","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502786956,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc4Njk1Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T17:55:52Z","updated_at":"2019-06-17T17:55:52Z","author_association":"CONTRIBUTOR","body":"There's nothing special in my test code. I just measured time elapsed in `SegmentManager.loadSegment()`.\r\n\r\n```java\r\n  @Test(timeout = 5000L)\r\n  public void testLoadMultipleSegments() throws IOException, ExecutionException, InterruptedException\r\n  {\r\n    final List<DataSegment> segments = new ArrayList<>(88);\r\n    for (int i = 0; i < 11; i++) {\r\n      for (int j = 0; j < 8; j++) {\r\n        segments.add(createSegment(StringUtils.format(\"2019-%02d-01/2019-%02d-01\", i + 1, i + 2)));\r\n      }\r\n    }\r\n\r\n    final List<Future> futures = IntStream\r\n        .range(0, 16)\r\n        .mapToObj(i -> exec.submit(() -> {\r\n          for (DataSegment segment : segments) {\r\n            try {\r\n              final long before = System.currentTimeMillis();\r\n              segmentManager.loadSegment(segment);\r\n              System.err.println(Thread.currentThread().getName() + \": \" + (System.currentTimeMillis() - before) + \" ms\");\r\n            }\r\n            catch (SegmentLoadingException e) {\r\n              throw new RuntimeException(e);\r\n            }\r\n          }\r\n        }))\r\n        .collect(Collectors.toList());\r\n    for (Future future : futures) {\r\n      future.get();\r\n    }\r\n    Assert.assertEquals(11, segmentPuller.numFileLoaded.size());\r\n    Assert.assertEquals(1, segmentPuller.numFileLoaded.values().iterator().next().intValue());\r\n    Assert.assertEquals(0, segmentLoader.getSegmentLocks().size());\r\n  }\r\n```\r\n\r\nAs I said earlier, I don't think it's normal if it takes ~100 ms to copy a single file with modern hardware. It took 0.304 sec even in Travis which runs those tests with limited resources in a [virtualized container](https://docs.travis-ci.com/user/reference/overview/). Since it seems that this problem is reproducible only in your test environment, please check what portion takes so long time.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502786956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502792221","html_url":"https://github.com/apache/druid/issues/6855#issuecomment-502792221","issue_url":"https://api.github.com/repos/apache/druid/issues/6855","id":502792221,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjc5MjIyMQ==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T18:10:43Z","updated_at":"2019-06-17T18:10:43Z","author_association":"CONTRIBUTOR","body":"I'm working on this. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502792221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502824851","html_url":"https://github.com/apache/druid/issues/4715#issuecomment-502824851","issue_url":"https://api.github.com/repos/apache/druid/issues/4715","id":502824851,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgyNDg1MQ==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T19:47:51Z","updated_at":"2019-06-17T19:47:51Z","author_association":"MEMBER","body":"closed by https://github.com/druid-io/druid-console/pull/21. Additionally, I believe the new web console should have the same functionality.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502824851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502826408","html_url":"https://github.com/apache/druid/issues/7548#issuecomment-502826408","issue_url":"https://api.github.com/repos/apache/druid/issues/7548","id":502826408,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgyNjQwOA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T19:52:35Z","updated_at":"2019-06-17T19:52:35Z","author_association":"MEMBER","body":"Closed by #7528 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502826408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502828443","html_url":"https://github.com/apache/druid/issues/4050#issuecomment-502828443","issue_url":"https://api.github.com/repos/apache/druid/issues/4050","id":502828443,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgyODQ0Mw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T19:58:21Z","updated_at":"2019-06-17T19:58:21Z","author_association":"CONTRIBUTOR","body":"This was fixed a long time ago, in Druid 0.11 or 0.12 I believe.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502828443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502833560","html_url":"https://github.com/apache/druid/issues/4050#issuecomment-502833560","issue_url":"https://api.github.com/repos/apache/druid/issues/4050","id":502833560,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgzMzU2MA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T20:13:51Z","updated_at":"2019-06-17T20:13:51Z","author_association":"MEMBER","body":"Actually, it appears [this was still true in 0.13](https://github.com/apache/incubator-druid/blob/0.13.0-incubating/indexing-service/src/main/resources/indexer_static/console.html#L26) but was [fixed with the introduction of the new web console in 0.14](https://github.com/apache/incubator-druid/blob/0.14.0-incubating/web-console/console.html#L26)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502833560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502836477","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502836477","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502836477,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgzNjQ3Nw==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T20:22:31Z","updated_at":"2019-06-17T20:22:31Z","author_association":"CONTRIBUTOR","body":"@jihoonson in loadSegment method out of 100ms this `final Segment adapter = getAdapter(segment);` is taking ~90ms, not sure why ? any clue ? \r\n\r\nand also discovered that after the initial load of the segment by each thread, time reduces to ~1 ms, the only first time by each thread is taking ~100ms. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502836477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/502845494","html_url":"https://github.com/apache/druid/pull/7890#issuecomment-502845494","issue_url":"https://api.github.com/repos/apache/druid/issues/7890","id":502845494,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjg0NTQ5NA==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T20:49:19Z","updated_at":"2019-06-17T20:49:19Z","author_association":"CONTRIBUTOR","body":"@jihoonson below synchronized block is taking around ~80 ms but for getSegmentFiles one thread is taking ~75ms all others are ~1ms.\r\n\r\n`synchronized (lock) {\r\n      try {\r\n        segmentFiles = getSegmentFiles(segment);\r\n      }\r\n      finally {\r\n        unlock(segment, lock);\r\n      }\r\n    }`\r\nand changed NUM_THREAD to 1 instead of 4 (default), full test time reduced to ~500ms from ~5000ms with 4 threads\r\n\r\nLooks like getting lock is significant overhead to the methods since it requires acquiring a lock when entering the method - or at least checking whether the current thread already possesses the lock. These operations are quite expensive and they have to be done every single time one of the methods is entered. Since - due to the recursion - this happens a lot, it has an extreme impact on the program performance.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/502845494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]