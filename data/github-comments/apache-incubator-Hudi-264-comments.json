[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212111626","html_url":"https://github.com/apache/hudi/issues/4622#issuecomment-1212111626","issue_url":"https://api.github.com/repos/apache/hudi/issues/4622","id":1212111626,"node_id":"IC_kwDOBI7nWM5IP1sK","user":{"login":"pomaster","id":1530959,"node_id":"MDQ6VXNlcjE1MzA5NTk=","avatar_url":"https://avatars.githubusercontent.com/u/1530959?v=4","gravatar_id":"","url":"https://api.github.com/users/pomaster","html_url":"https://github.com/pomaster","followers_url":"https://api.github.com/users/pomaster/followers","following_url":"https://api.github.com/users/pomaster/following{/other_user}","gists_url":"https://api.github.com/users/pomaster/gists{/gist_id}","starred_url":"https://api.github.com/users/pomaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pomaster/subscriptions","organizations_url":"https://api.github.com/users/pomaster/orgs","repos_url":"https://api.github.com/users/pomaster/repos","events_url":"https://api.github.com/users/pomaster/events{/privacy}","received_events_url":"https://api.github.com/users/pomaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T15:00:25Z","updated_at":"2022-08-11T15:00:25Z","author_association":"NONE","body":"@nochimow Thanks for the info!  When was the last update from AWS Support on your ticket?  We are planning to reach out to AWS Redshift engineering team for help.  Don't want to waste their time if there has already been a recent status update (e.g. < 1 month).  Can you share your AWS Support ticket #?  You can e-mail me at: po@onehouse.ai. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212111626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212217296","html_url":"https://github.com/apache/hudi/pull/6372#issuecomment-1212217296","issue_url":"https://api.github.com/repos/apache/hudi/issues/6372","id":1212217296,"node_id":"IC_kwDOBI7nWM5IQPfQ","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T16:31:03Z","updated_at":"2022-08-11T16:31:03Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"405334c622e8bd597f789ce1e1bf1b7d8e791327\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10739\",\n    \"triggerID\" : \"405334c622e8bd597f789ce1e1bf1b7d8e791327\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 405334c622e8bd597f789ce1e1bf1b7d8e791327 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10739) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212217296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212230365","html_url":"https://github.com/apache/hudi/issues/6194#issuecomment-1212230365","issue_url":"https://api.github.com/repos/apache/hudi/issues/6194","id":1212230365,"node_id":"IC_kwDOBI7nWM5IQSrd","user":{"login":"ehurheap","id":87341931,"node_id":"MDQ6VXNlcjg3MzQxOTMx","avatar_url":"https://avatars.githubusercontent.com/u/87341931?v=4","gravatar_id":"","url":"https://api.github.com/users/ehurheap","html_url":"https://github.com/ehurheap","followers_url":"https://api.github.com/users/ehurheap/followers","following_url":"https://api.github.com/users/ehurheap/following{/other_user}","gists_url":"https://api.github.com/users/ehurheap/gists{/gist_id}","starred_url":"https://api.github.com/users/ehurheap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehurheap/subscriptions","organizations_url":"https://api.github.com/users/ehurheap/orgs","repos_url":"https://api.github.com/users/ehurheap/repos","events_url":"https://api.github.com/users/ehurheap/events{/privacy}","received_events_url":"https://api.github.com/users/ehurheap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T16:45:05Z","updated_at":"2022-08-11T16:45:05Z","author_association":"NONE","body":"@KnightChess , yes there is duplicate data when running a query on the data:\r\n\r\n```\r\n  val path=\"s3://<bucketpath>/tables/events\"\r\n  val events = spark.read.format(\"hudi\").option(\"hoodie.datasource.query.type\", \"read_optimized\").load(path)\r\n\r\n  events.createOrReplaceTempView(\"events\")\r\n  val dupeQuery =\r\n    \"\"\"select env_id, event_id, user_id, count(*) from events\r\n      | where env_id = 123 and week = '20220711'\r\n      | group by env_id, event_id, user_id\r\n      | having count(*) > 1\r\n      |\"\"\".stripMargin\r\n\r\nval res = spark.sql(dupeQuery)\r\nres: org.apache.spark.sql.DataFrame = [env_id: bigint, event_id: bigint ... 2 more fields]\r\n\r\n  scala> res.show\r\n  +---------+----------------+----------------+--------+\r\n  |   env_id|        event_id|         user_id|count(1)|\r\n  +---------+----------------+----------------+--------+\r\n  |      123|4401289435098557|3813718218593807|       2|\r\n  |      123|7627782625576713|4299498150167280|       2|\r\n  |      123|7972131523381176|4461192992664821|       2|\r\n...\r\n  +---------+----------------+----------------+--------+\r\n  only showing top 20 rows\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212230365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212279531","html_url":"https://github.com/apache/hudi/issues/5960#issuecomment-1212279531","issue_url":"https://api.github.com/repos/apache/hudi/issues/5960","id":1212279531,"node_id":"IC_kwDOBI7nWM5IQerr","user":{"login":"parisni","id":9535350,"node_id":"MDQ6VXNlcjk1MzUzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9535350?v=4","gravatar_id":"","url":"https://api.github.com/users/parisni","html_url":"https://github.com/parisni","followers_url":"https://api.github.com/users/parisni/followers","following_url":"https://api.github.com/users/parisni/following{/other_user}","gists_url":"https://api.github.com/users/parisni/gists{/gist_id}","starred_url":"https://api.github.com/users/parisni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parisni/subscriptions","organizations_url":"https://api.github.com/users/parisni/orgs","repos_url":"https://api.github.com/users/parisni/repos","events_url":"https://api.github.com/users/parisni/events{/privacy}","received_events_url":"https://api.github.com/users/parisni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T17:31:06Z","updated_at":"2022-08-11T17:31:06Z","author_association":"CONTRIBUTOR","body":"I am using the sync command programmatically. Indeed the glue error happens from time to time . glue backend look not that stable, then I guess the sync process should handle those cases better othwrwize it fails and leave the glue metastore corrupted\n\nOn August 1, 2022 12:04:13 PM UTC, Sagar Sumit ***@***.***> wrote:\n***@***.*** Any update on this issue? If it's still happening, can you please start from scratch syncing to a different database, and provide the sync tool command that you ran?\n>\n>-- \n>Reply to this email directly or view it on GitHub:\n>https://github.com/apache/hudi/issues/5960#issuecomment-1201111260\n>You are receiving this because you were mentioned.\n>\n>Message ID: ***@***.***>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212279531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212294425","html_url":"https://github.com/apache/hudi/issues/6056#issuecomment-1212294425","issue_url":"https://api.github.com/repos/apache/hudi/issues/6056","id":1212294425,"node_id":"IC_kwDOBI7nWM5IQiUZ","user":{"login":"parisni","id":9535350,"node_id":"MDQ6VXNlcjk1MzUzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9535350?v=4","gravatar_id":"","url":"https://api.github.com/users/parisni","html_url":"https://github.com/parisni","followers_url":"https://api.github.com/users/parisni/followers","following_url":"https://api.github.com/users/parisni/following{/other_user}","gists_url":"https://api.github.com/users/parisni/gists{/gist_id}","starred_url":"https://api.github.com/users/parisni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parisni/subscriptions","organizations_url":"https://api.github.com/users/parisni/orgs","repos_url":"https://api.github.com/users/parisni/repos","events_url":"https://api.github.com/users/parisni/events{/privacy}","received_events_url":"https://api.github.com/users/parisni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T17:47:01Z","updated_at":"2022-08-11T17:47:01Z","author_association":"CONTRIBUTOR","body":"Cleaning the table solves the issue. I had auto clean disabled.\n\nOn August 10, 2022 2:31:13 AM UTC, Sivabalan Narayanan ***@***.***> wrote:\n>Raised a hudi-cli ask https://issues.apache.org/jira/browse/HUDI-4587. don't think we can do much here automatically. these are from old hudi versions. ideally w/ newer hudi versions, we do take care of all pending commits. \n>\n>-- \n>Reply to this email directly or view it on GitHub:\n>https://github.com/apache/hudi/issues/6056#issuecomment-1210079322\n>You are receiving this because you were mentioned.\n>\n>Message ID: ***@***.***>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212294425/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212348205","html_url":"https://github.com/apache/hudi/pull/6264#issuecomment-1212348205","issue_url":"https://api.github.com/repos/apache/hudi/issues/6264","id":1212348205,"node_id":"IC_kwDOBI7nWM5IQvct","user":{"login":"alexeykudinkin","id":428277,"node_id":"MDQ6VXNlcjQyODI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/428277?v=4","gravatar_id":"","url":"https://api.github.com/users/alexeykudinkin","html_url":"https://github.com/alexeykudinkin","followers_url":"https://api.github.com/users/alexeykudinkin/followers","following_url":"https://api.github.com/users/alexeykudinkin/following{/other_user}","gists_url":"https://api.github.com/users/alexeykudinkin/gists{/gist_id}","starred_url":"https://api.github.com/users/alexeykudinkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexeykudinkin/subscriptions","organizations_url":"https://api.github.com/users/alexeykudinkin/orgs","repos_url":"https://api.github.com/users/alexeykudinkin/repos","events_url":"https://api.github.com/users/alexeykudinkin/events{/privacy}","received_events_url":"https://api.github.com/users/alexeykudinkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T18:29:15Z","updated_at":"2022-08-11T18:29:15Z","author_association":"CONTRIBUTOR","body":"@YannByron @xushiyan I also started experimenting myself on this issue to see if my hunch is right that we can avoid pulling in more resolution logic from Spark into Hudi in: https://github.com/apache/hudi/pull/6361/files\r\n\r\nLet's hold on merging this PR until we confirm whether we'd be able to avoid pulling in resolution logic and make things simpler in the end. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212348205/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212632685","html_url":"https://github.com/apache/hudi/issues/6375#issuecomment-1212632685","issue_url":"https://api.github.com/repos/apache/hudi/issues/6375","id":1212632685,"node_id":"IC_kwDOBI7nWM5IR05t","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:00:54Z","updated_at":"2022-08-12T01:01:16Z","author_association":"CONTRIBUTOR","body":"It's a known bug, we have fixed it in: https://github.com/apache/hudi/pull/6179,\r\nYou can use this patch branch: https://github.com/apache/hudi/pull/6182 instead\r\nor wait for the release 0.12.0 which is coming out very soon ~","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212632685/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212634123","html_url":"https://github.com/apache/hudi/issues/6375#issuecomment-1212634123","issue_url":"https://api.github.com/repos/apache/hudi/issues/6375","id":1212634123,"node_id":"IC_kwDOBI7nWM5IR1QL","user":{"login":"sunmingqiaa","id":54654046,"node_id":"MDQ6VXNlcjU0NjU0MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/54654046?v=4","gravatar_id":"","url":"https://api.github.com/users/sunmingqiaa","html_url":"https://github.com/sunmingqiaa","followers_url":"https://api.github.com/users/sunmingqiaa/followers","following_url":"https://api.github.com/users/sunmingqiaa/following{/other_user}","gists_url":"https://api.github.com/users/sunmingqiaa/gists{/gist_id}","starred_url":"https://api.github.com/users/sunmingqiaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunmingqiaa/subscriptions","organizations_url":"https://api.github.com/users/sunmingqiaa/orgs","repos_url":"https://api.github.com/users/sunmingqiaa/repos","events_url":"https://api.github.com/users/sunmingqiaa/events{/privacy}","received_events_url":"https://api.github.com/users/sunmingqiaa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:04:10Z","updated_at":"2022-08-12T01:04:10Z","author_association":"NONE","body":"> It's a known bug, we have fixed it in: #6179, You can use this patch branch: #6182 instead or wait for the release 0.12.0 which is coming out very soon ~\r\n\r\nok，thank you\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212634123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212635270","html_url":"https://github.com/apache/hudi/pull/6179#issuecomment-1212635270","issue_url":"https://api.github.com/repos/apache/hudi/issues/6179","id":1212635270,"node_id":"IC_kwDOBI7nWM5IR1iG","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:06:49Z","updated_at":"2023-02-06T09:39:31Z","author_association":"CONTRIBUTOR","body":"> In your case did the Data loss happen because this refresh DID NOT happen?\r\n\r\nThat's just our case ! A nice algorithm to figureout whether local fs view is ahead of the remote one is great if it is smart enough, but I want to say only comparing the latest commit is far from enough.\r\n\r\nIn order to do that, you should compare all the instants on the timeline, that is how the timeline hash code works here. Maybe we can pass around all the active timeline instants and do a `#contains` check for the timeline instants.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212635270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212639035","html_url":"https://github.com/apache/hudi/pull/6365#issuecomment-1212639035","issue_url":"https://api.github.com/repos/apache/hudi/issues/6365","id":1212639035,"node_id":"IC_kwDOBI7nWM5IR2c7","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:15:52Z","updated_at":"2022-08-12T01:15:52Z","author_association":"CONTRIBUTOR","body":"Thanks, can you describe a little what are we trying to fix here ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212639035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212639920","html_url":"https://github.com/apache/hudi/pull/6369#issuecomment-1212639920","issue_url":"https://api.github.com/repos/apache/hudi/issues/6369","id":1212639920,"node_id":"IC_kwDOBI7nWM5IR2qw","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:17:57Z","updated_at":"2022-08-12T01:17:57Z","author_association":"CONTRIBUTOR","body":"Thanks for the contribution @linfey90 , it is a valid fix, can you fire a JIRA issue here: https://issues.apache.org/jira/projects/HUDI/issues/HUDI-4579?filter=allopenissues\r\n\r\nand change the commit title to the form:\r\n\r\n`[HUDI-${JIRA_ISSUE_ID}] ${your commit message}`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212639920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212667973","html_url":"https://github.com/apache/hudi/issues/6056#issuecomment-1212667973","issue_url":"https://api.github.com/repos/apache/hudi/issues/6056","id":1212667973,"node_id":"IC_kwDOBI7nWM5IR9hF","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:22:21Z","updated_at":"2022-08-12T02:22:21Z","author_association":"CONTRIBUTOR","body":"oh yeah. I had a chat w/ Ethan around this. we will try to put up something to de-couple cleaner and rollbacks. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212667973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212668958","html_url":"https://github.com/apache/hudi/issues/6185#issuecomment-1212668958","issue_url":"https://api.github.com/repos/apache/hudi/issues/6185","id":1212668958,"node_id":"IC_kwDOBI7nWM5IR9we","user":{"login":"YannByron","id":10036681,"node_id":"MDQ6VXNlcjEwMDM2Njgx","avatar_url":"https://avatars.githubusercontent.com/u/10036681?v=4","gravatar_id":"","url":"https://api.github.com/users/YannByron","html_url":"https://github.com/YannByron","followers_url":"https://api.github.com/users/YannByron/followers","following_url":"https://api.github.com/users/YannByron/following{/other_user}","gists_url":"https://api.github.com/users/YannByron/gists{/gist_id}","starred_url":"https://api.github.com/users/YannByron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YannByron/subscriptions","organizations_url":"https://api.github.com/users/YannByron/orgs","repos_url":"https://api.github.com/users/YannByron/repos","events_url":"https://api.github.com/users/YannByron/events{/privacy}","received_events_url":"https://api.github.com/users/YannByron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:24:41Z","updated_at":"2022-08-12T02:24:41Z","author_association":"CONTRIBUTOR","body":"@paul8263 Check whether these configs is right on spark thrift server.\r\nspark.sql.extensions -> org.apache.spark.sql.hudi.HoodieSparkSessionExtension\r\nspark.sql.catalog.spark_catalog -> org.apache.spark.sql.hudi.catalog.HoodieCatalog","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212668958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669377","html_url":"https://github.com/apache/hudi/issues/6378#issuecomment-1212669377","issue_url":"https://api.github.com/repos/apache/hudi/issues/6378","id":1212669377,"node_id":"IC_kwDOBI7nWM5IR93B","user":{"login":"BruceKellan","id":13477122,"node_id":"MDQ6VXNlcjEzNDc3MTIy","avatar_url":"https://avatars.githubusercontent.com/u/13477122?v=4","gravatar_id":"","url":"https://api.github.com/users/BruceKellan","html_url":"https://github.com/BruceKellan","followers_url":"https://api.github.com/users/BruceKellan/followers","following_url":"https://api.github.com/users/BruceKellan/following{/other_user}","gists_url":"https://api.github.com/users/BruceKellan/gists{/gist_id}","starred_url":"https://api.github.com/users/BruceKellan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BruceKellan/subscriptions","organizations_url":"https://api.github.com/users/BruceKellan/orgs","repos_url":"https://api.github.com/users/BruceKellan/repos","events_url":"https://api.github.com/users/BruceKellan/events{/privacy}","received_events_url":"https://api.github.com/users/BruceKellan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:25:37Z","updated_at":"2022-08-12T02:26:46Z","author_association":"CONTRIBUTOR","body":"1. If you are in streaming mode, each miniBatch creates a commit. For example, a commit will be created during a checkpoint in the `Flink engine`.\r\n2. If you write in batch mode, and write 1000 records at a time, only one commit will be created.\r\n\r\nHappy to help.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669526","html_url":"https://github.com/apache/hudi/issues/6194#issuecomment-1212669526","issue_url":"https://api.github.com/repos/apache/hudi/issues/6194","id":1212669526,"node_id":"IC_kwDOBI7nWM5IR95W","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:26:01Z","updated_at":"2022-08-12T02:26:01Z","author_association":"CONTRIBUTOR","body":"sorry. I am bit confused. If I am not wrong, this is your issue. \r\nyou had duplicates in your hudi table somehow. \r\nyou tried to execute hudi-cli to dedup and ran into issues and posted w/ the stacktrace. \r\n\r\nI gave you the commands I used and showed that it worked for me. \r\n\r\nBut I could not gauge your response to that. repair dedup command does not fix duplicates in the table. It dumps the deduped records to a separate location as parquet data. you may need to delete the matching entries from hudi and load the  parquet data again. I understand its not easy. but thats the only option we have. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669572","html_url":"https://github.com/apache/hudi/issues/6194#issuecomment-1212669572","issue_url":"https://api.github.com/repos/apache/hudi/issues/6194","id":1212669572,"node_id":"IC_kwDOBI7nWM5IR96E","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:26:10Z","updated_at":"2022-08-12T02:26:10Z","author_association":"CONTRIBUTOR","body":"let me know how we can help further. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212669572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212670902","html_url":"https://github.com/apache/hudi/issues/6069#issuecomment-1212670902","issue_url":"https://api.github.com/repos/apache/hudi/issues/6069","id":1212670902,"node_id":"IC_kwDOBI7nWM5IR-O2","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:29:22Z","updated_at":"2022-08-12T02:29:22Z","author_association":"CONTRIBUTOR","body":"We had a bug around compaction not cleaning up the marker files which was fixed in 0.10.0 https://github.com/apache/hudi/pull/3576\r\nSo, yes, we do know of some situations where markers files were not cleaned up. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212670902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671270","html_url":"https://github.com/apache/hudi/issues/6069#issuecomment-1212671270","issue_url":"https://api.github.com/repos/apache/hudi/issues/6069","id":1212671270,"node_id":"IC_kwDOBI7nWM5IR-Um","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:30:11Z","updated_at":"2022-08-12T02:30:11Z","author_association":"CONTRIBUTOR","body":"yes, if there are no matching commit files in /.hoodie/, you can remove the directories from /.hoodie/.temp folder.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671401","html_url":"https://github.com/apache/hudi/issues/6069#issuecomment-1212671401","issue_url":"https://api.github.com/repos/apache/hudi/issues/6069","id":1212671401,"node_id":"IC_kwDOBI7nWM5IR-Wp","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:30:32Z","updated_at":"2022-08-12T02:30:32Z","author_association":"CONTRIBUTOR","body":"feel free to close out the issue, if you don't have any follow ups. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671472","html_url":"https://github.com/apache/hudi/pull/6369#issuecomment-1212671472","issue_url":"https://api.github.com/repos/apache/hudi/issues/6369","id":1212671472,"node_id":"IC_kwDOBI7nWM5IR-Xw","user":{"login":"linfey90","id":12129761,"node_id":"MDQ6VXNlcjEyMTI5NzYx","avatar_url":"https://avatars.githubusercontent.com/u/12129761?v=4","gravatar_id":"","url":"https://api.github.com/users/linfey90","html_url":"https://github.com/linfey90","followers_url":"https://api.github.com/users/linfey90/followers","following_url":"https://api.github.com/users/linfey90/following{/other_user}","gists_url":"https://api.github.com/users/linfey90/gists{/gist_id}","starred_url":"https://api.github.com/users/linfey90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linfey90/subscriptions","organizations_url":"https://api.github.com/users/linfey90/orgs","repos_url":"https://api.github.com/users/linfey90/repos","events_url":"https://api.github.com/users/linfey90/events{/privacy}","received_events_url":"https://api.github.com/users/linfey90/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:30:39Z","updated_at":"2022-08-12T02:31:18Z","author_association":"CONTRIBUTOR","body":"> Thanks for the contribution @linfey90 , it is a valid fix, can you fire a JIRA issue here: https://issues.apache.org/jira/projects/HUDI/issues/HUDI-4579?filter=allopenissues\r\n> \r\n> and change the commit title to the form:\r\n> \r\n> `[HUDI-${JIRA_ISSUE_ID}] ${your commit message}`\r\n\r\nI did it and I'll pay attention next time，thanks！","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671710","html_url":"https://github.com/apache/hudi/issues/6095#issuecomment-1212671710","issue_url":"https://api.github.com/repos/apache/hudi/issues/6095","id":1212671710,"node_id":"IC_kwDOBI7nWM5IR-be","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:31:13Z","updated_at":"2022-08-12T02:31:13Z","author_association":"CONTRIBUTOR","body":"thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212671710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212672399","html_url":"https://github.com/apache/hudi/issues/5861#issuecomment-1212672399","issue_url":"https://api.github.com/repos/apache/hudi/issues/5861","id":1212672399,"node_id":"IC_kwDOBI7nWM5IR-mP","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:32:46Z","updated_at":"2022-08-12T02:32:46Z","author_association":"CONTRIBUTOR","body":"@XuQianJin-Stars @minihippo : Can either of you folks assist @kk17 please. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212672399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673631","html_url":"https://github.com/apache/hudi/issues/6344#issuecomment-1212673631","issue_url":"https://api.github.com/repos/apache/hudi/issues/6344","id":1212673631,"node_id":"IC_kwDOBI7nWM5IR-5f","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:35:46Z","updated_at":"2022-08-12T02:35:46Z","author_association":"CONTRIBUTOR","body":"@bhasudha @pomaster : Can we follow up on this documentation enhancement please. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673797","html_url":"https://github.com/apache/hudi/issues/6378#issuecomment-1212673797","issue_url":"https://api.github.com/repos/apache/hudi/issues/6378","id":1212673797,"node_id":"IC_kwDOBI7nWM5IR-8F","user":{"login":"bithw1","id":24691083,"node_id":"MDQ6VXNlcjI0NjkxMDgz","avatar_url":"https://avatars.githubusercontent.com/u/24691083?v=4","gravatar_id":"","url":"https://api.github.com/users/bithw1","html_url":"https://github.com/bithw1","followers_url":"https://api.github.com/users/bithw1/followers","following_url":"https://api.github.com/users/bithw1/following{/other_user}","gists_url":"https://api.github.com/users/bithw1/gists{/gist_id}","starred_url":"https://api.github.com/users/bithw1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bithw1/subscriptions","organizations_url":"https://api.github.com/users/bithw1/orgs","repos_url":"https://api.github.com/users/bithw1/repos","events_url":"https://api.github.com/users/bithw1/events{/privacy}","received_events_url":"https://api.github.com/users/bithw1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:36:14Z","updated_at":"2022-08-12T02:37:04Z","author_association":"NONE","body":"> 1. If you are in streaming mode, each miniBatch creates a commit. For example, a commit will be created during a checkpoint in the `Flink engine`.\r\n> 2. If you write in batch mode, and write 1000 records at a time, only one commit will be created.\r\n> \r\n> Happy to help.\r\n\r\nThanks @BruceKellan  for the helpful reply!\r\nI have a further question: for my case of the  COW table and I would like to write 5 records into this table, one record per minute, I am using spark, and\r\nnot using streaming,\r\n\r\nI am doing is:  \r\n0. start spark application\r\n1. kick off 1st spark write job and write one record\r\n2. sleep 1 minutes\r\n3. kick off 2nd spark write job and write one record\r\n....\r\nn. stop spark application\r\n\r\nWill each spark job create a commit? It looks to me that no matter how many records are written by one spark job, it will always create one commit?\r\n\r\n Thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673875","html_url":"https://github.com/apache/hudi/pull/6350#issuecomment-1212673875","issue_url":"https://api.github.com/repos/apache/hudi/issues/6350","id":1212673875,"node_id":"IC_kwDOBI7nWM5IR-9T","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:36:27Z","updated_at":"2022-08-12T02:36:27Z","author_association":"CONTRIBUTOR","body":"thanks @yesemsanthoshkumar for the patch. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212673875/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212674948","html_url":"https://github.com/apache/hudi/issues/6378#issuecomment-1212674948","issue_url":"https://api.github.com/repos/apache/hudi/issues/6378","id":1212674948,"node_id":"IC_kwDOBI7nWM5IR_OE","user":{"login":"BruceKellan","id":13477122,"node_id":"MDQ6VXNlcjEzNDc3MTIy","avatar_url":"https://avatars.githubusercontent.com/u/13477122?v=4","gravatar_id":"","url":"https://api.github.com/users/BruceKellan","html_url":"https://github.com/BruceKellan","followers_url":"https://api.github.com/users/BruceKellan/followers","following_url":"https://api.github.com/users/BruceKellan/following{/other_user}","gists_url":"https://api.github.com/users/BruceKellan/gists{/gist_id}","starred_url":"https://api.github.com/users/BruceKellan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BruceKellan/subscriptions","organizations_url":"https://api.github.com/users/BruceKellan/orgs","repos_url":"https://api.github.com/users/BruceKellan/repos","events_url":"https://api.github.com/users/BruceKellan/events{/privacy}","received_events_url":"https://api.github.com/users/BruceKellan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:39:28Z","updated_at":"2022-08-12T02:39:28Z","author_association":"CONTRIBUTOR","body":"> > 1. If you are in streaming mode, each miniBatch creates a commit. For example, a commit will be created during a checkpoint in the `Flink engine`.\r\n> > 2. If you write in batch mode, and write 1000 records at a time, only one commit will be created.\r\n> > \r\n> > Happy to help.\r\n> \r\n> Thanks @BruceKellan for the helpful reply! I have a further question: for my case of the COW table and I would like to write 5 records into this table, one record per minute, I am using spark, and not using streaming,\r\n> \r\n> I am doing is: 0. start spark application\r\n> \r\n> 1. kick off 1st spark write job and write one record\r\n> 2. sleep 1 minutes\r\n> 3. kick off 2nd spark write job and write one record\r\n>    ....\r\n>    n. stop spark application\r\n> \r\n> Will each spark job create a commit? It looks to me that no matter how many records are written by one spark job, it will always create one commit?\r\n> \r\n> Thanks!\r\n\r\nYes, you are actually using 5 batch spark application in this scenario.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212674948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212676613","html_url":"https://github.com/apache/hudi/issues/5540#issuecomment-1212676613","issue_url":"https://api.github.com/repos/apache/hudi/issues/5540","id":1212676613,"node_id":"IC_kwDOBI7nWM5IR_oF","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:43:56Z","updated_at":"2022-08-12T02:43:56Z","author_association":"CONTRIBUTOR","body":"@nleena123 @ROOBALJINDAL : looks like the stacktrace does not have sufficient info to triage. So, can you folks enable debug logs and share what you see. We should probably get some insights into whats happening. Also, if we can somehow get a reproducible code, would really help us triage it faster. Since timeline events are very tough to grok manually looking at the logs. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212676613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212678357","html_url":"https://github.com/apache/hudi/issues/6259#issuecomment-1212678357","issue_url":"https://api.github.com/repos/apache/hudi/issues/6259","id":1212678357,"node_id":"IC_kwDOBI7nWM5ISADV","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T02:48:37Z","updated_at":"2022-08-12T02:48:44Z","author_association":"CONTRIBUTOR","body":"if I am not wrong, hudi already has data quality validator that you can run before completing a commit. If the validation fails, the commit will abort. Would that work for your case? \r\nhttps://hudi.apache.org/releases/release-0.9.0#writer-side-improvements\r\nCheck for \"pre commit validator framework\" in the above link. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212678357/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212684142","html_url":"https://github.com/apache/hudi/issues/6378#issuecomment-1212684142","issue_url":"https://api.github.com/repos/apache/hudi/issues/6378","id":1212684142,"node_id":"IC_kwDOBI7nWM5ISBdu","user":{"login":"bithw1","id":24691083,"node_id":"MDQ6VXNlcjI0NjkxMDgz","avatar_url":"https://avatars.githubusercontent.com/u/24691083?v=4","gravatar_id":"","url":"https://api.github.com/users/bithw1","html_url":"https://github.com/bithw1","followers_url":"https://api.github.com/users/bithw1/followers","following_url":"https://api.github.com/users/bithw1/following{/other_user}","gists_url":"https://api.github.com/users/bithw1/gists{/gist_id}","starred_url":"https://api.github.com/users/bithw1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bithw1/subscriptions","organizations_url":"https://api.github.com/users/bithw1/orgs","repos_url":"https://api.github.com/users/bithw1/repos","events_url":"https://api.github.com/users/bithw1/events{/privacy}","received_events_url":"https://api.github.com/users/bithw1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:04:04Z","updated_at":"2022-08-12T03:04:04Z","author_association":"NONE","body":"> > > 1. If you are in streaming mode, each miniBatch creates a commit. For example, a commit will be created during a checkpoint in the `Flink engine`.\r\n> > > 2. If you write in batch mode, and write 1000 records at a time, only one commit will be created.\r\n> > > \r\n> > > Happy to help.\r\n> > \r\n> > \r\n> > Thanks @BruceKellan for the helpful reply! I have a further question: for my case of the COW table and I would like to write 5 records into this table, one record per minute, I am using spark, and not using streaming,\r\n> > I am doing is: 0. start spark application\r\n> > \r\n> > 1. kick off 1st spark write job and write one record\r\n> > 2. sleep 1 minutes\r\n> > 3. kick off 2nd spark write job and write one record\r\n> >    ....\r\n> >    n. stop spark application\r\n> > \r\n> > Will each spark job create a commit? It looks to me that no matter how many records are written by one spark job, it will always create one commit?\r\n> > Thanks!\r\n> \r\n> Yes, you are actually using 5 batch spark application in this scenario.\r\n\r\nThanks @BruceKellan for the helpful answer, I am closing this support request!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212684142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212692501","html_url":"https://github.com/apache/hudi/pull/6369#issuecomment-1212692501","issue_url":"https://api.github.com/repos/apache/hudi/issues/6369","id":1212692501,"node_id":"IC_kwDOBI7nWM5ISDgV","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:23:36Z","updated_at":"2022-08-12T03:23:36Z","author_association":"CONTRIBUTOR","body":"The failed test case: `ITTestHoodieFlinkCompactor.testHoodieFlinkCompactor` seems flaky, should not be affected by this patch, would merge the PR soon ~","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212692501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212694867","html_url":"https://github.com/apache/hudi/pull/6372#issuecomment-1212694867","issue_url":"https://api.github.com/repos/apache/hudi/issues/6372","id":1212694867,"node_id":"IC_kwDOBI7nWM5ISEFT","user":{"login":"novisfff","id":62633257,"node_id":"MDQ6VXNlcjYyNjMzMjU3","avatar_url":"https://avatars.githubusercontent.com/u/62633257?v=4","gravatar_id":"","url":"https://api.github.com/users/novisfff","html_url":"https://github.com/novisfff","followers_url":"https://api.github.com/users/novisfff/followers","following_url":"https://api.github.com/users/novisfff/following{/other_user}","gists_url":"https://api.github.com/users/novisfff/gists{/gist_id}","starred_url":"https://api.github.com/users/novisfff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novisfff/subscriptions","organizations_url":"https://api.github.com/users/novisfff/orgs","repos_url":"https://api.github.com/users/novisfff/repos","events_url":"https://api.github.com/users/novisfff/events{/privacy}","received_events_url":"https://api.github.com/users/novisfff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:29:26Z","updated_at":"2022-08-12T03:29:26Z","author_association":"CONTRIBUTOR","body":"and this is the code of build writeConfig of writeClient. enableEmbeddedTimelineService is false\r\n`public static HoodieWriteConfig getHoodieClientConfig(\r\n      Configuration conf,\r\n      boolean enableEmbeddedTimelineService,\r\n      boolean loadFsViewStorageConfig) { \r\n...\r\n.withEmbeddedTimelineServerEnabled(enableEmbeddedTimelineService)\r\n .withEmbeddedTimelineServerReuseEnabled(true) // make write client embedded timeline service singleton\r\n...\r\n}`\r\n\r\n\r\n`public static HoodieWriteConfig getHoodieClientConfig(Configuration conf, boolean loadFsViewStorageConfig) {\r\n    return getHoodieClientConfig(conf, false, loadFsViewStorageConfig);\r\n  }`\r\nin class org.apache.hudi.util.StreamerUtil\r\n\r\nAbstractStreamWriteFunction use this function to init writeConfig\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212694867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212698982","html_url":"https://github.com/apache/hudi/pull/6372#issuecomment-1212698982","issue_url":"https://api.github.com/repos/apache/hudi/issues/6372","id":1212698982,"node_id":"IC_kwDOBI7nWM5ISFFm","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:39:18Z","updated_at":"2022-08-15T04:02:33Z","author_association":"CONTRIBUTOR","body":"> and this is the code of build writeConfig of writeClient. enableEmbeddedTimelineService is false `public static HoodieWriteConfig getHoodieClientConfig( Configuration conf, boolean enableEmbeddedTimelineService, boolean loadFsViewStorageConfig) { ... .withEmbeddedTimelineServerEnabled(enableEmbeddedTimelineService) .withEmbeddedTimelineServerReuseEnabled(true) // make write client embedded timeline service singleton ... }`\r\n> \r\n> `public static HoodieWriteConfig getHoodieClientConfig(Configuration conf, boolean loadFsViewStorageConfig) { return getHoodieClientConfig(conf, false, loadFsViewStorageConfig); }` in class org.apache.hudi.util.StreamerUtil\r\n> \r\n> AbstractStreamWriteFunction use this function to init writeConfig\r\n\r\nEven though the fix may work for flink, it is not general, the only truth for distinguishing remote request is the `storage type`, it has no relationship with whether we reuse the timeline server.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212698982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212699886","html_url":"https://github.com/apache/hudi/issues/6371#issuecomment-1212699886","issue_url":"https://api.github.com/repos/apache/hudi/issues/6371","id":1212699886,"node_id":"IC_kwDOBI7nWM5ISFTu","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:41:32Z","updated_at":"2022-08-12T03:41:32Z","author_association":"CONTRIBUTOR","body":"Not as expected, did you try restart directly from the latest checkpoint ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212699886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212704651","html_url":"https://github.com/apache/hudi/pull/6372#issuecomment-1212704651","issue_url":"https://api.github.com/repos/apache/hudi/issues/6372","id":1212704651,"node_id":"IC_kwDOBI7nWM5ISGeL","user":{"login":"novisfff","id":62633257,"node_id":"MDQ6VXNlcjYyNjMzMjU3","avatar_url":"https://avatars.githubusercontent.com/u/62633257?v=4","gravatar_id":"","url":"https://api.github.com/users/novisfff","html_url":"https://github.com/novisfff","followers_url":"https://api.github.com/users/novisfff/followers","following_url":"https://api.github.com/users/novisfff/following{/other_user}","gists_url":"https://api.github.com/users/novisfff/gists{/gist_id}","starred_url":"https://api.github.com/users/novisfff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novisfff/subscriptions","organizations_url":"https://api.github.com/users/novisfff/orgs","repos_url":"https://api.github.com/users/novisfff/repos","events_url":"https://api.github.com/users/novisfff/events{/privacy}","received_events_url":"https://api.github.com/users/novisfff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T03:55:30Z","updated_at":"2022-08-12T03:55:30Z","author_association":"CONTRIBUTOR","body":"> > and this is the code of build writeConfig of writeClient. enableEmbeddedTimelineService is false `public static HoodieWriteConfig getHoodieClientConfig( Configuration conf, boolean enableEmbeddedTimelineService, boolean loadFsViewStorageConfig) { ... .withEmbeddedTimelineServerEnabled(enableEmbeddedTimelineService) .withEmbeddedTimelineServerReuseEnabled(true) // make write client embedded timeline service singleton ... }`\r\n> > `public static HoodieWriteConfig getHoodieClientConfig(Configuration conf, boolean loadFsViewStorageConfig) { return getHoodieClientConfig(conf, false, loadFsViewStorageConfig); }` in class org.apache.hudi.util.StreamerUtil\r\n> > AbstractStreamWriteFunction use this function to init writeConfig\r\n> \r\n> Even though the fix may works for flink, but it is not general, the only true for remote request is the `storage type`, it has no relationship with whether we reuse the timeline server.\r\n\r\nok, I understand. Do I need to submit a new commit for this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212704651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212723925","html_url":"https://github.com/apache/hudi/pull/6366#issuecomment-1212723925","issue_url":"https://api.github.com/repos/apache/hudi/issues/6366","id":1212723925,"node_id":"IC_kwDOBI7nWM5ISLLV","user":{"login":"ymZhao1001","id":19317643,"node_id":"MDQ6VXNlcjE5MzE3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/19317643?v=4","gravatar_id":"","url":"https://api.github.com/users/ymZhao1001","html_url":"https://github.com/ymZhao1001","followers_url":"https://api.github.com/users/ymZhao1001/followers","following_url":"https://api.github.com/users/ymZhao1001/following{/other_user}","gists_url":"https://api.github.com/users/ymZhao1001/gists{/gist_id}","starred_url":"https://api.github.com/users/ymZhao1001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymZhao1001/subscriptions","organizations_url":"https://api.github.com/users/ymZhao1001/orgs","repos_url":"https://api.github.com/users/ymZhao1001/repos","events_url":"https://api.github.com/users/ymZhao1001/events{/privacy}","received_events_url":"https://api.github.com/users/ymZhao1001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T04:42:23Z","updated_at":"2022-08-12T04:42:23Z","author_association":"NONE","body":"the ci failure cause by IT hudi-flink moudle","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212723925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212739943","html_url":"https://github.com/apache/hudi/pull/6291#issuecomment-1212739943","issue_url":"https://api.github.com/repos/apache/hudi/issues/6291","id":1212739943,"node_id":"IC_kwDOBI7nWM5ISPFn","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T05:21:31Z","updated_at":"2022-08-12T05:21:31Z","author_association":"MEMBER","body":"@flashJd thanks for your contribution. Would you make the commit message to reflect this bug fix and change the description of this PR to match with the PR template. This change LGTM and will merge this once above items are addressed. Thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212739943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212762448","html_url":"https://github.com/apache/hudi/pull/6365#issuecomment-1212762448","issue_url":"https://api.github.com/repos/apache/hudi/issues/6365","id":1212762448,"node_id":"IC_kwDOBI7nWM5ISUlQ","user":{"login":"wuwenchi","id":19755729,"node_id":"MDQ6VXNlcjE5NzU1NzI5","avatar_url":"https://avatars.githubusercontent.com/u/19755729?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwenchi","html_url":"https://github.com/wuwenchi","followers_url":"https://api.github.com/users/wuwenchi/followers","following_url":"https://api.github.com/users/wuwenchi/following{/other_user}","gists_url":"https://api.github.com/users/wuwenchi/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwenchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwenchi/subscriptions","organizations_url":"https://api.github.com/users/wuwenchi/orgs","repos_url":"https://api.github.com/users/wuwenchi/repos","events_url":"https://api.github.com/users/wuwenchi/events{/privacy}","received_events_url":"https://api.github.com/users/wuwenchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T06:10:20Z","updated_at":"2022-08-12T06:10:20Z","author_association":"CONTRIBUTOR","body":"@danny0405   The current partition key is stored in `partSpec`. If it is a partition key, the partition value can be used directly without reading the underlying data file. But when timestamp is used as the partition key, the partition value is not the real value, because the partition value is converted according to the real value, such as `yyyy-mm-dd`. So, it is necessary to remove the timestamp type in the `partSpec`.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212762448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212829370","html_url":"https://github.com/apache/hudi/issues/6348#issuecomment-1212829370","issue_url":"https://api.github.com/repos/apache/hudi/issues/6348","id":1212829370,"node_id":"IC_kwDOBI7nWM5ISk66","user":{"login":"ROOBALJINDAL","id":7212226,"node_id":"MDQ6VXNlcjcyMTIyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/7212226?v=4","gravatar_id":"","url":"https://api.github.com/users/ROOBALJINDAL","html_url":"https://github.com/ROOBALJINDAL","followers_url":"https://api.github.com/users/ROOBALJINDAL/followers","following_url":"https://api.github.com/users/ROOBALJINDAL/following{/other_user}","gists_url":"https://api.github.com/users/ROOBALJINDAL/gists{/gist_id}","starred_url":"https://api.github.com/users/ROOBALJINDAL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ROOBALJINDAL/subscriptions","organizations_url":"https://api.github.com/users/ROOBALJINDAL/orgs","repos_url":"https://api.github.com/users/ROOBALJINDAL/repos","events_url":"https://api.github.com/users/ROOBALJINDAL/events{/privacy}","received_events_url":"https://api.github.com/users/ROOBALJINDAL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T07:47:28Z","updated_at":"2022-08-18T15:49:19Z","author_association":"NONE","body":"@pratyakshsharma \r\nWe are not using any serializer in our custom class as it wasnt required. I believe it uses convertor that is being defined in kafka connect properties. \r\n\r\nWe are using following convertors in kafka connect:\r\n```\r\nkey.converter=io.confluent.connect.avro.AvroConverter\r\nvalue.converter=io.confluent.connect.avro.AvroConverter\r\nkey.converter.schema.registry.url=http://xx.xxx.xx.xxx:8080/apis/ccompat/v6\r\nvalue.converter.schema.registry.url=http://xx.xxx.xx.xxx:8080/apis/ccompat/v6\r\n```\r\n\r\nAlso point here is to note is that if there were some contradicting serializers being used, it would have not worked for HoodieDeltaStreamer (Not multi table ingestion) as well. But HoodieDeltaStreamer is working fine for same table and records.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212829370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212833387","html_url":"https://github.com/apache/hudi/issues/5540#issuecomment-1212833387","issue_url":"https://api.github.com/repos/apache/hudi/issues/5540","id":1212833387,"node_id":"IC_kwDOBI7nWM5ISl5r","user":{"login":"ROOBALJINDAL","id":7212226,"node_id":"MDQ6VXNlcjcyMTIyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/7212226?v=4","gravatar_id":"","url":"https://api.github.com/users/ROOBALJINDAL","html_url":"https://github.com/ROOBALJINDAL","followers_url":"https://api.github.com/users/ROOBALJINDAL/followers","following_url":"https://api.github.com/users/ROOBALJINDAL/following{/other_user}","gists_url":"https://api.github.com/users/ROOBALJINDAL/gists{/gist_id}","starred_url":"https://api.github.com/users/ROOBALJINDAL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ROOBALJINDAL/subscriptions","organizations_url":"https://api.github.com/users/ROOBALJINDAL/orgs","repos_url":"https://api.github.com/users/ROOBALJINDAL/repos","events_url":"https://api.github.com/users/ROOBALJINDAL/events{/privacy}","received_events_url":"https://api.github.com/users/ROOBALJINDAL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T07:53:24Z","updated_at":"2022-08-16T06:28:10Z","author_association":"NONE","body":"@nsivabalan @pratyakshsharma  I tried enabling debug logs by changing root `log4j.rootLogger=INFO` to `log4j.rootLogger=DEBUG` in Hudi jar for following files\r\n\r\n**log4j.properties\r\nlog4j-surefire.properties\r\nlog4j-surefire-quiet.properties**\r\n\r\nAlso updated some other properties in these files:\r\n```\r\nlog4j.rootLogger=DEBUG, CONSOLE\r\nlog4j.logger.org.apache=DEBUG\r\nlog4j.logger.org.apache.hudi=DEBUG\r\n```\r\n\r\nI am using this custom hudi jar by following spark command: \r\n```\r\nspark-submit  \\\r\n  --class org.apache.hudi.utilities.deltastreamer.HoodieMultiTableDeltaStreamer s3://slava-redshift-test/hudi/roobal-hudi-Debug-logger/hudi-utilities-bundle_2.12-0.11.0_edfx_debug.jar \\\r\n```\r\n\r\nI have also tried this:\r\n```\r\nspark-submit  \\\r\n  --conf spark.executor.extraJavaOptions=-Dlog4j.debug=true \\\r\n```\r\n\r\nCan you help what I am missing?\r\n\r\nNote: I am using EMR cluster on AWS.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1212833387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213048448","html_url":"https://github.com/apache/hudi/pull/6383#issuecomment-1213048448","issue_url":"https://api.github.com/repos/apache/hudi/issues/6383","id":1213048448,"node_id":"IC_kwDOBI7nWM5ITaaA","user":{"login":"gudladona","id":7864088,"node_id":"MDQ6VXNlcjc4NjQwODg=","avatar_url":"https://avatars.githubusercontent.com/u/7864088?v=4","gravatar_id":"","url":"https://api.github.com/users/gudladona","html_url":"https://github.com/gudladona","followers_url":"https://api.github.com/users/gudladona/followers","following_url":"https://api.github.com/users/gudladona/following{/other_user}","gists_url":"https://api.github.com/users/gudladona/gists{/gist_id}","starred_url":"https://api.github.com/users/gudladona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gudladona/subscriptions","organizations_url":"https://api.github.com/users/gudladona/orgs","repos_url":"https://api.github.com/users/gudladona/repos","events_url":"https://api.github.com/users/gudladona/events{/privacy}","received_events_url":"https://api.github.com/users/gudladona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T12:13:52Z","updated_at":"2022-08-12T12:13:52Z","author_association":"NONE","body":"Hello, I am watching this PR. Did you notice a similar exception in your environment?\r\n\r\n`Driver stacktrace:\r\n\tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2470)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2419)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2418)\r\n\tat scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\r\n\tat scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\r\n\tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2418)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1125)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1125)\r\n\tat scala.Option.foreach(Option.scala:407)\r\n\tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1125)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2684)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2626)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2615)\r\n\tat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:914)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2241)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2336)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$fold$1(RDD.scala:1183)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\r\n\tat org.apache.spark.rdd.RDD.withScope(RDD.scala:414)\r\n\tat org.apache.spark.rdd.RDD.fold(RDD.scala:1177)\r\n\tat org.apache.spark.rdd.DoubleRDDFunctions.$anonfun$sum$1(DoubleRDDFunctions.scala:35)\r\n\tat scala.runtime.java8.JFunction0$mcD$sp.apply(JFunction0$mcD$sp.java:23)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\r\n\tat org.apache.spark.rdd.RDD.withScope(RDD.scala:414)\r\n\tat org.apache.spark.rdd.DoubleRDDFunctions.sum(DoubleRDDFunctions.scala:35)\r\n\tat org.apache.spark.api.java.JavaDoubleRDD.sum(JavaDoubleRDD.scala:165)\r\n\tat org.apache.hudi.utilities.deltastreamer.DeltaSync.writeToSink(DeltaSync.java:605)\r\n\tat org.apache.hudi.utilities.deltastreamer.DeltaSync.syncOnce(DeltaSync.java:333)\r\n\tat org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer$DeltaSyncService.lambda$startService$0(HoodieDeltaStreamer.java:679)\r\n\t... 4 more\r\nCaused by: org.apache.hudi.exception.HoodieUpsertException: Error upserting bucketType UPDATE for partition :99\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpsertPartition(BaseSparkCommitActionExecutor.java:329)\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleInsertPartition(BaseSparkCommitActionExecutor.java:335)\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.lambda$mapPartitionsAsRDD$a3ab3c4$1(BaseSparkCommitActionExecutor.java:246)\r\n\tat org.apache.spark.api.java.JavaRDDLike.$anonfun$mapPartitionsWithIndex$1(JavaRDDLike.scala:102)\r\n\tat org.apache.spark.api.java.JavaRDDLike.$anonfun$mapPartitionsWithIndex$1$adapted(JavaRDDLike.scala:102)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsWithIndex$2(RDD.scala:915)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsWithIndex$2$adapted(RDD.scala:915)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$getOrCompute$1(RDD.scala:386)\r\n\tat org.apache.spark.storage.BlockManager.$anonfun$doPutIterator$1(BlockManager.scala:1440)\r\n\tat org.apache.spark.storage.BlockManager.org$apache$spark$storage$BlockManager$$doPut(BlockManager.scala:1350)\r\n\tat org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:1414)\r\n\tat org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:1237)\r\n\tat org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:384)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:335)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n\t... 3 more\r\nCaused by: org.apache.hudi.exception.HoodieRemoteException: Failed to create marker file tenant=10470/date=20220812/6f642872-66be-4cf9-b5d4-6cff96578ac2-0_99-32106-939341_20220812113408919.parquet.marker.MERGE\r\nRead timed out\r\n\tat org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.create(TimelineServerBasedWriteMarkers.java:149)\r\n\tat org.apache.hudi.table.marker.WriteMarkers.create(WriteMarkers.java:64)\r\n\tat org.apache.hudi.io.HoodieWriteHandle.createMarkerFile(HoodieWriteHandle.java:187)\r\n\tat org.apache.hudi.io.HoodieMergeHandle.init(HoodieMergeHandle.java:190)\r\n\tat org.apache.hudi.io.HoodieMergeHandle.<init>(HoodieMergeHandle.java:128)\r\n\tat org.apache.hudi.io.HoodieMergeHandle.<init>(HoodieMergeHandle.java:119)\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.getUpdateHandle(BaseSparkCommitActionExecutor.java:377)\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpdate(BaseSparkCommitActionExecutor.java:348)\r\n\tat org.apache.hudi.table.action.deltacommit.BaseSparkDeltaCommitActionExecutor.handleUpdate(BaseSparkDeltaCommitActionExecutor.java:80)\r\n\tat org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpsertPartition(BaseSparkCommitActionExecutor.java:322)\r\n\t... 29 more\r\nCaused by: java.net.SocketTimeoutException: Read timed out\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:155)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:284)\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\r\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)\r\n\tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n\tat org.apache.http.client.fluent.Request.execute(Request.java:151)\r\n\tat org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.executeRequestToTimelineServer(TimelineServerBasedWriteMarkers.java:177)\r\n\tat org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.create(TimelineServerBasedWriteMarkers.java:145)` ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213048448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213054476","html_url":"https://github.com/apache/hudi/pull/6383#issuecomment-1213054476","issue_url":"https://api.github.com/repos/apache/hudi/issues/6383","id":1213054476,"node_id":"IC_kwDOBI7nWM5ITb4M","user":{"login":"novisfff","id":62633257,"node_id":"MDQ6VXNlcjYyNjMzMjU3","avatar_url":"https://avatars.githubusercontent.com/u/62633257?v=4","gravatar_id":"","url":"https://api.github.com/users/novisfff","html_url":"https://github.com/novisfff","followers_url":"https://api.github.com/users/novisfff/followers","following_url":"https://api.github.com/users/novisfff/following{/other_user}","gists_url":"https://api.github.com/users/novisfff/gists{/gist_id}","starred_url":"https://api.github.com/users/novisfff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novisfff/subscriptions","organizations_url":"https://api.github.com/users/novisfff/orgs","repos_url":"https://api.github.com/users/novisfff/repos","events_url":"https://api.github.com/users/novisfff/events{/privacy}","received_events_url":"https://api.github.com/users/novisfff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T12:21:24Z","updated_at":"2022-08-12T12:21:24Z","author_association":"CONTRIBUTOR","body":"> Hello, I am watching this PR. Did you notice a similar exception in your environment?\r\n> \r\n> `Driver stacktrace: at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2470) at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2419) at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2418) at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62) at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55) at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49) at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2418) at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1125) at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1125) at scala.Option.foreach(Option.scala:407) at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1125) at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2684) at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2626) at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2615) at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49) at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:914) at org.apache.spark.SparkContext.runJob(SparkContext.scala:2241) at org.apache.spark.SparkContext.runJob(SparkContext.scala:2336) at org.apache.spark.rdd.RDD.$anonfun$fold$1(RDD.scala:1183) at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151) at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112) at org.apache.spark.rdd.RDD.withScope(RDD.scala:414) at org.apache.spark.rdd.RDD.fold(RDD.scala:1177) at org.apache.spark.rdd.DoubleRDDFunctions.$anonfun$sum$1(DoubleRDDFunctions.scala:35) at scala.runtime.java8.JFunction0$mcD$sp.apply(JFunction0$mcD$sp.java:23) at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151) at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112) at org.apache.spark.rdd.RDD.withScope(RDD.scala:414) at org.apache.spark.rdd.DoubleRDDFunctions.sum(DoubleRDDFunctions.scala:35) at org.apache.spark.api.java.JavaDoubleRDD.sum(JavaDoubleRDD.scala:165) at org.apache.hudi.utilities.deltastreamer.DeltaSync.writeToSink(DeltaSync.java:605) at org.apache.hudi.utilities.deltastreamer.DeltaSync.syncOnce(DeltaSync.java:333) at org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer$DeltaSyncService.lambda$startService$0(HoodieDeltaStreamer.java:679) ... 4 more Caused by: org.apache.hudi.exception.HoodieUpsertException: Error upserting bucketType UPDATE for partition :99 at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpsertPartition(BaseSparkCommitActionExecutor.java:329) at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleInsertPartition(BaseSparkCommitActionExecutor.java:335) at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.lambda$mapPartitionsAsRDD$a3ab3c4$1(BaseSparkCommitActionExecutor.java:246) at org.apache.spark.api.java.JavaRDDLike.$anonfun$mapPartitionsWithIndex$1(JavaRDDLike.scala:102) at org.apache.spark.api.java.JavaRDDLike.$anonfun$mapPartitionsWithIndex$1$adapted(JavaRDDLike.scala:102) at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsWithIndex$2(RDD.scala:915) at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsWithIndex$2$adapted(RDD.scala:915) at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52) at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373) at org.apache.spark.rdd.RDD.iterator(RDD.scala:337) at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52) at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373) at org.apache.spark.rdd.RDD.$anonfun$getOrCompute$1(RDD.scala:386) at org.apache.spark.storage.BlockManager.$anonfun$doPutIterator$1(BlockManager.scala:1440) at org.apache.spark.storage.BlockManager.org$apache$spark$storage$BlockManager$$doPut(BlockManager.scala:1350) at org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:1414) at org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:1237) at org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:384) at org.apache.spark.rdd.RDD.iterator(RDD.scala:335) at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52) at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373) at org.apache.spark.rdd.RDD.iterator(RDD.scala:337) at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90) at org.apache.spark.scheduler.Task.run(Task.scala:131) at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497) at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439) at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500) ... 3 more Caused by: org.apache.hudi.exception.HoodieRemoteException: Failed to create marker file tenant=10470/date=20220812/6f642872-66be-4cf9-b5d4-6cff96578ac2-0_99-32106-939341_20220812113408919.parquet.marker.MERGE Read timed out at org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.create(TimelineServerBasedWriteMarkers.java:149) at org.apache.hudi.table.marker.WriteMarkers.create(WriteMarkers.java:64) at org.apache.hudi.io.HoodieWriteHandle.createMarkerFile(HoodieWriteHandle.java:187) at org.apache.hudi.io.HoodieMergeHandle.init(HoodieMergeHandle.java:190) at org.apache.hudi.io.HoodieMergeHandle.<init>(HoodieMergeHandle.java:128) at org.apache.hudi.io.HoodieMergeHandle.<init>(HoodieMergeHandle.java:119) at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.getUpdateHandle(BaseSparkCommitActionExecutor.java:377) at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpdate(BaseSparkCommitActionExecutor.java:348) at org.apache.hudi.table.action.deltacommit.BaseSparkDeltaCommitActionExecutor.handleUpdate(BaseSparkDeltaCommitActionExecutor.java:80) at org.apache.hudi.table.action.commit.BaseSparkCommitActionExecutor.handleUpsertPartition(BaseSparkCommitActionExecutor.java:322) ... 29 more Caused by: java.net.SocketTimeoutException: Read timed out at java.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.socketRead(SocketInputStream.java:116) at java.net.SocketInputStream.read(SocketInputStream.java:171) at java.net.SocketInputStream.read(SocketInputStream.java:141) at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139) at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:155) at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:284) at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261) at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165) at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272) at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124) at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) at org.apache.http.client.fluent.Request.execute(Request.java:151) at org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.executeRequestToTimelineServer(TimelineServerBasedWriteMarkers.java:177) at org.apache.hudi.table.marker.TimelineServerBasedWriteMarkers.create(TimelineServerBasedWriteMarkers.java:145)`\r\n\r\nsimilar problem. I fixed it by this PR","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213054476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213134889","html_url":"https://github.com/apache/hudi/pull/6385#issuecomment-1213134889","issue_url":"https://api.github.com/repos/apache/hudi/issues/6385","id":1213134889,"node_id":"IC_kwDOBI7nWM5ITvgp","user":{"login":"flashJd","id":23452216,"node_id":"MDQ6VXNlcjIzNDUyMjE2","avatar_url":"https://avatars.githubusercontent.com/u/23452216?v=4","gravatar_id":"","url":"https://api.github.com/users/flashJd","html_url":"https://github.com/flashJd","followers_url":"https://api.github.com/users/flashJd/followers","following_url":"https://api.github.com/users/flashJd/following{/other_user}","gists_url":"https://api.github.com/users/flashJd/gists{/gist_id}","starred_url":"https://api.github.com/users/flashJd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flashJd/subscriptions","organizations_url":"https://api.github.com/users/flashJd/orgs","repos_url":"https://api.github.com/users/flashJd/repos","events_url":"https://api.github.com/users/flashJd/events{/privacy}","received_events_url":"https://api.github.com/users/flashJd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T13:52:16Z","updated_at":"2022-08-12T13:52:16Z","author_association":"CONTRIBUTOR","body":"@garyli1019 @danny0405 can you help review it, thx","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213134889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213155925","html_url":"https://github.com/apache/hudi/pull/6291#issuecomment-1213155925","issue_url":"https://api.github.com/repos/apache/hudi/issues/6291","id":1213155925,"node_id":"IC_kwDOBI7nWM5IT0pV","user":{"login":"flashJd","id":23452216,"node_id":"MDQ6VXNlcjIzNDUyMjE2","avatar_url":"https://avatars.githubusercontent.com/u/23452216?v=4","gravatar_id":"","url":"https://api.github.com/users/flashJd","html_url":"https://github.com/flashJd","followers_url":"https://api.github.com/users/flashJd/followers","following_url":"https://api.github.com/users/flashJd/following{/other_user}","gists_url":"https://api.github.com/users/flashJd/gists{/gist_id}","starred_url":"https://api.github.com/users/flashJd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flashJd/subscriptions","organizations_url":"https://api.github.com/users/flashJd/orgs","repos_url":"https://api.github.com/users/flashJd/repos","events_url":"https://api.github.com/users/flashJd/events{/privacy}","received_events_url":"https://api.github.com/users/flashJd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T14:14:09Z","updated_at":"2022-08-12T14:14:50Z","author_association":"CONTRIBUTOR","body":"> @flashJd thanks for your contribution. Would you make the commit message to reflect this bug fix and change the description of this PR to match with the PR template. This change LGTM and will merge this once above items are addressed. Thanks\r\n\r\n@garyli1019,  I've edit the commit message and changed the description of this PR","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213155925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213305473","html_url":"https://github.com/apache/hudi/issues/6373#issuecomment-1213305473","issue_url":"https://api.github.com/repos/apache/hudi/issues/6373","id":1213305473,"node_id":"IC_kwDOBI7nWM5IUZKB","user":{"login":"parisni","id":9535350,"node_id":"MDQ6VXNlcjk1MzUzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9535350?v=4","gravatar_id":"","url":"https://api.github.com/users/parisni","html_url":"https://github.com/parisni","followers_url":"https://api.github.com/users/parisni/followers","following_url":"https://api.github.com/users/parisni/following{/other_user}","gists_url":"https://api.github.com/users/parisni/gists{/gist_id}","starred_url":"https://api.github.com/users/parisni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parisni/subscriptions","organizations_url":"https://api.github.com/users/parisni/orgs","repos_url":"https://api.github.com/users/parisni/repos","events_url":"https://api.github.com/users/parisni/events{/privacy}","received_events_url":"https://api.github.com/users/parisni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T16:31:42Z","updated_at":"2022-08-12T16:32:54Z","author_association":"CONTRIBUTOR","body":"for 2. , I guess the reason the cleaning with metadata table is slow is due to filelisting and not partition listing. Filelisting is done on the metadtata table side while partition listing is done on filesystem. When having thousand of partition, it is slow to list files thousand of time into the metadata table. https://github.com/apache/hudi/blob/6e7ac457352e007939ba3c44c9dc197de7b88ed3/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/table/action/clean/CleanPlanner.java#L310\r\n\r\nA way to improve this would be filegroup listing fall back on file system (behavior without metadata table). \r\n\r\nfor 1. from debugging + source code, incremental cleaning occurs only when a cleaning file deletion has happened. Then it only consider following commits. I guess this is both a performance problem (in my case + bulk-insert case) and can leave old partition uncleaned. This is complicated to explain, and... I might be wrong \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213305473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213307096","html_url":"https://github.com/apache/hudi/pull/6291#issuecomment-1213307096","issue_url":"https://api.github.com/repos/apache/hudi/issues/6291","id":1213307096,"node_id":"IC_kwDOBI7nWM5IUZjY","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T16:33:53Z","updated_at":"2022-08-12T16:33:53Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"0f817b35dfc4b59eefb24b9ab65ab2d7fe8975f3\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10553\",\n    \"triggerID\" : \"0f817b35dfc4b59eefb24b9ab65ab2d7fe8975f3\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7590124a07d69af06406472296ac5cce99a2cc1d\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10746\",\n    \"triggerID\" : \"7590124a07d69af06406472296ac5cce99a2cc1d\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 7590124a07d69af06406472296ac5cce99a2cc1d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10746) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213307096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213323341","html_url":"https://github.com/apache/hudi/issues/6194#issuecomment-1213323341","issue_url":"https://api.github.com/repos/apache/hudi/issues/6194","id":1213323341,"node_id":"IC_kwDOBI7nWM5IUdhN","user":{"login":"ehurheap","id":87341931,"node_id":"MDQ6VXNlcjg3MzQxOTMx","avatar_url":"https://avatars.githubusercontent.com/u/87341931?v=4","gravatar_id":"","url":"https://api.github.com/users/ehurheap","html_url":"https://github.com/ehurheap","followers_url":"https://api.github.com/users/ehurheap/followers","following_url":"https://api.github.com/users/ehurheap/following{/other_user}","gists_url":"https://api.github.com/users/ehurheap/gists{/gist_id}","starred_url":"https://api.github.com/users/ehurheap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehurheap/subscriptions","organizations_url":"https://api.github.com/users/ehurheap/orgs","repos_url":"https://api.github.com/users/ehurheap/repos","events_url":"https://api.github.com/users/ehurheap/events{/privacy}","received_events_url":"https://api.github.com/users/ehurheap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T16:54:15Z","updated_at":"2022-08-12T16:54:51Z","author_association":"NONE","body":"sorry for the confusion @nsivabalan. I reviewed the commands that you specified to verify they were the same as what I tried. The main differences between what you did and our situation:\r\n\r\n- Our hudi table was loaded by 2 separate processes, one bulk_insert, one streaming ingest job\r\n- In addition our hudi table is MOR.\r\n\r\nI can run a spark query similar to yours and verify there are duplicates in the given partition. \r\n\r\n```\r\n  val dupePath=\"s3://<bucket>/data/tables/events/env_id=123456789/week=20220711\"\r\n\r\n  val ddF = spark.read.parquet(dupePath)\r\n  ddF.createOrReplaceTempView(\"hoh\")\r\n\r\n  val dupQ = s\"\"\"\r\n       |select _hoodie_partition_path, _hoodie_record_key, count(*)\r\n       | from hoh group by _hoodie_partition_path, _hoodie_record_key\r\n       | order by count(*) desc\r\n       |\"\"\".stripMargin\r\n  spark.sql(dupQ).show(false)\r\n```\r\nsample output:\r\n```\r\n\r\n  +------------------------------+-------------------------------------------------------------------+--------+\r\n  |_hoodie_partition_path        |_hoodie_record_key                                                 |count(1)|\r\n  +------------------------------+-------------------------------------------------------------------+--------+\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:7806358957060773,event_id:5758152328327473|3       |\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:5403332495352077,event_id:3536309858058402|2       |\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:4713648045477470,event_id:8717656941318904|2       |\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:2025910439767252,event_id:8549159234261693|2       |\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:7507696929673571,event_id:3179806702204642|2       |\r\n  |env_id=123456789/week=20220711|env_id:123456789,user_id:7301684312119961,event_id:717438862368076 |2       |\r\n```\r\n\r\nBut when I run this hudi-cli command:\r\n\r\n`hudi:events->repair deduplicate --duplicatedPartitionPath \"env_id=123/week=20220711\" --repairedOutputPath /tmp/hhdeduplicates --sparkMaster local[2] --sparkMemory 4G --dryrun true --dedupeType \"upsert_type\"`\r\n\r\nThe output I get is:\r\n\r\n```\r\n22/08/12 16:27:21 ERROR SparkMain: Fail to execute commandString\r\norg.apache.spark.sql.AnalysisException: cannot resolve '_hoodie_record_key' given input columns: []; line 5 pos 15;\r\n'UnresolvedHaving ('dupe_cnt > 1)\r\n+- 'Aggregate ['_hoodie_record_key], ['_hoodie_record_key AS dupe_key#0, count(1) AS dupe_cnt#1L]\r\n   +- SubqueryAlias htbl_1660321638341\r\n      +- View (`htbl_1660321638341`, [])\r\n         +- LocalRelation <empty>\r\nhudi:events->\r\nhudi:eveat org.apache.spark.sql.catalyst.analysis.package$AnalysisErrorAt.failAnalysis(package.scala:54)\r\nhudi:eveat org.apache.spark.sql.catalyst.analysis.CheckAnalysis$$anonfun$$nestedInanonfun$checkAnalysis$1$2.applyOrElse(CheckAnalysis.scala:179)\r\nhudi:eveat org.apache.spark.sql.catalyst.analysis.CheckAnalysis$$anonfun$$nestedInanonfun$checkAnalysis$1$2.applyOrElse(CheckAnalysis.scala:175)\r\nhudi:eveat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$transformUpWithPruning$2(TreeNode.scala:573)\r\nhudi:eveat org.apache.spark.sql.catalyst.trees.CurrentOrigin$.withOrigin(TreeNode.scala:83)\r\nhudi:eveat org.apache.spark.sql.catalyst.trees.TreeNode.transformUpWithPruning(TreeNode.scala:573)\r\nhudi:eveat org.apache.spark.sql.catalyst.plans.QueryPlan.$anonfun$transformExpressionsUpWithPruning$1(QueryPlan.scala:181)\r\nhudi:eveat org.apache.spark.sql.catalyst.plans.QueryPlan.$anonfun$mapExpressions$1(QueryPlan.scala:193)\r\nhudi:eveat org.apache.spark.sql.catalyst.trees.CurrentOrigin$.withOrigin(TreeNode.scala:83)\r\nhudi:eveat org.apache.spark.sql.catalyst.plans.QueryPlan.transformExpression$1(QueryPlan.scala:193)\r\nhudi:eveat org.apache.spark.sql.catalyst.plans.QueryPlan.recursiveTransform$1(QueryPlan.scala:204)\r\nhudi:eveat org.apache.spark.sql.catalyst.plans.QueryPlan.$anonfun$mapExpressions$3(QueryPlan.scala:209)\r\nhudi:eveat scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:286)\r\n...\r\n\r\nDeduplication failed!\r\n```\r\n\r\nThere are no files in the `--repairedOutputPath ` location. I understand that if there were data there, we would use that deduplicated data to replace what is currently in hudi: first deleting the duplicates from hudi, then load the deduped data from the repairedOutputPath location.\r\n\r\nBut since we have no repaired deduplicated data, we are stuck. Does that make sense? Have I missed something ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213323341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213429138","html_url":"https://github.com/apache/hudi/pull/6387#issuecomment-1213429138","issue_url":"https://api.github.com/repos/apache/hudi/issues/6387","id":1213429138,"node_id":"IC_kwDOBI7nWM5IU3WS","user":{"login":"vinishjail97","id":16958856,"node_id":"MDQ6VXNlcjE2OTU4ODU2","avatar_url":"https://avatars.githubusercontent.com/u/16958856?v=4","gravatar_id":"","url":"https://api.github.com/users/vinishjail97","html_url":"https://github.com/vinishjail97","followers_url":"https://api.github.com/users/vinishjail97/followers","following_url":"https://api.github.com/users/vinishjail97/following{/other_user}","gists_url":"https://api.github.com/users/vinishjail97/gists{/gist_id}","starred_url":"https://api.github.com/users/vinishjail97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinishjail97/subscriptions","organizations_url":"https://api.github.com/users/vinishjail97/orgs","repos_url":"https://api.github.com/users/vinishjail97/repos","events_url":"https://api.github.com/users/vinishjail97/events{/privacy}","received_events_url":"https://api.github.com/users/vinishjail97/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T19:03:50Z","updated_at":"2022-08-12T19:03:50Z","author_association":"CONTRIBUTOR","body":"> LGTM. minor clarification.\r\n\r\nAddressed the comments. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213429138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213471276","html_url":"https://github.com/apache/hudi/pull/6374#issuecomment-1213471276","issue_url":"https://api.github.com/repos/apache/hudi/issues/6374","id":1213471276,"node_id":"IC_kwDOBI7nWM5IVBos","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T20:03:34Z","updated_at":"2022-08-12T20:03:34Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"a41bc41bff129734f2012dbb9bb7e3af32295187\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10742\",\n    \"triggerID\" : \"a41bc41bff129734f2012dbb9bb7e3af32295187\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* a41bc41bff129734f2012dbb9bb7e3af32295187 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10742) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213471276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213916024","html_url":"https://github.com/apache/hudi/issues/6379#issuecomment-1213916024","issue_url":"https://api.github.com/repos/apache/hudi/issues/6379","id":1213916024,"node_id":"IC_kwDOBI7nWM5IWuN4","user":{"login":"bithw1","id":24691083,"node_id":"MDQ6VXNlcjI0NjkxMDgz","avatar_url":"https://avatars.githubusercontent.com/u/24691083?v=4","gravatar_id":"","url":"https://api.github.com/users/bithw1","html_url":"https://github.com/bithw1","followers_url":"https://api.github.com/users/bithw1/followers","following_url":"https://api.github.com/users/bithw1/following{/other_user}","gists_url":"https://api.github.com/users/bithw1/gists{/gist_id}","starred_url":"https://api.github.com/users/bithw1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bithw1/subscriptions","organizations_url":"https://api.github.com/users/bithw1/orgs","repos_url":"https://api.github.com/users/bithw1/repos","events_url":"https://api.github.com/users/bithw1/events{/privacy}","received_events_url":"https://api.github.com/users/bithw1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-13T07:31:01Z","updated_at":"2022-08-13T07:31:01Z","author_association":"NONE","body":"Could someone help answer this question?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1213916024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214143052","html_url":"https://github.com/apache/hudi/issues/6371#issuecomment-1214143052","issue_url":"https://api.github.com/repos/apache/hudi/issues/6371","id":1214143052,"node_id":"IC_kwDOBI7nWM5IXlpM","user":{"login":"ToBeFinder","id":109025710,"node_id":"U_kgDOBn-Zrg","avatar_url":"https://avatars.githubusercontent.com/u/109025710?v=4","gravatar_id":"","url":"https://api.github.com/users/ToBeFinder","html_url":"https://github.com/ToBeFinder","followers_url":"https://api.github.com/users/ToBeFinder/followers","following_url":"https://api.github.com/users/ToBeFinder/following{/other_user}","gists_url":"https://api.github.com/users/ToBeFinder/gists{/gist_id}","starred_url":"https://api.github.com/users/ToBeFinder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ToBeFinder/subscriptions","organizations_url":"https://api.github.com/users/ToBeFinder/orgs","repos_url":"https://api.github.com/users/ToBeFinder/repos","events_url":"https://api.github.com/users/ToBeFinder/events{/privacy}","received_events_url":"https://api.github.com/users/ToBeFinder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-13T11:38:47Z","updated_at":"2022-08-13T11:38:47Z","author_association":"NONE","body":"> Not as expected, did you try restart directly from the latest checkpoint ?\r\n\r\nthx,  I will try it tomorrow","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214143052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214148217","html_url":"https://github.com/apache/hudi/pull/6385#issuecomment-1214148217","issue_url":"https://api.github.com/repos/apache/hudi/issues/6385","id":1214148217,"node_id":"IC_kwDOBI7nWM5IXm55","user":{"login":"XuQianJin-Stars","id":10494131,"node_id":"MDQ6VXNlcjEwNDk0MTMx","avatar_url":"https://avatars.githubusercontent.com/u/10494131?v=4","gravatar_id":"","url":"https://api.github.com/users/XuQianJin-Stars","html_url":"https://github.com/XuQianJin-Stars","followers_url":"https://api.github.com/users/XuQianJin-Stars/followers","following_url":"https://api.github.com/users/XuQianJin-Stars/following{/other_user}","gists_url":"https://api.github.com/users/XuQianJin-Stars/gists{/gist_id}","starred_url":"https://api.github.com/users/XuQianJin-Stars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XuQianJin-Stars/subscriptions","organizations_url":"https://api.github.com/users/XuQianJin-Stars/orgs","repos_url":"https://api.github.com/users/XuQianJin-Stars/repos","events_url":"https://api.github.com/users/XuQianJin-Stars/events{/privacy}","received_events_url":"https://api.github.com/users/XuQianJin-Stars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-13T12:21:48Z","updated_at":"2022-08-13T12:21:48Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214148217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214212714","html_url":"https://github.com/apache/hudi/issues/6142#issuecomment-1214212714","issue_url":"https://api.github.com/repos/apache/hudi/issues/6142","id":1214212714,"node_id":"IC_kwDOBI7nWM5IX2pq","user":{"login":"leobiscassi","id":1977418,"node_id":"MDQ6VXNlcjE5Nzc0MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1977418?v=4","gravatar_id":"","url":"https://api.github.com/users/leobiscassi","html_url":"https://github.com/leobiscassi","followers_url":"https://api.github.com/users/leobiscassi/followers","following_url":"https://api.github.com/users/leobiscassi/following{/other_user}","gists_url":"https://api.github.com/users/leobiscassi/gists{/gist_id}","starred_url":"https://api.github.com/users/leobiscassi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leobiscassi/subscriptions","organizations_url":"https://api.github.com/users/leobiscassi/orgs","repos_url":"https://api.github.com/users/leobiscassi/repos","events_url":"https://api.github.com/users/leobiscassi/events{/privacy}","received_events_url":"https://api.github.com/users/leobiscassi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-13T19:41:38Z","updated_at":"2022-08-13T19:41:38Z","author_association":"NONE","body":"@codope sorry for the delay, [here](https://github.com/apache/hudi/pull/6391) is the pull request, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214212714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214298708","html_url":"https://github.com/apache/hudi/issues/6379#issuecomment-1214298708","issue_url":"https://api.github.com/repos/apache/hudi/issues/6379","id":1214298708,"node_id":"IC_kwDOBI7nWM5IYLpU","user":{"login":"bettermouse","id":16248445,"node_id":"MDQ6VXNlcjE2MjQ4NDQ1","avatar_url":"https://avatars.githubusercontent.com/u/16248445?v=4","gravatar_id":"","url":"https://api.github.com/users/bettermouse","html_url":"https://github.com/bettermouse","followers_url":"https://api.github.com/users/bettermouse/followers","following_url":"https://api.github.com/users/bettermouse/following{/other_user}","gists_url":"https://api.github.com/users/bettermouse/gists{/gist_id}","starred_url":"https://api.github.com/users/bettermouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bettermouse/subscriptions","organizations_url":"https://api.github.com/users/bettermouse/orgs","repos_url":"https://api.github.com/users/bettermouse/repos","events_url":"https://api.github.com/users/bettermouse/events{/privacy}","received_events_url":"https://api.github.com/users/bettermouse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-14T07:02:19Z","updated_at":"2022-08-14T07:03:01Z","author_association":"CONTRIBUTOR","body":"According my understand.First is right.\r\n\r\nhttps://hudi.apache.org/docs/table_types#merge-on-read-table.\r\neach snapshot query(merge base / columnar file + row based delta / log files)\r\n\r\nhttps://hudi.apache.org/docs/compaction/\r\ncompaction will merge basefile and delta log file","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214298708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214307434","html_url":"https://github.com/apache/hudi/pull/6392#issuecomment-1214307434","issue_url":"https://api.github.com/repos/apache/hudi/issues/6392","id":1214307434,"node_id":"IC_kwDOBI7nWM5IYNxq","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-14T08:05:36Z","updated_at":"2022-08-14T08:05:36Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"e70d9100a95cf45c7650c9320bf3215ed030cd1f\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10758\",\n    \"triggerID\" : \"e70d9100a95cf45c7650c9320bf3215ed030cd1f\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* e70d9100a95cf45c7650c9320bf3215ed030cd1f Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10758) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214307434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214523104","html_url":"https://github.com/apache/hudi/pull/6382#issuecomment-1214523104","issue_url":"https://api.github.com/repos/apache/hudi/issues/6382","id":1214523104,"node_id":"IC_kwDOBI7nWM5IZCbg","user":{"login":"XinyaoTian","id":31195026,"node_id":"MDQ6VXNlcjMxMTk1MDI2","avatar_url":"https://avatars.githubusercontent.com/u/31195026?v=4","gravatar_id":"","url":"https://api.github.com/users/XinyaoTian","html_url":"https://github.com/XinyaoTian","followers_url":"https://api.github.com/users/XinyaoTian/followers","following_url":"https://api.github.com/users/XinyaoTian/following{/other_user}","gists_url":"https://api.github.com/users/XinyaoTian/gists{/gist_id}","starred_url":"https://api.github.com/users/XinyaoTian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XinyaoTian/subscriptions","organizations_url":"https://api.github.com/users/XinyaoTian/orgs","repos_url":"https://api.github.com/users/XinyaoTian/repos","events_url":"https://api.github.com/users/XinyaoTian/events{/privacy}","received_events_url":"https://api.github.com/users/XinyaoTian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T01:45:38Z","updated_at":"2022-08-15T01:53:09Z","author_association":"CONTRIBUTOR","body":"Hi Sivabalan @nsivabalan,\r\nas we said before in the dev-maillist, we finished writing the RFC proposal and now are submitting these materials with vivid pictures for the new feature: \"Multiple event-time fields latest verification\" with concept as well as high-level code implementation. \r\n\r\nCould you please spend some time to help us do a brief review? If you don't have time then may I ask you to recommend someone else to do this? Thanks a lot! :)\r\n\r\nWish you all the best.\r\nXInyao","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214523104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214529125","html_url":"https://github.com/apache/hudi/pull/6382#issuecomment-1214529125","issue_url":"https://api.github.com/repos/apache/hudi/issues/6382","id":1214529125,"node_id":"IC_kwDOBI7nWM5IZD5l","user":{"login":"XinyaoTian","id":31195026,"node_id":"MDQ6VXNlcjMxMTk1MDI2","avatar_url":"https://avatars.githubusercontent.com/u/31195026?v=4","gravatar_id":"","url":"https://api.github.com/users/XinyaoTian","html_url":"https://github.com/XinyaoTian","followers_url":"https://api.github.com/users/XinyaoTian/followers","following_url":"https://api.github.com/users/XinyaoTian/following{/other_user}","gists_url":"https://api.github.com/users/XinyaoTian/gists{/gist_id}","starred_url":"https://api.github.com/users/XinyaoTian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XinyaoTian/subscriptions","organizations_url":"https://api.github.com/users/XinyaoTian/orgs","repos_url":"https://api.github.com/users/XinyaoTian/repos","events_url":"https://api.github.com/users/XinyaoTian/events{/privacy}","received_events_url":"https://api.github.com/users/XinyaoTian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T01:56:40Z","updated_at":"2022-08-15T01:56:40Z","author_association":"CONTRIBUTOR","body":"Hi Shiyan @xushiyan , \r\nsince you give us a positive feedback in the dev-maillist, may I ask you to be our RFC reviewer? In case you don't have time, could you please recommend someone to do this?\r\nThanks a lot!\r\nXinyao","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214529125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214536849","html_url":"https://github.com/apache/hudi/issues/6389#issuecomment-1214536849","issue_url":"https://api.github.com/repos/apache/hudi/issues/6389","id":1214536849,"node_id":"IC_kwDOBI7nWM5IZFyR","user":{"login":"KnightChess","id":20125927,"node_id":"MDQ6VXNlcjIwMTI1OTI3","avatar_url":"https://avatars.githubusercontent.com/u/20125927?v=4","gravatar_id":"","url":"https://api.github.com/users/KnightChess","html_url":"https://github.com/KnightChess","followers_url":"https://api.github.com/users/KnightChess/followers","following_url":"https://api.github.com/users/KnightChess/following{/other_user}","gists_url":"https://api.github.com/users/KnightChess/gists{/gist_id}","starred_url":"https://api.github.com/users/KnightChess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnightChess/subscriptions","organizations_url":"https://api.github.com/users/KnightChess/orgs","repos_url":"https://api.github.com/users/KnightChess/repos","events_url":"https://api.github.com/users/KnightChess/events{/privacy}","received_events_url":"https://api.github.com/users/KnightChess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T02:10:59Z","updated_at":"2022-08-15T02:10:59Z","author_association":"CONTRIBUTOR","body":"precombine field only support one col, `score,capture_date` is regarded as one col which name is called `score,capture_date`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214536849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214539976","html_url":"https://github.com/apache/hudi/issues/6185#issuecomment-1214539976","issue_url":"https://api.github.com/repos/apache/hudi/issues/6185","id":1214539976,"node_id":"IC_kwDOBI7nWM5IZGjI","user":{"login":"paul8263","id":7007327,"node_id":"MDQ6VXNlcjcwMDczMjc=","avatar_url":"https://avatars.githubusercontent.com/u/7007327?v=4","gravatar_id":"","url":"https://api.github.com/users/paul8263","html_url":"https://github.com/paul8263","followers_url":"https://api.github.com/users/paul8263/followers","following_url":"https://api.github.com/users/paul8263/following{/other_user}","gists_url":"https://api.github.com/users/paul8263/gists{/gist_id}","starred_url":"https://api.github.com/users/paul8263/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul8263/subscriptions","organizations_url":"https://api.github.com/users/paul8263/orgs","repos_url":"https://api.github.com/users/paul8263/repos","events_url":"https://api.github.com/users/paul8263/events{/privacy}","received_events_url":"https://api.github.com/users/paul8263/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T02:16:09Z","updated_at":"2022-08-15T02:16:09Z","author_association":"CONTRIBUTOR","body":"Hi @YannByron ,\r\n\r\nThank you very much for your reply.\r\nIt seems that hudi-spark3.1-bundle_2.12-0.11.1.jar does not contain org.apache.spark.sql.hudi.catalog.HoodieCatalog, as the Spark version is 3.1.1. So I added `spark.serializer=org.apache.spark.serializer.KryoSerializer` to Spark thrift server conf. But it still does not work.\r\n\r\nDoes it mean that Spark 3.1.1 thrift server cannot support Hudi create table statement?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214539976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214547742","html_url":"https://github.com/apache/hudi/issues/6390#issuecomment-1214547742","issue_url":"https://api.github.com/repos/apache/hudi/issues/6390","id":1214547742,"node_id":"IC_kwDOBI7nWM5IZIce","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T02:29:59Z","updated_at":"2022-08-15T02:29:59Z","author_association":"CONTRIBUTOR","body":"The code `context.flatMap(partitionPaths, partitionPath` is problematic because it may cause concurrent access to the remote fs view, the fs view is not thread safe now BTW.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214547742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214585249","html_url":"https://github.com/apache/hudi/pull/6386#issuecomment-1214585249","issue_url":"https://api.github.com/repos/apache/hudi/issues/6386","id":1214585249,"node_id":"IC_kwDOBI7nWM5IZRmh","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T03:50:05Z","updated_at":"2022-08-15T03:50:05Z","author_association":"CONTRIBUTOR","body":"Can you add info on how did you test this out, what all cases have been tested. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214585249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214589514","html_url":"https://github.com/apache/hudi/pull/6372#issuecomment-1214589514","issue_url":"https://api.github.com/repos/apache/hudi/issues/6372","id":1214589514,"node_id":"IC_kwDOBI7nWM5IZSpK","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T04:03:11Z","updated_at":"2022-08-15T04:03:11Z","author_association":"CONTRIBUTOR","body":"> > > and this is the code of build writeConfig of writeClient. enableEmbeddedTimelineService is false `public static HoodieWriteConfig getHoodieClientConfig( Configuration conf, boolean enableEmbeddedTimelineService, boolean loadFsViewStorageConfig) { ... .withEmbeddedTimelineServerEnabled(enableEmbeddedTimelineService) .withEmbeddedTimelineServerReuseEnabled(true) // make write client embedded timeline service singleton ... }`\r\n> > > `public static HoodieWriteConfig getHoodieClientConfig(Configuration conf, boolean loadFsViewStorageConfig) { return getHoodieClientConfig(conf, false, loadFsViewStorageConfig); }` in class org.apache.hudi.util.StreamerUtil\r\n> > > AbstractStreamWriteFunction use this function to init writeConfig\r\n> > \r\n> > \r\n> > Even though the fix may works for flink, but it is not general, the only true for remote request is the `storage type`, it has no relationship with whether we reuse the timeline server.\r\n> \r\n> ok, I understand. Do I need to submit a new commit for this?\r\n\r\nYes, we can fire a new PR, or better we can reuse this PR and do a force-push ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214589514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214594159","html_url":"https://github.com/apache/hudi/pull/6273#issuecomment-1214594159","issue_url":"https://api.github.com/repos/apache/hudi/issues/6273","id":1214594159,"node_id":"IC_kwDOBI7nWM5IZTxv","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T04:10:28Z","updated_at":"2022-08-15T04:10:28Z","author_association":"CONTRIBUTOR","body":"Hello, is there any progress for this pr ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214594159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214622522","html_url":"https://github.com/apache/hudi/pull/6141#issuecomment-1214622522","issue_url":"https://api.github.com/repos/apache/hudi/issues/6141","id":1214622522,"node_id":"IC_kwDOBI7nWM5IZas6","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T05:06:48Z","updated_at":"2022-08-15T05:06:48Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"ce0b46f4460ee1f9c80cdfdef9824b5c5711135c\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10060\",\n    \"triggerID\" : \"ce0b46f4460ee1f9c80cdfdef9824b5c5711135c\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"3d4947ef1741947e8dcd5e5125837e451dda6049\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10081\",\n    \"triggerID\" : \"3d4947ef1741947e8dcd5e5125837e451dda6049\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"9920828682bf32a18f0bc5455d113afc71c09820\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10309\",\n    \"triggerID\" : \"9920828682bf32a18f0bc5455d113afc71c09820\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"ece3f0c7a06af08feda421f183c984fd75ef9526\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10421\",\n    \"triggerID\" : \"ece3f0c7a06af08feda421f183c984fd75ef9526\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"23f96b3ecc8812ffae7f9e692e883cdabba03eb0\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10541\",\n    \"triggerID\" : \"23f96b3ecc8812ffae7f9e692e883cdabba03eb0\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"2a493fcafb42e21cbfcae3787ab30853319f4bf3\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10596\",\n    \"triggerID\" : \"2a493fcafb42e21cbfcae3787ab30853319f4bf3\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"2de4df9e16f88a4813d404ba2111a9b4db19c03b\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10666\",\n    \"triggerID\" : \"2de4df9e16f88a4813d404ba2111a9b4db19c03b\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"c192b29f176c4d861360fd9c70728a57b8ef2926\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10733\",\n    \"triggerID\" : \"c192b29f176c4d861360fd9c70728a57b8ef2926\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"60c68b0bd40a9a681f2865426e9b5bd2152e9931\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10761\",\n    \"triggerID\" : \"60c68b0bd40a9a681f2865426e9b5bd2152e9931\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 60c68b0bd40a9a681f2865426e9b5bd2152e9931 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10761) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214622522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214652833","html_url":"https://github.com/apache/hudi/pull/6141#issuecomment-1214652833","issue_url":"https://api.github.com/repos/apache/hudi/issues/6141","id":1214652833,"node_id":"IC_kwDOBI7nWM5IZiGh","user":{"login":"boneanxs","id":10115332,"node_id":"MDQ6VXNlcjEwMTE1MzMy","avatar_url":"https://avatars.githubusercontent.com/u/10115332?v=4","gravatar_id":"","url":"https://api.github.com/users/boneanxs","html_url":"https://github.com/boneanxs","followers_url":"https://api.github.com/users/boneanxs/followers","following_url":"https://api.github.com/users/boneanxs/following{/other_user}","gists_url":"https://api.github.com/users/boneanxs/gists{/gist_id}","starred_url":"https://api.github.com/users/boneanxs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneanxs/subscriptions","organizations_url":"https://api.github.com/users/boneanxs/orgs","repos_url":"https://api.github.com/users/boneanxs/repos","events_url":"https://api.github.com/users/boneanxs/events{/privacy}","received_events_url":"https://api.github.com/users/boneanxs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T06:10:09Z","updated_at":"2022-08-15T06:10:09Z","author_association":"CONTRIBUTOR","body":"@danny0405 the CI pass~","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214652833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214654472","html_url":"https://github.com/apache/hudi/pull/6395#issuecomment-1214654472","issue_url":"https://api.github.com/repos/apache/hudi/issues/6395","id":1214654472,"node_id":"IC_kwDOBI7nWM5IZigI","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T06:12:42Z","updated_at":"2022-08-15T06:12:42Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"952bef85e137b87f1a24a08eb71d987e53a6460b\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10762\",\n    \"triggerID\" : \"952bef85e137b87f1a24a08eb71d987e53a6460b\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 952bef85e137b87f1a24a08eb71d987e53a6460b Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10762) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214654472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214672107","html_url":"https://github.com/apache/hudi/pull/6046#issuecomment-1214672107","issue_url":"https://api.github.com/repos/apache/hudi/issues/6046","id":1214672107,"node_id":"IC_kwDOBI7nWM5IZmzr","user":{"login":"boneanxs","id":10115332,"node_id":"MDQ6VXNlcjEwMTE1MzMy","avatar_url":"https://avatars.githubusercontent.com/u/10115332?v=4","gravatar_id":"","url":"https://api.github.com/users/boneanxs","html_url":"https://github.com/boneanxs","followers_url":"https://api.github.com/users/boneanxs/followers","following_url":"https://api.github.com/users/boneanxs/following{/other_user}","gists_url":"https://api.github.com/users/boneanxs/gists{/gist_id}","starred_url":"https://api.github.com/users/boneanxs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneanxs/subscriptions","organizations_url":"https://api.github.com/users/boneanxs/orgs","repos_url":"https://api.github.com/users/boneanxs/repos","events_url":"https://api.github.com/users/boneanxs/events{/privacy}","received_events_url":"https://api.github.com/users/boneanxs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T06:38:35Z","updated_at":"2022-08-15T06:40:20Z","author_association":"CONTRIBUTOR","body":"The CI failure seems not relate to the PR.\r\n\r\nThanks to @voonhous, he also tested 2 cases, cluster individual parquet files of  ~500MB up to 10GB groups.\r\n\r\nAfter enable `hoodie.clustering.as.row`, it could give us nearly 30% performance improvement\r\n\r\n### Test 1\r\n| clustering as row enabled |Partition hour| total size | runtime(min) |\r\n| :----:| :----:|:----:|:----:|\r\n|true|dt=2022-07-28/hh=23|2.0T|76|\r\n|false|dt=2022-07-28/hh=00|2.0T|123|\r\n\r\n### Test 2\r\n| clustering as row enabled |Partition hour| total size | File Count | runtime(min) |\r\n| :----:| :----:|:----:|:----:|:----:|\r\n|true|dt=2022-07-28/hh=14|2.5T|7792|92|\r\n|false|dt=2022-07-28/hh=15|2.5T|7771|128|\r\n\r\nThe spark configure used\r\n\r\n```bash\r\n    --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer' \\\r\n    --conf 'spark.rpc.askTimeout=600s' \\\r\n    --conf 'spark.driver.extraJavaOptions=-Djava.util.concurrent.ForkJoinPool.common.parallelism=250' \\\r\n    --conf 'spark.sql.parquet.columnarReaderBatchSize=1024' \\\r\n    --conf 'spark.yarn.maxAppAttempts=1' \\\r\n    --num-executors 64 \\\r\n    --driver-memory 20g \\\r\n    --driver-cores 1 \\\r\n    --executor-memory 15g \\\r\n    --executor-cores 2 \\\r\n    --class org.apache.hudi.utilities.HoodieClusteringJob \\\r\n    hudi-utilities-bundle_2.12-0.12.0-SNAPSHOT.jar \\\r\n    --props hdfs://test/2022-07-24_clustering/clusteringjob_optimized.properties \\\r\n    --mode scheduleAndExecute \\\r\n    --base-path hdfs://test/test/hudi/voon_kafka_test__test_hudi_011_04/ \\\r\n    --table-name rank_server_log_hudi_test_1h \\\r\n    --spark-memory 15g \\\r\n    --parallelism 32\r\n```\r\n\r\nclusteringjob.properties\r\n\r\n```bash\r\nhoodie.clustering.async.enabled=true\r\nhoodie.clustering.async.max.commits=2\r\nhoodie.clustering.plan.strategy.max.bytes.per.group=10737418240\r\nhoodie.clustering.plan.strategy.target.file.max.bytes=11811160064\r\nhoodie.clustering.plan.strategy.small.file.limit=6442450944\r\nhoodie.clustering.plan.strategy.max.num.groups=10000\r\nhoodie.clustering.execution.strategy.class=org.apache.hudi.client.clustering.run.strategy.SparkSortAndSizeExecutionStrategy\r\nhoodie.clustering.plan.strategy.class=org.apache.hudi.client.clustering.plan.strategy.SparkSizeBasedClusteringPlanStrategy\r\nhoodie.clustering.plan.partition.filter.mode=SELECTED_PARTITIONS\r\nhoodie.clustering.plan.strategy.cluster.begin.partition=dt=2022-07-28/hh=15\r\nhoodie.clustering.plan.strategy.cluster.end.partition=dt=2022-07-28/hh=15\r\nhoodie.clustering.plan.strategy.sort.columns=partition,offset\r\n```\r\n\r\nGentle ping @xiarixiaoyao @XuQianJin-Stars @codope, can you guys help to review this if you catch time?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214672107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214811767","html_url":"https://github.com/apache/hudi/pull/6046#issuecomment-1214811767","issue_url":"https://api.github.com/repos/apache/hudi/issues/6046","id":1214811767,"node_id":"IC_kwDOBI7nWM5IaI53","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T09:25:24Z","updated_at":"2022-08-15T09:25:24Z","author_association":"CONTRIBUTOR","body":"@alexeykudinkin  could you pls help review this pr， thanks very much","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1214811767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215096652","html_url":"https://github.com/apache/hudi/pull/6396#issuecomment-1215096652","issue_url":"https://api.github.com/repos/apache/hudi/issues/6396","id":1215096652,"node_id":"IC_kwDOBI7nWM5IbOdM","user":{"login":"wuwenchi","id":19755729,"node_id":"MDQ6VXNlcjE5NzU1NzI5","avatar_url":"https://avatars.githubusercontent.com/u/19755729?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwenchi","html_url":"https://github.com/wuwenchi","followers_url":"https://api.github.com/users/wuwenchi/followers","following_url":"https://api.github.com/users/wuwenchi/following{/other_user}","gists_url":"https://api.github.com/users/wuwenchi/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwenchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwenchi/subscriptions","organizations_url":"https://api.github.com/users/wuwenchi/orgs","repos_url":"https://api.github.com/users/wuwenchi/repos","events_url":"https://api.github.com/users/wuwenchi/events{/privacy}","received_events_url":"https://api.github.com/users/wuwenchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T14:46:18Z","updated_at":"2022-08-15T14:46:18Z","author_association":"CONTRIBUTOR","body":"@danny0405 @garyli1019  can you help review it? thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215096652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215122282","html_url":"https://github.com/apache/hudi/issues/6380#issuecomment-1215122282","issue_url":"https://api.github.com/repos/apache/hudi/issues/6380","id":1215122282,"node_id":"IC_kwDOBI7nWM5IbUtq","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T15:00:02Z","updated_at":"2022-08-15T15:00:02Z","author_association":"CONTRIBUTOR","body":"yes, metadata table is updated. clustering has been tested w/ metadata as well. Do you see any strange behavior ? which version of hudi are you using. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215122282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215126959","html_url":"https://github.com/apache/hudi/issues/6379#issuecomment-1215126959","issue_url":"https://api.github.com/repos/apache/hudi/issues/6379","id":1215126959,"node_id":"IC_kwDOBI7nWM5IbV2v","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T15:01:58Z","updated_at":"2022-08-15T15:01:58Z","author_association":"CONTRIBUTOR","body":"your 1st answer is pretty much correct. If there are multiple users querying concurrently, each will do the merge by themselves in memory and will get to read the merged final snapshot of all records. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215126959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215134782","html_url":"https://github.com/apache/hudi/issues/6367#issuecomment-1215134782","issue_url":"https://api.github.com/repos/apache/hudi/issues/6367","id":1215134782,"node_id":"IC_kwDOBI7nWM5IbXw-","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T15:09:55Z","updated_at":"2022-08-15T15:09:55Z","author_association":"CONTRIBUTOR","body":"For col stats issue, we might need to find the root cause how did we end up updating two records w/ same key w/ metadata table. probably its a transient issue and if you restart your pipeline, likely it may go. But definitely would like to understand the root cause here and possible fix a gap if any. Next time, is it possible to collect debug logs and share what you see. \r\n\r\nwrt Cleaning up the metadata, yeah, erasing would work with 0.10.1 or 0.11.0. but from 0.12, we have added some additional constraints or coupling. Can you disable metadata explicitly in your write configs (hoodie.metadata.enable=false), and try restarting your pipeline. Once you get to see few commits (5 to 10) go through successfully, you can come back again to re-enable your metadata via configs. \r\n\r\nOr another option is to use hudi-cli to disable metadata for table fo interest. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215134782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215167926","html_url":"https://github.com/apache/hudi/pull/6383#issuecomment-1215167926","issue_url":"https://api.github.com/repos/apache/hudi/issues/6383","id":1215167926,"node_id":"IC_kwDOBI7nWM5Ibf22","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T15:31:55Z","updated_at":"2022-08-15T15:31:55Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"d1f9a27a1e939fb07e614c90cfa6d0ec9d9940a6\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10744\",\n    \"triggerID\" : \"d1f9a27a1e939fb07e614c90cfa6d0ec9d9940a6\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"a7c9b9dde772cf1d0cfdaf005cd9888711394365\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10767\",\n    \"triggerID\" : \"a7c9b9dde772cf1d0cfdaf005cd9888711394365\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* a7c9b9dde772cf1d0cfdaf005cd9888711394365 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10767) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215167926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215205417","html_url":"https://github.com/apache/hudi/issues/6397#issuecomment-1215205417","issue_url":"https://api.github.com/repos/apache/hudi/issues/6397","id":1215205417,"node_id":"IC_kwDOBI7nWM5IbpAp","user":{"login":"Zouxxyy","id":37108074,"node_id":"MDQ6VXNlcjM3MTA4MDc0","avatar_url":"https://avatars.githubusercontent.com/u/37108074?v=4","gravatar_id":"","url":"https://api.github.com/users/Zouxxyy","html_url":"https://github.com/Zouxxyy","followers_url":"https://api.github.com/users/Zouxxyy/followers","following_url":"https://api.github.com/users/Zouxxyy/following{/other_user}","gists_url":"https://api.github.com/users/Zouxxyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Zouxxyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zouxxyy/subscriptions","organizations_url":"https://api.github.com/users/Zouxxyy/orgs","repos_url":"https://api.github.com/users/Zouxxyy/repos","events_url":"https://api.github.com/users/Zouxxyy/events{/privacy}","received_events_url":"https://api.github.com/users/Zouxxyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T15:47:25Z","updated_at":"2022-08-15T15:47:25Z","author_association":"CONTRIBUTOR","body":"like this? my hudi is 0.10.1, spark is 3.2.1 \r\n<img width=\"964\" alt=\"image\" src=\"https://user-images.githubusercontent.com/37108074/184668340-aaa4d423-e50a-4d20-9623-c0e78c486223.png\">","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215205417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215239268","html_url":"https://github.com/apache/hudi/issues/6397#issuecomment-1215239268","issue_url":"https://api.github.com/repos/apache/hudi/issues/6397","id":1215239268,"node_id":"IC_kwDOBI7nWM5IbxRk","user":{"login":"rbtrtr","id":5345384,"node_id":"MDQ6VXNlcjUzNDUzODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5345384?v=4","gravatar_id":"","url":"https://api.github.com/users/rbtrtr","html_url":"https://github.com/rbtrtr","followers_url":"https://api.github.com/users/rbtrtr/followers","following_url":"https://api.github.com/users/rbtrtr/following{/other_user}","gists_url":"https://api.github.com/users/rbtrtr/gists{/gist_id}","starred_url":"https://api.github.com/users/rbtrtr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rbtrtr/subscriptions","organizations_url":"https://api.github.com/users/rbtrtr/orgs","repos_url":"https://api.github.com/users/rbtrtr/repos","events_url":"https://api.github.com/users/rbtrtr/events{/privacy}","received_events_url":"https://api.github.com/users/rbtrtr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T16:01:58Z","updated_at":"2022-08-15T16:01:58Z","author_association":"NONE","body":"Yes exactly that’s what we‘re looking for. Did we miss some configurations?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215239268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215266488","html_url":"https://github.com/apache/hudi/pull/6267#issuecomment-1215266488","issue_url":"https://api.github.com/repos/apache/hudi/issues/6267","id":1215266488,"node_id":"IC_kwDOBI7nWM5Ib364","user":{"login":"Zouxxyy","id":37108074,"node_id":"MDQ6VXNlcjM3MTA4MDc0","avatar_url":"https://avatars.githubusercontent.com/u/37108074?v=4","gravatar_id":"","url":"https://api.github.com/users/Zouxxyy","html_url":"https://github.com/Zouxxyy","followers_url":"https://api.github.com/users/Zouxxyy/followers","following_url":"https://api.github.com/users/Zouxxyy/following{/other_user}","gists_url":"https://api.github.com/users/Zouxxyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Zouxxyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zouxxyy/subscriptions","organizations_url":"https://api.github.com/users/Zouxxyy/orgs","repos_url":"https://api.github.com/users/Zouxxyy/repos","events_url":"https://api.github.com/users/Zouxxyy/events{/privacy}","received_events_url":"https://api.github.com/users/Zouxxyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T16:13:25Z","updated_at":"2022-08-15T16:13:25Z","author_association":"CONTRIBUTOR","body":"@nsivabalan Can you please help with a review ^-^","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215266488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215268725","html_url":"https://github.com/apache/hudi/issues/6367#issuecomment-1215268725","issue_url":"https://api.github.com/repos/apache/hudi/issues/6367","id":1215268725,"node_id":"IC_kwDOBI7nWM5Ib4d1","user":{"login":"Limess","id":3199181,"node_id":"MDQ6VXNlcjMxOTkxODE=","avatar_url":"https://avatars.githubusercontent.com/u/3199181?v=4","gravatar_id":"","url":"https://api.github.com/users/Limess","html_url":"https://github.com/Limess","followers_url":"https://api.github.com/users/Limess/followers","following_url":"https://api.github.com/users/Limess/following{/other_user}","gists_url":"https://api.github.com/users/Limess/gists{/gist_id}","starred_url":"https://api.github.com/users/Limess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Limess/subscriptions","organizations_url":"https://api.github.com/users/Limess/orgs","repos_url":"https://api.github.com/users/Limess/repos","events_url":"https://api.github.com/users/Limess/events{/privacy}","received_events_url":"https://api.github.com/users/Limess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T16:14:18Z","updated_at":"2022-08-15T16:14:52Z","author_association":"NONE","body":"> Can you disable metadata explicitly in your write configs (hoodie.metadata.enable=false), and try restarting your pipeline\r\n\r\nThis already worked for us, I haven't tried re-enabling metadata yet.\r\nErasing the table caused Deltastreamer to start failing though so the config solution seemed better.\r\n\r\n> But definitely would like to understand the root cause here and possible fix a gap if any. Next time, is it possible to collect debug logs and share what you see.\r\n\r\nWhat would be the process of enabling the required debug logs needed in this case? Had to fix this as fast as possible so can't reproduce unfortunately, but I can certainly try to save these if it were to occur again.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215268725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215362490","html_url":"https://github.com/apache/hudi/pull/6401#issuecomment-1215362490","issue_url":"https://api.github.com/repos/apache/hudi/issues/6401","id":1215362490,"node_id":"IC_kwDOBI7nWM5IcPW6","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T16:52:57Z","updated_at":"2022-08-15T16:52:57Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"19f985687513ba5e5c450201fc05932ddfc189e8\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"19f985687513ba5e5c450201fc05932ddfc189e8\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"718e112b4ae9ce0c2a90c8445693990f45e72081\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10768\",\n    \"triggerID\" : \"718e112b4ae9ce0c2a90c8445693990f45e72081\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"326ea240eb871d20001616da955a58ac12713ca7\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10770\",\n    \"triggerID\" : \"326ea240eb871d20001616da955a58ac12713ca7\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 19f985687513ba5e5c450201fc05932ddfc189e8 UNKNOWN\n* 326ea240eb871d20001616da955a58ac12713ca7 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10770) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215362490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215471603","html_url":"https://github.com/apache/hudi/issues/6343#issuecomment-1215471603","issue_url":"https://api.github.com/repos/apache/hudi/issues/6343","id":1215471603,"node_id":"IC_kwDOBI7nWM5Icp_z","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T17:39:06Z","updated_at":"2022-08-15T17:39:06Z","author_association":"CONTRIBUTOR","body":"Long to Integer is not backwards compatible data type promotion. Don't think hudi supports this promotion. \r\nLet us know if you have any more questions. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215471603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215479286","html_url":"https://github.com/apache/hudi/issues/6342#issuecomment-1215479286","issue_url":"https://api.github.com/repos/apache/hudi/issues/6342","id":1215479286,"node_id":"IC_kwDOBI7nWM5Icr32","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T17:42:16Z","updated_at":"2022-08-15T17:42:16Z","author_association":"CONTRIBUTOR","body":"reconcilation of schemas work only if missing columns are in the end. \r\n\r\nFor eg:\r\nCommit1: \r\nSchema: col1, col2, col3, col4\r\n\r\nCommit2: \r\nSchema: col1, col2, col3, col4, col5, col6\r\n\r\nCommit3: old writer. \r\nSchema: col1, col2, col3, col4\r\nCommit3 will succeed when you enable reconcile schema config. \r\n\r\nIn general, adding new colunmns at the end of existing schema works. it may break if you try to add new columns inbetween. for eg, in commit2, if your schema as col1, col5, col6, col2, col3, col4, your write or read may break. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215479286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215514513","html_url":"https://github.com/apache/hudi/issues/6367#issuecomment-1215514513","issue_url":"https://api.github.com/repos/apache/hudi/issues/6367","id":1215514513,"node_id":"IC_kwDOBI7nWM5Ic0eR","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T17:57:16Z","updated_at":"2022-08-15T17:57:16Z","author_association":"CONTRIBUTOR","body":"thanks for confirming. \r\n\r\nwrt enabling debug logs, I know the usual way to enable for any spark job. \r\n\r\n```\r\n--conf spark.driver.extraJavaOptions=\"-Dlog4j.configuration=file:/home/hadoop/log4j.properties\" --conf spark.executor.extraJavaOptions=\"-Dlog4j.configuration=file:/home/hadoop/log4j.properties\"\r\n```\r\n\r\nSample log4j props file \r\n```\r\nlog4j.rootCategory=WARN, console\r\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\r\nlog4j.appender.console.target=System.err\r\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.console.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{1}: %m%n\r\n​\r\n# Set the default spark-shell log level to WARN. When running the spark-shell, the\r\n# log level for this class is used to overwrite the root logger's log level, so that\r\n# the user can have different defaults for the shell and regular Spark apps.\r\nlog4j.logger.org.apache.spark.repl.Main=WARN\r\n​\r\n# Settings to quiet third party logs that are too verbose\r\nlog4j.logger.org.spark-project.jetty=WARN\r\nlog4j.logger.org.spark-project.jetty.util.component.AbstractLifeCycle=ERROR\r\nlog4j.logger.org.apache.spark.repl.SparkIMain$exprTyper=INFO\r\nlog4j.logger.org.apache.spark.repl.SparkILoop$SparkILoopInterpreter=INFO\r\nlog4j.logger.org.apache.parquet=ERROR\r\nlog4j.logger.parquet=ERROR\r\n​\r\n# hudi entries\r\nlog4j.logger.org.apache.hudi=DEBUG\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215514513/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215750513","html_url":"https://github.com/apache/hudi/pull/6386#issuecomment-1215750513","issue_url":"https://api.github.com/repos/apache/hudi/issues/6386","id":1215750513,"node_id":"IC_kwDOBI7nWM5IduFx","user":{"login":"alexeykudinkin","id":428277,"node_id":"MDQ6VXNlcjQyODI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/428277?v=4","gravatar_id":"","url":"https://api.github.com/users/alexeykudinkin","html_url":"https://github.com/alexeykudinkin","followers_url":"https://api.github.com/users/alexeykudinkin/followers","following_url":"https://api.github.com/users/alexeykudinkin/following{/other_user}","gists_url":"https://api.github.com/users/alexeykudinkin/gists{/gist_id}","starred_url":"https://api.github.com/users/alexeykudinkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexeykudinkin/subscriptions","organizations_url":"https://api.github.com/users/alexeykudinkin/orgs","repos_url":"https://api.github.com/users/alexeykudinkin/repos","events_url":"https://api.github.com/users/alexeykudinkin/events{/privacy}","received_events_url":"https://api.github.com/users/alexeykudinkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T20:22:28Z","updated_at":"2022-08-15T20:22:28Z","author_association":"CONTRIBUTOR","body":"One issue we have currently is that current Pulsar's Spark Connector doesn't shutdown cleanly (it doesn't shutdown the Netty's EVL thread-group, which keeps running even after client is closed) which makes DS hang, even w/ the workarounds put in place. \r\n\r\nThinking about remediation.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215750513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215754809","html_url":"https://github.com/apache/hudi/pull/5111#issuecomment-1215754809","issue_url":"https://api.github.com/repos/apache/hudi/issues/5111","id":1215754809,"node_id":"IC_kwDOBI7nWM5IdvI5","user":{"login":"alexeykudinkin","id":428277,"node_id":"MDQ6VXNlcjQyODI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/428277?v=4","gravatar_id":"","url":"https://api.github.com/users/alexeykudinkin","html_url":"https://github.com/alexeykudinkin","followers_url":"https://api.github.com/users/alexeykudinkin/followers","following_url":"https://api.github.com/users/alexeykudinkin/following{/other_user}","gists_url":"https://api.github.com/users/alexeykudinkin/gists{/gist_id}","starred_url":"https://api.github.com/users/alexeykudinkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexeykudinkin/subscriptions","organizations_url":"https://api.github.com/users/alexeykudinkin/orgs","repos_url":"https://api.github.com/users/alexeykudinkin/repos","events_url":"https://api.github.com/users/alexeykudinkin/events{/privacy}","received_events_url":"https://api.github.com/users/alexeykudinkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T20:26:06Z","updated_at":"2022-08-15T20:26:06Z","author_association":"CONTRIBUTOR","body":"@miomiocat can you please rebase this one?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215754809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215780358","html_url":"https://github.com/apache/hudi/pull/6377#issuecomment-1215780358","issue_url":"https://api.github.com/repos/apache/hudi/issues/6377","id":1215780358,"node_id":"IC_kwDOBI7nWM5Id1YG","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T20:52:45Z","updated_at":"2022-08-15T20:52:45Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215780358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215876750","html_url":"https://github.com/apache/hudi/pull/6377#issuecomment-1215876750","issue_url":"https://api.github.com/repos/apache/hudi/issues/6377","id":1215876750,"node_id":"IC_kwDOBI7nWM5IeM6O","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T21:34:41Z","updated_at":"2022-08-15T21:34:41Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"ee73326b4a8468f5460cca1a3b525eea42096b20\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10743\",\n    \"triggerID\" : \"ee73326b4a8468f5460cca1a3b525eea42096b20\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"ee73326b4a8468f5460cca1a3b525eea42096b20\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10743\",\n    \"triggerID\" : \"1215780358\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"628ab2ee43790d6f32eb985403f9e848fe2e9923\",\n    \"status\" : \"PENDING\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10771\",\n    \"triggerID\" : \"628ab2ee43790d6f32eb985403f9e848fe2e9923\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* ee73326b4a8468f5460cca1a3b525eea42096b20 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10743) \n* 628ab2ee43790d6f32eb985403f9e848fe2e9923 Azure: [PENDING](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=10771) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1215876750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216049140","html_url":"https://github.com/apache/hudi/issues/6400#issuecomment-1216049140","issue_url":"https://api.github.com/repos/apache/hudi/issues/6400","id":1216049140,"node_id":"IC_kwDOBI7nWM5Ie2_0","user":{"login":"KnightChess","id":20125927,"node_id":"MDQ6VXNlcjIwMTI1OTI3","avatar_url":"https://avatars.githubusercontent.com/u/20125927?v=4","gravatar_id":"","url":"https://api.github.com/users/KnightChess","html_url":"https://github.com/KnightChess","followers_url":"https://api.github.com/users/KnightChess/followers","following_url":"https://api.github.com/users/KnightChess/following{/other_user}","gists_url":"https://api.github.com/users/KnightChess/gists{/gist_id}","starred_url":"https://api.github.com/users/KnightChess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnightChess/subscriptions","organizations_url":"https://api.github.com/users/KnightChess/orgs","repos_url":"https://api.github.com/users/KnightChess/repos","events_url":"https://api.github.com/users/KnightChess/events{/privacy}","received_events_url":"https://api.github.com/users/KnightChess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T01:40:53Z","updated_at":"2022-08-16T01:40:53Z","author_association":"CONTRIBUTOR","body":"now, hudi not support `Non-Equal` merge condition in `merge sql`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216049140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216080119","html_url":"https://github.com/apache/hudi/pull/6401#issuecomment-1216080119","issue_url":"https://api.github.com/repos/apache/hudi/issues/6401","id":1216080119,"node_id":"IC_kwDOBI7nWM5Ie-j3","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T02:43:12Z","updated_at":"2022-08-16T02:43:12Z","author_association":"CONTRIBUTOR","body":"Can we explain a little why we need a special suffix for log, we do not even support multi-writer concurrency for flink side now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216080119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216093360","html_url":"https://github.com/apache/hudi/issues/6380#issuecomment-1216093360","issue_url":"https://api.github.com/repos/apache/hudi/issues/6380","id":1216093360,"node_id":"IC_kwDOBI7nWM5IfByw","user":{"login":"Zhangshunyu","id":13940237,"node_id":"MDQ6VXNlcjEzOTQwMjM3","avatar_url":"https://avatars.githubusercontent.com/u/13940237?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhangshunyu","html_url":"https://github.com/Zhangshunyu","followers_url":"https://api.github.com/users/Zhangshunyu/followers","following_url":"https://api.github.com/users/Zhangshunyu/following{/other_user}","gists_url":"https://api.github.com/users/Zhangshunyu/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhangshunyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhangshunyu/subscriptions","organizations_url":"https://api.github.com/users/Zhangshunyu/orgs","repos_url":"https://api.github.com/users/Zhangshunyu/repos","events_url":"https://api.github.com/users/Zhangshunyu/events{/privacy}","received_events_url":"https://api.github.com/users/Zhangshunyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T03:11:47Z","updated_at":"2022-08-16T03:11:47Z","author_association":"CONTRIBUTOR","body":"> yes, metadata table is updated. clustering has been tested w/ metadata as well. Do you see any strange behavior ? which version of hudi are you using.\r\n\r\nOK， thanks for reply，no problem yet，will close this issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216093360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216095469","html_url":"https://github.com/apache/hudi/issues/6398#issuecomment-1216095469","issue_url":"https://api.github.com/repos/apache/hudi/issues/6398","id":1216095469,"node_id":"IC_kwDOBI7nWM5IfCTt","user":{"login":"Zhangshunyu","id":13940237,"node_id":"MDQ6VXNlcjEzOTQwMjM3","avatar_url":"https://avatars.githubusercontent.com/u/13940237?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhangshunyu","html_url":"https://github.com/Zhangshunyu","followers_url":"https://api.github.com/users/Zhangshunyu/followers","following_url":"https://api.github.com/users/Zhangshunyu/following{/other_user}","gists_url":"https://api.github.com/users/Zhangshunyu/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhangshunyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhangshunyu/subscriptions","organizations_url":"https://api.github.com/users/Zhangshunyu/orgs","repos_url":"https://api.github.com/users/Zhangshunyu/repos","events_url":"https://api.github.com/users/Zhangshunyu/events{/privacy}","received_events_url":"https://api.github.com/users/Zhangshunyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T03:16:28Z","updated_at":"2022-08-16T03:16:28Z","author_association":"CONTRIBUTOR","body":"the version of hbase api is 2.4.9","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216095469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216119319","html_url":"https://github.com/apache/hudi/issues/6389#issuecomment-1216119319","issue_url":"https://api.github.com/repos/apache/hudi/issues/6389","id":1216119319,"node_id":"IC_kwDOBI7nWM5IfIIX","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:05:43Z","updated_at":"2022-08-16T04:05:43Z","author_association":"CONTRIBUTOR","body":"Unfortunately, there is no out of the box solution to use two fields as preCombine for now. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216119319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216124267","html_url":"https://github.com/apache/hudi/issues/6403#issuecomment-1216124267","issue_url":"https://api.github.com/repos/apache/hudi/issues/6403","id":1216124267,"node_id":"IC_kwDOBI7nWM5IfJVr","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:16:17Z","updated_at":"2022-08-16T04:16:17Z","author_association":"CONTRIBUTOR","body":"We have made some fixed around this. \r\nhttps://github.com/apache/hudi/pull/4123\r\nhttps://github.com/apache/hudi/pull/4971\r\nIf you upgrade to 0.11, you should not see above issue. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216124267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216124839","html_url":"https://github.com/apache/hudi/issues/6367#issuecomment-1216124839","issue_url":"https://api.github.com/repos/apache/hudi/issues/6367","id":1216124839,"node_id":"IC_kwDOBI7nWM5IfJen","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:17:20Z","updated_at":"2022-08-16T04:17:20Z","author_association":"CONTRIBUTOR","body":"Will close out the github issue for now. let us know if you have any more questions. thanks for reaching out.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216124839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216125257","html_url":"https://github.com/apache/hudi/issues/6316#issuecomment-1216125257","issue_url":"https://api.github.com/repos/apache/hudi/issues/6316","id":1216125257,"node_id":"IC_kwDOBI7nWM5IfJlJ","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:18:08Z","updated_at":"2022-08-16T04:18:08Z","author_association":"CONTRIBUTOR","body":"@yihua : if you have a tracking jira, can you post it here. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216125257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216125929","html_url":"https://github.com/apache/hudi/issues/6316#issuecomment-1216125929","issue_url":"https://api.github.com/repos/apache/hudi/issues/6316","id":1216125929,"node_id":"IC_kwDOBI7nWM5IfJvp","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:19:23Z","updated_at":"2022-08-16T04:19:23Z","author_association":"CONTRIBUTOR","body":"https://issues.apache.org/jira/browse/HUDI-1881\r\nLets track the updates from jira. \r\nthanks for reporting. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216125929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216126705","html_url":"https://github.com/apache/hudi/issues/6343#issuecomment-1216126705","issue_url":"https://api.github.com/repos/apache/hudi/issues/6343","id":1216126705,"node_id":"IC_kwDOBI7nWM5IfJ7x","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:20:59Z","updated_at":"2022-08-16T04:20:59Z","author_association":"CONTRIBUTOR","body":"closing this as not feasible. Feel free to raise new issue if you have more. \r\nthanks for keeping the community buzzing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216126705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216126792","html_url":"https://github.com/apache/hudi/issues/6342#issuecomment-1216126792","issue_url":"https://api.github.com/repos/apache/hudi/issues/6342","id":1216126792,"node_id":"IC_kwDOBI7nWM5IfJ9I","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:21:11Z","updated_at":"2022-08-16T04:21:11Z","author_association":"CONTRIBUTOR","body":"closing this as not feasible. Feel free to raise new issue if you have more.\r\nthanks for keeping the community buzzing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216126792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216127634","html_url":"https://github.com/apache/hudi/issues/6224#issuecomment-1216127634","issue_url":"https://api.github.com/repos/apache/hudi/issues/6224","id":1216127634,"node_id":"IC_kwDOBI7nWM5IfKKS","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:23:02Z","updated_at":"2022-08-16T04:23:02Z","author_association":"CONTRIBUTOR","body":"closing the issue as we have the fix with 0.12. \r\nthanks for reaching out. appreciate you keeping the community buzzing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216127634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216128068","html_url":"https://github.com/apache/hudi/issues/6226#issuecomment-1216128068","issue_url":"https://api.github.com/repos/apache/hudi/issues/6226","id":1216128068,"node_id":"IC_kwDOBI7nWM5IfKRE","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:23:57Z","updated_at":"2022-08-16T04:23:57Z","author_association":"CONTRIBUTOR","body":"@atharvai : can you respond to @zhedoubushishi 's request above when you get a chance. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216128068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216129737","html_url":"https://github.com/apache/hudi/issues/6305#issuecomment-1216129737","issue_url":"https://api.github.com/repos/apache/hudi/issues/6305","id":1216129737,"node_id":"IC_kwDOBI7nWM5IfKrJ","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:27:26Z","updated_at":"2022-08-16T04:27:26Z","author_association":"CONTRIBUTOR","body":"CC @rmahindra123 \r\ngentle ping @alexeykudinkin ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216129737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216134630","html_url":"https://github.com/apache/hudi/issues/5599#issuecomment-1216134630","issue_url":"https://api.github.com/repos/apache/hudi/issues/5599","id":1216134630,"node_id":"IC_kwDOBI7nWM5IfL3m","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:36:00Z","updated_at":"2022-08-16T04:36:00Z","author_association":"CONTRIBUTOR","body":"thanks. going ahead and closing the github issue. feel free to open new one if you run into any issues. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216134630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216135653","html_url":"https://github.com/apache/hudi/issues/5689#issuecomment-1216135653","issue_url":"https://api.github.com/repos/apache/hudi/issues/5689","id":1216135653,"node_id":"IC_kwDOBI7nWM5IfMHl","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T04:38:10Z","updated_at":"2022-08-16T04:38:10Z","author_association":"CONTRIBUTOR","body":"@eshu : can you update w/ the requested info. We won't be able to help much w/o further info. If you got the issue resolved, feel free to close out the issue. thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1216135653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]