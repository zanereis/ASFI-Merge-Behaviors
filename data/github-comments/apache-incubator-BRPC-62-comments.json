[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556694580","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556694580","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556694580,"node_id":"IC_kwDOBhmkcs5cyUY0","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T07:36:19Z","updated_at":"2023-05-22T07:36:19Z","author_association":"NONE","body":"vm.max_map_count = 262144 这个值也不小了吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556694580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556695520","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556695520","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556695520,"node_id":"IC_kwDOBhmkcs5cyUng","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T07:37:06Z","updated_at":"2023-05-22T07:37:06Z","author_association":"NONE","body":"而且brpc_max_concurrency设置的为5000","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556695520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556709342","html_url":"https://github.com/apache/brpc/pull/2250#issuecomment-1556709342","issue_url":"https://api.github.com/repos/apache/brpc/issues/2250","id":1556709342,"node_id":"IC_kwDOBhmkcs5cyX_e","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T07:47:27Z","updated_at":"2023-05-22T07:47:27Z","author_association":"CONTRIBUTOR","body":"@wwbmmm Can this PR be merged now?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556709342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556711159","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556711159","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556711159,"node_id":"IC_kwDOBhmkcs5cyYb3","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T07:48:56Z","updated_at":"2023-05-22T07:48:56Z","author_association":"CONTRIBUTOR","body":"DynamicPartitionChannel 这个一次会并发访问多少个分片呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556711159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556714302","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556714302","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556714302,"node_id":"IC_kwDOBhmkcs5cyZM-","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T07:51:36Z","updated_at":"2023-05-22T07:51:36Z","author_association":"NONE","body":"8个分片","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556714302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556751970","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556751970","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556751970,"node_id":"IC_kwDOBhmkcs5cyiZi","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T08:15:10Z","updated_at":"2023-05-22T08:15:10Z","author_association":"CONTRIBUTOR","body":"可以在启动服务之后观察内置服务的bthread_count指标以及进程内存指标的变化，看是否会不断增长","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556751970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556780754","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556780754","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556780754,"node_id":"IC_kwDOBhmkcs5cypbS","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T08:33:41Z","updated_at":"2023-05-22T08:33:41Z","author_association":"NONE","body":"会增长，也会下降，最多到50了，然后又下来了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556780754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556789149","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556789149","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556789149,"node_id":"IC_kwDOBhmkcs5cyred","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T08:39:09Z","updated_at":"2023-05-22T08:39:09Z","author_association":"NONE","body":"```\r\nbthread_count : 37\r\nbthread_group_status : \"1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \"\r\nbthread_key_count : 0\r\nbthread_keytable_count : 0\r\nbthread_keytable_memory : 0\r\nbthread_signal_second : 987\r\nbthread_stack_count : 191\r\nbthread_switch_second : 2095\r\nbthread_timer_scheduled_second : 295\r\nbthread_timer_triggered_second : 14\r\nbthread_timer_usage : 0.000139691\r\nbthread_worker_count : 32\r\nbthread_worker_usage : 32.6478\r\nbvar_dump_interval : 10\r\nbvar_sampler_collector_usage : 0.00116603\r\ngcc_version : \"11.3.0\"\r\niobuf_block_count : 215\r\niobuf_block_count_hit_tls_threshold : 19283\r\niobuf_block_memory : 1761280\r\niobuf_newbigview_second : 1\r\nkernel_version : \"Linux ad-nads-rankingdump7.wxxdc 5.4.193-0504193-generic #202205121146 SMP Thu May 12 12:05:07 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n\"\r\npgrp : 28346\r\npid : 28346\r\nppid : 1966\r\nprocess_cmdline : \"./bin/ranking\r\n\"\r\nprocess_context_switches_involuntary_second : 5\r\nprocess_context_switches_voluntary_second : 2025\r\nprocess_cpu_usage : 0.658\r\nprocess_cpu_usage_system : 0.325\r\nprocess_cpu_usage_user : 0.333\r\nprocess_disk_read_bytes_second : 0\r\nprocess_disk_write_bytes_second : 250249\r\nprocess_faults_major : 0\r\nprocess_faults_minor_second : 270\r\nprocess_fd_count : 718\r\nprocess_inblocks_second : 0\r\nprocess_io_read_bytes_second : 712818\r\nprocess_io_read_second : 854\r\nprocess_io_write_bytes_second : 299397\r\nprocess_io_write_second : 967\r\nprocess_memory_data_and_stack : 1138036736\r\nprocess_memory_resident : 158076928\r\nprocess_memory_shared : 33538048\r\nprocess_memory_text : 215818240\r\nprocess_memory_virtual : 1470058496\r\nprocess_nice : 0\r\nprocess_outblocks_second : 489\r\nprocess_priority : 20\r\nprocess_thread_count : 65\r\nprocess_uptime : 313.753962\r\nprocess_username : \"unknown (No such device or address)\"\r\nprocess_work_dir : \"/data/app/nads-rankingdump\"\r\nranking_ad_num_avg : 3\r\nranking_cache_hit_rate : 9943\r\nranking_cache_miss_num : 5\r\nranking_channel_init_times : 0\r\nranking_default_response_num : 0\r\nranking_fast_fail_num : 0\r\nranking_get_ctx_fea_count : 87498\r\nranking_get_ctx_fea_latency : 0.007\r\nranking_get_ctx_fea_latency_80 : 0\r\nranking_get_ctx_fea_latency_90 : 0\r\nranking_get_ctx_fea_latency_99 : 0\r\nranking_get_ctx_fea_latency_999 : 0\r\nranking_get_ctx_fea_latency_9999 : 0\r\nranking_get_ctx_fea_max_latency : 1\r\nranking_get_ctx_fea_qps : 284\r\nranking_get_fea_count : 87487\r\nranking_get_fea_latency : 59\r\nranking_get_fea_latency_80 : 0\r\nranking_get_fea_latency_90 : 0\r\nranking_get_fea_latency_99 : 0\r\nranking_get_fea_latency_999 : 0\r\nranking_get_fea_latency_9999 : 0\r\nranking_get_fea_max_latency : 170\r\nranking_get_fea_qps : 286\r\nranking_get_item_fea_count : 87492\r\nranking_get_item_fea_latency : 0.038\r\nranking_get_item_fea_latency_80 : 0\r\nranking_get_item_fea_latency_90 : 0\r\nranking_get_item_fea_latency_99 : 0\r\nranking_get_item_fea_latency_999 : 0\r\nranking_get_item_fea_latency_9999 : 0\r\nranking_get_item_fea_max_latency : 1\r\nranking_get_item_fea_qps : 287\r\nranking_get_user_fea_count : 87500\r\nranking_get_user_fea_latency : 42\r\nranking_get_user_fea_latency_80 : 0\r\nranking_get_user_fea_latency_90 : 0\r\nranking_get_user_fea_latency_99 : 0\r\nranking_get_user_fea_latency_999 : 0\r\nranking_get_user_fea_latency_9999 : 0\r\nranking_get_user_fea_max_latency : 117\r\nranking_get_user_fea_qps : 283\r\nranking_idea_not_equal : 0\r\nranking_idea_num : 0\r\nranking_index_empty_num : 0\r\nranking_index_less_20_num : 0\r\nranking_index_less_20_rate : 0.000\r\nranking_item_fea_null : 0\r\nranking_item_fea_num_error : 0\r\nranking_miss_model_num : 0\r\nranking_model_load_failed_num : 0\r\nranking_parse_error_num : 0\r\nranking_predict_count : 0\r\nranking_predict_error : 0\r\nranking_predict_fail_num : 0\r\nranking_predict_latency : 0.000\r\nranking_predict_latency_80 : 0\r\nranking_predict_latency_90 : 0\r\nranking_predict_latency_99 : 0\r\nranking_predict_latency_999 : 0\r\nranking_predict_latency_9999 : 0\r\nranking_predict_max_latency : 0\r\nranking_predict_qps : 0\r\nranking_predict_sucess_num : 0\r\nranking_prepare_count : 0\r\nranking_prepare_error : 0\r\nranking_prepare_latency : 0.000\r\nranking_prepare_latency_80 : 0\r\nranking_prepare_latency_90 : 0\r\nranking_prepare_latency_99 : 0\r\nranking_prepare_latency_999 : 0\r\nranking_prepare_latency_9999 : 0\r\nranking_prepare_max_latency : 0\r\nranking_prepare_qps : 0\r\nranking_rank_count : 87483\r\nranking_rank_latency : 99\r\nranking_rank_latency_80 : 0\r\nranking_rank_latency_90 : 0\r\nranking_rank_latency_99 : 0\r\nranking_rank_latency_999 : 0\r\nranking_rank_latency_9999 : 0\r\nranking_rank_max_latency : 247\r\nranking_rank_qps : 285\r\nranking_reply_empty_num : 0\r\nranking_reply_error_num : 0\r\nranking_req_num : 283\r\nranking_result_error : 0\r\nranking_score_1_exception : 0\r\nranking_score_high_exception : 0\r\nranking_score_neg_exception : 0\r\nranking_update_fail_num : 0\r\nranking_user_fea_empty_req : 283\r\nranking_user_fea_req : 283\r\nranking_user_fea_req_empty_rate : 10035\r\nrpc_channel_connection_count : 8\r\nrpc_compressions : \"snappy gzip zlib\"\r\nrpc_controller_count : 40\r\nrpc_event_thread_second : 387\r\nrpc_health_check_count : 27\r\nrpc_keepwrite_second : 2\r\nrpc_load_balancer : \"c_md5 wr c_murmurhash wrr rr c_ketama random la\"\r\nrpc_naming_service : \"https consul redis file list http discovery dlist nacos remotefile\"\r\nrpc_profilers : \"contention\"\r\nrpc_protocols : \"baidu_std streaming_rpc hulu_pbrpc sofa_pbrpc rtmp http public_pbrpc nova_pbrpc redis nshead mongo ubrpc_compack memcache nshead_mcpack ubrpc_mcpack2 esp h2\"\r\nrpc_revision : \"undefined\"\r\nrpc_server_10003_builtin_service_count : 19\r\nrpc_server_10003_connection_count : 89\r\nrpc_server_10003_eps : 0\r\nrpc_server_10003_error : 0\r\nrpc_server_10003_service_count : 1\r\nrpc_server_10003_start_time : \"2023/05/22-16:32:19\"\r\nrpc_server_10003_uptime : 313.417985\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_concurrency : 31\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_count : 87480\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_eps : 0\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_error : 0\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency : 57759\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency_80 : 109728\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency_90 : 138437\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency_99 : 198365\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency_999 : 240210\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_latency_9999 : 250536\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_max_latency : 283137\r\nrpc_server_10003_wifi_ad_protocol_engine_ranking_rank_service_rank_qps : 282\r\nrpc_server_count : 1\r\nrpc_socket_count : 99\r\nrpc_waitepollout_count : 0\r\nrpc_waitepollout_second : 0\r\nrpcz_sampling_ratio : 1.000\r\nsystem_core_count : 32\r\nsystem_loadavg_15m : 0.420\r\nsystem_loadavg_1m : 0.910\r\nsystem_loadavg_5m : 0.660\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556789149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556804207","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556804207","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556804207,"node_id":"IC_kwDOBhmkcs5cyvJv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T08:47:53Z","updated_at":"2023-05-22T08:47:53Z","author_association":"CONTRIBUTOR","body":"看bthread_stack_count和内存占用都不大。\r\n我看你的堆栈里有CallMethodInBackupThread，是不是开启了usercode_in_pthread=true呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556804207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556864554","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556864554","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556864554,"node_id":"IC_kwDOBhmkcs5cy94q","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T09:21:31Z","updated_at":"2023-05-22T09:21:31Z","author_association":"NONE","body":"![image](https://github.com/apache/brpc/assets/8072296/066d00d1-5626-4764-9cab-7407a11cce6e)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556864554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556864760","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556864760","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556864760,"node_id":"IC_kwDOBhmkcs5cy974","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T09:21:39Z","updated_at":"2023-05-22T09:21:39Z","author_association":"NONE","body":"没有开启","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556864760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556871504","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1556871504","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1556871504,"node_id":"IC_kwDOBhmkcs5cy_lQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T09:26:17Z","updated_at":"2023-05-22T09:26:17Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556871504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556872662","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556872662","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556872662,"node_id":"IC_kwDOBhmkcs5cy_3W","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T09:27:10Z","updated_at":"2023-05-22T09:27:10Z","author_association":"NONE","body":"我的done是自己管理的，有快速拒绝机制，可能会瞬间把自己管理的队列一下子全部释放掉（会调done->Run()）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556872662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556881741","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556881741","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556881741,"node_id":"IC_kwDOBhmkcs5czCFN","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T09:33:06Z","updated_at":"2023-05-22T09:33:06Z","author_association":"NONE","body":"不过就算done不自己管理，也会出现同样的状况，我已经测试过了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556881741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556946363","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556946363","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556946363,"node_id":"IC_kwDOBhmkcs5czR27","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T10:13:44Z","updated_at":"2023-05-22T10:13:44Z","author_association":"NONE","body":"把DynamicPartitionChannel换成普通Channle后这个问题修复了，目前观察是这样的，再观察几天看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556946363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556987877","html_url":"https://github.com/apache/brpc/issues/2239#issuecomment-1556987877","issue_url":"https://api.github.com/repos/apache/brpc/issues/2239","id":1556987877,"node_id":"IC_kwDOBhmkcs5czb_l","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T10:43:32Z","updated_at":"2023-05-22T10:43:32Z","author_association":"NONE","body":"看起来目前的会导致死锁 https://github.com/apache/brpc/issues/2259 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556987877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556994283","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1556994283","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1556994283,"node_id":"IC_kwDOBhmkcs5czdjr","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T10:48:21Z","updated_at":"2023-05-22T10:48:21Z","author_association":"NONE","body":"brpc问题实在太多了，有负盛名","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1556994283/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557066564","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1557066564","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1557066564,"node_id":"IC_kwDOBhmkcs5czvNE","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T11:41:26Z","updated_at":"2023-05-22T11:41:26Z","author_association":"CONTRIBUTOR","body":"看堆栈里有brpc::policy::CallMethodInBackupThread：\r\n<img width=\"912\" alt=\"image\" src=\"https://github.com/apache/brpc/assets/3894631/71b63bc1-8cb9-4106-89b8-eb45086a31f8\">\r\n\r\n\r\n根据brpc 1.3.0的代码，CallMethodInBackupThread会在EndRunningCallMethodInPool中使用：\r\n<img width=\"747\" alt=\"image\" src=\"https://github.com/apache/brpc/assets/3894631/2a4ee35c-0e4a-4714-a85a-5e8b397c743c\">\r\n\r\n\r\nEndRunningCallMethodInPool只会在FLAGS_usercode_in_pthread为true的时候走到：\r\n<img width=\"573\" alt=\"image\" src=\"https://github.com/apache/brpc/assets/3894631/4ddb472a-2eab-4459-a26e-f807a7b9cf73\">\r\n\r\n\r\n所以FLAGS_usercode_in_pthread的值应该为true，太奇怪了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557066564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557311485","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1557311485","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1557311485,"node_id":"IC_kwDOBhmkcs5c0q_9","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T14:21:03Z","updated_at":"2023-05-22T14:21:03Z","author_association":"NONE","body":"FLAGS_usercode_in_pthread为true和不为false我都编译过，运行过，反正都会死锁","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557311485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557312738","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1557312738","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1557312738,"node_id":"IC_kwDOBhmkcs5c0rTi","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T14:21:46Z","updated_at":"2023-05-22T14:21:46Z","author_association":"NONE","body":"看起来是DynamicPartitionChannel的bug","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557312738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557516521","html_url":"https://github.com/apache/brpc/pull/2257#issuecomment-1557516521","issue_url":"https://api.github.com/repos/apache/brpc/issues/2257","id":1557516521,"node_id":"IC_kwDOBhmkcs5c1dDp","user":{"login":"ZjuYTW","id":48974769,"node_id":"MDQ6VXNlcjQ4OTc0NzY5","avatar_url":"https://avatars.githubusercontent.com/u/48974769?v=4","gravatar_id":"","url":"https://api.github.com/users/ZjuYTW","html_url":"https://github.com/ZjuYTW","followers_url":"https://api.github.com/users/ZjuYTW/followers","following_url":"https://api.github.com/users/ZjuYTW/following{/other_user}","gists_url":"https://api.github.com/users/ZjuYTW/gists{/gist_id}","starred_url":"https://api.github.com/users/ZjuYTW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZjuYTW/subscriptions","organizations_url":"https://api.github.com/users/ZjuYTW/orgs","repos_url":"https://api.github.com/users/ZjuYTW/repos","events_url":"https://api.github.com/users/ZjuYTW/events{/privacy}","received_events_url":"https://api.github.com/users/ZjuYTW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T16:13:38Z","updated_at":"2023-05-22T16:13:38Z","author_association":"CONTRIBUTOR","body":"No so sure if I need to get bazel compatible for thrift >= 0.13, seems there is no enough doc about how to build by bazel...  \r\nAnd maybe later I should add some CI tests for thrift >= 0.13?\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1557516521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558392765","html_url":"https://github.com/apache/brpc/pull/2225#issuecomment-1558392765","issue_url":"https://api.github.com/repos/apache/brpc/issues/2225","id":1558392765,"node_id":"IC_kwDOBhmkcs5c4y-9","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T02:11:31Z","updated_at":"2023-05-23T02:11:31Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558392765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558393775","html_url":"https://github.com/apache/brpc/pull/2210#issuecomment-1558393775","issue_url":"https://api.github.com/repos/apache/brpc/issues/2210","id":1558393775,"node_id":"IC_kwDOBhmkcs5c4zOv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T02:13:22Z","updated_at":"2023-05-23T02:13:22Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558393775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558722470","html_url":"https://github.com/apache/brpc/pull/2215#issuecomment-1558722470","issue_url":"https://api.github.com/repos/apache/brpc/issues/2215","id":1558722470,"node_id":"IC_kwDOBhmkcs5c6Dem","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T07:49:46Z","updated_at":"2023-05-23T07:49:46Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558722470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558910031","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1558910031","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1558910031,"node_id":"IC_kwDOBhmkcs5c6xRP","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T09:34:17Z","updated_at":"2023-05-23T09:34:17Z","author_association":"CONTRIBUTOR","body":"这个 fix 只对 gcc 生效吗？其他编译器是否有试过","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1558910031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559079076","html_url":"https://github.com/apache/brpc/pull/2262#issuecomment-1559079076","issue_url":"https://api.github.com/repos/apache/brpc/issues/2262","id":1559079076,"node_id":"IC_kwDOBhmkcs5c7aik","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T11:09:56Z","updated_at":"2023-05-23T11:09:56Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559079076/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559634244","html_url":"https://github.com/apache/brpc/issues/2259#issuecomment-1559634244","issue_url":"https://api.github.com/repos/apache/brpc/issues/2259","id":1559634244,"node_id":"IC_kwDOBhmkcs5c9iFE","user":{"login":"xiedeacc","id":8072296,"node_id":"MDQ6VXNlcjgwNzIyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072296?v=4","gravatar_id":"","url":"https://api.github.com/users/xiedeacc","html_url":"https://github.com/xiedeacc","followers_url":"https://api.github.com/users/xiedeacc/followers","following_url":"https://api.github.com/users/xiedeacc/following{/other_user}","gists_url":"https://api.github.com/users/xiedeacc/gists{/gist_id}","starred_url":"https://api.github.com/users/xiedeacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiedeacc/subscriptions","organizations_url":"https://api.github.com/users/xiedeacc/orgs","repos_url":"https://api.github.com/users/xiedeacc/repos","events_url":"https://api.github.com/users/xiedeacc/events{/privacy}","received_events_url":"https://api.github.com/users/xiedeacc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T15:08:09Z","updated_at":"2023-05-23T15:08:09Z","author_association":"NONE","body":"基本可以确定DynamicPartitionChannel，改完之后，目前没有发生死锁了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559634244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559673514","html_url":"https://github.com/apache/brpc/pull/2247#issuecomment-1559673514","issue_url":"https://api.github.com/repos/apache/brpc/issues/2247","id":1559673514,"node_id":"IC_kwDOBhmkcs5c9rqq","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T15:31:17Z","updated_at":"2023-05-23T15:31:17Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1559673514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1560683737","html_url":"https://github.com/apache/brpc/issues/1912#issuecomment-1560683737","issue_url":"https://api.github.com/repos/apache/brpc/issues/1912","id":1560683737,"node_id":"IC_kwDOBhmkcs5dBiTZ","user":{"login":"dream110fly","id":13797866,"node_id":"MDQ6VXNlcjEzNzk3ODY2","avatar_url":"https://avatars.githubusercontent.com/u/13797866?v=4","gravatar_id":"","url":"https://api.github.com/users/dream110fly","html_url":"https://github.com/dream110fly","followers_url":"https://api.github.com/users/dream110fly/followers","following_url":"https://api.github.com/users/dream110fly/following{/other_user}","gists_url":"https://api.github.com/users/dream110fly/gists{/gist_id}","starred_url":"https://api.github.com/users/dream110fly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dream110fly/subscriptions","organizations_url":"https://api.github.com/users/dream110fly/orgs","repos_url":"https://api.github.com/users/dream110fly/repos","events_url":"https://api.github.com/users/dream110fly/events{/privacy}","received_events_url":"https://api.github.com/users/dream110fly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T08:33:43Z","updated_at":"2023-05-24T08:33:43Z","author_association":"NONE","body":"@jiangdongzi  请问这个问题最终是怎么解决的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1560683737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562207169","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562207169","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562207169,"node_id":"IC_kwDOBhmkcs5dHWPB","user":{"login":"smbzhang","id":45502185,"node_id":"MDQ6VXNlcjQ1NTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/45502185?v=4","gravatar_id":"","url":"https://api.github.com/users/smbzhang","html_url":"https://github.com/smbzhang","followers_url":"https://api.github.com/users/smbzhang/followers","following_url":"https://api.github.com/users/smbzhang/following{/other_user}","gists_url":"https://api.github.com/users/smbzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/smbzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smbzhang/subscriptions","organizations_url":"https://api.github.com/users/smbzhang/orgs","repos_url":"https://api.github.com/users/smbzhang/repos","events_url":"https://api.github.com/users/smbzhang/events{/privacy}","received_events_url":"https://api.github.com/users/smbzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T03:32:36Z","updated_at":"2023-05-25T03:33:29Z","author_association":"CONTRIBUTOR","body":"> 这个 fix 只对 gcc 生效吗？其他编译器是否有试过\r\n\r\n![image](https://github.com/apache/brpc/assets/45502185/ea8905cc-0fec-4c40-82e5-7238d8485f2e)\r\n\r\n\r\n**clang也是生效的(clang14)**，这是没有加 noexcept(false)的clang堆栈 （**ps: llvm yyds！！！堆栈直接就在baidu::rpc::InputMessenger::InputMessageClosure::~InputMessageClosure  不像gcc那么隐晦**，哈哈）\r\n![image](https://github.com/apache/brpc/assets/45502185/64164d75-8450-41a3-9499-46aa7c8b088a)\r\n\r\n这是修复后的：\r\n![image](https://github.com/apache/brpc/assets/45502185/50dc1fcf-8a56-4b58-bf4b-41f4bec56269)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562207169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562209482","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562209482","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562209482,"node_id":"IC_kwDOBhmkcs5dHWzK","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T03:37:02Z","updated_at":"2023-05-25T03:37:02Z","author_association":"CONTRIBUTOR","body":"> 低版本的GCC82默认就是noexcept（false）的。\r\n\r\n那就是说低版本的编译器，堆栈是完整的，只有高版本编译器有这个问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562209482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562211644","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562211644","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562211644,"node_id":"IC_kwDOBhmkcs5dHXU8","user":{"login":"smbzhang","id":45502185,"node_id":"MDQ6VXNlcjQ1NTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/45502185?v=4","gravatar_id":"","url":"https://api.github.com/users/smbzhang","html_url":"https://github.com/smbzhang","followers_url":"https://api.github.com/users/smbzhang/followers","following_url":"https://api.github.com/users/smbzhang/following{/other_user}","gists_url":"https://api.github.com/users/smbzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/smbzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smbzhang/subscriptions","organizations_url":"https://api.github.com/users/smbzhang/orgs","repos_url":"https://api.github.com/users/smbzhang/repos","events_url":"https://api.github.com/users/smbzhang/events{/privacy}","received_events_url":"https://api.github.com/users/smbzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T03:40:25Z","updated_at":"2023-05-25T03:42:20Z","author_association":"CONTRIBUTOR","body":"> > 低版本的GCC82默认就是noexcept（false）的。\r\n> \r\n> 那就是说低版本的编译器，堆栈是完整的，只有高版本编译器有这个问题吗？\r\n\r\n应该是取决于编译器是否认为这个析构函数是noexcept的，如果编译器认为它是noexcept的，那么堆栈就会回溯到这个析构函数结束的地方，堆栈就不完整。  因为我是百度的同学，我们厂内只提供了 GCC82 GCC10 GCC12 CLANG10 CLANG14","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562211644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562216993","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562216993","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562216993,"node_id":"IC_kwDOBhmkcs5dHYoh","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T03:47:01Z","updated_at":"2023-05-25T03:47:01Z","author_association":"CONTRIBUTOR","body":"> > > 低版本的GCC82默认就是noexcept（false）的。\r\n> > \r\n> > \r\n> > 那就是说低版本的编译器，堆栈是完整的，只有高版本编译器有这个问题吗？\r\n> \r\n> 应该是取决于编译器是否认为这个析构函数是noexcept的，如果编译器认为它是noexcept的，那么堆栈就会回溯到这个析构函数结束的地方，堆栈就不完整。 因为我是百度的同学，我们厂内只提供了 GCC82 GCC10 GCC12 CLANG10 CLANG14\r\n\r\n哦哦 显式指定noexcept(false)，就可以抹平编译器之间的差异","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562216993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562238209","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562238209","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562238209,"node_id":"IC_kwDOBhmkcs5dHd0B","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T04:15:39Z","updated_at":"2023-05-25T04:16:05Z","author_association":"CONTRIBUTOR","body":"> > 这个 fix 只对 gcc 生效吗？其他编译器是否有试过\r\n> \r\n> ![image](https://user-images.githubusercontent.com/45502185/240793713-ea8905cc-0fec-4c40-82e5-7238d8485f2e.png)\r\n> \r\n> **clang也是生效的(clang14)**，这是没有加 noexcept(false)的clang堆栈 （**ps: llvm yyds！！！堆栈直接就在baidu::rpc::InputMessenger::InputMessageClosure::~InputMessageClosure 不像gcc那么隐晦**，哈哈） ![image](https://user-images.githubusercontent.com/45502185/240793453-64164d75-8450-41a3-9499-46aa7c8b088a.png)\r\n> \r\n> 这是修复后的： ![image](https://user-images.githubusercontent.com/45502185/240793644-50dc1fcf-8a56-4b58-bf4b-41f4bec56269.png)\r\n\r\n哈哈，这个实践太棒了，赞！\r\n之前关于 GCC 的堆栈，有一点不明白为什么会在 InputMessageClosure::~InputMessageClosure 的析构调用链上直接去调用了 _Unwind_Resume，就好像是 GCC 知道哪个是最终的叶子节点似的。\r\n\r\n因为按照我的理解，~InputMessageClosure 作为 landing pad，它本身这一层 frame 要么就全部完成退栈，要么就一点也不退栈，直接 std::terminate()（**关于这块，标准中如何规定的不太清楚**）。而，GCC 那个堆栈看起来就像是执行了一部分退栈，过程中，突然转去 _Unwind_Resume 了，令我百思不得其解。\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562238209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562245308","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562245308","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562245308,"node_id":"IC_kwDOBhmkcs5dHfi8","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T04:24:36Z","updated_at":"2023-05-25T08:22:23Z","author_association":"CONTRIBUTOR","body":"@smbzhang  欢迎加入开发者群，一起探讨 brpc 相关的问题。\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562245308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562354924","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1562354924","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1562354924,"node_id":"IC_kwDOBhmkcs5dH6Ts","user":{"login":"smbzhang","id":45502185,"node_id":"MDQ6VXNlcjQ1NTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/45502185?v=4","gravatar_id":"","url":"https://api.github.com/users/smbzhang","html_url":"https://github.com/smbzhang","followers_url":"https://api.github.com/users/smbzhang/followers","following_url":"https://api.github.com/users/smbzhang/following{/other_user}","gists_url":"https://api.github.com/users/smbzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/smbzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smbzhang/subscriptions","organizations_url":"https://api.github.com/users/smbzhang/orgs","repos_url":"https://api.github.com/users/smbzhang/repos","events_url":"https://api.github.com/users/smbzhang/events{/privacy}","received_events_url":"https://api.github.com/users/smbzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T06:33:19Z","updated_at":"2023-05-25T08:22:42Z","author_association":"CONTRIBUTOR","body":"> @smbzhang 欢迎加入开发者群，一起探讨 brpc 相关的问题。\r\n> \r\n\r\n\r\n我已经在群里了同学，  『里贝里晃倒梅西』","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562354924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562734266","html_url":"https://github.com/apache/brpc/pull/2215#issuecomment-1562734266","issue_url":"https://api.github.com/repos/apache/brpc/issues/2215","id":1562734266,"node_id":"IC_kwDOBhmkcs5dJW66","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T11:23:43Z","updated_at":"2023-05-25T11:23:43Z","author_association":"CONTRIBUTOR","body":"@wwbmmm @serverglen @chenBright 我现在对这个feature又有一点思考，想和你们沟通一下，现在UserCodeThreadWorker是一个pthread线程，和brpc的worker是分离的。我想如果UserCodeThreadWorker是一个ExecutionQueue的话其实是可以共用brpc worker的。然后不同方法配置不同数量的ExecutionQueue，也就实现了不同方法对brpc worker的分配。这样的好处是用户的代码还是bthread上下文。缺点是阻塞的系统调用会阻塞worker，但是本身这就是bthread的性质。想听听你们的意见。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562734266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562753543","html_url":"https://github.com/apache/brpc/pull/2215#issuecomment-1562753543","issue_url":"https://api.github.com/repos/apache/brpc/issues/2215","id":1562753543,"node_id":"IC_kwDOBhmkcs5dJboH","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T11:39:59Z","updated_at":"2023-05-25T11:39:59Z","author_association":"CONTRIBUTOR","body":"如果是pthread的话可以保证它肯定只执行UserCode的任务，但是如果是ExecutionQueue的话，有可能中间bthread切走了，被其它的bthread任务插入，那是不是还是解决不了隔离的问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562753543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562762813","html_url":"https://github.com/apache/brpc/pull/2215#issuecomment-1562762813","issue_url":"https://api.github.com/repos/apache/brpc/issues/2215","id":1562762813,"node_id":"IC_kwDOBhmkcs5dJd49","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T11:47:09Z","updated_at":"2023-05-26T06:24:22Z","author_association":"CONTRIBUTOR","body":"嗯，比如现在服务有3个方法，worker线程一共有10个，method1不配置线程池，method2配置2个 method3配置3个，这样能保证method2和method3最多能用5个，如果method1请求太多的话，method2和method3将少于5个。这个隔离确实不如pthread，没想好，先这样吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562762813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562795379","html_url":"https://github.com/apache/brpc/issues/2176#issuecomment-1562795379","issue_url":"https://api.github.com/repos/apache/brpc/issues/2176","id":1562795379,"node_id":"IC_kwDOBhmkcs5dJl1z","user":{"login":"Caibreeze0908","id":84967512,"node_id":"MDQ6VXNlcjg0OTY3NTEy","avatar_url":"https://avatars.githubusercontent.com/u/84967512?v=4","gravatar_id":"","url":"https://api.github.com/users/Caibreeze0908","html_url":"https://github.com/Caibreeze0908","followers_url":"https://api.github.com/users/Caibreeze0908/followers","following_url":"https://api.github.com/users/Caibreeze0908/following{/other_user}","gists_url":"https://api.github.com/users/Caibreeze0908/gists{/gist_id}","starred_url":"https://api.github.com/users/Caibreeze0908/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Caibreeze0908/subscriptions","organizations_url":"https://api.github.com/users/Caibreeze0908/orgs","repos_url":"https://api.github.com/users/Caibreeze0908/repos","events_url":"https://api.github.com/users/Caibreeze0908/events{/privacy}","received_events_url":"https://api.github.com/users/Caibreeze0908/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T12:10:00Z","updated_at":"2023-05-25T12:10:00Z","author_association":"NONE","body":"You need to turn keepalive off","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1562795379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1563944356","html_url":"https://github.com/apache/brpc/issues/2198#issuecomment-1563944356","issue_url":"https://api.github.com/repos/apache/brpc/issues/2198","id":1563944356,"node_id":"IC_kwDOBhmkcs5dN-Wk","user":{"login":"xinyiZzz","id":13197424,"node_id":"MDQ6VXNlcjEzMTk3NDI0","avatar_url":"https://avatars.githubusercontent.com/u/13197424?v=4","gravatar_id":"","url":"https://api.github.com/users/xinyiZzz","html_url":"https://github.com/xinyiZzz","followers_url":"https://api.github.com/users/xinyiZzz/followers","following_url":"https://api.github.com/users/xinyiZzz/following{/other_user}","gists_url":"https://api.github.com/users/xinyiZzz/gists{/gist_id}","starred_url":"https://api.github.com/users/xinyiZzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinyiZzz/subscriptions","organizations_url":"https://api.github.com/users/xinyiZzz/orgs","repos_url":"https://api.github.com/users/xinyiZzz/repos","events_url":"https://api.github.com/users/xinyiZzz/events{/privacy}","received_events_url":"https://api.github.com/users/xinyiZzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T07:37:18Z","updated_at":"2023-05-26T07:37:18Z","author_association":"NONE","body":"Nothing to do with UBSAN, this problem occurs again, still don't know why","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1563944356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564438414","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1564438414","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1564438414,"node_id":"IC_kwDOBhmkcs5dP2-O","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T13:59:36Z","updated_at":"2023-05-26T13:59:36Z","author_association":"CONTRIBUTOR","body":"@smbzhang 服务端支持progressive reader的话，好像会走这个分支。\r\nhttps://github.com/apache/brpc/blob/72ed304311ffec746f85bc80d9fd3e0a7938756f/src/brpc/input_messenger.cpp#L317-L322\r\n这时候这个fix会生效吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564438414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564968843","html_url":"https://github.com/apache/brpc/pull/2137#issuecomment-1564968843","issue_url":"https://api.github.com/repos/apache/brpc/issues/2137","id":1564968843,"node_id":"IC_kwDOBhmkcs5dR4eL","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T21:20:41Z","updated_at":"2023-05-26T21:20:41Z","author_association":"CONTRIBUTOR","body":"这个能支持按照不同请求类型，或者根据请求里面的一些信息做拦截策略吗？如果支持，可能让用户基于此可以用来定义一个qos算法。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564968843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564971642","html_url":"https://github.com/apache/brpc/pull/2137#issuecomment-1564971642","issue_url":"https://api.github.com/repos/apache/brpc/issues/2137","id":1564971642,"node_id":"IC_kwDOBhmkcs5dR5J6","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T21:23:29Z","updated_at":"2023-05-26T21:23:29Z","author_association":"CONTRIBUTOR","body":"也许controller里面加上request指针就可以做到。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1564971642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565255835","html_url":"https://github.com/apache/brpc/pull/2137#issuecomment-1565255835","issue_url":"https://api.github.com/repos/apache/brpc/issues/2137","id":1565255835,"node_id":"IC_kwDOBhmkcs5dS-ib","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T07:46:57Z","updated_at":"2023-05-27T07:46:57Z","author_association":"CONTRIBUTOR","body":"> 这个能支持按照不同请求类型，或者根据请求里面的一些信息做拦截策略吗？如果支持，可能让用户基于此可以用来定义一个qos算法。\r\n\r\nController::method()应该可以用来区分请求类型吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565255835/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565850183","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1565850183","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1565850183,"node_id":"IC_kwDOBhmkcs5dVPpH","user":{"login":"smbzhang","id":45502185,"node_id":"MDQ6VXNlcjQ1NTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/45502185?v=4","gravatar_id":"","url":"https://api.github.com/users/smbzhang","html_url":"https://github.com/smbzhang","followers_url":"https://api.github.com/users/smbzhang/followers","following_url":"https://api.github.com/users/smbzhang/following{/other_user}","gists_url":"https://api.github.com/users/smbzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/smbzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smbzhang/subscriptions","organizations_url":"https://api.github.com/users/smbzhang/orgs","repos_url":"https://api.github.com/users/smbzhang/repos","events_url":"https://api.github.com/users/smbzhang/events{/privacy}","received_events_url":"https://api.github.com/users/smbzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T03:51:42Z","updated_at":"2023-05-28T05:57:57Z","author_association":"CONTRIBUTOR","body":"> @smbzhang 服务端支持progressive reader的话，好像会走这个分支。\r\n> \r\n> https://github.com/apache/brpc/blob/72ed304311ffec746f85bc80d9fd3e0a7938756f/src/brpc/input_messenger.cpp#L317-L322\r\n> \r\n> \r\n> 这时候这个fix会生效吗？\r\n\r\n我没用过服务端progressive功能，只用过客户端读取http chunked消息的功能。所以这块不太熟悉没法给你构造一个demo。 不过我看brpc逻辑是把消息放到另外的bthread中处理去了，传递的msg也是原生指针。没有通过析构last_msg来处理http消息(调起callmethod)，所以这种情况应该不属于我这个case，整个新的bthread调用栈上没有通过析构函数调起Echo函数，也就不会出现栈缺失了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565850183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565889048","html_url":"https://github.com/apache/brpc/issues/2182#issuecomment-1565889048","issue_url":"https://api.github.com/repos/apache/brpc/issues/2182","id":1565889048,"node_id":"IC_kwDOBhmkcs5dVZIY","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T05:07:12Z","updated_at":"2023-05-28T05:07:12Z","author_association":"CONTRIBUTOR","body":"使用一个可拷贝的类，包含LongIntTask的shared_ptr，是不是可以解决这个问题？\r\n```c++\r\nstruct TaskItem {\r\n    std::shared_ptr<LongIntTask> long_int_task;\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565889048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565971504","html_url":"https://github.com/apache/brpc/pull/2256#issuecomment-1565971504","issue_url":"https://api.github.com/repos/apache/brpc/issues/2256","id":1565971504,"node_id":"IC_kwDOBhmkcs5dVtQw","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T07:47:42Z","updated_at":"2023-05-28T07:47:42Z","author_association":"CONTRIBUTOR","body":"> > @smbzhang 服务端支持progressive reader的话，好像会走这个分支。\r\n> > https://github.com/apache/brpc/blob/72ed304311ffec746f85bc80d9fd3e0a7938756f/src/brpc/input_messenger.cpp#L317-L322\r\n> > \r\n> > 这时候这个fix会生效吗？\r\n> \r\n> 我没用过服务端progressive功能，只用过客户端读取http chunked消息的功能。所以这块不太熟悉没法给你构造一个demo。 不过我看brpc逻辑是把消息放到另外的bthread中处理去了，传递的msg也是原生指针。没有通过析构last_msg来处理http消息(调起callmethod)，所以这种情况应该不属于我这个case，整个新的bthread调用栈上没有通过析构函数调起Echo函数，也就不会出现栈缺失了\r\n\r\nhttps://github.com/apache/brpc/blob/72ed304311ffec746f85bc80d9fd3e0a7938756f/src/brpc/input_messenger.cpp#L283-L285\r\n一次OnNewMessages解出多个协议包，只有最后一个包才通过InputMessageClosure的析构函数调起Echo函数，其他包都是通过 QueueMessage起协程调起Echo函数。\r\n\r\n我验证了一下，如你所说，`整个新的bthread调用栈上没有通过析构函数调起Echo函数，也就不会出现栈缺失了`。\r\n\r\n学习了，感谢 @smbzhang ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1565971504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566369060","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1566369060","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1566369060,"node_id":"IC_kwDOBhmkcs5dXOUk","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T01:41:19Z","updated_at":"2023-05-29T01:41:19Z","author_association":"CONTRIBUTOR","body":"用的是什么样的业务？是example么？怎样的测试？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566369060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566402287","html_url":"https://github.com/apache/brpc/issues/2227#issuecomment-1566402287","issue_url":"https://api.github.com/repos/apache/brpc/issues/2227","id":1566402287,"node_id":"IC_kwDOBhmkcs5dXWbv","user":{"login":"Zhihan-Lu","id":28688532,"node_id":"MDQ6VXNlcjI4Njg4NTMy","avatar_url":"https://avatars.githubusercontent.com/u/28688532?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhihan-Lu","html_url":"https://github.com/Zhihan-Lu","followers_url":"https://api.github.com/users/Zhihan-Lu/followers","following_url":"https://api.github.com/users/Zhihan-Lu/following{/other_user}","gists_url":"https://api.github.com/users/Zhihan-Lu/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhihan-Lu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhihan-Lu/subscriptions","organizations_url":"https://api.github.com/users/Zhihan-Lu/orgs","repos_url":"https://api.github.com/users/Zhihan-Lu/repos","events_url":"https://api.github.com/users/Zhihan-Lu/events{/privacy}","received_events_url":"https://api.github.com/users/Zhihan-Lu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T02:21:08Z","updated_at":"2023-05-29T02:21:08Z","author_association":"NONE","body":"请问这个问题后来是如何修复的？我们也遇到了类似的情况。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566402287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566611482","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1566611482","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1566611482,"node_id":"IC_kwDOBhmkcs5dYJga","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T06:17:01Z","updated_at":"2023-05-29T06:17:01Z","author_association":"CONTRIBUTOR","body":"不是example，场景是一个分布式训练任务，打开RDMA开关后会出现。有没有啥辅助日志可以帮助排查的，类似TF VLOG那种？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566611482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566637543","html_url":"https://github.com/apache/brpc/issues/2182#issuecomment-1566637543","issue_url":"https://api.github.com/repos/apache/brpc/issues/2182","id":1566637543,"node_id":"IC_kwDOBhmkcs5dYP3n","user":{"login":"qiuhuiming","id":47179776,"node_id":"MDQ6VXNlcjQ3MTc5Nzc2","avatar_url":"https://avatars.githubusercontent.com/u/47179776?v=4","gravatar_id":"","url":"https://api.github.com/users/qiuhuiming","html_url":"https://github.com/qiuhuiming","followers_url":"https://api.github.com/users/qiuhuiming/followers","following_url":"https://api.github.com/users/qiuhuiming/following{/other_user}","gists_url":"https://api.github.com/users/qiuhuiming/gists{/gist_id}","starred_url":"https://api.github.com/users/qiuhuiming/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiuhuiming/subscriptions","organizations_url":"https://api.github.com/users/qiuhuiming/orgs","repos_url":"https://api.github.com/users/qiuhuiming/repos","events_url":"https://api.github.com/users/qiuhuiming/events{/privacy}","received_events_url":"https://api.github.com/users/qiuhuiming/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T06:44:09Z","updated_at":"2023-05-29T06:44:09Z","author_association":"NONE","body":"这样可以解决，但是感觉会引入额外的包装类，并且对于一些明显需要移动的结构，语义上感觉不太合适。以后是否有计划支持这个呢，或者之后我可以写个PR吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566637543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566647971","html_url":"https://github.com/apache/brpc/issues/2182#issuecomment-1566647971","issue_url":"https://api.github.com/repos/apache/brpc/issues/2182","id":1566647971,"node_id":"IC_kwDOBhmkcs5dYSaj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T06:56:45Z","updated_at":"2023-05-29T06:56:45Z","author_association":"CONTRIBUTOR","body":"欢迎提PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566647971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566818107","html_url":"https://github.com/apache/brpc/pull/2210#issuecomment-1566818107","issue_url":"https://api.github.com/repos/apache/brpc/issues/2210","id":1566818107,"node_id":"IC_kwDOBhmkcs5dY787","user":{"login":"TangSiyang2001","id":82279870,"node_id":"MDQ6VXNlcjgyMjc5ODcw","avatar_url":"https://avatars.githubusercontent.com/u/82279870?v=4","gravatar_id":"","url":"https://api.github.com/users/TangSiyang2001","html_url":"https://github.com/TangSiyang2001","followers_url":"https://api.github.com/users/TangSiyang2001/followers","following_url":"https://api.github.com/users/TangSiyang2001/following{/other_user}","gists_url":"https://api.github.com/users/TangSiyang2001/gists{/gist_id}","starred_url":"https://api.github.com/users/TangSiyang2001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangSiyang2001/subscriptions","organizations_url":"https://api.github.com/users/TangSiyang2001/orgs","repos_url":"https://api.github.com/users/TangSiyang2001/repos","events_url":"https://api.github.com/users/TangSiyang2001/events{/privacy}","received_events_url":"https://api.github.com/users/TangSiyang2001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T09:16:29Z","updated_at":"2023-05-29T09:20:09Z","author_association":"CONTRIBUTOR","body":"> LGTM\r\n\r\n@wwbmmm Could this pr be merged plz?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566818107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566963793","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1566963793","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1566963793,"node_id":"IC_kwDOBhmkcs5dZfhR","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T10:54:29Z","updated_at":"2023-05-29T10:54:29Z","author_association":"CONTRIBUTOR","body":"这类错误可能是多个线程同时访问一个IOBuf导致的。先禁掉zero copy看看是否还必现？rdma_recv_zerocopy=false（禁用接收端zerocopy），rdma_zerocopy_min_size=[比较大的值]（禁用发送端zerocopy）。先确认下是rpc内部竞争了，还是rpc和上面的应用之间竞争了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1566963793/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1567773819","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1567773819","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1567773819,"node_id":"IC_kwDOBhmkcs5dclR7","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T05:26:08Z","updated_at":"2023-05-30T05:26:08Z","author_association":"CONTRIBUTOR","body":"设置了`rdma_recv_zerocopy=false`, `rdma_zerocopy_min_size=1073741824`. 还是会出现异常\r\n服务端：\r\n```\r\nW0530 12:26:38.156749   812 external/brpc/src/brpc/input_messenger.cpp:240] Close Socket{id=678 fd=1331 addr=10.156.8.33:51496:19269} (0x562e43640000) due to unknown message: 7\\D80\\B5\\B6\\B6\\E0\\B8\\B5k\\8A\\AE7H\\CF\\B27\\F1\\7F\\947\\92\\E8\\0F\\B6\\D1\\A1\\816\\85j%\\B7V\\D6\\BF7\\C6\\C0T\\B7\\9EP\\80\\B7`h\\033\\A5\\BF68lG\\F76\\9E^\\877\\F5\\B2w...<skipping 7205 bytes>\r\n```\r\n客户端：\r\n```\r\n[E1014]Got EOF of Socket{id=12 fd=1354 addr=10.156.8.33:12455:33556}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1567773819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568147420","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568147420","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568147420,"node_id":"IC_kwDOBhmkcs5deAfc","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T09:58:31Z","updated_at":"2023-05-30T09:58:31Z","author_association":"CONTRIBUTOR","body":"是每次报错都来自server端吗？能否提供更多的复现方法或者问题触发时的特征？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568147420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568199366","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568199366","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568199366,"node_id":"IC_kwDOBhmkcs5deNLG","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T10:36:28Z","updated_at":"2023-05-30T10:36:28Z","author_association":"CONTRIBUTOR","body":"每次都是Server端先报错：`Close socket...`，客户端此时会出现成片的RPC 失败。我在客户端增加了重试逻辑，RPC是可以成功的，但是重试前发生了啥？有没有副作用？ 我还在确认中。\r\n\r\n在使用TCP时，没有出现过类似报错","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568199366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568229999","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1568229999","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1568229999,"node_id":"IC_kwDOBhmkcs5deUpv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T11:01:26Z","updated_at":"2023-05-30T11:01:26Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/blob/master/src/bthread/mutex.cpp#L818\r\n注释掉这两个函数试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568229999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568246013","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568246013","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568246013,"node_id":"IC_kwDOBhmkcs5deYj9","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T11:12:30Z","updated_at":"2023-05-30T11:12:30Z","author_association":"CONTRIBUTOR","body":"> 客户端此时会出现成片的RPC 失败\r\n\r\n是一个客户端的多个RPC失败，还是多个客户端的RPC失败？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568246013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568250760","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568250760","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568250760,"node_id":"IC_kwDOBhmkcs5deZuI","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T11:16:11Z","updated_at":"2023-05-30T11:16:11Z","author_association":"CONTRIBUTOR","body":"前者，一个客户端的多个RPC失败","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568250760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568268006","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568268006","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568268006,"node_id":"IC_kwDOBhmkcs5ded7m","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T11:27:54Z","updated_at":"2023-05-30T11:27:54Z","author_association":"CONTRIBUTOR","body":"> rdma_recv_zerocopy=false（禁用接收端zerocopy），rdma_zerocopy_min_size=[比较大的值]（禁用发送端zerocopy）\r\n\r\n抱歉，我刚查了一下代码，上面这个说法有问题。rdma_zerocopy_min_size=[比较大的值]禁用的仍然是接收端zerocopy。发送端zerocopy暂时没法通过Flag禁用。我去做个版本，支持下关闭发送端zerocopy你再试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568268006/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568345642","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1568345642","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1568345642,"node_id":"IC_kwDOBhmkcs5dew4q","user":{"login":"tangtang5156","id":9522343,"node_id":"MDQ6VXNlcjk1MjIzNDM=","avatar_url":"https://avatars.githubusercontent.com/u/9522343?v=4","gravatar_id":"","url":"https://api.github.com/users/tangtang5156","html_url":"https://github.com/tangtang5156","followers_url":"https://api.github.com/users/tangtang5156/followers","following_url":"https://api.github.com/users/tangtang5156/following{/other_user}","gists_url":"https://api.github.com/users/tangtang5156/gists{/gist_id}","starred_url":"https://api.github.com/users/tangtang5156/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangtang5156/subscriptions","organizations_url":"https://api.github.com/users/tangtang5156/orgs","repos_url":"https://api.github.com/users/tangtang5156/repos","events_url":"https://api.github.com/users/tangtang5156/events{/privacy}","received_events_url":"https://api.github.com/users/tangtang5156/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T12:26:50Z","updated_at":"2023-05-31T01:42:54Z","author_association":"NONE","body":"> https://github.com/apache/brpc/blob/master/src/bthread/mutex.cpp#L818 注释掉这两个函数试试\r\n\r\n您好，我已注释掉这两个函数，如图：\r\n![image](https://github.com/apache/brpc/assets/9522343/250492d7-ae3b-4a9d-a11c-8f89413faa30)\r\n清空build目录后，重新执行cmake -DBUILD_SHARED_LIBS=1 -DBUILD_STATIC_LIBS=1 -B build && cmake --build build -j6 编译出了新的libbrpc.so & libbrpc.a，将其拷贝到系统目录后重新执行可执行文件，仍然报错：\r\nsymbol lookup error: /usr/local/lib/libbrpc.so: undefined symbol: pthread_mutex_lock\r\n![image](https://github.com/apache/brpc/assets/9522343/7fe18174-50af-44ab-8ed8-30911e0ca3f4)\r\n另外附上nm截图，注释前：\r\n<img width=\"523\" alt=\"1685496538162_AF094A68-16BA-4f4d-88DD-08CA7E0906B4\" src=\"https://github.com/apache/brpc/assets/9522343/b97ed90f-3edd-4e38-8442-c3272dfcfc5e\">\r\n注释掉指定方法后：\r\n![image](https://github.com/apache/brpc/assets/9522343/ef3d63fa-3c5f-47e3-aad1-234fedec0daf)\r\n\r\n辛苦再帮忙看下，非常感谢！\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568345642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568526863","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1568526863","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1568526863,"node_id":"IC_kwDOBhmkcs5dfdIP","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T14:22:34Z","updated_at":"2023-05-30T14:22:34Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/pull/2267\r\n可以试下这个PR。\r\n\r\n这种IOBuf数据问题debug确实有些困难。如果打log数据量太大了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1568526863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569379566","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1569379566","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1569379566,"node_id":"IC_kwDOBhmkcs5ditTu","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T02:00:31Z","updated_at":"2023-05-31T02:00:31Z","author_association":"CONTRIBUTOR","body":"再注释掉这个全局变量试试\r\nhttps://github.com/apache/brpc/blob/master/src/bthread/mutex.cpp#L428","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569379566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569455956","html_url":"https://github.com/apache/brpc/issues/2268#issuecomment-1569455956","issue_url":"https://api.github.com/repos/apache/brpc/issues/2268","id":1569455956,"node_id":"IC_kwDOBhmkcs5di_9U","user":{"login":"athree","id":10734542,"node_id":"MDQ6VXNlcjEwNzM0NTQy","avatar_url":"https://avatars.githubusercontent.com/u/10734542?v=4","gravatar_id":"","url":"https://api.github.com/users/athree","html_url":"https://github.com/athree","followers_url":"https://api.github.com/users/athree/followers","following_url":"https://api.github.com/users/athree/following{/other_user}","gists_url":"https://api.github.com/users/athree/gists{/gist_id}","starred_url":"https://api.github.com/users/athree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athree/subscriptions","organizations_url":"https://api.github.com/users/athree/orgs","repos_url":"https://api.github.com/users/athree/repos","events_url":"https://api.github.com/users/athree/events{/privacy}","received_events_url":"https://api.github.com/users/athree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T03:51:22Z","updated_at":"2023-05-31T03:51:22Z","author_association":"NONE","body":"感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569455956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569472886","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1569472886","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1569472886,"node_id":"IC_kwDOBhmkcs5djEF2","user":{"login":"tangtang5156","id":9522343,"node_id":"MDQ6VXNlcjk1MjIzNDM=","avatar_url":"https://avatars.githubusercontent.com/u/9522343?v=4","gravatar_id":"","url":"https://api.github.com/users/tangtang5156","html_url":"https://github.com/tangtang5156","followers_url":"https://api.github.com/users/tangtang5156/followers","following_url":"https://api.github.com/users/tangtang5156/following{/other_user}","gists_url":"https://api.github.com/users/tangtang5156/gists{/gist_id}","starred_url":"https://api.github.com/users/tangtang5156/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangtang5156/subscriptions","organizations_url":"https://api.github.com/users/tangtang5156/orgs","repos_url":"https://api.github.com/users/tangtang5156/repos","events_url":"https://api.github.com/users/tangtang5156/events{/privacy}","received_events_url":"https://api.github.com/users/tangtang5156/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T04:18:22Z","updated_at":"2023-05-31T04:19:25Z","author_association":"NONE","body":"> 再注释掉这个全局变量试试 https://github.com/apache/brpc/blob/master/src/bthread/mutex.cpp#L428\r\n\r\n您好，在之前回复的去除pthread_mutex_lock和pthread_mutex_unlock的基础上我又注释掉了上述的全局变量，具体如下：\r\n![image](https://github.com/apache/brpc/assets/9522343/7d650e76-4891-4662-8452-8d19b51a7194)\r\n\r\n注释掉之后运行主函数没有再报错了。\r\n但是因为毕竟去除了一部分brpc的代码，担心会影响后续的其他使用。所以再请教下，这部分代码注释掉之后的具体影响是什么哪？比如会导致哪些功能不可用，或者是在什么场景下可能会有问题？\r\n辛苦回复，感谢！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569472886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569518541","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1569518541","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1569518541,"node_id":"IC_kwDOBhmkcs5djPPN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T05:26:34Z","updated_at":"2023-05-31T05:26:34Z","author_association":"CONTRIBUTOR","body":"会导致内置服务中的contention profiler不可用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569518541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569668750","html_url":"https://github.com/apache/brpc/issues/2266#issuecomment-1569668750","issue_url":"https://api.github.com/repos/apache/brpc/issues/2266","id":1569668750,"node_id":"IC_kwDOBhmkcs5djz6O","user":{"login":"tangtang5156","id":9522343,"node_id":"MDQ6VXNlcjk1MjIzNDM=","avatar_url":"https://avatars.githubusercontent.com/u/9522343?v=4","gravatar_id":"","url":"https://api.github.com/users/tangtang5156","html_url":"https://github.com/tangtang5156","followers_url":"https://api.github.com/users/tangtang5156/followers","following_url":"https://api.github.com/users/tangtang5156/following{/other_user}","gists_url":"https://api.github.com/users/tangtang5156/gists{/gist_id}","starred_url":"https://api.github.com/users/tangtang5156/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangtang5156/subscriptions","organizations_url":"https://api.github.com/users/tangtang5156/orgs","repos_url":"https://api.github.com/users/tangtang5156/repos","events_url":"https://api.github.com/users/tangtang5156/events{/privacy}","received_events_url":"https://api.github.com/users/tangtang5156/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T07:46:46Z","updated_at":"2023-05-31T07:47:10Z","author_association":"NONE","body":"> 会导致内置服务中的contention profiler不可用\r\n\r\n了解了。那我们暂不开启这个功能，先用去除掉这部分代码的brpc调试。\r\n另外麻烦再问下，上述问题是否有可能通过其他用户端的代码改造或者是配置改造的方式来规避？\r\n辛苦回复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569668750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569944639","html_url":"https://github.com/apache/brpc/pull/2267#issuecomment-1569944639","issue_url":"https://api.github.com/repos/apache/brpc/issues/2267","id":1569944639,"node_id":"IC_kwDOBhmkcs5dk3Q_","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T10:39:04Z","updated_at":"2023-05-31T10:39:04Z","author_association":"CONTRIBUTOR","body":"请问什么情况下需要zero copy，什么情况下不能做zero copy呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1569944639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1570005434","html_url":"https://github.com/apache/brpc/pull/2267#issuecomment-1570005434","issue_url":"https://api.github.com/repos/apache/brpc/issues/2267","id":1570005434,"node_id":"IC_kwDOBhmkcs5dlGG6","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T11:21:50Z","updated_at":"2023-05-31T11:21:50Z","author_association":"CONTRIBUTOR","body":"理论上都应该做zero copy。关闭zery copy主要用来做debug。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1570005434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1570044481","html_url":"https://github.com/apache/brpc/pull/2267#issuecomment-1570044481","issue_url":"https://api.github.com/repos/apache/brpc/issues/2267","id":1570044481,"node_id":"IC_kwDOBhmkcs5dlPpB","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T11:49:46Z","updated_at":"2023-05-31T11:49:46Z","author_association":"CONTRIBUTOR","body":"ok","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1570044481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571297482","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571297482","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571297482,"node_id":"IC_kwDOBhmkcs5dqBjK","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T03:54:44Z","updated_at":"2023-06-01T03:54:44Z","author_association":"CONTRIBUTOR","body":"#2267 有个typo需要fix一下，pipeline没有define `BRPC_WITH_RDMA=true`， 检查不出来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571297482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571302159","html_url":"https://github.com/apache/brpc/issues/2269#issuecomment-1571302159","issue_url":"https://api.github.com/repos/apache/brpc/issues/2269","id":1571302159,"node_id":"IC_kwDOBhmkcs5dqCsP","user":{"login":"muziandmuzi","id":38377819,"node_id":"MDQ6VXNlcjM4Mzc3ODE5","avatar_url":"https://avatars.githubusercontent.com/u/38377819?v=4","gravatar_id":"","url":"https://api.github.com/users/muziandmuzi","html_url":"https://github.com/muziandmuzi","followers_url":"https://api.github.com/users/muziandmuzi/followers","following_url":"https://api.github.com/users/muziandmuzi/following{/other_user}","gists_url":"https://api.github.com/users/muziandmuzi/gists{/gist_id}","starred_url":"https://api.github.com/users/muziandmuzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muziandmuzi/subscriptions","organizations_url":"https://api.github.com/users/muziandmuzi/orgs","repos_url":"https://api.github.com/users/muziandmuzi/repos","events_url":"https://api.github.com/users/muziandmuzi/events{/privacy}","received_events_url":"https://api.github.com/users/muziandmuzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T04:01:15Z","updated_at":"2023-06-01T04:01:15Z","author_association":"NONE","body":"protobuf server 和 thrift server只启动一个的时候，均可以正常访问 /vars/*","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571302159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571307120","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571307120","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571307120,"node_id":"IC_kwDOBhmkcs5dqD5w","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T04:08:54Z","updated_at":"2023-06-01T04:08:54Z","author_association":"CONTRIBUTOR","body":"禁用send_zerocopy之后，\r\n```\r\nW0601 12:06:39.288266 18290 external/brpc/src/brpc/rdma/rdma_endpoint.cpp:1412] Fail to handle RDMA completion, error status(4): Socket{id=8589934594 fd=1337 addr=127.0.0.1:1234:24360} (0x0x5640308974c0): Resource temporarily unavailable\r\n2023-06-01 12:06:39.288390: W ./tensorswitch/client/handle_base.h:119] Method:[Ping] Fail to get response from shard#0 [E3001]RDMA completion error(4) from Socket{id=8589934594 fd=1337 addr=127.0.0.1:1234:24360} (0x0x5640308974c0): RDMA verbs error, retry#9 request:\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571307120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571395126","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571395126","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571395126,"node_id":"IC_kwDOBhmkcs5dqZY2","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T05:50:54Z","updated_at":"2023-06-01T05:50:54Z","author_association":"CONTRIBUTOR","body":"你使用的rdma相关的flag都有哪些？能否贴一下看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571395126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571400116","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571400116","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571400116,"node_id":"IC_kwDOBhmkcs5dqam0","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T05:56:51Z","updated_at":"2023-06-01T05:56:51Z","author_association":"CONTRIBUTOR","body":"```\r\nrdma_recv_zerocopy=true\r\nrdma_zerocopy_min_size=512\r\nrdma_send_zerocopy=false\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571400116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571416019","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571416019","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571416019,"node_id":"IC_kwDOBhmkcs5dqefT","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T06:11:05Z","updated_at":"2023-06-01T06:11:05Z","author_association":"CONTRIBUTOR","body":"其他的flag有设置吧？block size什么的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571416019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571416683","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571416683","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571416683,"node_id":"IC_kwDOBhmkcs5dqepr","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T06:11:51Z","updated_at":"2023-06-01T07:51:04Z","author_association":"CONTRIBUTOR","body":"没有，~发现同时禁用send/recv zerocopy可以跑了，不能单独禁用send_zerocopy~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571416683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571450867","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1571450867","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1571450867,"node_id":"IC_kwDOBhmkcs5dqm_z","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T06:42:34Z","updated_at":"2023-06-01T06:42:34Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n多节点运行还是不行\r\n```\r\n Fail to handle RDMA completion, error status(4): Socket{id=32 fd=1334 addr=10.156.1.16:24615:18398} (0x0x5637deabe800): Resource temporarily unavailable\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1571450867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572024322","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1572024322","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1572024322,"node_id":"IC_kwDOBhmkcs5dszAC","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T13:08:15Z","updated_at":"2023-06-01T13:08:15Z","author_association":"CONTRIBUTOR","body":"程序里面是否有调用RegisterMemoryForRdma专门注册其他内存？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572024322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572087038","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1572087038","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1572087038,"node_id":"IC_kwDOBhmkcs5dtCT-","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T13:47:22Z","updated_at":"2023-06-01T13:47:22Z","author_association":"CONTRIBUTOR","body":"有的，关闭zerocopy之后，不能再调用RegisterMemoryForRdma？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572087038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572163027","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1572163027","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1572163027,"node_id":"IC_kwDOBhmkcs5dtU3T","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T14:28:04Z","updated_at":"2023-06-01T14:28:04Z","author_association":"CONTRIBUTOR","body":"那就是程序内有使用append_user_data直接使用了外部的内存，并且做了单独的注册对吧？不过你这个错误我目前还没在本地复现出来。还有别的线索吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572163027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572180319","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1572180319","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1572180319,"node_id":"IC_kwDOBhmkcs5dtZFf","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T14:38:23Z","updated_at":"2023-06-01T14:38:23Z","author_association":"CONTRIBUTOR","body":"> 那就是程序内有使用append_user_data直接使用了外部的内存，并且做了单独的注册对吧？不过你这个错误我目前还没在本地复现出来。还有别的线索吗\r\n\r\n是的，区别只是rdma_send/recv_zerocopy传false，传true能跑，传false不能","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1572180319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573179586","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573179586","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573179586,"node_id":"IC_kwDOBhmkcs5dxNDC","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T05:36:16Z","updated_at":"2023-06-02T05:36:16Z","author_association":"CONTRIBUTOR","body":"我目前仍然无法本地复现这样的问题。你们的程序里是否主动调用了ibverbs的发送？这个错误显示的是发送的数据没有在被注册的Memory Region内。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573179586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573185536","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573185536","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573185536,"node_id":"IC_kwDOBhmkcs5dxOgA","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T05:44:12Z","updated_at":"2023-06-02T05:44:12Z","author_association":"CONTRIBUTOR","body":"> 我目前仍然无法本地复现这样的问题。你们的程序里是否主动调用了ibverbs的发送？这个错误显示的是发送的数据没有在被注册的Memory Region内。\r\n\r\n有获取`brpc::rdma::GetRdmaPd`, 接着调用`ibv_reg_mr`，没有主动调用ibv send/recv相关 API","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573185536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573191727","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573191727","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573191727,"node_id":"IC_kwDOBhmkcs5dxQAv","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T05:52:36Z","updated_at":"2023-06-02T05:52:36Z","author_association":"CONTRIBUTOR","body":"如果是裸调ibv_reg_mr的，注册下来的mkey是通过append_user_data_with_meta传进去的是吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573191727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573194181","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573194181","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573194181,"node_id":"IC_kwDOBhmkcs5dxQnF","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T05:56:15Z","updated_at":"2023-06-02T05:56:15Z","author_association":"CONTRIBUTOR","body":"是的，不然禁用zerocopy之前，也跑不起来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573194181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573302248","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573302248","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573302248,"node_id":"IC_kwDOBhmkcs5dxq_o","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T07:45:35Z","updated_at":"2023-06-02T07:45:35Z","author_association":"CONTRIBUTOR","body":"应该是没commit全。再试试呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573302248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573313057","html_url":"https://github.com/apache/brpc/pull/2215#issuecomment-1573313057","issue_url":"https://api.github.com/repos/apache/brpc/issues/2215","id":1573313057,"node_id":"IC_kwDOBhmkcs5dxtoh","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T07:55:22Z","updated_at":"2023-06-02T07:55:22Z","author_association":"CONTRIBUTOR","body":"这块后边最好实现一个无锁队列，性能应该更好些。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573313057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573318452","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1573318452","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1573318452,"node_id":"IC_kwDOBhmkcs5dxu80","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T07:59:51Z","updated_at":"2023-06-02T07:59:51Z","author_association":"CONTRIBUTOR","body":"关闭这个对监控指标会有啥问题吗？\r\n比如，curl http://xxx:port/vars","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573318452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573343894","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573343894","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573343894,"node_id":"IC_kwDOBhmkcs5dx1KW","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T08:18:24Z","updated_at":"2023-06-02T08:18:24Z","author_association":"CONTRIBUTOR","body":"这一段修改，是之前的BUG吗？\r\n![image](https://github.com/apache/brpc/assets/1251167/0e171da4-f64a-4e92-9345-c045e24e48d2)\r\n\r\nhttps://github.com/apache/brpc/compare/726ee5435c24051ccc222e79b8b666e94e8d3c1f..9f7bce0ac70d4b0a6ec59da86718f25f376fe240#diff-8c54e550b0ba300eb91080953476b316b014020ac1916d26ecdd5e6fb3d4aee6L645-L652","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573343894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573363233","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573363233","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573363233,"node_id":"IC_kwDOBhmkcs5dx54h","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T08:33:47Z","updated_at":"2023-06-02T08:33:47Z","author_association":"CONTRIBUTOR","body":"和之前的问题没有关系。是禁用zero_copy的时候复用了这个函数。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573363233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573416956","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573416956","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573416956,"node_id":"IC_kwDOBhmkcs5dyG_8","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T09:15:22Z","updated_at":"2023-06-02T09:15:22Z","author_association":"CONTRIBUTOR","body":"> 和之前的问题没有关系。是禁用zero_copy的时候复用了这个函数。\r\n\r\n上面那个不改，master分支有问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573416956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573443798","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573443798","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573443798,"node_id":"IC_kwDOBhmkcs5dyNjW","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T09:36:39Z","updated_at":"2023-06-02T09:36:39Z","author_association":"CONTRIBUTOR","body":"不开send zero copy就没啥问题。如果出问题会出Fail to handle RDMA completion, error status(4)这类错误。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573443798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573462496","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573462496","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573462496,"node_id":"IC_kwDOBhmkcs5dySHg","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T09:51:58Z","updated_at":"2023-06-02T09:51:58Z","author_association":"CONTRIBUTOR","body":"> 不开send zero copy就没啥问题。如果出问题会出Fail to handle RDMA completion, error status(4)这类错误。\r\n\r\n默认send_zerocopy=True，这是master有问题的意思吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573462496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573465640","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1573465640","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1573465640,"node_id":"IC_kwDOBhmkcs5dyS4o","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T09:54:24Z","updated_at":"2023-06-02T09:54:24Z","author_association":"CONTRIBUTOR","body":"master没有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1573465640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1575491726","html_url":"https://github.com/apache/brpc/issues/2265#issuecomment-1575491726","issue_url":"https://api.github.com/repos/apache/brpc/issues/2265","id":1575491726,"node_id":"IC_kwDOBhmkcs5d6BiO","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-04T09:42:33Z","updated_at":"2023-06-04T09:42:33Z","author_association":"CONTRIBUTOR","body":"send/recv zerocopy=false，还是会出现异常日志\r\n```\r\nW0602 23:10:01.090063  1031 external/brpc/src/brpc/input_messenger.cpp:240] Close Socket{id=8589934610 fd=294 addr=10.156.122.18:17758:23081} (0x55d5ce252880) due to unknown message: \\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F\\FF\\FF\\FF\\7F...<skipping 32576 bytes>\r\nW0602 23:10:01.090279  1031 external/brpc/src/brpc/policy/baidu_rpc_protocol.cpp:265] Fail to write into Socket{id=8589934610 fd=294 addr=10.156.122.18:17758:23081} (0x55d5ce252880): Invalid argument\r\nW0602 23:10:01.198151  1108 external/brpc/src/brpc/rdma/rdma_endpoint.cpp:565] Fail to read Hello Message from client:Socket{id=3842 fd=288 addr=10.156.122.18:18296:23081} (0x0x55ddf4440000) 10.156.122.18:18296: Got EOF\r\nI0602 23:18:31.035560  1103 external/brpc/src/brpc/socket.cpp:2451] Checking Socket{id=14 addr=10.156.8.16:22455} (0x55d5ce251f80)\r\nI0602 23:18:31.036291   998 external/brpc/src/brpc/socket.cpp:2511] Revived Socket{id=14 addr=10.156.8.16:22455} (0x55d5ce251f80) (Connectable)\r\nE0602 23:24:01.236915  1047 external/brpc/src/brpc/input_messenger.cpp:122] Fail to parse response from 10.156.8.12:29267 by baidu_std at client-side\r\nW0602 23:24:01.236942  1047 external/brpc/src/brpc/input_messenger.cpp:247] Close Socket{id=8589934599 fd=296 addr=10.156.8.12:29267:65416} (0x55d5ce250fc0): absolutely wrong message\r\nI0602 23:24:01.340163  1038 external/brpc/src/brpc/socket.cpp:2451] Checking Socket{id=8589934599 addr=10.156.8.12:29267} (0x55d5ce250fc0)\r\nI0602 23:24:01.340711   849 external/brpc/src/brpc/socket.cpp:2511] Revived Socket{id=8589934599 addr=10.156.8.12:29267} (0x55d5ce250fc0) (Connectable)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1575491726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1575926134","html_url":"https://github.com/apache/brpc/pull/2270#issuecomment-1575926134","issue_url":"https://api.github.com/repos/apache/brpc/issues/2270","id":1575926134,"node_id":"IC_kwDOBhmkcs5d7rl2","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-05T01:59:37Z","updated_at":"2023-06-05T01:59:37Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1575926134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1578001632","html_url":"https://github.com/apache/brpc/issues/2271#issuecomment-1578001632","issue_url":"https://api.github.com/repos/apache/brpc/issues/2271","id":1578001632,"node_id":"IC_kwDOBhmkcs5eDmTg","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-06T06:34:17Z","updated_at":"2023-06-06T06:34:17Z","author_association":"CONTRIBUTOR","body":"这里应该是文档的问题，channel的timeout是指默认每个请求的超时。去掉channel cache是指每个请求都新建一个channel么，你们用的连接方式和lb策略是什么呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1578001632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]