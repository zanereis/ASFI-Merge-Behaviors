[{"url":"https://api.github.com/repos/apache/druid/issues/comments/484620152","html_url":"https://github.com/apache/druid/issues/7501#issuecomment-484620152","issue_url":"https://api.github.com/repos/apache/druid/issues/7501","id":484620152,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDYyMDE1Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T18:06:27Z","updated_at":"2019-04-18T18:06:27Z","author_association":"CONTRIBUTOR","body":"Ah, currently auto compaction can compact if total segment size and # of segments in a timeChunk are smaller than `inputSegmentSizeBytes` and `maxNumSegmentsToCompact`, respectively (http://druid.io/docs/latest/configuration/index.html#compaction-dynamic-configuration). This will be fixed in a future release. 900 segments is definitely larger than the default `maxNumSegmentsToCompact` which is 150.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484620152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484625465","html_url":"https://github.com/apache/druid/issues/7506#issuecomment-484625465","issue_url":"https://api.github.com/repos/apache/druid/issues/7506","id":484625465,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDYyNTQ2NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T18:19:20Z","updated_at":"2019-04-18T18:19:20Z","author_association":"CONTRIBUTOR","body":"It's equivalent to the old 'disable' functionality (mark all segments unused). We're trying to harmonize the language & that is a work in progress.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484625465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484627601","html_url":"https://github.com/apache/druid/issues/7501#issuecomment-484627601","issue_url":"https://api.github.com/repos/apache/druid/issues/7501","id":484627601,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDYyNzYwMQ==","user":{"login":"dene14","id":7289205,"node_id":"MDQ6VXNlcjcyODkyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/7289205?v=4","gravatar_id":"","url":"https://api.github.com/users/dene14","html_url":"https://github.com/dene14","followers_url":"https://api.github.com/users/dene14/followers","following_url":"https://api.github.com/users/dene14/following{/other_user}","gists_url":"https://api.github.com/users/dene14/gists{/gist_id}","starred_url":"https://api.github.com/users/dene14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dene14/subscriptions","organizations_url":"https://api.github.com/users/dene14/orgs","repos_url":"https://api.github.com/users/dene14/repos","events_url":"https://api.github.com/users/dene14/events{/privacy}","received_events_url":"https://api.github.com/users/dene14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T18:24:50Z","updated_at":"2019-04-18T18:24:50Z","author_association":"CONTRIBUTOR","body":"Oh, I though maxNumSegmentsToCompact was a count of segments to take for 1\npass... actually I even tried to increase it to 900 probably w/o any luck,\nbut I haven't tested it much and just cleaned up this data...\n\nOn Thu, Apr 18, 2019 at 9:07 PM Jihoon Son <notifications@github.com> wrote:\n\n> Ah, currently auto compaction can compact if total segment size and # of\n> segments in a timeChunk are smaller than inputSegmentSizeBytes and\n> maxNumSegmentsToCompact, respectively (\n> http://druid.io/docs/latest/configuration/index.html#compaction-dynamic-configuration).\n> This will be fixed in a future release. 900 segments is definitely larger\n> than the default maxNumSegmentsToCompact which is 150.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/issues/7501#issuecomment-484620152>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABXTS5KSQ2LKJUUS4OFNGGDPRC2EJANCNFSM4HGYUDTQ>\n> .\n>\n\n\n-- \nBest regards,\nDenis Boulas\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484627601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484652276","html_url":"https://github.com/apache/druid/pull/7088#issuecomment-484652276","issue_url":"https://api.github.com/repos/apache/druid/issues/7088","id":484652276,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDY1MjI3Ng==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T19:22:18Z","updated_at":"2019-04-18T19:22:18Z","author_association":"CONTRIBUTOR","body":"@leventov - looks like the build couldn't complete because the system was in the midst of shutting down. Could you restart the Travis build?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484652276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484653675","html_url":"https://github.com/apache/druid/issues/7501#issuecomment-484653675","issue_url":"https://api.github.com/repos/apache/druid/issues/7501","id":484653675,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDY1MzY3NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T19:25:52Z","updated_at":"2019-04-18T19:25:52Z","author_association":"CONTRIBUTOR","body":"> Oh, I though maxNumSegmentsToCompact was a count of segments to take for 1\r\npass...\r\n\r\nHmm I think it's true. `maxNumSegmentsToCompact` is the max number of segments for each compactionTask spawned by auto compaction.\r\n\r\nBut probably setting it to 900 wouldn't work because there's another configuration to limit the max size of each ZNode (`druid.indexer.runner.maxZnodeBytes`, http://druid.io/docs/latest/configuration/index.html#middlemanager-configuration). You might need to increase it as well.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484653675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484662611","html_url":"https://github.com/apache/druid/pull/7507#issuecomment-484662611","issue_url":"https://api.github.com/repos/apache/druid/issues/7507","id":484662611,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDY2MjYxMQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T19:48:01Z","updated_at":"2019-04-18T19:48:01Z","author_association":"CONTRIBUTOR","body":"Wow, this is like when two cars merge into the same lane at the same time from right and left\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484662611/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484701601","html_url":"https://github.com/apache/druid/issues/7506#issuecomment-484701601","issue_url":"https://api.github.com/repos/apache/druid/issues/7506","id":484701601,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDcwMTYwMQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-18T21:50:31Z","updated_at":"2019-04-18T21:50:31Z","author_association":"CONTRIBUTOR","body":"`Drop data` = disable\r\n\r\n![image](https://user-images.githubusercontent.com/177816/56393323-f4454c80-61e8-11e9-91db-e9898ed4d30e.png)\r\n\r\n\r\nIf you flick the \"show disabled\" switch:\r\n\r\n![image](https://user-images.githubusercontent.com/177816/56393356-0cb56700-61e9-11e9-887b-ba54f42b277a.png)\r\n\r\nYou will see:\r\n\r\n![image](https://user-images.githubusercontent.com/177816/56393398-235bbe00-61e9-11e9-8bbb-f49774cab982.png)\r\n\r\n`Enable` (which is enable) and `Permanently delete` which is issue a kill task.\r\n\r\nAny suggestions on labeling / microcopy appreciated \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484701601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484734125","html_url":"https://github.com/apache/druid/issues/7093#issuecomment-484734125","issue_url":"https://api.github.com/repos/apache/druid/issues/7093","id":484734125,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDczNDEyNQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T00:49:55Z","updated_at":"2019-04-19T00:49:55Z","author_association":"CONTRIBUTOR","body":"I finally found some time to read and review the proposal. I think the overall approach makes a lot of sense, and generally agree with the stages. I think though, that we should consider enabling vectorized queries right away, instead of turning them off. They are a clear win and it will help them actually be validated and used, and force us to test more to ensure they are production ready.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484734125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484736772","html_url":"https://github.com/apache/druid/issues/7187#issuecomment-484736772","issue_url":"https://api.github.com/repos/apache/druid/issues/7187","id":484736772,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDczNjc3Mg==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T01:09:34Z","updated_at":"2019-04-19T01:09:34Z","author_association":"CONTRIBUTOR","body":"@peferron \r\nThe new FDT sketch is in master and should be stable enough for you to start looking at it and playing with it.  I'm sure you will have questions so ask away :)    I need to do some more comprehensive testing and characterization before it is ready for release.  You can find some simple examples in the test hierarchy as well as in the characterization repository (well, those are a bit more complex :) :) ).\r\n\r\nI am actually quite pleased with its accuracy.\r\n\r\nYou can find the configuration file for running the characterization tests [here](https://github.com/DataSketches/characterization/blob/master/src/main/resources/fdt/FdtAccuracyJob.conf).\r\n\r\nHave fun!\r\n\r\n  ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484736772/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484737473","html_url":"https://github.com/apache/druid/issues/7093#issuecomment-484737473","issue_url":"https://api.github.com/repos/apache/druid/issues/7093","id":484737473,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDczNzQ3Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T01:14:26Z","updated_at":"2019-04-19T01:14:26Z","author_association":"CONTRIBUTOR","body":"Thanks for taking a look @fjy.\r\n\r\nI would prefer to leave vectorization off by default for the first couple of releases at least, since the level of battle-testedness would be a lot lower vs. the 'classic' code paths. But I do plan to enable it at the Druid installations that I run, and at as many others as I could convince to.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484737473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484743556","html_url":"https://github.com/apache/druid/pull/7281#issuecomment-484743556","issue_url":"https://api.github.com/repos/apache/druid/issues/7281","id":484743556,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDc0MzU1Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T01:56:58Z","updated_at":"2019-04-19T01:56:58Z","author_association":"CONTRIBUTOR","body":"> It looks Calcite released 1.19.0 recently.. @gianm Do you think which way is make more sense, updating this pr to upgrade Calcite to 1.19.0 or first to 1.18.0 and then 1.19.0. Both version met the same issue discussed above..thanks\r\n\r\nIMO, updating this PR to go straight to 1.19.0 is best.\r\n\r\n> One way might be that modify DruidRexExecutor to keep the same policy as calcite as following (adding strong.isNull check)\r\n> ...\r\n> But this way will reduce =(null, null) and =(null, '')(useDefaultValueForNull) as false, so the test testEmptyStringEquality's result will be affected too and =(null, null) as false is a little counter-intuitive\r\n> What do you think, thanks!\r\n\r\nHmm. I think in Druid's default mode (`NullHandling.replaceWithDefault()` true) then treating VARCHAR nulls as empty strings is generally the right thing to do. In SQL-compatible mode it's best to be SQL compatible of course. If there is some way we can accomplish that, it seems ideal.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484743556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484743988","html_url":"https://github.com/apache/druid/pull/7281#issuecomment-484743988","issue_url":"https://api.github.com/repos/apache/druid/issues/7281","id":484743988,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDc0Mzk4OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T02:00:17Z","updated_at":"2019-04-19T02:00:17Z","author_association":"CONTRIBUTOR","body":"If it’s not possible (it is fighting against the SQL grain a bit) then I’d also be ok with something that is at least in the spirit of treating nulls and empty strings somewhat equivalently, to the degree that Calcite lets us.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484743988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484757430","html_url":"https://github.com/apache/druid/issues/7508#issuecomment-484757430","issue_url":"https://api.github.com/repos/apache/druid/issues/7508","id":484757430,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDc1NzQzMA==","user":{"login":"kaka11chen","id":1736049,"node_id":"MDQ6VXNlcjE3MzYwNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1736049?v=4","gravatar_id":"","url":"https://api.github.com/users/kaka11chen","html_url":"https://github.com/kaka11chen","followers_url":"https://api.github.com/users/kaka11chen/followers","following_url":"https://api.github.com/users/kaka11chen/following{/other_user}","gists_url":"https://api.github.com/users/kaka11chen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaka11chen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaka11chen/subscriptions","organizations_url":"https://api.github.com/users/kaka11chen/orgs","repos_url":"https://api.github.com/users/kaka11chen/repos","events_url":"https://api.github.com/users/kaka11chen/events{/privacy}","received_events_url":"https://api.github.com/users/kaka11chen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T03:36:32Z","updated_at":"2019-04-19T14:21:33Z","author_association":"CONTRIBUTOR","body":"The following is a simple test which can reproduce the issue.\r\n\r\n```\r\npublic class Test {\r\n\r\n    public static void main(String args[]) {\r\n        for(;;) {\r\n\r\n            final File temporaryStorageDirectory = new File(\r\n                    \"/tmp\",\r\n                    \"druid-groupBy-\" + UUID.randomUUID())\r\n            );\r\n            temporaryStorageDirectory.exists();\r\n        }\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484757430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484784666","html_url":"https://github.com/apache/druid/pull/7304#issuecomment-484784666","issue_url":"https://api.github.com/repos/apache/druid/issues/7304","id":484784666,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDc4NDY2Ng==","user":{"login":"FaxianZhao","id":14232480,"node_id":"MDQ6VXNlcjE0MjMyNDgw","avatar_url":"https://avatars.githubusercontent.com/u/14232480?v=4","gravatar_id":"","url":"https://api.github.com/users/FaxianZhao","html_url":"https://github.com/FaxianZhao","followers_url":"https://api.github.com/users/FaxianZhao/followers","following_url":"https://api.github.com/users/FaxianZhao/following{/other_user}","gists_url":"https://api.github.com/users/FaxianZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/FaxianZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FaxianZhao/subscriptions","organizations_url":"https://api.github.com/users/FaxianZhao/orgs","repos_url":"https://api.github.com/users/FaxianZhao/repos","events_url":"https://api.github.com/users/FaxianZhao/events{/privacy}","received_events_url":"https://api.github.com/users/FaxianZhao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T06:52:02Z","updated_at":"2019-04-19T06:52:22Z","author_association":"CONTRIBUTOR","body":"Hi, @clintropolis , @asdf2014 \r\nSorry to confuse you with previous comment. \r\nCurrent failure is caused by org.apache.druid.curator.discovery.ServerDiscoverySelector cannot start with non-zookeeper environment(I trigger lifecycle in mapreduce job, and lifecycle will try to start it).\r\nI'm wonder why the previous test was passed, it seems there is no zookeeper environment while org.apache.druid.indexer.IndexGeneratorJobTest running.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484784666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484875938","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-484875938","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":484875938,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDg3NTkzOA==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T12:14:59Z","updated_at":"2019-04-19T12:14:59Z","author_association":"NONE","body":"@zhangxinyu1: Can you take a look at this, please?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484875938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484901426","html_url":"https://github.com/apache/druid/issues/7511#issuecomment-484901426","issue_url":"https://api.github.com/repos/apache/druid/issues/7511","id":484901426,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkwMTQyNg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T13:48:34Z","updated_at":"2019-04-19T13:48:34Z","author_association":"CONTRIBUTOR","body":"Doesn't k8s have a config map that can be written to a file? would that feature fit this scenario better?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484901426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484902350","html_url":"https://github.com/apache/druid/issues/7508#issuecomment-484902350","issue_url":"https://api.github.com/repos/apache/druid/issues/7508","id":484902350,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkwMjM1MA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T13:51:45Z","updated_at":"2019-04-19T13:51:45Z","author_association":"CONTRIBUTOR","body":"Very nice find. This is one of the better bugs and bug reports to come through the project!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484902350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484903798","html_url":"https://github.com/apache/druid/pull/7509#issuecomment-484903798","issue_url":"https://api.github.com/repos/apache/druid/issues/7509","id":484903798,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkwMzc5OA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T13:56:53Z","updated_at":"2019-04-19T13:58:00Z","author_association":"CONTRIBUTOR","body":"There's another hidden FS bug here:\r\n\r\n```\r\nsynchronized (files) {\r\n  if (closed) {\r\n    return;\r\n  }\r\n  ...    \r\n```\r\n\r\nIf two methods call this, and the first one that finishes causes the JVM to be shut down, then the other one may never finish and actually do the delete. It is at the author's discretion if they want to keep the scope of this PR to just #7508 or to fix up `LimitedTemporaryStorage::close`` in general\r\n\r\nIf the author wishes to keep the scope limited, then I'm 👍 once the `isEmpty` change is made","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484903798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484906048","html_url":"https://github.com/apache/druid/issues/7508#issuecomment-484906048","issue_url":"https://api.github.com/repos/apache/druid/issues/7508","id":484906048,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkwNjA0OA==","user":{"login":"kaka11chen","id":1736049,"node_id":"MDQ6VXNlcjE3MzYwNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1736049?v=4","gravatar_id":"","url":"https://api.github.com/users/kaka11chen","html_url":"https://github.com/kaka11chen","followers_url":"https://api.github.com/users/kaka11chen/followers","following_url":"https://api.github.com/users/kaka11chen/following{/other_user}","gists_url":"https://api.github.com/users/kaka11chen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaka11chen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaka11chen/subscriptions","organizations_url":"https://api.github.com/users/kaka11chen/orgs","repos_url":"https://api.github.com/users/kaka11chen/repos","events_url":"https://api.github.com/users/kaka11chen/events{/privacy}","received_events_url":"https://api.github.com/users/kaka11chen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T14:05:46Z","updated_at":"2019-04-19T14:05:46Z","author_association":"CONTRIBUTOR","body":"@drcrallen Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484906048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484926349","html_url":"https://github.com/apache/druid/issues/7470#issuecomment-484926349","issue_url":"https://api.github.com/repos/apache/druid/issues/7470","id":484926349,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkyNjM0OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T15:12:34Z","updated_at":"2019-04-19T15:12:34Z","author_association":"CONTRIBUTOR","body":"This looks like a rolling-update issue between 0.12/13 and 0.14: the checkpoint is sent from task -> supervisor with a new-form startPartitions that the older supervisor cannot understand. Things should work fine once everything is on 0.14, but we still need to fix this so rolling updates work as expected.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484926349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484937761","html_url":"https://github.com/apache/druid/issues/7511#issuecomment-484937761","issue_url":"https://api.github.com/repos/apache/druid/issues/7511","id":484937761,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDkzNzc2MQ==","user":{"login":"dene14","id":7289205,"node_id":"MDQ6VXNlcjcyODkyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/7289205?v=4","gravatar_id":"","url":"https://api.github.com/users/dene14","html_url":"https://github.com/dene14","followers_url":"https://api.github.com/users/dene14/followers","following_url":"https://api.github.com/users/dene14/following{/other_user}","gists_url":"https://api.github.com/users/dene14/gists{/gist_id}","starred_url":"https://api.github.com/users/dene14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dene14/subscriptions","organizations_url":"https://api.github.com/users/dene14/orgs","repos_url":"https://api.github.com/users/dene14/repos","events_url":"https://api.github.com/users/dene14/events{/privacy}","received_events_url":"https://api.github.com/users/dene14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T15:48:42Z","updated_at":"2019-04-19T15:48:42Z","author_association":"CONTRIBUTOR","body":"that actually is what I do... however helm chart has very limited go template functionality, and implementing yaml flattening just for this case isn't very good.\r\n\r\nSince Druid has pretty logical configuration settings tree I would say it would be even easier to understand configuration when it's in yaml or json.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484937761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484947256","html_url":"https://github.com/apache/druid/pull/7509#issuecomment-484947256","issue_url":"https://api.github.com/repos/apache/druid/issues/7509","id":484947256,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk0NzI1Ng==","user":{"login":"kaka11chen","id":1736049,"node_id":"MDQ6VXNlcjE3MzYwNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1736049?v=4","gravatar_id":"","url":"https://api.github.com/users/kaka11chen","html_url":"https://github.com/kaka11chen","followers_url":"https://api.github.com/users/kaka11chen/followers","following_url":"https://api.github.com/users/kaka11chen/following{/other_user}","gists_url":"https://api.github.com/users/kaka11chen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaka11chen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaka11chen/subscriptions","organizations_url":"https://api.github.com/users/kaka11chen/orgs","repos_url":"https://api.github.com/users/kaka11chen/repos","events_url":"https://api.github.com/users/kaka11chen/events{/privacy}","received_events_url":"https://api.github.com/users/kaka11chen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T16:20:37Z","updated_at":"2019-04-19T16:20:59Z","author_association":"CONTRIBUTOR","body":"@drcrallen I have changed the source code with checking a flag ```createdStorageDirectory```.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484947256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484949651","html_url":"https://github.com/apache/druid/issues/7470#issuecomment-484949651","issue_url":"https://api.github.com/repos/apache/druid/issues/7470","id":484949651,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk0OTY1MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T16:29:45Z","updated_at":"2019-04-19T16:29:45Z","author_association":"CONTRIBUTOR","body":"By the way, I think this rolling update will work if you do Overlord first, before any MiddleManagers. We do generally want updates to work with the Overlord either early or late (see http://druid.io/docs/latest/operations/rolling-updates.html). So please try that Overlord-first method as a workaround if you can.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484949651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484955127","html_url":"https://github.com/apache/druid/issues/4510#issuecomment-484955127","issue_url":"https://api.github.com/repos/apache/druid/issues/4510","id":484955127,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk1NTEyNw==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T16:52:48Z","updated_at":"2019-04-19T16:52:48Z","author_association":"NONE","body":"any luck? You able to resolve this issue. I'm facing this in latest 0.14-incubator","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484955127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484962284","html_url":"https://github.com/apache/druid/issues/6920#issuecomment-484962284","issue_url":"https://api.github.com/repos/apache/druid/issues/6920","id":484962284,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk2MjI4NA==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T17:20:11Z","updated_at":"2019-04-19T17:56:00Z","author_association":"NONE","body":"@gianm & @egor-ryashin \r\n\r\nNow on the latest version i.e. **### 0.14-incubating**, facing the same issue.\r\nI'm trying to create dimension less schema, find my spec below.\r\n\r\n```{\r\n\t\"type\": \"kafka\",\r\n\t\"dataSchema\": {\r\n\t\t\"dataSource\": \"web_event_datasource\",\r\n\t\t\"parser\": {\r\n\t\t\t\"type\": \"string\",\r\n\t\t\t\"parseSpec\": {\r\n\t\t\t\t\"format\": \"json\",\r\n\t\t\t\t\"timestampSpec\": {\r\n\t\t\t\t\t\"column\": \"time\",\r\n\t\t\t\t\t\"format\": \"auto\"\r\n\t\t\t\t},\r\n\t\t\t\t\"dimensionsSpec\": {\r\n\t\t\t\t\t\"dimensions\": [],\r\n\t\t\t\t\t\"dimensionExclusions\": [\r\n\t\t\t\t\t\t\"timestamp\",\r\n\t\t\t\t\t\t\"value\"\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"metricsSpec\": [{\r\n\t\t\t\t\"name\": \"count\",\r\n\t\t\t\t\"type\": \"count\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"value_sum\",\r\n\t\t\t\t\"fieldName\": \"value\",\r\n\t\t\t\t\"type\": \"doubleSum\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"value_min\",\r\n\t\t\t\t\"fieldName\": \"value\",\r\n\t\t\t\t\"type\": \"doubleMin\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"value_max\",\r\n\t\t\t\t\"fieldName\": \"value\",\r\n\t\t\t\t\"type\": \"doubleMax\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"granularitySpec\": {\r\n\t\t\t\"type\": \"uniform\",\r\n\t\t\t\"segmentGranularity\": \"HOUR\",\r\n\t\t\t\"queryGranularity\": \"NONE\",\r\n\t\t\t\"rollup\": false\r\n\t\t}\r\n\t},\r\n\t\"tuningConfig\": {\r\n\t\t\"type\": \"kafka\",\r\n\t\t\"reportParseExceptions\": false\r\n\t},\r\n\t\"ioConfig\": {\r\n\t\t\"topic\": \"web_traffic\",\r\n\t\t\"replicas\": 1,\r\n\t\t\"taskDuration\": \"PT10M\",\r\n\t\t\"completionTimeout\": \"PT20M\",\r\n\t\t\"consumerProperties\": {\r\n\t\t\t\"bootstrap.servers\": \"<ip1>:9092,<ip2>:9096,<ip3>:9010\"\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nand when I'm executing spec, I get this error\r\n\r\n`2019-04-19T16:53:33,084 DEBUG [main] org.apache.druid.server.log.NoopRequestLoggerProvider - Creating NoopRequestLogger at\r\njava.lang.Exception: Stack trace\r\n\tat org.apache.druid.server.log.NoopRequestLoggerProvider.get(NoopRequestLoggerProvider.java:33) [druid-server-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.server.log.NoopRequestLoggerProvider.get(NoopRequestLoggerProvider.java:26) [druid-server-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81) [guice-4.1.0.jar:?]\r\n\tat com.google.inject.internal.BoundProviderFactory.provision(BoundProviderFactory.java:72) [guice-4.1.0.jar:?]\r\n\tat com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:61) [guice-4.1.0.jar:?]\r\n\tat com.google.inject.internal.BoundProviderFactory.get(BoundProviderFactory.java:62) [guice-4.1.0.jar:?]\r\n\tat com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46) [guice-4.1.0.jar:?]\r\n\tat com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092) [guice-4.1.0.jar:?] ....\r\n`\r\n\r\n\r\n**\r\n\r\n> And after the overload reads the spec and tries to create datasource in metadata, I get the following error\r\n\r\n**\r\n\r\n`2019-04-19T16:53:33,611 CONFIG [main] com.sun.jersey.server.impl.ejb.EJBComponentProviderFactoryInitilizer - The EJB interceptor binding API is not available. JAX-RS EJB support is disabled.\r\njavax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\r\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:662) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:350) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:417) ~[?:1.8.0_181]\r\n\tat com.sun.jersey.server.impl.ejb.EJBComponentProviderFactoryInitilizer.initialize(EJBComponentProviderFactoryInitilizer.java:64) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.configure(WebComponent.java:570) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.configure(ServletContainer.java:332) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:604) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:577) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:244) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:120) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedServletPipeline.init(ManagedServletPipeline.java:82) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedFilterPipeline.initPipeline(ManagedFilterPipeline.java:103) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:226) [guice-servlet-4.1.0.jar:?]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:741) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:785) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:403) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.StatisticsHandler.doStart(StatisticsHandler.java:252) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:419) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:386) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.apache.druid.server.initialization.jetty.JettyServerModule$2.start(JettyServerModule.java:397) [druid-server-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.java.util.common.lifecycle.Lifecycle.start(Lifecycle.java:323) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.guice.LifecycleModule$2.start(LifecycleModule.java:138) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.GuiceRunnable.initLifecycle(GuiceRunnable.java:107) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.CliPeon.run(CliPeon.java:356) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.Main.main(Main.java:118) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n2019-04-19T16:53:33,612 CONFIG [main] com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer - The CDI BeanManager is not available at java:comp/BeanManager\r\njavax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\r\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:662) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:350) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:417) ~[?:1.8.0_181]\r\n\tat com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer.lookupInJndi(CDIComponentProviderFactoryInitializer.java:110) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer.lookup(CDIComponentProviderFactoryInitializer.java:83) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer.initialize(CDIComponentProviderFactoryInitializer.java:70) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.configure(WebComponent.java:572) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.configure(ServletContainer.java:332) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:604) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:577) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:244) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:120) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedServletPipeline.init(ManagedServletPipeline.java:82) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedFilterPipeline.initPipeline(ManagedFilterPipeline.java:103) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:226) [guice-servlet-4.1.0.jar:?]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:741) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:785) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:403) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.StatisticsHandler.doStart(StatisticsHandler.java:252) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:419) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:386) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.apache.druid.server.initialization.jetty.JettyServerModule$2.start(JettyServerModule.java:397) [druid-server-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.java.util.common.lifecycle.Lifecycle.start(Lifecycle.java:323) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.guice.LifecycleModule$2.start(LifecycleModule.java:138) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.GuiceRunnable.initLifecycle(GuiceRunnable.java:107) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.CliPeon.run(CliPeon.java:356) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.Main.main(Main.java:118) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n2019-04-19T16:53:33,612 CONFIG [main] com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer - The CDI BeanManager is not available at javax.enterprise.inject.spi.BeanManager\r\n2019-04-19T16:53:33,613 CONFIG [main] com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer - The CDI BeanManager is not available at org.jboss.weld.environment.servlet.javax.enterprise.inject.spi.BeanManager\r\n2019-04-19T16:53:33,613 CONFIG [main] com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer - The CDI BeanManager is not available. JAX-RS CDI support is disabled.\r\n2019-04-19T16:53:33,613 DEBUG [main-SendThread(139.162.13.57:2181)] org.apache.zookeeper.ClientCnxn - Reading reply sessionid:0x10008b1fed20dfe, packet:: clientPath:null serverPath:null finished:false header:: 42,3  replyHeader:: 42,41445,0  request:: '/druid/internal-discovery/PEON,F  response:: s{38119,38119,1555613119956,1555613119956,0,286,0,0,0,0,41438} \r\n2019-04-19T16:53:33,614 CONFIG [main] com.sun.jersey.server.impl.managedbeans.ManagedBeanComponentProviderFactoryInitilizer - The managed beans injection manager API is not available. JAX-RS managed beans support is disabled.\r\njavax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial\r\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:662) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:313) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:350) ~[?:1.8.0_181]\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:417) ~[?:1.8.0_181]\r\n\tat com.sun.jersey.server.impl.managedbeans.ManagedBeanComponentProviderFactoryInitilizer.initialize(ManagedBeanComponentProviderFactoryInitilizer.java:65) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.configure(WebComponent.java:576) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.configure(ServletContainer.java:332) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:604) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:577) [jersey-servlet-1.19.3.jar:1.19.3]\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:244) [javax.servlet-api-3.1.0.jar:3.1.0]\r\n\tat com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:120) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedServletPipeline.init(ManagedServletPipeline.java:82) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.ManagedFilterPipeline.initPipeline(ManagedFilterPipeline.java:103) [guice-servlet-4.1.0.jar:?]\r\n\tat com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:226) [guice-servlet-4.1.0.jar:?]\r\n\tat org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:741) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:374) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:785) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:287) [jetty-servlet-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:403) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.StatisticsHandler.doStart(StatisticsHandler.java:252) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:138) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.start(Server.java:419) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:108) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.server.Server.doStart(Server.java:386) [jetty-server-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [jetty-util-9.4.10.v20180503.jar:9.4.10.v20180503]\r\n\tat org.apache.druid.server.initialization.jetty.JettyServerModule$2.start(JettyServerModule.java:397) [druid-server-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.java.util.common.lifecycle.Lifecycle.start(Lifecycle.java:323) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.guice.LifecycleModule$2.start(LifecycleModule.java:138) [druid-core-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.GuiceRunnable.initLifecycle(GuiceRunnable.java:107) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.CliPeon.run(CliPeon.java:356) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n\tat org.apache.druid.cli.Main.main(Main.java:118) [druid-services-0.14.0-incubating.jar:0.14.0-incubating]\r\n`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484962284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484983732","html_url":"https://github.com/apache/druid/issues/7511#issuecomment-484983732","issue_url":"https://api.github.com/repos/apache/druid/issues/7511","id":484983732,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk4MzczMg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T18:46:01Z","updated_at":"2019-04-19T18:46:01Z","author_association":"CONTRIBUTOR","body":"Oh my, get ready for everyone and their dog getting confused about the correct level of indentation.\r\nI work on a project called Pivot that is often deployed along side Druid. Pivot takes a yaml config and there is pending ToDo to move away from yaml (towards prop files like Druid) because people keep messing up the indentation and little things like that. I consider choosing yaml as the format for a config file a big mistake that I have made that has caused quite a bit of needless confusion.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484983732/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484987840","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-484987840","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":484987840,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk4Nzg0MA==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T19:03:19Z","updated_at":"2019-04-19T19:03:19Z","author_association":"CONTRIBUTOR","body":"Let's see:\r\nDruid 0.14 uses sketches-core-0.12.0\r\nDruid 0.13 uses sketches-core-0.10.3\r\nThis behavior changed in sketches-core-0.11.0\r\nI believe that previous behavior was to always return an array of quantile values corresponding to the specified ranks. In case of an empty sketch the values returned are NaN, not an empty array. We thought that array of NaN values does not make much sense, so we changed this to return null. This affects all functions returning arrays: getQuantiles(), getPMF() and getCDF()\r\n\r\nIf null result is undesirable in Druid, it should be changed in the post-aggs.\r\nCould you clarify why null result from an empty sketch is not desirable? Why an array of NaNs was better?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484987840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/484996125","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-484996125","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":484996125,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDk5NjEyNQ==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T19:42:01Z","updated_at":"2019-04-19T19:42:30Z","author_association":"CONTRIBUTOR","body":"My suggestion would be to return an empty array `[]` instead of `null`.\r\n\r\nWith an empty array, all code that works on array continues working naturally and unmodified.\r\nEg, methods like `.map()`, `.filter()` etc continue to work and handle the case of empty array.\r\n\r\nWith `null` we have to put in special checks in code everywhere to check for null.\r\n\r\n>If null result is undesirable in Druid, it should be changed in the post-aggs.\r\n\r\nwhat is the right way to change null to empty array in post agg? i dont even know. could you please clarify.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/484996125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485006756","html_url":"https://github.com/apache/druid/issues/7511#issuecomment-485006756","issue_url":"https://api.github.com/repos/apache/druid/issues/7511","id":485006756,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAwNjc1Ng==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T20:30:55Z","updated_at":"2019-04-19T20:30:55Z","author_association":"CONTRIBUTOR","body":"dear sirs,\r\n its already insanity to configure druid.\r\n\r\nplease don't take away the simple properties file format, which i can add comments in and not worry about indentation.\r\n\r\njson/yaml is insanity","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485006756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485008357","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485008357","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485008357,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAwODM1Nw==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T20:38:33Z","updated_at":"2019-04-19T20:40:26Z","author_association":"CONTRIBUTOR","body":"In your example query you wanted four quantile values for ranks 0.5, 0.9, 0.95 and 0.99. How would you process the result? What if it is an empty array, not an array with four values you would expect?\r\n\r\nThis is about DoublesSketchToQuantilesPostAggregator.java\r\nCurrently it just returns the result from the sketch like so:\r\nreturn sketch.getQuantiles(fractions);\r\nWe might change that to something like this:\r\ndouble[] quantiles = sketch.getQuantiles(fractions);\r\nif (quantiles == null) quantiles = new double[0];\r\nreturn quantiles;\r\n\r\nAnd I think we have a bigger problem in DoublesSketchToHistogramPostAggregator.java\r\nIt is going to throw a null pointer exception.\r\n\r\nWe may also want to add more post-aggs to get rank of a given value and get CDF.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485008357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485012798","html_url":"https://github.com/apache/druid/issues/5243#issuecomment-485012798","issue_url":"https://api.github.com/repos/apache/druid/issues/5243","id":485012798,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAxMjc5OA==","user":{"login":"cyrillay","id":26873164,"node_id":"MDQ6VXNlcjI2ODczMTY0","avatar_url":"https://avatars.githubusercontent.com/u/26873164?v=4","gravatar_id":"","url":"https://api.github.com/users/cyrillay","html_url":"https://github.com/cyrillay","followers_url":"https://api.github.com/users/cyrillay/followers","following_url":"https://api.github.com/users/cyrillay/following{/other_user}","gists_url":"https://api.github.com/users/cyrillay/gists{/gist_id}","starred_url":"https://api.github.com/users/cyrillay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyrillay/subscriptions","organizations_url":"https://api.github.com/users/cyrillay/orgs","repos_url":"https://api.github.com/users/cyrillay/repos","events_url":"https://api.github.com/users/cyrillay/events{/privacy}","received_events_url":"https://api.github.com/users/cyrillay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T20:59:21Z","updated_at":"2019-04-19T20:59:21Z","author_association":"NONE","body":"Same issue here on 0.11.0 as well `Could not resolve type id 'cachedNamespace' into a subtype of [simple type, class io.druid.query.lookup.LookupExtractorFactory]`\r\n\r\nDid you eventually manage to get it working ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485012798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485013520","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485013520","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485013520,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAxMzUyMA==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T21:02:47Z","updated_at":"2019-04-19T21:05:03Z","author_association":"CONTRIBUTOR","body":">In your example query you wanted four quantile values for ranks 0.5, 0.9, 0.95 and 0.99. How would you process the result? What if it is an empty array, not an array with four values you would expect?\r\n\r\nas i mentioned, the code to handle arrays gracefully handles empty arrays, whether its charting libraries or our own code. but `null` throws a wrench into everything..\r\n\r\nEven in the code you pointed out:\r\n> `return sketch.getQuantiles(fractions);`\r\n\r\nas you yourself point out, this now has to be special cased to handle null, whereas it worked fine with empty arrays previously. \r\nreturning an empty array instead would allow all existing code to continue working ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485013520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485016744","html_url":"https://github.com/apache/druid/issues/7511#issuecomment-485016744","issue_url":"https://api.github.com/repos/apache/druid/issues/7511","id":485016744,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAxNjc0NA==","user":{"login":"dene14","id":7289205,"node_id":"MDQ6VXNlcjcyODkyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/7289205?v=4","gravatar_id":"","url":"https://api.github.com/users/dene14","html_url":"https://github.com/dene14","followers_url":"https://api.github.com/users/dene14/followers","following_url":"https://api.github.com/users/dene14/following{/other_user}","gists_url":"https://api.github.com/users/dene14/gists{/gist_id}","starred_url":"https://api.github.com/users/dene14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dene14/subscriptions","organizations_url":"https://api.github.com/users/dene14/orgs","repos_url":"https://api.github.com/users/dene14/repos","events_url":"https://api.github.com/users/dene14/events{/privacy}","received_events_url":"https://api.github.com/users/dene14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T21:18:40Z","updated_at":"2019-04-19T21:18:40Z","author_association":"CONTRIBUTOR","body":"I'm not proposing to replace current way to configure druid... I'm asking\nfor an alternative way to use machine-generated configuration...\n\nOn Fri, Apr 19, 2019 at 11:31 PM pdeva <notifications@github.com> wrote:\n\n> dear sirs,\n> its already insanity to configure druid.\n>\n> please don't take away the simple properties file format, which i can add\n> comments in and not worry about indentation.\n>\n> json/yaml is insanity\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/issues/7511#issuecomment-485006756>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABXTS5P2A7H47TLF3HHZLO3PRITZZANCNFSM4HHDVCNQ>\n> .\n>\n\n\n-- \nBest regards,\nDenis Boulas\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485016744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485017361","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485017361","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485017361,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAxNzM2MQ==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T21:21:57Z","updated_at":"2019-04-19T21:22:49Z","author_association":"CONTRIBUTOR","body":"> it worked fine with empty arrays previously\r\n\r\nJust to be precise, I don't believe it was an empty array. It was an array with NaNs. If you asked for four quantiles, you would get four NaNs. Would you like this to happen or would you like an empty array?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485017361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485026779","html_url":"https://github.com/apache/druid/pull/7493#issuecomment-485026779","issue_url":"https://api.github.com/repos/apache/druid/issues/7493","id":485026779,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAyNjc3OQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T22:14:06Z","updated_at":"2019-04-19T22:14:06Z","author_association":"CONTRIBUTOR","body":"Made a quick note on the wording of the notice and I think it is good otherwise. 👍 once my comment above is addressed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485026779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485028228","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485028228","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485028228,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAyODIyOA==","user":{"login":"pdeva","id":3190176,"node_id":"MDQ6VXNlcjMxOTAxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3190176?v=4","gravatar_id":"","url":"https://api.github.com/users/pdeva","html_url":"https://github.com/pdeva","followers_url":"https://api.github.com/users/pdeva/followers","following_url":"https://api.github.com/users/pdeva/following{/other_user}","gists_url":"https://api.github.com/users/pdeva/gists{/gist_id}","starred_url":"https://api.github.com/users/pdeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdeva/subscriptions","organizations_url":"https://api.github.com/users/pdeva/orgs","repos_url":"https://api.github.com/users/pdeva/repos","events_url":"https://api.github.com/users/pdeva/events{/privacy}","received_events_url":"https://api.github.com/users/pdeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T22:23:20Z","updated_at":"2019-04-19T22:23:20Z","author_association":"CONTRIBUTOR","body":"i would prefer an empty array.  ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485028228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485032091","html_url":"https://github.com/apache/druid/pull/7507#issuecomment-485032091","issue_url":"https://api.github.com/repos/apache/druid/issues/7507","id":485032091,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAzMjA5MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T22:49:46Z","updated_at":"2019-04-19T22:49:46Z","author_association":"CONTRIBUTOR","body":"Looks great, thank you 👍 \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485032091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485038073","html_url":"https://github.com/apache/druid/issues/7439#issuecomment-485038073","issue_url":"https://api.github.com/repos/apache/druid/issues/7439","id":485038073,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTAzODA3Mw==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-19T23:35:15Z","updated_at":"2019-04-19T23:35:15Z","author_association":"NONE","body":"Updated proposal to change `PUT` to `POST` as `PUT` is supposed to be idempotent and these API's may not be idempotent if invoked multiple times. Specified the exclusivity behavior of the interval start/end values.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485038073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485041675","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485041675","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485041675,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0MTY3NQ==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:07:42Z","updated_at":"2019-04-20T00:07:42Z","author_association":"CONTRIBUTOR","body":"So you would need to check if the size is zero. How this special treatment better than checking for null?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485041675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485042855","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-485042855","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":485042855,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0Mjg1NQ==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:19:26Z","updated_at":"2019-04-20T00:19:26Z","author_association":"CONTRIBUTOR","body":"@quenlang @jihoonson \r\nWhat is the status of this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485042855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043070","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-485043070","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":485043070,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0MzA3MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:21:57Z","updated_at":"2019-04-20T00:21:57Z","author_association":"CONTRIBUTOR","body":"Ah sorry, I couldn't have time to look into this yet.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043151","html_url":"https://github.com/apache/druid/issues/7098#issuecomment-485043151","issue_url":"https://api.github.com/repos/apache/druid/issues/7098","id":485043151,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0MzE1MQ==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:22:48Z","updated_at":"2019-04-20T00:22:48Z","author_association":"CONTRIBUTOR","body":"@pdeva @gianm \r\nWhat is the status of this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043403","html_url":"https://github.com/apache/druid/issues/6795#issuecomment-485043403","issue_url":"https://api.github.com/repos/apache/druid/issues/6795","id":485043403,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0MzQwMw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:25:16Z","updated_at":"2019-04-20T00:25:16Z","author_association":"CONTRIBUTOR","body":"@csimplestring @gianm \r\nWhat is the status of this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043492","html_url":"https://github.com/apache/druid/issues/7098#issuecomment-485043492","issue_url":"https://api.github.com/repos/apache/druid/issues/7098","id":485043492,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0MzQ5Mg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:26:29Z","updated_at":"2019-04-20T00:26:29Z","author_association":"CONTRIBUTOR","body":"The quantiles sketch issue described here was fixed in 0.14.0 with https://github.com/apache/incubator-druid/pull/6882","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485043492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485046057","html_url":"https://github.com/apache/druid/issues/6743#issuecomment-485046057","issue_url":"https://api.github.com/repos/apache/druid/issues/6743","id":485046057,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA0NjA1Nw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T00:57:46Z","updated_at":"2019-04-20T00:57:46Z","author_association":"CONTRIBUTOR","body":"@gianm \r\nThis topic has been inactive for a while, but the issue still exists.  As we have been integrating our C++ versions of our sketches into PostgreSQL we have learned about how they solve this problem.   Custom UDFs perform memory allocations and destruction using the Postgres supplied \"palloc\" and \"pfree\" functions. This way, Postgres can track and manage the allocation and free processes in the context of queries or transactions.  This way, when the contexts are closed, all the allocated memory can be guaranteed to be freed.  \r\n\r\nInside a specific aggregation function every allocation for space (for an array for example) is performed via these palloc and pfree functions.  The aggregation function does not have to live in a contiguous chunk of memory, which make the design of the aggregation function much easier.  \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485046057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485050053","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-485050053","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":485050053,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA1MDA1Mw==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T02:00:58Z","updated_at":"2019-04-20T02:00:58Z","author_association":"NONE","body":"> Ah sorry, I couldn't have time to look into this yet.\r\n@jihoonson Sadly to hear that but thank you all the same.\r\n@leerho We are always waiting for a reply. Can you have a look? \r\nthank you so much.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485050053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485062576","html_url":"https://github.com/apache/druid/issues/1372#issuecomment-485062576","issue_url":"https://api.github.com/repos/apache/druid/issues/1372","id":485062576,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTA2MjU3Ng==","user":{"login":"zen201415","id":43231952,"node_id":"MDQ6VXNlcjQzMjMxOTUy","avatar_url":"https://avatars.githubusercontent.com/u/43231952?v=4","gravatar_id":"","url":"https://api.github.com/users/zen201415","html_url":"https://github.com/zen201415","followers_url":"https://api.github.com/users/zen201415/followers","following_url":"https://api.github.com/users/zen201415/following{/other_user}","gists_url":"https://api.github.com/users/zen201415/gists{/gist_id}","starred_url":"https://api.github.com/users/zen201415/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zen201415/subscriptions","organizations_url":"https://api.github.com/users/zen201415/orgs","repos_url":"https://api.github.com/users/zen201415/repos","events_url":"https://api.github.com/users/zen201415/events{/privacy}","received_events_url":"https://api.github.com/users/zen201415/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T06:22:19Z","updated_at":"2019-04-20T06:22:19Z","author_association":"NONE","body":" I had the same problem. How to use this function？、","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485062576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485133176","html_url":"https://github.com/apache/druid/pull/7281#issuecomment-485133176","issue_url":"https://api.github.com/repos/apache/druid/issues/7281","id":485133176,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTEzMzE3Ng==","user":{"login":"xueyumusic","id":95261,"node_id":"MDQ6VXNlcjk1MjYx","avatar_url":"https://avatars.githubusercontent.com/u/95261?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyumusic","html_url":"https://github.com/xueyumusic","followers_url":"https://api.github.com/users/xueyumusic/followers","following_url":"https://api.github.com/users/xueyumusic/following{/other_user}","gists_url":"https://api.github.com/users/xueyumusic/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyumusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyumusic/subscriptions","organizations_url":"https://api.github.com/users/xueyumusic/orgs","repos_url":"https://api.github.com/users/xueyumusic/repos","events_url":"https://api.github.com/users/xueyumusic/events{/privacy}","received_events_url":"https://api.github.com/users/xueyumusic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T14:48:43Z","updated_at":"2019-04-20T14:48:43Z","author_association":"CONTRIBUTOR","body":"@gianm How about writing a new rule such as DruidReduceEqualNullRule which makes `a=null` as `a=''` when nessesary.. thanks","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485133176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485152834","html_url":"https://github.com/apache/druid/pull/7281#issuecomment-485152834","issue_url":"https://api.github.com/repos/apache/druid/issues/7281","id":485152834,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTE1MjgzNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T19:13:32Z","updated_at":"2019-04-20T19:13:32Z","author_association":"CONTRIBUTOR","body":"> @gianm How about writing a new rule such as DruidReduceEqualNullRule which makes a=null as a='' when nessesary.. thanks\r\n\r\nThat seems reasonable if it gets us the behavior we want. I'm not sure if we will be able to get 100% there, though, because consider operators like `COALESCE(x, y)`. In the default mode, we want this to return `y` if `x` is an empty string. But in SQL compliant mode, we want this to return `x` if `x` is an empty string (and return `y` if `x` is null). Right now, I think this works -- see \"testCoalesceColumns\" in CalciteQueryTest -- but it might be \"by accident\".","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485152834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485154464","html_url":"https://github.com/apache/druid/pull/7512#issuecomment-485154464","issue_url":"https://api.github.com/repos/apache/druid/issues/7512","id":485154464,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTE1NDQ2NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T19:23:26Z","updated_at":"2019-04-20T19:23:26Z","author_association":"CONTRIBUTOR","body":"Thanks for the review & test @jihoonson!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485154464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485178732","html_url":"https://github.com/apache/druid/pull/7520#issuecomment-485178732","issue_url":"https://api.github.com/repos/apache/druid/issues/7520","id":485178732,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTE3ODczMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-20T21:45:45Z","updated_at":"2019-04-20T21:45:45Z","author_association":"CONTRIBUTOR","body":"Some of the CI failures look legit, including `org.apache.druid.indexing.kafka.KafkaIndexTaskClientTest.testTaskLocationMismatch`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485178732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485228883","html_url":"https://github.com/apache/druid/issues/7161#issuecomment-485228883","issue_url":"https://api.github.com/repos/apache/druid/issues/7161","id":485228883,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTIyODg4Mw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-21T06:34:59Z","updated_at":"2019-04-21T06:34:59Z","author_association":"CONTRIBUTOR","body":"@leventov \r\nBTW, I have checked into DataSketches/sketches-core a new sketch I have specifically developed with this issue in mind for Druid.  It is called Frequent Distinct Tuples (FDT Sketch.  I would appreciate it if someone could experiment with it.  So now there are 2 sketches we have to help Druid deal with “TopN” issues. This plus the FIS Sketch.  I can make myself available for a short tutorial if anyone is interested on how to get started.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485228883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485238338","html_url":"https://github.com/apache/druid/pull/6327#issuecomment-485238338","issue_url":"https://api.github.com/repos/apache/druid/issues/6327","id":485238338,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTIzODMzOA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-04-21T09:34:55Z","updated_at":"2019-04-21T09:34:55Z","author_association":"NONE","body":"This pull request has been closed due to lack of activity. If you think that is incorrect, or the pull request requires review, you can revive the PR at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485238338/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485264129","html_url":"https://github.com/apache/druid/issues/7519#issuecomment-485264129","issue_url":"https://api.github.com/repos/apache/druid/issues/7519","id":485264129,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTI2NDEyOQ==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-21T16:21:11Z","updated_at":"2019-04-21T16:21:11Z","author_association":"NONE","body":"I tried debugging, but didn't find the exact reason\r\neither its jar mismatch or I might have missed adding a configuration.\r\n\r\nI tried adding `druid.host=<ip>` \r\nin both common.runtime.properties and also coordinator/runtime.properties, but no luck","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485264129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485268077","html_url":"https://github.com/apache/druid/pull/5913#issuecomment-485268077","issue_url":"https://api.github.com/repos/apache/druid/issues/5913","id":485268077,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTI2ODA3Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-04-21T17:20:35Z","updated_at":"2019-04-21T17:20:35Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 1 week if no further activity occurs. If you think that’s incorrect or this pull request requires a review, please simply write any comment. If closed, you can revive the PR at any time and @mention a reviewer or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485268077/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485286431","html_url":"https://github.com/apache/druid/pull/6979#issuecomment-485286431","issue_url":"https://api.github.com/repos/apache/druid/issues/6979","id":485286431,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTI4NjQzMQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-04-21T22:20:36Z","updated_at":"2019-04-21T22:20:36Z","author_association":"NONE","body":"This pull request has been closed due to lack of activity. If you think that is incorrect, or the pull request requires review, you can revive the PR at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485286431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485323464","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-485323464","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":485323464,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTMyMzQ2NA==","user":{"login":"zhangxinyu1","id":12528894,"node_id":"MDQ6VXNlcjEyNTI4ODk0","avatar_url":"https://avatars.githubusercontent.com/u/12528894?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangxinyu1","html_url":"https://github.com/zhangxinyu1","followers_url":"https://api.github.com/users/zhangxinyu1/followers","following_url":"https://api.github.com/users/zhangxinyu1/following{/other_user}","gists_url":"https://api.github.com/users/zhangxinyu1/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangxinyu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangxinyu1/subscriptions","organizations_url":"https://api.github.com/users/zhangxinyu1/orgs","repos_url":"https://api.github.com/users/zhangxinyu1/repos","events_url":"https://api.github.com/users/zhangxinyu1/events{/privacy}","received_events_url":"https://api.github.com/users/zhangxinyu1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T04:45:13Z","updated_at":"2019-04-22T04:45:13Z","author_association":"CONTRIBUTOR","body":"We should find out the difference between segments list in db and the segments list of the hadoop-indexing-task. Could you please add some logs in the method `updateSegmentListIfDatasourcePathSpecIsUsed()` of `HadoopIngestionSpec.java`? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485323464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485416480","html_url":"https://github.com/apache/druid/pull/6365#issuecomment-485416480","issue_url":"https://api.github.com/repos/apache/druid/issues/6365","id":485416480,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQxNjQ4MA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T13:20:35Z","updated_at":"2019-04-22T13:20:35Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 1 week if no further activity occurs. If you think that’s incorrect or this pull request requires a review, please simply write any comment. If closed, you can revive the PR at any time and @mention a reviewer or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485416480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485418674","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-485418674","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":485418674,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQxODY3NA==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T13:30:06Z","updated_at":"2019-04-23T06:26:31Z","author_association":"NONE","body":"I've added some logs:\r\n\r\n```\r\nif (segmentsList.size() == userSuppliedSegmentsList.size()) {\r\n  Set<DataSegment> segmentsSet = new HashSet<>(segmentsList);\r\n\r\n  for (DataSegment userSegment : userSuppliedSegmentsList) {\r\n    if (!segmentsSet.contains(userSegment)) {\r\n      log.error(\"Segment %s is not present in %s\",\r\n              userSegment,\r\n              segmentsSet.stream()\r\n                      .map(DataSegment::toString)\r\n                      .collect(Collectors.joining(\",\"))\r\n      );\r\n      throw new IOException(\"user supplied segments list did not match with segments list obtained from db\");\r\n    }\r\n  }\r\n} else {\r\n  log.error(\"Different segment size: %d != %d\", segmentsList.size(), userSuppliedSegmentsList.size());\r\n  throw new IOException(\"user supplied segments list did not match with segments list obtained from db\");\r\n}\r\n```\r\n\r\nand this is the error message:\r\n\r\n```\r\n2019-04-22T13:15:22,551 ERROR [task-runner-0-priority-0] org.apache.druid.indexer.HadoopIngestionSpec - Different segment size: 37 != 7\r\n2019-04-22T13:15:22,551 ERROR [task-runner-0-priority-0] org.apache.druid.indexing.common.task.HadoopIndexTask - Encountered exception in run():\r\njava.io.IOException: user supplied segments list did not match with segments list obtained from db\r\n\tat org.apache.druid.indexer.HadoopIngestionSpec.updateSegmentListIfDatasourcePathSpecIsUsed(HadoopIngestionSpec.java:204) ~[druid-indexing-hadoop-0.13.1-incubating-SNAPSHOT.jar:0.13.1-incubating-SNAPSHOT]\r\n\tat org.apache.druid.indexing.common.task.HadoopIndexTask.runInternal(HadoopIndexTask.java:265) ~[druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n\tat org.apache.druid.indexing.common.task.HadoopIndexTask.run(HadoopIndexTask.java:232) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n\tat org.apache.druid.indexing.overlord.SingleTaskBackgroundRunner$SingleTaskBackgroundRunnerCallable.call(SingleTaskBackgroundRunner.java:421) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n\tat org.apache.druid.indexing.overlord.SingleTaskBackgroundRunner$SingleTaskBackgroundRunnerCallable.call(SingleTaskBackgroundRunner.java:393) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_201]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_201]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_201]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_201]\r\n```\r\n\r\nIn Aurora I've found `7` rows by running:\r\n\r\n```\r\nSELECT *\r\nFROM druid_segments\r\nWHERE\r\n    dataSource = \"the-data-source\"\r\n    AND used   = true\r\n    AND start  >= \"2018-01-29T00:00:00.000Z\"\r\n    AND end    <= \"2018-02-05T00:00:00.000Z\";\r\n```\r\n\r\nwhich is the number specified by the aforementioned exception.\r\n\r\nThe S3 is also containing `7` files:\r\n```\r\naws s3 ls --profile meru-prod s3://.../segments/the-data-source/2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/\r\n                           PRE 0/\r\n                           PRE 1/\r\n                           PRE 2/\r\n                           PRE 3/\r\n                           PRE 4/\r\n                           PRE 5/\r\n                           PRE 6/\r\n```\r\n\r\nI don't know yet why `segmentsList` has `37` elements.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485418674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485419565","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-485419565","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":485419565,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQxOTU2NQ==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T13:33:42Z","updated_at":"2019-04-22T13:33:42Z","author_association":"NONE","body":"The Overlord is also showing `7` segments for the base data surce:\r\n\r\n`7 segments (3.62 GB) for 2018-01-29T00 to 2018-02-05T00`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485419565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485420974","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-485420974","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":485420974,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQyMDk3NA==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T13:39:45Z","updated_at":"2019-04-23T06:32:47Z","author_association":"NONE","body":"The spec (which contains `7` segments):\r\n\r\n```\r\n{\r\n  \"payload\": {\r\n    \"classpathPrefix\": null,\r\n    \"context\": {\r\n      \"maxTaskCount\": 1,\r\n      \"minDataLagMs\": 172800000\r\n    },\r\n    \"dataSource\": \"...\",\r\n    \"groupId\": \"...\",\r\n    \"hadoopDependencyCoordinates\": [\r\n      \"org.apache.hadoop:hadoop-client:2.7.3\"\r\n    ],\r\n    \"id\": \"the-id\",\r\n    \"resource\": {\r\n      \"availabilityGroup\": \"...\",\r\n      \"requiredCapacity\": 1\r\n    },\r\n    \"spec\": {\r\n      \"dataSchema\": {\r\n        \"dataSource\": \"...\",\r\n        \"granularitySpec\": {\r\n          \"intervals\": [\r\n            \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\"\r\n          ],\r\n          \"queryGranularity\": {\r\n            \"type\": \"none\"\r\n          },\r\n          \"rollup\": true,\r\n          \"type\": \"arbitrary\"\r\n        },\r\n        \"metricsSpec\": [\r\n\t\t\t...\r\n        ],\r\n        \"parser\": {\r\n          \"parseSpec\": {\r\n            \"dimensionsSpec\": {\r\n              \"dimensionExclusions\": [],\r\n              \"dimensions\": [\r\n                ...\r\n              ]\r\n            },\r\n            \"format\": \"timeAndDims\"\r\n          },\r\n          \"type\": \"map\"\r\n        },\r\n        \"transformSpec\": {\r\n          \"filter\": null,\r\n          \"transforms\": []\r\n        }\r\n      },\r\n      \"ioConfig\": {\r\n        \"inputSpec\": {\r\n          \"ingestionSpec\": {\r\n            \"dataSource\": \"...\",\r\n            \"dimensions\": null,\r\n            \"filter\": null,\r\n            \"ignoreWhenNoSegments\": false,\r\n            \"intervals\": [\r\n              \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\"\r\n            ],\r\n            \"metrics\": null,\r\n            \"segments\": [\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/0/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 0,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 497736710,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_1\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/1/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 1,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 533520591,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_2\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/2/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 2,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 509401366,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_3\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/3/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 3,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 499634299,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_4\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/4/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 4,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 536469931,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_5\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/5/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 5,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 531237597,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              },\r\n              {\r\n                \"binaryVersion\": 9,\r\n                \"dataSource\": \"...,\r\n                \"dimensions\": \"...\",\r\n                \"identifier\": \"...2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_6\",\r\n                \"interval\": \"2018-01-29T00:00:00.000Z/2018-02-05T00:00:00.000Z\",\r\n                \"loadSpec\": {\r\n                  \"S3Schema\": \"s3n\",\r\n                  \"bucket\": \"...\",\r\n                  \"key\": \".../2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z/2018-05-24T09:30:16.545Z/6/index.zip\",\r\n                  \"type\": \"s3_zip\"\r\n                },\r\n                \"metrics\": \"...\",\r\n                \"shardSpec\": {\r\n                  \"partitionNum\": 6,\r\n                  \"partitions\": 7,\r\n                  \"type\": \"numbered\"\r\n                },\r\n                \"size\": 516432248,\r\n                \"version\": \"2018-05-24T09:30:16.545Z\"\r\n              }\r\n            ],\r\n            \"transformSpec\": {\r\n              \"filter\": null,\r\n              \"transforms\": []\r\n            }\r\n          },\r\n          \"type\": \"dataSource\"\r\n        },\r\n        \"metadataUpdateSpec\": null,\r\n        \"segmentOutputPath\": null,\r\n        \"type\": \"hadoop\"\r\n      },\r\n      \"tuningConfig\": {\r\n        \"allowedHadoopPrefix\": [],\r\n        \"buildV9Directly\": true,\r\n        \"cleanupOnFailure\": true,\r\n        \"combineText\": false,\r\n        \"forceExtendableShardSpecs\": false,\r\n        \"ignoreInvalidRows\": false,\r\n        \"indexSpec\": {\r\n          \"bitmap\": {\r\n            \"type\": \"concise\"\r\n          },\r\n          \"dimensionCompression\": \"lz4\",\r\n          \"longEncoding\": \"longs\",\r\n          \"metricCompression\": \"lz4\"\r\n        },\r\n        \"jobProperties\": {\r\n          \"fs.s3.impl\": \"org.apache.hadoop.fs.s3native.NativeS3FileSystem\",\r\n          \"fs.s3n.impl\": \"org.apache.hadoop.fs.s3native.NativeS3FileSystem\",\r\n          \"io.compression.codecs\": \"org.apache.hadoop.io.compress.GzipCodec,org.apache.hadoop.io.compress.DefaultCodec,org.apache.hadoop.io.compress.BZip2Codec,org.apache.hadoop.io.compress.SnappyCodec\",\r\n          \"mapreduce.job.classloader\": \"true\"\r\n        },\r\n        \"leaveIntermediate\": false,\r\n        \"logParseExceptions\": false,\r\n        \"maxBytesInMemory\": 0,\r\n        \"maxParseExceptions\": 0,\r\n        \"maxRowsInMemory\": 1000000,\r\n        \"numBackgroundPersistThreads\": 0,\r\n        \"overwriteFiles\": false,\r\n        \"partitionsSpec\": {\r\n          \"assumeGrouped\": false,\r\n          \"maxPartitionSize\": -1,\r\n          \"numShards\": -1,\r\n          \"partitionDimensions\": [],\r\n          \"targetPartitionSize\": -1,\r\n          \"type\": \"hashed\"\r\n        },\r\n        \"shardSpecs\": {},\r\n        \"type\": \"hadoop\",\r\n        \"useCombiner\": false,\r\n        \"useExplicitVersion\": true,\r\n        \"version\": \"2018-05-24T10:24:35.928Z\",\r\n        \"workingPath\": null\r\n      },\r\n      \"uniqueId\": \"17123d0ad0da4a56b43beb56670a3af1\"\r\n    },\r\n    \"type\": \"index_hadoop\"\r\n  },\r\n  \"task\": \"...\"\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485420974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485446165","html_url":"https://github.com/apache/druid/pull/7363#issuecomment-485446165","issue_url":"https://api.github.com/repos/apache/druid/issues/7363","id":485446165,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQ0NjE2NQ==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T15:14:57Z","updated_at":"2019-04-22T15:14:57Z","author_association":"MEMBER","body":"@jihoonson @b-slim: Can you please help with the review here ? \r\nIt will be a nice addition to 0.15 release. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485446165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485480091","html_url":"https://github.com/apache/druid/issues/7161#issuecomment-485480091","issue_url":"https://api.github.com/repos/apache/druid/issues/7161","id":485480091,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQ4MDA5MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T17:12:07Z","updated_at":"2019-04-22T17:12:07Z","author_association":"MEMBER","body":"@leerho I support your stance in #7187. But, unfortunately, I won't be able to work myself on these ideas in the near future.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485480091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485492329","html_url":"https://github.com/apache/druid/pull/6794#issuecomment-485492329","issue_url":"https://api.github.com/repos/apache/druid/issues/6794","id":485492329,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQ5MjMyOQ==","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T17:51:07Z","updated_at":"2019-04-22T17:51:07Z","author_association":"MEMBER","body":"The batch iterators used here use a lot less memory per bitmap iteration as of RoaringBitmap 0.8.2 [(see here)](https://github.com/RoaringBitmap/RoaringBitmap/pull/329/).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485492329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485529475","html_url":"https://github.com/apache/druid/pull/7206#issuecomment-485529475","issue_url":"https://api.github.com/repos/apache/druid/issues/7206","id":485529475,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTUyOTQ3NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T19:50:06Z","updated_at":"2019-04-22T19:50:06Z","author_association":"CONTRIBUTOR","body":"A broad question: is the intent of this PR template to put our current practices into writing, or to define a new set of expected practices? I'm asking because there are a lot of things this template asks for that we do not currently always ask for on every PR.\r\n\r\nIf the intent is to put current practices into writing, I think we should make that clear by calling out what things are required and what are more like suggestions for gold-standard best practices (but, ultimately, not necessarily required).\r\n\r\nIf the intent is to define a new set of expected practices, that should _also_ be made clear.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485529475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485543782","html_url":"https://github.com/apache/druid/issues/7439#issuecomment-485543782","issue_url":"https://api.github.com/repos/apache/druid/issues/7439","id":485543782,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU0Mzc4Mg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T20:37:16Z","updated_at":"2019-04-22T20:38:21Z","author_association":"CONTRIBUTOR","body":"> In case of overshadowed segments found in the interval or segment-ids payload, the reload API would return response code 200 and response body would contain the number of non-overshadowed segments that were successfully reloaded.\r\n\r\nReturning a count of affected segments is good for the default case, but I think a non-default option on the API to report per-segment errors/failures in the response would be useful, in case the user wants to know info at such granularity. I think this can be done in a follow-on patch to the PRs that implement this proposal, if you agree that it's useful.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485543782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485551762","html_url":"https://github.com/apache/druid/issues/7519#issuecomment-485551762","issue_url":"https://api.github.com/repos/apache/druid/issues/7519","id":485551762,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU1MTc2Mg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T21:03:04Z","updated_at":"2019-04-22T21:03:04Z","author_association":"CONTRIBUTOR","body":"This error doesn't look like it's fatal and your services seem to be up:\r\n\r\n```\r\n2019-04-21T13:59:26,712 CONFIG [main] com.sun.jersey.server.impl.managedbeans.ManagedBeanComponentProviderFactoryInitilizer - The managed beans injection manager API is not available. JAX-RS managed beans support is disabled.\r\n```\r\n\r\n> {\"id\":\"event_datasource\"} but no records found in druid_datasource table\r\n\r\nIt sounds like the real issue here is some kind of ingestion issue, you could check the task logs and reports (http://druid.io/docs/latest/ingestion/reports.html) for those tasks to see if any events were actually ingested.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485551762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485565696","html_url":"https://github.com/apache/druid/pull/6365#issuecomment-485565696","issue_url":"https://api.github.com/repos/apache/druid/issues/6365","id":485565696,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU2NTY5Ng==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T21:53:39Z","updated_at":"2019-04-22T21:53:39Z","author_association":"MEMBER","body":"Apologies, this PR fell off my radar and I forgot about it, could you resolve the conflicts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485565696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485575165","html_url":"https://github.com/apache/druid/issues/7161#issuecomment-485575165","issue_url":"https://api.github.com/repos/apache/druid/issues/7161","id":485575165,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU3NTE2NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-22T22:32:41Z","updated_at":"2019-04-22T22:32:41Z","author_association":"CONTRIBUTOR","body":"@leerho Do you have any documentation on what the FDT sketch is capable of? I'm curious how it can be mapped onto two important things: use cases and SQL.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485575165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485600214","html_url":"https://github.com/apache/druid/issues/7161#issuecomment-485600214","issue_url":"https://api.github.com/repos/apache/druid/issues/7161","id":485600214,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYwMDIxNA==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T00:41:34Z","updated_at":"2019-04-23T00:41:34Z","author_association":"CONTRIBUTOR","body":"@gianm \r\nYes, the initial docs are the Javadocs, (duplicated on the website) I am working on more extensive docs including some accuracy characterization studies, which are more complicated to do.  Meanwhile:  See [FdtSketch Javadoc](https://github.com/DataSketches/sketches-core/blob/master/src/main/java/com/yahoo/sketches/fdt/FdtSketch.java).  \r\n\r\nAlso see [unit tests](https://github.com/DataSketches/sketches-core/blob/master/src/test/java/com/yahoo/sketches/fdt/FdtSketchTest.java) for some real simple examples to get started.  But don't use the FdtSketch(lgK) to configure, use the FdtSketch(threshold, rse) to configure the sketch. You can start out by trying numbers like FdtSketch(0.01, 0.05), which means you will capture distincts that are greater than at least 10% of the overall population of distincts where the Relative Standard Error (at 68% confidence) will be 5% or better. \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485600214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601128","html_url":"https://github.com/apache/druid/pull/7526#issuecomment-485601128","issue_url":"https://api.github.com/repos/apache/druid/issues/7526","id":485601128,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYwMTEyOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T00:47:29Z","updated_at":"2019-04-23T00:47:29Z","author_association":"CONTRIBUTOR","body":"Could you add a test for this please? (It seems like the kind of thing that's likely to get missed if the code is ever refactored, so a test is good to protect against that.)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601317","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485601317","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485601317,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYwMTMxNw==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T00:48:30Z","updated_at":"2019-04-23T00:48:30Z","author_association":"CONTRIBUTOR","body":"If I recall, all of the aggregators have a \"default\" state. Things like sum are 0, things like max are MIN_VALUE, things like min are MAX_VALUE. From the returned results the `quantilesDoublesSketch` returns 0 on empty. Would it ever make sense for the `quantilesDoublesSketchToQuantiles` to return an array of 0's? I suspect that will end up causing more confusion than clarity, and isn't really representative of the base state for quantiles.\r\n\r\nFor `null` I can't think of any other aggregator which has `null` as the default state. If there is one it would provide precedence here to use `null` for \"no data\". \r\n\r\nIn other parts of the code `org.apache.druid.query.aggregation.histogram.ApproximateHistogram#getQuantiles` uses an array of `NaN`. But `org.apache.druid.query.aggregation.histogram.FixedBucketsHistogram#percentilesFloat` seems to return 0.  So handling this case is a bit all over the map :-/ ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601705","html_url":"https://github.com/apache/druid/issues/4907#issuecomment-485601705","issue_url":"https://api.github.com/repos/apache/druid/issues/4907","id":485601705,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYwMTcwNQ==","user":{"login":"xvrl","id":815147,"node_id":"MDQ6VXNlcjgxNTE0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/815147?v=4","gravatar_id":"","url":"https://api.github.com/users/xvrl","html_url":"https://github.com/xvrl","followers_url":"https://api.github.com/users/xvrl/followers","following_url":"https://api.github.com/users/xvrl/following{/other_user}","gists_url":"https://api.github.com/users/xvrl/gists{/gist_id}","starred_url":"https://api.github.com/users/xvrl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvrl/subscriptions","organizations_url":"https://api.github.com/users/xvrl/orgs","repos_url":"https://api.github.com/users/xvrl/repos","events_url":"https://api.github.com/users/xvrl/events{/privacy}","received_events_url":"https://api.github.com/users/xvrl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T00:50:50Z","updated_at":"2019-04-23T00:50:50Z","author_association":"MEMBER","body":"This particular error has been fixed with #7466, however there is still more work to be done to support Java 9 and above. I suggest we track all issues related to newer JDK compatibility as part of #5589 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485601705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485620637","html_url":"https://github.com/apache/druid/issues/7519#issuecomment-485620637","issue_url":"https://api.github.com/repos/apache/druid/issues/7519","id":485620637,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYyMDYzNw==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T02:37:16Z","updated_at":"2019-04-23T03:37:15Z","author_association":"NONE","body":"Thanks @jon-wei for your response\r\n\r\nBelow is my datasource spec, I'm using schema less dimension\r\n\r\n```\r\n{\r\n  \"type\": \"kafka\",\r\n  \"dataSchema\": {\r\n    \"dataSource\": \"event_datasource\",\r\n    \"parser\": {\r\n      \"type\": \"string\",\r\n      \"parseSpec\": {\r\n        \"format\": \"json\",\r\n        \"timestampSpec\": {\r\n          \"column\": \"time\",\r\n          \"format\": \"auto\"\r\n        },\r\n        \"dimensionsSpec\": {\r\n          \"dimensions\": [],\r\n          \"dimensionExclusions\": [\r\n            \"timestamp\",\r\n            \"value\"\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    \"metricsSpec\" : [\r\n      {\r\n        \"name\": \"count\",\r\n        \"type\": \"count\"\r\n      },\r\n      {\r\n        \"name\": \"value_sum\",\r\n        \"fieldName\": \"value\",\r\n        \"type\": \"doubleSum\"\r\n      },\r\n      {\r\n        \"name\": \"value_min\",\r\n        \"fieldName\": \"value\",\r\n        \"type\": \"doubleMin\"\r\n      },\r\n      {\r\n        \"name\": \"value_max\",\r\n        \"fieldName\": \"value\",\r\n        \"type\": \"doubleMax\"\r\n      }\r\n    ],\r\n    \"granularitySpec\": {\r\n      \"type\": \"uniform\",\r\n      \"segmentGranularity\": \"HOUR\",\r\n      \"queryGranularity\": \"NONE\",\r\n      \"rollup\": false\r\n    }\r\n  },\r\n  \"tuningConfig\": {\r\n    \"type\": \"kafka\",\r\n    \"reportParseExceptions\": false\r\n  },\r\n  \"ioConfig\": {\r\n    \"topic\": \"event_traffic\",\r\n    \"replicas\": 1,\r\n    \"taskDuration\": \"PT10M\",\r\n    \"completionTimeout\": \"PT20M\",\r\n    \"consumerProperties\": {\r\n      \"bootstrap.servers\": \"<ip1>:<port1>,<ip2>:<port2>,<ip3>:<port3>\"\r\n    }\r\n  }\r\n}\r\n```\r\nThe ingested message is this\r\n\r\n```\r\n{\r\n\t\"zip\": \"560076\",\r\n\t\"continent\": \"AS\",\r\n\t\"country\": \"India\",\r\n\t\"os\": \"Mac OS X\",\r\n\t\"queryParams\": {},\r\n\t\"city\": \"Bengaluru\",\r\n\t\"latitude\": 12.9833,\r\n\t\"ipAddress\": \"12.12.12.12\",\r\n\t\"methodName\": \"GET\",\r\n\t\"userAgent\": \"Mozilla/5.0\",\r\n\t\"currentTime\": 1550330007303,\r\n\t\"osVersion\": \"10.14.3\",\r\n\t\"requestURL\": \"http://someurl\",\r\n\t\"X-Acess-Token\": null,\r\n\t\"browser\": \"Safari\",\r\n\t\"browserVersion\": \"12.0.3\",\r\n\t\"serviceProvider\": \"ACT\",\r\n\t\"deviceModel\": \"Other\",\r\n\t\"longitude\": 77.5833,\r\n\t\"authId\" : 1234,\r\n    \"profileId\" : \"5c41ff583a\",\r\n    \"uuid\" : \"bf6b01e5-64ed1c8a8e17\",\r\n    \"avatar\" : \"https://lh5.googleusercontent.com/OChxM3Vczac/s96-c/photo.jpg\",\r\n    \"chatId\" : \"abcymailcom\",\r\n    \"email\" : \"abc@gmail.com\",\r\n    \"fcmRegistrationId\" : \"dSJjEV8ut5I:APA91bE\",\r\n    \"fullName\" : \"Abc Xyz\",\r\n    \"userGender\" : null,\r\n    \"userDOB\" : null,\r\n}\r\n```\r\n\r\nThis is the task report after creating datasource and after ingesting message/data via Kafka-ingestion\r\n```\r\n{\r\n\t\"ingestionStatsAndErrors\": {\r\n\t\t\"taskId\": \"index_kafka_event_datasource_25c11ef7d533a4b_ofconddn\",\r\n\t\t\"payload\": {\r\n\t\t\t\"ingestionState\": \"COMPLETED\",\r\n\t\t\t\"unparseableEvents\": {},\r\n\t\t\t\"rowStats\": {\r\n\t\t\t\t\"buildSegments\": {\r\n\t\t\t\t\t\"processed\": 0,\r\n\t\t\t\t\t\"processedWithError\": 0,\r\n\t\t\t\t\t\"thrownAway\": 0,\r\n\t\t\t\t\t\"unparseable\": 5\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"errorMsg\": null\r\n\t\t},\r\n\t\t\"type\": \"ingestionStatsAndErrors\"\r\n\t}\r\n}\r\n```\r\n\r\nA complete log file of the same.\r\n[index-logfile.log](https://github.com/apache/incubator-druid/files/3105534/index-logfile.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485620637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485621486","html_url":"https://github.com/apache/druid/issues/7525#issuecomment-485621486","issue_url":"https://api.github.com/repos/apache/druid/issues/7525","id":485621486,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYyMTQ4Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T02:42:20Z","updated_at":"2019-04-23T02:42:20Z","author_association":"CONTRIBUTOR","body":"I buy the general idea (especially trying to make this an extension of existing multi-value dimension functionality). The fact that multi-value dimensions are created opportunistically (as arrays are detected), and not through any specific user-driven configuration, I think means it is best to make it possible for expressions written assuming singly-valued strings to be automatically lifted to work on multi-value strings. The idea around automatically wrapping in a `map` is similar to how extractionFns work on multi-value dimensions, so there is a symmetry there.\r\n\r\n> Expressions which do not have array functions, but have multi valued columns as input, will be implicitly wrapped in a map expression created using the column identifier as the lambda identifier and the actual expression as the body, and the column as the array input, e.g. for an Expr with an multi-value identifier x will become map((x) -> Expr, x). Expression filters which do not contain array functions, but have multi value columns as input will instead of map, use the any function to mimic native Druid filter behavior.\r\n\r\n![image](https://user-images.githubusercontent.com/1214075/56547879-79a36680-6533-11e9-9b45-85e7da775143.png)\r\n\r\n1. What happens if an expression has array functions, but a multi-valued input `x` is sometimes used by array functions and sometimes used by non-array functions? (We could disallow this, I suppose, on the grounds that the writer of the expression should be able to decide if they want to treat `x` as an array or not.)\r\n2. What happens if an expression has no array functions, but there are two multi-valued inputs `x` and `y`? (Do we map Expr over all possible pairings of values from `x` and `y`? Do we return… null? Do we return… some N-dimensional matrix?)\r\n3. What happens if an expression uses array functions for a multi-valued input `x` but doesn't for multi-valued inputs `y` and `z`?\r\n\r\n> Druid SQL will still have some limitations of when filtering on multi-value string dimensions compared to its native counterpart, namely the 'contradictory' filter problem illustrated in #4638, a = 'x' AND a = 'y'. Calcite will correctly realize that this is invalid syntax, and the query will result in a validation failure. \r\n\r\nI think what will really happen is Calcite will 'optimize' this filter into `FALSE` and plan the query into a no-op.\r\n\r\n> All of the expression language array functions will be mirrored in SQL. In addition, to provide SQL the ability to aggregate with multi-value dimensions as though they are arrays, a nest function, the opposite of unnest that many SQL dialects support to allow aggregations of single values like the default Druid behavior.\r\n\r\nWill there be issues if we decide to introduce real SQL array types in the future? Presumably, these expression array functions will be written such that they apply to VARCHAR (and numeric types as well?). Will they conflict with honest-to-goodness SQL array functions or is there a path to supporting both?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485621486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485631287","html_url":"https://github.com/apache/druid/pull/7528#issuecomment-485631287","issue_url":"https://api.github.com/repos/apache/druid/issues/7528","id":485631287,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTYzMTI4Nw==","user":{"login":"davidagee","id":2498690,"node_id":"MDQ6VXNlcjI0OTg2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2498690?v=4","gravatar_id":"","url":"https://api.github.com/users/davidagee","html_url":"https://github.com/davidagee","followers_url":"https://api.github.com/users/davidagee/followers","following_url":"https://api.github.com/users/davidagee/following{/other_user}","gists_url":"https://api.github.com/users/davidagee/gists{/gist_id}","starred_url":"https://api.github.com/users/davidagee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidagee/subscriptions","organizations_url":"https://api.github.com/users/davidagee/orgs","repos_url":"https://api.github.com/users/davidagee/repos","events_url":"https://api.github.com/users/davidagee/events{/privacy}","received_events_url":"https://api.github.com/users/davidagee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T03:37:33Z","updated_at":"2019-04-23T03:37:33Z","author_association":"NONE","body":"Thanks for the quick turnaround on this, @shuqi7. This is looking great!\r\n\r\nA couple of UI comments, mockups [here](https://projects.invisionapp.com/share/BRRN5D9NCT8#/screens/359215628) for reference: \r\n\r\n- Can we stack the icons and labels vertically in the left sidebar. I see in the diff you're already writing custom CSS for this so `flex-direction: column` should get you most of the way there.\r\n- Can we ensure the left nav icons are 20px20px \r\n- Left nav looks too wide\r\n- Offset the json text area from the top of the modal\r\n- Design explicitly does not use a button group for action buttons in the bottom left, they should be individual buttons with padding between them\r\n- Separator between left sidebar and content area is missing.\r\n- Adjust padding on footer area \r\n- For the base data grid, reduce width of \"Actions\" column and center-align the zoom icon.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485631287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485653999","html_url":"https://github.com/apache/druid/pull/7477#issuecomment-485653999","issue_url":"https://api.github.com/repos/apache/druid/issues/7477","id":485653999,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTY1Mzk5OQ==","user":{"login":"xvrl","id":815147,"node_id":"MDQ6VXNlcjgxNTE0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/815147?v=4","gravatar_id":"","url":"https://api.github.com/users/xvrl","html_url":"https://github.com/xvrl","followers_url":"https://api.github.com/users/xvrl/followers","following_url":"https://api.github.com/users/xvrl/following{/other_user}","gists_url":"https://api.github.com/users/xvrl/gists{/gist_id}","starred_url":"https://api.github.com/users/xvrl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvrl/subscriptions","organizations_url":"https://api.github.com/users/xvrl/orgs","repos_url":"https://api.github.com/users/xvrl/repos","events_url":"https://api.github.com/users/xvrl/events{/privacy}","received_events_url":"https://api.github.com/users/xvrl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T05:56:01Z","updated_at":"2019-04-23T05:56:01Z","author_association":"MEMBER","body":"@leventov are we good here now?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485653999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485815133","html_url":"https://github.com/apache/druid/pull/7529#issuecomment-485815133","issue_url":"https://api.github.com/repos/apache/druid/issues/7529","id":485815133,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTgxNTEzMw==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T14:00:13Z","updated_at":"2019-04-23T14:00:13Z","author_association":"CONTRIBUTOR","body":"@jintaohuang It looks like you've accidentally created a pull request instead of creating an issue for the error that you're seeing. Please use the issue template: https://github.com/apache/incubator-druid/issues/new/choose to raise an issue","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485815133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485861885","html_url":"https://github.com/apache/druid/issues/7468#issuecomment-485861885","issue_url":"https://api.github.com/repos/apache/druid/issues/7468","id":485861885,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTg2MTg4NQ==","user":{"login":"egor-ryashin","id":14215045,"node_id":"MDQ6VXNlcjE0MjE1MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/14215045?v=4","gravatar_id":"","url":"https://api.github.com/users/egor-ryashin","html_url":"https://github.com/egor-ryashin","followers_url":"https://api.github.com/users/egor-ryashin/followers","following_url":"https://api.github.com/users/egor-ryashin/following{/other_user}","gists_url":"https://api.github.com/users/egor-ryashin/gists{/gist_id}","starred_url":"https://api.github.com/users/egor-ryashin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egor-ryashin/subscriptions","organizations_url":"https://api.github.com/users/egor-ryashin/orgs","repos_url":"https://api.github.com/users/egor-ryashin/repos","events_url":"https://api.github.com/users/egor-ryashin/events{/privacy}","received_events_url":"https://api.github.com/users/egor-ryashin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T15:48:49Z","updated_at":"2019-04-23T18:31:52Z","author_association":"CONTRIBUTOR","body":"It's not supported in CALCITE https://issues.apache.org/jira/browse/CALCITE-3002 https://issues.apache.org/jira/browse/CALCITE-2302","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485861885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485862544","html_url":"https://github.com/apache/druid/issues/7469#issuecomment-485862544","issue_url":"https://api.github.com/repos/apache/druid/issues/7469","id":485862544,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTg2MjU0NA==","user":{"login":"egor-ryashin","id":14215045,"node_id":"MDQ6VXNlcjE0MjE1MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/14215045?v=4","gravatar_id":"","url":"https://api.github.com/users/egor-ryashin","html_url":"https://github.com/egor-ryashin","followers_url":"https://api.github.com/users/egor-ryashin/followers","following_url":"https://api.github.com/users/egor-ryashin/following{/other_user}","gists_url":"https://api.github.com/users/egor-ryashin/gists{/gist_id}","starred_url":"https://api.github.com/users/egor-ryashin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egor-ryashin/subscriptions","organizations_url":"https://api.github.com/users/egor-ryashin/orgs","repos_url":"https://api.github.com/users/egor-ryashin/repos","events_url":"https://api.github.com/users/egor-ryashin/events{/privacy}","received_events_url":"https://api.github.com/users/egor-ryashin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T15:50:21Z","updated_at":"2019-04-23T15:50:45Z","author_association":"CONTRIBUTOR","body":"This statement `case <operand> when <boolean_condition> ...` is actually invalid according to **SQL92** (though it works in **MySQL**).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485862544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485910663","html_url":"https://github.com/apache/druid/pull/7425#issuecomment-485910663","issue_url":"https://api.github.com/repos/apache/druid/issues/7425","id":485910663,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkxMDY2Mw==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T18:00:20Z","updated_at":"2019-04-23T18:00:20Z","author_association":"NONE","body":"thanks @leventov for the review, I believe I have addressed all the comments which are in scope for this PR, let me know if you have more comments.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485910663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485914210","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485914210","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485914210,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkxNDIxMA==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T18:09:55Z","updated_at":"2019-04-23T18:09:55Z","author_association":"CONTRIBUTOR","body":"Are you referring to the finalizeComputation() method as the \"default\" state?\r\nThis notion might make more or less sense for different sketches. Let's say, for distinct counting sketches like Theta or HLL this makes perfect sense: it must be the estimate of the distinct count. It makes much less sense for quantiles sketch that represents an arbitrary distribution of some values. We decided that the most sensible single number for this purpose would be the total weight of the distribution (also known as the stream length or the number of values, if they all have the weight of 1).\r\nNow consider an empty quantiles sketch. Nothing is known about the distribution. The total weight is zero, so there is no problem with this questionable finalizeComputation(), but we cannot say anything at all about quantiles or ranks. What is the min value, median or max or any other quantile? If a single quantile is requested, then the best answer must be NaN, not zero since zero is a perfectly good number and would be deeply misleading. What to do if an array of quantiles is requested? Options are: null, empty array and array of NaNs (the same number as in the request). We used to do the latter in the core library, but at some point (between versions 0.10.3 and 0.11.0) we decided that it did not make much sense to spend resources in the core library to create this array and fill it with NaN values. We decided to return null and let the user decide what to do in the presentation layer. So let's decide what do we want Druid to return from such a post-agg.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485914210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485917147","html_url":"https://github.com/apache/druid/pull/7526#issuecomment-485917147","issue_url":"https://api.github.com/repos/apache/druid/issues/7526","id":485917147,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkxNzE0Nw==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T18:17:55Z","updated_at":"2019-04-23T18:17:55Z","author_association":"CONTRIBUTOR","body":"Could you point me to the best example of a test for such a purpose? Should it be a micro-test (minimalistic unit test) or some sort of an integration test similar to what we do now in DoublesSketchAggregatorTest where we construct a json query and run it using the AggregationTestHelper?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485917147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485928471","html_url":"https://github.com/apache/druid/issues/7468#issuecomment-485928471","issue_url":"https://api.github.com/repos/apache/druid/issues/7468","id":485928471,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkyODQ3MQ==","user":{"login":"egor-ryashin","id":14215045,"node_id":"MDQ6VXNlcjE0MjE1MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/14215045?v=4","gravatar_id":"","url":"https://api.github.com/users/egor-ryashin","html_url":"https://github.com/egor-ryashin","followers_url":"https://api.github.com/users/egor-ryashin/followers","following_url":"https://api.github.com/users/egor-ryashin/following{/other_user}","gists_url":"https://api.github.com/users/egor-ryashin/gists{/gist_id}","starred_url":"https://api.github.com/users/egor-ryashin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egor-ryashin/subscriptions","organizations_url":"https://api.github.com/users/egor-ryashin/orgs","repos_url":"https://api.github.com/users/egor-ryashin/repos","events_url":"https://api.github.com/users/egor-ryashin/events{/privacy}","received_events_url":"https://api.github.com/users/egor-ryashin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T18:48:57Z","updated_at":"2019-04-23T18:48:57Z","author_association":"CONTRIBUTOR","body":"Actually, it's only supported in **MySQL**, I checked **PostgreSQL** 11.2 gives an error too.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485928471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485932980","html_url":"https://github.com/apache/druid/pull/7088#issuecomment-485932980","issue_url":"https://api.github.com/repos/apache/druid/issues/7088","id":485932980,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkzMjk4MA==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T19:01:39Z","updated_at":"2019-04-23T19:01:39Z","author_association":"CONTRIBUTOR","body":"@leventov - updated the PR. Does it look good to go now?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485932980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485944635","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485944635","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485944635,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTk0NDYzNQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T19:37:24Z","updated_at":"2019-04-23T19:37:24Z","author_association":"CONTRIBUTOR","body":"This discussion probably needs posted to the dev list, or else it risks being part of non-apache-way discussion paths.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485944635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485944674","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485944674","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485944674,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTk0NDY3NA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T19:37:30Z","updated_at":"2019-04-23T19:37:30Z","author_association":"CONTRIBUTOR","body":"I'm going to start a thread","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485944674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485993781","html_url":"https://github.com/apache/druid/issues/7532#issuecomment-485993781","issue_url":"https://api.github.com/repos/apache/druid/issues/7532","id":485993781,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTk5Mzc4MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T22:11:32Z","updated_at":"2019-04-23T22:11:32Z","author_association":"CONTRIBUTOR","body":"👍  sounds like a solid improvement.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485993781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485994113","html_url":"https://github.com/apache/druid/issues/7486#issuecomment-485994113","issue_url":"https://api.github.com/repos/apache/druid/issues/7486","id":485994113,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTk5NDExMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T22:12:54Z","updated_at":"2019-04-23T22:12:54Z","author_association":"CONTRIBUTOR","body":"> This discussion probably needs posted to the dev list, or else it risks being part of non-apache-way discussion paths.\r\n\r\nFwiw, my understanding is that GH discussions are OK, because they are all copied to commits@druid.apache.org and so they are recorded for posterity. But nothing wrong with raising dev threads for additional visibility.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485994113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/485995210","html_url":"https://github.com/apache/druid/pull/7526#issuecomment-485995210","issue_url":"https://api.github.com/repos/apache/druid/issues/7526","id":485995210,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTk5NTIxMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T22:17:26Z","updated_at":"2019-04-23T22:17:26Z","author_association":"CONTRIBUTOR","body":"@AlexanderSaydakov I am not intimately familiar with the code, but I'd guess that a minimalistic unit test would be best. In general I prefer unit tests when feasible.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/485995210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486001923","html_url":"https://github.com/apache/druid/pull/7535#issuecomment-486001923","issue_url":"https://api.github.com/repos/apache/druid/issues/7535","id":486001923,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjAwMTkyMw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T22:46:50Z","updated_at":"2019-04-23T22:46:50Z","author_association":"CONTRIBUTOR","body":"Shoudl this be 0.14 or 0.14.1?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486001923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486002015","html_url":"https://github.com/apache/druid/pull/7535#issuecomment-486002015","issue_url":"https://api.github.com/repos/apache/druid/issues/7535","id":486002015,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjAwMjAxNQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T22:47:12Z","updated_at":"2019-04-23T22:47:12Z","author_association":"CONTRIBUTOR","body":"I'm planning on pushing this to the website after merging, so 0.14.0","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486002015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486010079","html_url":"https://github.com/apache/druid/pull/7531#issuecomment-486010079","issue_url":"https://api.github.com/repos/apache/druid/issues/7531","id":486010079,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjAxMDA3OQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T23:25:41Z","updated_at":"2019-04-23T23:25:41Z","author_association":"CONTRIBUTOR","body":"@dclim this PR would be super useful. Thanks!\r\n\r\nPlease check the CI failure. It looks legit.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486010079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486016449","html_url":"https://github.com/apache/druid/pull/7531#issuecomment-486016449","issue_url":"https://api.github.com/repos/apache/druid/issues/7531","id":486016449,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjAxNjQ0OQ==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-23T23:58:10Z","updated_at":"2019-04-23T23:58:10Z","author_association":"CONTRIBUTOR","body":"@jihoonson yes, I've been fixing the tests to handle this (happens when `druid.generic.useDefaultValueForNull=false`), patch coming soon","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486016449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486054712","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-486054712","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":486054712,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjA1NDcxMg==","user":{"login":"zhangxinyu1","id":12528894,"node_id":"MDQ6VXNlcjEyNTI4ODk0","avatar_url":"https://avatars.githubusercontent.com/u/12528894?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangxinyu1","html_url":"https://github.com/zhangxinyu1","followers_url":"https://api.github.com/users/zhangxinyu1/followers","following_url":"https://api.github.com/users/zhangxinyu1/following{/other_user}","gists_url":"https://api.github.com/users/zhangxinyu1/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangxinyu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangxinyu1/subscriptions","organizations_url":"https://api.github.com/users/zhangxinyu1/orgs","repos_url":"https://api.github.com/users/zhangxinyu1/repos","events_url":"https://api.github.com/users/zhangxinyu1/events{/privacy}","received_events_url":"https://api.github.com/users/zhangxinyu1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T03:37:53Z","updated_at":"2019-04-24T03:37:53Z","author_association":"CONTRIBUTOR","body":"The value of `segmentsList.size()` is 37. Could you please print these segment ids? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486054712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486081859","html_url":"https://github.com/apache/druid/issues/7532#issuecomment-486081859","issue_url":"https://api.github.com/repos/apache/druid/issues/7532","id":486081859,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjA4MTg1OQ==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T06:09:19Z","updated_at":"2019-04-24T06:09:19Z","author_association":"MEMBER","body":"Thanks @gianm, looked at the code and it seems that we can avoid copy in all cases and rely on the useUniquePath flag. have created https://github.com/apache/incubator-druid/pull/7537\r\nPlease review. \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486081859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486091261","html_url":"https://github.com/apache/druid/issues/7510#issuecomment-486091261","issue_url":"https://api.github.com/repos/apache/druid/issues/7510","id":486091261,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjA5MTI2MQ==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T06:48:32Z","updated_at":"2019-04-24T06:49:59Z","author_association":"NONE","body":"For an unknown reason, the last month (`2018-01`) contains segments from both January and February:\r\n\r\n```\r\n...\r\n2018-02-01T00 | 30 | 21.7 GB\r\n2018-01-29T00 |  7 | 3.62 GB\r\n...\r\n```\r\n\r\n```\r\n30 segments (21.7 GB) for 2018-02-01T00 to 2018-03-01T00\r\n\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_1\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_10\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_11\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_12\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_13\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_14\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_15\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_16\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_17\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_18\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_19\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_2\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_20\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_21\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_22\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_23\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_24\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_25\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_26\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_27\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_28\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_29\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_3\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_4\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_5\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_6\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_7\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_8\r\nthe-datasource-druid_2018-02-01T00:00:00.000Z_2018-03-01T00:00:00.000Z_2018-09-05T13:21:49.297Z_9\r\n```\r\n\r\n```\r\n7 segments (3.62 GB) for 2018-01-29T00 to 2018-02-05T00\r\n\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_1\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_2\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_3\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_4\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_5\r\nthe-datasource-druid_2018-01-29T00:00:00.000Z_2018-02-05T00:00:00.000Z_2018-05-24T09:30:16.545Z_6\r\n```\r\nand, because of this, we are receiving that `segmentsList.size()` is `37` (`30` + `7`).\r\n\r\nIt remains to reingest that month and I'll come with the results. Thank you, @zhangxinyu1!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486091261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486164132","html_url":"https://github.com/apache/druid/issues/6806#issuecomment-486164132","issue_url":"https://api.github.com/repos/apache/druid/issues/6806","id":486164132,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjE2NDEzMg==","user":{"login":"helianthuslulu","id":4606832,"node_id":"MDQ6VXNlcjQ2MDY4MzI=","avatar_url":"https://avatars.githubusercontent.com/u/4606832?v=4","gravatar_id":"","url":"https://api.github.com/users/helianthuslulu","html_url":"https://github.com/helianthuslulu","followers_url":"https://api.github.com/users/helianthuslulu/followers","following_url":"https://api.github.com/users/helianthuslulu/following{/other_user}","gists_url":"https://api.github.com/users/helianthuslulu/gists{/gist_id}","starred_url":"https://api.github.com/users/helianthuslulu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helianthuslulu/subscriptions","organizations_url":"https://api.github.com/users/helianthuslulu/orgs","repos_url":"https://api.github.com/users/helianthuslulu/repos","events_url":"https://api.github.com/users/helianthuslulu/events{/privacy}","received_events_url":"https://api.github.com/users/helianthuslulu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T10:19:54Z","updated_at":"2019-04-24T10:19:54Z","author_association":"NONE","body":"@chenyuan9028 hello,Did your problem has been solved ?my solution is here： https://github.com/apache/incubator-druid/issues/6809","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486164132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486212323","html_url":"https://github.com/apache/druid/issues/6905#issuecomment-486212323","issue_url":"https://api.github.com/repos/apache/druid/issues/6905","id":486212323,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjIxMjMyMw==","user":{"login":"divyad1508","id":13851043,"node_id":"MDQ6VXNlcjEzODUxMDQz","avatar_url":"https://avatars.githubusercontent.com/u/13851043?v=4","gravatar_id":"","url":"https://api.github.com/users/divyad1508","html_url":"https://github.com/divyad1508","followers_url":"https://api.github.com/users/divyad1508/followers","following_url":"https://api.github.com/users/divyad1508/following{/other_user}","gists_url":"https://api.github.com/users/divyad1508/gists{/gist_id}","starred_url":"https://api.github.com/users/divyad1508/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyad1508/subscriptions","organizations_url":"https://api.github.com/users/divyad1508/orgs","repos_url":"https://api.github.com/users/divyad1508/repos","events_url":"https://api.github.com/users/divyad1508/events{/privacy}","received_events_url":"https://api.github.com/users/divyad1508/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T12:45:06Z","updated_at":"2019-04-24T12:45:06Z","author_association":"NONE","body":"I am also seeing this warning in my historical logs. Although, there has been no problem in the druid cluster so far.\r\n\r\nPlease let us know, if any update on the same.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486212323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/486304138","html_url":"https://github.com/apache/druid/pull/7537#issuecomment-486304138","issue_url":"https://api.github.com/repos/apache/druid/issues/7537","id":486304138,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjMwNDEzOA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-24T15:58:19Z","updated_at":"2019-04-24T15:58:19Z","author_association":"CONTRIBUTOR","body":"Thanks @nishantmonu51 what is the expected behavior when the flag is set to false?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/486304138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]