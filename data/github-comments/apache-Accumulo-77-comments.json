[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/974292364","html_url":"https://github.com/apache/accumulo/pull/2358#issuecomment-974292364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2358","id":974292364,"node_id":"IC_kwDOACaFSM46EoWM","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T18:06:35Z","updated_at":"2021-11-19T18:06:35Z","author_association":"CONTRIBUTOR","body":"> @milleruntime - Are you creating follow-on tickets for the recently completed compactions? If not, we might want to remove that map from the Coordinator. I think there was one other follow-on issue too, but I can't remember it right now.\r\n\r\nI wasn't planning on it since there were already concerns over the amount of data being displayed on the page. Maybe once I can improve the performance for a large cluster, that would be a good change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/974292364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/974464158","html_url":"https://github.com/apache/accumulo/issues/2361#issuecomment-974464158","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2361","id":974464158,"node_id":"IC_kwDOACaFSM46FSSe","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T20:52:00Z","updated_at":"2021-11-19T20:52:00Z","author_association":"CONTRIBUTOR","body":"@keith-turner I am having trouble trying to figure out how to merge multiple FileSKVIterator to get one iterable across multiple rfiles. I want to do what `RFileScanner` is doing but not have to worry about creating the iterator stack. I tried doing this:\r\n<pre>\r\nList<SortedKeyValueIterator<Key,Value>> readers = new ArrayList<>(files.size());\r\nFileSKVIterator reader = FileOperations.getInstance().newIndexReaderBuilder()...build();\r\nreaders.add(reader);\r\nvar iterator = new MultiIterator(readers, false);\r\n</pre>\r\n\r\nBut I am getting an `UnsupportedOperationException` in `MultiIndexIterator` when calling iterator.seek(). I started to rewrite it to use `new RFile.Reader(cb)` like the `PrintInfo` command does but wasn't sure if that would work either. Any ideas?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/974464158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975533197","html_url":"https://github.com/apache/accumulo/pull/2334#issuecomment-975533197","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2334","id":975533197,"node_id":"IC_kwDOACaFSM46JXSN","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T13:39:49Z","updated_at":"2021-11-22T13:39:49Z","author_association":"MEMBER","body":"Thanks for the contribution @tulikavijay and welcome to the Apache Accumulo community. If you would like to be listed as a contributor on Accumulo's people page please make a website PR for people.md. https://github.com/apache/accumulo-website/edit/main/pages/people.md\r\n\r\nIf you intend to make more contributions, please consider subscribing to the dev list and introducing yourself. Also, you can use the dev list or slack to reach out if you have questions about anything. https://accumulo.apache.org/contact-us/","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975533197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975655485","html_url":"https://github.com/apache/accumulo/issues/2361#issuecomment-975655485","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2361","id":975655485,"node_id":"IC_kwDOACaFSM46J1I9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T15:42:14Z","updated_at":"2021-11-22T15:42:14Z","author_association":"CONTRIBUTOR","body":"It appears that you can't call seek() when using the newIndexReaderBuilder() but I guess you don't need to when just reading the indices.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975655485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975872579","html_url":"https://github.com/apache/accumulo/issues/2361#issuecomment-975872579","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2361","id":975872579,"node_id":"IC_kwDOACaFSM46KqJD","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T20:02:25Z","updated_at":"2021-11-22T20:02:25Z","author_association":"CONTRIBUTOR","body":"@keith-turner I got the index reader working pretty well but I noticed it will pick up the empty bytes quite a bit. I copied encoding  that uses DefaultFormatter from the GetSplitsCommand so it will print them properly. But I am not sure we want to include the empty byte for user splits. For example, using test ingest and running the command I get splits like this:\r\n<pre>\r\nrow_0000000010\\x00\r\nrow_0000000054\\x00\r\nrow_0000000098\\x00\r\nrow_0000000142\\x00\r\nrow_0000000186\\x00\r\n</pre>\r\nWhat do you think? Should I drop the empty byte?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975872579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975945255","html_url":"https://github.com/apache/accumulo/pull/2367#issuecomment-975945255","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2367","id":975945255,"node_id":"IC_kwDOACaFSM46K74n","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T21:43:45Z","updated_at":"2021-11-22T21:44:18Z","author_association":"CONTRIBUTOR","body":"The git workflow build is failing because of file formatting issues.  You can run the maven build locally and it will run the formatter (as well as other checks)  To run the\r\nsame command as the workflow fast build you can run:\r\n```\r\nmvn clean verify package javadoc:jar -Psec-bugs -DskipITs=true -DskipTests=true\r\n```\r\n\r\nIf you get that to pass, you may want to run the unit tests at least once, commit the formatting changes and then push a new commit once the build is passing.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/975945255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976103926","html_url":"https://github.com/apache/accumulo/issues/2366#issuecomment-976103926","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2366","id":976103926,"node_id":"IC_kwDOACaFSM46Lin2","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T02:14:42Z","updated_at":"2021-11-23T02:14:42Z","author_association":"MEMBER","body":"The original issue was marked as \"Won't Fix\" because the benefits were deemed negligible at the time. It seems trivial to support, since the actual codecs are in Hadoop libraries, and we'd just have to wrap them in a standard way, so I'm not necessarily opposed. However, I'd prefer we not have to wrap anything, and we just completely offload the implementation to an SPI that the user provides an implementation for on the class path, rather than require us to try to stay in sync with whatever implementation classes are available in a given version of Hadoop.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976103926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976115704","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-976115704","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":976115704,"node_id":"IC_kwDOACaFSM46Llf4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T02:52:58Z","updated_at":"2021-11-23T02:54:35Z","author_association":"MEMBER","body":"I have the start of a fix, but fixing this gets down into the weeds of how we manage thread pools, so I may want to sync up with @dlmarion , who last touched that code and has some other PRs in the works related to it, when they are available, perhaps on Slack.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976115704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976639818","html_url":"https://github.com/apache/accumulo/issues/2366#issuecomment-976639818","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2366","id":976639818,"node_id":"IC_kwDOACaFSM46NldK","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T14:38:58Z","updated_at":"2021-11-23T14:38:58Z","author_association":"CONTRIBUTOR","body":"@ctubbsii thank you for your consideration.  Existing 1.x customer uses forked version of accumulo to support lz4, bzip2, and zstd.  They would like all codecs from the Hadoop ecosystem to be available within the project.  Accelerators are used in various stages of the pipeline to provide performance benefits over gz etc.  Please let us know if you are going to reject this PR as we will have to continue fork and maintenance for 2.x.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976639818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976644220","html_url":"https://github.com/apache/accumulo/pull/2367#issuecomment-976644220","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2367","id":976644220,"node_id":"IC_kwDOACaFSM46Nmh8","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T14:41:02Z","updated_at":"2021-11-23T14:41:02Z","author_association":"CONTRIBUTOR","body":"@milleruntime thank you for reviewing.  The deprecated classes were updated to maintain parity with the codecs available in the system.  We understand these classes will no longer be supported but would like equivalent functionality during the transition.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976644220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976909806","html_url":"https://github.com/apache/accumulo/issues/2366#issuecomment-976909806","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2366","id":976909806,"node_id":"IC_kwDOACaFSM46OnXu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T17:37:32Z","updated_at":"2021-11-23T17:37:32Z","author_association":"MEMBER","body":"@trietopsoft No, I'm not opposed. I tagged @milleruntime to request a review, because I believe he was the one who added ZStd and would be most familiar with the wrapping code you added. I'm in favor of the additional support... I just think that in future, maybe we can provide support in a way that is more modular/pluggable, rather than require a fork, if Hadoop adds new ones, so the bar is lowered for extending Accumulo like this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/976909806/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978100847","html_url":"https://github.com/apache/accumulo/pull/2367#issuecomment-978100847","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2367","id":978100847,"node_id":"IC_kwDOACaFSM46TKJv","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T17:52:06Z","updated_at":"2021-11-24T17:52:06Z","author_association":"CONTRIBUTOR","body":"I had to drop recent commits that are currently causing compactions to fail (see https://github.com/apache/accumulo/issues/2362) but I was able to test these changes in Uno. I was able to use the 2 new compression types with Hadoop 3.3.0 and inspected files using `accumulo rfile-info`. LGTM","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978100847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978101871","html_url":"https://github.com/apache/accumulo/pull/2367#issuecomment-978101871","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2367","id":978101871,"node_id":"IC_kwDOACaFSM46TKZv","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T17:53:38Z","updated_at":"2021-11-24T17:53:38Z","author_association":"CONTRIBUTOR","body":"Thanks for the contribution @trietopsoft and welcome to the Apache Accumulo community. If you would like to be listed as a contributor on Accumulo's people page please make a website PR for people.md. https://github.com/apache/accumulo-website/edit/main/pages/people.md\r\n\r\nIf you intend to make more contributions, please consider subscribing to the dev list and introducing yourself. Also, you can use the dev list or slack to reach out if you have questions about anything. https://accumulo.apache.org/contact-us/","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978101871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978130779","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-978130779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":978130779,"node_id":"IC_kwDOACaFSM46TRdb","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T18:36:39Z","updated_at":"2021-11-24T18:36:39Z","author_association":"MEMBER","body":"In 13b39cb I ended up moving things around so that we are able to use the logic in DefaultCompactionPlanner to verify the compaction config. I think with this changed, many of the tests I've written here can be removed because they are mostly testing  DefaultCompactionPlanner logic (which has its own test) more than CheckCompactionConfig.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/978130779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981743982","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981743982","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981743982,"node_id":"IC_kwDOACaFSM46hDlu","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T15:29:07Z","updated_at":"2021-11-29T15:29:07Z","author_association":"CONTRIBUTOR","body":"Questions more than a comment.\r\n\r\nDid you consider mocking and using a unit test rather than (or in conjunction with) the IT test?\r\nAt what point should we consider breaking up the shell server IT test?  That test was lengthy as it was - If it was split up, would there be more parallelism? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981743982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981745733","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981745733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981745733,"node_id":"IC_kwDOACaFSM46hEBF","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T15:30:58Z","updated_at":"2021-11-29T15:30:58Z","author_association":"CONTRIBUTOR","body":"This PR seems to be a copy of #2369 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981745733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981773538","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981773538","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981773538,"node_id":"IC_kwDOACaFSM46hKzi","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T16:01:20Z","updated_at":"2021-11-29T16:01:20Z","author_association":"CONTRIBUTOR","body":"@Manno15 one is for 2.x and the other for 1.x","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981773538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981777842","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981777842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981777842,"node_id":"IC_kwDOACaFSM46hL2y","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T16:05:46Z","updated_at":"2021-11-29T16:05:46Z","author_association":"CONTRIBUTOR","body":"My apologies. I didn't look that cloesly. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981777842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981780818","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981780818","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981780818,"node_id":"IC_kwDOACaFSM46hMlS","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T16:08:44Z","updated_at":"2021-11-29T16:08:44Z","author_association":"CONTRIBUTOR","body":"@EdColeman I must admit I did not consider mocking. The test does seems to be a bit of an overkill for a one line bug fix, but I wanted to verify it using the actual command calls. I haven't had a lot of experience using mocking in the past so that probably played a part in me not going that route. \r\n\r\nAs for breaking up the IT, we could put in an issue if someone wanted to take on that task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981780818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981836133","html_url":"https://github.com/apache/accumulo/pull/2370#issuecomment-981836133","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2370","id":981836133,"node_id":"IC_kwDOACaFSM46haFl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T17:09:48Z","updated_at":"2021-11-29T17:09:48Z","author_association":"CONTRIBUTOR","body":"The fix seems small enough that you didn't need both PRs but either way, I approved the other one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/981836133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982007784","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-982007784","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":982007784,"node_id":"IC_kwDOACaFSM46iD_o","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T20:45:48Z","updated_at":"2021-11-29T20:45:48Z","author_association":"CONTRIBUTOR","body":"> unsure if this should be currFactor >= targetFactor .. need to think through some edge cases\r\n\r\nTo test your comment, I added a test to GenerateSplitsTest that passes `--num 4` using the 6 splits. Based on the results, I don't think we want the \"=\". With a comparison of `currFactor > targetFactor` we get the splits: `r1, r2, r4, r5`. But with a comparison of `currFactor >= targetFactor` we get the splits: `r1, r2, r3, r5`. It seems like we get a better spread using `currFactor > targetFactor`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982007784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982601335","html_url":"https://github.com/apache/accumulo/issues/2350#issuecomment-982601335","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2350","id":982601335,"node_id":"IC_kwDOACaFSM46kU53","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T12:43:29Z","updated_at":"2021-11-30T12:43:29Z","author_association":"CONTRIBUTOR","body":"@milleruntime - what's the error here? How do you think it should be handled differently? I have reviewed the code and the error originates [here](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L238) when trying to close the compaction output file. The error is re-thrown which affects both the internal and external compaction code. In the internal compaction case, it bubbles up to [here](https://github.com/apache/accumulo/blob/main/server/tserver/src/main/java/org/apache/accumulo/tserver/compactions/InternalCompactionExecutor.java#L100) and a warning is logged.  In the external case the error bubbles up [here](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L569). I could remove the line that throws a RuntimeException from the thread, that would remove the log entry for the UncaughtExceptionHandler saying the thread is dead. I think the code would be unaffected by doing that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982601335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982618327","html_url":"https://github.com/apache/accumulo/issues/2350#issuecomment-982618327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2350","id":982618327,"node_id":"IC_kwDOACaFSM46kZDX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T13:06:16Z","updated_at":"2021-11-30T13:06:16Z","author_association":"CONTRIBUTOR","body":"I should also note that the External Compactor does cancel an external compaction if a table is deleted. It currently checks every 5 seconds, see [here](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L181). I think the solution here might be to remove the code that throws the RuntimeException in the FileCompactor thread and call the `checkIfCanceled` method after the FileCompactor thread finishes to perform a final check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982618327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982755040","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-982755040","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":982755040,"node_id":"IC_kwDOACaFSM46k6bg","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T15:38:45Z","updated_at":"2021-11-30T15:38:45Z","author_association":"MEMBER","body":"I'm working on getting rid of some of the tests that are redundant (overlapping with DefaultCompactionPlannerTest)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982755040/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982755747","html_url":"https://github.com/apache/accumulo/issues/2350#issuecomment-982755747","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2350","id":982755747,"node_id":"IC_kwDOACaFSM46k6mj","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T15:39:29Z","updated_at":"2021-11-30T15:39:29Z","author_association":"CONTRIBUTOR","body":"I think there error handling could just be cleaned up a bit. If we know the table is deleted, then don't treat the situation the same as an error. \r\n\r\n> I think the solution here might be to remove the code that throws the RuntimeException in the FileCompactor thread and call the checkIfCanceled method after the FileCompactor thread finishes to perform a final check.\r\n\r\nThat sounds reasonable.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982755747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982913083","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982913083","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982913083,"node_id":"IC_kwDOACaFSM46lhA7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T18:40:39Z","updated_at":"2021-11-30T18:40:39Z","author_association":"CONTRIBUTOR","body":"@Manno15  @milleruntime  - I stood up an Accumulo instance from the current HEAD of `main`. I created a table, added some data, and compacted it and saw no error.\r\n\r\n```\r\ninsert a b c d\r\nflush\r\n2021-11-30T18:38:10,220 [shell.Shell] INFO : Flush of table compaction_test  initiated...\r\ninsert a b d e\r\nflush\r\n2021-11-30T18:38:14,561 [shell.Shell] INFO : Flush of table compaction_test  initiated...\r\ninsert a d b c\r\nflush\r\n2021-11-30T18:38:22,226 [shell.Shell] INFO : Flush of table compaction_test  initiated...\r\ninsert a g e f \r\nflush\r\n2021-11-30T18:38:31,571 [shell.Shell] INFO : Flush of table compaction_test  initiated...\r\ncompact -w \r\n2021-11-30T18:38:33,563 [shell.Shell] INFO : Compacting table ...\r\n2021-11-30T18:38:34,375 [shell.Shell] INFO : Compaction of table compaction_test completed for given range\r\n```\r\n\r\nIs this still an issue?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982913083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982921661","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982921661","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982921661,"node_id":"IC_kwDOACaFSM46ljG9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T18:52:44Z","updated_at":"2021-11-30T18:52:44Z","author_association":"CONTRIBUTOR","body":"> Create a table utilizing the new compaction server props\r\n\r\nMaybe I didn't do this. I think it would definitely be useful to include as much specific detailed information as possible, configuration settings, logs, etc. It would be a big help in trying to replicate the issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982921661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982931065","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982931065","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982931065,"node_id":"IC_kwDOACaFSM46llZ5","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:04:45Z","updated_at":"2021-11-30T19:04:45Z","author_association":"CONTRIBUTOR","body":"@dlmarion I still see this occurring on my end. I used the properties set in accumulo-testing for creating the table. Possible the issue is related to that. I will paste below what is in accumulo-testing.\r\n\r\n```\r\ntserver.compaction.major.service.cs1.planner=org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner \\\r\ntserver.compaction.major.service.cs1.planner.opts.executors=\\\r\n[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},\\\r\n{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},\\\r\n{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982931065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982933204","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982933204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982933204,"node_id":"IC_kwDOACaFSM46ll7U","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:07:23Z","updated_at":"2021-11-30T19:09:03Z","author_association":"CONTRIBUTOR","body":"So, I set the following properties:\r\n\r\n```\r\nsite       | tserver.compaction.major.service.cs1.planner ..................... | \r\nsystem     |    @override ..................................................... | org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\nsite       | tserver.compaction.major.service.cs1.planner.opts.executors ...... | \r\nsystem     |    @override ..................................................... | [{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\n```\r\n\r\nand set the following properties on the table:\r\n```\r\ndefault    | table.compaction.dispatcher ............... | org.apache.accumulo.core.spi.compaction.SimpleCompactionDispatcher\r\ntable      | table.compaction.dispatcher.opts.service .. | cs1\r\n```\r\n\r\nand I'm not seeing an error.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982933204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982935742","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982935742","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982935742,"node_id":"IC_kwDOACaFSM46lmi-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:10:31Z","updated_at":"2021-11-30T19:10:31Z","author_association":"CONTRIBUTOR","body":"I still don't know what the error is. if it's still happening, can you drop the stack trace here?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982935742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982938811","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982938811","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982938811,"node_id":"IC_kwDOACaFSM46lnS7","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:14:20Z","updated_at":"2021-11-30T19:14:20Z","author_association":"CONTRIBUTOR","body":"The server-side logs are in the details portion of the issue body. I will see if I can unearth any other helpful logs. I will try to reproduce it manually but if that cannot be done then its possible the issue resides in how we set the properties in accumulo-testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982938811/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982947321","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982947321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982947321,"node_id":"IC_kwDOACaFSM46lpX5","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:25:20Z","updated_at":"2021-11-30T19:25:20Z","author_association":"CONTRIBUTOR","body":"@dlmarion I did get it to fail when setting the properties manually but it took a lot longer. It didn't seem to fail until after I lowered the split threshold to cause some splits. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982947321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982954719","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982954719","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982954719,"node_id":"IC_kwDOACaFSM46lrLf","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:35:23Z","updated_at":"2021-11-30T19:35:23Z","author_association":"MEMBER","body":"@dlmarion I'm working on this. Holiday interrupted it, but the basic problem is that we are making certain assumptions about the Runnables that we put in the executor blocking queues. There are two kinds of problems: 1) we conditionally remove them from the queue, possibly based on equality, and 2) we cast these Runnables to a specific subtype to perform actions on them (sorting, removal, etc.). Both these kinds of operations are broken when we wrap the Runnables with the tracing context lambda Runnable. In some cases, we throw an IllegalArgumentException when the `instanceof` type doesn't match what we expect, and in other cases the operation is just going to fail silently because the condition doesn't match (either the objects don't equal or the `instanceof` type doesn't match).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982954719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982956308","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982956308","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982956308,"node_id":"IC_kwDOACaFSM46lrkU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:37:29Z","updated_at":"2021-11-30T19:37:29Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - ok. I started working on a solution, but I'll move on to something else.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982956308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982963414","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-982963414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":982963414,"node_id":"IC_kwDOACaFSM46ltTW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T19:47:12Z","updated_at":"2021-11-30T19:47:12Z","author_association":"CONTRIBUTOR","body":"[wip](https://github.com/dlmarion/accumulo/commit/c2073c5046ddc5b9bd5061f9f9265aefac4d98aa) - in case you were wondering where I was headed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982963414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982974602","html_url":"https://github.com/apache/accumulo/issues/2371#issuecomment-982974602","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2371","id":982974602,"node_id":"IC_kwDOACaFSM46lwCK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T20:01:47Z","updated_at":"2021-11-30T20:01:47Z","author_association":"CONTRIBUTOR","body":"I was talking with @ctubbsii a bit about some of the issues the many different use cases that can be encountered with splitting data evenly and the work I was doing for #2368. Instead of us trying to write our own algorithms, maybe we can use a library. He suggested taking a look at the Apache Datasketches project, for help with mathematical algorthims such as this. One type in particular that might be useful is the quantiles in ItemsSketch: https://datasketches.apache.org/api/java/snapshot/apidocs/org/apache/datasketches/quantiles/ItemsSketch.html#getQuantiles-int-","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982974602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982984779","html_url":"https://github.com/apache/accumulo/issues/2371#issuecomment-982984779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2371","id":982984779,"node_id":"IC_kwDOACaFSM46lyhL","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T20:15:31Z","updated_at":"2021-11-30T20:15:31Z","author_association":"CONTRIBUTOR","body":"I was looking at the code today. The value of 'r' will always be <= 1 so the while-loop should never execute more than one time per for-loop iteration. Switching the while-loop to an if-statement would not affect results while perhaps clearing up the code a small amount. Either way, the code accomplishes its intended purpose at the moment.\r\n\r\nAs for this particular ticket, three options can be considered:\r\n* leaving correctly running code as is\r\n* updating the while-loop to an if-statement to remove a small amount of confusion\r\n* look into other methods of evenly parsing data as referenced above. \r\n\r\nThoughts on this ticket in particular?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982984779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982988109","html_url":"https://github.com/apache/accumulo/issues/2371#issuecomment-982988109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2371","id":982988109,"node_id":"IC_kwDOACaFSM46lzVN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T20:20:13Z","updated_at":"2021-11-30T20:20:13Z","author_association":"CONTRIBUTOR","body":"> updating the while-loop to an if-statement to remove a small amount of confusion\r\n\r\nThe code is confusing so I think this could at least be done to clear up any confusion and confirm there isn't an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/982988109/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983044119","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-983044119","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":983044119,"node_id":"IC_kwDOACaFSM46mBAX","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T21:38:57Z","updated_at":"2021-11-30T21:38:57Z","author_association":"MEMBER","body":"The most recent changes replace the error throwing with `System.err.println()` and `System.exit()` so that the errors can be seen from the shell. I removed most of the tests since im not too sure how we can verify which errors are being thrown while using `System.exit()` but from my manual testing, everything seems to be working.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983044119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983592263","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983592263","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983592263,"node_id":"IC_kwDOACaFSM46oG1H","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T12:25:53Z","updated_at":"2021-12-01T12:25:53Z","author_association":"CONTRIBUTOR","body":"I was talking with @ctubbsii a bit about the many different edge cases that can be encountered with splitting data evenly. Since this tool is a good opportunity to use a library which may help, I am going to take a look at the Apache Datasketches project, starting with the quantiles in ItemsSketch: https://datasketches.apache.org/api/java/snapshot/apidocs/org/apache/datasketches/quantiles/ItemsSketch.html#getQuantiles-int-","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983592263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983598273","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-983598273","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":983598273,"node_id":"IC_kwDOACaFSM46oITB","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T12:34:43Z","updated_at":"2021-12-01T12:34:43Z","author_association":"CONTRIBUTOR","body":"> The most recent changes replace the error throwing with `System.err.println()` and `System.exit()` so that the errors can be seen from the shell. I removed most of the tests since im not too sure how we can verify which errors are being thrown while using `System.exit()` but from my manual testing, everything seems to be working.\r\n\r\nYou should be able to see Exceptions thrown by the utility. Maybe something is wrong with your Log4j.properties file? How are you running the command? The only time I think we want to use `System.out.println()` is for a standalone command line tool that can pipe the output to other CLI tools and you don't want logging information mucking up the output. We only want to use `System.exit()` in very rare circumstances. There was work done in Accumulo over the years to avoid calls to `System.exit()`. And I can't think of a reason to call `System.err.println()`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983598273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983718150","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-983718150","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":983718150,"node_id":"IC_kwDOACaFSM46olkG","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T14:52:40Z","updated_at":"2021-12-01T14:52:40Z","author_association":"MEMBER","body":"> You should be able to see Exceptions thrown by the utility. Maybe something is wrong with your Log4j.properties file?\r\n\r\nMaybe so, I was having trouble seeing the exceptions. It would just quietly fail.\r\n\r\n> How are you running the command?\r\n\r\nI would start up an instance with fluo-uno then call `accumulo check-compaction-config <file path>`.\r\n\r\nFor some reason if I catch the exceptions and println their message it works consistently but if I just let the exception be thrown, that does not appear.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983718150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983938428","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983938428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983938428,"node_id":"IC_kwDOACaFSM46pbV8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T18:26:33Z","updated_at":"2021-12-01T18:26:33Z","author_association":"CONTRIBUTOR","body":"@keith-turner my last update uses a DataSketches library to get the splits from indices and full scan, which should be more  efficient than having to read all rows into memory.  But in one of the tests, it does split the data differently. The unit test which asks for 4 splits out of the 6, was returning `r2, r3, r4, r5` for your algorithm, but produces `r1, r3, r5, r6` with the DataSketches library. Based on your comments, it sounded like you were avoiding selecting the first split, why would that be? And can you think of a reason why one set splits would be preferred over the other?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983938428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983956538","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-983956538","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":983956538,"node_id":"IC_kwDOACaFSM46pfw6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T18:50:59Z","updated_at":"2021-12-01T18:50:59Z","author_association":"MEMBER","body":"> [wip](https://github.com/dlmarion/accumulo/commit/c2073c5046ddc5b9bd5061f9f9265aefac4d98aa) - in case you were wondering where I was headed\r\n\r\nThat's the basic direction I was headed also. I called mine `TraceWrapped{Callable,Runnable}`, but had the same `unwrap` method. The main thing I did differently was I saved a reference to the original context, to call make it current in the `run` method, rather than use the `Context.wrap` method at all. That way, it's only wrapped once, instead of twice. I was going through the rest of the use cases to see if there's any further cleanup I can do to make sure there aren't similar issues. Another issue that is possible to encounter is trying to remove a wrapped runnable from the blocking queue, and not actually removing it because the wrapper doesn't equal the wrapped Runnable or isn't the right type.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983956538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983983979","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983983979","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983983979,"node_id":"IC_kwDOACaFSM46pmdr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:27:11Z","updated_at":"2021-12-01T19:27:11Z","author_association":"CONTRIBUTOR","body":"> Based on your comments, it sounded like you were avoiding selecting the first split, why would that be? \r\n\r\nThat comment was based on a bug in the first cut of the selection alogrithm which always used the first source row.  For larger amounts of data this would not be desirable.  If there are 10,000 source rows from which you want to derive 100 splits, would not want to use the first source row as the first split.   Would want the ~100th source row for the first split.  For the case you are testing w/ 6 source rows and 4 desired split, it probably does not matter if the first source row is chosen.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983983979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983993160","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983993160","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983993160,"node_id":"IC_kwDOACaFSM46potI","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:40:10Z","updated_at":"2021-12-01T19:40:10Z","author_association":"CONTRIBUTOR","body":">I am going to take a look at the Apache Datasketches project, starting with the quantiles in ItemsSketch: https://datasketches.apache.org/api/java/snapshot/apidocs/org/apache/datasketches/quantiles/ItemsSketch.html#getQuantiles-int-\r\n\r\n@milleruntime  looking at the javadoc for the above it says\r\n\r\n> evenlySpaced - an integer that specifies the number of evenly spaced fractional ranks. This must be a positive integer greater than 1. A value of 2 will return the min and the max value. A value of 3 will return the min, the median and the max value, etc.\r\n\r\nThe above behavior is not what we want. If a user request one split, we probably want the source row that is around 50% of the way through (1 is unsupported by the sketch).  If a user request 2 splits, we probably want the source rows that are around 33% and 66% of the way through (not the min and max returned by the sketch).  If a user request 3 splits, the we probably want the source rows that are around 25%,50%, and 75% of the way through (not the min, max, and median as returned by the sketch).\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983993160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983998202","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983998202","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983998202,"node_id":"IC_kwDOACaFSM46pp76","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:47:19Z","updated_at":"2021-12-01T19:47:19Z","author_association":"MEMBER","body":"Based on the behavior, we probably want to just drop the first and last items in the returned array, then.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983998202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983999498","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-983999498","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":983999498,"node_id":"IC_kwDOACaFSM46pqQK","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:49:19Z","updated_at":"2021-12-01T19:49:39Z","author_association":"MEMBER","body":"Also, we should be clear in the tool's usage/docs whether we return `n-1` splits that correspond to `n` requested tablets, or `n` splits that correspond to `n` requested splits that result in `n+1` tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/983999498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984001118","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-984001118","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":984001118,"node_id":"IC_kwDOACaFSM46pqpe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:51:44Z","updated_at":"2021-12-01T19:51:44Z","author_association":"CONTRIBUTOR","body":"> Based on the behavior, we probably want to just drop the first and last items in the returned array, then.\r\n\r\nYeah could try calling `getQuantiles(numSplits+2)` and see if the returned array discarding the first and last looks like what we want.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984001118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984006504","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-984006504","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":984006504,"node_id":"IC_kwDOACaFSM46pr9o","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T19:59:33Z","updated_at":"2021-12-01T19:59:33Z","author_association":"CONTRIBUTOR","body":"> Also, we should be clear in the tool's usage/docs whether we return n-1 splits that correspond to n requested tablets, or n splits that correspond to n requested splits that result in n+1 tablets.\r\n\r\nI have always considered the terminology splits to be between tablets, so 1 split results in two tablets.   I think for tools it comes down to whether it uses the terminology #tablet or #split.  The tool docs could state what is going on either way.  Like if the tool has a numTablets parameter it could state it will output numTablets-1 splits.   If it has a numSplits parameter, it could state it will output that many splits and that numSplits+1 tablets are created when adding the splits to Accumulo.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984006504/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984014038","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-984014038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":984014038,"node_id":"IC_kwDOACaFSM46ptzW","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T20:08:18Z","updated_at":"2021-12-01T20:08:18Z","author_association":"CONTRIBUTOR","body":"> Yeah could try calling `getQuantiles(numSplits+2)` and see if the returned array discarding the first and last looks like what we want.\r\n\r\nGood catch. I will give that a try.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984014038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984025141","html_url":"https://github.com/apache/accumulo/pull/2320#issuecomment-984025141","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2320","id":984025141,"node_id":"IC_kwDOACaFSM46pwg1","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-01T20:23:05Z","updated_at":"2021-12-01T20:23:05Z","author_association":"MEMBER","body":"In b38dc34 I changed the delay to be a random between 30 and 60 minutes. This way the service will not run very often and it is less likely that tablet servers will perform this check at the same time which could potentially cause performance issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/984025141/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985331437","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-985331437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":985331437,"node_id":"IC_kwDOACaFSM46uvbt","user":{"login":"markjens","id":94677193,"node_id":"U_kgDOBaSoyQ","avatar_url":"https://avatars.githubusercontent.com/u/94677193?v=4","gravatar_id":"","url":"https://api.github.com/users/markjens","html_url":"https://github.com/markjens","followers_url":"https://api.github.com/users/markjens/followers","following_url":"https://api.github.com/users/markjens/following{/other_user}","gists_url":"https://api.github.com/users/markjens/gists{/gist_id}","starred_url":"https://api.github.com/users/markjens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markjens/subscriptions","organizations_url":"https://api.github.com/users/markjens/orgs","repos_url":"https://api.github.com/users/markjens/repos","events_url":"https://api.github.com/users/markjens/events{/privacy}","received_events_url":"https://api.github.com/users/markjens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T08:59:40Z","updated_at":"2021-12-03T08:59:40Z","author_association":"CONTRIBUTOR","body":"I've moved the initialization to the constructors!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985331437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985502942","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-985502942","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":985502942,"node_id":"IC_kwDOACaFSM46vZTe","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T13:05:33Z","updated_at":"2021-12-03T13:05:33Z","author_association":"CONTRIBUTOR","body":"@markjens your changes look good. Can you run \"mvn clean verify -DskipTests -Dspotbugs.skip\" and push another update? There are some automated QA checks that are failing. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985502942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985786045","html_url":"https://github.com/apache/accumulo/pull/2319#issuecomment-985786045","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2319","id":985786045,"node_id":"IC_kwDOACaFSM46wea9","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T19:51:07Z","updated_at":"2021-12-03T19:51:07Z","author_association":"MEMBER","body":"Can this be moved to \"done\" in [2.1.0](https://github.com/apache/accumulo/projects/3#card-71098085)?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/985786045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986220077","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-986220077","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":986220077,"node_id":"IC_kwDOACaFSM46yIYt","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-05T12:19:09Z","updated_at":"2021-12-05T12:19:09Z","author_association":"CONTRIBUTOR","body":"Running an a large instance with 16 cores / 32 threads, 128G memory and using SSDs I see some improvement, but not as drastic as reported by others. \r\n\r\nThere seems to be two modes that occur with some runs being ~90 seconds faster on my instance. In 10 runs on the current main branch, the faster runs occurred twice with an average run time of 162.7 seconds, and eight runs with an average of 252.8 seconds.\r\n\r\nUsing this PR and 20 runs, the faster runs occurred five times with an average of 83.3 seconds (5.7 seconds faster). The slower runs occurred 15 times with an average of 240.3 seconds (12.5 seconds faster)\r\n\r\n# Run time details\r\n<details>\r\n  <summary>Click to expand!</summary>\r\n  \r\n  ## Run details main branch vs PR with cached credentials\r\n\r\n![run_times](https://user-images.githubusercontent.com/7047700/144745401-40a29820-1987-455e-9855-df70a8e28499.png)\r\n\r\n| run | main | cached |\r\n|-----|---------|-----|\r\n| 1 | 256.651 | 242.218 |\r\n| 2 | 164.723 | 155.704 |\r\n| 3 | 250.717 | 241.091 | \r\n| 4 | 250.772 | 239.305 |\r\n| 5 | 160.739 | 245.015 |\r\n| 6 | 253.339 | 155.78 |\r\n| 7 | 253.828 | 238.795 |\r\n| 8 | 254.756 | 241.777 |\r\n| 9 | 250.276 | 236.324 |\r\n| 10 | 251.828 | 160.737 |\r\n| 11 | | 241.228 |\r\n| 12 | | 238.235 |\r\n| 13 | | 160.254 |\r\n| 14 | | 239.816 |\r\n| 15 | | 242.269 |\r\n| 16 | | 152.27 |\r\n| 17 | | 239.339 |\r\n| 18 | | 240.57  |\r\n| 19 | | 239.227 |\r\n| 20 | | 239.218 |\r\n\r\n\r\n</details>\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986220077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986767389","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-986767389","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":986767389,"node_id":"IC_kwDOACaFSM460OAd","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T13:17:39Z","updated_at":"2021-12-06T13:17:39Z","author_association":"CONTRIBUTOR","body":"Running ExternalCompaction_2_IT, the test testSplitCancelsExternalCompaction seems to be hitting the bug described in issue #2362.  With the test running it looks like from a quick look:\r\n\r\nThe Manager and Tservers are waiting for something to happen.\r\nThe UncaughtExcption handler error message is in the the ExternalDoNothingCompactor log\r\nThe ExternalDoNothingCompactor keeps reporting `compactor.Compactor] ERROR: Waiting on compaction thread to finish, but no RUNNING compaction`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986767389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986788529","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-986788529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":986788529,"node_id":"IC_kwDOACaFSM460TKx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T13:42:22Z","updated_at":"2021-12-06T13:42:22Z","author_association":"CONTRIBUTOR","body":"For org.apache.accumulo.test.compaction.ExternalCompaction_2_IT three tests failed with timeouts:\r\ntestSplitCancelsExternalCompaction - has uncaught exception\r\ntestDeleteTableCancelsUserExternalCompaction - has uncaught exception\r\ntestUserCompactionCancellation\r\n\r\ntestUserCompactionCancellation failed because it could not start the coordinator service\r\n\r\n# From CompactionCoordinator_##.out\r\n<details>\r\n  <summary>Click to expand!</summary>\r\n  org.apache.thrift.transport.TTransportException: Unable to create server on addresses: [0.0.0.0:9132]\r\n        at org.apache.accumulo.server.rpc.TServerUtils.startTServer(TServerUtils.java:669) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.rpc.TServerUtils.startTServer(TServerUtils.java:601) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.rpc.TServerUtils.startServer(TServerUtils.java:185) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.coordinator.CompactionCoordinator.startCoordinatorClientService(CompactionCoordinator.java:231) ~[accumulo-compaction-coordinator-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.coordinator.CompactionCoordinator.run(CompactionCoordinator.java:246) ~[accumulo-compaction-coordinator-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at io.opentelemetry.context.Context.lambda$wrap$1(Context.java:207) ~[opentelemetry-context-1.7.1.jar:1.7.1]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\n2021-12-06T13:14:20,348 [start.Main] ERROR: Thread 'org.apache.accumulo.coordinator.CompactionCoordinator' died.\r\njava.lang.RuntimeException: Failed to start the coordinator service\r\n        at org.apache.accumulo.coordinator.CompactionCoordinator.run(CompactionCoordinator.java:248) ~[accumulo-compaction-coordinator-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at io.opentelemetry.context.Context.lambda$wrap$1(Context.java:207) ~[opentelemetry-context-1.7.1.jar:1.7.1]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: java.net.UnknownHostException: Unable to find a listen port\r\n        at org.apache.accumulo.server.rpc.TServerUtils.startServer(TServerUtils.java:222) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.coordinator.CompactionCoordinator.startCoordinatorClientService(CompactionCoordinator.java:231) ~[accumulo-compaction-coordinator-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.coordinator.CompactionCoordinator.run(CompactionCoordinator.java:246) ~[accumulo-compaction-coordinator-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        ... 2 more\r\n\r\n</details>\r\n\r\nFor ExternalCompaction_3_IT_testUserCompactionCancellation - uncaught exception is in the log\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986788529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986806118","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-986806118","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":986806118,"node_id":"IC_kwDOACaFSM460Xdm","user":{"login":"markjens","id":94677193,"node_id":"U_kgDOBaSoyQ","avatar_url":"https://avatars.githubusercontent.com/u/94677193?v=4","gravatar_id":"","url":"https://api.github.com/users/markjens","html_url":"https://github.com/markjens","followers_url":"https://api.github.com/users/markjens/followers","following_url":"https://api.github.com/users/markjens/following{/other_user}","gists_url":"https://api.github.com/users/markjens/gists{/gist_id}","starred_url":"https://api.github.com/users/markjens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markjens/subscriptions","organizations_url":"https://api.github.com/users/markjens/orgs","repos_url":"https://api.github.com/users/markjens/repos","events_url":"https://api.github.com/users/markjens/events{/privacy}","received_events_url":"https://api.github.com/users/markjens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T14:05:00Z","updated_at":"2021-12-06T14:05:00Z","author_association":"CONTRIBUTOR","body":"Thank you for looking into this, @EdColeman !\r\n\r\nDid you see `TTransportException: Unable to create server on addresses` in my logs or in your local run of these tests ?\r\nBecause I see no such error at https://gist.githubusercontent.com/markjens/326b681c3f8a9c1b6400f55847fe7716/raw/59a33655e108fe55708ceb0d9f5c81309d056a35/CompactionCoordinator_1415671774.out\r\n\r\nI see this one:\r\n```\r\n2021-12-03T10:42:21,972 [zookeeper.ZooCache] WARN : Saw (possibly) transient exception communicating with ZooKeeper, will retry\r\norg.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /accumulo/77a5af20-706e-4a5b-9adf-e188329b760f/root_tablet\r\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:102) ~[zookeeper-3.5.9.jar:3.5.9]\r\n\tat org.apache.zookeeper.KeeperException.create(KeeperException.java:54) ~[zookeeper-3.5.9.jar:3.5.9]\r\n\tat org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:2021) ~[zookeeper-3.5.9.jar:3.5.9]\r\n\tat org.apache.accumulo.fate.zookeeper.ZooCache$2.run(ZooCache.java:415) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n```\r\nbut since it is a WARN I assumed it is not the problem.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986806118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986819205","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-986819205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":986819205,"node_id":"IC_kwDOACaFSM460aqF","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T14:19:17Z","updated_at":"2021-12-06T14:24:26Z","author_association":"CONTRIBUTOR","body":"The exception was from running on my instance.  I noted it because it differed that the others, but not sure if it was a one off or if there were other things going on.\r\n\r\nFrom your CompactionCoordinator log - it looks like those ZK exceptions are occurring on shutdown.\r\n\r\nDo still have you other logs?  Are there any other Exceptions being thrown?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/986819205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/987022336","html_url":"https://github.com/apache/accumulo/issues/2373#issuecomment-987022336","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2373","id":987022336,"node_id":"IC_kwDOACaFSM461MQA","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-06T18:04:46Z","updated_at":"2021-12-06T18:04:46Z","author_association":"MEMBER","body":"For context, here is the comment where this change was first suggested:\r\n\r\nhttps://github.com/apache/accumulo/blob/6cfb9180a0d3e5115922314ff2062e0706ef0795/core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletsMetadata.java#L324-L328\r\n\r\nSo if the tablet server was serving the root or metadata tablets, then it would throw an exception for this.  Could partition the tablets into user and non-user (root,metadata) tablets.  Can use readTablets() w/ the user tablets.  For the non-user would have to call readTablet() one at a time.  Could do that partitioning in the tablet server code for now and in a later PR push it down into Ample and remove it from the tablet server code.\r\n\r\n_Originally posted by @keith-turner in https://github.com/apache/accumulo/pull/2320#discussion_r747057650_","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/987022336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/988949117","html_url":"https://github.com/apache/accumulo/pull/2376#issuecomment-988949117","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2376","id":988949117,"node_id":"IC_kwDOACaFSM468ip9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T16:05:47Z","updated_at":"2021-12-08T16:05:47Z","author_association":"CONTRIBUTOR","body":"This change made me wonder if you can limit the size of log messages. I found a way to do it in Log4j but is a bit awkward. https://logging.apache.org/log4j/2.0/manual/layouts.html#PatternLayout ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/988949117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/988985352","html_url":"https://github.com/apache/accumulo/issues/2365#issuecomment-988985352","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2365","id":988985352,"node_id":"IC_kwDOACaFSM468rgI","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T16:47:14Z","updated_at":"2021-12-08T16:47:14Z","author_association":"CONTRIBUTOR","body":"@Manno15 @DomGarguilo thanks for the support. Now I feel like I can do this task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/988985352/reactions","total_count":13,"+1":2,"-1":0,"laugh":3,"hooray":2,"confused":0,"heart":2,"rocket":2,"eyes":2},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/989085215","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-989085215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":989085215,"node_id":"IC_kwDOACaFSM469D4f","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T18:43:42Z","updated_at":"2021-12-08T18:43:42Z","author_association":"CONTRIBUTOR","body":"@keith-turner @ctubbsii I think this is OK to merge. Were you OK with the new dependency? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/989085215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/989795701","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-989795701","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":989795701,"node_id":"IC_kwDOACaFSM46_xV1","user":{"login":"markjens","id":94677193,"node_id":"U_kgDOBaSoyQ","avatar_url":"https://avatars.githubusercontent.com/u/94677193?v=4","gravatar_id":"","url":"https://api.github.com/users/markjens","html_url":"https://github.com/markjens","followers_url":"https://api.github.com/users/markjens/followers","following_url":"https://api.github.com/users/markjens/following{/other_user}","gists_url":"https://api.github.com/users/markjens/gists{/gist_id}","starred_url":"https://api.github.com/users/markjens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markjens/subscriptions","organizations_url":"https://api.github.com/users/markjens/orgs","repos_url":"https://api.github.com/users/markjens/repos","events_url":"https://api.github.com/users/markjens/events{/privacy}","received_events_url":"https://api.github.com/users/markjens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T12:11:44Z","updated_at":"2021-12-09T12:11:44Z","author_association":"CONTRIBUTOR","body":"> Do still have you other logs? Are there any other Exceptions being thrown?\r\n\r\nSorry! Just noticed your question.\r\nAll the logs are at https://gist.github.com/markjens/326b681c3f8a9c1b6400f55847fe7716. You just need to scroll down (to the bottom).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/989795701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990224708","html_url":"https://github.com/apache/accumulo/pull/2368#issuecomment-990224708","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2368","id":990224708,"node_id":"IC_kwDOACaFSM47BaFE","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T20:31:47Z","updated_at":"2021-12-09T20:31:47Z","author_association":"MEMBER","body":"> @keith-turner @ctubbsii I think this is OK to merge. Were you OK with the new dependency?\r\n\r\nNew dependency works for me. Feel free to merge if you think it's ready. I skimmed, but didn't do an in-depth check of the implementation. The user experience from the options looks fine to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990224708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990669150","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-990669150","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":990669150,"node_id":"IC_kwDOACaFSM47DGle","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T07:04:24Z","updated_at":"2021-12-10T07:04:24Z","author_association":"MEMBER","body":"Thanks for the PR @markjens . I see you aren't listed on our \"people\" page, which acknowledges our contributors. If you wish to be added as a contributor to https://accumulo.apache.org/people/ , please open a pull request to add yourself at https://github.com/apache/accumulo-website/edit/main/pages/people.md and leave a reference to `apache/accumulo#2374` in your commit log.\r\n\r\nIf you intend to be a regular contributor to Accumulo projects, please consider subscribing to our developer mailing list (https://accumulo.apache.org/contact-us/) and introducing yourself. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990669150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990684410","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-990684410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":990684410,"node_id":"IC_kwDOACaFSM47DKT6","user":{"login":"markjens","id":94677193,"node_id":"U_kgDOBaSoyQ","avatar_url":"https://avatars.githubusercontent.com/u/94677193?v=4","gravatar_id":"","url":"https://api.github.com/users/markjens","html_url":"https://github.com/markjens","followers_url":"https://api.github.com/users/markjens/followers","following_url":"https://api.github.com/users/markjens/following{/other_user}","gists_url":"https://api.github.com/users/markjens/gists{/gist_id}","starred_url":"https://api.github.com/users/markjens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markjens/subscriptions","organizations_url":"https://api.github.com/users/markjens/orgs","repos_url":"https://api.github.com/users/markjens/repos","events_url":"https://api.github.com/users/markjens/events{/privacy}","received_events_url":"https://api.github.com/users/markjens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T07:33:52Z","updated_at":"2021-12-10T07:33:52Z","author_association":"CONTRIBUTOR","body":"Thanks for improving and merging the PR, @ctubbsii !\r\n\r\nI may add myself to people.md with my next contribution! :-)\r\nI am already subscribed to dev@. Same Mark Jens who advocates for ARM64 architecture! :-)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990684410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990720964","html_url":"https://github.com/apache/accumulo/pull/2374#issuecomment-990720964","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2374","id":990720964,"node_id":"IC_kwDOACaFSM47DTPE","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T08:11:41Z","updated_at":"2021-12-10T08:11:41Z","author_association":"MEMBER","body":"> I am already subscribed to dev@.\r\n\r\nYeah, I know... it was mostly copy/paste. I should have tailored the message more. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/990720964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991037088","html_url":"https://github.com/apache/accumulo/issues/2379#issuecomment-991037088","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2379","id":991037088,"node_id":"IC_kwDOACaFSM47Egag","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T14:52:24Z","updated_at":"2021-12-10T14:52:24Z","author_association":"MEMBER","body":"@Manno15 and I also ran into this while setting up a cluster yesterday. Our workaround was to run `accumulo-service tserver start` on the nodes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991037088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991090759","html_url":"https://github.com/apache/accumulo/issues/2379#issuecomment-991090759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2379","id":991090759,"node_id":"IC_kwDOACaFSM47EthH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T16:00:16Z","updated_at":"2021-12-10T16:00:16Z","author_association":"CONTRIBUTOR","body":"I believe the problem is [here](https://github.com/apache/accumulo/blob/main/assemble/bin/accumulo-cluster#L134) when there is no 4th argument","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991090759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991361680","html_url":"https://github.com/apache/accumulo/issues/2383#issuecomment-991361680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2383","id":991361680,"node_id":"IC_kwDOACaFSM47FvqQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T23:04:39Z","updated_at":"2021-12-10T23:04:39Z","author_association":"MEMBER","body":"Yeah, that's a bug. The `accumulo-env.sh` file is supposed to be sourced, which does pass the variables correctly to the script that sourced it, but exporting does not. Any script that tries to work that way should be fixed. The `accumulo-env.sh` script shouldn't be exporting `JAVA_OPTS` or relying on `ACCUMULO_JAVA_OPTS` to be an array.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/991361680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993614598","html_url":"https://github.com/apache/accumulo/pull/2384#issuecomment-993614598","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2384","id":993614598,"node_id":"IC_kwDOACaFSM47OVsG","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T14:46:14Z","updated_at":"2021-12-14T14:46:14Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I believe that this latest commit addresses all of your comments.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993614598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993694464","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993694464","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993694464,"node_id":"IC_kwDOACaFSM47OpMA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T16:06:11Z","updated_at":"2021-12-14T16:06:11Z","author_association":"CONTRIBUTOR","body":"What are the use cases for this?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993694464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993724889","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993724889","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993724889,"node_id":"IC_kwDOACaFSM47OwnZ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T16:36:28Z","updated_at":"2021-12-14T16:36:28Z","author_association":"CONTRIBUTOR","body":"> What are the use cases for this?\r\n\r\nI have a long running compaction that I want to cancel but I don't want to cancel all compactions on a table. My configuration has changed since the long running compaction started and a new compaction with the proper config has started.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993724889/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993749908","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993749908","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993749908,"node_id":"IC_kwDOACaFSM47O2uU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T16:46:08Z","updated_at":"2021-12-14T16:46:08Z","author_association":"CONTRIBUTOR","body":"Based on [this](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L196), you can remove the ecid row from tablet metadata","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993749908/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993750265","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993750265","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993750265,"node_id":"IC_kwDOACaFSM47O2z5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T16:46:17Z","updated_at":"2021-12-14T16:48:52Z","author_association":"CONTRIBUTOR","body":"> I have a long running compaction that I want to cancel but I don't want to cancel all compactions on a table.\r\n\r\nCancel in the context of the compact command currently has the meaning that it interrupts user compactions and prevents new ones from starting.   May not want to overload this.  Could possibly do something like `compact --restart <table>[<optional start row>:<optional end row>]` which would restart any compactions on a table for tablets that fall within a given range.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993750265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993755333","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993755333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993755333,"node_id":"IC_kwDOACaFSM47O4DF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T16:48:18Z","updated_at":"2021-12-14T16:48:18Z","author_association":"CONTRIBUTOR","body":"> Based on this, you can remove the ecid row from tablet metadata\r\n\r\nAlso for internal compactions can kill the tserver running it ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993755333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993789487","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993789487","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993789487,"node_id":"IC_kwDOACaFSM47PAYv","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T17:04:37Z","updated_at":"2021-12-14T17:04:37Z","author_association":"CONTRIBUTOR","body":"> and prevents new ones from starting.\r\n\r\nDo you mean that it prevents new ones from starting until all compactions have stopped? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993789487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993790800","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993790800","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993790800,"node_id":"IC_kwDOACaFSM47PAtQ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T17:06:05Z","updated_at":"2021-12-14T17:06:05Z","author_association":"CONTRIBUTOR","body":"@dlmarion @keith-turner are you giving ideas for implementing this enhancement or advocating for alternatives?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993790800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993791950","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-993791950","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":993791950,"node_id":"IC_kwDOACaFSM47PA_O","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T17:07:20Z","updated_at":"2021-12-14T17:07:20Z","author_association":"CONTRIBUTOR","body":"My comment was an idea for implementation. Deleting the `ecid` row from the tablet metadata should cause the Compactor to stop compacting. Not sure what would happen on the tablet server though...\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993791950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993946751","html_url":"https://github.com/apache/accumulo/pull/2385#issuecomment-993946751","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2385","id":993946751,"node_id":"IC_kwDOACaFSM47Pmx_","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T20:17:59Z","updated_at":"2021-12-14T20:17:59Z","author_association":"CONTRIBUTOR","body":"My last commit, made a further optimization by caching up to 50 objects for the external compaction details in the session storage.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/993946751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/994768093","html_url":"https://github.com/apache/accumulo/pull/2388#issuecomment-994768093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2388","id":994768093,"node_id":"IC_kwDOACaFSM47SvTd","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T12:59:27Z","updated_at":"2021-12-15T12:59:27Z","author_association":"MEMBER","body":"Closing as duplicate of #2387","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/994768093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996038369","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996038369","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996038369,"node_id":"IC_kwDOACaFSM47Xlbh","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-16T17:42:46Z","updated_at":"2021-12-16T17:42:46Z","author_association":"CONTRIBUTOR","body":"I was talking to @EdColeman about this command and its various issues. It definitely has performance problems but we are not sure where exactly these are occurring in the code. These changes may help but it is also unclear whether globbing is supported in the method that returns the `RemoteIterator`. A solution to the globbing question would be to rewrite the utility to not use the file globbing. I started looking deeper into the code and noticed that it is complicated due to the nature of the way Accumulo can share files between tables when they are cloned. The command description states: \"prints how much space, in bytes, is used by files referenced by a table. When multiple tables are specified it prints how much space, in bytes, is used by files shared between tables, if any.\"\r\n\r\nI ran a test where I cloned a table (ci) and deleted a few rows from the clone (ci2). Now this is what the output of the command prints:\r\n<pre>\r\n2021-12-16T12:14:36,461 [Shell.audit] INFO : root@uno> du ci  -h\r\n   36.37G [ci]\r\nroot@uno> du ci2 -h\r\n2021-12-16T12:14:41,771 [Shell.audit] INFO : root@uno> du ci2 -h\r\n   36.37G [ci2]\r\nroot@uno> du ci ci2 -h\r\n2021-12-16T12:14:44,676 [Shell.audit] INFO : root@uno> du ci ci2 -h\r\n    1.59G [ci]\r\n   34.78G [ci, ci2]\r\n    1.59G [ci2]\r\n</pre>\r\nI am not sure exactly what the first and 3rd numbers are saying or how useful they are but I think the command could be greatly simplified if it only did one table at a time. We could just look at the metadata for that table and give the size of files used by that table. We could check if the file is referenced in a different tableID directory as its current ID and just report that to the user. It could then look like this:\r\n<pre>\r\n2021-12-16T12:14:36,461 [Shell.audit] INFO : root@uno> du ci  -h\r\n   36.37G [ci2, ci3]\r\n</pre>\r\nThis telling the user it has files shared with those other tables. We could add an option to print shared file paths as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996038369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996045874","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996045874","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996045874,"node_id":"IC_kwDOACaFSM47XnQy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-16T17:53:03Z","updated_at":"2021-12-16T17:53:03Z","author_association":"MEMBER","body":"> I am not sure exactly what the first and 3rd numbers are saying or how useful they are\r\n\r\nThey are saying that's the amount of space that is used by files only on that table, and not on the other table, whereas the line in the middle is the amount of space used by files the tables have in common. This seems very useful. One example is to see how much space you would recover from deleting the second table. You can see that you might not save much, because a lot of its data is in files shared with the first table.\r\n\r\n> 2021-12-16T12:14:36,461 [Shell.audit] INFO : root@uno> du ci  -h\r\n>    36.37G [ci2, ci3]\r\n> This telling the user it has files shared with those other tables. We could add an option to print shared file paths as well.\r\n\r\nI think that's a little confusing. Does it mean that all of its data is shared with the second table, or just that it has some data in common? The current view is much more clear about that, and doesn't require us to do any more work than necessary to evaluate the files for the table that was asked about.\r\n\r\nIn any case, changing the behavior of this command seems out of scope of this PR. I think the idea here was simply to optimize performance in collecting the file sizes. If that can be done, that'd be great, but I don't think we should be changing the behavior at the same time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996045874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996053071","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996053071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996053071,"node_id":"IC_kwDOACaFSM47XpBP","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-16T18:03:11Z","updated_at":"2021-12-16T18:03:11Z","author_association":"CONTRIBUTOR","body":"> They are saying that's the amount of space that is used by files only on that table, and not on the other table, whereas the line in the middle is the amount of space used by files the tables have in common. \r\n\r\nBut the numbers don't add up to the totals when you specify one table. And I would think the second table would have less data since all I did was delete rows. Do we know that deleting \"ci2\" will free up 1.59G?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996053071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996056182","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996056182","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996056182,"node_id":"IC_kwDOACaFSM47Xpx2","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-16T18:07:25Z","updated_at":"2021-12-16T18:07:25Z","author_association":"CONTRIBUTOR","body":"> > They are saying that's the amount of space that is used by files only on that table, and not on the other table, whereas the line in the middle is the amount of space used by files the tables have in common.\r\n> \r\n> But the numbers don't add up to the totals when you specify one table. And I would think the second table would have less data since all I did was delete rows. Do we know that deleting \"ci2\" will free up 1.59G?\r\n\r\nSorry, I was adding the wrong numbers. They do add up: 34.78 + 1.59 = 36.37","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996056182/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996771813","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996771813","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996771813,"node_id":"IC_kwDOACaFSM47aYfl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T14:39:11Z","updated_at":"2021-12-17T14:39:11Z","author_association":"CONTRIBUTOR","body":"In 7d1ba2e I removed the globbing of the Path object and set the recursive parameter to true. Since the root of the path is set to the tableId folder, I think this will work the same way. I tested with the same cluster I was using and got the same output:\r\n<pre>\r\nroot@uno> du ci -h\r\n   36.37G [ci]\r\nroot@uno> du ci2 -h\r\n   36.37G [ci2]\r\nroot@uno> du ci ci2 -h\r\n    1.59G [ci]\r\n   34.78G [ci, ci2]\r\n    1.59G [ci2]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996771813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996815106","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-996815106","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":996815106,"node_id":"IC_kwDOACaFSM47ajEC","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T15:33:18Z","updated_at":"2021-12-17T15:33:18Z","author_association":"CONTRIBUTOR","body":"> Do you have any timing numbers to show the impact of this change?\r\n\r\n@keith-turner We don't have any test clusters large enough to get a true performance test. I made some updates to @EdColeman 's PR so now the functionality should be equivalent and with the `RemoteIterator` I would imagine the performance should not be worse then what it is now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996815106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996886346","html_url":"https://github.com/apache/accumulo/issues/2373#issuecomment-996886346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2373","id":996886346,"node_id":"IC_kwDOACaFSM47a0dK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T17:14:42Z","updated_at":"2021-12-17T17:14:42Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo are you working on this still? I was thinking of taking a look into it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996886346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996887428","html_url":"https://github.com/apache/accumulo/issues/2373#issuecomment-996887428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2373","id":996887428,"node_id":"IC_kwDOACaFSM47a0uE","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T17:16:22Z","updated_at":"2021-12-17T17:16:22Z","author_association":"MEMBER","body":"> @DomGarguilo are you working on this still? I was thinking of taking a look into it.\r\n\r\nGo ahead, I took a quick look but then got sidetracked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996887428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996976996","html_url":"https://github.com/apache/accumulo/pull/2393#issuecomment-996976996","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2393","id":996976996,"node_id":"IC_kwDOACaFSM47bKlk","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T19:20:00Z","updated_at":"2021-12-17T19:20:00Z","author_association":"CONTRIBUTOR","body":"This can be fixed in 1.10 as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996976996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996987978","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-996987978","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":996987978,"node_id":"IC_kwDOACaFSM47bNRK","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T19:39:55Z","updated_at":"2021-12-17T19:39:55Z","author_association":"MEMBER","body":"The newest changes seem to be working except they only allow for specifically formatted properties. For example, if using nested properties like those [found in accumulo testing](https://github.com/apache/accumulo-testing/blob/main/conf/accumulo-testing.properties#L43-L48):\r\n```\r\ntest.ci.common.accumulo.server.props=\\\r\ntserver.compaction.major.service.cs1.planner=org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner \\\r\ntserver.compaction.major.service.cs1.planner.opts.executors=\\\r\n[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},\\\r\n{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},\\\r\n{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\n```\r\nThe tool will not find the executor config since it is within `test.ci.common.accumulo.server.props`. We might be able to account for this by accepting an optional argument that points to the parent property (in this case `test.ci.common.accumulo.server.props`). This example is one of the test cases that is currently failing.\r\n\r\nFor contrast, the following properties work fine with this tool:\r\n```\r\ntserver.compaction.major.service.cs1.planner=org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner \r\ntserver.compaction.major.service.cs1.planner.opts.executors=\\\r\n[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},\\\r\n{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},\\\r\n{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/996987978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997003747","html_url":"https://github.com/apache/accumulo/pull/2393#issuecomment-997003747","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2393","id":997003747,"node_id":"IC_kwDOACaFSM47bRHj","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T20:10:22Z","updated_at":"2021-12-17T20:10:22Z","author_association":"CONTRIBUTOR","body":"Merged a separate branch into 1.10 first so I could merge it forward.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997003747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997017620","html_url":"https://github.com/apache/accumulo/pull/2392#issuecomment-997017620","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2392","id":997017620,"node_id":"IC_kwDOACaFSM47bUgU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T20:37:46Z","updated_at":"2021-12-17T20:37:46Z","author_association":"CONTRIBUTOR","body":"FWIW, the Compactor uses [this](https://github.com/apache/accumulo/blob/e0853b7715f9712ad05168b727ebc916a7aeb200/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L476) to get the Coordinator connection. This has the downside of calling ZK every time, which I think might be cached, but should pick up the case that the Coordinator is down (throws a Transport Exception) or if it moves.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997017620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997022586","html_url":"https://github.com/apache/accumulo/issues/2383#issuecomment-997022586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2383","id":997022586,"node_id":"IC_kwDOACaFSM47bVt6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T20:48:19Z","updated_at":"2021-12-17T20:48:19Z","author_association":"CONTRIBUTOR","body":"Closed by #2391","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/997022586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998153437","html_url":"https://github.com/apache/accumulo/pull/2392#issuecomment-998153437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2392","id":998153437,"node_id":"IC_kwDOACaFSM47fpzd","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-20T18:04:28Z","updated_at":"2021-12-20T20:19:51Z","author_association":"CONTRIBUTOR","body":"If the Monitor can no longer get the connection to the coordinator it will throw an exception here:\r\nhttps://github.com/apache/accumulo/blob/c19fc7c62bc4458e2530db18125352fd04680731/server/monitor/src/main/java/org/apache/accumulo/monitor/Monitor.java#L676-L682\r\n\r\nThis PR is mostly for the page to detect when the Coordinator can't be found or moved. The page itself will throw Datatables pop-up errors with a message that is not very helpful. With this change you can still see those errors before the next interval is reached but after a minute the monitor will detect that its gone and show the \"Compaction Coordinator Not Running\" message on the page.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998153437/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998163630","html_url":"https://github.com/apache/accumulo/pull/2394#issuecomment-998163630","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2394","id":998163630,"node_id":"IC_kwDOACaFSM47fsSu","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-20T18:18:39Z","updated_at":"2021-12-20T18:18:39Z","author_association":"MEMBER","body":"These changes look good from what I can tell. Have you been able to verify that this works as intended? I can't think of a good way to test these changes.\r\n\r\nDid you consider using a MuliMap here? It looks like it might make for a more complicated stream so not sure that its the best option but thought I would mention it just in case.\r\nhttps://github.com/apache/accumulo/blob/e9fc27ce04138189057e495ceb3e238bae69e8b6/core/src/main/java/org/apache/accumulo/core/metadata/schema/TabletsMetadata.java#L134-L135","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998163630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998743267","html_url":"https://github.com/apache/accumulo/issues/2153#issuecomment-998743267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2153","id":998743267,"node_id":"IC_kwDOACaFSM47h5zj","user":{"login":"foster33","id":84727868,"node_id":"MDQ6VXNlcjg0NzI3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/84727868?v=4","gravatar_id":"","url":"https://api.github.com/users/foster33","html_url":"https://github.com/foster33","followers_url":"https://api.github.com/users/foster33/followers","following_url":"https://api.github.com/users/foster33/following{/other_user}","gists_url":"https://api.github.com/users/foster33/gists{/gist_id}","starred_url":"https://api.github.com/users/foster33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foster33/subscriptions","organizations_url":"https://api.github.com/users/foster33/orgs","repos_url":"https://api.github.com/users/foster33/repos","events_url":"https://api.github.com/users/foster33/events{/privacy}","received_events_url":"https://api.github.com/users/foster33/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T12:35:03Z","updated_at":"2021-12-21T12:35:03Z","author_association":"CONTRIBUTOR","body":"I would like to work on this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998743267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998826614","html_url":"https://github.com/apache/accumulo/issues/2386#issuecomment-998826614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2386","id":998826614,"node_id":"IC_kwDOACaFSM47iOJ2","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T14:31:52Z","updated_at":"2021-12-21T14:31:52Z","author_association":"CONTRIBUTOR","body":"I was thinking of a way to make this easier for the user to call but since the external compactions are experimental I didn't want to introduce anything into the public API yet. I thought I could create a server utility to cancel compactions or modify the Compaction Coordinator to accept a parameter to call a method, something that could be called using the scripts. I am not sure what is the best approach. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998826614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]