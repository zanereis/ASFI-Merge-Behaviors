[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468624176","html_url":"https://github.com/apache/brpc/issues/640#issuecomment-468624176","issue_url":"https://api.github.com/repos/apache/brpc/issues/640","id":468624176,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODYyNDE3Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T10:46:10Z","updated_at":"2019-03-01T10:46:10Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468624176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468638388","html_url":"https://github.com/apache/brpc/issues/246#issuecomment-468638388","issue_url":"https://api.github.com/repos/apache/brpc/issues/246","id":468638388,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODYzODM4OA==","user":{"login":"eric-buaa-cn","id":40321036,"node_id":"MDQ6VXNlcjQwMzIxMDM2","avatar_url":"https://avatars.githubusercontent.com/u/40321036?v=4","gravatar_id":"","url":"https://api.github.com/users/eric-buaa-cn","html_url":"https://github.com/eric-buaa-cn","followers_url":"https://api.github.com/users/eric-buaa-cn/followers","following_url":"https://api.github.com/users/eric-buaa-cn/following{/other_user}","gists_url":"https://api.github.com/users/eric-buaa-cn/gists{/gist_id}","starred_url":"https://api.github.com/users/eric-buaa-cn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eric-buaa-cn/subscriptions","organizations_url":"https://api.github.com/users/eric-buaa-cn/orgs","repos_url":"https://api.github.com/users/eric-buaa-cn/repos","events_url":"https://api.github.com/users/eric-buaa-cn/events{/privacy}","received_events_url":"https://api.github.com/users/eric-buaa-cn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T11:41:31Z","updated_at":"2019-03-01T11:41:31Z","author_association":"CONTRIBUTOR","body":"Can you give me more detail about when g_task_control will be called \"before main()\"?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468638388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468863041","html_url":"https://github.com/apache/brpc/issues/630#issuecomment-468863041","issue_url":"https://api.github.com/repos/apache/brpc/issues/630","id":468863041,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODg2MzA0MQ==","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T00:57:34Z","updated_at":"2019-03-06T11:31:51Z","author_association":"CONTRIBUTOR","body":"是否可以考虑使用智能指针来避免这个问题，即在每个controller里保存一份parent span的shared_ptr，提交的时候进行析构，让最后一个提交的controller来提交整个trace。 @jamesge","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/468863041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469514797","html_url":"https://github.com/apache/brpc/issues/678#issuecomment-469514797","issue_url":"https://api.github.com/repos/apache/brpc/issues/678","id":469514797,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTUxNDc5Nw==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T02:50:32Z","updated_at":"2019-03-05T02:50:32Z","author_association":"NONE","body":"看了下，是不是因为murmurhash3没有64位版本的问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469514797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469525572","html_url":"https://github.com/apache/brpc/issues/673#issuecomment-469525572","issue_url":"https://api.github.com/repos/apache/brpc/issues/673","id":469525572,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTUyNTU3Mg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T03:46:20Z","updated_at":"2019-03-05T03:46:20Z","author_association":"MEMBER","body":"addressfailedaswell只要这个server还在ns中，就会一直成功","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469525572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469528156","html_url":"https://github.com/apache/brpc/issues/672#issuecomment-469528156","issue_url":"https://api.github.com/repos/apache/brpc/issues/672","id":469528156,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTUyODE1Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T04:00:40Z","updated_at":"2019-03-05T04:00:40Z","author_association":"MEMBER","body":"Fixed in https://github.com/apache/incubator-brpc/pull/679","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/469528156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/470366685","html_url":"https://github.com/apache/brpc/issues/678#issuecomment-470366685","issue_url":"https://api.github.com/repos/apache/brpc/issues/678","id":470366685,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDM2NjY4NQ==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-07T03:07:37Z","updated_at":"2019-03-07T03:07:37Z","author_association":"NONE","body":"已经自行基于google cityhash,做了一次Hash128to64来封装解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/470366685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/471373567","html_url":"https://github.com/apache/brpc/issues/671#issuecomment-471373567","issue_url":"https://api.github.com/repos/apache/brpc/issues/671","id":471373567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTM3MzU2Nw==","user":{"login":"liangjianqun","id":9302958,"node_id":"MDQ6VXNlcjkzMDI5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/9302958?v=4","gravatar_id":"","url":"https://api.github.com/users/liangjianqun","html_url":"https://github.com/liangjianqun","followers_url":"https://api.github.com/users/liangjianqun/followers","following_url":"https://api.github.com/users/liangjianqun/following{/other_user}","gists_url":"https://api.github.com/users/liangjianqun/gists{/gist_id}","starred_url":"https://api.github.com/users/liangjianqun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liangjianqun/subscriptions","organizations_url":"https://api.github.com/users/liangjianqun/orgs","repos_url":"https://api.github.com/users/liangjianqun/repos","events_url":"https://api.github.com/users/liangjianqun/events{/privacy}","received_events_url":"https://api.github.com/users/liangjianqun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-11T01:07:11Z","updated_at":"2019-03-11T01:07:11Z","author_association":"NONE","body":"交换机网络模块有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/471373567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472337947","html_url":"https://github.com/apache/brpc/issues/685#issuecomment-472337947","issue_url":"https://api.github.com/repos/apache/brpc/issues/685","id":472337947,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjMzNzk0Nw==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T09:07:57Z","updated_at":"2019-03-13T09:07:57Z","author_association":"CONTRIBUTOR","body":"@kenshinxf","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472337947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472354485","html_url":"https://github.com/apache/brpc/issues/685#issuecomment-472354485","issue_url":"https://api.github.com/repos/apache/brpc/issues/685","id":472354485,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjM1NDQ4NQ==","user":{"login":"kenshinxf","id":7056720,"node_id":"MDQ6VXNlcjcwNTY3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7056720?v=4","gravatar_id":"","url":"https://api.github.com/users/kenshinxf","html_url":"https://github.com/kenshinxf","followers_url":"https://api.github.com/users/kenshinxf/followers","following_url":"https://api.github.com/users/kenshinxf/following{/other_user}","gists_url":"https://api.github.com/users/kenshinxf/gists{/gist_id}","starred_url":"https://api.github.com/users/kenshinxf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenshinxf/subscriptions","organizations_url":"https://api.github.com/users/kenshinxf/orgs","repos_url":"https://api.github.com/users/kenshinxf/repos","events_url":"https://api.github.com/users/kenshinxf/events{/privacy}","received_events_url":"https://api.github.com/users/kenshinxf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T09:56:30Z","updated_at":"2019-03-13T09:56:30Z","author_association":"NONE","body":"> **Describe the bug (描述bug)**\r\n> [如题：]\r\n> \r\n> thrift_protocol.cpp的SerializeThriftRequest函数中\r\n> \r\n> ```\r\n>         char struct_begin_str[32 + method_name.size()];\r\n>         char* p = struct_begin_str;\r\n>         memcpy(p, \"ThriftService_\", 14);  // 这里的service name写死了 ThriftService\r\n>         p += 14;\r\n>         memcpy(p, method_name.data(), method_name.size());\r\n>         p += method_name.size();\r\n>         memcpy(p, \"_pargs\", 6);\r\n>         p += 6;\r\n>         *p = '\\0';\r\n>         xfer += oprot.writeStructBegin(struct_begin_str);\r\n>         xfer += oprot.writeFieldBegin(\"request\", ::apache::thrift::protocol::T_STRUCT, \r\n>                                                         THRIFT_REQUEST_FID);  // 这里的请求名称写死了 “request”\r\n> ```\r\n> **Expected behavior (期望行为)**\r\n> 由用户定制。\r\n\r\n想问一下， 这里用户定制的场景和目的是？ 现在不能定制的影响是？如有有影响能提供个bad case例子吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472354485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472356099","html_url":"https://github.com/apache/brpc/issues/670#issuecomment-472356099","issue_url":"https://api.github.com/repos/apache/brpc/issues/670","id":472356099,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjM1NjA5OQ==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T10:01:07Z","updated_at":"2019-03-13T10:01:19Z","author_association":"MEMBER","body":"https://github.com/apache/incubator-brpc/issues/686 也是类似","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472356099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472372750","html_url":"https://github.com/apache/brpc/issues/685#issuecomment-472372750","issue_url":"https://api.github.com/repos/apache/brpc/issues/685","id":472372750,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjM3Mjc1MA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T10:49:36Z","updated_at":"2019-03-13T10:50:20Z","author_association":"CONTRIBUTOR","body":"因为有些服务server端的实现不是基于brpc的。比如，我们现在开发brpc支持cassandra thrift，\r\n就有很多不同的方法和请求名称。\r\n这里似乎应该直接调用req->raw_instance()->Write(oport) 。直接写入整个请求的struct，就可以。比如\r\n/example/thrift_extension_c++/gen-cpp的例子\r\n\r\n```\r\n179 void EchoServiceClient::send_Echo(const EchoRequest& request)\r\n180 {\r\n181   int32_t cseqid = 0;\r\n182   oprot_->writeMessageBegin(\"Echo\", ::apache::thrift::protocol::T_CALL, cseqid);\r\n183 \r\n184   EchoService_Echo_pargs args;  \r\n185   args.request = &request;  \r\n186   args.write(oprot_);  // args作为raw_instance()传入 直接调用thrift生成的代码写入就可以\r\n187 \r\n188   oprot_->writeMessageEnd();\r\n189   oprot_->getTransport()->writeEnd();\r\n190   oprot_->getTransport()->flush();\r\n191 }\r\n\r\n```\r\n@kenshinxf ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472372750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472384256","html_url":"https://github.com/apache/brpc/issues/685#issuecomment-472384256","issue_url":"https://api.github.com/repos/apache/brpc/issues/685","id":472384256,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjM4NDI1Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T11:27:30Z","updated_at":"2019-03-13T11:27:30Z","author_association":"CONTRIBUTOR","body":"这个struct叫什么无所谓的，你说的是不是多args情况下如何传入的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472384256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472384801","html_url":"https://github.com/apache/brpc/issues/686#issuecomment-472384801","issue_url":"https://api.github.com/repos/apache/brpc/issues/686","id":472384801,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjM4NDgwMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T11:29:14Z","updated_at":"2019-03-13T11:29:14Z","author_association":"CONTRIBUTOR","body":"应急的bthread照样可能用光，到时还是类似的问题，“应急”是没法通用的。这里的根本解决方法是让创建bthread处的bthread/pthread阻塞，但改动很大。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472384801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472405405","html_url":"https://github.com/apache/brpc/issues/685#issuecomment-472405405","issue_url":"https://api.github.com/repos/apache/brpc/issues/685","id":472405405,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjQwNTQwNQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-13T12:40:26Z","updated_at":"2019-03-13T12:40:26Z","author_association":"CONTRIBUTOR","body":"ok 了解了 所谓半描述的 只要field顺序不变就可以。那就没问题了。多参数的情况，是当作一个struct里的多个fields处理的，没有问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472405405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472702018","html_url":"https://github.com/apache/brpc/issues/644#issuecomment-472702018","issue_url":"https://api.github.com/repos/apache/brpc/issues/644","id":472702018,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjcwMjAxOA==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-14T04:41:38Z","updated_at":"2019-03-14T04:41:38Z","author_association":"MEMBER","body":">瞬时相同的butex_wait操作大于总线程数的时候\r\n\r\n@hairet 是什么意思？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472702018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472770219","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-472770219","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":472770219,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Mjc3MDIxOQ==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-14T09:27:30Z","updated_at":"2019-03-14T09:27:30Z","author_association":"NONE","body":"我来回捞这个问题了。。。我在想这个是不是在说 Rendezvous hashing ？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/472770219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/473129356","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-473129356","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":473129356,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzEyOTM1Ng==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-15T01:51:29Z","updated_at":"2019-03-15T01:51:29Z","author_association":"NONE","body":"一致性hash的话，每个server处理的range是不确定的。对于有cache的系统，这样很可能有严重的cache颠簸问题；所以我理解这个问题是在说一致性hash有没有解决cache颠簸问题的比较好的方案","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/473129356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/473219164","html_url":"https://github.com/apache/brpc/issues/231#issuecomment-473219164","issue_url":"https://api.github.com/repos/apache/brpc/issues/231","id":473219164,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzIxOTE2NA==","user":{"login":"cxxcunow","id":30883187,"node_id":"MDQ6VXNlcjMwODgzMTg3","avatar_url":"https://avatars.githubusercontent.com/u/30883187?v=4","gravatar_id":"","url":"https://api.github.com/users/cxxcunow","html_url":"https://github.com/cxxcunow","followers_url":"https://api.github.com/users/cxxcunow/followers","following_url":"https://api.github.com/users/cxxcunow/following{/other_user}","gists_url":"https://api.github.com/users/cxxcunow/gists{/gist_id}","starred_url":"https://api.github.com/users/cxxcunow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxxcunow/subscriptions","organizations_url":"https://api.github.com/users/cxxcunow/orgs","repos_url":"https://api.github.com/users/cxxcunow/repos","events_url":"https://api.github.com/users/cxxcunow/events{/privacy}","received_events_url":"https://api.github.com/users/cxxcunow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-15T09:36:48Z","updated_at":"2019-03-15T09:36:48Z","author_association":"NONE","body":"你的问题解决了吗？我试验了直接brpc连接，如果再编译example，运行就会报错释放两次内存。后来你怎么弄的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/473219164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474212299","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474212299","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474212299,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDIxMjI5OQ==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T06:16:48Z","updated_at":"2019-03-19T06:16:48Z","author_association":"CONTRIBUTOR","body":"@jamesge 好的，你整体看看吧，有什么问题，我到时候集中修改一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474212299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474219457","html_url":"https://github.com/apache/brpc/issues/658#issuecomment-474219457","issue_url":"https://api.github.com/repos/apache/brpc/issues/658","id":474219457,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDIxOTQ1Nw==","user":{"login":"leonwu327","id":30514969,"node_id":"MDQ6VXNlcjMwNTE0OTY5","avatar_url":"https://avatars.githubusercontent.com/u/30514969?v=4","gravatar_id":"","url":"https://api.github.com/users/leonwu327","html_url":"https://github.com/leonwu327","followers_url":"https://api.github.com/users/leonwu327/followers","following_url":"https://api.github.com/users/leonwu327/following{/other_user}","gists_url":"https://api.github.com/users/leonwu327/gists{/gist_id}","starred_url":"https://api.github.com/users/leonwu327/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonwu327/subscriptions","organizations_url":"https://api.github.com/users/leonwu327/orgs","repos_url":"https://api.github.com/users/leonwu327/repos","events_url":"https://api.github.com/users/leonwu327/events{/privacy}","received_events_url":"https://api.github.com/users/leonwu327/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T06:51:00Z","updated_at":"2019-03-19T06:51:00Z","author_association":"NONE","body":"请问现在这个问题有知道是什么原因了吗@old-bear？我们的环境中也出现了同样的问题，堆栈是一样的。core的时候没有其他的错误打印，只有两个CHECK信息：\r\nCheck failed: NULL == _write_head.load(butil::memory_order_relaxed).\r\n#0 0x7f660a5b47ee brpc::Socket::WaitAndReset()\r\n#1 0x7f660a5b8f5a brpc::Socket::HealthCheckThread()\r\n#2 0x7f660a474e3a bthread::TaskGroup::task_runner()\r\n#3 0x7f660a45dc81 bthread_make_fcontext\r\n\r\nCheck failed: SSL_CONNECTED == ssl_state() (3 vs 0).\r\n#0 0x7f660a5b3d4c brpc::Socket::DoWrite()\r\n#1 0x7f660a5ba267 brpc::Socket::KeepWrite()\r\n#2 0x7f660a474e3a bthread::TaskGroup::task_runner()\r\n#3 0x7f660a45dc81 bthread_make_fcontext\r\n谢谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474219457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474241803","html_url":"https://github.com/apache/brpc/issues/658#issuecomment-474241803","issue_url":"https://api.github.com/repos/apache/brpc/issues/658","id":474241803,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDI0MTgwMw==","user":{"login":"leonwu327","id":30514969,"node_id":"MDQ6VXNlcjMwNTE0OTY5","avatar_url":"https://avatars.githubusercontent.com/u/30514969?v=4","gravatar_id":"","url":"https://api.github.com/users/leonwu327","html_url":"https://github.com/leonwu327","followers_url":"https://api.github.com/users/leonwu327/followers","following_url":"https://api.github.com/users/leonwu327/following{/other_user}","gists_url":"https://api.github.com/users/leonwu327/gists{/gist_id}","starred_url":"https://api.github.com/users/leonwu327/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonwu327/subscriptions","organizations_url":"https://api.github.com/users/leonwu327/orgs","repos_url":"https://api.github.com/users/leonwu327/repos","events_url":"https://api.github.com/users/leonwu327/events{/privacy}","received_events_url":"https://api.github.com/users/leonwu327/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T08:22:22Z","updated_at":"2019-03-19T08:22:22Z","author_association":"NONE","body":"> fd=-1，Fail to read from fd=2797 SocketId=17179872856@10.89.53.21:9992@27623: Connection reset by peer\"\r\n> 应该是链接被关闭后，不知道怎么又触发write了，我内部看下\r\n\r\n是不是和这个问题类似：\r\nhttps://github.com/apache/incubator-brpc/issues/643\r\n只不过这个解决方案只是去掉 CHECK，是不是可能还会引起这个core？@jamesge\r\n多谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474241803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474671681","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474671681","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474671681,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY3MTY4MQ==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T03:34:58Z","updated_at":"2019-03-20T03:34:58Z","author_association":"CONTRIBUTOR","body":"上边提到的问题已做修改，并且改了一点bug","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474671681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474713864","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474713864","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474713864,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDcxMzg2NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T07:14:20Z","updated_at":"2019-03-20T07:18:02Z","author_association":"CONTRIBUTOR","body":"这里的基本问题还是mysql中reply是怎么和command对上的， 如果有id，那就是通过correlation_id机制；如果是靠server端保证对一个command一定会回一个reply（类似redis），那就要设置正确的pipelined_count。一个workaround是限制一次query只能包含一个command，要一个request带多个command，就调用多次query，pipelined_count等于command_count。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474713864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474771920","html_url":"https://github.com/apache/brpc/issues/693#issuecomment-474771920","issue_url":"https://api.github.com/repos/apache/brpc/issues/693","id":474771920,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc3MTkyMA==","user":{"login":"DreamTeamWangbowen","id":27331571,"node_id":"MDQ6VXNlcjI3MzMxNTcx","avatar_url":"https://avatars.githubusercontent.com/u/27331571?v=4","gravatar_id":"","url":"https://api.github.com/users/DreamTeamWangbowen","html_url":"https://github.com/DreamTeamWangbowen","followers_url":"https://api.github.com/users/DreamTeamWangbowen/followers","following_url":"https://api.github.com/users/DreamTeamWangbowen/following{/other_user}","gists_url":"https://api.github.com/users/DreamTeamWangbowen/gists{/gist_id}","starred_url":"https://api.github.com/users/DreamTeamWangbowen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DreamTeamWangbowen/subscriptions","organizations_url":"https://api.github.com/users/DreamTeamWangbowen/orgs","repos_url":"https://api.github.com/users/DreamTeamWangbowen/repos","events_url":"https://api.github.com/users/DreamTeamWangbowen/events{/privacy}","received_events_url":"https://api.github.com/users/DreamTeamWangbowen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T10:26:35Z","updated_at":"2019-03-20T10:26:35Z","author_association":"NONE","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474771920/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474777255","html_url":"https://github.com/apache/brpc/issues/693#issuecomment-474777255","issue_url":"https://api.github.com/repos/apache/brpc/issues/693","id":474777255,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc3NzI1NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T10:42:58Z","updated_at":"2019-03-20T10:42:58Z","author_association":"CONTRIBUTOR","body":"bthreads are \"detached\" by default and joined or not-joined freely decided by users. You can perfectly start a bthread and leave it alone, and it will be ended and recycled when the entry function(passed to bthread_start) ends, where you can also release your resources. This is different from pthreads, which in my mind is more convenient.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474777255/reactions","total_count":2,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474778616","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474778616","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474778616,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc3ODYxNg==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T10:46:57Z","updated_at":"2019-03-20T10:46:57Z","author_association":"CONTRIBUTOR","body":"对，现在一个request里面可以写多个命令，用逗号分割，一个request对应一个response，response里面会有多个reply，每个reply对应一个命令的结果。现在的问题是连接在single模式下，多线程读取消息可能错乱。这个是需要修改的。如果以后要是支持事务和prepared statement的话，那么一个连接就需要被独占，因为这个连接需要支持事务的多次访问，这种情况下，我觉得不能使用单链接模式了。你看应该如何选择。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474778616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474781405","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474781405","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474781405,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc4MTQwNQ==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T10:56:00Z","updated_at":"2019-03-20T10:56:00Z","author_association":"CONTRIBUTOR","body":"mysql没有correlation_id机制，需要通过pipelined_count机制，但是如果一次执行10个命令，都执行成功了会有10个回复，如果有1个命令执行失败，那么后边的命令就不会有返回，返回的多个消息判断是否结束是靠is_multi的结果判断的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474781405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474786548","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474786548","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474786548,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc4NjU0OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T11:13:12Z","updated_at":"2019-03-20T11:13:12Z","author_association":"CONTRIBUTOR","body":"> 对，现在一个request里面可以写多个命令，用逗号分割，一个request对应一个response，response里面会有多个reply，每个reply对应一个命令的结果。现在的问题是连接在single模式下，多线程读取消息可能错乱。这个是需要修改的。如果以后要是支持事务和prepared statement的话，那么一个连接就需要被独占，因为这个连接需要支持事务的多次访问，这种情况下，我觉得不能使用单链接模式了。你看应该如何选择。\r\n\r\n连接模式是可以限定为pooled|short的，以确保response和request的对应关系。因为一般来说，连接数对mysql是个很重要的指标，mysql的线程模型也很落后，即使真地single连上去，server端未必能很好地应对。另外is_multi这个名字是不准确的，应该叫more_results吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474786548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474809840","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-474809840","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":474809840,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDgwOTg0MA==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T12:34:28Z","updated_at":"2019-03-20T12:34:28Z","author_association":"CONTRIBUTOR","body":"好的，那我就按照不支持single模式的方式调整。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/474809840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475090132","html_url":"https://github.com/apache/brpc/issues/693#issuecomment-475090132","issue_url":"https://api.github.com/repos/apache/brpc/issues/693","id":475090132,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA5MDEzMg==","user":{"login":"DreamTeamWangbowen","id":27331571,"node_id":"MDQ6VXNlcjI3MzMxNTcx","avatar_url":"https://avatars.githubusercontent.com/u/27331571?v=4","gravatar_id":"","url":"https://api.github.com/users/DreamTeamWangbowen","html_url":"https://github.com/DreamTeamWangbowen","followers_url":"https://api.github.com/users/DreamTeamWangbowen/followers","following_url":"https://api.github.com/users/DreamTeamWangbowen/following{/other_user}","gists_url":"https://api.github.com/users/DreamTeamWangbowen/gists{/gist_id}","starred_url":"https://api.github.com/users/DreamTeamWangbowen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DreamTeamWangbowen/subscriptions","organizations_url":"https://api.github.com/users/DreamTeamWangbowen/orgs","repos_url":"https://api.github.com/users/DreamTeamWangbowen/repos","events_url":"https://api.github.com/users/DreamTeamWangbowen/events{/privacy}","received_events_url":"https://api.github.com/users/DreamTeamWangbowen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T01:53:04Z","updated_at":"2019-03-21T01:53:04Z","author_association":"NONE","body":"> bthreads are \"detached\" by default and joined or not-joined freely decided by users. You can perfectly start a bthread and leave it alone, and it will be ended and recycled when the entry function(passed to bthread_start) ends, where you can also release your resources. This is different from pthreads, which in my mind is more convenient.\r\n\r\noh,thank you very much,I misunderstand...","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475090132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475103530","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475103530","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475103530,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEwMzUzMA==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T03:32:29Z","updated_at":"2019-03-21T03:32:29Z","author_association":"NONE","body":"项目没人维护了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475103530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475106478","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475106478","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475106478,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEwNjQ3OA==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T03:55:42Z","updated_at":"2019-03-21T03:55:42Z","author_association":"NONE","body":"cmake编译也报类似错误\r\n[ 95%] Linking CXX executable ../output/bin/protoc-gen-mcpack\r\n/usr/bin/cmake: /usr/local/lib/libcurl.so.4: no version information available (required by /usr/bin/cmake)\r\n../output/lib/libbrpc.so: undefined reference to `google::SetCommandLineOption(char const*, char const*)'\r\n../output/lib/libbrpc.so: undefined reference to `google::GetCommandLineOption(char const*, std::string*)'\r\n../output/lib/libbrpc.so: undefined reference to `google::RegisterFlagValidator(std::string const*, bool (*)(char const*, std::string const&))'\r\ncollect2: error: ld returned 1 exit status\r\nsrc/CMakeFiles/protoc-gen-mcpack.dir/build.make:103: recipe for target 'output/bin/protoc-gen-mcpack' failed\r\nmake[2]: *** [output/bin/protoc-gen-mcpack] Error 1\r\nCMakeFiles/Makefile2:245: recipe for target 'src/CMakeFiles/protoc-gen-mcpack.dir/all' failed\r\nmake[1]: *** [src/CMakeFiles/protoc-gen-mcpack.dir/all] Error 2\r\nMakefile:127: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n/////////////////////////////////////////////\r\n但是静态库的符号表中可以查到这些函数，why？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475106478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475120794","html_url":"https://github.com/apache/brpc/issues/696#issuecomment-475120794","issue_url":"https://api.github.com/repos/apache/brpc/issues/696","id":475120794,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEyMDc5NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T06:00:20Z","updated_at":"2019-03-21T06:00:20Z","author_association":"CONTRIBUTOR","body":"什么nameservice?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475120794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475134215","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475134215","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475134215,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEzNDIxNQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T07:30:57Z","updated_at":"2019-03-21T07:30:57Z","author_association":"MEMBER","body":"检查下你的环境里面是不是有多个不同版本的gflags","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475134215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475134544","html_url":"https://github.com/apache/brpc/issues/682#issuecomment-475134544","issue_url":"https://api.github.com/repos/apache/brpc/issues/682","id":475134544,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEzNDU0NA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T07:32:47Z","updated_at":"2019-03-21T07:32:47Z","author_association":"MEMBER","body":"先使用protobuf3.6或者更低的版本","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475134544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475149777","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-475149777","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":475149777,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTE0OTc3Nw==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T08:46:46Z","updated_at":"2019-03-21T08:46:46Z","author_association":"NONE","body":"我也遇到类似的问题，跟了一下gcc5.2源码\r\n![image](https://user-images.githubusercontent.com/1217132/54741088-4601b380-4bf8-11e9-8e1f-36d927b850ee.png)\r\n这个地方 fs.personality函数指针是NULL，所以在业务代码抛异常的时候，进程不会挂掉，但是在栈回退到brpc内部的地方fs.personality这个函数指针指向terminal函数，最终执行了abort，导致进程挂掉。\r\n\r\n设置personality指针的代码如下：\r\n![image](https://user-images.githubusercontent.com/1217132/54741234-cde7bd80-4bf8-11e9-8fc3-671ce46d737b.png)\r\n\r\n麻烦 @jamesge  看下，谢谢！\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475149777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475150739","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-475150739","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":475150739,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTE1MDczOQ==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T08:50:31Z","updated_at":"2019-03-21T08:50:31Z","author_association":"NONE","body":"执行到brpc内部挂掉：\r\n#0  0x00007f0621a605f7 in raise () from /usr/lib64/libc.so.6\r\n#1  0x00007f0621a61ce8 in abort () from /usr/lib64/libc.so.6\r\n#2  0x0000000000489f11 in myterminate () at brpc/example/echo_c++/server.cpp:322\r\n#3  0x0000000000b651e6 in __cxxabiv1::__terminate (handler=<optimized out>) at ../../../../libstdc++-v3/libsupc++/eh_terminate.cc:47\r\n#4  0x0000000000bf0c09 in __cxa_call_terminate (ue_header=ue_header@entry=0x7f060c047570) at ../../../../libstdc++-v3/libsupc++/eh_call.cc:54\r\n#5  0x0000000000b64a05 in __cxxabiv1::__gxx_personality_v0 (version=<optimized out>, actions=<optimized out>, exception_class=5138137972254386944, \r\n    ue_header=<optimized out>, context=0x7f05fdfea8e0) at ../../../../libstdc++-v3/libsupc++/eh_personality.cc:676\r\n#6  0x0000000000bf9023 in _Unwind_RaiseException_Phase2 (exc=exc@entry=0x7f060c047570, context=context@entry=0x7f05fdfea8e0) at ../../../libgcc/unwind.inc:62\r\n#7  0x0000000000bf9877 in _Unwind_Resume (exc=exc@entry=0x7f060c047570) at ../../../libgcc/unwind.inc:230\r\n#8  0x0000000000508036 in operator() (this=<optimized out>, obj=<optimized out>) at brpc/src/brpc/destroyable.h:33\r\n#9  ~unique_ptr (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/c++/5.2.0/bits/unique_ptr.h:236\r\n#10 ~DestroyingPtr (this=<synthetic pointer>, __in_chrg=<optimized out>) at brpc/src/brpc/destroyable.h:39\r\n#11 brpc::policy::ProcessRpcRequest (msg_base=<optimized out>) at brpc/src/brpc/policy/baidu_rpc_protocol.cpp:333\r\n#12 0x000000000055b887 in brpc::ProcessInputMessage (void_arg=void_arg@entry=0x7f060c036b20) at brpc/src/brpc/input_messenger.cpp:133\r\n#13 0x000000000055c7c8 in operator() (this=<optimized out>, last_msg=0x7f060c036b20) at brpc/src/brpc/input_messenger.cpp:139\r\n#14 brpc::InputMessenger::OnNewMessages (m=0x7f05ec01ac80) at /usr/include/c++/5.2.0/bits/unique_ptr.h:236\r\n#15 0x00000000004a6fed in brpc::Socket::ProcessEvent (arg=0x7f05ec01ac80) at brpc/src/brpc/socket.cpp:1079\r\n#16 0x0000000000609694 in bthread::TaskGroup::task_runner (skip_remained=<optimized out>) at brpc/src/bthread/task_group.cpp:293\r\n#17 0x00000000005f10e1 in bthread_make_fcontext ()\r\n#18 0x00010102464c457f in ?? ()\r\n#19 0x0000000000000000 in ?? ()\r\n\r\n\r\n\r\n\r\n业务执行map.at，抛异常，栈回退的过程完全正常，本来应该在_Unwind_RaiseException_Phase2这个函数中执行fs.personality就会挂掉，但是这个指针为NULL\r\n\r\n(gdb) bt\r\n#0  _Unwind_RaiseException_Phase2 (exc=exc@entry=0x7fffd003d5b0, context=context@entry=0x7fffcb3ec780) at ../../../libgcc/unwind.inc:40\r\n#1  0x0000000000bf9877 in _Unwind_Resume (exc=exc@entry=0x7fffd003d5b0) at ../../../libgcc/unwind.inc:230\r\n#2  0x000000000048c0d4 in ~_Rb_tree (this=0x7fffcb3ec940, __in_chrg=<optimized out>) at /usr/include/c++/5.2.0/bits/stl_tree.h:858\r\n#3  ~map (this=0x7fffcb3ec940, __in_chrg=<optimized out>) at /usr/include/c++/5.2.0/bits/stl_map.h:96\r\n#4  example::EchoServiceImpl::Echo (this=<optimized out>, cntl_base=<optimized out>, request=0x7fffd0039ae0, response=0x7fffd0039c38, done=0x7fffd003d4d0)\r\n    at brpc/example/echo_c++/server.cpp:254\r\n#5  0x000000000043a075 in example::EchoService::CallMethod (this=<optimized out>, method=<optimized out>, controller=<optimized out>, request=<optimized out>, \r\n    response=<optimized out>, done=<optimized out>) at build64_release/brpc/example/echo_c++/echo.pb.cc:675\r\n#6  0x0000000000507d39 in brpc::policy::ProcessRpcRequest (msg_base=0x7fffd002cb20) at brpc/src/brpc/policy/baidu_rpc_protocol.cpp:553\r\n#7  0x000000000055b887 in brpc::ProcessInputMessage (void_arg=void_arg@entry=0x7fffd002cb20) at brpc/src/brpc/input_messenger.cpp:133\r\n#8  0x000000000055c7c8 in operator() (this=<optimized out>, last_msg=0x7fffd002cb20) at brpc/src/brpc/input_messenger.cpp:139\r\n#9  brpc::InputMessenger::OnNewMessages (m=0x7fffcc01ac80) at /usr/include/c++/5.2.0/bits/unique_ptr.h:236\r\n#10 0x00000000004a6fed in brpc::Socket::ProcessEvent (arg=0x7fffcc01ac80) at brpc/src/brpc/socket.cpp:1079\r\n#11 0x0000000000609694 in bthread::TaskGroup::task_runner (skip_remained=<optimized out>) at brpc/src/bthread/task_group.cpp:293\r\n#12 0x00000000005f10e1 in bthread_make_fcontext ()\r\n#13 0x00010102464c457f in ?? ()\r\n#14 0x0000000000000000 in ?? ()","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475150739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475200414","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475200414","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475200414,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIwMDQxNA==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T11:52:37Z","updated_at":"2019-03-21T11:52:37Z","author_association":"NONE","body":"没有呀，只有一个gflags","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475200414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475200554","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475200554","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475200554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIwMDU1NA==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T11:53:13Z","updated_at":"2019-03-21T11:53:13Z","author_association":"NONE","body":"> 检查下你的环境里面是不是有多个不同版本的gflags\r\n\r\n没有呀，只有一个gflags","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475200554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475267029","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-475267029","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":475267029,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTI2NzAyOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T15:05:17Z","updated_at":"2019-03-21T15:05:17Z","author_association":"CONTRIBUTOR","body":"先按[这个](https://github.com/apache/incubator-brpc/blob/master/docs/cn/server_debugging.md)排查一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475267029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477445","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475477445","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475477445,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ3NzQ0NQ==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T03:00:52Z","updated_at":"2019-03-22T03:00:52Z","author_association":"NONE","body":"root@VM-0-12-ubuntu:/usr/lib/x86_64-linux-gnu# find / -name libgflags.a\r\n/usr/lib/x86_64-linux-gnu/libgflags.a\r\nroot@VM-0-12-ubuntu:/usr/lib/x86_64-linux-gnu# \r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477621","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475477621","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475477621,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ3NzYyMQ==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T03:01:50Z","updated_at":"2019-03-22T03:01:50Z","author_association":"NONE","body":"root@VM-0-12-ubuntu:/usr/lib/x86_64-linux-gnu# nm libgflags.a  | grep RegisterFlagValidator\r\n0000000000002fd0 T _ZN6google21RegisterFlagValidatorEPKbPFbPKcbE\r\n00000000000036d0 T _ZN6google21RegisterFlagValidatorEPKdPFbPKcdE\r\n0000000000003190 T _ZN6google21RegisterFlagValidatorEPKiPFbPKciE\r\n0000000000003350 T _ZN6google21RegisterFlagValidatorEPKlPFbPKclE\r\n0000000000003510 T _ZN6google21RegisterFlagValidatorEPKmPFbPKcmE\r\n0000000000003890 T _ZN6google21RegisterFlagValidatorEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPFbPKcRS6_E\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477711","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475477711","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475477711,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ3NzcxMQ==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T03:02:22Z","updated_at":"2019-03-22T03:02:22Z","author_association":"NONE","body":"只安装了一个，符号表如上边","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475477711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475479414","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475479414","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475479414,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ3OTQxNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T03:13:12Z","updated_at":"2019-03-22T03:13:12Z","author_association":"MEMBER","body":"看起来是linker没有找到gflags，用cmake的话，看下CMakeCache.txt里面GFLAGS_LIBRARY=是不是正确找到了。如果都设置了，试一下mkdir build; cmake ..;  make VERBOSE=1; 在链接的时候看下gflags有没有被加上去","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475479414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475487813","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-475487813","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":475487813,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ4NzgxMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T04:10:57Z","updated_at":"2019-03-22T04:10:57Z","author_association":"CONTRIBUTOR","body":"如果不允许single的话，就不需要pipelined_count那套了。发送和之前可以完全一致，不需要区分command和commands，收response靠more_results判断是否收完了，如果一个连接上有不符合预期的数据（比如more_results为false之后，source还没有空之类的）可以考虑关闭连接。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475487813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475504292","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475504292","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475504292,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUwNDI5Mg==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T06:01:50Z","updated_at":"2019-03-22T06:01:50Z","author_association":"NONE","body":"我apt-get移除了所有安装，然后收到安装到了/user/local/lib目录下，然后用上边说的cmake方式编译，\r\n/usr/bin/ld: /usr/local/lib/libgflags.a(gflags.cc.o): relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475504292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475504372","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475504372","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475504372,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUwNDM3Mg==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T06:02:14Z","updated_at":"2019-03-22T06:02:14Z","author_association":"NONE","body":"手动安装到了/user/local/lib目录下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475504372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475507329","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-475507329","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":475507329,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUwNzMyOQ==","user":{"login":"kevinmgyu","id":42665912,"node_id":"MDQ6VXNlcjQyNjY1OTEy","avatar_url":"https://avatars.githubusercontent.com/u/42665912?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinmgyu","html_url":"https://github.com/kevinmgyu","followers_url":"https://api.github.com/users/kevinmgyu/followers","following_url":"https://api.github.com/users/kevinmgyu/following{/other_user}","gists_url":"https://api.github.com/users/kevinmgyu/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinmgyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinmgyu/subscriptions","organizations_url":"https://api.github.com/users/kevinmgyu/orgs","repos_url":"https://api.github.com/users/kevinmgyu/repos","events_url":"https://api.github.com/users/kevinmgyu/events{/privacy}","received_events_url":"https://api.github.com/users/kevinmgyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T06:21:00Z","updated_at":"2019-03-22T06:21:00Z","author_association":"NONE","body":"忽略吧，谢谢各位，问题已经解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475507329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475515554","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-475515554","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":475515554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUxNTU1NA==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T07:06:34Z","updated_at":"2019-03-22T07:06:34Z","author_association":"NONE","body":"@jamesge 好的，谢谢，目前我的服务打开vars就会挂掉，我先把这个问题定位一下．\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475515554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475515818","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-475515818","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":475515818,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUxNTgxOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T07:08:04Z","updated_at":"2019-03-22T07:08:04Z","author_association":"CONTRIBUTOR","body":"先跑下asan排除下内存问题吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475515818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475579096","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-475579096","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":475579096,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU3OTA5Ng==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T11:06:31Z","updated_at":"2019-03-22T11:06:31Z","author_association":"CONTRIBUTOR","body":"嗨，原来有个max_replies_size这样的flags变量，用于控制分配MysqlReply数组的大小，现在如果利用上pipelined_count，就可以不用这个flags了，这样就不用定义一个死的数组大小了，你觉得这样会好一些吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475579096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475580374","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-475580374","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":475580374,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU4MDM3NA==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T11:10:50Z","updated_at":"2019-03-22T11:10:50Z","author_association":"CONTRIBUTOR","body":"如果有人错误的在单个命令里面写了两个命令，那么在response的处理里面做一个校验，判断返回的reply个数大于我们request时候预期的，就报错关闭连接。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475580374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475585775","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-475585775","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":475585775,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU4NTc3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T11:29:04Z","updated_at":"2019-03-22T11:29:04Z","author_association":"CONTRIBUTOR","body":"> 如果有人错误的在单个命令里面写了两个命令，那么在response的处理里面做一个校验，判断返回的reply个数大于我们request时候预期的，就报错关闭连接。\r\n\r\n这个必要性不大，反而会让用户觉得麻烦。比如从配置中读进来代表commands的字段可能包含多个command，用户还得拆开一个个调用。既然本身就支持简单的分隔，就没必要人为的拆开了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475585775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475596731","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-475596731","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":475596731,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU5NjczMQ==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T12:08:15Z","updated_at":"2019-03-22T12:08:15Z","author_association":"CONTRIBUTOR","body":"那max_replies_size这个有什么建议呢？还是通过gflags指定吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475596731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475840520","html_url":"https://github.com/apache/brpc/issues/698#issuecomment-475840520","issue_url":"https://api.github.com/repos/apache/brpc/issues/698","id":475840520,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTg0MDUyMA==","user":{"login":"darrenwang00","id":7533358,"node_id":"MDQ6VXNlcjc1MzMzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/7533358?v=4","gravatar_id":"","url":"https://api.github.com/users/darrenwang00","html_url":"https://github.com/darrenwang00","followers_url":"https://api.github.com/users/darrenwang00/followers","following_url":"https://api.github.com/users/darrenwang00/following{/other_user}","gists_url":"https://api.github.com/users/darrenwang00/gists{/gist_id}","starred_url":"https://api.github.com/users/darrenwang00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darrenwang00/subscriptions","organizations_url":"https://api.github.com/users/darrenwang00/orgs","repos_url":"https://api.github.com/users/darrenwang00/repos","events_url":"https://api.github.com/users/darrenwang00/events{/privacy}","received_events_url":"https://api.github.com/users/darrenwang00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T05:16:37Z","updated_at":"2019-03-23T05:16:37Z","author_association":"NONE","body":"in centos , the protoc install in   /usr/bin/protoc ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475840520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475843854","html_url":"https://github.com/apache/brpc/issues/698#issuecomment-475843854","issue_url":"https://api.github.com/repos/apache/brpc/issues/698","id":475843854,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTg0Mzg1NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T06:24:43Z","updated_at":"2019-03-23T06:24:43Z","author_association":"MEMBER","body":"try this: sh config_brpc.sh --headers=/usr/include --libs=\"/usr/lib64 /usr/bin/\"","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475843854/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475856093","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-475856093","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":475856093,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTg1NjA5Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T09:50:38Z","updated_at":"2019-03-23T09:50:38Z","author_association":"CONTRIBUTOR","body":"用其他算法有类似的现象么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475856093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475856851","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-475856851","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":475856851,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTg1Njg1MQ==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T10:04:09Z","updated_at":"2019-03-23T10:04:09Z","author_association":"NONE","body":"好， 那我先换下其他算法试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/475856851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476043492","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476043492","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476043492,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA0MzQ5Mg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T03:32:54Z","updated_at":"2019-03-25T03:32:54Z","author_association":"MEMBER","body":"ClientContext在brpc里面对应是Controller，把本来要赋给ClientContext值在Controller里面找到对应项。\r\n```\r\nClientContext context;\r\nStatus status = stub_->SayHello(&context, request, &reply); \r\n```\r\n替换成：\r\n```\r\nbrpc::Controller cntl;\r\ncntl.set_timeout_ms(...);\r\n...\r\nstub_->SayHello(&cntl, &request, &reply, NULL); \r\nif (cntl.Failed()) {\r\n...\r\n}\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476043492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476068122","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476068122","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476068122,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA2ODEyMg==","user":{"login":"koujian","id":38393122,"node_id":"MDQ6VXNlcjM4MzkzMTIy","avatar_url":"https://avatars.githubusercontent.com/u/38393122?v=4","gravatar_id":"","url":"https://api.github.com/users/koujian","html_url":"https://github.com/koujian","followers_url":"https://api.github.com/users/koujian/followers","following_url":"https://api.github.com/users/koujian/following{/other_user}","gists_url":"https://api.github.com/users/koujian/gists{/gist_id}","starred_url":"https://api.github.com/users/koujian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koujian/subscriptions","organizations_url":"https://api.github.com/users/koujian/orgs","repos_url":"https://api.github.com/users/koujian/repos","events_url":"https://api.github.com/users/koujian/events{/privacy}","received_events_url":"https://api.github.com/users/koujian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T06:15:28Z","updated_at":"2019-03-25T06:15:28Z","author_association":"NONE","body":"这样做编不过的，类型都不一致。现在用proto.exe生成了helloworld.grpc.pb.h,helloworld.grpc.pb.cc;helloworld.pb.h、helloworld.pb.cc；helloworld.grpc.pb.h中service类派生自grpc::service而不是google::protobuf::service，是不是我生成时用的插件不对？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476068122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476072707","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476072707","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476072707,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA3MjcwNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T06:37:29Z","updated_at":"2019-03-25T06:37:29Z","author_association":"MEMBER","body":"需要把grpc自带的插件删掉","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476072707/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476073459","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476073459","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476073459,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA3MzQ1OQ==","user":{"login":"koujian","id":38393122,"node_id":"MDQ6VXNlcjM4MzkzMTIy","avatar_url":"https://avatars.githubusercontent.com/u/38393122?v=4","gravatar_id":"","url":"https://api.github.com/users/koujian","html_url":"https://github.com/koujian","followers_url":"https://api.github.com/users/koujian/followers","following_url":"https://api.github.com/users/koujian/following{/other_user}","gists_url":"https://api.github.com/users/koujian/gists{/gist_id}","starred_url":"https://api.github.com/users/koujian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koujian/subscriptions","organizations_url":"https://api.github.com/users/koujian/orgs","repos_url":"https://api.github.com/users/koujian/repos","events_url":"https://api.github.com/users/koujian/events{/privacy}","received_events_url":"https://api.github.com/users/koujian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T06:40:57Z","updated_at":"2019-03-25T06:40:57Z","author_association":"NONE","body":"不使用grpc自带的插件无法支持service语义，请问是要下载哪个插件来支持service语义","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476073459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476097816","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476097816","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476097816,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA5NzgxNg==","user":{"login":"koujian","id":38393122,"node_id":"MDQ6VXNlcjM4MzkzMTIy","avatar_url":"https://avatars.githubusercontent.com/u/38393122?v=4","gravatar_id":"","url":"https://api.github.com/users/koujian","html_url":"https://github.com/koujian","followers_url":"https://api.github.com/users/koujian/followers","following_url":"https://api.github.com/users/koujian/following{/other_user}","gists_url":"https://api.github.com/users/koujian/gists{/gist_id}","starred_url":"https://api.github.com/users/koujian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koujian/subscriptions","organizations_url":"https://api.github.com/users/koujian/orgs","repos_url":"https://api.github.com/users/koujian/repos","events_url":"https://api.github.com/users/koujian/events{/privacy}","received_events_url":"https://api.github.com/users/koujian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T08:25:36Z","updated_at":"2019-03-25T08:25:36Z","author_association":"NONE","body":"请问你们使用的是proto3吗?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476097816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476099549","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476099549","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476099549,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA5OTU0OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T08:31:48Z","updated_at":"2019-03-25T08:31:48Z","author_association":"MEMBER","body":"不需要用任何插件，具体怎么生成service，参考一下example吧，然后把你的实现类改成继承生成的service","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476099549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476103525","html_url":"https://github.com/apache/brpc/issues/700#issuecomment-476103525","issue_url":"https://api.github.com/repos/apache/brpc/issues/700","id":476103525,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjEwMzUyNQ==","user":{"login":"koujian","id":38393122,"node_id":"MDQ6VXNlcjM4MzkzMTIy","avatar_url":"https://avatars.githubusercontent.com/u/38393122?v=4","gravatar_id":"","url":"https://api.github.com/users/koujian","html_url":"https://github.com/koujian","followers_url":"https://api.github.com/users/koujian/followers","following_url":"https://api.github.com/users/koujian/following{/other_user}","gists_url":"https://api.github.com/users/koujian/gists{/gist_id}","starred_url":"https://api.github.com/users/koujian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koujian/subscriptions","organizations_url":"https://api.github.com/users/koujian/orgs","repos_url":"https://api.github.com/users/koujian/repos","events_url":"https://api.github.com/users/koujian/events{/privacy}","received_events_url":"https://api.github.com/users/koujian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T08:46:13Z","updated_at":"2019-03-25T08:46:13Z","author_association":"NONE","body":"谢谢，忘记加option cc_generic_services = true;了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476103525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476257127","html_url":"https://github.com/apache/brpc/issues/682#issuecomment-476257127","issue_url":"https://api.github.com/repos/apache/brpc/issues/682","id":476257127,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjI1NzEyNw==","user":{"login":"walterzhaoJR","id":22393698,"node_id":"MDQ6VXNlcjIyMzkzNjk4","avatar_url":"https://avatars.githubusercontent.com/u/22393698?v=4","gravatar_id":"","url":"https://api.github.com/users/walterzhaoJR","html_url":"https://github.com/walterzhaoJR","followers_url":"https://api.github.com/users/walterzhaoJR/followers","following_url":"https://api.github.com/users/walterzhaoJR/following{/other_user}","gists_url":"https://api.github.com/users/walterzhaoJR/gists{/gist_id}","starred_url":"https://api.github.com/users/walterzhaoJR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterzhaoJR/subscriptions","organizations_url":"https://api.github.com/users/walterzhaoJR/orgs","repos_url":"https://api.github.com/users/walterzhaoJR/repos","events_url":"https://api.github.com/users/walterzhaoJR/events{/privacy}","received_events_url":"https://api.github.com/users/walterzhaoJR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T15:48:31Z","updated_at":"2019-03-25T15:48:31Z","author_association":"NONE","body":"ok let me have a try","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476257127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476446499","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-476446499","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":476446499,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ0NjQ5OQ==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T02:11:51Z","updated_at":"2019-03-26T02:11:51Z","author_association":"NONE","body":"使用rr算法跑了两天，目前为止没有报这种问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476446499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476457980","html_url":"https://github.com/apache/brpc/issues/698#issuecomment-476457980","issue_url":"https://api.github.com/repos/apache/brpc/issues/698","id":476457980,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ1Nzk4MA==","user":{"login":"darrenwang00","id":7533358,"node_id":"MDQ6VXNlcjc1MzMzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/7533358?v=4","gravatar_id":"","url":"https://api.github.com/users/darrenwang00","html_url":"https://github.com/darrenwang00","followers_url":"https://api.github.com/users/darrenwang00/followers","following_url":"https://api.github.com/users/darrenwang00/following{/other_user}","gists_url":"https://api.github.com/users/darrenwang00/gists{/gist_id}","starred_url":"https://api.github.com/users/darrenwang00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darrenwang00/subscriptions","organizations_url":"https://api.github.com/users/darrenwang00/orgs","repos_url":"https://api.github.com/users/darrenwang00/repos","events_url":"https://api.github.com/users/darrenwang00/events{/privacy}","received_events_url":"https://api.github.com/users/darrenwang00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T03:11:31Z","updated_at":"2019-03-26T03:11:31Z","author_association":"NONE","body":"> try this: sh config_brpc.sh --headers=/usr/include --libs=\"/usr/lib64 /usr/bin/\"\r\n\r\nok ,  make success","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476457980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476489242","html_url":"https://github.com/apache/brpc/issues/639#issuecomment-476489242","issue_url":"https://api.github.com/repos/apache/brpc/issues/639","id":476489242,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ4OTI0Mg==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T06:12:05Z","updated_at":"2019-03-26T06:12:05Z","author_association":"MEMBER","body":"基本思路是提供一个全局变量的入口， bthread* g; 从g以链表的方式打印各个bthread, 并读取 bthread的stack。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476489242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476962335","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-476962335","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":476962335,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njk2MjMzNQ==","user":{"login":"tiankonguse","id":1473029,"node_id":"MDQ6VXNlcjE0NzMwMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1473029?v=4","gravatar_id":"","url":"https://api.github.com/users/tiankonguse","html_url":"https://github.com/tiankonguse","followers_url":"https://api.github.com/users/tiankonguse/followers","following_url":"https://api.github.com/users/tiankonguse/following{/other_user}","gists_url":"https://api.github.com/users/tiankonguse/gists{/gist_id}","starred_url":"https://api.github.com/users/tiankonguse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiankonguse/subscriptions","organizations_url":"https://api.github.com/users/tiankonguse/orgs","repos_url":"https://api.github.com/users/tiankonguse/repos","events_url":"https://api.github.com/users/tiankonguse/events{/privacy}","received_events_url":"https://api.github.com/users/tiankonguse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T03:57:45Z","updated_at":"2019-03-27T03:58:52Z","author_association":"NONE","body":"1. 增大虚拟节点的个数， 可以降低热点集中在一个节点的概率\r\n\r\n2. 如果某一个单Key是热点，那不管如何增加虚拟节点数，单key的热点都不可能被均摊\r\n\r\n此时有两个方法\r\n1. 多个一致性hash环（可能会造成资源浪费）\r\n2. 只有一个一致性hash环，但是环后面的节点不是对应一个实例，而是多个实例（按需给每个节点增加实例）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476962335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476993500","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-476993500","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":476993500,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njk5MzUwMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T06:14:11Z","updated_at":"2019-03-27T06:14:35Z","author_association":"CONTRIBUTOR","body":"@tiankonguse 说的对。如果对值的一致性要求放低，其实承载流量的server也可以在内存中缓存最热的N个Key。如果要在server间共享对热Key的缓存，可以对热Key加上后缀做进一步的散列。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476993500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476999369","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-476999369","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":476999369,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njk5OTM2OQ==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T06:36:14Z","updated_at":"2019-03-27T06:55:22Z","author_association":"NONE","body":"（流量本身的）key为url，后端存储按照这个url全局有序。流量的（写入）存储过程中牵扯若干的词典，词典可能以domain，或者site为单位。所以server如果以这样的url为range做sharding条件，可以比较有效的提升词典cache的命中率。比如一个server a，处理的range是 [a.test.com, b.test.com) ，那server只需要cache住一条词典（test.com）就足够了。但是这样的话，test.com下如果有流量爆发的场景，明显server a就负载极高，需要一些负载均衡措施。\r\n\r\n如果我们使用了一致性hash，由于使用了hash等，[a.test.com, b.test.com) 可能就扩散到很多很多个（甚至所有的）server都有可能处理到。那这样的话，很多很多个server都需要cache test.com这条词典。同理，由于hash打破了这种domain，site的规律，所有的server都需要cache多条词典；而cache不可能无限增长。所以这样就有可能出现cache颠簸的问题（cache频繁的更新）\r\n\r\n感觉这种场景下，产生了cache颠簸的主要原因应该是hash函数；而没有hash函数，又不知道如何将热点打散到全局。所以这种场景的负载均衡有什么好办法解决么？\r\n\r\n\r\n不要太care这个是否sharding。我们这里sharding是因为主要希望cache命中率足够。主要是希望有这样的一个负载均衡方案，可以：\r\n1. 热点下的负载均衡\r\n2. cache命中率足够，不会颠簸。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/476999369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477004736","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477004736","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477004736,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzAwNDczNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T06:56:19Z","updated_at":"2019-03-27T06:57:57Z","author_association":"CONTRIBUTOR","body":"@GardianT 你说的这种情况不是一致性哈希能解决的。用到一致性哈希的场景的前提之一就是server加载什么数据由client决定，但这里server加载什么是由自己决定的，类型场景还有机器学习model serving。这种场景中一个记录什么数据在哪里的高可用模块是无法绕开的，经常叫Meta Server或Placement Driver，实现可以用zk/etcd/consul之类的。有了这个模块，针对热点也就比较直接了，在多个server上多加载几份数据就行了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477004736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477005672","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477005672","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477005672,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzAwNTY3Mg==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T06:59:45Z","updated_at":"2019-03-27T06:59:45Z","author_association":"NONE","body":"> @GardianT 你说的这种情况不是一致性哈希能解决的。用到一致性哈希的场景的前提之一就是server加载什么数据由client决定，但这里server加载什么是由自己决定的，类型场景还有机器学习model serving。这种场景中一个记录什么数据在哪里的高可用模块是无法绕开的，经常叫Meta Server或Placement Driver，实现可以用zk/etcd/consul之类的。有了这个模块，针对热点也就比较直接了，在多个server上多加载几份数据就行了。\r\n\r\n需要一个meta server去监控热点，然后调度更多的server去均摊热点，是这样的意思么？\r\n其实我也感觉一致性hash可能不解决问题。。。主要的关注点是这种场景下的负载均衡。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477005672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477010336","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477010336","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477010336,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzAxMDMzNg==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T07:16:01Z","updated_at":"2019-03-27T07:16:01Z","author_association":"NONE","body":"@jamesge \r\n顺便多问下：这种场景下有机会或者比较成熟的方案 让server实现自适应的负载均衡么？\r\n比如redis有slot的概念，server节点之间会通信每个server负责的slot信息。有节点失效的时候也重分配对应的slot，这样的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477010336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477100782","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-477100782","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":477100782,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzEwMDc4Mg==","user":{"login":"Xavier1994","id":11145343,"node_id":"MDQ6VXNlcjExMTQ1MzQz","avatar_url":"https://avatars.githubusercontent.com/u/11145343?v=4","gravatar_id":"","url":"https://api.github.com/users/Xavier1994","html_url":"https://github.com/Xavier1994","followers_url":"https://api.github.com/users/Xavier1994/followers","following_url":"https://api.github.com/users/Xavier1994/following{/other_user}","gists_url":"https://api.github.com/users/Xavier1994/gists{/gist_id}","starred_url":"https://api.github.com/users/Xavier1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xavier1994/subscriptions","organizations_url":"https://api.github.com/users/Xavier1994/orgs","repos_url":"https://api.github.com/users/Xavier1994/repos","events_url":"https://api.github.com/users/Xavier1994/events{/privacy}","received_events_url":"https://api.github.com/users/Xavier1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T11:09:39Z","updated_at":"2019-03-27T11:09:39Z","author_association":"NONE","body":"@jamesge 我遇到了上面说的 \"当h2response的包体长度小于remote window size时，当前的做法是直接返回RST_STREAM，更好的做法是等到收到window_update再发，just like tcp\"这个问题, 这个问题可以grpc-java客户端这边通过调大window size来解决吗. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477100782/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477115220","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477115220","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477115220,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzExNTIyMA==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T11:50:20Z","updated_at":"2019-03-27T11:50:20Z","author_association":"NONE","body":"目前已经定位到访问vars core dump的问题.\r\n\r\n![Screenshot from 2019-03-27 11:25:22](https://user-images.githubusercontent.com/8772285/55048421-0f59ec00-5083-11e9-9ccc-46bfd916bb3b.png)\r\n\r\n具体core原因没有定位到，目前已经把name=bvar_sampler_collector_usage的统计去掉，\r\n![Screenshot from 2019-03-27 11:26:55](https://user-images.githubusercontent.com/8772285/55073710-608cce80-50c9-11e9-86fa-ac68bdf23e4c.png)\r\n\r\n就变得一切正常，请问去掉这个统计项会对其他逻辑或者功能产生副作用吗?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477115220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477152424","html_url":"https://github.com/apache/brpc/issues/705#issuecomment-477152424","issue_url":"https://api.github.com/repos/apache/brpc/issues/705","id":477152424,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzE1MjQyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T13:25:06Z","updated_at":"2019-03-27T13:25:06Z","author_association":"CONTRIBUTOR","body":"你这服务已经严重拥塞了，先寻找一下拥塞原因吧，如锁，资源限制etc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477152424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477153899","html_url":"https://github.com/apache/brpc/issues/704#issuecomment-477153899","issue_url":"https://api.github.com/repos/apache/brpc/issues/704","id":477153899,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzE1Mzg5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-27T13:28:37Z","updated_at":"2019-03-27T13:28:37Z","author_association":"CONTRIBUTOR","body":"Did the RPC succeed when there's only one thread?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477153899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477417055","html_url":"https://github.com/apache/brpc/issues/706#issuecomment-477417055","issue_url":"https://api.github.com/repos/apache/brpc/issues/706","id":477417055,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQxNzA1NQ==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T02:12:24Z","updated_at":"2019-03-28T02:12:24Z","author_association":"NONE","body":"哦，我看漏了，这里fetch_add的时候一定是num_task << 1的，可以循环使用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477417055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477417124","html_url":"https://github.com/apache/brpc/issues/706#issuecomment-477417124","issue_url":"https://api.github.com/repos/apache/brpc/issues/706","id":477417124,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQxNzEyNA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T02:12:46Z","updated_at":"2019-03-28T02:12:46Z","author_association":"NONE","body":"已解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477417124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477418824","html_url":"https://github.com/apache/brpc/issues/705#issuecomment-477418824","issue_url":"https://api.github.com/repos/apache/brpc/issues/705","id":477418824,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQxODgyNA==","user":{"login":"phye","id":3255399,"node_id":"MDQ6VXNlcjMyNTUzOTk=","avatar_url":"https://avatars.githubusercontent.com/u/3255399?v=4","gravatar_id":"","url":"https://api.github.com/users/phye","html_url":"https://github.com/phye","followers_url":"https://api.github.com/users/phye/followers","following_url":"https://api.github.com/users/phye/following{/other_user}","gists_url":"https://api.github.com/users/phye/gists{/gist_id}","starred_url":"https://api.github.com/users/phye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phye/subscriptions","organizations_url":"https://api.github.com/users/phye/orgs","repos_url":"https://api.github.com/users/phye/repos","events_url":"https://api.github.com/users/phye/events{/privacy}","received_events_url":"https://api.github.com/users/phye/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T02:20:37Z","updated_at":"2019-03-28T02:20:37Z","author_association":"NONE","body":"我不是很明白，为什么拥塞严重了bthread_worker_usage只有50%呢？既然worker充足，应该不至于收包慢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477418824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477436581","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-477436581","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":477436581,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQzNjU4MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T03:48:06Z","updated_at":"2019-03-28T03:48:06Z","author_association":"MEMBER","body":"@Xavier1994 调到最大可以让这个问题出现的概率非常小，不过也就失去了流控的作用了，如果你们的场景是客户端流控不太重要，可以调大","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477436581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477448587","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477448587","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477448587,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ0ODU4Nw==","user":{"login":"tiankonguse","id":1473029,"node_id":"MDQ6VXNlcjE0NzMwMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1473029?v=4","gravatar_id":"","url":"https://api.github.com/users/tiankonguse","html_url":"https://github.com/tiankonguse","followers_url":"https://api.github.com/users/tiankonguse/followers","following_url":"https://api.github.com/users/tiankonguse/following{/other_user}","gists_url":"https://api.github.com/users/tiankonguse/gists{/gist_id}","starred_url":"https://api.github.com/users/tiankonguse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiankonguse/subscriptions","organizations_url":"https://api.github.com/users/tiankonguse/orgs","repos_url":"https://api.github.com/users/tiankonguse/repos","events_url":"https://api.github.com/users/tiankonguse/events{/privacy}","received_events_url":"https://api.github.com/users/tiankonguse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T04:59:29Z","updated_at":"2019-03-28T05:00:14Z","author_association":"NONE","body":"> （流量本身的）key为url，后端存储按照这个url全局有序。流量的（写入）存储过程中牵扯若干的词典，词典可能以domain，或者site为单位。所以server如果以这样的url为range做sharding条件，可以比较有效的提升词典cache的命中率。比如一个server a，处理的range是 [a.test.com, b.test.com) ，那server只需要cache住一条词典（test.com）就足够了。但是这样的话，test.com下如果有流量爆发的场景，明显server a就负载极高，需要一些负载均衡措施。\r\n> \r\n> 如果我们使用了一致性hash，由于使用了hash等，[a.test.com, b.test.com) 可能就扩散到很多很多个（甚至所有的）server都有可能处理到。那这样的话，很多很多个server都需要cache test.com这条词典。同理，由于hash打破了这种domain，site的规律，所有的server都需要cache多条词典；而cache不可能无限增长。所以这样就有可能出现cache颠簸的问题（cache频繁的更新）\r\n> \r\n> 感觉这种场景下，产生了cache颠簸的主要原因应该是hash函数；而没有hash函数，又不知道如何将热点打散到全局。所以这种场景的负载均衡有什么好办法解决么？\r\n> \r\n> 不要太care这个是否sharding。我们这里sharding是因为主要希望cache命中率足够。主要是希望有这样的一个负载均衡方案，可以：\r\n> \r\n> 1. 热点下的负载均衡\r\n> 2. cache命中率足够，不会颠簸。\r\n\r\n这个例子其实有几个关键的地方没有说清楚。\r\n1. 你是使用域名(a.b.vom) 还是 url(a.b.com/xx/xx/xx) 作为一致性HASH的KEY的？\r\n2. 如果是使用域名的话，那KEY量其实很少的，使用一致性HASH没意义了吧，你应该使用URL来当做KEY。  \r\n3. 如果URL当做KEY依旧存在热点，那说明是固定的一个或几个页面非常热，这个时候，按照上面我提到的方法就可以解决：一致性HASH下是路由节点，每个路由节点下根据实际的访问量扩容即可。\r\n\r\n当然也可以手动降低这个路由节点的权重（虚拟节点个数），从而将其他无关的流量导走（概率问题，不一定有效）。\r\n至于你说的监控热点，自动化调整权重什么的，只是上面的手动操作改成自动操作，依旧是概率问题，不一定解决问题。  \r\n\r\n扩容才是根本的解决方法。\r\n\r\nPS：恰好这几天我也在思考这个问题，写的有一篇文章，可以一起讨论下： https://mp.weixin.qq.com/s/yyqEwfEgEWYwWoalFLcuSw ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477448587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477451382","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477451382","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477451382,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ1MTM4Mg==","user":{"login":"GardianT","id":38547380,"node_id":"MDQ6VXNlcjM4NTQ3Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/38547380?v=4","gravatar_id":"","url":"https://api.github.com/users/GardianT","html_url":"https://github.com/GardianT","followers_url":"https://api.github.com/users/GardianT/followers","following_url":"https://api.github.com/users/GardianT/following{/other_user}","gists_url":"https://api.github.com/users/GardianT/gists{/gist_id}","starred_url":"https://api.github.com/users/GardianT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GardianT/subscriptions","organizations_url":"https://api.github.com/users/GardianT/orgs","repos_url":"https://api.github.com/users/GardianT/repos","events_url":"https://api.github.com/users/GardianT/events{/privacy}","received_events_url":"https://api.github.com/users/GardianT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T05:15:20Z","updated_at":"2019-03-28T05:24:40Z","author_association":"NONE","body":"@tiankonguse  已经说的很清楚了。\r\n\r\n1. 流量本身的key为url。\r\n2. 流量爆发，热点不会固定的，数量也不会固定的。今天可能是test.com下爆发了大量的url，明天可能就是github.com下爆发了大量url。一致性hash下是路由节点，每个路由节点按实际访问量扩容。其实这个就是关键了，如何扩容可以让全局代价最小，热点消失如何缩容等等。&&其实这里一致性hash也已经没什么意义了。\r\n\r\nPS两点\r\n1. 即使使用site or domain，key量也不少。。\r\n2. 你的文章里没有具体说小set的设计。当然其实这种做法，和有一个master去调控全局所有server的range我理解没有本质差别。这里的负载均衡设计主要关键点就是这个range怎么调整才可以解决热点且代价最小。（映射到你的文章里应该就是小set包括谁吧？）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477451382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477464038","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477464038","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477464038,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ2NDAzOA==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T06:18:12Z","updated_at":"2019-03-28T06:18:12Z","author_association":"NONE","body":"![Screenshot from 2019-03-28 14:16:57](https://user-images.githubusercontent.com/8772285/55134600-31776b00-5164-11e9-9011-5da2fb5e4bcd.png)\r\nvars显示是正常的，但是只有点击一下，就会变成0,请问这个问题怎么解决呢．\r\n![Screenshot from 2019-03-28 14:18:00](https://user-images.githubusercontent.com/8772285/55134640-4f44d000-5164-11e9-8660-568e655110d0.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477464038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477470737","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477470737","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477470737,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ3MDczNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T06:48:33Z","updated_at":"2019-03-28T06:48:33Z","author_association":"CONTRIBUTOR","body":"你这个程序看上去不太正常，跑过asan么？你上面那个coredump不像是root cause，更像是内存写坏后的“受害者”","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477470737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477474143","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477474143","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477474143,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ3NDE0Mw==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T07:03:04Z","updated_at":"2019-03-28T07:03:04Z","author_association":"NONE","body":"我用gperf跑了一下内存，没发现明显问题，而且这个程序一直在线运行，也一直表现平稳，最近想把grpc替换成brpc就出现了莫名的问题．\r\n我再用asan跑跑．","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477474143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477476784","html_url":"https://github.com/apache/brpc/issues/707#issuecomment-477476784","issue_url":"https://api.github.com/repos/apache/brpc/issues/707","id":477476784,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ3Njc4NA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T07:13:17Z","updated_at":"2019-03-28T07:13:17Z","author_association":"NONE","body":"麻烦帮确认下问题是否存在，虽然只要不是在自己创建的线程里创建bthread没有问题，以及此问题在高qps场景下几乎没有影响","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477476784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477477120","html_url":"https://github.com/apache/brpc/issues/707#issuecomment-477477120","issue_url":"https://api.github.com/repos/apache/brpc/issues/707","id":477477120,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ3NzEyMA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-28T07:14:38Z","updated_at":"2019-03-28T07:14:38Z","author_association":"NONE","body":"如果觉得有必要，我可以简单修复，似乎在task_group里记录所属work线程 id更合理","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477477120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477846062","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-477846062","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":477846062,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Nzg0NjA2Mg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T02:49:33Z","updated_at":"2019-03-29T02:49:33Z","author_association":"NONE","body":"也遇到了，la， 只有一个节点也出现Fail to select server， 是否可以做加判断， 只有一个节点时不使用 lb？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477846062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477850065","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-477850065","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":477850065,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Nzg1MDA2NQ==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T03:10:56Z","updated_at":"2019-03-29T03:10:56Z","author_association":"NONE","body":"两个节点时使用la也遇到过","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477850065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477891154","html_url":"https://github.com/apache/brpc/pull/692#issuecomment-477891154","issue_url":"https://api.github.com/repos/apache/brpc/issues/692","id":477891154,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Nzg5MTE1NA==","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T07:00:35Z","updated_at":"2019-03-29T07:00:35Z","author_association":"CONTRIBUTOR","body":"1）将查询接口改成原来的方式，2）修改了批量操作的返回结果逻辑，默认replies默认为10，数量可动态变化。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477891154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477921855","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477921855","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477921855,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkyMTg1NQ==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T09:02:33Z","updated_at":"2019-03-29T09:02:33Z","author_association":"NONE","body":"目前bvar问题已经定位到原因：\r\n由于我们的程序是使用守护进程方式启动，会fork两次．\r\n改为使用非守护进程运行(前台运行)，bvar系统以及统计项是没有问题的．\r\n请问守护进程模式，会有什么限制吗?\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477921855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477922530","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-477922530","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":477922530,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkyMjUzMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T09:04:40Z","updated_at":"2019-03-29T09:05:23Z","author_association":"CONTRIBUTOR","body":"fork两次目前不支持，见 #208 ，现象就是很多bvar都为0或不再更新","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477922530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477950527","html_url":"https://github.com/apache/brpc/issues/649#issuecomment-477950527","issue_url":"https://api.github.com/repos/apache/brpc/issues/649","id":477950527,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Nzk1MDUyNw==","user":{"login":"tiankonguse","id":1473029,"node_id":"MDQ6VXNlcjE0NzMwMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1473029?v=4","gravatar_id":"","url":"https://api.github.com/users/tiankonguse","html_url":"https://github.com/tiankonguse","followers_url":"https://api.github.com/users/tiankonguse/followers","following_url":"https://api.github.com/users/tiankonguse/following{/other_user}","gists_url":"https://api.github.com/users/tiankonguse/gists{/gist_id}","starred_url":"https://api.github.com/users/tiankonguse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiankonguse/subscriptions","organizations_url":"https://api.github.com/users/tiankonguse/orgs","repos_url":"https://api.github.com/users/tiankonguse/repos","events_url":"https://api.github.com/users/tiankonguse/events{/privacy}","received_events_url":"https://api.github.com/users/tiankonguse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-29T10:35:48Z","updated_at":"2019-03-29T10:35:48Z","author_association":"NONE","body":"@GardianT 了解你的意思了。\r\n\r\n重新描述你的问题：会有某一个key突然特别热（新闻热点），这个量可能足够大到 一致性HASH对应的节点支撑不住。  \r\n\r\n这种使用小SET不好，比较浪费资源，扩容难度也较大。\r\n可以按照第二种设计：一致性HASH下面的节点是路由表，路由表下有若干机器来均摊流量。  \r\n至于扩容，只需要在负载高的节点上加即可，缩容也一样。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/477950527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478429032","html_url":"https://github.com/apache/brpc/pull/710#issuecomment-478429032","issue_url":"https://api.github.com/repos/apache/brpc/issues/710","id":478429032,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3ODQyOTAzMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-01T04:12:17Z","updated_at":"2019-04-01T04:12:17Z","author_association":"CONTRIBUTOR","body":"1. 确认下为什么两个文件的后缀名不统一\r\n2. 这两个文件和已有的LICENSE是什么关系","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478429032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478434454","html_url":"https://github.com/apache/brpc/issues/711#issuecomment-478434454","issue_url":"https://api.github.com/repos/apache/brpc/issues/711","id":478434454,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3ODQzNDQ1NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-01T04:48:45Z","updated_at":"2019-04-01T04:48:45Z","author_association":"CONTRIBUTOR","body":"[client-side auth](https://github.com/apache/incubator-brpc/blob/master/docs/en/client.md#authentication), [server-side auth](https://github.com/apache/incubator-brpc/blob/master/docs/en/server.md#verify-identities-of-clients), [tracing](https://github.com/apache/incubator-brpc/blob/master/docs/cn/rpcz.md) (no english doc yet). As for logging, it's more likely to be temporarily added for debugging, with the source code in hand, I think you can add logging anywhere you like.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478434454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478470123","html_url":"https://github.com/apache/brpc/issues/711#issuecomment-478470123","issue_url":"https://api.github.com/repos/apache/brpc/issues/711","id":478470123,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3ODQ3MDEyMw==","user":{"login":"altkatz","id":4903871,"node_id":"MDQ6VXNlcjQ5MDM4NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4903871?v=4","gravatar_id":"","url":"https://api.github.com/users/altkatz","html_url":"https://github.com/altkatz","followers_url":"https://api.github.com/users/altkatz/followers","following_url":"https://api.github.com/users/altkatz/following{/other_user}","gists_url":"https://api.github.com/users/altkatz/gists{/gist_id}","starred_url":"https://api.github.com/users/altkatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altkatz/subscriptions","organizations_url":"https://api.github.com/users/altkatz/orgs","repos_url":"https://api.github.com/users/altkatz/repos","events_url":"https://api.github.com/users/altkatz/events{/privacy}","received_events_url":"https://api.github.com/users/altkatz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-01T07:39:51Z","updated_at":"2019-04-01T07:39:51Z","author_association":"NONE","body":"Thanks, i'll look into it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/478470123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]