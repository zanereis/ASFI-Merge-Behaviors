[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537539896","html_url":"https://github.com/apache/couchdb/pull/2217#issuecomment-537539896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2217","id":537539896,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzUzOTg5Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-02T15:11:59Z","updated_at":"2019-10-02T15:11:59Z","author_association":"MEMBER","body":"@willholley that would presumably make a fauxton 1.1.21 or so? happy to bump it again if apache/couchdb-fauxton#1227 lands in time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537539896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537540480","html_url":"https://github.com/apache/couchdb/pull/2217#issuecomment-537540480","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2217","id":537540480,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU0MDQ4MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-02T15:13:23Z","updated_at":"2019-10-02T15:13:23Z","author_association":"MEMBER","body":"@willholley I added the 'add search support' PR to the Couchdb 3.0 roadmap (https://github.com/apache/couchdb/projects/1) so we don't forget. This PR is solely for the item to move us up to 1.1.20, which adds some fauxton goodness for partitioned dbs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537540480/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537584204","html_url":"https://github.com/apache/couchdb/issues/2169#issuecomment-537584204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2169","id":537584204,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU4NDIwNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-02T16:54:44Z","updated_at":"2019-10-02T16:54:44Z","author_association":"MEMBER","body":"I don't really care either way, but this was something that whomever put in the new behaviour (@banjiewen perhaps?) wanted to deprecate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537584204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537656882","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-537656882","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":537656882,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzY1Njg4Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-02T20:04:01Z","updated_at":"2019-10-02T20:04:01Z","author_association":"MEMBER","body":"Closing this ticket in favour of the following:\r\n\r\n* #2218 What's being removed in 3.0\r\n* Beyond that, see https://lists.apache.org/thread.html/cf990063d5b686901f2b6ead0bd6eb3b687f99c7746d5345283a403e@%3Cdev.couchdb.apache.org%3E","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537656882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537984164","html_url":"https://github.com/apache/couchdb/issues/2059#issuecomment-537984164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2059","id":537984164,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzk4NDE2NA==","user":{"login":"demenyjo","id":55111732,"node_id":"MDQ6VXNlcjU1MTExNzMy","avatar_url":"https://avatars.githubusercontent.com/u/55111732?v=4","gravatar_id":"","url":"https://api.github.com/users/demenyjo","html_url":"https://github.com/demenyjo","followers_url":"https://api.github.com/users/demenyjo/followers","following_url":"https://api.github.com/users/demenyjo/following{/other_user}","gists_url":"https://api.github.com/users/demenyjo/gists{/gist_id}","starred_url":"https://api.github.com/users/demenyjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demenyjo/subscriptions","organizations_url":"https://api.github.com/users/demenyjo/orgs","repos_url":"https://api.github.com/users/demenyjo/repos","events_url":"https://api.github.com/users/demenyjo/events{/privacy}","received_events_url":"https://api.github.com/users/demenyjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T15:00:23Z","updated_at":"2019-10-03T15:00:23Z","author_association":"NONE","body":"I have returned to this issue, taking over for malexdev on the exact same server. While I do not know what all steps he took, I was able to get couchdb installed after performing a `yum update`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/537984164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538013765","html_url":"https://github.com/apache/couchdb/issues/2059#issuecomment-538013765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2059","id":538013765,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAxMzc2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T16:10:45Z","updated_at":"2019-10-03T16:10:45Z","author_association":"MEMBER","body":"Great, thanks for the info. Closing this out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538013765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538014032","html_url":"https://github.com/apache/couchdb/pull/2228#issuecomment-538014032","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2228","id":538014032,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAxNDAzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T16:11:21Z","updated_at":"2019-10-03T16:11:21Z","author_association":"MEMBER","body":"Still not happy with 2MB as the default document size but I can see that I'm going to be outvoted by the Cloudant contingent on this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538014032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538070121","html_url":"https://github.com/apache/couchdb/pull/2228#issuecomment-538070121","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2228","id":538070121,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODA3MDEyMQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T18:32:20Z","updated_at":"2019-10-03T18:32:20Z","author_association":"MEMBER","body":"discussed in couchdb-dev on IRC, Wohali is not comfortable dropping all the way to 1MB. Given the upcoming FDB restriction on a txn to 10MB, we've compromised on a new default of 8MB (8 million bytes). This is still a vast improvement over the unattainable 4 GiB default of old.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538070121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538082105","html_url":"https://github.com/apache/couchdb/pull/2230#issuecomment-538082105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2230","id":538082105,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODA4MjEwNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T19:05:02Z","updated_at":"2019-10-03T19:05:02Z","author_association":"MEMBER","body":"Whoops. Accidentally did a comment review first.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538082105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538088870","html_url":"https://github.com/apache/couchdb/issues/2227#issuecomment-538088870","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2227","id":538088870,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODA4ODg3MA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T19:24:06Z","updated_at":"2019-10-03T19:24:06Z","author_association":"MEMBER","body":"The first bit of subtlety is that there's a significant difference between \"revision that's not a leaf\" vs \"I don't know of this revision\" which means any time you get a not_found when doing a direct lookup you'll fall back to having to search every revisions rev_path.\r\n\r\nThat said, I'd still think it'd probably be worth adding the optimization as the replicator should theoretically be requesting the latest revisions most of the time.\r\n\r\nAlso while staring at this thinking of optimizations:\r\n\r\n* revs=all could be a single scan of the revision space\r\n* we should investigate building the tree once and then searching for each revision vs just searching each rev_path for the given revision. Though that also means we have to be a bit careful to match `couch_key_tree:get_*` functions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538088870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538151756","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-538151756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":538151756,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODE1MTc1Ng==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T22:22:06Z","updated_at":"2019-10-03T22:22:06Z","author_association":"CONTRIBUTOR","body":"Hi @iilyak, I've modified users_db and cookie_auth test and now are using moduletag and setup/teardown mechanisms from ExUnit.\r\n\r\n@garrensmith, please could you look at this PR to now whether the tests are acceptable in this form?\r\n\r\nThanks,\r\nJuanjo","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538151756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538298913","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-538298913","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":538298913,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODI5ODkxMw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T08:22:38Z","updated_at":"2019-10-04T08:22:56Z","author_association":"MEMBER","body":"There is already a discussion about this at https://github.com/apache/couchdb-pkg/pull/55.\r\n\r\nIf it's of interest, the Cloudant/IBM team maintain a Red Hat certified CouchDB container (based on UBI 7) at https://access.redhat.com/containers/?tab=overview#/registry.connect.redhat.com/ibm/couchdb2. We'll update it to use ubi8 when the CouchDB packages are available.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538298913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538311107","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-538311107","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":538311107,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODMxMTEwNw==","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T08:51:40Z","updated_at":"2019-10-04T08:51:40Z","author_association":"NONE","body":"Thanks for your fast reply, I'll have a look into that image.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538311107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538529062","html_url":"https://github.com/apache/couchdb/pull/2233#issuecomment-538529062","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2233","id":538529062,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODUyOTA2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T19:22:40Z","updated_at":"2019-10-04T19:22:40Z","author_association":"MEMBER","body":"@bessbd Thanks for fixing the one typo and re-capitalizing a couple of lines, but could you please revert `b932651` ? This is not a typo.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538529062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538550840","html_url":"https://github.com/apache/couchdb/issues/2232#issuecomment-538550840","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2232","id":538550840,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODU1MDg0MA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T20:35:35Z","updated_at":"2019-10-04T20:35:35Z","author_association":"MEMBER","body":"The couch_replicator_worker is probably straightforward to fix. We could just add a hibernate after a batch is flushed [1] to trigger a thorough GC. There was a similar GC optimization done quite a long time ago for this same issue.\r\n\r\nFor the couch_index_updater, is that the gen_server process, or the anonymous worker process actually performing the updates?\r\n\r\nIf it were the gen_server, then likely adding a similar hibernate option after every update would likely be the best approach. I'm somewhat uncertain what'd be accumulating binaries there. Perhaps a largish reduce value? Though it does have all the usual hallmarks of a process that passes binaries around but doesn't do many reductions of its own.\r\n\r\nIf its not the gen_server then we'll have to do a bit more investigating because that process already invokes garbage collection after every document processed. So having it getting into a state where there's lots of accumulated binaries would be fairly unexpected. Not to manage that its already doing quite a few reductions which should also trigger GC fairly quickly. Certainly I'd expect quickly enough that a GC-the-world would release anything meaningful on a regular basis.\r\n\r\n[1] https://github.com/apache/couchdb/blob/2.3.1/src/couch_replicator/src/couch_replicator_worker.erl#L174","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538550840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538557250","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-538557250","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":538557250,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODU1NzI1MA==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T20:57:21Z","updated_at":"2019-10-04T20:57:21Z","author_association":"NONE","body":"hi Nick,\r\nI'm wondering if within CouchDB2.2, there is some sort of notification to a group mailbox, when replication streams are stuck in \"retrying\" or other notifications that would be helpful to warn of CouchDB replication issues?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538557250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538674979","html_url":"https://github.com/apache/couchdb/issues/2209#issuecomment-538674979","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2209","id":538674979,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODY3NDk3OQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-05T18:10:11Z","updated_at":"2019-10-05T18:10:11Z","author_association":"MEMBER","body":"As https://github.com/apache/couchdb-documentation/pull/447 has been merged, I think this issue can be closed now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538674979/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538675227","html_url":"https://github.com/apache/couchdb/pull/2233#issuecomment-538675227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2233","id":538675227,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODY3NTIyNw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-05T18:12:07Z","updated_at":"2019-10-05T18:12:07Z","author_association":"MEMBER","body":"Thank you for the review, @wohali . I'm about to push the revert commit you've suggested soon.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538675227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538928959","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-538928959","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":538928959,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODkyODk1OQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T09:59:19Z","updated_at":"2019-10-07T09:59:19Z","author_association":"MEMBER","body":"Before I actually answer this ticket, I need to say that this is **not** how to open a ticket and request help. I can hear you are frustrated, but you don't need to write an angry ticket like this. It is poor form, insulting and honestly I still can't believe I'm going to offer some help. In all likely hood, you are using CouchDB for free. It costs you nothing. It would also cost you nothing to ask for some help politely.\r\n\r\nOk now to your problem, firstly you need to think about how mango works. Internally it is using a map/reduce index. So it builds up a view using your specified `arr_test`. So if you had multiple fields in the array the index would look like roughly like this:\r\n\r\n```\r\n[a, b, c]\r\n[a, b, c, d],\r\n[b, c, d]\r\n[c, d]\r\n```\r\n\r\nSo now, when you create a selector with `$elemMatch` to query the index. The mango query runner needs to find a way to query the index. The way to make a query fast is to have a startkey/endkey or an equal. Then it can reduce the number of documents it needs to fetch from an index. In your case, `$elemMatch` means *any* item in the array that matches. So if we had a selector like `$elemMatch: c`. We cannot build a startkey/endkey out of it because we don't know where in the array `c` for each item. So CouchDB needs to fetch every document in the index, check if it has the element in the array and then return it if it matches. \r\n\r\nSecondly, you state your environment is Docker on windows. Saying it takes 2 minutes in that setup is not a good way to benchmark. That environment will always be a fair bit slower than a production machine. Also was it 2 minutes the first time or after every time you queried it? The first time you run a query with an index, it will build the index which could explain for it being a little slow.\r\n\r\nHope that helps.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538928959/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538989658","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-538989658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":538989658,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODk4OTY1OA==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T12:37:36Z","updated_at":"2019-10-07T12:37:36Z","author_association":"CONTRIBUTOR","body":"Sorry for pushing this question, but since last week, Erlang 21 was dropped from Fedora 31, and is not available anymore. Which means we cannot compile the last CouchDB stable release (2.3.1), because it requires Erlang < 22 (cf. https://github.com/apache/couchdb/issues/2069 and https://github.com/apache/couchdb/commit/9d143ba).\r\n\r\nIs it possible to have an intermediate CouchDB release (2.3.2?) so we can compile with Erlang 22?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/538989658/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539068472","html_url":"https://github.com/apache/couchdb/issues/2147#issuecomment-539068472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2147","id":539068472,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTA2ODQ3Mg==","user":{"login":"mariocasciaro","id":105319,"node_id":"MDQ6VXNlcjEwNTMxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/105319?v=4","gravatar_id":"","url":"https://api.github.com/users/mariocasciaro","html_url":"https://github.com/mariocasciaro","followers_url":"https://api.github.com/users/mariocasciaro/followers","following_url":"https://api.github.com/users/mariocasciaro/following{/other_user}","gists_url":"https://api.github.com/users/mariocasciaro/gists{/gist_id}","starred_url":"https://api.github.com/users/mariocasciaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariocasciaro/subscriptions","organizations_url":"https://api.github.com/users/mariocasciaro/orgs","repos_url":"https://api.github.com/users/mariocasciaro/repos","events_url":"https://api.github.com/users/mariocasciaro/events{/privacy}","received_events_url":"https://api.github.com/users/mariocasciaro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T15:27:49Z","updated_at":"2019-10-07T15:27:49Z","author_association":"NONE","body":"@kocolosk Thanks for the hint. The number of `rexi_DOWN` messages is indeed growing at a steady rate, 1-3 every 10 seconds. This applies to all 3 nodes on the cluster. I double checked the connectivity of the nodes and it all seems configured and working properly. The nodes can talk to each other and `_membership` also configured properly. I tried to enable debug logging, but there's nothing relevant happening while those `rexi_DOWN` number goes up. \r\nIs there any way I can dig further into the matter, like knowing what node is seen as problematic by the cluster?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539068472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539110424","html_url":"https://github.com/apache/couchdb/issues/2232#issuecomment-539110424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2232","id":539110424,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTExMDQyNA==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T17:05:37Z","updated_at":"2019-10-08T11:30:41Z","author_association":"CONTRIBUTOR","body":"Hi @davisp ,\r\nThank you for stepping in. Indeed, fix for `couch_replicator_worker` seems to be a neat and quick one especially considering that those processes ordinarily hold the most `binary` memory. I will definitely try it.\r\n\r\nRegarding other smaller leaks I was actually not very precise because there are three types of processes which consume less space but due to a sheer amount of them amplified by sharding, they contribute a lot to a total RAM consumed by `beam.smp`. These are notably (sorted by number of binaries freed):\r\n\r\n1. `couch_db_updater`\r\n2. `couch_index`\r\n3. `couch_index_updater`\r\n\r\nI've repeated my tests several times on various production nodes to exclude variance but distribution is almost always the same. When I inspect binaries of the mentioned processes I see a lot of repeated `BinaryId`s:\r\n```erlang\r\n{binary,[{139849336815280,30512,304},\r\n         {139849336815280,30512,304},\r\n         {139849336815280,30512,304},\r\n         {139849336815280,30512,304},\r\n         {139849336815280,30512,304},\r\n```\r\nTypical amount of binaries when I sort processes by `length(process_info(binary))` is around 2300-3000. Unfortunately at this moment we are not running a build of BEAM VM with debug symbols therefore I can't use neither `gdb` to print raw content pointed by those `BinaryId`s nor `etp-commands` in order to look deeper and actually understand what are those binaries. But perhaps there are some NIFs which I can leverage? Otherwise I might try to repeat my tests on a debuggable VM.\r\n\r\n> For the couch_index_updater, is that the gen_server process, or the anonymous worker process actually performing the updates?\r\n\r\nHm, it looks like it's a worker process [according to a code here](https://github.com/apache/couchdb/blob/2.3.1/src/couch_index/src/couch_index_updater.erl#L71).  But calling info for the process which reclaimed the most binaries I see this:\r\n```\r\n{'$initial_call',{couch_index_updater,init,1}}]},\r\n```\r\nSame for `couch_db_updater` which leads to a conclusion it's a `gen_server`.\r\n\r\n> because that process already invokes garbage collection after every document processed.\r\n\r\nYes you [are right](https://github.com/apache/couchdb/blob/2.3.1/src/couch_index/src/couch_index_updater.erl#L182) but perhaps there exists more places which require this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539110424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539111859","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-539111859","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":539111859,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTExMTg1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T17:09:07Z","updated_at":"2019-10-07T17:09:07Z","author_association":"MEMBER","body":"@adrienverge If you want to help see this happen. propose a backport PR against the 2.3.x branch that includes all the patches cherry-picked from `master` to make this happen.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539111859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539112136","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-539112136","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":539112136,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTExMjEzNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T17:09:50Z","updated_at":"2019-10-07T17:09:50Z","author_association":"MEMBER","body":"@adrienverge the other option is to use something like kerl when preparing your packages instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539112136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539149553","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-539149553","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":539149553,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTE0OTU1Mw==","user":{"login":"pavellzubkov","id":18612709,"node_id":"MDQ6VXNlcjE4NjEyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/18612709?v=4","gravatar_id":"","url":"https://api.github.com/users/pavellzubkov","html_url":"https://github.com/pavellzubkov","followers_url":"https://api.github.com/users/pavellzubkov/followers","following_url":"https://api.github.com/users/pavellzubkov/following{/other_user}","gists_url":"https://api.github.com/users/pavellzubkov/gists{/gist_id}","starred_url":"https://api.github.com/users/pavellzubkov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavellzubkov/subscriptions","organizations_url":"https://api.github.com/users/pavellzubkov/orgs","repos_url":"https://api.github.com/users/pavellzubkov/repos","events_url":"https://api.github.com/users/pavellzubkov/events{/privacy}","received_events_url":"https://api.github.com/users/pavellzubkov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T18:42:06Z","updated_at":"2019-10-07T18:42:06Z","author_association":"NONE","body":"**garrensmith**, thank you for answer! I'm sorry if my issue have some angry tone. I only learn couchdb and can't find way to get several docs in one request. For your question - yes it has 2 minutes every time when i request it. Yes my test evironment slower than production mashine but in production i can have much more docs than 50k.(or not?). I can't understand why couchdb examined thousands docs when i want get several particular docs by _id field (for example) by using $or operator (for example).  For what \r\n\r\n> CouchDB needs to fetch every document in the index, check if it has the element in the array and then return it if it matches.\r\n\r\nif index have this array?\r\n\r\nI will try to read docs again and again for understanding this. honestly)\r\nThank you for great project!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539149553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539180241","html_url":"https://github.com/apache/couchdb/issues/2245#issuecomment-539180241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2245","id":539180241,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTE4MDI0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T20:03:16Z","updated_at":"2019-10-07T20:03:16Z","author_association":"MEMBER","body":"Partitioning will be in CouchDB 3.0.\r\n\r\nYou are looking at the `master` branch of the documentation, try here:\r\n\r\nhttps://docs.couchdb.org/en/stable/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539180241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539903869","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-539903869","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":539903869,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTkwMzg2OQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T08:47:52Z","updated_at":"2019-10-09T08:47:52Z","author_association":"MEMBER","body":"Great, thank you for understanding.\r\nAn $or operator also can't always use an index unless both sides of the $or have the same fields.\r\nThis can be a little confusing initially. Start simpler by using $gt, $eq etc and then start building our your queries as you understand the syntax. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/539903869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540122534","html_url":"https://github.com/apache/couchdb/issues/2177#issuecomment-540122534","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2177","id":540122534,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyMjUzNA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:12:07Z","updated_at":"2019-10-09T18:12:07Z","author_association":"MEMBER","body":"Closed via #2247 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540122534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540123259","html_url":"https://github.com/apache/couchdb/issues/2165#issuecomment-540123259","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2165","id":540123259,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyMzI1OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:14:02Z","updated_at":"2019-10-09T18:14:02Z","author_association":"MEMBER","body":"All done here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540123259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540123742","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-540123742","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":540123742,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyMzc0Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:15:22Z","updated_at":"2019-10-09T18:15:22Z","author_association":"MEMBER","body":"Closed via #2228 - we settled on `q=2` and `max_document_size=8MB` for now","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540123742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540125000","html_url":"https://github.com/apache/couchdb/issues/2169#issuecomment-540125000","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2169","id":540125000,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyNTAwMA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:18:19Z","updated_at":"2019-10-09T18:18:19Z","author_association":"MEMBER","body":"Anyone is welcome to reopen this and advocate for it but for now I'm closing this out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540125000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540145899","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-540145899","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":540145899,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE0NTg5OQ==","user":{"login":"denib","id":11330266,"node_id":"MDQ6VXNlcjExMzMwMjY2","avatar_url":"https://avatars.githubusercontent.com/u/11330266?v=4","gravatar_id":"","url":"https://api.github.com/users/denib","html_url":"https://github.com/denib","followers_url":"https://api.github.com/users/denib/followers","following_url":"https://api.github.com/users/denib/following{/other_user}","gists_url":"https://api.github.com/users/denib/gists{/gist_id}","starred_url":"https://api.github.com/users/denib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denib/subscriptions","organizations_url":"https://api.github.com/users/denib/orgs","repos_url":"https://api.github.com/users/denib/repos","events_url":"https://api.github.com/users/denib/events{/privacy}","received_events_url":"https://api.github.com/users/denib/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T19:09:29Z","updated_at":"2019-10-09T19:09:29Z","author_association":"NONE","body":"@jiangphcn  - do you have an update here? Tnx!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540145899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540145913","html_url":"https://github.com/apache/couchdb/pull/2248#issuecomment-540145913","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2248","id":540145913,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE0NTkxMw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T19:09:31Z","updated_at":"2019-10-09T19:09:31Z","author_association":"MEMBER","body":"I think once `_show` and `_list` are removed, we can remove those modules but I didn't think now was the right time to move these (ancient) functions or attempt to consolidate them (there's a ton of overlap but perhaps subtle differences). Will merge if the Travis fairy grants my wish.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540145913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540149772","html_url":"https://github.com/apache/couchdb/issues/2191#issuecomment-540149772","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2191","id":540149772,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE0OTc3Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T19:19:16Z","updated_at":"2019-10-09T19:19:16Z","author_association":"MEMBER","body":"Quoting @wohali on the deprecation of admin party:\r\n\r\n> I don't think it's the full #1504. Just new defaults, and we'll need to think thru what happens when starting up a node that has no [admins]. Do we create one and log its password to the logfile? What if logging is disabled / goes nowhere? Or do we simply refuse to start until an admin is created? What about crypting and salting the password ahead of time - do we introduce a small cli tool to generate passwords like apache/httpd does? Many questions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540149772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540205886","html_url":"https://github.com/apache/couchdb/issues/2249#issuecomment-540205886","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2249","id":540205886,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDIwNTg4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T21:22:40Z","updated_at":"2019-10-09T21:22:40Z","author_association":"MEMBER","body":"In light of your proposal to keep IOQ1 mainline, should this have an \"if IOQ2 enabled, create IOQ stats database\" thing? And if so, how do we check which one has been enabled?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540205886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540251976","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-540251976","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":540251976,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDI1MTk3Ng==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T23:44:42Z","updated_at":"2019-10-09T23:46:43Z","author_association":"CONTRIBUTOR","body":"thanks for checking @denib \r\n\r\nI am working on this task using https://github.com/apache/couchdb/pull/2170.\r\n\r\nBelow is current status:\r\n- codes of couch_js are updated to use SpiderMonkey 60 \r\n- couch_js can be compiled locally in mac environment\r\n- the javascript for main.js is updated and is able to be compiled during runtime\r\n- new couchjs can started by couchdb and communicated with couchdb to accept `reset`, `addFun`, `mapDoc` etc\r\n\r\nThere are some to-dos I am working on\r\n- there is code tweak needed to complete the whole mrview action\r\n- compile and test in linux and windows\r\n- adding codes to workaround anonymous javascript function name\r\n- test where multiple sandbox are working together.\r\n\r\nHope I can get more progress in coming weeks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540251976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540252071","html_url":"https://github.com/apache/couchdb/pull/2170#issuecomment-540252071","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2170","id":540252071,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDI1MjA3MQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T23:45:08Z","updated_at":"2019-10-09T23:45:08Z","author_association":"CONTRIBUTOR","body":"recent update is reflected in https://github.com/apache/couchdb/issues/1875#issuecomment-540251976","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540252071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540367951","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-540367951","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":540367951,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDM2Nzk1MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T05:13:00Z","updated_at":"2019-10-10T05:13:00Z","author_association":"MEMBER","body":"CentOS 8 packages are now published at the usual place. Installation instructions:\r\n\r\nhttp://docs.couchdb.org/en/stable/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages\r\n\r\nand use `8` instead of `7` or `6`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540367951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540368272","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540368272","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540368272,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDM2ODI3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T05:13:49Z","updated_at":"2019-10-10T05:13:49Z","author_association":"MEMBER","body":"RPMs for CentOS 8 are now published. Follow the usual instructions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540368272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540388500","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540388500","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540388500,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDM4ODUwMA==","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T05:58:22Z","updated_at":"2019-10-10T05:58:43Z","author_association":"NONE","body":"That are good news, thanks for following up on this @wohali.\r\nEven if my long term goal is to switch to the provided Docker image, using the [CentOS 8 package](http://apache.bintray.com/couchdb-rpm/el8/x86_64/) might be the lower effort solution right now, as I include certain scripts in my image and have certain assumptions in my orchestration about the user running the CouchDB process.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540388500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540452062","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540452062","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540452062,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDQ1MjA2Mg==","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T08:07:50Z","updated_at":"2019-10-10T08:07:50Z","author_association":"NONE","body":"I run a quick sniff test but had no success installing it on CentOS 8 Docker image.\r\n\r\nI used http://docs.couchdb.org/en/latest/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages as starting point.\r\n\r\nExample `Dockerfile` to reproduce\r\n```\r\nFROM centos:8\r\nRUN echo \"[bintray--apache-couchdb-rpm]\" > /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    echo \"name=bintray--apache-couchdb-rpm\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    echo \"baseurl=http://apache.bintray.com/couchdb-rpm/el8/x86_64/\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    echo \"gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    echo \"repo_gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    echo \"enabled=1\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo && \\\r\n    cat /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo\r\nRUN yum -y install epel-release && \\\r\n    yum install -y couchdb\r\n```\r\n\r\nBuild output\r\n```\r\n$ docker build --pull --no-cache -t couchdb-centos8 -f Dockerfile .\r\nSending build context to Docker daemon   2.56kB\r\nStep 1/3 : FROM centos:8\r\n8: Pulling from library/centos\r\nDigest: sha256:f94c1d992c193b3dc09e297ffd54d8a4f1dc946c37cbeceb26d35ce1647f88d9\r\nStatus: Image is up to date for centos:8\r\n ---> 0f3e07c0138f\r\nStep 2/3 : RUN echo \"[bintray--apache-couchdb-rpm]\" > /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"name=bintray--apache-couchdb-rpm\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"baseurl=http://apache.bintray.com/couchdb-rpm/el8/x86_64/\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"repo_gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"enabled=1\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     cat /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo\r\n ---> Running in 43f8781fa213\r\n[bintray--apache-couchdb-rpm]\r\nname=bintray--apache-couchdb-rpm\r\nbaseurl=http://apache.bintray.com/couchdb-rpm/el8/x86_64/\r\ngpgcheck=0\r\nrepo_gpgcheck=0\r\nenabled=1\r\nRemoving intermediate container 43f8781fa213\r\n ---> 95c9b4f6d7cc\r\nStep 3/3 : RUN yum -y install epel-release &&     yum install -y couchdb\r\n ---> Running in c5193ee8b1a9\r\nCentOS-8 - AppStream                            649 kB/s | 5.6 MB     00:08    \r\nCentOS-8 - Base                                 752 kB/s | 5.3 MB     00:07    \r\nCentOS-8 - Extras                               301  B/s | 2.1 kB     00:07    \r\nbintray--apache-couchdb-rpm                     9.5 kB/s |  22 kB     00:02    \r\nDependencies resolved.\r\n================================================================================\r\n Package               Arch            Version            Repository       Size\r\n================================================================================\r\nInstalling:\r\n epel-release          noarch          8-5.el8            extras           22 k\r\n\r\nTransaction Summary\r\n================================================================================\r\nInstall  1 Package\r\n\r\nTotal download size: 22 k\r\nInstalled size: 30 k\r\nDownloading Packages:\r\nepel-release-8-5.el8.noarch.rpm                  20 kB/s |  22 kB     00:01    \r\n--------------------------------------------------------------------------------\r\nTotal                                           2.4 kB/s |  22 kB     00:09     \r\nwarning: /var/cache/dnf/extras-cbfb2f07b0021b7e/packages/epel-release-8-5.el8.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY\r\nCentOS-8 - Extras                               1.6 MB/s | 1.6 kB     00:00    \r\nImporting GPG key 0x8483C65D:\r\n Userid     : \"CentOS (CentOS Official Signing Key) <security@centos.org>\"\r\n Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D\r\n From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\r\nKey imported successfully\r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nTransaction test succeeded.\r\nRunning transaction\r\n  Preparing        :                                                        1/1 \r\n  Installing       : epel-release-8-5.el8.noarch                            1/1 \r\n  Running scriptlet: epel-release-8-5.el8.noarch                            1/1 \r\n  Verifying        : epel-release-8-5.el8.noarch                            1/1 \r\n\r\nInstalled:\r\n  epel-release-8-5.el8.noarch                                                   \r\n\r\nComplete!\r\nExtra Packages for Enterprise Linux 8 - x86_64  405 kB/s | 2.1 MB     00:05    \r\nLast metadata expiration check: 0:00:01 ago on Thu Oct 10 08:05:27 2019.\r\nError: \r\n Problem: conflicting requests\r\n  - nothing provides python-requests needed by couchdb-2.3.1-1.el8.x86_64\r\n  - nothing provides python-progressbar needed by couchdb-2.3.1-1.el8.x86_64\r\n(try to add '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)\r\nThe command '/bin/sh -c yum -y install epel-release &&     yum install -y couchdb' returned a non-zero code: 1\r\n```\r\n\r\nWere the packages python-requests and python-progressbar and maybe renamed in CentOS 8?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540452062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540671853","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540671853","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540671853,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY3MTg1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T16:41:32Z","updated_at":"2019-10-10T16:41:32Z","author_association":"MEMBER","body":"Good catch, it's python3-requests and there is no python3-progress bar (which is an optional dependency anyway). I'll have to respin them; for now the packages are taken down.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540671853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540678323","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540678323","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540678323,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY3ODMyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T16:57:48Z","updated_at":"2019-10-10T16:57:48Z","author_association":"MEMBER","body":"@konrad-ohms New package is up - can you test for me? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540678323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540877062","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540877062","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540877062,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDg3NzA2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T02:47:08Z","updated_at":"2019-10-11T02:47:08Z","author_association":"MEMBER","body":"@konrad-ohms fyi here's my install transcript of it working fine:\r\n\r\n```bash\r\n[root@be33776c0942 /]# vi /etc/yum.repos.d/couchdb.repo\r\n[root@be33776c0942 /]# cat /etc/yum.repos.d/couchdb.repo\r\n[bintray--apache-couchdb-rpm]\r\nname=bintray--apache-couchdb-rpm\r\nbaseurl=http://apache.bintray.com/couchdb-rpm/el$releasever/$basearch/\r\ngpgcheck=0\r\nrepo_gpgcheck=0\r\nenabled=1\r\n[root@be33776c0942 /]# yum -y install epel-release\r\nFailed to set locale, defaulting to C\r\nCentOS-8 - AppStream                                                                                1.0 MB/s | 5.6 MB     00:05\r\nCentOS-8 - Base                                                                                     1.3 MB/s | 5.3 MB     00:03\r\nCentOS-8 - Extras                                                                                   1.8 kB/s | 2.1 kB     00:01\r\nbintray--apache-couchdb-rpm                                                                          14 kB/s |  22 kB     00:01\r\nDependencies resolved.\r\n====================================================================================================================================\r\n Package                            Arch                         Version                         Repository                    Size\r\n====================================================================================================================================\r\nInstalling:\r\n epel-release                       noarch                       8-5.el8                         extras                        22 k\r\n\r\nTransaction Summary\r\n====================================================================================================================================\r\nInstall  1 Package\r\n\r\nTotal download size: 22 k\r\nInstalled size: 30 k\r\nDownloading Packages:\r\nepel-release-8-5.el8.noarch.rpm                                                                     335 kB/s |  22 kB     00:00\r\n------------------------------------------------------------------------------------------------------------------------------------\r\nTotal                                                                                               141 kB/s |  22 kB     00:00\r\nwarning: /var/cache/dnf/extras-cbfb2f07b0021b7e/packages/epel-release-8-5.el8.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY\r\nCentOS-8 - Extras                                                                                   1.6 MB/s | 1.6 kB     00:00\r\nImporting GPG key 0x8483C65D:\r\n Userid     : \"CentOS (CentOS Official Signing Key) <security@centos.org>\"\r\n Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D\r\n From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\r\nKey imported successfully\r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nTransaction test succeeded.\r\nRunning transaction\r\n  Preparing        :                                                                                                            1/1\r\n  Installing       : epel-release-8-5.el8.noarch                                                                                1/1\r\n  Running scriptlet: epel-release-8-5.el8.noarch                                                                                1/1\r\n  Verifying        : epel-release-8-5.el8.noarch                                                                                1/1\r\n\r\nInstalled:\r\n  epel-release-8-5.el8.noarch\r\n\r\nComplete!\r\n[root@be33776c0942 /]# yum install couchdb\r\nFailed to set locale, defaulting to C\r\nExtra Packages for Enterprise Linux 8 - x86_64                                                      660 kB/s | 2.1 MB     00:03\r\nLast metadata expiration check: 0:00:01 ago on Fri Oct 11 02:44:29 2019.\r\nDependencies resolved.\r\n====================================================================================================================================\r\n Package                        Arch                 Version                        Repository                                 Size\r\n====================================================================================================================================\r\nInstalling:\r\n couchdb                        x86_64               2.3.1-1.el8                    bintray--apache-couchdb-rpm                24 M\r\nInstalling dependencies:\r\n nspr                           x86_64               4.20.0-2.el8                   AppStream                                 143 k\r\n libicu                         x86_64               60.2-7.el8                     BaseOS                                    8.8 M\r\n python3-chardet                noarch               3.0.4-7.el8                    BaseOS                                    195 k\r\n python3-idna                   noarch               2.5-5.el8                      BaseOS                                     97 k\r\n python3-pysocks                noarch               1.6.8-3.el8                    BaseOS                                     34 k\r\n python3-requests               noarch               2.20.0-1.el8                   BaseOS                                    123 k\r\n python3-urllib3                noarch               1.23-5.el8                     BaseOS                                    178 k\r\n couch-js                       x86_64               1:1.8.5-21.el8                 bintray--apache-couchdb-rpm               2.1 M\r\n\r\nTransaction Summary\r\n====================================================================================================================================\r\nInstall  9 Packages\r\n\r\nTotal download size: 35 M\r\nInstalled size: 101 M\r\nIs this ok [y/N]: y\r\nDownloading Packages:\r\n(1/9): nspr-4.20.0-2.el8.x86_64.rpm                                                                 461 kB/s | 143 kB     00:00\r\n(2/9): python3-idna-2.5-5.el8.noarch.rpm                                                            341 kB/s |  97 kB     00:00\r\n(3/9): python3-pysocks-1.6.8-3.el8.noarch.rpm                                                       243 kB/s |  34 kB     00:00\r\n(4/9): python3-requests-2.20.0-1.el8.noarch.rpm                                                     505 kB/s | 123 kB     00:00\r\n(5/9): python3-chardet-3.0.4-7.el8.noarch.rpm                                                       188 kB/s | 195 kB     00:01\r\n(6/9): python3-urllib3-1.23-5.el8.noarch.rpm                                                        586 kB/s | 178 kB     00:00\r\n(7/9): couch-js-1.8.5-21.el8.x86_64.rpm                                                             740 kB/s | 2.1 MB     00:02\r\n(8/9): libicu-60.2-7.el8.x86_64.rpm                                                                 557 kB/s | 8.8 MB     00:16\r\n(9/9): couchdb-2.3.1-1.el8.x86_64.rpm                                                               1.2 MB/s |  24 MB     00:20\r\n------------------------------------------------------------------------------------------------------------------------------------\r\nTotal                                                                                               1.6 MB/s |  35 MB     00:22\r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nTransaction test succeeded.\r\nRunning transaction\r\n  Preparing        :                                                                                                            1/1\r\n  Installing       : python3-pysocks-1.6.8-3.el8.noarch                                                                         1/9\r\n  Installing       : python3-urllib3-1.23-5.el8.noarch                                                                          2/9\r\n  Installing       : python3-idna-2.5-5.el8.noarch                                                                              3/9\r\n  Installing       : python3-chardet-3.0.4-7.el8.noarch                                                                         4/9\r\n  Installing       : python3-requests-2.20.0-1.el8.noarch                                                                       5/9\r\n  Installing       : libicu-60.2-7.el8.x86_64                                                                                   6/9\r\n  Running scriptlet: libicu-60.2-7.el8.x86_64                                                                                   6/9\r\n  Installing       : nspr-4.20.0-2.el8.x86_64                                                                                   7/9\r\n  Running scriptlet: nspr-4.20.0-2.el8.x86_64                                                                                   7/9\r\n  Installing       : couch-js-1:1.8.5-21.el8.x86_64                                                                             8/9\r\n  Running scriptlet: couch-js-1:1.8.5-21.el8.x86_64                                                                             8/9\r\n  Running scriptlet: couchdb-2.3.1-1.el8.x86_64                                                                                 9/9\r\n  Installing       : couchdb-2.3.1-1.el8.x86_64                                                                                 9/9\r\n  Running scriptlet: couchdb-2.3.1-1.el8.x86_64                                                                                 9/9\r\n  Verifying        : nspr-4.20.0-2.el8.x86_64                                                                                   1/9\r\n  Verifying        : libicu-60.2-7.el8.x86_64                                                                                   2/9\r\n  Verifying        : python3-chardet-3.0.4-7.el8.noarch                                                                         3/9\r\n  Verifying        : python3-idna-2.5-5.el8.noarch                                                                              4/9\r\n  Verifying        : python3-pysocks-1.6.8-3.el8.noarch                                                                         5/9\r\n  Verifying        : python3-requests-2.20.0-1.el8.noarch                                                                       6/9\r\n  Verifying        : python3-urllib3-1.23-5.el8.noarch                                                                          7/9\r\n  Verifying        : couch-js-1:1.8.5-21.el8.x86_64                                                                             8/9\r\n  Verifying        : couchdb-2.3.1-1.el8.x86_64                                                                                 9/9\r\n\r\nInstalled:\r\n  couchdb-2.3.1-1.el8.x86_64                   nspr-4.20.0-2.el8.x86_64                  libicu-60.2-7.el8.x86_64\r\n  python3-chardet-3.0.4-7.el8.noarch           python3-idna-2.5-5.el8.noarch             python3-pysocks-1.6.8-3.el8.noarch\r\n  python3-requests-2.20.0-1.el8.noarch         python3-urllib3-1.23-5.el8.noarch         couch-js-1:1.8.5-21.el8.x86_64\r\n\r\nComplete!\r\n\r\n[root@be33776c0942 /]# # because this is Docker and systemd is not running:\r\n[root@be33776c0942 /]# /opt/couchdb/bin/couchdb &\r\n[1] 94\r\n[root@be33776c0942 /]# curl localhost:5984\r\n{\"couchdb\":\"Welcome\",\"version\":\"2.3.1\",\"git_sha\":\"c298091a4\",\"uuid\":\"0a36733d84b201682ad025265b360a45\",\"features\":[\"pluggable-storage-engines\",\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\n```\r\n\r\nI doubt there are further issues, but if there are, please let me know.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540877062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540946214","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540946214","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540946214,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk0NjIxNA==","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T07:19:33Z","updated_at":"2019-10-11T07:19:33Z","author_association":"NONE","body":"Thank you very much @wohali, I tried the build from yesterday again, this time the dependencies could be resolved:\r\n\r\n```\r\n$ docker build --pull --no-cache -t couchdb-centos8 -f Dockerfile .\r\nSending build context to Docker daemon   2.56kB\r\nStep 1/3 : FROM centos:8\r\n8: Pulling from library/centos\r\nDigest: sha256:f94c1d992c193b3dc09e297ffd54d8a4f1dc946c37cbeceb26d35ce1647f88d9\r\nStatus: Image is up to date for centos:8\r\n ---> 0f3e07c0138f\r\nStep 2/3 : RUN echo \"[bintray--apache-couchdb-rpm]\" > /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"name=bintray--apache-couchdb-rpm\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"baseurl=http://apache.bintray.com/couchdb-rpm/el8/x86_64/\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"repo_gpgcheck=0\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     echo \"enabled=1\" >> /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo &&     cat /etc/yum.repos.d/bintray-apache-couchdb-rpm.repo\r\n ---> Running in a937d291beda\r\n[bintray--apache-couchdb-rpm]\r\nname=bintray--apache-couchdb-rpm\r\nbaseurl=http://apache.bintray.com/couchdb-rpm/el8/x86_64/\r\ngpgcheck=0\r\nrepo_gpgcheck=0\r\nenabled=1\r\nRemoving intermediate container a937d291beda\r\n ---> 06992bf7fec5\r\nStep 3/3 : RUN yum -y install epel-release &&     yum install -y couchdb\r\n ---> Running in 3a46ed56c85a\r\nCentOS-8 - AppStream                            358 kB/s | 5.6 MB     00:16    \r\nCentOS-8 - Base                                 615 kB/s | 5.3 MB     00:08    \r\nCentOS-8 - Extras                               641  B/s | 2.1 kB     00:03    \r\nbintray--apache-couchdb-rpm                     9.4 kB/s |  22 kB     00:02    \r\nDependencies resolved.\r\n================================================================================\r\n Package               Arch            Version            Repository       Size\r\n================================================================================\r\nInstalling:\r\n epel-release          noarch          8-5.el8            extras           22 k\r\n\r\nTransaction Summary\r\n================================================================================\r\nInstall  1 Package\r\n\r\nTotal download size: 22 k\r\nInstalled size: 30 k\r\nDownloading Packages:\r\nepel-release-8-5.el8.noarch.rpm                  21 kB/s |  22 kB     00:01    \r\n--------------------------------------------------------------------------------\r\nTotal                                           9.2 kB/s |  22 kB     00:02     \r\nwarning: /var/cache/dnf/extras-cbfb2f07b0021b7e/packages/epel-release-8-5.el8.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY\r\nCentOS-8 - Extras                               1.6 MB/s | 1.6 kB     00:00    \r\nImporting GPG key 0x8483C65D:\r\n Userid     : \"CentOS (CentOS Official Signing Key) <security@centos.org>\"\r\n Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D\r\n From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial\r\nKey imported successfully\r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nTransaction test succeeded.\r\nRunning transaction\r\n  Preparing        :                                                        1/1 \r\n  Installing       : epel-release-8-5.el8.noarch                            1/1 \r\n  Running scriptlet: epel-release-8-5.el8.noarch                            1/1 \r\n  Verifying        : epel-release-8-5.el8.noarch                            1/1 \r\n\r\nInstalled:\r\n  epel-release-8-5.el8.noarch                                                   \r\n\r\nComplete!\r\nExtra Packages for Enterprise Linux 8 - x86_64  442 kB/s | 2.1 MB     00:04    \r\nLast metadata expiration check: 0:00:01 ago on Fri Oct 11 07:16:40 2019.\r\nDependencies resolved.\r\n================================================================================\r\n Package           Arch    Version           Repository                    Size\r\n================================================================================\r\nInstalling:\r\n couchdb           x86_64  2.3.1-1.el8       bintray--apache-couchdb-rpm   24 M\r\nInstalling dependencies:\r\n nspr              x86_64  4.20.0-2.el8      AppStream                    143 k\r\n libicu            x86_64  60.2-7.el8        BaseOS                       8.8 M\r\n python3-chardet   noarch  3.0.4-7.el8       BaseOS                       195 k\r\n python3-idna      noarch  2.5-5.el8         BaseOS                        97 k\r\n python3-pysocks   noarch  1.6.8-3.el8       BaseOS                        34 k\r\n python3-requests  noarch  2.20.0-1.el8      BaseOS                       123 k\r\n python3-urllib3   noarch  1.23-5.el8        BaseOS                       178 k\r\n couch-js          x86_64  1:1.8.5-21.el8    bintray--apache-couchdb-rpm  2.1 M\r\n\r\nTransaction Summary\r\n================================================================================\r\nInstall  9 Packages\r\n\r\nTotal download size: 35 M\r\nInstalled size: 101 M\r\nDownloading Packages:\r\n(1/9): python3-chardet-3.0.4-7.el8.noarch.rpm   164 kB/s | 195 kB     00:01    \r\n(2/9): python3-idna-2.5-5.el8.noarch.rpm        1.3 MB/s |  97 kB     00:00    \r\n(3/9): nspr-4.20.0-2.el8.x86_64.rpm             111 kB/s | 143 kB     00:01    \r\n(4/9): python3-pysocks-1.6.8-3.el8.noarch.rpm   669 kB/s |  34 kB     00:00    \r\n(5/9): python3-urllib3-1.23-5.el8.noarch.rpm    1.5 MB/s | 178 kB     00:00    \r\n(6/9): python3-requests-2.20.0-1.el8.noarch.rpm 762 kB/s | 123 kB     00:00    \r\n(7/9): couch-js-1.8.5-21.el8.x86_64.rpm         2.8 MB/s | 2.1 MB     00:00    \r\n(8/9): libicu-60.2-7.el8.x86_64.rpm             3.7 MB/s | 8.8 MB     00:02    \r\n(9/9): couchdb-2.3.1-1.el8.x86_64.rpm           2.6 MB/s |  24 MB     00:09    \r\n--------------------------------------------------------------------------------\r\nTotal                                           2.8 MB/s |  35 MB     00:12     \r\nRunning transaction check\r\nTransaction check succeeded.\r\nRunning transaction test\r\nTransaction test succeeded.\r\nRunning transaction\r\n  Preparing        :                                                        1/1 \r\n  Installing       : python3-pysocks-1.6.8-3.el8.noarch                     1/9 \r\n  Installing       : python3-urllib3-1.23-5.el8.noarch                      2/9 \r\n  Installing       : python3-idna-2.5-5.el8.noarch                          3/9 \r\n  Installing       : python3-chardet-3.0.4-7.el8.noarch                     4/9 \r\n  Installing       : python3-requests-2.20.0-1.el8.noarch                   5/9 \r\n  Installing       : libicu-60.2-7.el8.x86_64                               6/9 \r\n  Running scriptlet: libicu-60.2-7.el8.x86_64                               6/9 \r\n  Installing       : nspr-4.20.0-2.el8.x86_64                               7/9 \r\n  Running scriptlet: nspr-4.20.0-2.el8.x86_64                               7/9 \r\n  Installing       : couch-js-1:1.8.5-21.el8.x86_64                         8/9 \r\n  Running scriptlet: couch-js-1:1.8.5-21.el8.x86_64                         8/9 \r\n  Running scriptlet: couchdb-2.3.1-1.el8.x86_64                             9/9 \r\n  Installing       : couchdb-2.3.1-1.el8.x86_64                             9/9 \r\n  Running scriptlet: couchdb-2.3.1-1.el8.x86_64                             9/9 \r\n  Verifying        : nspr-4.20.0-2.el8.x86_64                               1/9 \r\n  Verifying        : libicu-60.2-7.el8.x86_64                               2/9 \r\n  Verifying        : python3-chardet-3.0.4-7.el8.noarch                     3/9 \r\n  Verifying        : python3-idna-2.5-5.el8.noarch                          4/9 \r\n  Verifying        : python3-pysocks-1.6.8-3.el8.noarch                     5/9 \r\n  Verifying        : python3-requests-2.20.0-1.el8.noarch                   6/9 \r\n  Verifying        : python3-urllib3-1.23-5.el8.noarch                      7/9 \r\n  Verifying        : couch-js-1:1.8.5-21.el8.x86_64                         8/9 \r\n  Verifying        : couchdb-2.3.1-1.el8.x86_64                             9/9 \r\n\r\nInstalled:\r\n  couchdb-2.3.1-1.el8.x86_64              nspr-4.20.0-2.el8.x86_64             \r\n  libicu-60.2-7.el8.x86_64                python3-chardet-3.0.4-7.el8.noarch   \r\n  python3-idna-2.5-5.el8.noarch           python3-pysocks-1.6.8-3.el8.noarch   \r\n  python3-requests-2.20.0-1.el8.noarch    python3-urllib3-1.23-5.el8.noarch    \r\n  couch-js-1:1.8.5-21.el8.x86_64         \r\n\r\nComplete!\r\nRemoving intermediate container 3a46ed56c85a\r\n ---> f580589818c1\r\nSuccessfully built f580589818c1\r\nSuccessfully tagged couchdb-centos8:latest\r\n\r\n$ docker run --rm -it couchdb-centos8:latest bash\r\n[root@0ec09dd1998d /]# /opt/couchdb/bin/couchdb &\r\n[1] 14\r\n[root@0ec09dd1998d /]# curl localhost:5984\r\n{\"couchdb\":\"Welcome\",\"version\":\"2.3.1\",\"git_sha\":\"c298091a4\",\"uuid\":\"0fdbf3d7eaa5c7095b0f48088123cd6d\",\"features\":[\"pluggable-storage-engines\",\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540946214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540950454","html_url":"https://github.com/apache/couchdb/issues/2231#issuecomment-540950454","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2231","id":540950454,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk1MDQ1NA==","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T07:32:01Z","updated_at":"2019-10-11T07:32:01Z","author_association":"NONE","body":"Just recognized, that it even works without enabling EPEL, even better :-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540950454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540967425","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-540967425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":540967425,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk2NzQyNQ==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T08:24:24Z","updated_at":"2019-10-11T08:27:01Z","author_association":"CONTRIBUTOR","body":"> propose a backport PR against the 2.3.x branch that includes all the patches cherry-picked from master to make this happen.\r\n\r\nDoing this creates many conflicts, more than I would expect. I tried to resolve a few, but I'm not familiar with Erlang nor CouchDB internals, so I stopped rather than creating a bugged release.\r\n\r\nTo be honest, I'd be more confident to see a release created by someone who maintains CouchDB.\r\nI understand that you don't have much time for that. But is there a date planned for the next minor release? (again, the goal is just to be able to use Erlang 22+)\r\n\r\n\r\n> the other option is to use something like kerl\r\n\r\nWe're creating \"pseudo-official\" (COPR) RPM packages for Fedora and CentOS, so using the standard RPM way (`rpmbuild`) is required.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/540967425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541116303","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-541116303","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":541116303,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTExNjMwMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T15:41:55Z","updated_at":"2019-10-11T15:41:55Z","author_association":"MEMBER","body":"The PMC team doesn't plan to do another CouchDB release before 3.0.0, sorry. The tasks left before that occurs are listed here: https://github.com/apache/couchdb/projects/1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541116303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541322138","html_url":"https://github.com/apache/couchdb/issues/2252#issuecomment-541322138","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2252","id":541322138,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTMyMjEzOA==","user":{"login":"technipfmc-houston","id":56464687,"node_id":"MDQ6VXNlcjU2NDY0Njg3","avatar_url":"https://avatars.githubusercontent.com/u/56464687?v=4","gravatar_id":"","url":"https://api.github.com/users/technipfmc-houston","html_url":"https://github.com/technipfmc-houston","followers_url":"https://api.github.com/users/technipfmc-houston/followers","following_url":"https://api.github.com/users/technipfmc-houston/following{/other_user}","gists_url":"https://api.github.com/users/technipfmc-houston/gists{/gist_id}","starred_url":"https://api.github.com/users/technipfmc-houston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/technipfmc-houston/subscriptions","organizations_url":"https://api.github.com/users/technipfmc-houston/orgs","repos_url":"https://api.github.com/users/technipfmc-houston/repos","events_url":"https://api.github.com/users/technipfmc-houston/events{/privacy}","received_events_url":"https://api.github.com/users/technipfmc-houston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-12T12:51:12Z","updated_at":"2019-10-12T12:51:12Z","author_association":"NONE","body":"Okay I kicked off a compaction on the fieldlink view and the compaction was successful. \r\nI am able to access view again.\r\nI am monitoring the couchdb log to make sure there are no errors.\r\n\r\nI will let you know if that fixed the issue.\r\n\r\nThanks\r\nMike Walker","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541322138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541324153","html_url":"https://github.com/apache/couchdb/issues/2252#issuecomment-541324153","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2252","id":541324153,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTMyNDE1Mw==","user":{"login":"technipfmc-houston","id":56464687,"node_id":"MDQ6VXNlcjU2NDY0Njg3","avatar_url":"https://avatars.githubusercontent.com/u/56464687?v=4","gravatar_id":"","url":"https://api.github.com/users/technipfmc-houston","html_url":"https://github.com/technipfmc-houston","followers_url":"https://api.github.com/users/technipfmc-houston/followers","following_url":"https://api.github.com/users/technipfmc-houston/following{/other_user}","gists_url":"https://api.github.com/users/technipfmc-houston/gists{/gist_id}","starred_url":"https://api.github.com/users/technipfmc-houston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/technipfmc-houston/subscriptions","organizations_url":"https://api.github.com/users/technipfmc-houston/orgs","repos_url":"https://api.github.com/users/technipfmc-houston/repos","events_url":"https://api.github.com/users/technipfmc-houston/events{/privacy}","received_events_url":"https://api.github.com/users/technipfmc-houston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-12T13:16:22Z","updated_at":"2019-10-12T13:16:22Z","author_association":"NONE","body":"still got and error in dblog but view is still available as of now:\r\n\r\nHere is the part of the log that sent the error.\r\n\r\n\r\n[Sat, 12 Oct 2019 13:09:25 GMT] [info] [<0.13522.0>] 127.0.0.1 - - GET /enbasemobilefmc/_design/fieldlink/_view/docType?key=%22DeliveryNote%22&startkey_docid=DeliveryNote-0082529631&limit=501 200\r\n[Sat, 12 Oct 2019 13:09:25 GMT] [error] [<0.13521.0>] {error_report,<0.34.0>,\r\n                       {<0.13521.0>,crash_report,\r\n                        [[{initial_call,\r\n                           {mochiweb_acceptor,init,\r\n                            ['Argument__1','Argument__2','Argument__3']}},\r\n                          {pid,<0.13521.0>},\r\n                          {registered_name,[]},\r\n                          {error_info,\r\n                           {error,\r\n                            {badmatch,{error,einval}},\r\n                            [{mochiweb_http,new_request,3,\r\n                              [{file,\r\n                                \"c:/cygwin/relax/APACHE~2.1/src/mochiweb/mochiweb_http.erl\"},\r\n                               {line,133}]},\r\n                             {mochiweb_http,handle_invalid_request,3,\r\n                              [{file,\r\n                                \"c:/cygwin/relax/APACHE~2.1/src/mochiweb/mochiweb_http.erl\"},\r\n                               {line,127}]},\r\n                             {mochiweb_http,handle_invalid_request,1,\r\n                              [{file,\r\n                                \"c:/cygwin/relax/APACHE~2.1/src/mochiweb/mochiweb_http.erl\"},\r\n                               {line,122}]},\r\n                             {proc_lib,init_p_do_apply,3,\r\n                              [{file,\"proc_lib.erl\"},{line,239}]}]}},\r\n                          {ancestors,\r\n                           [couch_httpd,couch_secondary_services,\r\n                            couch_server_sup,<0.35.0>]},\r\n                          {messages,[{tcp_closed,#Port<0.17464>}]},\r\n                          {links,[<0.111.0>]},\r\n                          {dictionary,[{couch_rewrite_count,0}]},\r\n                          {trap_exit,false},\r\n                          {status,running},\r\n                          {heap_size,1598},\r\n                          {stack_size,27},\r\n                          {reductions,775922}],\r\n                         []]}}\r\n[Sat, 12 Oct 2019 13:09:25 GMT] [info] [<0.13523.0>] 127.0.0.1 - - GET /enbasemobilefmc/_design/fieldlink/_view/authorization?startkey=%22wud%22&endkey=%22WUD%22 200\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541324153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541392093","html_url":"https://github.com/apache/couchdb/issues/2253#issuecomment-541392093","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2253","id":541392093,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTM5MjA5Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T06:48:11Z","updated_at":"2019-10-13T06:48:11Z","author_association":"MEMBER","body":"This requires a compile from modified source, the `couchdb.config` file is autogenerated from the source. See the file `src/couch/src/couch.app.src` for more info.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541392093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541423096","html_url":"https://github.com/apache/couchdb/issues/2252#issuecomment-541423096","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2252","id":541423096,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQyMzA5Ng==","user":{"login":"technipfmc-houston","id":56464687,"node_id":"MDQ6VXNlcjU2NDY0Njg3","avatar_url":"https://avatars.githubusercontent.com/u/56464687?v=4","gravatar_id":"","url":"https://api.github.com/users/technipfmc-houston","html_url":"https://github.com/technipfmc-houston","followers_url":"https://api.github.com/users/technipfmc-houston/followers","following_url":"https://api.github.com/users/technipfmc-houston/following{/other_user}","gists_url":"https://api.github.com/users/technipfmc-houston/gists{/gist_id}","starred_url":"https://api.github.com/users/technipfmc-houston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/technipfmc-houston/subscriptions","organizations_url":"https://api.github.com/users/technipfmc-houston/orgs","repos_url":"https://api.github.com/users/technipfmc-houston/repos","events_url":"https://api.github.com/users/technipfmc-houston/events{/privacy}","received_events_url":"https://api.github.com/users/technipfmc-houston/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T14:30:23Z","updated_at":"2019-10-13T14:30:23Z","author_association":"NONE","body":"It might be a bug I see this post and the developer down graded the version and it fixed the issue:\r\n\r\nhttps://stackoverflow.com/questions/21763784/couchdb-crashes-with-no-reason-in-the-crash-report\r\n\r\nHowever I would not want to downgrade.   The Couchdb does not stop working with this error however I am assuming the process might be.   LET ME KNOW.\r\n\r\nThanks \r\n\r\nMike","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541423096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541466645","html_url":"https://github.com/apache/couchdb/issues/2252#issuecomment-541466645","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2252","id":541466645,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ2NjY0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T22:39:53Z","updated_at":"2019-10-13T22:39:53Z","author_association":"MEMBER","body":"@technipfmc-houston We don't officially support 1.x CouchDB anymore, sorry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/541466645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542205587","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-542205587","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":542205587,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjIwNTU4Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-15T13:15:17Z","updated_at":"2019-12-07T14:07:35Z","author_association":"CONTRIBUTOR","body":"I marked two of them \"completed\" because mrview action works now.\r\n- [x]  there is code tweak needed to complete the whole mrview action\r\n- [x] compile and test in linux \r\n- [x] compile and test in windows\r\n- [x]  adding codes to workaround anonymous javascript function name\r\n- [x]  test where multiple sandbox are working together","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542205587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542625561","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-542625561","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":542625561,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYyNTU2MQ==","user":{"login":"pchrzasz","id":11834245,"node_id":"MDQ6VXNlcjExODM0MjQ1","avatar_url":"https://avatars.githubusercontent.com/u/11834245?v=4","gravatar_id":"","url":"https://api.github.com/users/pchrzasz","html_url":"https://github.com/pchrzasz","followers_url":"https://api.github.com/users/pchrzasz/followers","following_url":"https://api.github.com/users/pchrzasz/following{/other_user}","gists_url":"https://api.github.com/users/pchrzasz/gists{/gist_id}","starred_url":"https://api.github.com/users/pchrzasz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pchrzasz/subscriptions","organizations_url":"https://api.github.com/users/pchrzasz/orgs","repos_url":"https://api.github.com/users/pchrzasz/repos","events_url":"https://api.github.com/users/pchrzasz/events{/privacy}","received_events_url":"https://api.github.com/users/pchrzasz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T09:57:44Z","updated_at":"2019-10-16T09:57:44Z","author_association":"NONE","body":"Same issue on 2.3.0. Also we see that connections to couchdb are timeouted (5s timeout).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542625561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542718359","html_url":"https://github.com/apache/couchdb/issues/1523#issuecomment-542718359","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1523","id":542718359,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjcxODM1OQ==","user":{"login":"denib","id":11330266,"node_id":"MDQ6VXNlcjExMzMwMjY2","avatar_url":"https://avatars.githubusercontent.com/u/11330266?v=4","gravatar_id":"","url":"https://api.github.com/users/denib","html_url":"https://github.com/denib","followers_url":"https://api.github.com/users/denib/followers","following_url":"https://api.github.com/users/denib/following{/other_user}","gists_url":"https://api.github.com/users/denib/gists{/gist_id}","starred_url":"https://api.github.com/users/denib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denib/subscriptions","organizations_url":"https://api.github.com/users/denib/orgs","repos_url":"https://api.github.com/users/denib/repos","events_url":"https://api.github.com/users/denib/events{/privacy}","received_events_url":"https://api.github.com/users/denib/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T14:06:10Z","updated_at":"2019-10-16T14:06:10Z","author_association":"NONE","body":"@rnewson took over the WIP PR: https://github.com/apache/couchdb/pull/2092\r\nThis is in progress. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542718359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542762896","html_url":"https://github.com/apache/couchdb/pull/2092#issuecomment-542762896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2092","id":542762896,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mjc2Mjg5Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T15:38:52Z","updated_at":"2019-10-16T15:38:52Z","author_association":"MEMBER","body":"Hi all, just a note that I'm working on this and hope to push an update in the next day or two.\r\n\r\nWhere I've gravitated to for 3.0 is the following;\r\n\r\n1) All the _node enhancements that @wohali mentions above\r\n2) leave couch_http modules in the codebase\r\n3) Disable the 5986 port by default, allow it to be enabled in config\r\n\r\nin 4.0 both the _node endpoint and the 5986 port are completely gone, so I don't see a lot of value in deleting couch_http modules today, and plenty of downside.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542762896/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542925271","html_url":"https://github.com/apache/couchdb/pull/2259#issuecomment-542925271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2259","id":542925271,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjkyNTI3MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T22:59:14Z","updated_at":"2019-10-17T13:28:38Z","author_association":"CONTRIBUTOR","body":"Since it's awkward having to enable tracing twice, tried to expose set_network_option in erlfdb_nif and see if setting it later (after initialization is complete) works but it didn't: \r\n\r\nhttps://github.com/cloudant-labs/couchdb-erlfdb/blob/master/c_src/main.c#L487\r\n\r\nAs we explicitly track the library state and only accept network after setting API level but before connecting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542925271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542928155","html_url":"https://github.com/apache/couchdb/issues/2176#issuecomment-542928155","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2176","id":542928155,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjkyODE1NQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-16T23:11:08Z","updated_at":"2019-10-16T23:11:08Z","author_association":"NONE","body":"Can I try this out?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/542928155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543129087","html_url":"https://github.com/apache/couchdb/issues/2147#issuecomment-543129087","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2147","id":543129087,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzEyOTA4Nw==","user":{"login":"stawiu","id":2428913,"node_id":"MDQ6VXNlcjI0Mjg5MTM=","avatar_url":"https://avatars.githubusercontent.com/u/2428913?v=4","gravatar_id":"","url":"https://api.github.com/users/stawiu","html_url":"https://github.com/stawiu","followers_url":"https://api.github.com/users/stawiu/followers","following_url":"https://api.github.com/users/stawiu/following{/other_user}","gists_url":"https://api.github.com/users/stawiu/gists{/gist_id}","starred_url":"https://api.github.com/users/stawiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stawiu/subscriptions","organizations_url":"https://api.github.com/users/stawiu/orgs","repos_url":"https://api.github.com/users/stawiu/repos","events_url":"https://api.github.com/users/stawiu/events{/privacy}","received_events_url":"https://api.github.com/users/stawiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-17T11:23:29Z","updated_at":"2019-10-17T11:23:48Z","author_association":"NONE","body":"i have same problem.\r\n\r\n`[error] 2019-10-17T11:08:25.163774Z couchdb@localhost <0.23546.3014> -------- rexi_server: from: couchdb@localhost(<0.22855.3023>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,265}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,205}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,462}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,682}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,140}]}]`\r\n\r\nIm running couchdb replication from another server. Errors are on target. Target is cluster with 1 node so nothing to communicate too.... Why is this failing?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543129087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543173730","html_url":"https://github.com/apache/couchdb/pull/2259#issuecomment-543173730","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2259","id":543173730,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzE3MzczMA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-17T13:25:43Z","updated_at":"2019-10-17T13:25:43Z","author_association":"CONTRIBUTOR","body":"+1, note that in docker images there were permission issues with FDB_NETWORK_OPTION_TRACE_ENABLE = \"\" writing various directories.\r\nFDB_NETWORK_OPTION_TRACE_ENABLE = \"/tmp\" usually worked.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543173730/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543404649","html_url":"https://github.com/apache/couchdb/issues/2224#issuecomment-543404649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2224","id":543404649,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzQwNDY0OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-17T23:21:23Z","updated_at":"2019-10-17T23:21:23Z","author_association":"CONTRIBUTOR","body":"Worked on this @davisp https://github.com/apache/couchdb/pull/2261\r\n\r\nThat sets up the cache to take advantage of the metadata version key. Will switch to using the new feature in a separate commit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/543404649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544232149","html_url":"https://github.com/apache/couchdb/issues/2264#issuecomment-544232149","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2264","id":544232149,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDIzMjE0OQ==","user":{"login":"anuragvohraec","id":53807480,"node_id":"MDQ6VXNlcjUzODA3NDgw","avatar_url":"https://avatars.githubusercontent.com/u/53807480?v=4","gravatar_id":"","url":"https://api.github.com/users/anuragvohraec","html_url":"https://github.com/anuragvohraec","followers_url":"https://api.github.com/users/anuragvohraec/followers","following_url":"https://api.github.com/users/anuragvohraec/following{/other_user}","gists_url":"https://api.github.com/users/anuragvohraec/gists{/gist_id}","starred_url":"https://api.github.com/users/anuragvohraec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuragvohraec/subscriptions","organizations_url":"https://api.github.com/users/anuragvohraec/orgs","repos_url":"https://api.github.com/users/anuragvohraec/repos","events_url":"https://api.github.com/users/anuragvohraec/events{/privacy}","received_events_url":"https://api.github.com/users/anuragvohraec/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-20T08:32:49Z","updated_at":"2019-10-20T08:33:04Z","author_association":"NONE","body":"Ok guys my mistake.\r\nIt seems \"**content-length**\" header is mandatory or at least works when you provide one.\r\nCurrent API Docs do not metion it as required, but it is a required header. When provided  its resolved my issue.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544232149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544365074","html_url":"https://github.com/apache/couchdb/issues/1008#issuecomment-544365074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1008","id":544365074,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDM2NTA3NA==","user":{"login":"Caesar305","id":434507,"node_id":"MDQ6VXNlcjQzNDUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/434507?v=4","gravatar_id":"","url":"https://api.github.com/users/Caesar305","html_url":"https://github.com/Caesar305","followers_url":"https://api.github.com/users/Caesar305/followers","following_url":"https://api.github.com/users/Caesar305/following{/other_user}","gists_url":"https://api.github.com/users/Caesar305/gists{/gist_id}","starred_url":"https://api.github.com/users/Caesar305/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Caesar305/subscriptions","organizations_url":"https://api.github.com/users/Caesar305/orgs","repos_url":"https://api.github.com/users/Caesar305/repos","events_url":"https://api.github.com/users/Caesar305/events{/privacy}","received_events_url":"https://api.github.com/users/Caesar305/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T06:15:45Z","updated_at":"2019-10-21T06:15:45Z","author_association":"NONE","body":"Are there any known work arounds for this issue?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544365074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544461658","html_url":"https://github.com/apache/couchdb/issues/1008#issuecomment-544461658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1008","id":544461658,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQ2MTY1OA==","user":{"login":"sklassen","id":6997477,"node_id":"MDQ6VXNlcjY5OTc0Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/6997477?v=4","gravatar_id":"","url":"https://api.github.com/users/sklassen","html_url":"https://github.com/sklassen","followers_url":"https://api.github.com/users/sklassen/followers","following_url":"https://api.github.com/users/sklassen/following{/other_user}","gists_url":"https://api.github.com/users/sklassen/gists{/gist_id}","starred_url":"https://api.github.com/users/sklassen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sklassen/subscriptions","organizations_url":"https://api.github.com/users/sklassen/orgs","repos_url":"https://api.github.com/users/sklassen/repos","events_url":"https://api.github.com/users/sklassen/events{/privacy}","received_events_url":"https://api.github.com/users/sklassen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T10:54:34Z","updated_at":"2019-10-21T10:54:34Z","author_association":"CONTRIBUTOR","body":"I can confirm I still see the same memory with the test suite above with a doc count of 500. When I run it there is no longer an error message; the process runs for some time until it quietly runs out of memory and restarts. (I am using the snap installation on ubuntu 19.04, version 2.3.1; erts-8.3.5.4; n=1; q=8 on a NUCs with 8 cores and 15GB). \r\n\r\nI don't see the problem with larger databases with smaller documents. I suspect it also isn't only the size of the documents, but also the depth of nested structures. Memory management between erlang and the NIF is the likely culprit. \r\n\r\nIn my real-life database, as a workaround, I did a bit of everything: i) increased memory; ii) increased nodes n=5 (shared the problem around); iii) decreased the document size; iv) re-ran indexing multiple times. In my case, it now works on the second or third attempt of a full index. Incremental indexing is fine. \r\n ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544461658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544565250","html_url":"https://github.com/apache/couchdb/issues/2265#issuecomment-544565250","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2265","id":544565250,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU2NTI1MA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T15:21:19Z","updated_at":"2019-10-21T15:21:19Z","author_association":"MEMBER","body":"a seemingly critical bit from http://erlang.org/doc/man/code.html#lib_dir-1:\r\n> If a regular directory called Name or Name-Vsn exists in the code path with an ebin subdirectory, the path to this directory is returned (not the ebin directory).\r\n\r\nIf I manually create `src/dreyfus/ebin` before running the build, `HAVE_DREYFUS` is set as expected. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544565250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544575530","html_url":"https://github.com/apache/couchdb/issues/2265#issuecomment-544575530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2265","id":544575530,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU3NTUzMA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T15:43:32Z","updated_at":"2019-10-21T15:43:32Z","author_association":"MEMBER","body":"This makes sense to me now. Our rebar configuration results in imported dependencies being compiled before any modules defined in the couchdb source tree. Historically, `dreyfus` and `ken` were peers; `dreyfus` would be built before `ken` and the feature detection in `ken` would work.\r\n\r\nNow that `dreyfus` has been imported into the CouchDB source tree this is no longer true; `ken` will be compiled first as an external dependency and the detection of `dreyfus` fails.\r\n\r\nPotentially we could import `ken` into the couchdb source tree in the same way as `dreyfus` so there are peers again. Alternatively we could just remove the conditional compilation flag given `dreyfus` now always exists in CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544575530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544576189","html_url":"https://github.com/apache/couchdb/issues/1008#issuecomment-544576189","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1008","id":544576189,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU3NjE4OQ==","user":{"login":"Caesar305","id":434507,"node_id":"MDQ6VXNlcjQzNDUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/434507?v=4","gravatar_id":"","url":"https://api.github.com/users/Caesar305","html_url":"https://github.com/Caesar305","followers_url":"https://api.github.com/users/Caesar305/followers","following_url":"https://api.github.com/users/Caesar305/following{/other_user}","gists_url":"https://api.github.com/users/Caesar305/gists{/gist_id}","starred_url":"https://api.github.com/users/Caesar305/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Caesar305/subscriptions","organizations_url":"https://api.github.com/users/Caesar305/orgs","repos_url":"https://api.github.com/users/Caesar305/repos","events_url":"https://api.github.com/users/Caesar305/events{/privacy}","received_events_url":"https://api.github.com/users/Caesar305/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T15:45:02Z","updated_at":"2019-10-21T15:45:02Z","author_association":"NONE","body":"Our database is not big, it just has over 100 databases. Each one maybe 200Mb in size, with a few thousand documents in each. This issue occurs randomly for us, one of the nodes will simply start responding to requests very slowly (over 20 second delay). When looking at the processes, I see 2 couchdb processes pegging a few CPUs. The logs are showing similar messages to OP. Running 32GB RAM, 16 processors, 1TB SSD drives. Not sure what I can tweak to help remedy this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544576189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544642671","html_url":"https://github.com/apache/couchdb/pull/2266#issuecomment-544642671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2266","id":544642671,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY0MjY3MQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T18:20:55Z","updated_at":"2019-10-21T18:20:55Z","author_association":"MEMBER","body":"+1. Fixes https://github.com/apache/couchdb/issues/2265","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544642671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544642800","html_url":"https://github.com/apache/couchdb/issues/2265#issuecomment-544642800","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2265","id":544642800,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDY0MjgwMA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-21T18:21:15Z","updated_at":"2019-10-21T18:21:15Z","author_association":"MEMBER","body":"fixed by #2266 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/544642800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545441090","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-545441090","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":545441090,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTQ0MTA5MA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T13:22:36Z","updated_at":"2019-10-23T13:44:18Z","author_association":"CONTRIBUTOR","body":"There are more progress on this task\r\n- compiled and tested in linux environment and prove that function is working\r\n- most of `make javascript` test suites passed\r\n- test related to sandbox passed\r\n- the latest commit is https://github.com/apache/couchdb/pull/2170/commits/349a30b83762d370f3b03dc19ffd796dc47eb5e6\r\n\r\nTo-do:\r\n- fix `collation_test_` eunit test\r\n- fix the left javascript test case\r\n- test in windows\r\n- decide how to deploy with new spidermonkey runtime.\r\n\r\ncc @denib @janl @davisp @kocolosk \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545441090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545506702","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545506702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545506702,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUwNjcwMg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T15:42:28Z","updated_at":"2019-10-23T15:42:28Z","author_association":"CONTRIBUTOR","body":"> @iilyak Would you mind writing a test case for it.\r\n\r\nI am so sorry I missed the fact that you have some tests","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545506702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545522881","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545522881","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545522881,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUyMjg4MQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T16:18:17Z","updated_at":"2019-10-23T16:18:17Z","author_association":"MEMBER","body":"@iilyak : thank you for the review! I've just pushed a commit (cabe4c4) to make the changes you've suggested.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545522881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545524266","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545524266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545524266,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUyNDI2Ng==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T16:21:21Z","updated_at":"2019-10-23T16:21:21Z","author_association":"CONTRIBUTOR","body":"@bessbd Could you squash commits.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545524266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545530182","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545530182","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545530182,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTUzMDE4Mg==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T16:35:54Z","updated_at":"2019-10-23T16:35:54Z","author_association":"MEMBER","body":"> @bessbd Could you squash commits.\r\n\r\nDone!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545530182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545578471","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545578471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545578471,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTU3ODQ3MQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T18:33:39Z","updated_at":"2019-10-23T18:33:39Z","author_association":"CONTRIBUTOR","body":"Thank you for your contribution. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545578471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545884719","html_url":"https://github.com/apache/couchdb/pull/2270#issuecomment-545884719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2270","id":545884719,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTg4NDcxOQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T12:00:14Z","updated_at":"2019-10-24T12:00:14Z","author_association":"MEMBER","body":"Thank you for the review and the merge, @iilyak !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/545884719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546012770","html_url":"https://github.com/apache/couchdb/pull/2274#issuecomment-546012770","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2274","id":546012770,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjAxMjc3MA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T17:06:41Z","updated_at":"2019-10-24T17:06:41Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546012770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546040486","html_url":"https://github.com/apache/couchdb/pull/2277#issuecomment-546040486","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2277","id":546040486,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjA0MDQ4Ng==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T18:18:03Z","updated_at":"2019-10-24T18:18:03Z","author_association":"MEMBER","body":"I'd recommend to any reviewers to at least go through the PR commit by commit first as each change is relatively logically independent.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546040486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546270858","html_url":"https://github.com/apache/couchdb/issues/2244#issuecomment-546270858","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2244","id":546270858,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI3MDg1OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T09:06:20Z","updated_at":"2019-10-25T09:06:20Z","author_association":"MEMBER","body":"it doesn’t look like I can reproduce this:\r\n\r\n```\r\n> curl -vX PUT http://a:a@127.0.0.1:15984/a\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to 127.0.0.1 (127.0.0.1) port 15984 (#0)\r\n* Server auth using Basic with user 'a'\r\n> PUT /a HTTP/1.1\r\n> Host: 127.0.0.1:15984\r\n> Authorization: Basic YTph\r\n> User-Agent: curl/7.54.0\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 201 Created\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 12\r\n< Content-Type: application/json\r\n< Date: Fri, 25 Oct 2019 09:05:44 GMT\r\n< Location: http://127.0.0.1:15984/a\r\n< Server: CouchDB/3.0.0-be2364d9c (Erlang OTP/21)\r\n< X-Couch-Request-ID: de4cfb3575\r\n< X-CouchDB-Body-Time: 0\r\n< \r\n{\"ok\":true}\r\n* Connection #0 to host 127.0.0.1 left intact\r\njan@rose (11:05:44) ~ \r\n> curl -vX PUT http://127.0.0.1:15984/a/a/a -Hcontent-type:application/octet-stream -d 'abcde'\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to 127.0.0.1 (127.0.0.1) port 15984 (#0)\r\n> PUT /a/a/a HTTP/1.1\r\n> Host: 127.0.0.1:15984\r\n> User-Agent: curl/7.54.0\r\n> Accept: */*\r\n> content-type:application/octet-stream\r\n> Content-Length: 5\r\n> \r\n* upload completely sent off: 5 out of 5 bytes\r\n< HTTP/1.1 201 Created\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 64\r\n< Content-Type: application/json\r\n< Date: Fri, 25 Oct 2019 09:05:51 GMT\r\n< Location: http://127.0.0.1:15984/a/a/a\r\n< Server: CouchDB/3.0.0-be2364d9c (Erlang OTP/21)\r\n< X-Couch-Request-ID: ea824e1e65\r\n< X-CouchDB-Body-Time: 0\r\n< \r\n{\"ok\":true,\"id\":\"a\",\"rev\":\"1-3f5a3d76ee90dc21a1bc013c8010446c\"}\r\n* Connection #0 to host 127.0.0.1 left intact\r\njan@rose (11:05:52) ~ \r\n> curl -v http://127.0.0.1:15984/a/a/a -HRange:bytes=1-2\r\n*   Trying 127.0.0.1...\r\n* TCP_NODELAY set\r\n* Connected to 127.0.0.1 (127.0.0.1) port 15984 (#0)\r\n> GET /a/a/a HTTP/1.1\r\n> Host: 127.0.0.1:15984\r\n> User-Agent: curl/7.54.0\r\n> Accept: */*\r\n> Range:bytes=1-2\r\n> \r\n< HTTP/1.1 206 Partial Content\r\n< Accept-Ranges: bytes\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 2\r\n< Content-Range: bytes 1-2/5\r\n< Content-Type: application/octet-stream\r\n< Date: Fri, 25 Oct 2019 09:06:00 GMT\r\n< ETag: \"q1a02StAcTrMWviZhdS3hg==\"\r\n< Server: CouchDB/3.0.0-be2364d9c (Erlang OTP/21)\r\n< \r\n* Connection #0 to host 127.0.0.1 left intact\r\nbc\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546270858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546357883","html_url":"https://github.com/apache/couchdb/pull/2130#issuecomment-546357883","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2130","id":546357883,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjM1Nzg4Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T13:39:23Z","updated_at":"2019-10-25T13:39:23Z","author_association":"CONTRIBUTOR","body":"@theburge thanks for your valuable comments on these two PRs and your patience. I already logic to force to close writer when getting IOException https://github.com/cloudant-labs/clouseau/pull/23/commits/ff6d49619bb6f8196d40af14c1f1064d578f3e80\r\n\r\nRegarding to combine two RPC calls (`close_lru` and `rename`) into one, I think that it is good idea. But I am getting some difficulty to combine them because they are sent to different process reference (two services in clouseau side)\r\n - `rpc({main, clouseau()}, {close_lru_by_path, DbName}).` i.e. IndexCleanupService in clouseau\r\n - `gen_server:cast({cleanup, clouseau()}, {rename, DbName})`  i.e. IndexManagerService in clouseau\r\n\r\nBack to race condition scenario, I am thinking that it is possible to have `close_lru`, `open`, and `rename` index calling sequence. However, how much chance to have these calls against the same shared database. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546357883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546848415","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546848415","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546848415,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg0ODQxNQ==","user":{"login":"melnikaite","id":900724,"node_id":"MDQ6VXNlcjkwMDcyNA==","avatar_url":"https://avatars.githubusercontent.com/u/900724?v=4","gravatar_id":"","url":"https://api.github.com/users/melnikaite","html_url":"https://github.com/melnikaite","followers_url":"https://api.github.com/users/melnikaite/followers","following_url":"https://api.github.com/users/melnikaite/following{/other_user}","gists_url":"https://api.github.com/users/melnikaite/gists{/gist_id}","starred_url":"https://api.github.com/users/melnikaite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melnikaite/subscriptions","organizations_url":"https://api.github.com/users/melnikaite/orgs","repos_url":"https://api.github.com/users/melnikaite/repos","events_url":"https://api.github.com/users/melnikaite/events{/privacy}","received_events_url":"https://api.github.com/users/melnikaite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T08:47:47Z","updated_at":"2019-10-28T08:47:47Z","author_association":"NONE","body":"I have similar issue with `$all`\r\nI have db with 2 million records, one of them have value `[1,2,3,4,5]` in the field with index\r\nIndexer have finished all jobs, 8 cores of cpu shows no activity on graph\r\nExplain for the following query shows that specified index will be used\r\n```\r\n{\r\n   \"selector\": {\r\n      \"combination\": {\r\n         \"$all\": [\r\n            1,\r\n            2,\r\n            3,\r\n            4,\r\n            5\r\n         ]\r\n      }\r\n   }\r\n}\r\n```\r\nThe question is why it takes 7 minutes of 800% cpu load if it says in execution statistics that just 1 document was examined?\r\n\r\nPS. I loaded 2 million of documents (30 mb in total) to the nodejs variable and made search obviously without any indexes just by looping through all the items and it took less than second. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546848415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546851401","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546851401","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546851401,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg1MTQwMQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T08:56:40Z","updated_at":"2019-10-28T08:56:40Z","author_association":"MEMBER","body":"@melnikaite can you show the output of `_explain` and the execution stats? As far as I'm aware, indexes are not able to be used against an '$all' operator directly which would lead to a full index scan.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546851401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546875921","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546875921","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546875921,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg3NTkyMQ==","user":{"login":"melnikaite","id":900724,"node_id":"MDQ6VXNlcjkwMDcyNA==","avatar_url":"https://avatars.githubusercontent.com/u/900724?v=4","gravatar_id":"","url":"https://api.github.com/users/melnikaite","html_url":"https://github.com/melnikaite","followers_url":"https://api.github.com/users/melnikaite/followers","following_url":"https://api.github.com/users/melnikaite/following{/other_user}","gists_url":"https://api.github.com/users/melnikaite/gists{/gist_id}","starred_url":"https://api.github.com/users/melnikaite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melnikaite/subscriptions","organizations_url":"https://api.github.com/users/melnikaite/orgs","repos_url":"https://api.github.com/users/melnikaite/repos","events_url":"https://api.github.com/users/melnikaite/events{/privacy}","received_events_url":"https://api.github.com/users/melnikaite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T10:03:25Z","updated_at":"2019-10-28T10:03:25Z","author_association":"NONE","body":"```\r\n{\r\n \"dbname\": \"test\",\r\n \"index\": {\r\n  \"ddoc\": \"_design/f96e466b1579e8b7d09e9c8827cdbc8e75b14f93\",\r\n  \"name\": \"combination-json-index\",\r\n  \"type\": \"json\",\r\n  \"def\": {\r\n   \"fields\": [\r\n    {\r\n     \"combination\": \"asc\"\r\n    }\r\n   ]\r\n  }\r\n },\r\n \"selector\": {\r\n  \"combination\": {\r\n   \"$all\": [\r\n    1,\r\n    2,\r\n    3,\r\n    4,\r\n    5\r\n   ]\r\n  }\r\n },\r\n \"opts\": {\r\n  \"use_index\": [],\r\n  \"bookmark\": \"nil\",\r\n  \"limit\": 25,\r\n  \"skip\": 0,\r\n  \"sort\": {},\r\n  \"fields\": \"all_fields\",\r\n  \"r\": [\r\n   49\r\n  ],\r\n  \"conflicts\": false,\r\n  \"stale\": false,\r\n  \"update\": true,\r\n  \"stable\": false,\r\n  \"execution_stats\": false\r\n },\r\n \"limit\": 25,\r\n \"skip\": 0,\r\n \"fields\": \"all_fields\",\r\n \"mrargs\": {\r\n  \"include_docs\": true,\r\n  \"view_type\": \"map\",\r\n  \"reduce\": false,\r\n  \"start_key\": [],\r\n  \"end_key\": [\r\n   \"<MAX>\"\r\n  ],\r\n  \"direction\": \"fwd\",\r\n  \"stable\": false,\r\n  \"update\": true,\r\n  \"conflicts\": \"undefined\"\r\n }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546875921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546883183","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546883183","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546883183,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg4MzE4Mw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T10:23:27Z","updated_at":"2019-10-28T10:23:27Z","author_association":"MEMBER","body":"thanks @melnikaite. From that output we can see:\r\n\r\n```\r\n \"start_key\": [],\r\n  \"end_key\": [\r\n   \"<MAX>\"\r\n  ],\r\n```\r\nwhich indicates a full index scan. The query engine will iterate through the index with `include_docs=true` and evaluate each document individually against the query selector in series. As you might expect, this isn't very efficient.\r\n\r\nI can't think of a good ay to accelerate this kind of disjoint query in CouchDB natively; naively it would require querying the index multiple times (once for each entry in the `$all` predicate) and joining the results.\r\n\r\nYou could try looking at the [clouseau addon](https://developer.ibm.com/dwblog/2015/text-search-apache-couchdb/) which provides Lucene-based indexes. Support for this can be manually patched into CouchDB 2 and is available natively in CouchDB master.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546883183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546884302","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546884302","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546884302,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg4NDMwMg==","user":{"login":"melnikaite","id":900724,"node_id":"MDQ6VXNlcjkwMDcyNA==","avatar_url":"https://avatars.githubusercontent.com/u/900724?v=4","gravatar_id":"","url":"https://api.github.com/users/melnikaite","html_url":"https://github.com/melnikaite","followers_url":"https://api.github.com/users/melnikaite/followers","following_url":"https://api.github.com/users/melnikaite/following{/other_user}","gists_url":"https://api.github.com/users/melnikaite/gists{/gist_id}","starred_url":"https://api.github.com/users/melnikaite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melnikaite/subscriptions","organizations_url":"https://api.github.com/users/melnikaite/orgs","repos_url":"https://api.github.com/users/melnikaite/repos","events_url":"https://api.github.com/users/melnikaite/events{/privacy}","received_events_url":"https://api.github.com/users/melnikaite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T10:26:51Z","updated_at":"2019-10-28T10:26:51Z","author_association":"NONE","body":"I'm not sure text search will help me, I have an array\r\n\r\nWhy without index it takes less time than with index?\r\n![wihout](https://user-images.githubusercontent.com/900724/67671218-8ee7ca80-f986-11e9-876d-d6bab8123ff9.png)\r\n![with](https://user-images.githubusercontent.com/900724/67671219-8ee7ca80-f986-11e9-8424-be4f3ab9b29f.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546884302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546886154","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-546886154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":546886154,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njg4NjE1NA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T10:32:06Z","updated_at":"2019-10-28T10:32:06Z","author_association":"MEMBER","body":"@melnikaite I think the timing difference is explained by the efficiency of iterating the entire database in it's \"natural\" order (i.e. no index) vs index order, which requires an additional random access to fetch each document.\r\n\r\nBear in mind that text indexes can be useful for all kinds of data because Lucene has a richer/more sophisticated indexing and query engine than CouchDB has natively.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546886154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546998462","html_url":"https://github.com/apache/couchdb/pull/2279#issuecomment-546998462","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2279","id":546998462,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njk5ODQ2Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T15:22:40Z","updated_at":"2019-10-28T15:22:40Z","author_association":"CONTRIBUTOR","body":"@iilyak nice cleanup. \r\n\r\n+1 from me but let's see what @davisp thinks as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/546998462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547046124","html_url":"https://github.com/apache/couchdb/pull/2279#issuecomment-547046124","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2279","id":547046124,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzA0NjEyNA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T17:02:22Z","updated_at":"2019-10-28T17:02:22Z","author_association":"CONTRIBUTOR","body":"Yeah I couldn't find how we use the `user_ctx` anywhere except in open. That's why I suggested to clean it up. I thought it might be used in some EPI plugins / request handler overrides, but saw there we used the http request object to fetch the `user_ctx`.\r\n\r\nIn master there are uses like `fabric_util:open_cluster_db/2` ( https://github.com/apache/couchdb/blob/5d199268d4330b80ce54d5dad2fe27db4bb81641/src/fabric/src/fabric_util.erl#L240 )  where we end up using `user_ctx` so it was probably a left-over from there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547046124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547100067","html_url":"https://github.com/apache/couchdb/issues/1775#issuecomment-547100067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1775","id":547100067,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzEwMDA2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-28T19:06:09Z","updated_at":"2019-10-28T19:06:09Z","author_association":"MEMBER","body":"We have a new compaction daemon in CouchDB 3.0 that should avoid this problem since it runs all the time and has finer grained tuning options. Closing this out for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547100067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547359689","html_url":"https://github.com/apache/couchdb/pull/2286#issuecomment-547359689","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2286","id":547359689,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzM1OTY4OQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T10:41:52Z","updated_at":"2019-10-29T10:41:52Z","author_association":"CONTRIBUTOR","body":"The jaeger produces something like the following\r\n\r\n<img width=\"1660\" alt=\"Screen Shot 2019-10-28 at 5 41 13 AM\" src=\"https://user-images.githubusercontent.com/9804420/67759733-399ad000-f9fd-11e9-95a9-e19bf9c76545.png\">\r\n\r\n<img width=\"1656\" alt=\"Screen Shot 2019-10-28 at 4 51 01 AM\" src=\"https://user-images.githubusercontent.com/9804420/67760101-e4ab8980-f9fd-11e9-8cb5-eb46fda95619.png\">\r\n\r\n<img width=\"1654\" alt=\"Screen Shot 2019-10-28 at 4 51 23 AM\" src=\"https://user-images.githubusercontent.com/9804420/67760146-00169480-f9fe-11e9-8f24-9bb502f2ab5e.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547359689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547372517","html_url":"https://github.com/apache/couchdb/pull/2279#issuecomment-547372517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2279","id":547372517,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzM3MjUxNw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T11:18:09Z","updated_at":"2019-10-29T11:18:09Z","author_association":"CONTRIBUTOR","body":"@davisp Please let me know what you want me to do.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547372517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547561056","html_url":"https://github.com/apache/couchdb/pull/2279#issuecomment-547561056","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2279","id":547561056,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzU2MTA1Ng==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T18:16:55Z","updated_at":"2019-10-29T18:16:55Z","author_association":"MEMBER","body":"One thing that I didn't say earlier is that a lot of these places are likely left over from 3.0 when we had to pass user_ctx records across to RPC workers that had to open the database. I think if we just go through and inspect each instance and verify that was the case then I'd be more than happy with merging this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547561056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547561501","html_url":"https://github.com/apache/couchdb/pull/2287#issuecomment-547561501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2287","id":547561501,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzU2MTUwMQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T18:17:54Z","updated_at":"2019-10-29T18:17:54Z","author_association":"MEMBER","body":"@rnewson can you take a look, please?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547561501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547947612","html_url":"https://github.com/apache/couchdb/issues/2281#issuecomment-547947612","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2281","id":547947612,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk0NzYxMg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T14:57:02Z","updated_at":"2019-10-30T14:57:02Z","author_association":"CONTRIBUTOR","body":"hey @wohali, I will look into this and come back soon. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547947612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547950432","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-547950432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":547950432,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk1MDQzMg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T15:02:16Z","updated_at":"2019-10-30T15:02:16Z","author_association":"CONTRIBUTOR","body":"The recent update:\r\n- fixed collation_test_ eunit test failure\r\n- addressed utf8 related javascript test failures\r\n- modify .travis.yml to accelerate CI elapsed time by installing spidermonkey dev instead of building on-the-fly\r\n- other changes to make `javascript test` happy\r\n\r\nTo-do or ongoing:\r\n- change for windows platform\r\n- in parallel, send review request tomorrow  \r\n- decide how to deploy with new spidermonkey runtime.\r\ncc @denib @janl @davisp @kocolosk","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547950432/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547994376","html_url":"https://github.com/apache/couchdb/pull/2279#issuecomment-547994376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2279","id":547994376,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk5NDM3Ng==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T16:29:17Z","updated_at":"2019-10-30T16:29:17Z","author_association":"CONTRIBUTOR","body":">  think if we just go through and inspect each instance and verify that was the case\r\n\r\nHere is a list of cases where we pass user_ctx:\r\n\r\n* fabric:open_doc -> fabric_doc_open -> \r\n  * fabric_rpc:get_doc_info -> fabric_rpc:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n  * fabric_rpc:get_full_doc_info -> fabric_rpc:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n  * fabric_rpc:open_doc -> fabric_rpc:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* couch_replicator_fabric:docs -> couch_replicator_fabric_rpc:docs -> couch_db:open_int\r\n* fabric:query_view\r\n  * fabric_util:open_cluster_db -> couch_db:clustered_db -> FakeDb#db{user_ctx = ...}\r\n  * fabric_rpc:map_view -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* fabric:delete_db -> fabric_db_delete:go -> user_ctx ignored\r\n* fabric:create_db -> fabric_db_create:go -> fabric_rpc:create_db -> couch_server:create -> couch_db:set_user_ctx\r\n* fabric:get_all_security -> fabric_db_meta:get_all_security -> fabric_rpc:get_all_security -> fabric_rpc:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* fabric:set_security -> fabric_db_meta:set_security -> fabric_rpc:with_db -> -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* fabric:purge_docs -> fabric_doc_purge:go -> fabric_rpc:purge_docs -> fabric_rpc:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* fabric:set_purge_infos_limit -> fabric_db_meta:set_purge_infos_limit -> fabric_rpc:set_purge_infos_limit -> fabric:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n* fabric:update_doc -> fabric:update_docs -> fabric_rpc:update_docs\r\n* fabric:all_docs -> fabric_view_all_docs:go -> fabric_rpc:all_docs -> fabric_rpc:get_or_create_db ->  couch_db:open_int\r\n* fabric:update_docs -> fabric_doc_update:go -> fabric_rpc:update_docs -> fabric:with_db -> fabric_rpc:get_or_create_db -> couch_db:open_int\r\n\r\nTo summarize all call chains finished by the call to one of:\r\n* couch_db:open_int\r\n* couch_db:set_user_ctx","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/547994376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548064756","html_url":"https://github.com/apache/couchdb/pull/2289#issuecomment-548064756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2289","id":548064756,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODA2NDc1Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-30T18:59:53Z","updated_at":"2019-10-30T18:59:53Z","author_association":"CONTRIBUTOR","body":"Tests pass\r\n\r\n```\r\nmake eunit apps=fabric,couch_views,couch_jobs\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548064756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548341082","html_url":"https://github.com/apache/couchdb/pull/2170#issuecomment-548341082","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2170","id":548341082,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODM0MTA4Mg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T12:08:07Z","updated_at":"2019-10-31T12:08:07Z","author_association":"CONTRIBUTOR","body":"hey @janl hey @davisp \r\n\r\nAfter working on this task from Sep, I tried to come up with ready-for-review commit 6c00fb0 now. All eunit tests, mango tests and elixir tests passed. For Javascript tests, only one thing related to `require()` in design_docs.js is open. Other tests passed as well. \r\n\r\nBased on this situation, I would like to request @davisp to review first. In parallel, I can work on possible changes for Windows platform. \r\n\r\n<img width=\"1341\" alt=\"Screen Shot 2019-10-31 at 7 57 01 PM\" src=\"https://user-images.githubusercontent.com/18000622/67945506-05e8c180-fc1a-11e9-8ad9-ac4d50279be6.png\">\r\n\r\n\r\nAny comments are highly welcome.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548341082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548525350","html_url":"https://github.com/apache/couchdb/pull/2292#issuecomment-548525350","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2292","id":548525350,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODUyNTM1MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-31T19:07:56Z","updated_at":"2019-10-31T19:07:56Z","author_association":"CONTRIBUTOR","body":"Marking it as as draft pull request in order to start the discussion on the mailing list since it involves API changes","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/548525350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]