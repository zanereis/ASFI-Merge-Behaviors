[{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867092071","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1867092071","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1867092071,"node_id":"IC_kwDOAFa5xc5vSZBn","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T00:43:26Z","updated_at":"2023-12-22T00:43:26Z","author_association":"CONTRIBUTOR","body":"This is pretty much working now, in terms of constructing drill metadata from DFDL schemas, and \r\nDaffodil delivering data to Drill. \r\n\r\nThere were dozens of commits to get here, so I squashed them as they were no longer helpful. \r\n\r\nObviously more test are needed, but the ones there show nested subrecords working. \r\n\r\nThe issues like how schemas get distributed, and how Daffodil gets invoked in parallel by drill are still open.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867092071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867102615","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1867102615","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1867102615,"node_id":"IC_kwDOAFa5xc5vSbmX","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:02:19Z","updated_at":"2023-12-22T01:02:19Z","author_association":"CONTRIBUTOR","body":"Rebased onto latest Drill master as of 2023-12-21 (force pushed one more time)\r\n\r\nNote that this is never going to pass automated tests until the Daffodil release this depends on is official (currently it needs a locally build Daffodil 3.7.0-snapshot, though the main daffodil branch has the changes integrated so any 3.7.0-snapshot build will work.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867102615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867113844","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1867113844","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1867113844,"node_id":"IC_kwDOAFa5xc5vSeV0","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:21:34Z","updated_at":"2023-12-22T01:21:34Z","author_association":"CONTRIBUTOR","body":"> Rebased onto latest Drill master as of 2023-12-21 (force pushed one more time)\r\n> \r\n> Note that this is never going to pass automated tests until the Daffodil release this depends on is official (currently it needs a locally build Daffodil 3.7.0-snapshot, though the main daffodil branch has the changes integrated so any 3.7.0-snapshot build will work.\r\n\r\n@mbeckerle This is really great work!  Thanks for your persistence on this.  Do you have a an ETA on the next Daffodil release?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867113844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867116389","html_url":"https://github.com/apache/drill/issues/2835#issuecomment-1867116389","issue_url":"https://api.github.com/repos/apache/drill/issues/2835","id":1867116389,"node_id":"IC_kwDOAFa5xc5vSe9l","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:25:47Z","updated_at":"2023-12-22T01:25:47Z","author_association":"CONTRIBUTOR","body":"PR updated: https://github.com/apache/drill/pull/2836\r\n\r\n- Metadata bridge working, \r\n- data bridge working. \r\n- simple types still tbd are: unsigned integers, decimal, date/time/dateTime\r\n\r\nNot done: Distribution of schemas (or compiled schemas) across drill's computation fabric.\r\n\r\nTesting of nillability, and real queries against realistic DFDL schemas are needed. \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867116389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867120954","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1867120954","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1867120954,"node_id":"IC_kwDOAFa5xc5vSgE6","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T01:33:42Z","updated_at":"2023-12-22T01:33:42Z","author_association":"CONTRIBUTOR","body":"> > Rebased onto latest Drill master as of 2023-12-21 (force pushed one more time)\r\n> > Note that this is never going to pass automated tests until the Daffodil release this depends on is official (currently it needs a locally build Daffodil 3.7.0-snapshot, though the main daffodil branch has the changes integrated so any 3.7.0-snapshot build will work.\r\n> \r\n> @mbeckerle This is really great work! Thanks for your persistence on this. Do you have a an ETA on the next Daffodil release?\r\n\r\nWe could have a Daffodil release in Jan or Feb. There are some Daffodil API cleanups that need to be discussed that would provide better stability for this Drill integration ... we may want to wait for those and update this to use them. \r\n ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867120954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867184695","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1867184695","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1867184695,"node_id":"IC_kwDOAFa5xc5vSvo3","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T03:20:53Z","updated_at":"2023-12-22T03:20:53Z","author_association":"CONTRIBUTOR","body":"> > > Rebased onto latest Drill master as of 2023-12-21 (force pushed one more time)\r\n> > > Note that this is never going to pass automated tests until the Daffodil release this depends on is official (currently it needs a locally build Daffodil 3.7.0-snapshot, though the main daffodil branch has the changes integrated so any 3.7.0-snapshot build will work.\r\n> > \r\n> > \r\n> > @mbeckerle This is really great work! Thanks for your persistence on this. Do you have a an ETA on the next Daffodil release?\r\n> \r\n> We could have a Daffodil release in Jan or Feb. There are some Daffodil API cleanups that need to be discussed that would provide better stability for this Drill integration ... we may want to wait for those and update this to use them.\r\n\r\n@mbeckerle So is the next step really to figure out how to access the Daffodil files from a potentially distributed environment?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1867184695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1870840956","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1870840956","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1870840956,"node_id":"IC_kwDOAFa5xc5vgsR8","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-28T05:36:17Z","updated_at":"2023-12-28T05:36:17Z","author_association":"CONTRIBUTOR","body":"What version of Drill are you using?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1870840956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872470965","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1872470965","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1872470965,"node_id":"IC_kwDOAFa5xc5vm6O1","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-30T07:10:28Z","updated_at":"2023-12-30T07:10:28Z","author_association":"NONE","body":"I'm using this apache-drill-1.21.1, I tried to use other versions as well. but it is failing for all.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872470965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872471960","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1872471960","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1872471960,"node_id":"IC_kwDOAFa5xc5vm6eY","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-30T07:16:49Z","updated_at":"2023-12-30T07:16:49Z","author_association":"NONE","body":"I found another software, Trino, to establish a connection between MongoDB and Superset. However, Trino is memory-intensive. Drill is a better option for my use cases. But, since a functionality is broken, I'll have to switch to Trino and explore it further to manage it according to my requirements.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872471960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872472578","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1872472578","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1872472578,"node_id":"IC_kwDOAFa5xc5vm6oC","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-30T07:20:13Z","updated_at":"2023-12-30T07:20:13Z","author_association":"NONE","body":"But it should not be broken if the alias contains any special characters. The issue might be occurring at the MongoDB end, where a key with special characters could be causing the problem. However, this should be handled at the Drill end to create an alias without any special characters.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872472578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872673208","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872673208","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872673208,"node_id":"IC_kwDOAFa5xc5vnrm4","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T05:14:35Z","updated_at":"2023-12-31T05:14:35Z","author_association":"CONTRIBUTOR","body":"Hi @rymarm! Here are two things it would be interesting to redo the Java 8 runs with.\r\n\r\n1. Adding the EasyOutOfMemory annotation to TestValueVector.java.\r\n2. Bumping the directMemoryMb value in pom.xml. We set up a swap file at the start of the CI run now so you could try to taking this up to 3Gb.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872673208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872676811","html_url":"https://github.com/apache/drill/pull/2813#issuecomment-1872676811","issue_url":"https://api.github.com/repos/apache/drill/issues/2813","id":1872676811,"node_id":"IC_kwDOAFa5xc5vnsfL","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T05:36:14Z","updated_at":"2023-12-31T05:36:14Z","author_association":"CONTRIBUTOR","body":"@pjfanning @cgivre, @rymarm has made progress on this in #2857. Shall we close this one and try to get that one over the line?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872676811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872747437","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872747437","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872747437,"node_id":"IC_kwDOAFa5xc5vn9ut","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T07:09:34Z","updated_at":"2023-12-31T07:11:15Z","author_association":"CONTRIBUTOR","body":"P.S. the failing test class runs fine in isolation on my laptop under IBM JDK 8 so I do think we can fix this in the CI with some environment tweaks.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872747437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872869093","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872869093","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872869093,"node_id":"IC_kwDOAFa5xc5vobbl","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T08:48:47Z","updated_at":"2023-12-31T08:48:47Z","author_association":"CONTRIBUTOR","body":"@rymarm I just got [the same test failure in the 1.21 branch](https://github.com/apache/drill/actions/runs/7368854517/job/20053552574?pr=2860) which is still based on Netty 4.1.73.Final. I'm testing there with more direct memory and will send a PR to master if that takes care of the issue.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872869093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872888170","html_url":"https://github.com/apache/drill/pull/2813#issuecomment-1872888170","issue_url":"https://api.github.com/repos/apache/drill/issues/2813","id":1872888170,"node_id":"IC_kwDOAFa5xc5vogFq","user":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T09:09:42Z","updated_at":"2023-12-31T09:09:42Z","author_association":"CONTRIBUTOR","body":"sure - I haven't been looking at this","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872888170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872950972","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872950972","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872950972,"node_id":"IC_kwDOAFa5xc5vova8","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T13:38:22Z","updated_at":"2023-12-31T13:38:22Z","author_association":"CONTRIBUTOR","body":"Update on my comments above: the direct memory limit increase has just been merged to master. Please rebase this and let's see what we get.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872950972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872957731","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872957731","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872957731,"node_id":"IC_kwDOAFa5xc5voxEj","user":{"login":"rymarm","id":62295633,"node_id":"MDQ6VXNlcjYyMjk1NjMz","avatar_url":"https://avatars.githubusercontent.com/u/62295633?v=4","gravatar_id":"","url":"https://api.github.com/users/rymarm","html_url":"https://github.com/rymarm","followers_url":"https://api.github.com/users/rymarm/followers","following_url":"https://api.github.com/users/rymarm/following{/other_user}","gists_url":"https://api.github.com/users/rymarm/gists{/gist_id}","starred_url":"https://api.github.com/users/rymarm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymarm/subscriptions","organizations_url":"https://api.github.com/users/rymarm/orgs","repos_url":"https://api.github.com/users/rymarm/repos","events_url":"https://api.github.com/users/rymarm/events{/privacy}","received_events_url":"https://api.github.com/users/rymarm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T14:09:07Z","updated_at":"2023-12-31T14:09:07Z","author_association":"MEMBER","body":"@jnturton Thank you so much for the investigation! I didn't have time to check tests failures.\r\nP.S. You decide to finish all unresolved tasks until the end of the year?)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872957731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872959767","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872959767","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872959767,"node_id":"IC_kwDOAFa5xc5voxkX","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T14:17:23Z","updated_at":"2023-12-31T14:17:23Z","author_association":"CONTRIBUTOR","body":"> P.S. You decide to finish all unresolved tasks until the end of the year?)\r\n\r\nðŸ˜‚","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872959767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872986748","html_url":"https://github.com/apache/drill/pull/2857#issuecomment-1872986748","issue_url":"https://api.github.com/repos/apache/drill/issues/2857","id":1872986748,"node_id":"IC_kwDOAFa5xc5vo4J8","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-31T16:18:41Z","updated_at":"2023-12-31T16:18:41Z","author_association":"CONTRIBUTOR","body":"We just need to bump up the JAR size limit in the hadoop-2 profile at the bottom of the pom in jdbc-all now.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1872986748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873204781","html_url":"https://github.com/apache/drill/pull/2859#issuecomment-1873204781","issue_url":"https://api.github.com/repos/apache/drill/issues/2859","id":1873204781,"node_id":"IC_kwDOAFa5xc5vptYt","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-01T07:37:02Z","updated_at":"2024-01-01T07:37:02Z","author_association":"CONTRIBUTOR","body":"Rebasing should fix the CI here too.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873204781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873350619","html_url":"https://github.com/apache/drill/pull/2860#issuecomment-1873350619","issue_url":"https://api.github.com/repos/apache/drill/issues/2860","id":1873350619,"node_id":"IC_kwDOAFa5xc5vqQ_b","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-01T14:30:28Z","updated_at":"2024-01-01T14:30:28Z","author_association":"CONTRIBUTOR","body":"@jnturton \r\nDid we add https://github.com/apache/drill/pull/2795 to this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873350619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873633340","html_url":"https://github.com/apache/drill/pull/2860#issuecomment-1873633340","issue_url":"https://api.github.com/repos/apache/drill/issues/2860","id":1873633340,"node_id":"IC_kwDOAFa5xc5vrWA8","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-02T05:27:43Z","updated_at":"2024-01-02T05:27:43Z","author_association":"CONTRIBUTOR","body":"> @jnturton Did we add #2795 to this?\r\n\r\n@cgivre yes, it's here.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873633340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873939057","html_url":"https://github.com/apache/drill/pull/2859#issuecomment-1873939057","issue_url":"https://api.github.com/repos/apache/drill/issues/2859","id":1873939057,"node_id":"IC_kwDOAFa5xc5vsgpx","user":{"login":"rymarm","id":62295633,"node_id":"MDQ6VXNlcjYyMjk1NjMz","avatar_url":"https://avatars.githubusercontent.com/u/62295633?v=4","gravatar_id":"","url":"https://api.github.com/users/rymarm","html_url":"https://github.com/rymarm","followers_url":"https://api.github.com/users/rymarm/followers","following_url":"https://api.github.com/users/rymarm/following{/other_user}","gists_url":"https://api.github.com/users/rymarm/gists{/gist_id}","starred_url":"https://api.github.com/users/rymarm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymarm/subscriptions","organizations_url":"https://api.github.com/users/rymarm/orgs","repos_url":"https://api.github.com/users/rymarm/repos","events_url":"https://api.github.com/users/rymarm/events{/privacy}","received_events_url":"https://api.github.com/users/rymarm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-02T11:59:23Z","updated_at":"2024-01-02T11:59:23Z","author_association":"MEMBER","body":"> Are the two removed null checks not needed?\r\n\r\n@jnturton Yes, they are redundant. \r\n``` java   \r\n        if (locatorPlugins != null) {\r\n          bootstrapPlugins.putAll(locatorPlugins);\r\n        }\r\n```\r\nIt is redundant, because `StoragePlugins#putAll`  himself checks the argument nullability:\r\nhttps://github.com/apache/drill/blob/15c446d7e8ebe6d97fc879103e1710d733318c6d/exec/java-exec/src/main/java/org/apache/drill/exec/planner/logical/StoragePlugins.java#L114-L117\r\n\r\n```java\r\n      if (upgraded != null) {\r\n        upgraded.putAll(locatorPlugins);\r\n      }\r\n```\r\nIt is redundant, because `upgraded` is just initialized with a constructor just a few lines above and not overridden. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1873939057/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874010034","html_url":"https://github.com/apache/drill/pull/2859#issuecomment-1874010034","issue_url":"https://api.github.com/repos/apache/drill/issues/2859","id":1874010034,"node_id":"IC_kwDOAFa5xc5vsx-y","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-02T13:12:25Z","updated_at":"2024-01-02T13:12:25Z","author_association":"CONTRIBUTOR","body":"@rymarm okay let's rebase, get clean runs and merge!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874010034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874213780","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1874213780","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1874213780,"node_id":"IC_kwDOAFa5xc5vtjuU","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-02T16:00:39Z","updated_at":"2024-01-02T16:00:39Z","author_association":"CONTRIBUTOR","body":"@cgivre yes, the next architectural-level issue is how to get a compiled DFDL schema out to everyplace Drill will run a Daffodil parse. Every one of those JVMs needs to reload it. \r\n\r\nI'll do the various cleanups and such. The one issue I don't know how to fix is the \"typed setter\" vs. (set-object) issue, so if you could steer me in the right direction on that it would help. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874213780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874845274","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1874845274","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1874845274,"node_id":"IC_kwDOAFa5xc5vv95a","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T04:48:41Z","updated_at":"2024-01-03T04:48:41Z","author_association":"CONTRIBUTOR","body":"Hi Mike,\r\n\r\nJust jumping in with a random thought. Drill has accumulated a number of\r\nschema systems: Parquet metadata cache, HMS, Drill's own metastore,\r\n\"provided schema\", and now DFDL. All provide ways of defining data: be it\r\nParquet, JSON, CSV or whatever. One can't help but wonder, should some\r\nfuture version try to reduce this variation somewhat? Maybe map all the\r\nvariations to DFDL? Map DFDL to Drill's own mechanisms?\r\n\r\nDrill uses two kinds of metadata: schema definitions and file metadata used\r\nfor scan pruning. Schema information could be used at plan time (to provide\r\ncolumn types), but certainly at scan time (to \"discover\" the defined\r\nschema.) File metadata is used primarily at plan time to work out how to\r\ndistribute work.\r\n\r\nA bit of background on scan pruning. Back in the day, it was common to have\r\nthousands or millions of files in Hadoop to scan: this was why tools like\r\nDrill were distributed: divide and conquer. And, of course, the fastest\r\nscan is to skip files that we know can't contain the information we want.\r\nFile metadata captures this information outside of the files themselves.\r\nHMS was the standard solution in the Hadoop days. (Amazon Glue, for S3, is\r\nevidently based on HMS.)\r\n\r\nFor example, Drill's Parquet metadata cache, the Drill metastore and HMS\r\nall provide both schema and file metadata information. The schema\r\ninformation mainly helped with schema evolution: over time, different files\r\nhave different sets of columns. File metadata provides information *about*\r\nthe file, such as the data ranges stored in each file. For Parquet, we\r\nmight track that '2023-01-Boston.parquet' has data from the office='Boston'\r\nrange. (So, no use scanning the file for office='Austin'.) And so on.\r\n\r\nWith Hadoop HFS, it was customary to use directory structure as a partial\r\nprimary index: our file above would live in the /sales/2023/01 directory,\r\nfor example, and logic chooses the proper set of directories to scan. In\r\nDrill, it is up to the user to add crufty conditionals on the path name. In\r\nImpala, and other HMS-aware tools, the user just says WHERE order_year =\r\n2023 AND order_month = 1, and HMS tells the tool that the order_year and\r\norder_month columns translate to such-and-so directory paths. Would be nice\r\nif Drill could provide that feature as well, given the proper file\r\nmetadata: in this case, the mapping of column names to path directories and\r\nfile names.\r\n\r\nDoes DFDL provide only schema information? Does it support versioning so\r\nthat we know that \"old.csv\" lacks the \"version\" column, while \"new.csv\"\r\nincludes that column? Does it also include the kinds of file metadata\r\nmentioned above?\r\n\r\nOr, perhaps DFDL is used in a different context in which the files have a\r\nfixed schema and are small in number? This would fit well the \"desktop\r\nanalytics\" model that Charles and James suggested is where Drill is now\r\nmost commonly used.\r\n\r\nThe answers might suggest if DFDL can be the universal data description. or\r\nif DFDL applies just to individual file schemas, and Drill would still need\r\na second system to track schema evolution and file metadata for large\r\ndeployments.\r\n\r\nFurther, if DFDL is kind of a stand-alone thing, with its own reader, then\r\nwe end up with more complexity: the Drill JSON reader and the DFDL JSON\r\nreader. Same for CSV, etc. JSON is so complex that we'd find ourselves\r\ntelling people that the quirks work one way with the native reader, another\r\nway with DFDL. Plus, the DFDL readers might not handle file splits the same\r\nway, or support the same set of formats that Drill's other readers support,\r\nand so on. It would be nice to separate the idea of schema description from\r\nreader implementation, so that DFDL can be used as a source of schema for\r\nany arbitrary reader: both at plan and scan times.\r\n\r\nIf DFDL uses its own readers, then we'd need DFDL reader representations in\r\nCalcite, which would pick up DFDL schemas so that the schemas are reliably\r\nserialized out to each node as part of the physical plan. This is possible,\r\nbut it does send us down the two-readers-for-every-format path.\r\n\r\nOn the other hand, if DFDL mapped to Drill's existing schema description,\r\nthen DFDL could be used with our existing readers and there would be just\r\none schema description sent to readers: Drill's existing provided schema\r\nformat that EVF can already consume. At present, just a few formats support\r\nprovided schema in the Calcite layer: CSV for sure, maybe JSON?\r\n\r\nAny thoughts on where this kind of thing might evolve with DFDL in the\r\npicture?\r\n\r\nThanks,\r\n\r\n- Paul\r\n\r\n\r\nOn Tue, Jan 2, 2024 at 8:00â€¯AM Mike Beckerle ***@***.***>\r\nwrote:\r\n\r\n> @cgivre <https://github.com/cgivre> yes, the next architectural-level\r\n> issue is how to get a compiled DFDL schema out to everyplace Drill will run\r\n> a Daffodil parse. Every one of those JVMs needs to reload it.\r\n>\r\n> I'll do the various cleanups and such. The one issue I don't know how to\r\n> fix is the \"typed setter\" vs. (set-object) issue, so if you could steer me\r\n> in the right direction on that it would help.\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/drill/pull/2836#issuecomment-1874213780>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AAYZF4MFVRCUYDCKJYSKKYTYMQVLFAVCNFSM6AAAAAA576F7J2VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQNZUGIYTGNZYGA>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1874845274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875133737","html_url":"https://github.com/apache/drill/pull/2866#issuecomment-1875133737","issue_url":"https://api.github.com/repos/apache/drill/issues/2866","id":1875133737,"node_id":"IC_kwDOAFa5xc5vxEUp","user":{"login":"Lceeba","id":11688894,"node_id":"MDQ6VXNlcjExNjg4ODk0","avatar_url":"https://avatars.githubusercontent.com/u/11688894?v=4","gravatar_id":"","url":"https://api.github.com/users/Lceeba","html_url":"https://github.com/Lceeba","followers_url":"https://api.github.com/users/Lceeba/followers","following_url":"https://api.github.com/users/Lceeba/following{/other_user}","gists_url":"https://api.github.com/users/Lceeba/gists{/gist_id}","starred_url":"https://api.github.com/users/Lceeba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lceeba/subscriptions","organizations_url":"https://api.github.com/users/Lceeba/orgs","repos_url":"https://api.github.com/users/Lceeba/repos","events_url":"https://api.github.com/users/Lceeba/events{/privacy}","received_events_url":"https://api.github.com/users/Lceeba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T10:19:05Z","updated_at":"2024-01-03T10:19:05Z","author_association":"NONE","body":"Unsubscribe\r\n\r\nOn Wed, 3 Jan, 2024, 13:41 James Turton, ***@***.***> wrote:\r\n\r\n> DRILL-8415 <https://issues.apache.org/jira/browse/DRILL-8415>: Upgrade\r\n> Jackson 2.14.3 â†’ 2.16.1 Description\r\n>\r\n> The following should be investigated before merging.\r\n>\r\n> There are some security focused enhancements including a new class called\r\n> StreamReadConstraints. The defaults on StreamReadConstraints\r\n> <https://javadoc.io/static/com.fasterxml.jackson.core/jackson-core/2.15.0-rc1/com/fasterxml/jackson/core/StreamReadConstraints.html>\r\n> are pretty high but it is not inconceivable that some Drill users might\r\n> need to relax them. Parsing large strings as numbers is sub-quadratic, thus\r\n> the default limit of 1000 chars or bytes (depending on input context).\r\n>\r\n> When the Drill team consider upgrading to Jackson 2.15 or above, you might\r\n> also want to consider adding some way for users to configure the\r\n> StreamReadConstraints.\r\n>\r\n> Documentation\r\n>\r\n> N/A\r\n> Testing\r\n>\r\n> Unit tests pass.\r\n> ------------------------------\r\n> You can view, comment on, or merge this pull request online at:\r\n>\r\n>   https://github.com/apache/drill/pull/2866\r\n> Commit Summary\r\n>\r\n>    - 827521f\r\n>    <https://github.com/apache/drill/pull/2866/commits/827521f07f27f6d3bae47c41b057d5489e8106a1>\r\n>    Upgrade Jackson 2.14.3 â†’ 2.16.1.\r\n>\r\n> File Changes\r\n>\r\n> (1 file <https://github.com/apache/drill/pull/2866/files>)\r\n>\r\n>    - *M* pom.xml\r\n>    <https://github.com/apache/drill/pull/2866/files#diff-9c5fb3d1b7e3b0f54bc5c4182965c4fe1f9023d449017cece3005d3f90e8e4d8>\r\n>    (2)\r\n>\r\n> Patch Links:\r\n>\r\n>    - https://github.com/apache/drill/pull/2866.patch\r\n>    - https://github.com/apache/drill/pull/2866.diff\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/drill/pull/2866>, or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACZFXPXLDZDST7EC5F5TWEDYMUHDDAVCNFSM6AAAAABBLB6LK2VHI2DSMVQWIX3LMV43ASLTON2WKOZSGA3DGNBWGIZTCOA>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875133737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875413801","html_url":"https://github.com/apache/drill/pull/2853#issuecomment-1875413801","issue_url":"https://api.github.com/repos/apache/drill/issues/2853","id":1875413801,"node_id":"IC_kwDOAFa5xc5vyIsp","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T14:00:24Z","updated_at":"2024-01-03T14:00:24Z","author_association":"CONTRIBUTOR","body":"@jnturton Do you have any thoughts here?  This seems like this would be a good PR to get into the bug fix release.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875413801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875818235","html_url":"https://github.com/apache/drill/pull/2860#issuecomment-1875818235","issue_url":"https://api.github.com/repos/apache/drill/issues/2860","id":1875818235,"node_id":"IC_kwDOAFa5xc5vzrb7","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T18:52:59Z","updated_at":"2024-01-03T18:52:59Z","author_association":"CONTRIBUTOR","body":"@jnturton \r\nI'd like to include DRILL-8470, and possibly DRILL-8415 and DRILL-8465 in this.  What do you think?  I'm on the fence about DRILL-8465 as that does seem like more of a new feature.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1875818235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877814024","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1877814024","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1877814024,"node_id":"IC_kwDOAFa5xc5v7SsI","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T21:56:37Z","updated_at":"2024-01-04T21:56:37Z","author_association":"CONTRIBUTOR","body":"Let me respond between the paragraphs....\r\n\r\nOn Tue, Jan 2, 2024 at 11:49â€¯PM Paul Rogers ***@***.***>\r\nwrote:\r\n\r\n> Hi Mike,\r\n>\r\n> Just jumping in with a random thought. Drill has accumulated a number of\r\n> schema systems: Parquet metadata cache, HMS, Drill's own metastore,\r\n> \"provided schema\", and now DFDL. All provide ways of defining data: be it\r\n> Parquet, JSON, CSV or whatever. One can't help but wonder, should some\r\n> future version try to reduce this variation somewhat? Maybe map all the\r\n> variations to DFDL? Map DFDL to Drill's own mechanisms?\r\n>\r\n> Well we can dream can't we :-)\r\n\r\nI can contribute the ideas in\r\nhttps://daffodil.apache.org/dev/design-notes/Proposed-DFDL-Standard-Profile.md\r\nwhich\r\nis an effort to restrict the DFDL language so that schemas written in DFDL\r\ncan work more smoothly with Drill, NiFi, Spark, Flink, Beam, etc. etc.\r\n\r\nDFDL's data model is too restrictive to be \"the model\" for Drill since\r\nDrill wants to query even unstructured data like XML without schema. DFDL's\r\ndata model is targeted only at structured data.\r\n\r\nDrill's data model and APIs seem optimized for streaming block-buffered\r\ntop-level rows of data (the EVF API does anyway). Top level row-sets are\r\nfirst-class citizens, as are the fields of said rows. Fields containing\r\narrays of maps (possibly containing more arrays of maps, and so on deeply\r\nnested) are not handled uniformly with the same block-buffered \"row-like\"\r\nmechanisms. The APIs are similar, but not polymorphic. I suspect that the\r\nblock-buffered data streaming in Drill only happens for top-level rows,\r\nbecause there is no test for whether or not you are allowed to create\r\nanother array item like there is a test for creating another row in a\r\nrow-set writer. There is no control inversion where an adapter must give\r\nback control to Drill in the middle of trying to write an array.\r\n\r\nThe current Drill/Daffodil interface I've created doesn't cope with\r\nheader-body* files (ex: PCAP which format has a header record, then\r\nrepeating packet records) as it has no way of returning just the body\r\nrecords as top level rows. So while there exists a DFDL schema for PCAP,\r\nyou really do want to use a dedicated PCAP Drill adapter which hands back\r\nrows, not Daffodil which will parse the entire PCAP file into one huge row\r\ncontaining a monster sub-array of packets, where each packet is a map\r\nwithin the array of maps. This is ok for now as many files where DFDL is\r\nused are not like PCAP. They are just repeating records of one format with\r\nno special whole-file header. Eventually we will want to be able to supply\r\na path to tell the Drill/Daffodil interface that you only want the packet\r\narray as the output rows. (This is the unimplemented Daffodil \"onPath(...)\"\r\nAPI feature. We haven't needed this yet for DFDL work in cybersecurity, but\r\nit was anticipated 10+ years back as essential for data integration.)\r\n\r\n\r\n> Drill uses two kinds of metadata: schema definitions and file metadata\r\n> used\r\n> for scan pruning. Schema information could be used at plan time (to\r\n> provide\r\n> column types), but certainly at scan time (to \"discover\" the defined\r\n> schema.) File metadata is used primarily at plan time to work out how to\r\n> distribute work.\r\n\r\n\r\nDFDL has zero notion of file metadata. It doesn't know whether data even\r\ncomes from a file or an open TCP socket. Daffodil/DFDL just sees a\r\njava.io.InputStream.\r\nThe schema it uses for a given file is specified by the API call. Daffodil\r\ndoes nothing itself to try to find or identify any schema.\r\n\r\nSo we're \"blank slate\" on this issue with DFDL.\r\n\r\n\r\n>\r\n>\r\n> A bit of background on scan pruning. Back in the day, it was common to\r\n> have\r\n> thousands or millions of files in Hadoop to scan: this was why tools like\r\n> Drill were distributed: divide and conquer. And, of course, the fastest\r\n> scan is to skip files that we know can't contain the information we want.\r\n> File metadata captures this information outside of the files themselves.\r\n> HMS was the standard solution in the Hadoop days. (Amazon Glue, for S3, is\r\n> evidently based on HMS.)\r\n>\r\n> For example, Drill's Parquet metadata cache, the Drill metastore and HMS\r\n> all provide both schema and file metadata information. The schema\r\n> information mainly helped with schema evolution: over time, different\r\n> files\r\n> have different sets of columns. File metadata provides information *about*\r\n> the file, such as the data ranges stored in each file. For Parquet, we\r\n> might track that '2023-01-Boston.parquet' has data from the\r\n> office='Boston'\r\n> range. (So, no use scanning the file for office='Austin'.) And so on.\r\n>\r\n> With Hadoop HFS, it was customary to use directory structure as a partial\r\n> primary index: our file above would live in the /sales/2023/01 directory,\r\n> for example, and logic chooses the proper set of directories to scan. In\r\n> Drill, it is up to the user to add crufty conditionals on the path name.\r\n> In\r\n> Impala, and other HMS-aware tools, the user just says WHERE order_year =\r\n> 2023 AND order_month = 1, and HMS tells the tool that the order_year and\r\n> order_month columns translate to such-and-so directory paths. Would be\r\n> nice\r\n> if Drill could provide that feature as well, given the proper file\r\n> metadata: in this case, the mapping of column names to path directories\r\n> and\r\n> file names.\r\n\r\n\r\nThe above all makes perfect sense to me, and DFDL schemas are completely\r\northogonal to this.\r\nIf a file naming convention tells *Drill* that it doesn't need to open and\r\nparse some data using Daffodil, great, then *Drill* will not invoke\r\nDaffodil to do so.\r\n\r\nDFDL/Daffodil doesn't know nor care about this.\r\n\r\n\r\n>\r\n> Does DFDL provide only schema information? Does it support versioning so\r\n> that we know that \"old.csv\" lacks the \"version\" column, while \"new.csv\"\r\n> includes that column? Does it also include the kinds of file metadata\r\n> mentioned above?\r\n\r\n\r\nDFDL only provides structural schema information.\r\n\r\nData formats do versioning in a wide variety of ways, so DFDL can't take\r\nany position on how this is done, but many DFDL schemas adapt to multiple\r\nversions of the data formats they describe based on the existence of\r\ndifferent fields or values of those fields. This can only work for formats\r\nwhere there are data fields that identify the versions.\r\n\r\nBut nothing based on file metadata.\r\n\r\n\r\n>\r\n>\r\n> Or, perhaps DFDL is used in a different context in which the files have a\r\n> fixed schema and are small in number? This would fit well the \"desktop\r\n> analytics\" model that Charles and James suggested is where Drill is now\r\n> most commonly used.\r\n\r\n\r\nThe cybersecurity use case is one of the prime motivators for DFDL work.\r\n\r\nOften the cyber gateways are file movers, files arrive spontaneously in\r\nvarious locations, and are moved across the cyber boundary.\r\nThe use cases continue to grow in scale, and some people use Apache NiFi\r\nwith DFDL for large scale such file moving.\r\n\r\nUnlike Drill, these use cases all parse and then re-serialize the data\r\nafter extensive validation and rule-based filtering.\r\n\r\nThe same sort of file-metadata based stuff - ex: rules like all the files\r\nin this directory named X with extension \".dat\" use schema S - all applies\r\nin the cyber-gateway use case.\r\n\r\nApache Daffodil doesn't know anything about this cyber use case however,\r\nnor anything about data integration. Daffodil is actually a quite narrow\r\nlibrary. Stays in its lane.\r\n\r\n\r\n>\r\n>\r\n> The answers might suggest if DFDL can be the universal data description.\r\n> or\r\n> if DFDL applies just to individual file schemas, and Drill would still\r\n> need\r\n> a second system to track schema evolution and file metadata for large\r\n> deployments.\r\n\r\n\r\nYeah. Drill needs a separate system for this. Not at all a DFDL-specific\r\nissue.  DFDL/Daffodil take no position on schema evolution.\r\n\r\nHowever, to Daffodil devs, a DFDL schema is basically source code. We keep\r\nthem in git. They have releases. We package them in jars and use managed\r\ndependency tools to grab them from repositories the same way java code jars\r\nare grabbed by maven.\r\n\r\nOne of my concerns about metadata repositories/registries is that they are\r\nnot thought of as configuration management systems. But DFDL schemas are\r\ncertainly large formal objects that require configuration management.\r\n\r\nFor example, the VMF schema we have is over 180K lines of DFDL \"code\",\r\nspread over hundreds of files. It is actually an assembly composed of\r\nspecific versions of 4 different smaller DFDL schemas and the large corpus\r\nof VMF-specific schema files. There is documentation, analysis reports,\r\netc. that go along with it.\r\n\r\nSo some sort of repository that makes specific schemas available to Drill\r\nmakes sense, but cannot be confused with the configuration management\r\nsystem.\r\n\r\nI quite literally just got a Maven Central/Sonotype account yesterday so\r\nthat I can push some DFDL schemas up to maven central so they can be reused\r\nfrom there via jars.\r\n\r\n\r\n>\r\n>\r\n> Further, if DFDL is kind of a stand-alone thing, with its own reader, then\r\n> we end up with more complexity: the Drill JSON reader and the DFDL JSON\r\n> reader. Same for CSV, etc. JSON is so complex that we'd find ourselves\r\n> telling people that the quirks work one way with the native reader,\r\n> another\r\n> way with DFDL. Plus, the DFDL readers might not handle file splits the\r\n> same\r\n> way,\r\n\r\n\r\nDaffodil knows no concept of \"file splits\". It doesn't even know about\r\nfiles actually. It's just an input byte stream. literally a\r\njava.io.InputStream.\r\n\r\n\r\n> or support the same set of formats that Drill's other readers support,\r\n> and so on. It would be nice to separate the idea of schema description\r\n> from\r\n> reader implementation, so that DFDL can be used as a source of schema for\r\n> any arbitrary reader: both at plan and scan times.\r\n\r\n\r\nThe DFDL/Drill integration converts DFDL-described data directly to Drill\r\nwith no intermediate form like XML nor JSON. One hop. E.g.,\r\n\r\n   drillScalaWriter.setInt(daffodilInfosetElement.getInt());\r\n\r\nThere is no notion of Daffodil \"also\" reading JSON. You wouldn't parse JSON\r\nwith DFDL typically. You would use a JSON library and hopefully a JSON\r\nschema that describes the JSON.\r\nDitto for XML, Google protocol buffers, Avro, etc.\r\n\r\n\r\n>\r\n> If DFDL uses its own readers, then we'd need DFDL reader representations in\r\n\r\n\r\nDFDL is a specific reader, this notion of \"its own readers\" doesn't apply.\r\n\r\n\r\n>\r\n> Calcite, which would pick up DFDL schemas so that the schemas are reliably\r\n> serialized out to each node as part of the physical plan. This is\r\n> possible,\r\n> but it does send us down the two-readers-for-every-format path.\r\n\r\n\r\n\r\n>\r\n\r\nOn the other hand, if DFDL mapped to Drill's existing schema description,\r\n> then DFDL could be used with our existing readers\r\n\r\n\r\nI don't get \"DFDL used with existing readers\".... by \"with\" you mean\r\n\"along-side\" or \"incorporating\"?\r\n\r\n\r\n> and there would be just\r\n> one schema description sent to readers: Drill's existing provided schema\r\n> format that EVF can already consume. At present, just a few formats\r\n> support\r\n> provided schema in the Calcite layer: CSV for sure, maybe JSON?\r\n\r\n\r\nThis is what we need.  The Daffodil/Drill integration walks DFDL metadata\r\nand creates Drill metadata 100% in advance and this should, I think,\r\nautomatically find its way to all the right places without anything else\r\nbeing needed beyond today's Drill behavior.\r\n\r\nBut besides Drill's metadata the Daffodil execution at each node needs to\r\nload up the compiled DFDL schema. That object, which can be several\r\nmegabytes of stuff. Needs to find its way out to all the nodes that need\r\nit.  This I have no idea how we make happen.\r\n\r\n\r\n>\r\n> Any thoughts on where this kind of thing might evolve with DFDL in the\r\n> picture?\r\n>\r\n> Thanks,\r\n>\r\n> - Paul\r\n>\r\n>\r\n> On Tue, Jan 2, 2024 at 8:00â€¯AM Mike Beckerle ***@***.***>\r\n> wrote:\r\n>\r\n> > @cgivre <https://github.com/cgivre> yes, the next architectural-level\r\n> > issue is how to get a compiled DFDL schema out to everyplace Drill will\r\n> run\r\n> > a Daffodil parse. Every one of those JVMs needs to reload it.\r\n> >\r\n> > I'll do the various cleanups and such. The one issue I don't know how to\r\n> > fix is the \"typed setter\" vs. (set-object) issue, so if you could steer\r\n> me\r\n> > in the right direction on that it would help.\r\n> >\r\n> > â€”\r\n> > Reply to this email directly, view it on GitHub\r\n> > <https://github.com/apache/drill/pull/2836#issuecomment-1874213780>, or\r\n> > unsubscribe\r\n> > <\r\n> https://github.com/notifications/unsubscribe-auth/AAYZF4MFVRCUYDCKJYSKKYTYMQVLFAVCNFSM6AAAAAA576F7J2VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQNZUGIYTGNZYGA>\r\n>\r\n> > .\r\n> > You are receiving this because you were mentioned.Message ID:\r\n> > ***@***.***>\r\n> >\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/drill/pull/2836#issuecomment-1874845274>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AALUDA4H366DXIG2RATIV4TYMTPLHAVCNFSM6AAAAAA576F7J2VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQNZUHA2DKMRXGQ>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877814024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877915796","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1877915796","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1877915796,"node_id":"IC_kwDOAFa5xc5v7riU","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T23:48:28Z","updated_at":"2024-01-04T23:48:28Z","author_association":"CONTRIBUTOR","body":"This is ready for a next review. All the scalar types are now implemented with typed setter calls. \r\n\r\nThe prior review comments have all been addressed I believe.\r\n\r\nRemaining things to do include:\r\n\r\n1. How to get the compiled DFDL schema object so it can be loaded by daffodil out at the distributed Drill nodes.\r\n2. Test of nilled values (and more tests generally to show deeply nested and repeating nested objects work.)\r\n3. Errors - revisit every place errors are detected or thrown to make sure these are being done the right way for DFDL schema compilation and runtime errors as well. \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877915796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877962587","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1877962587","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1877962587,"node_id":"IC_kwDOAFa5xc5v729b","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T00:48:48Z","updated_at":"2024-01-05T00:48:48Z","author_association":"CONTRIBUTOR","body":"@mbeckerle I had a thought about your TODO list.   See inline.\r\n\r\n> This is ready for a next review. All the scalar types are now implemented with typed setter calls.\r\n> \r\n> The prior review comments have all been addressed I believe.\r\n> \r\n> Remaining things to do include:\r\n> \r\n> 1. How to get the compiled DFDL schema object so it can be loaded by daffodil out at the distributed Drill nodes.\r\n\r\nI was thinking about this and I remembered something that might be useful.  Drill has support for User Defined Functions (UDF) which are written in Java.  To add a UDF to Drill, you also have to write some Java classes in a particular way, and include the JARs.   Much like the DFDL class files, the UDF JARs must be accessible to all nodes of a Drill cluster. \r\n\r\nAdditionally, Drill has the capability of adding UDFs dynamically.   This feature was added here: https://github.com/apache/drill/pull/574.  Anyway, I wonder if we could use a similar mechanism to load and store the DFDL files so that they are accessible to all Drill nodes.  What do you think?\r\n\r\n\r\n> 2. Test of nilled values (and more tests generally to show deeply nested and repeating nested objects work.)\r\n> 3. Errors - revisit every place errors are detected or thrown to make sure these are being done the right way for DFDL schema compilation and runtime errors as well.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1877962587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878400693","html_url":"https://github.com/apache/drill/pull/2853#issuecomment-1878400693","issue_url":"https://api.github.com/repos/apache/drill/issues/2853","id":1878400693,"node_id":"IC_kwDOAFa5xc5v9h61","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T09:53:02Z","updated_at":"2024-01-05T10:01:42Z","author_association":"CONTRIBUTOR","body":"I've started looking at this. First question: if we're adding dynamically loaded class checks to protect against untrusted code then is checking the package name worth much? Or do we need to do something like verify signatures against a list of trusted keys? Second question: if this is about security then is the code we're loading actually untrusted or is it only ever loaded from serialisations that we produced ourselves (e.g. in IcebergWorkSerializer)?\r\n\r\nP.S. Please include this \"Why we're doing this\" background that I'm lacking in the Jira issue when it's nontrivial.\r\n\r\nEDIT: I've just seen the _security_ label on this PR so that gives some clue. There's also a _Security_ \"component\" in Jira that we should add to the issue (and the background mentioned above)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878400693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878512092","html_url":"https://github.com/apache/drill/pull/2853#issuecomment-1878512092","issue_url":"https://api.github.com/repos/apache/drill/issues/2853","id":1878512092,"node_id":"IC_kwDOAFa5xc5v99Hc","user":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T11:21:16Z","updated_at":"2024-01-05T11:21:47Z","author_association":"CONTRIBUTOR","body":"The short background to this in this link -  https://lists.apache.org/thread/vpjz467rg8449m63v1n9nl3o56twwyzt (a private thread requiring ASF login).\r\n\r\nI'm no expert on Iceberg or the Drill Iceberg Plugin but I was hoping to maybe engage with someone who knows more about how they work and to get an understanding of whether we need some constraints. Due to the security aspect of this, I'm not too comfortable going into more detail here.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878512092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878847019","html_url":"https://github.com/apache/drill/pull/2853#issuecomment-1878847019","issue_url":"https://api.github.com/repos/apache/drill/issues/2853","id":1878847019,"node_id":"IC_kwDOAFa5xc5v_O4r","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T15:25:43Z","updated_at":"2024-01-05T15:25:43Z","author_association":"CONTRIBUTOR","body":"Got it @pjfanning. Let's discuss further in the right forum.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878847019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878896878","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1878896878","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1878896878,"node_id":"IC_kwDOAFa5xc5v_bDu","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T16:01:56Z","updated_at":"2024-01-05T16:01:56Z","author_association":"CONTRIBUTOR","body":"> @mbeckerle I had a thought about your TODO list. See inline.\r\n> \r\n> > This is ready for a next review. All the scalar types are now implemented with typed setter calls.\r\n> > The prior review comments have all been addressed I believe.\r\n> > Remaining things to do include:\r\n> > \r\n> > 1. How to get the compiled DFDL schema object so it can be loaded by daffodil out at the distributed Drill nodes.\r\n> \r\n> I was thinking about this and I remembered something that might be useful. Drill has support for User Defined Functions (UDF) which are written in Java. To add a UDF to Drill, you also have to write some Java classes in a particular way, and include the JARs. Much like the DFDL class files, the UDF JARs must be accessible to all nodes of a Drill cluster.\r\n> \r\n> Additionally, Drill has the capability of adding UDFs dynamically. This feature was added here: #574. Anyway, I wonder if we could use a similar mechanism to load and store the DFDL files so that they are accessible to all Drill nodes. What do you think?\r\n\r\nExcellent: So drill has all the machinery, it's just a question of repackaging it so it's available for this usage pattern, which is a bit different from Drill's UDFs, but also very similar. \r\n\r\nThere are two user scenarios which we can call production and test.\r\n\r\n1. Production: binary compiled DFDL schema file + code jars for Daffodil's own UDFs and \"layers\" plugins. This should, ideally, cache the compiled schema and not reload it for every query (at every node), but keep the same loaded instance in memory in a persistant JVM image on each node. For large production DFDL schemas this is the only sensible mechanism as it can take minutes to compile large DFDL schemas. \r\n\r\n2. Test: on-the-fly centralized compilation of DFDL schema (from a combination of jars and files) to create and cache (to avoid recompiling) the binary compiled DFDL schema file. Then using that compiled binary file, as item 1. For small DFDL schemas this can be fast enough for production use. Ideally, if the DFDL schema is unchanged this would reuse the compiled binary file, but that's an optimization that may not matter much. \r\n\r\nKinds of objects involved are:\r\n\r\n- Daffodil plugin code jars\r\n- DFDL schema jars\r\n- DFDL schema files (just not packaged into a jar)\r\n- Daffodil compiled schema binary file\r\n- Daffodil config file - parameters, tunables, and options needed at compile time and/or runtime\r\n\r\nCode jars: Daffodil provides two extension features for DFDL users - DFDL UDFs and DFDL 'layers' (ex: plug-ins for uudecode, or gunzip algorithms used in part of the data format). Those are ordinary compiled class files in jars, so in all scenarios those jars are needed on the node class path if the DFDL schema uses them. Daffodil dynamically finds and loads these from the classpath in regular Java Service-Provider Interface (SPI) mechanisms. \r\n\r\nSchema jars: Daffodil packages DFDL schema files (source files i.e., mySchema.dfdl.xsd) into jar files to allow inter-schema dependencies to be managed using ordinary jar/java-style managed dependencies. Tools like sbt and maven can express the dependencies of one schema on another, grab and pull them together, etc. Daffodil has a resolver so when one schema file referenes another with include/import it searches the class path directories and jars for the files. \r\n\r\nSchema jars are only needed centrally when compiling the schema to a binary file. All references to the jar files for inter-schema file references are compiled into the compiled binary file. \r\n\r\nIt is possible for one DFDL schema 'project' to define a DFDL schema, along with the code for a plugin like a Daffodil UDF or layer. In that case the one jar created is both a code jar and a schema jar. The schema jar aspects are used when the schema is compiled and ignored at Daffodil runtime. The code jar aspects are used at Daffodil run time and ignored at schema compilation time. So such a jar that is both code and schema jar needs to be on the class path in both places, but there's no interaction of the two things. \r\n\r\nBinary Compiled Schema File: Centrally, DFDL schemas in files and/or jars are compiled to create a single binary object which can be reloaded in order to actually use the schema to parse/unparse data. \r\n\r\n- These binary files are tied to a specific version+build of Daffodil. (They are just a java object serialization of the runtime data structures used by Daffodil). \r\n- Once reloaded into a JVM to create a Daffodil DataProcessor object, that object is read-only so thread safe, and can be shared by parse calls happening on many threads. \r\n\r\nDaffodil Config File: This contains settings like what warnings to suppress when compiling and/or at runtime, tunables, such as how large to allow a regex match attempt, maximum parsed data size limit, etc. This also is needed both at schema compile and at runtime, as the same file contains parameters for both DFDL schema compile time and runtime.  \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1878896878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1879917039","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1879917039","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1879917039,"node_id":"IC_kwDOAFa5xc5wDUHv","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-07T02:22:30Z","updated_at":"2024-01-07T02:22:30Z","author_association":"CONTRIBUTOR","body":"Once we merge this, we should also rebase https://github.com/apache/drill/pull/2515 on the current master and merge that as well. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1879917039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880109717","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1880109717","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1880109717,"node_id":"IC_kwDOAFa5xc5wEDKV","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-07T16:46:32Z","updated_at":"2024-01-07T16:46:32Z","author_association":"CONTRIBUTOR","body":"@mbeckerle \r\nWith respect to style, I tried to reply to that comment, but the thread won't let me.   In any event, Drill classes will typically start with the constructor, then have whatever methods are appropriate for the class.  The logger creation usually happens before the constructor.  I think all of your other classes followed this format, so the one or two that didn't kind of jumped out at me. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880109717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880110452","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1880110452","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1880110452,"node_id":"IC_kwDOAFa5xc5wEDV0","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-07T16:49:41Z","updated_at":"2024-01-07T16:49:41Z","author_association":"CONTRIBUTOR","body":"> > @mbeckerle I had a thought about your TODO list. See inline.\r\n> > > This is ready for a next review. All the scalar types are now implemented with typed setter calls.\r\n> > > The prior review comments have all been addressed I believe.\r\n> > > Remaining things to do include:\r\n> > > \r\n> > > 1. How to get the compiled DFDL schema object so it can be loaded by daffodil out at the distributed Drill nodes.\r\n> > \r\n> > \r\n> > I was thinking about this and I remembered something that might be useful. Drill has support for User Defined Functions (UDF) which are written in Java. To add a UDF to Drill, you also have to write some Java classes in a particular way, and include the JARs. Much like the DFDL class files, the UDF JARs must be accessible to all nodes of a Drill cluster.\r\n> > Additionally, Drill has the capability of adding UDFs dynamically. This feature was added here: #574. Anyway, I wonder if we could use a similar mechanism to load and store the DFDL files so that they are accessible to all Drill nodes. What do you think?\r\n> \r\n> Excellent: So drill has all the machinery, it's just a question of repackaging it so it's available for this usage pattern, which is a bit different from Drill's UDFs, but also very similar.\r\n> \r\n> There are two user scenarios which we can call production and test.\r\n> \r\n> 1. Production: binary compiled DFDL schema file + code jars for Daffodil's own UDFs and \"layers\" plugins. This should, ideally, cache the compiled schema and not reload it for every query (at every node), but keep the same loaded instance in memory in a persistant JVM image on each node. For large production DFDL schemas this is the only sensible mechanism as it can take minutes to compile large DFDL schemas.\r\n> 2. Test: on-the-fly centralized compilation of DFDL schema (from a combination of jars and files) to create and cache (to avoid recompiling) the binary compiled DFDL schema file. Then using that compiled binary file, as item 1. For small DFDL schemas this can be fast enough for production use. Ideally, if the DFDL schema is unchanged this would reuse the compiled binary file, but that's an optimization that may not matter much.\r\n> \r\n> Kinds of objects involved are:\r\n> \r\n> * Daffodil plugin code jars\r\n> * DFDL schema jars\r\n> * DFDL schema files (just not packaged into a jar)\r\n> * Daffodil compiled schema binary file\r\n> * Daffodil config file - parameters, tunables, and options needed at compile time and/or runtime\r\n> \r\n> Code jars: Daffodil provides two extension features for DFDL users - DFDL UDFs and DFDL 'layers' (ex: plug-ins for uudecode, or gunzip algorithms used in part of the data format). Those are ordinary compiled class files in jars, so in all scenarios those jars are needed on the node class path if the DFDL schema uses them. Daffodil dynamically finds and loads these from the classpath in regular Java Service-Provider Interface (SPI) mechanisms.\r\n> \r\n> Schema jars: Daffodil packages DFDL schema files (source files i.e., mySchema.dfdl.xsd) into jar files to allow inter-schema dependencies to be managed using ordinary jar/java-style managed dependencies. Tools like sbt and maven can express the dependencies of one schema on another, grab and pull them together, etc. Daffodil has a resolver so when one schema file referenes another with include/import it searches the class path directories and jars for the files.\r\n> \r\n> Schema jars are only needed centrally when compiling the schema to a binary file. All references to the jar files for inter-schema file references are compiled into the compiled binary file.\r\n> \r\n> It is possible for one DFDL schema 'project' to define a DFDL schema, along with the code for a plugin like a Daffodil UDF or layer. In that case the one jar created is both a code jar and a schema jar. The schema jar aspects are used when the schema is compiled and ignored at Daffodil runtime. The code jar aspects are used at Daffodil run time and ignored at schema compilation time. So such a jar that is both code and schema jar needs to be on the class path in both places, but there's no interaction of the two things.\r\n> \r\n> Binary Compiled Schema File: Centrally, DFDL schemas in files and/or jars are compiled to create a single binary object which can be reloaded in order to actually use the schema to parse/unparse data.\r\n> \r\n> * These binary files are tied to a specific version+build of Daffodil. (They are just a java object serialization of the runtime data structures used by Daffodil).\r\n> * Once reloaded into a JVM to create a Daffodil DataProcessor object, that object is read-only so thread safe, and can be shared by parse calls happening on many threads.\r\n> \r\n> Daffodil Config File: This contains settings like what warnings to suppress when compiling and/or at runtime, tunables, such as how large to allow a regex match attempt, maximum parsed data size limit, etc. This also is needed both at schema compile and at runtime, as the same file contains parameters for both DFDL schema compile time and runtime.\r\n\r\n@mbeckerle Would you want to chat sometime next week and I can walk you through the UDF architecture?  I don't know how relevant it would be, but you'd at least see how things are installed and so forth.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880110452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880146814","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1880146814","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1880146814,"node_id":"IC_kwDOAFa5xc5wEMN-","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-07T19:18:20Z","updated_at":"2024-01-07T19:18:20Z","author_association":"CONTRIBUTOR","body":"Thanks @cgivre for the comments and review. @luocooong, I'll commit this. When convenient, please see if this addresses the issue you raised long ago. Otherwise, these capabilities are available for the next person who is seduced into trying out the UNION-based types. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880146814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880406941","html_url":"https://github.com/apache/drill/pull/2866#issuecomment-1880406941","issue_url":"https://api.github.com/repos/apache/drill/issues/2866","id":1880406941,"node_id":"IC_kwDOAFa5xc5wFLud","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T05:30:47Z","updated_at":"2024-01-08T05:30:47Z","author_association":"CONTRIBUTOR","body":"I starting adding congifuration support for the new StreamReadConstraints, first globally and then just in the JSON reader, but I got stopped by a sense of YAGNI. It's hard to imagine someone who will need something beyond the default values in Jackson and more configuration is more complexity that users must contend with. So my opinion at this point is that we should only add that configurability if someone asks for it...","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880406941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880407190","html_url":"https://github.com/apache/drill/pull/2866#issuecomment-1880407190","issue_url":"https://api.github.com/repos/apache/drill/issues/2866","id":1880407190,"node_id":"IC_kwDOAFa5xc5wFLyW","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T05:31:11Z","updated_at":"2024-01-08T05:31:11Z","author_association":"CONTRIBUTOR","body":"@jnturton This looks good however there is a merge conflict.   Can you please resolve so that we can run the CI?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880407190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880408041","html_url":"https://github.com/apache/drill/pull/2866#issuecomment-1880408041","issue_url":"https://api.github.com/repos/apache/drill/issues/2866","id":1880408041,"node_id":"IC_kwDOAFa5xc5wFL_p","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T05:32:25Z","updated_at":"2024-01-08T05:32:25Z","author_association":"CONTRIBUTOR","body":"I haven't rebased this yet in case we decide to squash the WIP commits that were merged into master. Once a decision is made either way this can be rebased and a CI run obtained.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880408041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880409413","html_url":"https://github.com/apache/drill/pull/2866#issuecomment-1880409413","issue_url":"https://api.github.com/repos/apache/drill/issues/2866","id":1880409413,"node_id":"IC_kwDOAFa5xc5wFMVF","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T05:34:30Z","updated_at":"2024-01-08T05:34:30Z","author_association":"CONTRIBUTOR","body":"> I haven't rebased this yet in case we decide to squash the WIP commits that were merged into master. Once a decision is made either way this can be rebased and a CI run obtained.\r\n\r\nI'm fine with leaving the WIP commits as long as we don't make a habit out of it.  It's probably more of a hassle to undo the PR, squash the commits and re-merge them. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880409413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880450409","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1880450409","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1880450409,"node_id":"IC_kwDOAFa5xc5wFWVp","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T06:34:11Z","updated_at":"2024-01-08T06:42:08Z","author_association":"CONTRIBUTOR","body":"I think we can regard this as a bug fix to framework code already in use in 1.21 and therefore backport it.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880450409/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880502847","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1880502847","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1880502847,"node_id":"IC_kwDOAFa5xc5wFjI_","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T07:34:52Z","updated_at":"2024-01-08T07:34:52Z","author_association":"CONTRIBUTOR","body":"Backporting should be safe: as safe as having the change in master itself.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1880502847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1881965757","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1881965757","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1881965757,"node_id":"IC_kwDOAFa5xc5wLIS9","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T23:11:30Z","updated_at":"2024-01-08T23:11:30Z","author_association":"CONTRIBUTOR","body":"I successfully squashed the commits, and provided a proper commit message, while preserving the later commit. Did a force push to master to rewrite history.\r\n\r\nYou should update your own master to pick up the revised history.\r\n\r\n@cgivre, the `.asf.yaml` file you mentioned has lots of metadata, but does not actually prevent a force push. Perhaps we are missing something? It would generally be a good idea to forbid such things to prevent catastrophic mistakes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1881965757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882148031","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1882148031","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1882148031,"node_id":"IC_kwDOAFa5xc5wL0y_","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T01:51:04Z","updated_at":"2024-01-09T01:51:04Z","author_association":"CONTRIBUTOR","body":"> I successfully squashed the commits, and provided a proper commit message, while preserving the later commit. Did a force push to master to rewrite history.\r\n> \r\n> You should update your own master to pick up the revised history.\r\n\r\nYou are a braver man than I. \r\n\r\n> \r\n> @cgivre, the `.asf.yaml` file you mentioned has lots of metadata, but does not actually prevent a force push. Perhaps we are missing something? It would generally be a good idea to forbid such things to prevent catastrophic mistakes.\r\n\r\nThanks for flagging... I'm not sure how to do that, but I'll investigate.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882148031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882168615","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1882168615","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1882168615,"node_id":"IC_kwDOAFa5xc5wL50n","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T02:02:08Z","updated_at":"2024-01-09T02:02:08Z","author_association":"CONTRIBUTOR","body":"I think I hosed the version control somehow.... This PR should only modify a few files in the HDF5 reader. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882168615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882246203","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1882246203","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1882246203,"node_id":"IC_kwDOAFa5xc5wMMw7","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T02:43:21Z","updated_at":"2024-01-09T02:43:21Z","author_association":"CONTRIBUTOR","body":"It seems you did this work on top of the master with my unsquashed commits. When you try to push, those commits come along for the ride. I think you should grab the latest master, then rebase your branch on it.\r\n\r\nPlan B is to a) grab the latest master, and b) create a new branch that cherry-picks the  commit(s) you meant to add.\r\n\r\nIf even this doesn't work, then I'll clean up this branch for you since I created the mess in the first place...","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882246203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882377677","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1882377677","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1882377677,"node_id":"IC_kwDOAFa5xc5wMs3N","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T04:01:03Z","updated_at":"2024-01-09T04:01:03Z","author_association":"CONTRIBUTOR","body":"@paul-rogers I attempted to fix.  I kind of suck at git, so I think it's more or less correct now, but there was probably a better way to do this.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882377677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882389703","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1882389703","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1882389703,"node_id":"IC_kwDOAFa5xc5wMvzH","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T04:20:10Z","updated_at":"2024-01-09T04:20:10Z","author_association":"CONTRIBUTOR","body":"> @paul-rogers I attempted to fix. I kind of suck at git, so I think it's more or less correct now, but there was probably a better way to do this.\r\n\r\nI think you still want something like\r\n```\r\ngit pull --rebase upstream master\r\ngit push --force-with-lease\r\n```","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882389703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882403741","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1882403741","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1882403741,"node_id":"IC_kwDOAFa5xc5wMzOd","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T04:42:29Z","updated_at":"2024-01-09T04:42:29Z","author_association":"CONTRIBUTOR","body":" I see Git's \"patch contents already upstream\" feature doesn't automatically clean up the unwanted commits. I've dropped them manually in a new branch in my fork and now suggest\r\n ```\r\ngit reset --hard origin/master\r\ngit pull --rebase https://github.com/jnturton/drill.git 8188-hdf5-evf2\r\ngit push --force # to luocooong's fork\r\n```","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882403741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882408865","html_url":"https://github.com/apache/drill/pull/2867#issuecomment-1882408865","issue_url":"https://api.github.com/repos/apache/drill/issues/2867","id":1882408865,"node_id":"IC_kwDOAFa5xc5wM0eh","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T04:49:27Z","updated_at":"2024-01-09T04:49:27Z","author_association":"CONTRIBUTOR","body":"> @cgivre, the `.asf.yaml` file you mentioned has lots of metadata, but does not actually prevent a force push. Perhaps we are missing something? It would generally be a good idea to forbid such things to prevent catastrophic mistakes.\r\n\r\nOh that's interesting. Something's changed since I last went through this with @vvysotskyi to do something that could only be done on master, perhaps testing of the automatic snapshot artifact publishing which requires access to GitHub Actions secrets.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882408865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882477665","html_url":"https://github.com/apache/drill/pull/2868#issuecomment-1882477665","issue_url":"https://api.github.com/repos/apache/drill/issues/2868","id":1882477665,"node_id":"IC_kwDOAFa5xc5wNFRh","user":{"login":"CalvinKirs","id":16631152,"node_id":"MDQ6VXNlcjE2NjMxMTUy","avatar_url":"https://avatars.githubusercontent.com/u/16631152?v=4","gravatar_id":"","url":"https://api.github.com/users/CalvinKirs","html_url":"https://github.com/CalvinKirs","followers_url":"https://api.github.com/users/CalvinKirs/followers","following_url":"https://api.github.com/users/CalvinKirs/following{/other_user}","gists_url":"https://api.github.com/users/CalvinKirs/gists{/gist_id}","starred_url":"https://api.github.com/users/CalvinKirs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CalvinKirs/subscriptions","organizations_url":"https://api.github.com/users/CalvinKirs/orgs","repos_url":"https://api.github.com/users/CalvinKirs/repos","events_url":"https://api.github.com/users/CalvinKirs/events{/privacy}","received_events_url":"https://api.github.com/users/CalvinKirs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T06:23:03Z","updated_at":"2024-01-09T06:23:03Z","author_association":"MEMBER","body":"> Thanks for this! Would you doing the same update in distribution/src/main/resources in this PR?â†³\r\n\r\nSure, this is my negligence, thank you for your reminder. \r\nHowever, it should be noted that our binary package still has license-related issues that need to be addressed.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1882477665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1883165801","html_url":"https://github.com/apache/drill/pull/2868#issuecomment-1883165801","issue_url":"https://api.github.com/repos/apache/drill/issues/2868","id":1883165801,"node_id":"IC_kwDOAFa5xc5wPtRp","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T14:36:40Z","updated_at":"2024-01-09T14:37:02Z","author_association":"CONTRIBUTOR","body":"@CalvinKirs Can you clarify what are the issues with the binary package?  This is the first I'm hearing of this.   We'd definitely like to fix this.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1883165801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1883962208","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1883962208","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1883962208,"node_id":"IC_kwDOAFa5xc5wSvtg","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-09T23:35:43Z","updated_at":"2024-01-09T23:35:43Z","author_association":"CONTRIBUTOR","body":"> @mbeckerle With respect to style, I tried to reply to that comment, but the thread won't let me. In any event, Drill classes will typically start with the constructor, then have whatever methods are appropriate for the class. The logger creation usually happens before the constructor. I think all of your other classes followed this format, so the one or two that didn't kind of jumped out at me.\r\n\r\n@cgivre I believe the style issues are all fixed. The build did not get any codestyle issues. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1883962208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884125647","html_url":"https://github.com/apache/drill/pull/2868#issuecomment-1884125647","issue_url":"https://api.github.com/repos/apache/drill/issues/2868","id":1884125647,"node_id":"IC_kwDOAFa5xc5wTXnP","user":{"login":"CalvinKirs","id":16631152,"node_id":"MDQ6VXNlcjE2NjMxMTUy","avatar_url":"https://avatars.githubusercontent.com/u/16631152?v=4","gravatar_id":"","url":"https://api.github.com/users/CalvinKirs","html_url":"https://github.com/CalvinKirs","followers_url":"https://api.github.com/users/CalvinKirs/followers","following_url":"https://api.github.com/users/CalvinKirs/following{/other_user}","gists_url":"https://api.github.com/users/CalvinKirs/gists{/gist_id}","starred_url":"https://api.github.com/users/CalvinKirs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CalvinKirs/subscriptions","organizations_url":"https://api.github.com/users/CalvinKirs/orgs","repos_url":"https://api.github.com/users/CalvinKirs/repos","events_url":"https://api.github.com/users/CalvinKirs/events{/privacy}","received_events_url":"https://api.github.com/users/CalvinKirs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T03:15:50Z","updated_at":"2024-01-10T03:15:50Z","author_association":"MEMBER","body":"> @CalvinKirs Can you clarify what are the issues with the binary package? This is the first I'm hearing of this. We'd definitely like to fix this.â†³\r\n\r\nHi Charles,\r\n\r\n\r\nI created a ticket [DRILL-8475](https://issues.apache.org/jira/browse/DRILL-8475) and James will work with me to improve the work here.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884125647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884274194","html_url":"https://github.com/apache/drill/pull/2860#issuecomment-1884274194","issue_url":"https://api.github.com/repos/apache/drill/issues/2860","id":1884274194,"node_id":"IC_kwDOAFa5xc5wT74S","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T06:39:10Z","updated_at":"2024-01-10T06:39:10Z","author_association":"CONTRIBUTOR","body":"> @jnturton I'd like to include DRILL-8470, and possibly DRILL-8415 and DRILL-8465 in this. What do you think? I'm on the fence about DRILL-8465 as that does seem like more of a new feature.\r\n\r\n8415 and 8470 are here. 8465 is still in analysis and design. We still need the new 8475 (NOTICE file incomplete) that I marked as a blocker and which is being worked on by @CalvinKirs and me.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884274194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884350260","html_url":"https://github.com/apache/drill/issues/2869#issuecomment-1884350260","issue_url":"https://api.github.com/repos/apache/drill/issues/2869","id":1884350260,"node_id":"IC_kwDOAFa5xc5wUOc0","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T07:54:35Z","updated_at":"2024-01-10T08:29:13Z","author_association":"CONTRIBUTOR","body":"I think this is likely to be due to rate limiting on the API you're querying. Each `FROM http.feed.____` clause you've got is going to result in a separate HTTP request to the API, and probably too many of those are being sent in too short a space of time for the server's liking. I can't remember if @cgivre added a throttling feature to the HTTP plugin but another possibility might be to split the query into a few pieces, which you could separate by delays, using CTAS to keep retrieved data around locally for later queries that rely on it.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884350260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884963377","html_url":"https://github.com/apache/drill/pull/2860#issuecomment-1884963377","issue_url":"https://api.github.com/repos/apache/drill/issues/2860","id":1884963377,"node_id":"IC_kwDOAFa5xc5wWkIx","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T14:33:34Z","updated_at":"2024-01-10T14:33:34Z","author_association":"CONTRIBUTOR","body":"> > @jnturton I'd like to include DRILL-8470, and possibly DRILL-8415 and DRILL-8465 in this. What do you think? I'm on the fence about DRILL-8465 as that does seem like more of a new feature.\r\n> \r\n> 8415 and 8470 are here. 8465 is still in analysis and design. We still need the new 8475 (NOTICE file incomplete) that I marked as a blocker and which is being worked on by @CalvinKirs and me.\r\n\r\nI think we should drop 8465 from 1.21.2.   It sounds like once the notices are done we should be ready to cut a RC!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1884963377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1885006926","html_url":"https://github.com/apache/drill/issues/2869#issuecomment-1885006926","issue_url":"https://api.github.com/repos/apache/drill/issues/2869","id":1885006926,"node_id":"IC_kwDOAFa5xc5wWuxO","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T14:57:07Z","updated_at":"2024-01-10T14:57:07Z","author_association":"CONTRIBUTOR","body":"One more thing... I was wrong.  There are some throttling parameters.   You can set the timeout parameter as well as a retryDelay parameter.  \r\nBest,\r\n-- C\r\n\r\n> On Jan 10, 2024, at 02:54, James Turton ***@***.***> wrote:\r\n> \r\n> \r\n> I think this is likely to be due to rate limiting on the API you're querying. Each FROM http.feed.____ clause you've got is going to result in a separate HTTP request to the API, and probably too many of those are being sent in too short a space of time for the server's liking. I can't remember if @cgivre <https://github.com/cgivre> added a throttling feature to the HTTP plugin but another possibility might be to split the query into a few pieces using CTAS to keep retrieved data around locally for later queries that rely on it.\r\n> \r\n> â€”\r\n> Reply to this email directly, view it on GitHub <https://github.com/apache/drill/issues/2869#issuecomment-1884350260>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/ABKB7PU2W4CRC676LRBAE23YNZCMPAVCNFSM6AAAAABBSY4EASVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQOBUGM2TAMRWGA>.\r\n> You are receiving this because you were mentioned.\r\n> \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1885006926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1885044910","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1885044910","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1885044910,"node_id":"IC_kwDOAFa5xc5wW4Cu","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T15:17:27Z","updated_at":"2024-01-10T15:17:27Z","author_association":"CONTRIBUTOR","body":"@jnturton I did as you suggested.  Would you mind please taking a look?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1885044910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1886695348","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1886695348","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1886695348,"node_id":"IC_kwDOAFa5xc5wdK-0","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T09:20:36Z","updated_at":"2024-01-11T09:20:36Z","author_association":"CONTRIBUTOR","body":"> @paul-rogers I attempted to fix. I kind of suck at git, so I think it's more or less correct now, but there was probably a better way to do this.\r\n\r\nJust workng through the review comments that @paul-rogers left (the ones unrelated to the needed functionality that was missing from EVF2).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1886695348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1887901054","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1887901054","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1887901054,"node_id":"IC_kwDOAFa5xc5whxV-","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T20:18:39Z","updated_at":"2024-01-11T20:18:39Z","author_association":"CONTRIBUTOR","body":"Did the recent EVF revisions allow the tests for this PR to pass? Is there anything that is still missing? Also, did the excitement over my botched merge settle down and are we good now?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1887901054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1888037847","html_url":"https://github.com/apache/drill/pull/2515#issuecomment-1888037847","issue_url":"https://api.github.com/repos/apache/drill/issues/2515","id":1888037847,"node_id":"IC_kwDOAFa5xc5wiSvX","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T22:01:32Z","updated_at":"2024-01-11T22:01:32Z","author_association":"CONTRIBUTOR","body":"> Did the recent EVF revisions allow the tests for this PR to pass? Is there anything that is still missing? Also, did the excitement over my botched merge settle down and are we good now?\r\n\r\nAll the unit tests pass.... whether that means that everything is working.... this plugin has a decent amount of tests, so I'd feel pretty good. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1888037847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1890990577","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1890990577","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1890990577,"node_id":"IC_kwDOAFa5xc5wtjnx","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-14T15:58:05Z","updated_at":"2024-01-14T15:58:05Z","author_association":"CONTRIBUTOR","body":"> > @mbeckerle With respect to style, I tried to reply to that comment, but the thread won't let me. In any event, Drill classes will typically start with the constructor, then have whatever methods are appropriate for the class. The logger creation usually happens before the constructor. I think all of your other classes followed this format, so the one or two that didn't kind of jumped out at me.\r\n> \r\n> @cgivre I believe the style issues are all fixed. The build did not get any codestyle issues.\r\n\r\nThe issue I was referring to was more around the organization of a few classes.  Usually we'll have the constructor (if present) at the top followed by any class methods.  I think there was a class or two where the constructor was at the bottom or something like that.  In any event, consider the issue resolved.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1890990577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1894563055","html_url":"https://github.com/apache/drill/pull/2870#issuecomment-1894563055","issue_url":"https://api.github.com/repos/apache/drill/issues/2870","id":1894563055,"node_id":"IC_kwDOAFa5xc5w7Lzv","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T21:43:56Z","updated_at":"2024-01-16T21:43:56Z","author_association":"CONTRIBUTOR","body":"@jnturton Do we want to back port this PR?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1894563055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1894897087","html_url":"https://github.com/apache/drill/pull/2870#issuecomment-1894897087","issue_url":"https://api.github.com/repos/apache/drill/issues/2870","id":1894897087,"node_id":"IC_kwDOAFa5xc5w8dW_","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T03:56:07Z","updated_at":"2024-01-17T03:56:07Z","author_association":"CONTRIBUTOR","body":"> @jnturton Do we want to back port this PR?\r\n\r\nOne rule of thumb I apply to minor enhancements is \"are the immediate beneficiaries Drill devs or users\"? If they're Drill devs, and I'd vote that they are here, then the change can just as well remain only in master where dev gets done.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1894897087/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1895014726","html_url":"https://github.com/apache/drill/issues/2871#issuecomment-1895014726","issue_url":"https://api.github.com/repos/apache/drill/issues/2871","id":1895014726,"node_id":"IC_kwDOAFa5xc5w86FG","user":{"login":"weijunlu","id":104422448,"node_id":"U_kgDOBjlcMA","avatar_url":"https://avatars.githubusercontent.com/u/104422448?v=4","gravatar_id":"","url":"https://api.github.com/users/weijunlu","html_url":"https://github.com/weijunlu","followers_url":"https://api.github.com/users/weijunlu/followers","following_url":"https://api.github.com/users/weijunlu/following{/other_user}","gists_url":"https://api.github.com/users/weijunlu/gists{/gist_id}","starred_url":"https://api.github.com/users/weijunlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weijunlu/subscriptions","organizations_url":"https://api.github.com/users/weijunlu/orgs","repos_url":"https://api.github.com/users/weijunlu/repos","events_url":"https://api.github.com/users/weijunlu/events{/privacy}","received_events_url":"https://api.github.com/users/weijunlu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T06:24:54Z","updated_at":"2024-01-17T06:24:54Z","author_association":"NONE","body":"add the log and the sql execute plan:\r\n`Caused by: org.apache.drill.exec.ops.QueryCancelledException: null\r\n        at org.apache.drill.exec.work.fragment.FragmentExecutor$ExecutorStateImpl.checkContinue(FragmentExecutor.java:533)\r\n        at org.apache.drill.exec.record.AbstractRecordBatch.checkContinue(AbstractRecordBatch.java:246)\r\n        at org.apache.drill.exec.record.AbstractRecordBatch.next(AbstractRecordBatch.java:100)\r\n        at org.apache.drill.exec.record.AbstractUnaryRecordBatch.innerNext(AbstractUnaryRecordBatch.java:59)\r\n        at org.apache.drill.exec.record.AbstractRecordBatch.next(AbstractRecordBatch.java:160)\r\n        at org.apache.drill.exec.record.RecordIterator.clearInflightBatches(RecordIterator.java:359)\r\n        at org.apache.drill.exec.record.RecordIterator.close(RecordIterator.java:365)\r\n        at org.apache.drill.exec.physical.impl.join.MergeJoinBatch.close(MergeJoinBatch.java:300)\r\n        at org.apache.drill.common.DeferredException.suppressingClose(DeferredException.java:159)\r\n        at org.apache.drill.exec.physical.impl.BaseRootExec.close(BaseRootExec.java:169)\r\n        at org.apache.drill.exec.work.fragment.FragmentExecutor.closeOutResources(FragmentExecutor.java:407)\r\n        at org.apache.drill.exec.work.fragment.FragmentExecutor.cleanup(FragmentExecutor.java:239)\r\n        ... 5 common frames omitted\r\n        Suppressed: org.apache.drill.exec.ops.QueryCancelledException: null\r\n                ... 17 common frames omitted\r\n        Suppressed: java.lang.IllegalStateException: Memory was leaked by query. Memory leaked: (73728)\r\nAllocator(op:2:0:11:MergeJoinPOP) 1000000/73728/4874240/10000000000 (res/actual/peak/limit)\r\n\r\n                at org.apache.drill.exec.memory.BaseAllocator.close(BaseAllocator.java:519)\r\n                at org.apache.drill.exec.ops.BaseOperatorContext.close(BaseOperatorContext.java:159)\r\n                at org.apache.drill.exec.ops.OperatorContextImpl.close(OperatorContextImpl.java:77)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.suppressingClose(FragmentContextImpl.java:595)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.close(FragmentContextImpl.java:585)\r\n                at org.apache.drill.exec.work.fragment.FragmentExecutor.closeOutResources(FragmentExecutor.java:414)\r\n                ... 6 common frames omitted\r\n        Suppressed: java.lang.IllegalStateException: Memory was leaked by query. Memory leaked: (249856)\r\nAllocator(op:2:0:5:MergeJoinPOP) 1000000/249856/9121792/10000000000 (res/actual/peak/limit)\r\n\r\n                at org.apache.drill.exec.memory.BaseAllocator.close(BaseAllocator.java:519)\r\n                at org.apache.drill.exec.ops.BaseOperatorContext.close(BaseOperatorContext.java:159)\r\n                at org.apache.drill.exec.ops.OperatorContextImpl.close(OperatorContextImpl.java:77)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.suppressingClose(FragmentContextImpl.java:595)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.close(FragmentContextImpl.java:585)\r\n                at org.apache.drill.exec.work.fragment.FragmentExecutor.closeOutResources(FragmentExecutor.java:414)\r\n                ... 6 common frames omitted\r\n        Suppressed: java.lang.IllegalStateException: Memory was leaked by query. Memory leaked: (2000000)\r\nAllocator(frag:2:0) 138000000/2000000/165842048/240000000000 (res/actual/peak/limit)\r\n\r\n                at org.apache.drill.exec.memory.BaseAllocator.close(BaseAllocator.java:519)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.suppressingClose(FragmentContextImpl.java:595)\r\n                at org.apache.drill.exec.ops.FragmentContextImpl.close(FragmentContextImpl.java:588)\r\n                at org.apache.drill.exec.work.fragment.FragmentExecutor.closeOutResources(FragmentExecutor.java:414)\r\n                ... 6 common frames omitted\r\n`\r\n<img width=\"545\" alt=\"1705472684713\" src=\"https://github.com/apache/drill/assets/104422448/f0d97f7f-4fea-4176-9936-085a4c390b1d\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1895014726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1895132614","html_url":"https://github.com/apache/drill/issues/2871#issuecomment-1895132614","issue_url":"https://api.github.com/repos/apache/drill/issues/2871","id":1895132614,"node_id":"IC_kwDOAFa5xc5w9W3G","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T06:49:03Z","updated_at":"2024-01-17T06:49:03Z","author_association":"CONTRIBUTOR","body":"@weijunlu, thanks for this report. You've encountered one of the two memory-related issues that confuse many new users of Drill (or Java).\r\n\r\nYour report appears to say that you a) configure direct memory, b) run a query that uses quite a bit of memory, and c) find that Drill has not returned the memory to the OS after the query completes. As it turns out, this is by design.\r\n\r\nDrill uses the Netty memory manager. Nettywill request memory from the OS as needed, but will not release it back. Once the memory is allocated, Netty adds that memory block to a free list inside Drill itself where Drill can reuse it for a later query.\r\n\r\nYou can see this. After you run your first batch of queries, check the direct memory level. Then, without restarting Drill, run the same batch of queries a second time. You should see that the amount of memory allocated to Drill stays about the same: the direct memory was used, released, and then reused -- all within Drill. Memory might grow a bit as explained below.\r\n\r\nNow, it might be possible to release memory back to the OS, but only in a very lightly used system in which there are times when no queries are active. Why? Drill uses a \"binary buddy\" memory allocation starting with blocks of 16MB in size, then slicing memory up into smaller pieces as needed. If any portion of that 16MB is allocated, the 16MB block cannot be released back to the OS. Drill was designed for an environment with heavy usage, in which case every 16MB block will have at least some of its memory in use at all times. Given that environment, it did not make sense to try to free 16MB blocks only to immediately request them again: Drill would just thrash the memory subsystem.\r\n\r\nDrill (actually Netty) will request more memory from the OS once the current set of 16MB blocks become allocated. So, in a busy system, memory will continue to grow. Many people see this and say, \"memory leak!\" But, it is not a leak, it is by design. Drill will continue to allocate memory until it reaches the limit you set in the configuration. If Drill still needs more memory after that, queries will fail with an out-of-memory (OOM) error.\r\n\r\nGiven that Drill is now most often used for smaller use cases, some very clever person might be able to find a way to ask the Netty memory allocator to return to the OS any 16MB block which is entirely free. That's a good enhancement project.\r\n\r\nI mentioned that this is one of two issues that confuse people. The other is the normal Java heap. Java itself will continue to allocate more memory for the heap as Drill runs, up to the configured limit. Java never releases its memory either: the unused memory is simply available on the heap for later reuse within Java.\r\n\r\nThe summary is that Drill will eventually use all the heap and direct memory you allocate to it. Once allocated, the memory will not go back to the OS, even if Drill is idle. This is why it is important to configure the memory level to suite your use case: Drill won't grab and free OS memory based on load.\r\n\r\nFinally, of course, Drill will release all its memory back to the OS when Drill exits. So, if you run a query only every once in a while, simply use a script to bounce the Drill server after it has been idle for a while.\r\n\r\nDoes this make sense?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1895132614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1897860489","html_url":"https://github.com/apache/drill/issues/2871#issuecomment-1897860489","issue_url":"https://api.github.com/repos/apache/drill/issues/2871","id":1897860489,"node_id":"IC_kwDOAFa5xc5xHw2J","user":{"login":"weijunlu","id":104422448,"node_id":"U_kgDOBjlcMA","avatar_url":"https://avatars.githubusercontent.com/u/104422448?v=4","gravatar_id":"","url":"https://api.github.com/users/weijunlu","html_url":"https://github.com/weijunlu","followers_url":"https://api.github.com/users/weijunlu/followers","following_url":"https://api.github.com/users/weijunlu/following{/other_user}","gists_url":"https://api.github.com/users/weijunlu/gists{/gist_id}","starred_url":"https://api.github.com/users/weijunlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weijunlu/subscriptions","organizations_url":"https://api.github.com/users/weijunlu/orgs","repos_url":"https://api.github.com/users/weijunlu/repos","events_url":"https://api.github.com/users/weijunlu/events{/privacy}","received_events_url":"https://api.github.com/users/weijunlu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T06:06:00Z","updated_at":"2024-01-18T06:16:25Z","author_association":"NONE","body":"I run the whole test process again, found that the heap memory reached 94%, no longer release, and then executed the above sql statement, immediately reported an error:\r\n![image](https://github.com/apache/drill/assets/104422448/a9fb6c14-458c-406b-b15b-8e9b044b6a49)\r\n![image](https://github.com/apache/drill/assets/104422448/7b3cd6b0-1b17-435f-98b4-24ce4ec0c554)\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1897860489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898075243","html_url":"https://github.com/apache/drill/issues/2871#issuecomment-1898075243","issue_url":"https://api.github.com/repos/apache/drill/issues/2871","id":1898075243,"node_id":"IC_kwDOAFa5xc5xIlRr","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T09:09:10Z","updated_at":"2024-01-18T09:09:10Z","author_association":"CONTRIBUTOR","body":"@weijunlu, you may have found a bug. The behavior you described is not expected. \r\n\r\nJust to verify I understand: you ran your query once. Did the query run successfully the first time? Or, did your first query fail? If the query _worked_ the first time, we have one situation. If the query _failed_ the first time, we have another situation.\r\n\r\nThen, you ran the _same_ query a second time? This time you got an OOM error?\r\n\r\nI think we may have up to three distinct issues.\r\n\r\nFirst, I missed one important piece of information when I first read this report. You reported an exception: `Memory was leaked by query. Memory leaked: (249856)`. This messages indicates an actual bug. As I explained, Drill won't release the memory back to the OS. But, the query should have released the memory back to Netty. The error message says that it did not. This would be a bug. Even if the query fails, Drill is required to return memory to Netty. Such errors are, unfortunately, hard to track down. Our unit tests have many such checks, but your query appears to have uncovered a case that the unit tests do not check.\r\n\r\nThe stack trace suggests that the memory leak was detected as Drill was trying to shut down a failed query. So, I suspect your query run may not have actually worked. If it did work, you should see in the UI a very detailed report on all the operators in the query. Did you get that detailed report?\r\n\r\nSecond, I wonder if Drill has sufficient memory for the query you are trying to run. The TPCH queries tend to be memory-hungry. This query has six concurrent sorts. Then, it has five merge joins, plus more sorts. While the query runs, all the needed data will be in memory. (It is in memory because Drill uses memory to buffer data to keep things fast.)\r\n\r\nI do not recall the size of a SF1 TPCH data set. What is the total size of the files in your data set?\r\n\r\nBack when we used to run TPCH tests regularly, we would use a cluster of 5 or 10 Drillbits, each with a generous amount of memory, so that Drill can hold the data in memory. I suspect that 2 GB of direct memory, on a single Drillbit, is probably not enough for this kind of query.\r\n\r\nSo, I suspect you need more direct memory. The UI says that you are using only 34% of a 4GB heap, but ~100% of 2GB direct memory. Try changing this allocation. Try allocating 3GB to heap. This will raise heap usage to 45%. Then, give as much memory as your machine has to direct memory. If you are running SqlLine on the same machine, please run it on another machine instead. If you have other services on your machine (a database, an IDE, etc.), I would recommend moving Drill to a dedicated machine. You may even consider using a cluster of machines to provide sufficient resources.\r\n\r\nOnce you get a query that succeeds, you can look at the detailed query profile to find out how much memory it required. Then, you can reduce the direct memory given to Drill to a lower amount, if the query allows.\r\n\r\nOnce you find a memory level that allows the query to run, you will probably avoid the memory leak error. The query will succeed and memory should be freed back to Netty as normal. TPCH SF1 queries used to pass. They should still work, unless something changed in the last couple of years in one of the operators.\r\n\r\nJust to be clear, Drill works well on a laptop with the standard amount of memory _if you run simple queries on small datasets_. But, if you do classic TPCH \"big data\" queries, you need a cluster with enough capacity &mdash; that's why we use Hadoop.\r\n\r\nThe third issue is a minor point: the UI screenshot is a bit odd: it says you are at 94% of direct memory. I suspect you are actually at 100%, and the UI is dividing by the wrong number. (1000 vs. 1024 or some such).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898075243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898813808","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898813808","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898813808,"node_id":"IC_kwDOAFa5xc5xLZlw","user":{"login":"NomadBYlife","id":93082658,"node_id":"U_kgDOBYxUIg","avatar_url":"https://avatars.githubusercontent.com/u/93082658?v=4","gravatar_id":"","url":"https://api.github.com/users/NomadBYlife","html_url":"https://github.com/NomadBYlife","followers_url":"https://api.github.com/users/NomadBYlife/followers","following_url":"https://api.github.com/users/NomadBYlife/following{/other_user}","gists_url":"https://api.github.com/users/NomadBYlife/gists{/gist_id}","starred_url":"https://api.github.com/users/NomadBYlife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NomadBYlife/subscriptions","organizations_url":"https://api.github.com/users/NomadBYlife/orgs","repos_url":"https://api.github.com/users/NomadBYlife/repos","events_url":"https://api.github.com/users/NomadBYlife/events{/privacy}","received_events_url":"https://api.github.com/users/NomadBYlife/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T16:28:11Z","updated_at":"2024-01-18T16:30:40Z","author_association":"NONE","body":"> But it should not be broken if the alias contains any special characters. The issue might be occurring at the MongoDB end, where a key with special characters could be causing the problem. However, this should be handled at the Drill end to create an alias without any special characters.\r\n\r\nHave you found any solution? Totally the same situation. Drill 1.21 superset 3.0.1\r\nThe superset itself automatically sends requests with special characters. for example, in the â€œDrill to detailâ€ functionality on the dashboard","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898813808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898836255","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898836255","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898836255,"node_id":"IC_kwDOAFa5xc5xLfEf","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T16:40:58Z","updated_at":"2024-01-18T16:40:58Z","author_association":"NONE","body":"Yes, I have found a way to resolve this issue !!\r\nKeys with the special characters are the reason for the failure of mongodb query\r\n\r\ni donâ€™t remember the project, class name and method name, will let you know tomorrow !! You will have to modify the existing code of apache drill to make it work\r\n\r\nyou can check the logs once , to get an idea about the stacktrace to get the method where you need to do few modifications!! What i did ? Replaced alias count(*) by count !!  Not valid for all cases, but working for me\r\n\r\nAdditionally, you might get some issues with the filters with daterange for that there is a workaround\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898836255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898838045","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898838045","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898838045,"node_id":"IC_kwDOAFa5xc5xLfgd","user":{"login":"NomadBYlife","id":93082658,"node_id":"U_kgDOBYxUIg","avatar_url":"https://avatars.githubusercontent.com/u/93082658?v=4","gravatar_id":"","url":"https://api.github.com/users/NomadBYlife","html_url":"https://github.com/NomadBYlife","followers_url":"https://api.github.com/users/NomadBYlife/followers","following_url":"https://api.github.com/users/NomadBYlife/following{/other_user}","gists_url":"https://api.github.com/users/NomadBYlife/gists{/gist_id}","starred_url":"https://api.github.com/users/NomadBYlife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NomadBYlife/subscriptions","organizations_url":"https://api.github.com/users/NomadBYlife/orgs","repos_url":"https://api.github.com/users/NomadBYlife/repos","events_url":"https://api.github.com/users/NomadBYlife/events{/privacy}","received_events_url":"https://api.github.com/users/NomadBYlife/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T16:42:02Z","updated_at":"2024-01-18T16:42:02Z","author_association":"NONE","body":"<img width=\"1440\" alt=\"Ð¡Ð½Ð¸Ð¼Ð¾Ðº ÑÐºÑ€Ð°Ð½Ð° 2024-01-18 Ð² 17 31 21\" src=\"https://github.com/apache/drill/assets/93082658/aeeaf6d3-3cc1-401f-9d62-5a07169e5062\">\r\nI tried changing this option. But nothing seems to change in the way queries work.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898838045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898859028","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898859028","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898859028,"node_id":"IC_kwDOAFa5xc5xLkoU","user":{"login":"NomadBYlife","id":93082658,"node_id":"U_kgDOBYxUIg","avatar_url":"https://avatars.githubusercontent.com/u/93082658?v=4","gravatar_id":"","url":"https://api.github.com/users/NomadBYlife","html_url":"https://github.com/NomadBYlife","followers_url":"https://api.github.com/users/NomadBYlife/followers","following_url":"https://api.github.com/users/NomadBYlife/following{/other_user}","gists_url":"https://api.github.com/users/NomadBYlife/gists{/gist_id}","starred_url":"https://api.github.com/users/NomadBYlife/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NomadBYlife/subscriptions","organizations_url":"https://api.github.com/users/NomadBYlife/orgs","repos_url":"https://api.github.com/users/NomadBYlife/repos","events_url":"https://api.github.com/users/NomadBYlife/events{/privacy}","received_events_url":"https://api.github.com/users/NomadBYlife/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T16:54:05Z","updated_at":"2024-01-18T16:54:05Z","author_association":"NONE","body":"> Yes, I have found a way to resolve this issue !! Keys with the special characters are the reason for the failure of mongodb query\r\n> \r\n> i donâ€™t remember the project, class name and method name, will let you know tomorrow !! You will have to modify the existing code of apache drill to make it work\r\n> \r\n> you can check the logs once , to get an idea about the stacktrace to get the method where you need to do few modifications!! What i did ? Replaced alias count(*) by count !! Not valid for all cases, but working for me\r\n> \r\n> Additionally, you might get some issues with the filters with daterange for that there is a workaround\r\n\r\nI will be very grateful if you tell me where to change what. I don't know Java, you'll just save me a lot of time.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898859028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898869429","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898869429","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898869429,"node_id":"IC_kwDOAFa5xc5xLnK1","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T17:00:23Z","updated_at":"2024-01-18T17:00:23Z","author_association":"NONE","body":"Yes Iâ€™ll definitely help you !! \r\n\r\nPlease wait till tomorrow as I dont have access to my workstation now. I will provide you all the issues i have faced so far and their fixes as well !!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898869429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898896941","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898896941","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898896941,"node_id":"IC_kwDOAFa5xc5xLt4t","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T17:16:58Z","updated_at":"2024-01-18T17:16:58Z","author_association":"NONE","body":"For now, you can clone the apache drill git repo in your local environment  and you will need maven installed in your system\r\n\r\nand once cloned, you can import them in your workspace \r\n\r\nIâ€™ll share the screenshots or lines of code along with the project name, class name, method name here tomorrow so that you can amend the changes in the required class and then can use the mvn to build your project i.e jar file for that project \r\n\r\nonce the jar is built , you will have to replace a jar available in lib folder in drill installation package by the built jar \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898896941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898993482","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1898993482","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1898993482,"node_id":"IC_kwDOAFa5xc5xMFdK","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T18:22:44Z","updated_at":"2024-01-18T18:22:44Z","author_association":"CONTRIBUTOR","body":"All, \r\nInstead of copying screen shots of code for this fix, would someone please create a pull request so that everyone will benefit from the fix?\r\nThanks,\r\n-- C\r\n\r\n> On Jan 18, 2024, at 12:17, piyushShama ***@***.***> wrote:\r\n> \r\n> \r\n> For now, you can clone the apache drill git repo in your local environment and you will need maven installed in your system\r\n> \r\n> and once cloned, you can import them in your workspace\r\n> \r\n> Iâ€™ll share the screenshots or lines of code along with the project name, class name, method name here tomorrow so that you can amend the changes in the required class and then can use the mvn to build your project i.e jar file for that project\r\n> \r\n> once the jar is built , you will have to replace a jar available in lib folder in drill installation package by the built jar\r\n> \r\n> â€”\r\n> Reply to this email directly, view it on GitHub <https://github.com/apache/drill/issues/2858#issuecomment-1898896941>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/ABKB7PWRKRZKZJI7W4YJORDYPFKJNAVCNFSM6AAAAABBDMY7Q6VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQOJYHA4TMOJUGE>.\r\n> You are receiving this because you commented.\r\n> \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1898993482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1899533885","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1899533885","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1899533885,"node_id":"IC_kwDOAFa5xc5xOJY9","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T02:16:33Z","updated_at":"2024-01-19T02:16:33Z","author_association":"NONE","body":"Yes , will do that over this weekend !!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1899533885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1900045823","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1900045823","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1900045823,"node_id":"IC_kwDOAFa5xc5xQGX_","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T09:23:15Z","updated_at":"2024-01-19T09:23:15Z","author_association":"NONE","body":"@NomadBYlife  the first change will be required in class Foreman.java in project drill/exec/java-exec \r\nMethod: run()\r\nLine no: 268\r\n![IMG_8479](https://github.com/apache/drill/assets/90260638/918bcd4d-70ba-471e-b618-03172561acf5)\r\n\r\nNote: this code is working for all sql based queries. Though it is working for mongodb, it may fail for other plugins !! So you can use it locally, Iâ€™ll try to figure out the actual place in mongodb storage plugin project to implement this logic\r\n\r\nIâ€™ll try to push my changes to the git over this weekend","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1900045823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1900853684","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1900853684","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1900853684,"node_id":"IC_kwDOAFa5xc5xTLm0","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T18:00:29Z","updated_at":"2024-01-19T18:00:29Z","author_association":"CONTRIBUTOR","body":"@piyushShama Have you looked at the SQLAlchemy Driver for Drill?  (https://github.com/JohnOmernik/sqlalchemy-drill) \r\nIMHO, your fix have have gotten the query to work, but I'm fairly certain that likely broke other things.   \r\nMy suggestion would be to take a look at the SQL Alchemy driver for Drill and you can have it rewrite queries.  Simply have it rename the column something that Drill will accept.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1900853684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1901647299","html_url":"https://github.com/apache/drill/issues/2858#issuecomment-1901647299","issue_url":"https://api.github.com/repos/apache/drill/issues/2858","id":1901647299,"node_id":"IC_kwDOAFa5xc5xWNXD","user":{"login":"piyushShama","id":90260638,"node_id":"MDQ6VXNlcjkwMjYwNjM4","avatar_url":"https://avatars.githubusercontent.com/u/90260638?v=4","gravatar_id":"","url":"https://api.github.com/users/piyushShama","html_url":"https://github.com/piyushShama","followers_url":"https://api.github.com/users/piyushShama/followers","following_url":"https://api.github.com/users/piyushShama/following{/other_user}","gists_url":"https://api.github.com/users/piyushShama/gists{/gist_id}","starred_url":"https://api.github.com/users/piyushShama/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piyushShama/subscriptions","organizations_url":"https://api.github.com/users/piyushShama/orgs","repos_url":"https://api.github.com/users/piyushShama/repos","events_url":"https://api.github.com/users/piyushShama/events{/privacy}","received_events_url":"https://api.github.com/users/piyushShama/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-20T02:39:33Z","updated_at":"2024-01-20T02:40:37Z","author_association":"NONE","body":"Not yet, but will do it !! Yes, the changes I have done are working for me but it may break other things \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1901647299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1902750285","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1902750285","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1902750285,"node_id":"IC_kwDOAFa5xc5xaapN","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-21T20:17:57Z","updated_at":"2024-01-21T20:17:57Z","author_association":"CONTRIBUTOR","body":"@cgivre @paul-rogers is there an example of a Drill UDF that is not part of the drill repository tree? \r\n\r\nI'd like to understand the mechanisms for distributing any jar files and dependencies of the UDF that drill uses. I can't find any such in the quasi-USFs that are in the Drill tree, because well, since they are part of Drill, and so are their dependencies, this problem doesn't exist. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1902750285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1902751729","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1902751729","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1902751729,"node_id":"IC_kwDOAFa5xc5xaa_x","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-21T20:23:39Z","updated_at":"2024-01-21T20:23:39Z","author_association":"CONTRIBUTOR","body":"> @cgivre @paul-rogers is there an example of a Drill UDF that is not part of the drill repository tree?\r\n> \r\n> I'd like to understand the mechanisms for distributing any jar files and dependencies of the UDF that drill uses. I can't find any such in the quasi-USFs that are in the Drill tree, because well, since they are part of Drill, and so are their dependencies, this problem doesn't exist.\r\n\r\n\r\n@mbeckerle Here's an example: https://github.com/datadistillr/drill-humanname-functions.    I'm sorry we weren't able to connect last week.  \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1902751729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905101608","html_url":"https://github.com/apache/drill/issues/2873#issuecomment-1905101608","issue_url":"https://api.github.com/repos/apache/drill/issues/2873","id":1905101608,"node_id":"IC_kwDOAFa5xc5xjYso","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T00:56:17Z","updated_at":"2024-01-23T00:56:17Z","author_association":"CONTRIBUTOR","body":"Can you please provide a screenshot or some explanation that is more clear?  This is really difficult to follow.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905101608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905105700","html_url":"https://github.com/apache/drill/issues/2873#issuecomment-1905105700","issue_url":"https://api.github.com/repos/apache/drill/issues/2873","id":1905105700,"node_id":"IC_kwDOAFa5xc5xjZsk","user":{"login":"yaozhu","id":13361571,"node_id":"MDQ6VXNlcjEzMzYxNTcx","avatar_url":"https://avatars.githubusercontent.com/u/13361571?v=4","gravatar_id":"","url":"https://api.github.com/users/yaozhu","html_url":"https://github.com/yaozhu","followers_url":"https://api.github.com/users/yaozhu/followers","following_url":"https://api.github.com/users/yaozhu/following{/other_user}","gists_url":"https://api.github.com/users/yaozhu/gists{/gist_id}","starred_url":"https://api.github.com/users/yaozhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaozhu/subscriptions","organizations_url":"https://api.github.com/users/yaozhu/orgs","repos_url":"https://api.github.com/users/yaozhu/repos","events_url":"https://api.github.com/users/yaozhu/events{/privacy}","received_events_url":"https://api.github.com/users/yaozhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T01:01:22Z","updated_at":"2024-01-23T01:01:22Z","author_association":"NONE","body":"> Can you please provide a screenshot or some explanation that is more clear? This is really difficult to follow.\r\n\r\n![image](https://github.com/apache/drill/assets/13361571/82b08db4-1d6a-48aa-9f0e-1db3c7018417)\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905105700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905126799","html_url":"https://github.com/apache/drill/issues/2873#issuecomment-1905126799","issue_url":"https://api.github.com/repos/apache/drill/issues/2873","id":1905126799,"node_id":"IC_kwDOAFa5xc5xje2P","user":{"login":"yaozhu","id":13361571,"node_id":"MDQ6VXNlcjEzMzYxNTcx","avatar_url":"https://avatars.githubusercontent.com/u/13361571?v=4","gravatar_id":"","url":"https://api.github.com/users/yaozhu","html_url":"https://github.com/yaozhu","followers_url":"https://api.github.com/users/yaozhu/followers","following_url":"https://api.github.com/users/yaozhu/following{/other_user}","gists_url":"https://api.github.com/users/yaozhu/gists{/gist_id}","starred_url":"https://api.github.com/users/yaozhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaozhu/subscriptions","organizations_url":"https://api.github.com/users/yaozhu/orgs","repos_url":"https://api.github.com/users/yaozhu/repos","events_url":"https://api.github.com/users/yaozhu/events{/privacy}","received_events_url":"https://api.github.com/users/yaozhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T01:27:07Z","updated_at":"2024-01-23T01:27:07Z","author_association":"NONE","body":"@cgivre are u clear?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905126799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905132740","html_url":"https://github.com/apache/drill/issues/2873#issuecomment-1905132740","issue_url":"https://api.github.com/repos/apache/drill/issues/2873","id":1905132740,"node_id":"IC_kwDOAFa5xc5xjgTE","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T01:34:10Z","updated_at":"2024-01-23T01:34:10Z","author_association":"CONTRIBUTOR","body":"I'm not yet convinced there is a bug in Drill here.  I think the issue may actually be in your query.  My hunch here is that there may be an issue in the `ORDER BY` statement.  Your inner tables each have columns called `k1`.  Then you are calling a sort on that without specifying which one it is.  You might first try adding table names to the `ORDER BY` clause.\r\n\r\nSecondly, I'm not trying to be rude but what are you trying to achieve with this query?   It looks like you are performing a union of a left and right join of the same table?  Why not combine these?    Then you have nested `SELECT *` statements that don't really seem to serve any purpose. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905132740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905217272","html_url":"https://github.com/apache/drill/issues/2873#issuecomment-1905217272","issue_url":"https://api.github.com/repos/apache/drill/issues/2873","id":1905217272,"node_id":"IC_kwDOAFa5xc5xj074","user":{"login":"yaozhu","id":13361571,"node_id":"MDQ6VXNlcjEzMzYxNTcx","avatar_url":"https://avatars.githubusercontent.com/u/13361571?v=4","gravatar_id":"","url":"https://api.github.com/users/yaozhu","html_url":"https://github.com/yaozhu","followers_url":"https://api.github.com/users/yaozhu/followers","following_url":"https://api.github.com/users/yaozhu/following{/other_user}","gists_url":"https://api.github.com/users/yaozhu/gists{/gist_id}","starred_url":"https://api.github.com/users/yaozhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaozhu/subscriptions","organizations_url":"https://api.github.com/users/yaozhu/orgs","repos_url":"https://api.github.com/users/yaozhu/repos","events_url":"https://api.github.com/users/yaozhu/events{/privacy}","received_events_url":"https://api.github.com/users/yaozhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T03:11:09Z","updated_at":"2024-01-23T03:11:09Z","author_association":"NONE","body":"This is a test case written by testers, without actual usage scenarios. What do you mean by combining them?\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905217272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905298953","html_url":"https://github.com/apache/drill/issues/2874#issuecomment-1905298953","issue_url":"https://api.github.com/repos/apache/drill/issues/2874","id":1905298953,"node_id":"IC_kwDOAFa5xc5xkI4J","user":{"login":"shfshihuafeng","id":25974968,"node_id":"MDQ6VXNlcjI1OTc0OTY4","avatar_url":"https://avatars.githubusercontent.com/u/25974968?v=4","gravatar_id":"","url":"https://api.github.com/users/shfshihuafeng","html_url":"https://github.com/shfshihuafeng","followers_url":"https://api.github.com/users/shfshihuafeng/followers","following_url":"https://api.github.com/users/shfshihuafeng/following{/other_user}","gists_url":"https://api.github.com/users/shfshihuafeng/gists{/gist_id}","starred_url":"https://api.github.com/users/shfshihuafeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shfshihuafeng/subscriptions","organizations_url":"https://api.github.com/users/shfshihuafeng/orgs","repos_url":"https://api.github.com/users/shfshihuafeng/repos","events_url":"https://api.github.com/users/shfshihuafeng/events{/privacy}","received_events_url":"https://api.github.com/users/shfshihuafeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T05:04:06Z","updated_at":"2024-01-23T05:04:06Z","author_association":"CONTRIBUTOR","body":"I fixed the bug see attachment \r\n[0001-bug-10227615-hashPartition-leak.patch](https://github.com/apache/drill/files/14018533/0001-bug-10227615-hashPartition-leak.patch)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905298953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905299722","html_url":"https://github.com/apache/drill/issues/2874#issuecomment-1905299722","issue_url":"https://api.github.com/repos/apache/drill/issues/2874","id":1905299722,"node_id":"IC_kwDOAFa5xc5xkJEK","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T05:05:10Z","updated_at":"2024-01-23T05:05:10Z","author_association":"CONTRIBUTOR","body":"@shfshihuafeng  Can you please submit this as a pull request?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905299722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905300921","html_url":"https://github.com/apache/drill/issues/2871#issuecomment-1905300921","issue_url":"https://api.github.com/repos/apache/drill/issues/2871","id":1905300921,"node_id":"IC_kwDOAFa5xc5xkJW5","user":{"login":"shfshihuafeng","id":25974968,"node_id":"MDQ6VXNlcjI1OTc0OTY4","avatar_url":"https://avatars.githubusercontent.com/u/25974968?v=4","gravatar_id":"","url":"https://api.github.com/users/shfshihuafeng","html_url":"https://github.com/shfshihuafeng","followers_url":"https://api.github.com/users/shfshihuafeng/followers","following_url":"https://api.github.com/users/shfshihuafeng/following{/other_user}","gists_url":"https://api.github.com/users/shfshihuafeng/gists{/gist_id}","starred_url":"https://api.github.com/users/shfshihuafeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shfshihuafeng/subscriptions","organizations_url":"https://api.github.com/users/shfshihuafeng/orgs","repos_url":"https://api.github.com/users/shfshihuafeng/repos","events_url":"https://api.github.com/users/shfshihuafeng/events{/privacy}","received_events_url":"https://api.github.com/users/shfshihuafeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T05:06:47Z","updated_at":"2024-01-23T05:06:47Z","author_association":"CONTRIBUTOR","body":"> @weijunlu, you may have found a bug. The behavior you described is not expected.\r\n> \r\n> Just to verify I understand: you ran your query once. Did the query run successfully the first time? Or, did your first query fail? If the query _worked_ the first time, we have one situation. If the query _failed_ the first time, we have another situation.\r\n> \r\n> Then, you ran the _same_ query a second time? This time you got an OOM error?\r\n> \r\n> I think we may have up to three distinct issues.\r\n> \r\n> First, I missed one important piece of information when I first read this report. You reported an exception: `Memory was leaked by query. Memory leaked: (249856)`. This messages indicates an actual bug. As I explained, Drill won't release the memory back to the OS. But, the query should have released the memory back to Netty. The error message says that it did not. This would be a bug. Even if the query fails, Drill is required to return memory to Netty. Such errors are, unfortunately, hard to track down. Our unit tests have many such checks, but your query appears to have uncovered a case that the unit tests do not check.\r\n> \r\n> The stack trace suggests that the memory leak was detected as Drill was trying to shut down a failed query. So, I suspect your query run may not have actually worked. If it did work, you should see in the UI a very detailed report on all the operators in the query. Did you get that detailed report?\r\n> \r\n> Second, I wonder if Drill has sufficient memory for the query you are trying to run. The TPCH queries tend to be memory-hungry. This query has six concurrent sorts. Then, it has five merge joins, plus more sorts. While the query runs, all the needed data will be in memory. (It is in memory because Drill uses memory to buffer data to keep things fast.)\r\n> \r\n> I do not recall the size of a SF1 TPCH data set. What is the total size of the files in your data set?\r\n> \r\n> Back when we used to run TPCH tests regularly, we would use a cluster of 5 or 10 Drillbits, each with a generous amount of memory, so that Drill can hold the data in memory. I suspect that 2 GB of direct memory, on a single Drillbit, is probably not enough for this kind of query.\r\n> \r\n> So, I suspect you need more direct memory. The UI says that you are using only 34% of a 4GB heap, but ~100% of 2GB direct memory. Try changing this allocation. Try allocating 3GB to heap. This will raise heap usage to 45%. Then, give as much memory as your machine has to direct memory. If you are running SqlLine on the same machine, please run it on another machine instead. If you have other services on your machine (a database, an IDE, etc.), I would recommend moving Drill to a dedicated machine. You may even consider using a cluster of machines to provide sufficient resources.\r\n> \r\n> Once you get a query that succeeds, you can look at the detailed query profile to find out how much memory it required. Then, you can reduce the direct memory given to Drill to a lower amount, if the query allows.\r\n> \r\n> Once you find a memory level that allows the query to run, you will probably avoid the memory leak error. The query will succeed and memory should be freed back to Netty as normal. TPCH SF1 queries used to pass. They should still work, unless something changed in the last couple of years in one of the operators.\r\n> \r\n> Just to be clear, Drill works well on a laptop with the standard amount of memory _if you run simple queries on small datasets_. But, if you do classic TPCH \"big data\" queries, you need a cluster with enough capacity â€” that's why we use Hadoop.\r\n> \r\n> The third issue is a minor point: the UI screenshot is a bit odd: it says you are at 94% of direct memory. I suspect you are actually at 100%, and the UI is dividing by the wrong number. (1000 vs. 1024 or some such).\r\n\r\ni think it  leak ponit , when sql stop ,tmp memory should be clearup .","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905300921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905301573","html_url":"https://github.com/apache/drill/issues/2874#issuecomment-1905301573","issue_url":"https://api.github.com/repos/apache/drill/issues/2874","id":1905301573,"node_id":"IC_kwDOAFa5xc5xkJhF","user":{"login":"shfshihuafeng","id":25974968,"node_id":"MDQ6VXNlcjI1OTc0OTY4","avatar_url":"https://avatars.githubusercontent.com/u/25974968?v=4","gravatar_id":"","url":"https://api.github.com/users/shfshihuafeng","html_url":"https://github.com/shfshihuafeng","followers_url":"https://api.github.com/users/shfshihuafeng/followers","following_url":"https://api.github.com/users/shfshihuafeng/following{/other_user}","gists_url":"https://api.github.com/users/shfshihuafeng/gists{/gist_id}","starred_url":"https://api.github.com/users/shfshihuafeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shfshihuafeng/subscriptions","organizations_url":"https://api.github.com/users/shfshihuafeng/orgs","repos_url":"https://api.github.com/users/shfshihuafeng/repos","events_url":"https://api.github.com/users/shfshihuafeng/events{/privacy}","received_events_url":"https://api.github.com/users/shfshihuafeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T05:07:42Z","updated_at":"2024-01-23T05:07:42Z","author_association":"CONTRIBUTOR","body":"ok @cgivre \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905301573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905598192","html_url":"https://github.com/apache/drill/pull/2875#issuecomment-1905598192","issue_url":"https://api.github.com/repos/apache/drill/issues/2875","id":1905598192,"node_id":"IC_kwDOAFa5xc5xlR7w","user":{"login":"jnturton","id":9107319,"node_id":"MDQ6VXNlcjkxMDczMTk=","avatar_url":"https://avatars.githubusercontent.com/u/9107319?v=4","gravatar_id":"","url":"https://api.github.com/users/jnturton","html_url":"https://github.com/jnturton","followers_url":"https://api.github.com/users/jnturton/followers","following_url":"https://api.github.com/users/jnturton/following{/other_user}","gists_url":"https://api.github.com/users/jnturton/gists{/gist_id}","starred_url":"https://api.github.com/users/jnturton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnturton/subscriptions","organizations_url":"https://api.github.com/users/jnturton/orgs","repos_url":"https://api.github.com/users/jnturton/repos","events_url":"https://api.github.com/users/jnturton/events{/privacy}","received_events_url":"https://api.github.com/users/jnturton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T09:02:08Z","updated_at":"2024-01-23T09:02:08Z","author_association":"CONTRIBUTOR","body":"[An unsued import crept in](https://github.com/apache/drill/actions/runs/7622586264/job/20762475705#step:6:1277), could you remove it please?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905598192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905599592","html_url":"https://github.com/apache/drill/pull/2875#issuecomment-1905599592","issue_url":"https://api.github.com/repos/apache/drill/issues/2875","id":1905599592,"node_id":"IC_kwDOAFa5xc5xlSRo","user":{"login":"shfshihuafeng","id":25974968,"node_id":"MDQ6VXNlcjI1OTc0OTY4","avatar_url":"https://avatars.githubusercontent.com/u/25974968?v=4","gravatar_id":"","url":"https://api.github.com/users/shfshihuafeng","html_url":"https://github.com/shfshihuafeng","followers_url":"https://api.github.com/users/shfshihuafeng/followers","following_url":"https://api.github.com/users/shfshihuafeng/following{/other_user}","gists_url":"https://api.github.com/users/shfshihuafeng/gists{/gist_id}","starred_url":"https://api.github.com/users/shfshihuafeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shfshihuafeng/subscriptions","organizations_url":"https://api.github.com/users/shfshihuafeng/orgs","repos_url":"https://api.github.com/users/shfshihuafeng/repos","events_url":"https://api.github.com/users/shfshihuafeng/events{/privacy}","received_events_url":"https://api.github.com/users/shfshihuafeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T09:02:58Z","updated_at":"2024-01-23T09:02:58Z","author_association":"CONTRIBUTOR","body":"> [An unsued import crept in](https://github.com/apache/drill/actions/runs/7622586264/job/20762475705#step:6:1277), could you remove it please?\r\n\r\nremoved it","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1905599592/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906561549","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1906561549","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1906561549,"node_id":"IC_kwDOAFa5xc5xo9IN","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T17:24:25Z","updated_at":"2024-01-23T17:24:25Z","author_association":"CONTRIBUTOR","body":"> > @cgivre @paul-rogers is there an example of a Drill UDF that is not part of the drill repository tree?\r\n> > I'd like to understand the mechanisms for distributing any jar files and dependencies of the UDF that drill uses. I can't find any such in the quasi-USFs that are in the Drill tree, because well, since they are part of Drill, and so are their dependencies, this problem doesn't exist.\r\n> \r\n> @mbeckerle Here's an example: https://github.com/datadistillr/drill-humanname-functions. I'm sorry we weren't able to connect last week.\r\n\r\nIf I understand this correctly, if a jar is on the classpath and has drill-module.conf in its root dir, then drill will find it and read that HOCON file to get the package to add to drill.classpath.scanning.packages. \r\n\r\nDrill then appears to scan jars for class files for those packages. Not sure what it is doing with the class files. I imagine it is repackaging them somehow so Drill can use them on the drill distributed nodes. But it isn't yet clear to me how this aspect works. Do these classes just get loaded on the distributed drill nodes? Or is the classpath augmented in some way on the drill nodes so that they see a jar that contains all these classes?\r\n\r\nI have two questions: \r\n\r\n(1) what about dependencies? The UDF may depend on libraries which depend on other libraries, etc. \r\n\r\n(2) what about non-class files, e.g., things under src/main/resources of the project that go into the jar, but aren't \"class\" files? How do those things also get moved? How would code running in the drill node access these? The usual method is to call getResource(URL) with a URL that gives the path within a jar file to the resource in question. \r\n\r\nThanks for any info. \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906561549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906689793","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1906689793","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1906689793,"node_id":"IC_kwDOAFa5xc5xpccB","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T18:36:04Z","updated_at":"2024-01-23T18:36:04Z","author_association":"CONTRIBUTOR","body":"> > > @cgivre @paul-rogers is there an example of a Drill UDF that is not part of the drill repository tree?\r\n> > > I'd like to understand the mechanisms for distributing any jar files and dependencies of the UDF that drill uses. I can't find any such in the quasi-USFs that are in the Drill tree, because well, since they are part of Drill, and so are their dependencies, this problem doesn't exist.\r\n> > \r\n> > \r\n> > @mbeckerle Here's an example: https://github.com/datadistillr/drill-humanname-functions. I'm sorry we weren't able to connect last week.\r\n> \r\n> If I understand this correctly, if a jar is on the classpath and has drill-module.conf in its root dir, then drill will find it and read that HOCON file to get the package to add to drill.classpath.scanning.packages.\r\n\r\nI believe that is correct.\r\n\r\n> \r\n> Drill then appears to scan jars for class files for those packages. Not sure what it is doing with the class files. I imagine it is repackaging them somehow so Drill can use them on the drill distributed nodes. But it isn't yet clear to me how this aspect works. Do these classes just get loaded on the distributed drill nodes? Or is the classpath augmented in some way on the drill nodes so that they see a jar that contains all these classes?\r\n> \r\n> I have two questions:\r\n> \r\n> (1) what about dependencies? The UDF may depend on libraries which depend on other libraries, etc.\r\n\r\nSo UDFs are a bit of a special case, but if they do have dependencies, you have to also include those JAR files in the UDF directory, or in Drill's 3rd party JAR folder.   I'm not that good with maven, but I've often wondered about making a so-called fat-JAR which includes the dependencies as part of the UDF JAR file.\r\n\r\n> \r\n> (2) what about non-class files, e.g., things under src/main/resources of the project that go into the jar, but aren't \"class\" files? How do those things also get moved? How would code running in the drill node access these? The usual method is to call getResource(URL) with a URL that gives the path within a jar file to the resource in question.\r\n\r\nTake a look at this UDF. https://github.com/datadistillr/drill-geoip-functions\r\nThis UDF has a few external resources including a CSV file and the MaxMind databases.\r\n\r\n\r\n> \r\n> Thanks for any info.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906689793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906827568","html_url":"https://github.com/apache/drill/pull/2836#issuecomment-1906827568","issue_url":"https://api.github.com/repos/apache/drill/issues/2836","id":1906827568,"node_id":"IC_kwDOAFa5xc5xp-Ew","user":{"login":"mbeckerle","id":1524099,"node_id":"MDQ6VXNlcjE1MjQwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1524099?v=4","gravatar_id":"","url":"https://api.github.com/users/mbeckerle","html_url":"https://github.com/mbeckerle","followers_url":"https://api.github.com/users/mbeckerle/followers","following_url":"https://api.github.com/users/mbeckerle/following{/other_user}","gists_url":"https://api.github.com/users/mbeckerle/gists{/gist_id}","starred_url":"https://api.github.com/users/mbeckerle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbeckerle/subscriptions","organizations_url":"https://api.github.com/users/mbeckerle/orgs","repos_url":"https://api.github.com/users/mbeckerle/repos","events_url":"https://api.github.com/users/mbeckerle/events{/privacy}","received_events_url":"https://api.github.com/users/mbeckerle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T19:59:37Z","updated_at":"2024-01-26T23:49:37Z","author_association":"CONTRIBUTOR","body":"Ok, so the geo-ip UDF stuff has no special mechanisms or description about those resource files, so the generic code that \"scans\" must find them and drag them along automatically. \r\n\r\nThat's the behavior I want. \r\n\r\n@cgivre What is \"Drill's 3rd Party Jar folder\"? \r\n\r\nIf a magic folder just gets dragged over to all nodes, and drill uses a class loader that arranges for jars in that folder to be searched, then there is very little to do, since a DFDL schema can be just a set of jar files containing related resources, and the classes for Daffodil's own UDFs and layers which are java code extensions of its own kind. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/1906827568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]