[{"url":"https://api.github.com/repos/apache/druid/issues/comments/474153226","html_url":"https://github.com/apache/druid/pull/7292#issuecomment-474153226","issue_url":"https://api.github.com/repos/apache/druid/issues/7292","id":474153226,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDE1MzIyNg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T00:35:22Z","updated_at":"2019-03-19T00:35:22Z","author_association":"CONTRIBUTOR","body":"Shouldn't the label be called \"Show Columns\" instead of \"Hide Columns\"?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474153226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474155232","html_url":"https://github.com/apache/druid/issues/7169#issuecomment-474155232","issue_url":"https://api.github.com/repos/apache/druid/issues/7169","id":474155232,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDE1NTIzMg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T00:46:59Z","updated_at":"2019-03-19T00:46:59Z","author_association":"MEMBER","body":"I believe this is an artifact of how the \"contrib\" Parquet extension functions, [that it only reads columns from the file that are specified in the schema.](https://github.com/apache/incubator-druid/blob/cf15aac71f9f0f2ba41a2304d6b72719e6f7ec69/extensions-contrib/parquet-extensions/src/main/java/org/apache/parquet/avro/DruidParquetReadSupport.java#L57)\r\n\r\nFwiw, in the upcoming Druid 0.14 the Parquet extension has been reworked and moved to a \"core\" extension (see #6360). In the new version of the extension, there are added `parquet` and `parquet-avro` parser types which support a `flattenSpec`, and _also_ allow a `transformSpec` to refer to columns which are not otherwise used as dimensions or metrics. Note that using the `timeAndDims` parser type will still run into this same issue, as the optimization to use a partial schema to read the file is still used in this case. I tested to confirm this behavior, both that using `parquet` and `parquet-avro` with 'auto discovery' enabled allow a transform expression to refer to a column that isn't a dimension or metric, and that using `timeAndDims` will experience the current behavior that you are running into.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474155232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474156790","html_url":"https://github.com/apache/druid/issues/7288#issuecomment-474156790","issue_url":"https://api.github.com/repos/apache/druid/issues/7288","id":474156790,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDE1Njc5MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T00:55:59Z","updated_at":"2019-03-19T00:55:59Z","author_association":"CONTRIBUTOR","body":"Here it is: https://github.com/apache/incubator-druid/pull/7293. I added some comments for `getRequiredColumns()` too, another method that returns other AggregatorFactories. And I renamed it since the current name is pretty misleading, I think.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474156790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474179154","html_url":"https://github.com/apache/druid/pull/7292#issuecomment-474179154","issue_url":"https://api.github.com/repos/apache/druid/issues/7292","id":474179154,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDE3OTE1NA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T02:57:56Z","updated_at":"2019-03-19T02:57:56Z","author_association":"CONTRIBUTOR","body":"> Shouldn't the label be called \"Show Columns\" instead of \"Hide Columns\"?\r\n\r\nNo, it should be \"Columns\" :-p","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474179154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474189879","html_url":"https://github.com/apache/druid/pull/6974#issuecomment-474189879","issue_url":"https://api.github.com/repos/apache/druid/issues/6974","id":474189879,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDE4OTg3OQ==","user":{"login":"peterlittig","id":3302735,"node_id":"MDQ6VXNlcjMzMDI3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/3302735?v=4","gravatar_id":"","url":"https://api.github.com/users/peterlittig","html_url":"https://github.com/peterlittig","followers_url":"https://api.github.com/users/peterlittig/followers","following_url":"https://api.github.com/users/peterlittig/following{/other_user}","gists_url":"https://api.github.com/users/peterlittig/gists{/gist_id}","starred_url":"https://api.github.com/users/peterlittig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peterlittig/subscriptions","organizations_url":"https://api.github.com/users/peterlittig/orgs","repos_url":"https://api.github.com/users/peterlittig/repos","events_url":"https://api.github.com/users/peterlittig/events{/privacy}","received_events_url":"https://api.github.com/users/peterlittig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T04:01:36Z","updated_at":"2019-03-19T04:01:36Z","author_association":"NONE","body":"I found my way here via [CALCITE-2873](https://issues.apache.org/jira/browse/CALCITE-2873) and am receiving the same AvaticaSqlException when attempting to prepare statements against my Druid cluster. Two questions: 1) How broad is the scope of fix in this PR? (i.e., I'm wondering if my use-case will likely be covered by the fix) and 2) Is there a best-guess timeline for when it will be merged into apache:master?\r\n\r\nMany thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474189879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474203119","html_url":"https://github.com/apache/druid/issues/6759#issuecomment-474203119","issue_url":"https://api.github.com/repos/apache/druid/issues/6759","id":474203119,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDIwMzExOQ==","user":{"login":"ggjjl1","id":3888954,"node_id":"MDQ6VXNlcjM4ODg5NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3888954?v=4","gravatar_id":"","url":"https://api.github.com/users/ggjjl1","html_url":"https://github.com/ggjjl1","followers_url":"https://api.github.com/users/ggjjl1/followers","following_url":"https://api.github.com/users/ggjjl1/following{/other_user}","gists_url":"https://api.github.com/users/ggjjl1/gists{/gist_id}","starred_url":"https://api.github.com/users/ggjjl1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ggjjl1/subscriptions","organizations_url":"https://api.github.com/users/ggjjl1/orgs","repos_url":"https://api.github.com/users/ggjjl1/repos","events_url":"https://api.github.com/users/ggjjl1/events{/privacy}","received_events_url":"https://api.github.com/users/ggjjl1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T05:26:32Z","updated_at":"2019-03-19T05:26:32Z","author_association":"NONE","body":"http://druid.io/docs/latest/development/extensions-core/mysql.html","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474203119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474406915","html_url":"https://github.com/apache/druid/pull/7203#issuecomment-474406915","issue_url":"https://api.github.com/repos/apache/druid/issues/7203","id":474406915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQwNjkxNQ==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T14:54:10Z","updated_at":"2019-03-19T15:00:34Z","author_association":"CONTRIBUTOR","body":"Hey @jihoonson , would this be backported to 0.14.0? Seeing the same issue in 0.14.0.\r\nIf not, I can use ZK based segment discovery in the interim.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474406915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474460432","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474460432","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474460432,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQ2MDQzMg==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T16:36:53Z","updated_at":"2019-03-19T16:37:52Z","author_association":"CONTRIBUTOR","body":"Theta sketch ignores nulls and empty strings. Are you sure your input is really empty, not, say, strings with some spaces in them?\r\n\r\nRegarding the difference between Theta and HLL. You can chose accuracy you wish. Assuming the same accuracy, HLL sketches are substantially smaller than Theta, but don't support set operations (intersection and set difference), and may be slower to merge (union).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474460432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474467936","html_url":"https://github.com/apache/druid/pull/7203#issuecomment-474467936","issue_url":"https://api.github.com/repos/apache/druid/issues/7203","id":474467936,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQ2NzkzNg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T16:54:57Z","updated_at":"2019-03-19T16:54:57Z","author_association":"CONTRIBUTOR","body":"@a2l007 oh, I will backport.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474467936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474497181","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474497181","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474497181,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQ5NzE4MQ==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T17:55:52Z","updated_at":"2019-03-19T17:55:52Z","author_association":"NONE","body":"Thanks for quick reply !\r\n> Theta sketch ignores nulls and empty strings. Are you sure your input is really empty, not, say, strings with some spaces in them?\r\n\r\nYes, i am sure my input is really empty strings or null, and i also try to perform a query with the HLLSketchMerge aggrgator on the same orignal data but ingested with the HLLSketchBuild aggrgator and druid return 0 from me.\r\nSo i guess  maybe there are some different points between HLL and Theta handle null and empty strings. also maybe it is my mistake in using the ThetaSketch. Can you give me some advices to find out what caused it?\r\n\r\n> Regarding the difference between Theta and HLL. You can chose accuracy you wish. Assuming the same accuracy, HLL sketches are substantially smaller than Theta, but don't support set operations (intersection and set difference), and may be slower to merge (union).\r\n\r\nAssuming the same accuracy, does HLL use more memroy than Theta during ingesting?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474497181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474503384","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474503384","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474503384,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDUwMzM4NA==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T18:06:34Z","updated_at":"2019-03-19T18:06:34Z","author_association":"CONTRIBUTOR","body":"I don't see how this is possible.\r\n\r\nRegarding HLL, I think it should use less memory than Theta.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474503384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474510220","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474510220","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474510220,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDUxMDIyMA==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T18:19:19Z","updated_at":"2019-03-19T18:19:19Z","author_association":"NONE","body":"Thanks for quick reply !\r\n> I don't see how this is possible.\r\n\r\nOK, maybe it is my mistask. i will do further verification.\r\n\r\n> Regarding HLL, I think it should use less memory than Theta.\r\n\r\nIn your opinion, do you recommend HLL or Theta in our situation? we only need approximate distinct count.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474510220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474550197","html_url":"https://github.com/apache/druid/pull/3956#issuecomment-474550197","issue_url":"https://api.github.com/repos/apache/druid/issues/3956","id":474550197,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDU1MDE5Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T19:46:29Z","updated_at":"2019-03-19T19:46:29Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 1 week if no further activity occurs. If you think that’s incorrect or this pull request requires a review, please simply write any comment. If closed, you can revive the PR at any time and @mention a reviewer or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474550197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474555914","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474555914","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474555914,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDU1NTkxNA==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T20:03:03Z","updated_at":"2019-03-19T20:03:03Z","author_association":"CONTRIBUTOR","body":"I would recommend using HLL if you don't need intersections and A-not-B operations, and can tolerate slower merge (space is more important for you).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474555914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474581201","html_url":"https://github.com/apache/druid/pull/6430#issuecomment-474581201","issue_url":"https://api.github.com/repos/apache/druid/issues/6430","id":474581201,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDU4MTIwMQ==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T20:56:51Z","updated_at":"2019-03-19T20:56:51Z","author_association":"CONTRIBUTOR","body":"@jihoonson, thanks so much for your effort on this thorough review and sorry it took me that long to complete my response. I have addressed all comments, feel free to review and raise other concerns.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474581201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474589844","html_url":"https://github.com/apache/druid/pull/7185#issuecomment-474589844","issue_url":"https://api.github.com/repos/apache/druid/issues/7185","id":474589844,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDU4OTg0NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T21:22:51Z","updated_at":"2019-03-19T21:22:51Z","author_association":"MEMBER","body":"@egor-ryashin @clintropolis thanks for reviews.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474589844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624119","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-474624119","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":474624119,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyNDExOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:30:17Z","updated_at":"2019-03-19T23:30:17Z","author_association":"MEMBER","body":"Since it's an incompatible change, also adding `Design Review` tag.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624269","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-474624269","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":474624269,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyNDI2OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:30:49Z","updated_at":"2019-03-19T23:30:49Z","author_association":"CONTRIBUTOR","body":"Ah I forgot this was an extension point. I could revert the method naming changes, I didn't really mean to create an incompatible change.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624342","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-474624342","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":474624342,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyNDM0Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:31:06Z","updated_at":"2019-03-19T23:31:06Z","author_association":"CONTRIBUTOR","body":"I am going to revert the naming changes, since I didn't mean to create an incompatible change.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474624342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474625046","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-474625046","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":474625046,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyNTA0Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:33:59Z","updated_at":"2019-03-19T23:33:59Z","author_association":"CONTRIBUTOR","body":"> I am going to revert the naming changes, since I didn't mean to create an incompatible change.\r\n\r\nThis is done.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474625046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474627712","html_url":"https://github.com/apache/druid/pull/7291#issuecomment-474627712","issue_url":"https://api.github.com/repos/apache/druid/issues/7291","id":474627712,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyNzcxMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:45:32Z","updated_at":"2019-03-20T00:17:25Z","author_association":"CONTRIBUTOR","body":"This PR is ready for review. Updated the PR description.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474627712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474629206","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474629206","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474629206,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYyOTIwNg==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-19T23:52:58Z","updated_at":"2019-03-19T23:52:58Z","author_association":"NONE","body":"Thank you so much!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474629206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474634938","html_url":"https://github.com/apache/druid/pull/7292#issuecomment-474634938","issue_url":"https://api.github.com/repos/apache/druid/issues/7292","id":474634938,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYzNDkzOA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T00:21:37Z","updated_at":"2019-03-20T00:21:37Z","author_association":"CONTRIBUTOR","body":"LGTM 👍 @shuqi7 thank you for promptly addressing all my feedback","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474634938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474639633","html_url":"https://github.com/apache/druid/issues/7233#issuecomment-474639633","issue_url":"https://api.github.com/repos/apache/druid/issues/7233","id":474639633,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDYzOTYzMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T00:45:04Z","updated_at":"2019-03-20T00:45:04Z","author_association":"CONTRIBUTOR","body":"@leventov oh, I missed it's already there. Thanks.\r\n\r\nI talked with @gianm and @surekhasaharan offline and now it's more clear to me. Here is the _current_ behavior.\r\n\r\n- `is_available` means that a segment is served by historicals or a realtime task. Overshadowing is not considered. Updated whenever a historical or realtime task announces a new segment or unannounces an existing one.\r\n- `is_published` means that `used` is set to `true` for a segment in metadata store. Overshadowing is not considered. Updated in background (metadata store is polled every 60s).\r\n  - Unpublishing segments can mean setting `used` to `false` and it sounds good to me.\r\n\r\nThe issue here is that both columns are not considering overshadowing such that it makes debugging harder.\r\n\r\nProbably, in many use cases, we want to know what segments are not loaded yet and why. To figure this out, we need to know what segment is published and is not _fully overshadowed only by other segments in metadata store_. This information is not being served yet, but it looks worth to add a new column. We came up with a name of `is_active` for this property. Does this make sense?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474639633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474640476","html_url":"https://github.com/apache/druid/pull/7133#issuecomment-474640476","issue_url":"https://api.github.com/repos/apache/druid/issues/7133","id":474640476,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY0MDQ3Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T00:49:39Z","updated_at":"2019-03-20T00:49:55Z","author_association":"CONTRIBUTOR","body":"I don't think this needs to be something done in this PR, but it's worth mentioning that moving the \"time chunking\" behavior to the broker, and issuing several subqueries to the historical could be a possible later optimization:\r\n\r\nThis could help in situations like the following:\r\n- I want an ascending time scan with limit X, across three days worth of data, with DAY granularity segments\r\n- The first day of data has enough data to hit limit X\r\n- I have three historicals: the first has data for the first day, and the second has data for the second 2 day, and the third has data only for third day\r\n- With the current approach in this PR, historical 2 and 3 would also have to do work to answer this query (it would go and return up to limit X rows, even though none of them would be included in the final result set), when only historical 1 really needs to be queried\r\n- If the broker split the query up into daily subqueries, this would cut down on the overall workload across historicals\r\n\r\nThis would require more change to the broker to be able to support this new type of query, so I think the current approach is fine for now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474640476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474654220","html_url":"https://github.com/apache/druid/pull/6972#issuecomment-474654220","issue_url":"https://api.github.com/repos/apache/druid/issues/6972","id":474654220,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY1NDIyMA==","user":{"login":"mohammadjkhan","id":18354068,"node_id":"MDQ6VXNlcjE4MzU0MDY4","avatar_url":"https://avatars.githubusercontent.com/u/18354068?v=4","gravatar_id":"","url":"https://api.github.com/users/mohammadjkhan","html_url":"https://github.com/mohammadjkhan","followers_url":"https://api.github.com/users/mohammadjkhan/followers","following_url":"https://api.github.com/users/mohammadjkhan/following{/other_user}","gists_url":"https://api.github.com/users/mohammadjkhan/gists{/gist_id}","starred_url":"https://api.github.com/users/mohammadjkhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohammadjkhan/subscriptions","organizations_url":"https://api.github.com/users/mohammadjkhan/orgs","repos_url":"https://api.github.com/users/mohammadjkhan/repos","events_url":"https://api.github.com/users/mohammadjkhan/events{/privacy}","received_events_url":"https://api.github.com/users/mohammadjkhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T02:01:46Z","updated_at":"2019-03-20T02:01:46Z","author_association":"CONTRIBUTOR","body":"Hi @jon-wei \r\nI'm following up to see if you had the chance to look and review the changes in this PR yet? It's currently assigned to you for review.\r\n\r\nThanks,\r\nMohammad","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474654220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474657054","html_url":"https://github.com/apache/druid/pull/6972#issuecomment-474657054","issue_url":"https://api.github.com/repos/apache/druid/issues/6972","id":474657054,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY1NzA1NA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T02:17:05Z","updated_at":"2019-03-20T02:17:05Z","author_association":"CONTRIBUTOR","body":"@mohammadjkhan Sorry for the delay, I will start reviewing this week.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474657054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474691264","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474691264","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474691264,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY5MTI2NA==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T05:34:13Z","updated_at":"2019-03-20T05:34:13Z","author_association":"CONTRIBUTOR","body":"Make sure you use the DaraSketches HLL and not the Druid builtin HLL!\n\nOn Tue, Mar 19, 2019 at 4:53 PM zhoujk <notifications@github.com> wrote:\n\n> Thank you so much!\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/issues/7297#issuecomment-474629206>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AMV4wq7mhYlBHmASQeHkHiVMh-MHs68mks5vYXhogaJpZM4b8Sli>\n> .\n>\n-- \nFrom my cell phone.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474691264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474692002","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-474692002","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":474692002,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY5MjAwMg==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T05:38:15Z","updated_at":"2019-03-20T05:38:15Z","author_association":"NONE","body":"> Make sure you use the DaraSketches HLL and not the Druid builtin HLL!\r\n\r\nYes,i used the DataSketch HLL. doc page at [http://druid.io/docs/latest/development/extensions-core/datasketches-hll.html](url)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474692002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474706200","html_url":"https://github.com/apache/druid/pull/6974#issuecomment-474706200","issue_url":"https://api.github.com/repos/apache/druid/issues/6974","id":474706200,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDcwNjIwMA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T06:41:16Z","updated_at":"2019-03-20T06:42:29Z","author_association":"MEMBER","body":"@peterlittig, I expect this will probably be merged to master within the next couple of weeks, barring any major issues uncovered during review, and should be included in release 0.15 (which is quickly sneaking up on us even though 0.14 isn't quite finalized yet).\r\n\r\nI'm not sure on your use case, but I hope so? I've attempted this PR to add general purpose support for dynamic parameters to Druid sql queries through both the JSON API and JDBC interfaces. I've added a handful of test cases for a variety of expressions to the new in this PR [CalciteParameterQueryTest](https://github.com/apache/incubator-druid/blob/a1038bcfdc503e531581b5ff87792c50dbc3bc73/sql/src/test/java/org/apache/druid/sql/calcite/CalciteParameterQueryTest.java), have a look to see if the queries you're trying to do look similar to any of those, and if not I'd be happy to add a test case to make sure it works correctly. \r\n\r\nOne thing to note, sometimes dynamic parameters can trip up the type inference, which will result in a query failing to validate before it can plan. As far as I can tell, this is largely on the calcite side, as queries will confuse the `SqlValidator` that parses the `SqlNode` prior to where this PR does it's thing, but there is a sort of work around for this through using a `CAST(? as <type>)` in the expression to explicitly type the parameters, e.g. like this example from the linked test cases:\r\n\r\n```\r\nWHEN ? THEN SUM(cnt) / CAST(? as INT)\r\n```\r\n\r\nIn this example, the first `?` passes through the validator, but the 2nd must be explicitly cast to an `INT` to pass validation. It's unfortunate, but should get better with time and new versions.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474706200/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474891152","html_url":"https://github.com/apache/druid/pull/7296#issuecomment-474891152","issue_url":"https://api.github.com/repos/apache/druid/issues/7296","id":474891152,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDg5MTE1Mg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T15:40:26Z","updated_at":"2019-03-20T15:40:26Z","author_association":"CONTRIBUTOR","body":"Thanks for the contrib!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474891152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474909064","html_url":"https://github.com/apache/druid/issues/7302#issuecomment-474909064","issue_url":"https://api.github.com/repos/apache/druid/issues/7302","id":474909064,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDkwOTA2NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T16:16:33Z","updated_at":"2019-03-20T16:18:33Z","author_association":"CONTRIBUTOR","body":"I looked into this a bit and believe the ETag calculation needs to be re-thought. It has the bug you mentioned - the one you mentioned, where it is calculated based on segment identifiers (which include the entire segment interval) and does not include a sub-interval within a segment. This causes the behavior you are seeing, and could be fixed by mixing in the SegmentDescriptor interval to the ETag.\r\n\r\nBut a potential larger bug is that it is leveraging `QueryToolChest.computeCacheKey`, which is designed for segment-level caching and, importantly, only includes query parameters that might affect the segment-level results. This is done to promote higher cache hit rates. For example, it _doesn't_ include things like:\r\n\r\n- grandTotal or postAggregations for timeseries\r\n- any non-sorting postAggregations for topN\r\n- having, subtotalsSpec, postAggregations, or limitSpec for groupBy (although the lack of limitSpec is a bug, I think, since groupBy supports limit push down in some cases now)\r\n\r\nI think this means we need a new method in the QueryToolChest for computing result-level cache keys.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474909064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474910810","html_url":"https://github.com/apache/druid/issues/7302#issuecomment-474910810","issue_url":"https://api.github.com/repos/apache/druid/issues/7302","id":474910810,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDkxMDgxMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T16:20:06Z","updated_at":"2019-03-20T16:20:06Z","author_association":"CONTRIBUTOR","body":"> the lack of limitSpec is a bug, I think, since groupBy supports limit push down in some cases now\r\n\r\nAh, maybe it's not. I don't remember if limit push down goes all the way to the per-segment results, or if it only affects the merge buffer. If it's the latter, it doesn't need to be in the per-segment cache key.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474910810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474935637","html_url":"https://github.com/apache/druid/issues/7302#issuecomment-474935637","issue_url":"https://api.github.com/repos/apache/druid/issues/7302","id":474935637,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDkzNTYzNw==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T17:08:47Z","updated_at":"2019-03-20T17:08:47Z","author_association":"NONE","body":"@lxqfy thanks for reporting, I'm looking into it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474935637/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/474954577","html_url":"https://github.com/apache/druid/pull/6974#issuecomment-474954577","issue_url":"https://api.github.com/repos/apache/druid/issues/6974","id":474954577,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDk1NDU3Nw==","user":{"login":"peterlittig","id":3302735,"node_id":"MDQ6VXNlcjMzMDI3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/3302735?v=4","gravatar_id":"","url":"https://api.github.com/users/peterlittig","html_url":"https://github.com/peterlittig","followers_url":"https://api.github.com/users/peterlittig/followers","following_url":"https://api.github.com/users/peterlittig/following{/other_user}","gists_url":"https://api.github.com/users/peterlittig/gists{/gist_id}","starred_url":"https://api.github.com/users/peterlittig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peterlittig/subscriptions","organizations_url":"https://api.github.com/users/peterlittig/orgs","repos_url":"https://api.github.com/users/peterlittig/repos","events_url":"https://api.github.com/users/peterlittig/events{/privacy}","received_events_url":"https://api.github.com/users/peterlittig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T17:47:53Z","updated_at":"2019-03-20T17:47:53Z","author_association":"NONE","body":"Thanks for the response, @clintropolis! The use-cases I currently have in mind are fairly simple/straightforward. I'll definitely take a look at the test class you linked and see I'm covered. Thanks also for the timeline estimate. It would be great to see this go out in 0.15!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/474954577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475007442","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475007442","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475007442,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTAwNzQ0Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T20:07:56Z","updated_at":"2019-03-20T20:07:56Z","author_association":"CONTRIBUTOR","body":"@leventov `SegmentMetadataHolder` is for metadata of segments announced by historicals or realtime tasks. So, `isAvailable` is always true for those segments. `SegmentsTable.scan()` in `SystemSchema` is to create the real result.\r\n\r\nI understand it is not clear how system schema works. Maybe it's because of the lack of javadocs and comments. @surekhasaharan do you have any idea to make it more easily understandable?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475007442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475032286","html_url":"https://github.com/apache/druid/issues/7303#issuecomment-475032286","issue_url":"https://api.github.com/repos/apache/druid/issues/7303","id":475032286,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTAzMjI4Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T21:18:15Z","updated_at":"2019-03-20T21:18:15Z","author_association":"CONTRIBUTOR","body":"Thanks @samarthjain! Would you please update the title properly? Like \"Add support t-digest aggregator\" or something better. Also, looks like this proposal doesn't include SQL support. Would you please add it to the Future Work section? Finally, I think \"Test Plan\" is for your plan for testing the implementation. I guess you can test it in your dev cluster? Anyway, please update the \"Test Plan\" section too if you have any plan.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475032286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475034448","html_url":"https://github.com/apache/druid/issues/7303#issuecomment-475034448","issue_url":"https://api.github.com/repos/apache/druid/issues/7303","id":475034448,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTAzNDQ0OA==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T21:24:39Z","updated_at":"2019-03-20T21:24:39Z","author_association":"CONTRIBUTOR","body":"> Thanks @samarthjain! Would you please update the title properly? Like \"Add support t-digest aggregator\" or something better. Also, looks like this proposal doesn't include SQL support. Would you please add it to the Future Work section? Finally, I think \"Test Plan\" is for your plan for testing the implementation. I guess you can test it in your dev cluster? Anyway, please update the \"Test Plan\" section too if you have any plan.\r\n\r\nThanks, @jihoonson. I have updated the proposal.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475034448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475042683","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-475042683","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":475042683,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA0MjY4Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T21:51:32Z","updated_at":"2019-03-20T21:51:32Z","author_association":"MEMBER","body":"Well, why would this change not be incompatible, if the names are unfortunate? If not now, when those methods are renamed?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475042683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475048769","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475048769","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475048769,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA0ODc2OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:12:38Z","updated_at":"2019-03-20T22:12:38Z","author_association":"MEMBER","body":"Then the class may better be called `AvailableSegmentMetadata` (I don't see much sense in `Holder` endings everywhere in the codebase) and `isAvailable` field removed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475048769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475048885","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475048885","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475048885,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA0ODg4NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:12:59Z","updated_at":"2019-03-20T22:12:59Z","author_association":"MEMBER","body":"Or \"LoadedSegmentMetadata\".","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475048885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475054324","html_url":"https://github.com/apache/druid/pull/7293#issuecomment-475054324","issue_url":"https://api.github.com/repos/apache/druid/issues/7293","id":475054324,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA1NDMyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:30:45Z","updated_at":"2019-03-20T22:30:45Z","author_association":"CONTRIBUTOR","body":"I have somewhat of a preference to avoiding doing incompatible changes for cosmetic, rather than functional reasons. I'd rather wait til we could _delete completely_ `getRequiredColumns()` -- it's only used for groupBy v1, which has been deprecated for a while, and could probably be removed once growable aggregators are implemented. (The only thing it really could do better than groupBy v2 is that it supports growable aggregators, since it uses on-heap rather than off-heap aggs.)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475054324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475054682","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475054682","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475054682,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA1NDY4Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:31:49Z","updated_at":"2019-03-20T22:31:49Z","author_association":"CONTRIBUTOR","body":"It sounds good to me to remove `isAvailable` field. Regarding naming, I think `AvailableSegmentMetadata` is better because it is also for segments announced by realtime tasks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475054682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475059857","html_url":"https://github.com/apache/druid/pull/7308#issuecomment-475059857","issue_url":"https://api.github.com/repos/apache/druid/issues/7308","id":475059857,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA1OTg1Nw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:53:51Z","updated_at":"2019-03-20T22:53:51Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/177816/54724408-4a5e9b80-4b28-11e9-9c8c-afcccc1b9b0f.png)\r\n\r\nLOL so many different icons for configuration... Love it!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475059857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475061148","html_url":"https://github.com/apache/druid/pull/7145#issuecomment-475061148","issue_url":"https://api.github.com/repos/apache/druid/issues/7145","id":475061148,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA2MTE0OA==","user":{"login":"capistrant","id":7452350,"node_id":"MDQ6VXNlcjc0NTIzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/7452350?v=4","gravatar_id":"","url":"https://api.github.com/users/capistrant","html_url":"https://github.com/capistrant","followers_url":"https://api.github.com/users/capistrant/followers","following_url":"https://api.github.com/users/capistrant/following{/other_user}","gists_url":"https://api.github.com/users/capistrant/gists{/gist_id}","starred_url":"https://api.github.com/users/capistrant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/capistrant/subscriptions","organizations_url":"https://api.github.com/users/capistrant/orgs","repos_url":"https://api.github.com/users/capistrant/repos","events_url":"https://api.github.com/users/capistrant/events{/privacy}","received_events_url":"https://api.github.com/users/capistrant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T22:59:40Z","updated_at":"2019-03-20T22:59:40Z","author_association":"CONTRIBUTOR","body":"@jihoonson I have had time to go back and make changes to the PR. Per my comment above regarding the PasswordProvider, it was not obvious to me that there was some native way for me to use a password provider to prevent jackson from serializing the password field into json written to select locations (the payload and log were the two of note). Due to that, my solution to remove the password from persisted locations was to add a MixIn to the JsonMapper objects responsible for serialization. When doing this, I only wanted to add the MixIn at very select times so I created new object mappers using the existing one as template and then added the MixIn. I choose to do this because changing the Object mapper across the project means the MixIn was persisted to the object mapper and used for serialization at times when I did not want it to be.\r\n\r\nI'm not sure if this the best approach to fixing the Jackson serialization problem that led to the security vulnerability. If I overlooked some better approach, I am happy to amend.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475061148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475061509","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475061509","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475061509,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA2MTUwOQ==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T23:01:04Z","updated_at":"2019-03-20T23:01:04Z","author_association":"NONE","body":"@leventov `AvailableSegmentMetadata` seems good to me as well, yeah I added `holder` probably by looking around at rest of the code base. @jihoonson will try to add more javadocs in the refactoring PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475061509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475068699","html_url":"https://github.com/apache/druid/issues/7305#issuecomment-475068699","issue_url":"https://api.github.com/repos/apache/druid/issues/7305","id":475068699,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA2ODY5OQ==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T23:35:57Z","updated_at":"2019-03-20T23:35:57Z","author_association":"NONE","body":"It seems `isPublished` is also not changed, perhaps both `isAvailable` and `isPublished` can be removed from `SegmentMetadataHolder` or `AvailableSegmentMetadata`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475068699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475069497","html_url":"https://github.com/apache/druid/pull/7145#issuecomment-475069497","issue_url":"https://api.github.com/repos/apache/druid/issues/7145","id":475069497,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA2OTQ5Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T23:40:14Z","updated_at":"2019-03-20T23:40:14Z","author_association":"CONTRIBUTOR","body":"Oh sorry, I missed your question. I'll take another look soon. Thank you for the update!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475069497/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475070105","html_url":"https://github.com/apache/druid/pull/7308#issuecomment-475070105","issue_url":"https://api.github.com/repos/apache/druid/issues/7308","id":475070105,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA3MDEwNQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-20T23:43:47Z","updated_at":"2019-03-20T23:43:47Z","author_association":"CONTRIBUTOR","body":"Thank you for promptly addressing the feedback, LGTM 👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475070105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475091973","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-475091973","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":475091973,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTA5MTk3Mw==","user":{"login":"JinseonyLee","id":26076691,"node_id":"MDQ6VXNlcjI2MDc2Njkx","avatar_url":"https://avatars.githubusercontent.com/u/26076691?v=4","gravatar_id":"","url":"https://api.github.com/users/JinseonyLee","html_url":"https://github.com/JinseonyLee","followers_url":"https://api.github.com/users/JinseonyLee/followers","following_url":"https://api.github.com/users/JinseonyLee/following{/other_user}","gists_url":"https://api.github.com/users/JinseonyLee/gists{/gist_id}","starred_url":"https://api.github.com/users/JinseonyLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JinseonyLee/subscriptions","organizations_url":"https://api.github.com/users/JinseonyLee/orgs","repos_url":"https://api.github.com/users/JinseonyLee/repos","events_url":"https://api.github.com/users/JinseonyLee/events{/privacy}","received_events_url":"https://api.github.com/users/JinseonyLee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T02:07:23Z","updated_at":"2019-03-21T02:07:23Z","author_association":"CONTRIBUTOR","body":"Hi, @jihoonson .\r\nI found a similar error in Druid 0.13.0.\r\nThis problem probably occurs when there is not enough free memory on the server.\r\nWhen an error occurred, the available memory increased from 162056 to 4570104.\r\nDuring the test we were still storing data on the client and there was no loss. \r\nHowever, memory usage was increasing slightly. Perhaps there was not enough memory left for the segment to be created.\r\n\r\n\r\nmiddlemanager.log is below.\r\n\r\n`2019-03-18T10:21:45,196 INFO [forking-task-runner-6] org.apache.druid.indexing.overlord.ForkingTaskRunner - Removing task directory: var/druid/task/index_kafka_ds_test2_9d87293708d7ae2_pdpdjhlh\r\n2019-03-18T10:21:46,079 INFO [WorkerTaskManager-NoticeHandler] org.apache.druid.indexing.worker.WorkerTaskManager - Job's finished. Completed [index_kafka_ds_test4_ee46e16cbb67785_okdcidna] with status [FAILED]\r\n2019-03-18T10:21:46,097 INFO [WorkerTaskManager-NoticeHandler] org.apache.druid.indexing.worker.WorkerTaskManager - Job's finished. Completed [index_kafka_ds_test2_9d87293708d7ae2_pdpdjhlh] with status [FAILED]\r\n2019-03-18T10:21:53,750 INFO [qtp1431064234-77] org.apache.druid.indexing.overlord.ForkingTaskRunner - Killing process for task: index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk\r\n2019-03-18T10:21:53,756 INFO [forking-task-runner-10] org.apache.druid.indexing.common.tasklogs.FileTaskLogs - Wrote task log to: var/druid/indexing-logs/index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk.log\r\n2019-03-18T10:21:53,761 INFO [forking-task-runner-10] org.apache.druid.indexing.overlord.ForkingTaskRunner - Exception caught during execution\r\njava.io.IOException: Stream closed\r\n        at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170) ~[?:1.8.0_181]\r\n        at java.io.BufferedInputStream.read1(BufferedInputStream.java:291) ~[?:1.8.0_181]\r\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:345) ~[?:1.8.0_181]\r\n        at java.io.FilterInputStream.read(FilterInputStream.java:107) ~[?:1.8.0_181]\r\n        at com.google.common.io.ByteStreams.copy(ByteStreams.java:175) ~[guava-16.0.1.jar:?]\r\n        at org.apache.druid.indexing.overlord.ForkingTaskRunner$1.call(ForkingTaskRunner.java:438) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n        at org.apache.druid.indexing.overlord.ForkingTaskRunner$1.call(ForkingTaskRunner.java:223) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_181]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_181]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_181]\r\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]\r\n2019-03-18T10:21:53,792 INFO [forking-task-runner-10] org.apache.druid.indexing.overlord.ForkingTaskRunner - Removing task directory: var/druid/task/index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk\r\n2019-03-18T10:21:53,806 INFO [WorkerTaskManager-NoticeHandler] org.apache.druid.indexing.worker.WorkerTaskManager - Job's finished. Completed [index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk] with status [FAILED]\r\n2019-03-18T10:21:54,362 INFO [WorkerTaskManager-NoticeHandler] org.apache.druid.indexing.worker.WorkerTaskManager - Task[index_kafka_ds_test2_4d88b40775ab307_knbgkefd] started.\r\n2019-03-18T10:21:57,111 INFO [forking-task-runner-15] org.apache.druid.indexing.overlord.ForkingTaskRunner - Running command: java -cp `\r\n\r\n\r\nAnd overlord.log of the same time is below.\r\n\r\n`2019-03-18T10:21:53,939 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.TaskLockbox - TaskLock is now empty: TaskLock{type=EXCLUSIVE, groupId=index_kafka_ds_test2, dataSource=ds_test2, interval=2019-03-18T00:00:00.000Z/2019-03-19T00:00:00.000Z, version=2019-03-18T10:21:47.300Z, priority=75, revoked=false}\r\n2019-03-18T10:21:53,946 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.MetadataTaskStorage - Deleting TaskLock with id[232]: TaskLock{type=EXCLUSIVE, groupId=index_kafka_ds_test2, dataSource=ds_test2, interval=2019-03-18T00:00:00.000Z/2019-03-19T00:00:00.000Z, version=2019-03-18T10:21:47.300Z, priority=75, revoked=false}\r\n2019-03-18T10:21:53,957 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.MetadataTaskStorage - Updating task index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk to status: TaskStatus{id=index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk, status=FAILED, duration=-1, errorMsg=null}\r\n2019-03-18T10:21:53,964 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.TaskQueue - Task done: AbstractTask{id='index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk', groupId='index_kafka_ds_test2', taskResource=TaskResource{availabilityGroup='index_kafka_ds_test2_4d88b40775ab307', requiredCapacity=1}, dataSource='ds_test2', context={checkpoints={\"0\":{\"0\":8275}}, IS_INCREMENTAL_HANDOFF_SUPPORTED=true}}\r\n2019-03-18T10:21:53,964 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.kafka.supervisor.KafkaSupervisor - Killing task [index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn] in the task group\r\n2019-03-18T10:21:53,964 INFO [Curator-PathChildrenCache-1] org.apache.druid.indexing.overlord.RemoteTaskRunner - Cleaning up task[index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk] on worker[localhost:8091]\r\n2019-03-18T10:21:53,968 WARN [Curator-PathChildrenCache-1] org.apache.druid.indexing.overlord.TaskQueue - Unknown task completed: index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk\r\n2019-03-18T10:21:53,968 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.RemoteTaskRunner - Removed task from pending queue: index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn\r\n2019-03-18T10:21:53,968 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.TaskLockbox - Removing task[index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn] from activeTasks\r\n2019-03-18T10:21:53,968 INFO [Curator-PathChildrenCache-1] org.apache.druid.java.util.emitter.core.LoggingEmitter - Event [{\"feed\":\"metrics\",\"timestamp\":\"2019-03-18T10:21:53.968Z\",\"service\":\"druid/overlord\",\"host\":\"localhost:8090\",\"version\":\"0.13.0-incubating\",\"metric\":\"task/run/time\",\"value\":34710,\"dataSource\":\"ds_test2\",\"taskId\":\"index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk\",\"taskStatus\":\"FAILED\",\"taskType\":\"index_kafka\"}]\r\n2019-03-18T10:21:53,969 INFO [Curator-PathChildrenCache-1] org.apache.druid.indexing.overlord.TaskQueue - Task FAILED: AbstractTask{id='index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk', groupId='index_kafka_ds_test2', taskResource=TaskResource{availabilityGroup='index_kafka_ds_test2_4d88b40775ab307', requiredCapacity=1}, dataSource='ds_test2', context={checkpoints={\"0\":{\"0\":8275}}, IS_INCREMENTAL_HANDOFF_SUPPORTED=true}} (34710 run duration)\r\n2019-03-18T10:21:53,969 INFO [Curator-PathChildrenCache-1] org.apache.druid.indexing.overlord.TaskRunnerUtils - Task [index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk] status changed to [FAILED].\r\n2019-03-18T10:21:53,970 INFO [Curator-PathChildrenCache-1] org.apache.druid.indexing.overlord.RemoteTaskRunner - Task[index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk] went bye bye.\r\n2019-03-18T10:21:53,972 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.MetadataTaskStorage - Updating task index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn to status: TaskStatus{id=index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn, status=FAILED, duration=-1, errorMsg=null}\r\n2019-03-18T10:21:53,977 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.overlord.TaskQueue - Task done: AbstractTask{id='index_kafka_ds_test2_4d88b40775ab307_hbdjcjcn', groupId='index_kafka_ds_test2', taskResource=TaskResource{availabilityGroup='index_kafka_ds_test2_4d88b40775ab307', requiredCapacity=1}, dataSource='ds_test2', context={checkpoints={\"0\":{\"0\":8275}}, IS_INCREMENTAL_HANDOFF_SUPPORTED=true}}\r\n2019-03-18T10:21:53,978 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.kafka.supervisor.KafkaSupervisor - [ds_test2] supervisor is running.\r\n2019-03-18T10:21:53,978 INFO [KafkaSupervisor-ds_test2] org.apache.druid.indexing.kafka.supervisor.KafkaSupervisor - Creating new task group [0] for partitions [0]`\r\n\r\n\r\nAnd zookeeper.log of the same time is below.\r\n\r\n`2019-03-18 10:21:45,993 INFO [SyncThread:0] org.apache.zookeeper.server.ZooKeeperServer - Established session 0x169904864e50013 with negotiated timeout 30000 for client /127.0.0.1:50068\r\n2019-03-18 10:21:53,880 INFO [ProcessThread(sid:0 cport:2181):] org.apache.zookeeper.server.PrepRequestProcessor - Processed session termination for sessionid: 0x169904864e5000d\r\n2019-03-18 10:21:53,886 WARN [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181] org.apache.zookeeper.server.NIOServerCnxn - caught end of stream exception\r\nEndOfStreamException: Unable to read additional data from client sessionid 0x169904864e5000d, likely client has closed socket\r\n        at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)\r\n        at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:203)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2019-03-18 10:21:53,891 INFO [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181] org.apache.zookeeper.server.NIOServerCnxn - Closed socket connection for client /127.0.0.1:49798 which had sessionid 0x169904864e5000d\r\n2019-03-18 10:21:56,640 INFO [ProcessThread(sid:0 cport:2181):] org.apache.zookeeper.server.PrepRequestProcessor - Processed session termination for sessionid: 0x169904864e50013`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475091973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475109733","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-475109733","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":475109733,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEwOTczMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T04:24:40Z","updated_at":"2019-03-21T04:24:40Z","author_association":"CONTRIBUTOR","body":"@huang2012chao sorry, I missed your question. If one of Kafka tasks fail, the supervisor would print the reason in the overlord log. This might not easy to find before 0.14 because the reason may be printed in different line from the log of killing tasks. But, the reason to kill tasks should be in the overlord log.\r\n\r\n@usopan Even though we dropped Tranquility officially, it has not been updated for a while. And it doesn't support exactly-once. I would recommend using Kafka indexing service because it's more stable than Tranquility. This error doesn't necessarily mean the ingestion is failing. Rather, it's likely saying the supervisor killed some tasks for good reasons.\r\n\r\n@Jinstarry do you mean the memory of middleManager? Do you see any OutOfMemory error in the failed task log? I guess `index_kafka_ds_test2_4d88b40775ab307_cdkfbhbk` is the failed task you're saying. If you don't see any errors or exceptions in the task log, that means the supervisor killed that task. And if so, the reason for killing tasks should be in the overlord log. You should be able to see logs starting with `Sent shutdown message to worker` to kill those tasks. The reason for killing would be around that log.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475109733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475121316","html_url":"https://github.com/apache/druid/issues/7187#issuecomment-475121316","issue_url":"https://api.github.com/repos/apache/druid/issues/7187","id":475121316,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTEyMTMxNg==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T06:04:16Z","updated_at":"2019-03-21T16:14:14Z","author_association":"CONTRIBUTOR","body":"@peferron \r\n\r\nThank you for your response and for performing a test with an HLL aggregator.\r\n\r\nThe intent of my statements in the preceding entries is to protect the end users of Druid, and ultimately to protect the reputation of Druid as a trustworthy platform.\r\n\r\nIn my statements above, my use of the word \"meaningful\" is with respect to an end user and is meant to imply that the results of **any** query of the above shape could be interpreted usefully (i.e., correct interpretation and similar to what a brute-force exact computation would produce).   \r\n\r\nMy use of the word \"belief\" is again with respect to the end-user:  That he/she might believe (because the Druid specifications say that it can be done) that the **results** of **any** query of the shape stated above would be meaningful (useful and correct).  Of course the query can be executed, that is beside the point, and doesn't require much trust or belief.  \r\n\r\nUnfortunately, running one test does not prove that an algorithm or process works correctly.  Nor does running a hundred or thousand such tests.  However, all one has to do to prove that an algorithm or process does not work is to provide one counter example test that does not work. \r\n\r\nRelying on the fact that the documentation states that the TopN process is _data sensitive_ is a very weak argument, as most end-users probably don't read the documentation, or don't think about what that phrase might mean.  \r\n\r\nThe fact that a data sensitive query might run 30% or 75% faster is a misleading \"sales pitch\" to the end users, because in order for an end user to actually trust that the results from such a query is usefully correct, the end user would have to run each query in brute force, exact mode and check its results with the results from the \"faster\" query.  The total time to do both queries is clearly longer than just running the brute force exact query by itself.   If you think this is ridiculous,  it derives directly from the \"data sensitive\" statement.  Because you cannot prove that a \"data sensitive\" process works on all data, because you can't possibly have access to all data.  More importantly, you don't have access to the end-user's data!  The statement \"data sensitive\" is a huge admission that the process may not work, and without running brute-force tests on all runs, the user would never know whether he/she can trust the results or not.   \r\n\r\nIt appears that it is your opinion that just documenting the process with the words \"data sensitive\" is enough, and if the user wishes to shoot themselves in the foot that that is OK.  I don't share that view, and perhaps nothing I say will change your mind, nonetheless, there are a couple of thoughts that perhaps you might consider.\r\n\r\n1. Allowing positive and negative values as weights in the aggregations.  This actually can work if there is no limiting nor truncations of the data followed by aggregations.  However, with truncations followed by aggregations, negative and positive weights can easily lead to cancellations of weights of items across segments or nodes within the limited region and nullifying any earlier TopN results from individual segments or nodes.  This, I hope you can see, would easily lead to nonsensical results.\r\n\r\n2. Allowing non-linear processes like unique counting (HLL), as an aggregation option, can also lead to very strange results both within the truncated regions and outside the truncated regions.  This is not as serious a problem as allowing negative weights.  It turns out that the use of a unique-counting algorithm like HLL as an aggregator inside a Heavy-Hitter / Frequent-Item sketch has been written about and studied quite a bit in the scientific literature.   However, the algorithms that have been proposed so far are pretty nasty and it is not at all clear that they are practical (e.g., not mergeable, complex, the results are probabilistic, and other issues).  \r\n\r\nFor a mergeable process that incorporates truncation / limiting followed by aggregation, to date we know of no algorithm that would produce trustworthy results if the aggregations allow negative values or non-linear calculations (e.g. unique counting).   \r\n\r\nTo lead the user to believe (or hope) that an expression like\r\n`SELECT x, AGG(y) FROM table ORDER BY AGG(y) DESC LIMIT N when useApproximateTopN is enabled` would produce meaningful, trustworthy results with arbitrary aggregation plug-ins is fundamentally misleading.  And hiding behind the \"data-sensitive\" caveat doesn't change that. \r\n\r\nThe only algorithms that do incorporate truncation / limiting followed by aggregation and do provide trustworthy results are the sketching algorithms described in the scientific literature: the main ones are Misra-Gries, Space-Saver, Heavy-Hitter, and Frequent-Items algorithms.  And all of these algorithms require that the weight aggregations must be linear, additive with positive numbers.   These are not a subset of a larger working set of working algorithms. They are the only set that, to date, work.\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475121316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475296462","html_url":"https://github.com/apache/druid/issues/7312#issuecomment-475296462","issue_url":"https://api.github.com/repos/apache/druid/issues/7312","id":475296462,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTI5NjQ2Mg==","user":{"login":"RestfulBlue","id":32250229,"node_id":"MDQ6VXNlcjMyMjUwMjI5","avatar_url":"https://avatars.githubusercontent.com/u/32250229?v=4","gravatar_id":"","url":"https://api.github.com/users/RestfulBlue","html_url":"https://github.com/RestfulBlue","followers_url":"https://api.github.com/users/RestfulBlue/followers","following_url":"https://api.github.com/users/RestfulBlue/following{/other_user}","gists_url":"https://api.github.com/users/RestfulBlue/gists{/gist_id}","starred_url":"https://api.github.com/users/RestfulBlue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RestfulBlue/subscriptions","organizations_url":"https://api.github.com/users/RestfulBlue/orgs","repos_url":"https://api.github.com/users/RestfulBlue/repos","events_url":"https://api.github.com/users/RestfulBlue/events{/privacy}","received_events_url":"https://api.github.com/users/RestfulBlue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T16:11:56Z","updated_at":"2019-03-21T16:12:26Z","author_association":"NONE","body":"when i look closer i understand this scripts is used from npm build.\r\nto make it work in both ways( from maven and from npm) it can be composed in follow way :\r\n1) copy all files/dirs using webpack copy plugin\r\n2) import css using webpack\r\n3) import stylus using stylus loader https://github.com/shama/stylus-loader\r\n4) for generation of sql functions  - parse file using javascript in webpack.config.js during build and injecting variable with all the  data \r\n5) from maven execute only npm goals instead of bash scripts","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475296462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475315491","html_url":"https://github.com/apache/druid/issues/7297#issuecomment-475315491","issue_url":"https://api.github.com/repos/apache/druid/issues/7297","id":475315491,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTMxNTQ5MQ==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T16:58:15Z","updated_at":"2019-03-21T17:01:02Z","author_association":"NONE","body":"@AlexanderSaydakov \r\nHello, I had made a deep verification and I think this is a bug probably. I had reproduced in druid 0.13.0 and druid 0.14.0-rc1.\r\nI had put some datasets in my git repo (```git@github.com:quenlang/thetaSketch_verification.git``` which you can use to reproduce this problem, includes four files:\r\n- demo_dataset.json: contains all raw data\r\n- demo_sub_dataset.json: only contains partial raw data as oprt_id=13981 which get from the command ```grep 13981 demo_dataset.json >demo_sub_dataset.json```\r\n- demo_datasource.json: datasource schema spec file \r\n- query.json: a query body in JSON format which uses to perform a query\r\n\r\nFirst, I posted a supervisor task request with the ```demo_datasource.json``` and ingested the raw data from the ```demo_dataset.json``` by sending it to Kafka topic. end of the ingesting, I performed a query with the ```query.json```  and druid return to me:\r\n```\r\n[ {\r\n  \"timestamp\" : \"2019-03-18T13:30:00.000Z\",\r\n  \"result\" : {\r\n    \"prefixSuccessBusiness_no\" : 0.0\r\n  }\r\n} ]\r\n```\r\nThis result is correct. but after the task handoff segments to the deep storage when the task duration over or gracefully shut down the supervisor, I launched the same query and druid return to me:\r\n```\r\n[ {\r\n  \"timestamp\" : \"2019-03-18T13:30:00.000Z\",\r\n  \"result\" : {\r\n    \"prefixSuccessBusiness_no\" : 73.0\r\n  }\r\n} ]\r\n```\r\nI do not send other raw data to Kafka topic except the ```demo_datasource.json```, but the data changed after handoff segments. maybe some unexpected operations occur during handoff merge. But I am not sure.\r\n\r\nThen I posted a new supervisor task request with the ```demo_datasource.json``` but changed the datasource name, and send the ```demo_sub_dataset.json``` dataset to a new Kafka topic for supervisor task ingesting. no matter if the task handoff segments to the deep storage, druid always return the same correct result 0.0 to me when I performed the same query. the ```demo_sub_dataset.json``` only contains raw data of oprt_id=13981 which is a selector filter in my query. I am confused. why this sense is correct?\r\n\r\nThe values of column prefix_success_business_no in raw data with the condition in my query are all empty strings. why the first sense has an error result after segments handoff? \r\n\r\nCan you help me find out? Thank you so much!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475315491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475350556","html_url":"https://github.com/apache/druid/pull/7222#issuecomment-475350556","issue_url":"https://api.github.com/repos/apache/druid/issues/7222","id":475350556,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM1MDU1Ng==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T18:28:30Z","updated_at":"2019-03-21T18:28:30Z","author_association":"CONTRIBUTOR","body":"This is interesting.\r\n@drcrallen, is this the interface extraction you were referring to in [Re: Druid module separation (And a related lookups question)](https://lists.apache.org/thread.html/a26216e04012b50fa3a201ddd4e8e5daac30b8bbad95740ab6a2d780@%3Cdev.druid.apache.org%3E)?\r\nI wonder this pr now makes it possible to migrate `LookupDimensionSpec` to `druid-processing`. It will help me with the implementation of [multi-value lookups](https://github.com/apache/incubator-druid/issues/7009). \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475350556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475355040","html_url":"https://github.com/apache/druid/pull/7315#issuecomment-475355040","issue_url":"https://api.github.com/repos/apache/druid/issues/7315","id":475355040,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM1NTA0MA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T18:40:47Z","updated_at":"2019-03-21T18:40:47Z","author_association":"CONTRIBUTOR","body":"Also added a bug fix where the submit functions are calling `this` but not binding correctly (not using the `=>` syntax) producing a harmless NPE","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475355040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475358688","html_url":"https://github.com/apache/druid/pull/7315#issuecomment-475358688","issue_url":"https://api.github.com/repos/apache/druid/issues/7315","id":475358688,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM1ODY4OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T18:51:09Z","updated_at":"2019-03-21T18:51:09Z","author_association":"CONTRIBUTOR","body":"Ideally all the changes in this PR would be back-ported to 0.14.0 also as it fixes a confusing/mislabeled button and two (small) NPEs. But these bugs are not release blockers, IMO","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475358688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475375982","html_url":"https://github.com/apache/druid/pull/7222#issuecomment-475375982","issue_url":"https://api.github.com/repos/apache/druid/issues/7222","id":475375982,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM3NTk4Mg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T19:45:02Z","updated_at":"2019-03-21T19:45:02Z","author_association":"MEMBER","body":">This is interesting.\r\n@drcrallen, is this the interface extraction you were referring to in Re: Druid module separation (And a related lookups question)?\r\n\r\nAh, sorry I hadn't got around to that dev list thread yet, I'll have a look and see if I can move some stuff around since I have to fix up conflicts anyway.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475375982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475388356","html_url":"https://github.com/apache/druid/pull/7275#issuecomment-475388356","issue_url":"https://api.github.com/repos/apache/druid/issues/7275","id":475388356,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM4ODM1Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T20:24:15Z","updated_at":"2019-03-21T20:24:15Z","author_association":"MEMBER","body":"Merging as the PR has been approved for 3 working days.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475388356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475396580","html_url":"https://github.com/apache/druid/pull/7222#issuecomment-475396580","issue_url":"https://api.github.com/repos/apache/druid/issues/7222","id":475396580,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM5NjU4MA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T20:49:04Z","updated_at":"2019-03-21T20:52:17Z","author_association":"MEMBER","body":"@yurmix @drcrallen With this refactor I was able to move these things to the `druid-processing` module since most lookup things just refer to the `LookupExtractorFactoryContainerProvider` interface introduced in this PR:\r\n* `LookupDimensionSpec`\r\n* `LookupExprMacro`\r\n* `LookupExtractorFactoryContainerProvider`\r\n* `RegisteredLookupExtractionFn`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475396580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475410718","html_url":"https://github.com/apache/druid/pull/7222#issuecomment-475410718","issue_url":"https://api.github.com/repos/apache/druid/issues/7222","id":475410718,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQxMDcxOA==","user":{"login":"yurmix","id":1529282,"node_id":"MDQ6VXNlcjE1MjkyODI=","avatar_url":"https://avatars.githubusercontent.com/u/1529282?v=4","gravatar_id":"","url":"https://api.github.com/users/yurmix","html_url":"https://github.com/yurmix","followers_url":"https://api.github.com/users/yurmix/followers","following_url":"https://api.github.com/users/yurmix/following{/other_user}","gists_url":"https://api.github.com/users/yurmix/gists{/gist_id}","starred_url":"https://api.github.com/users/yurmix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurmix/subscriptions","organizations_url":"https://api.github.com/users/yurmix/orgs","repos_url":"https://api.github.com/users/yurmix/repos","events_url":"https://api.github.com/users/yurmix/events{/privacy}","received_events_url":"https://api.github.com/users/yurmix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T21:31:58Z","updated_at":"2019-03-21T21:31:58Z","author_association":"CONTRIBUTOR","body":"Wow, thanks so much! Now I'm going to reinitiate my efforts on multi-value lookups.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475410718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475422462","html_url":"https://github.com/apache/druid/issues/7132#issuecomment-475422462","issue_url":"https://api.github.com/repos/apache/druid/issues/7132","id":475422462,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQyMjQ2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T22:10:42Z","updated_at":"2019-03-21T22:10:42Z","author_association":"CONTRIBUTOR","body":"> The query result may contain timestamps of not specified in the query spec which can mislead users.\r\n\r\nAt query time, I don't think this happens, because elsewhere in the query processing stack data is clipped to the actual input interval. IIRC, what these intervals are used for is populating stuff like the \"timestamp\" of a time-granular result. If you think about the semantics of this method as returning all granular buckets that overlap the input interval, then from that perspective it makes sense to _not_ clip to the input interval.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475422462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475423144","html_url":"https://github.com/apache/druid/issues/7132#issuecomment-475423144","issue_url":"https://api.github.com/repos/apache/druid/issues/7132","id":475423144,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQyMzE0NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-21T22:13:18Z","updated_at":"2019-06-20T20:36:36Z","author_association":"CONTRIBUTOR","body":"Thanks, I agree. I will add a new method that clips. This method would be useful for automatic compaction with a changed segment granularity to avoid to read duplicate data.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475423144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475475512","html_url":"https://github.com/apache/druid/pull/6658#issuecomment-475475512","issue_url":"https://api.github.com/repos/apache/druid/issues/6658","id":475475512,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ3NTUxMg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T02:48:50Z","updated_at":"2019-03-22T02:48:50Z","author_association":"NONE","body":"This pull request has been closed due to lack of activity. If you think that is incorrect, or the pull request requires review, you can revive the PR at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475475512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475485556","html_url":"https://github.com/apache/druid/pull/7322#issuecomment-475485556","issue_url":"https://api.github.com/repos/apache/druid/issues/7322","id":475485556,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTQ4NTU1Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T03:54:24Z","updated_at":"2019-03-22T03:54:24Z","author_association":"CONTRIBUTOR","body":"Skipping TC for non-code change","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475485556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475522269","html_url":"https://github.com/apache/druid/issues/7240#issuecomment-475522269","issue_url":"https://api.github.com/repos/apache/druid/issues/7240","id":475522269,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUyMjI2OQ==","user":{"login":"shuigen","id":15151737,"node_id":"MDQ6VXNlcjE1MTUxNzM3","avatar_url":"https://avatars.githubusercontent.com/u/15151737?v=4","gravatar_id":"","url":"https://api.github.com/users/shuigen","html_url":"https://github.com/shuigen","followers_url":"https://api.github.com/users/shuigen/followers","following_url":"https://api.github.com/users/shuigen/following{/other_user}","gists_url":"https://api.github.com/users/shuigen/gists{/gist_id}","starred_url":"https://api.github.com/users/shuigen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuigen/subscriptions","organizations_url":"https://api.github.com/users/shuigen/orgs","repos_url":"https://api.github.com/users/shuigen/repos","events_url":"https://api.github.com/users/shuigen/events{/privacy}","received_events_url":"https://api.github.com/users/shuigen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T07:39:13Z","updated_at":"2019-03-22T07:39:13Z","author_association":"NONE","body":"becase sum by float,the sum of float data is precise calculation。\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475522269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475564412","html_url":"https://github.com/apache/druid/issues/6872#issuecomment-475564412","issue_url":"https://api.github.com/repos/apache/druid/issues/6872","id":475564412,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU2NDQxMg==","user":{"login":"TicklesTheBrain","id":21967696,"node_id":"MDQ6VXNlcjIxOTY3Njk2","avatar_url":"https://avatars.githubusercontent.com/u/21967696?v=4","gravatar_id":"","url":"https://api.github.com/users/TicklesTheBrain","html_url":"https://github.com/TicklesTheBrain","followers_url":"https://api.github.com/users/TicklesTheBrain/followers","following_url":"https://api.github.com/users/TicklesTheBrain/following{/other_user}","gists_url":"https://api.github.com/users/TicklesTheBrain/gists{/gist_id}","starred_url":"https://api.github.com/users/TicklesTheBrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TicklesTheBrain/subscriptions","organizations_url":"https://api.github.com/users/TicklesTheBrain/orgs","repos_url":"https://api.github.com/users/TicklesTheBrain/repos","events_url":"https://api.github.com/users/TicklesTheBrain/events{/privacy}","received_events_url":"https://api.github.com/users/TicklesTheBrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T10:14:19Z","updated_at":"2019-03-22T10:14:19Z","author_association":"NONE","body":"I'm running into the same issue. Would you mind telling how you fixed this issue? What did you change in common.runtime.properties? Did you need to touch any other configs? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475564412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475591329","html_url":"https://github.com/apache/druid/issues/6442#issuecomment-475591329","issue_url":"https://api.github.com/repos/apache/druid/issues/6442","id":475591329,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTU5MTMyOQ==","user":{"login":"indrekj","id":3438,"node_id":"MDQ6VXNlcjM0Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/3438?v=4","gravatar_id":"","url":"https://api.github.com/users/indrekj","html_url":"https://github.com/indrekj","followers_url":"https://api.github.com/users/indrekj/followers","following_url":"https://api.github.com/users/indrekj/following{/other_user}","gists_url":"https://api.github.com/users/indrekj/gists{/gist_id}","starred_url":"https://api.github.com/users/indrekj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrekj/subscriptions","organizations_url":"https://api.github.com/users/indrekj/orgs","repos_url":"https://api.github.com/users/indrekj/repos","events_url":"https://api.github.com/users/indrekj/events{/privacy}","received_events_url":"https://api.github.com/users/indrekj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T11:49:10Z","updated_at":"2019-03-22T11:49:10Z","author_association":"NONE","body":"@dclim We're using s3 as deep storage and we had an incident when upgrading druid.\r\n\r\nOur s3 access policy is:\r\n```\r\n{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"S3:*\",\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::retracted-druid-dev/acceptance/*\",\r\n                \"arn:aws:s3:::retracted-druid-dev/acceptance-indexer-logs/*\"\r\n            ],\r\n            \"Condition\": {}\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"s3:ListBucket\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::retracted-druid-dev\"\r\n            ],\r\n            \"Condition\": {}\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nPeons however started failing with:\r\n```\r\nCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: Access Denied (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: DA6A50FF8662CAC3; S3 Extended Request ID: UvfZA/YEDbKKlgCUS6u4Tk0e9DTyZkLJqY2iPgYyYOCy08gnLPTkbN1HPy7kyaDd0tkwABIve7A=)\r\n...\r\ncom.amazonaws.services.s3.AmazonS3Client.getBucketAcl(AmazonS3Client.java:1150) ~[aws-java-sdk-s3-1.11.199.jar:?]\r\n        at org.apache.druid.storage.s3.ServerSideEncryptingAmazonS3.getBucketAcl(ServerSideEncryptingAmazonS3.java:70) ~[?:?]\r\n        at org.apache.druid.storage.s3.S3Utils.grantFullControlToBucketOwner(S3Utils.java:199) ~[?:?]\r\n```\r\n\r\nIt didn't even retry. The peons were shutdown and the data was lost.\r\n\r\nWe fixed it by adding `s3:GetBucketAcl` to the policy. This probably should also be mentioned in the release notes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475591329/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475714833","html_url":"https://github.com/apache/druid/issues/7324#issuecomment-475714833","issue_url":"https://api.github.com/repos/apache/druid/issues/7324","id":475714833,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTcxNDgzMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T17:42:35Z","updated_at":"2019-03-22T17:42:35Z","author_association":"CONTRIBUTOR","body":"Thanks for raising this issue! I think this is a definitely bug. The compaction task should automatically set `maxTotalRows` too if it's not set by users. @lxqfy are you planning to make a patch for this bug?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475714833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475761720","html_url":"https://github.com/apache/druid/issues/6442#issuecomment-475761720","issue_url":"https://api.github.com/repos/apache/druid/issues/6442","id":475761720,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc2MTcyMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T20:02:55Z","updated_at":"2019-03-22T20:02:55Z","author_association":"CONTRIBUTOR","body":"Hi @indrekj, it's documented in the [master branch](https://github.com/apache/incubator-druid/blob/master/docs/content/development/extensions-core/s3.md#s3-permissions-settings), but our doc is not updated yet. Sorry for inconvenience.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475761720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475774452","html_url":"https://github.com/apache/druid/issues/7134#issuecomment-475774452","issue_url":"https://api.github.com/repos/apache/druid/issues/7134","id":475774452,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc3NDQ1Mg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T20:39:42Z","updated_at":"2019-03-22T20:46:31Z","author_association":"CONTRIBUTOR","body":"This looks good to me, avoiding the error-prone typeString sounds great, and I agree with using the more minimal orc-mapreduce lib instead of hive-exec (I've seen issues where hive-exec bundling Guava classes has caused incompatibilities)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475774452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475779523","html_url":"https://github.com/apache/druid/pull/7282#issuecomment-475779523","issue_url":"https://api.github.com/repos/apache/druid/issues/7282","id":475779523,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc3OTUyMw==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T20:54:58Z","updated_at":"2019-03-22T20:54:58Z","author_association":"MEMBER","body":"Oops, it looks like we have duplicated some effort (see proposal #7134 and associated PR #7138), but at least it looks like we have the same goal in mind, eliminating usage of `typeString` :sweat_smile:. \r\n\r\nI am no doubt 100% biased on this, but I like my approach a bit better because it supports `flattenSpec` like JSON, Avro, and Parquet, and uses the org.apache ORC libraries instead of the Hive library which bundles a lot of unnecessary dependencies. My approach might also be easier to replicate the column renaming functionality that `typeString` provided, through using flattening expressions, maybe making it easier to maintain Druid ingestion schema when migrating from the current version of the ORC extension to the one provided in my PR. It would appear that my PR would also be compatible with what you are trying to achieve (I also support `timeAndDims` format `parseSpec`), but could you have a look and see if my approach would work for your use case?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475779523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475785465","html_url":"https://github.com/apache/druid/pull/7279#issuecomment-475785465","issue_url":"https://api.github.com/repos/apache/druid/issues/7279","id":475785465,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc4NTQ2NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T21:14:26Z","updated_at":"2019-03-22T21:14:26Z","author_association":"MEMBER","body":"@gianm @asdf2014 I've extended the scope of this PR. I've moved some files from root to a new `dev/` directory. I've also added more committer's instructions:\r\n - PR merge action item checklist\r\n - Creating a new tag on Github","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475785465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475789919","html_url":"https://github.com/apache/druid/issues/7329#issuecomment-475789919","issue_url":"https://api.github.com/repos/apache/druid/issues/7329","id":475789919,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc4OTkxOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T21:29:56Z","updated_at":"2019-03-22T21:29:56Z","author_association":"MEMBER","body":"Also that `factory.getMergeFactory(factory)` is equal to `factory.getCombiningFactory()`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475789919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475793849","html_url":"https://github.com/apache/druid/issues/7217#issuecomment-475793849","issue_url":"https://api.github.com/repos/apache/druid/issues/7217","id":475793849,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTc5Mzg0OQ==","user":{"login":"dclim","id":11050882,"node_id":"MDQ6VXNlcjExMDUwODgy","avatar_url":"https://avatars.githubusercontent.com/u/11050882?v=4","gravatar_id":"","url":"https://api.github.com/users/dclim","html_url":"https://github.com/dclim","followers_url":"https://api.github.com/users/dclim/followers","following_url":"https://api.github.com/users/dclim/following{/other_user}","gists_url":"https://api.github.com/users/dclim/gists{/gist_id}","starred_url":"https://api.github.com/users/dclim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dclim/subscriptions","organizations_url":"https://api.github.com/users/dclim/orgs","repos_url":"https://api.github.com/users/dclim/repos","events_url":"https://api.github.com/users/dclim/events{/privacy}","received_events_url":"https://api.github.com/users/dclim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T21:45:03Z","updated_at":"2019-03-22T21:45:03Z","author_association":"CONTRIBUTOR","body":"@justinborromeo some comments on how I would think about the supervisor state:\r\n\r\nTalking about the happy path first:\r\n\r\nI would define states which lets the user know where in the sequence of stages the supervisor is, but mainly during the first run. That's because most things happen badly in the first run, and some operations might take a long time, such as contacting the stream, trying to contact the discovered tasks to get their status, etc., where things are taking a while and the user wants to know what the supervisor is currently trying to do. Once that first run is complete, things should be somewhat more smooth, so I think we could keep it in a 'working normally' state until it's not working normally anymore.  We can define 'not working normally' as having a certain threshold of exceptions that are thrown on consecutive runs; it might be cool if this is configurable too, because some people may be working in 'flakier' environments than others.\r\n\r\nI think of it as: if it transitions from RUNNING (healthy) to UNHEALTHY, assume that someone has hooked up a monitoring system to it and is going to get paged at 4am in the morning, so it better actually be UNHEALTHY, and not some transient error that is going to resolve in the next minute. I would define thresholds for number of exceptions that you get back before you decide you're now unhealthy and someone needs to deal with you immediately - the threshold could be lower (or 1) for exceptions you know are never going to recover, and could be something higher for things that are likely to recover. Anything related to contacting tasks - such as timeouts waiting for the HTTP response or a bad response that causes you to kill the task, or the task was doing the wrong thing and was killed, to me doesn't constitute UNHEALTHY for the supervisor - it was unhealthy for the task, but the supervisor is designed to recover from this so that's cool, and someone should not get woken up for that unless it happens to multiple tasks consecutively and no ingestion progress can be made.\r\n\r\nSuggest the following happy path states:\r\n\r\n```\r\nWAITING_TO_RUN (I like this a bit better than POSTED_NOT_RUNNING_YET; initial state)\r\n\r\nCONNECTING_TO_STREAM (right before updatePartitionDataFromStream(), only first iteration)\r\n\r\nDISCOVERING_INITIAL_TASKS (right before discoverTasks(), only first iteration)\r\n\r\nCREATING_TASKS (right before createNewTasks())\r\n\r\nRUNNING (after first iteration completes, and remain in this state until some unhealthy threshold is hit)\r\n\r\nSUSPENDED (once we've become suspended - actually when we return, maybe we should go back to the first state of CONNECTING_TO_STREAM -> DISCOVERING_INITAL_TASKS -> etc. instead of just to RUNNING in case we've been suspended for like a month and things have changed)\r\n\r\nSHUTTING_DOWN (replaces AWAITING_SHUTDOWN, it's not really 'waiting', it's actively doing stuff - same place, when stop() is called)\r\n```\r\n\r\nThere can be a long period of time while it's WAITING_TO_RUN before it actually does anything so it's worth a state; it could also take a long time trying to connect to a stream if the stream can't be reached and it's waiting for timeout; same for timeouts while trying to send messages to indexing tasks. All those should only be hit on the first run; once it hits the RUNNING state, it should stay in RUNNING. I'd probably suggest that if it goes to SUSPENDED state and then is restarted, it should again iterate through the states starting with CONNECTING_TO_STREAM since things might have changed a lot and there's a higher probability of failure after a restart from suspended.\r\n\r\nFor error states I'm thinking:\r\n```\r\nUNABLE_TO_CONNECT_TO_STREAM - I like a bit better than UNABLE_TO_CONTACT_STREAM, because you might be able to 'contact' the stream but can't 'connect' - due to version mismatch, authentication, topic not existing, etc.; used for never was able to connect\r\n\r\nLOST_CONTACT_WITH_STREAM - have been able to connect in the past\r\n\r\nUNHEALTHY - general catch-all for failures, could include some stream related ones\r\n```\r\n\r\nSo if it's in CONNECTING_TO_STREAM stage, it'll stay in that stage until either a) it connects and moves on to DISCOVERING_INITIAL_TASKS, or b) some *threshold* of failures has happened, in which case it'll move to UNABLE_TO_CONNECT_TO_STREAM; so it might be in CONNECTING_TO_STREAM stage for a minute or two minutes or five minutes before moving to a failure state, depending on what the threshold before failure is.\r\n\r\nOnce it makes it to RUNNING stage, it'll remain there until: a) it's suspended -> SUSPENDED state; b) it's shutdown - SHUTTING_DOWN state; c) some threshold of failures happen, in which case it'll move to either 1) LOST_CONTACT_WITH_STREAM, if that's what happened, or 2) UNHEALTHY for everything else. That's when the status changes to unhealthy, maybe the /status endpoint returns an HTTP 500 or something, and people need to deal with the issue.\r\n\r\nAnother thing is that some systems require a certain number of 'healthy' events to happen before transitioning out of the UNHEALTHY state back to RUNNING (healthy), to avoid flip-flopping between healthy and unhealthy when the environment is just flaky enough to be sitting on the threshold. To me, it's probably a nice to have but not required.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475793849/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475805623","html_url":"https://github.com/apache/druid/pull/7327#issuecomment-475805623","issue_url":"https://api.github.com/repos/apache/druid/issues/7327","id":475805623,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTgwNTYyMw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-22T22:40:35Z","updated_at":"2019-03-22T22:40:35Z","author_association":"CONTRIBUTOR","body":"@gianm can you fix the conflicts?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475805623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475830950","html_url":"https://github.com/apache/druid/issues/7303#issuecomment-475830950","issue_url":"https://api.github.com/repos/apache/druid/issues/7303","id":475830950,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTgzMDk1MA==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T02:16:25Z","updated_at":"2019-03-23T02:16:25Z","author_association":"CONTRIBUTOR","body":"Submitted a pull request - https://github.com/apache/incubator-druid/pull/7331","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475830950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475839578","html_url":"https://github.com/apache/druid/issues/6872#issuecomment-475839578","issue_url":"https://api.github.com/repos/apache/druid/issues/6872","id":475839578,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTgzOTU3OA==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T04:56:22Z","updated_at":"2019-03-23T04:56:22Z","author_association":"NONE","body":"my main issues was  `druid.zk.service.host`, I fixed that by adding IP address of the zookeeper\r\n\r\n```\r\ndruid.zk.service.host=<ip-address of running zookeeper>\r\ndruid.zk.paths.base=<base folder of the druid inside the docker container eg. /druid>\r\n```\r\nAnd for paths.base, it should be the location of the /druid inside the container.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475839578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/475864278","html_url":"https://github.com/apache/druid/pull/6943#issuecomment-475864278","issue_url":"https://api.github.com/repos/apache/druid/issues/6943","id":475864278,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTg2NDI3OA==","user":{"login":"kamaci","id":3921885,"node_id":"MDQ6VXNlcjM5MjE4ODU=","avatar_url":"https://avatars.githubusercontent.com/u/3921885?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaci","html_url":"https://github.com/kamaci","followers_url":"https://api.github.com/users/kamaci/followers","following_url":"https://api.github.com/users/kamaci/following{/other_user}","gists_url":"https://api.github.com/users/kamaci/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaci/subscriptions","organizations_url":"https://api.github.com/users/kamaci/orgs","repos_url":"https://api.github.com/users/kamaci/repos","events_url":"https://api.github.com/users/kamaci/events{/privacy}","received_events_url":"https://api.github.com/users/kamaci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-23T12:04:23Z","updated_at":"2019-03-23T12:04:23Z","author_association":"MEMBER","body":"> @kamaci please add a Checkstyle check a-la [#6943 (comment)](https://github.com/apache/incubator-druid/pull/6943#issuecomment-458534551). It may be also possible to catch such patterns more effectively with [Structural Search](https://github.com/apache/incubator-druid/pull/7275), but I didn't experiment with that.\r\n\r\n@leventov I've added the checkstyle rule as a warning since it may not be a violation not to obey it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/475864278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476067859","html_url":"https://github.com/apache/druid/issues/7324#issuecomment-476067859","issue_url":"https://api.github.com/repos/apache/druid/issues/7324","id":476067859,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjA2Nzg1OQ==","user":{"login":"lxqfy","id":9974509,"node_id":"MDQ6VXNlcjk5NzQ1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/9974509?v=4","gravatar_id":"","url":"https://api.github.com/users/lxqfy","html_url":"https://github.com/lxqfy","followers_url":"https://api.github.com/users/lxqfy/followers","following_url":"https://api.github.com/users/lxqfy/following{/other_user}","gists_url":"https://api.github.com/users/lxqfy/gists{/gist_id}","starred_url":"https://api.github.com/users/lxqfy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxqfy/subscriptions","organizations_url":"https://api.github.com/users/lxqfy/orgs","repos_url":"https://api.github.com/users/lxqfy/repos","events_url":"https://api.github.com/users/lxqfy/events{/privacy}","received_events_url":"https://api.github.com/users/lxqfy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T06:14:05Z","updated_at":"2019-03-25T06:14:05Z","author_association":"CONTRIBUTOR","body":"@jihoonson There is one more issue. I was trying to overwrite the default `maxTotalRows` manually with `tuningCnofig`, but the Coordinator failed to post the task.\r\n\r\nI will try to make a patch. It may take some time. I need to get familiar with the code.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476067859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476342226","html_url":"https://github.com/apache/druid/pull/7331#issuecomment-476342226","issue_url":"https://api.github.com/repos/apache/druid/issues/7331","id":476342226,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM0MjIyNg==","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T19:23:43Z","updated_at":"2019-03-25T19:24:31Z","author_association":"CONTRIBUTOR","body":"@jihoonson, @gianm - would one of you have some bandwidth to review this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476342226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476348611","html_url":"https://github.com/apache/druid/pull/7331#issuecomment-476348611","issue_url":"https://api.github.com/repos/apache/druid/issues/7331","id":476348611,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM0ODYxMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T19:42:30Z","updated_at":"2019-03-25T19:42:30Z","author_association":"CONTRIBUTOR","body":"Hi @samarthjain, I'm currently trying to finalize 0.14.0 release. I will take a look after the release.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476348611/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476359336","html_url":"https://github.com/apache/druid/issues/7337#issuecomment-476359336","issue_url":"https://api.github.com/repos/apache/druid/issues/7337","id":476359336,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM1OTMzNg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T20:14:41Z","updated_at":"2019-03-25T20:14:41Z","author_association":"CONTRIBUTOR","body":"> Datasketch HLL requires you to specify columns to calculate cardinality over during ingestion time. \r\n\r\nIs this right? IIRC, DataSketches HLL can also work on primitive (number/string) columns at query time. I think the only feature that's missing is the `byRow` calculation.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476359336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476369896","html_url":"https://github.com/apache/druid/pull/6430#issuecomment-476369896","issue_url":"https://api.github.com/repos/apache/druid/issues/6430","id":476369896,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM2OTg5Ng==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T20:44:44Z","updated_at":"2019-03-25T20:44:44Z","author_association":"CONTRIBUTOR","body":"Ping to keep open","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476369896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476370271","html_url":"https://github.com/apache/druid/pull/6953#issuecomment-476370271","issue_url":"https://api.github.com/repos/apache/druid/issues/6953","id":476370271,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM3MDI3MQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T20:45:55Z","updated_at":"2019-03-25T20:45:55Z","author_association":"CONTRIBUTOR","body":"Ping to keep open. need to resolve conflicts and change docs. Trying to get that done soon","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476370271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476371786","html_url":"https://github.com/apache/druid/pull/6430#issuecomment-476371786","issue_url":"https://api.github.com/repos/apache/druid/issues/6430","id":476371786,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM3MTc4Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T20:50:07Z","updated_at":"2019-03-25T20:50:07Z","author_association":"CONTRIBUTOR","body":"@drcrallen thanks for the ping. \r\n\r\n@yurmix I'll take another look once 0.14.0 release is finalized.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476371786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476374011","html_url":"https://github.com/apache/druid/issues/7337#issuecomment-476374011","issue_url":"https://api.github.com/repos/apache/druid/issues/7337","id":476374011,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM3NDAxMQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T20:56:15Z","updated_at":"2019-03-25T20:56:15Z","author_association":"CONTRIBUTOR","body":"Did you use `HLLSketchBuild` at query time? That's the one that operates on raw values","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476374011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476384529","html_url":"https://github.com/apache/druid/issues/7243#issuecomment-476384529","issue_url":"https://api.github.com/repos/apache/druid/issues/7243","id":476384529,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM4NDUyOQ==","user":{"login":"glasser","id":16724,"node_id":"MDQ6VXNlcjE2NzI0","avatar_url":"https://avatars.githubusercontent.com/u/16724?v=4","gravatar_id":"","url":"https://api.github.com/users/glasser","html_url":"https://github.com/glasser","followers_url":"https://api.github.com/users/glasser/followers","following_url":"https://api.github.com/users/glasser/following{/other_user}","gists_url":"https://api.github.com/users/glasser/gists{/gist_id}","starred_url":"https://api.github.com/users/glasser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glasser/subscriptions","organizations_url":"https://api.github.com/users/glasser/orgs","repos_url":"https://api.github.com/users/glasser/repos","events_url":"https://api.github.com/users/glasser/events{/privacy}","received_events_url":"https://api.github.com/users/glasser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T21:28:09Z","updated_at":"2019-03-25T21:28:09Z","author_association":"CONTRIBUTOR","body":"I honestly couldn't figure out what the purpose of the `StringFirstFoldingAggregatorFactory` class was.\r\n\r\nFor a short term fix (to fix the bug, without the refactors you're suggesting), is the suggestion that `StringFirstFoldingAggregatorFactory.makeAggregateCombiner` should have return `this`?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476384529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476387901","html_url":"https://github.com/apache/druid/issues/7243#issuecomment-476387901","issue_url":"https://api.github.com/repos/apache/druid/issues/7243","id":476387901,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM4NzkwMQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T21:38:47Z","updated_at":"2019-03-25T21:39:27Z","author_association":"MEMBER","body":"> For a short term fix (to fix the bug, without the refactors you're suggesting), is the suggestion that StringFirstFoldingAggregatorFactory.makeAggregateCombiner should have return this?\r\n\r\nIt seems to me that no, you cannot return `this`. Folding aggregators are uniquely different from simple aggregators. You can make simple aggregators kind of accept both (AFAIR some complex aggregators work this way), but it will make the basic aggregation less efficient.\r\n\r\nAs a short term fix you can override `makeAggregateCombiner()` in Folding aggregators properly, shouldn't be a very big deal (still without refactoring I'm suggesting).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476387901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476388771","html_url":"https://github.com/apache/druid/pull/6943#issuecomment-476388771","issue_url":"https://api.github.com/repos/apache/druid/issues/6943","id":476388771,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM4ODc3MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T21:41:36Z","updated_at":"2019-03-25T21:41:36Z","author_association":"MEMBER","body":"@kamaci in which case this is not a violation? Could you please point to an example?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476388771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476399166","html_url":"https://github.com/apache/druid/issues/7243#issuecomment-476399166","issue_url":"https://api.github.com/repos/apache/druid/issues/7243","id":476399166,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjM5OTE2Ng==","user":{"login":"glasser","id":16724,"node_id":"MDQ6VXNlcjE2NzI0","avatar_url":"https://avatars.githubusercontent.com/u/16724?v=4","gravatar_id":"","url":"https://api.github.com/users/glasser","html_url":"https://github.com/glasser","followers_url":"https://api.github.com/users/glasser/followers","following_url":"https://api.github.com/users/glasser/following{/other_user}","gists_url":"https://api.github.com/users/glasser/gists{/gist_id}","starred_url":"https://api.github.com/users/glasser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glasser/subscriptions","organizations_url":"https://api.github.com/users/glasser/orgs","repos_url":"https://api.github.com/users/glasser/repos","events_url":"https://api.github.com/users/glasser/events{/privacy}","received_events_url":"https://api.github.com/users/glasser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T22:18:18Z","updated_at":"2019-03-25T22:18:18Z","author_association":"CONTRIBUTOR","body":"Oh I see. I was getting `makeAggregateCombiner()` and `getCombiningFactory()` confused. So make `StringFirstFoldingAggregatoryFactory.makeAggregateCombiner()` return a new `StringFirstFoldingAggregateCombiner` which acts on pairs. I still don't know where to write tests that prove that I've written the correct classes, though.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476399166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476410733","html_url":"https://github.com/apache/druid/pull/6567#issuecomment-476410733","issue_url":"https://api.github.com/repos/apache/druid/issues/6567","id":476410733,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQxMDczMw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T23:04:36Z","updated_at":"2019-03-25T23:04:36Z","author_association":"NONE","body":"This pull request has been marked as stale due to 60 days of inactivity. It will be closed in 1 week if no further activity occurs. If you think that’s incorrect or this pull request requires a review, please simply write any comment. If closed, you can revive the PR at any time and @mention a reviewer or discuss it on the dev@druid.apache.org list. Thank you for your contributions.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476410733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476412013","html_url":"https://github.com/apache/druid/pull/6896#issuecomment-476412013","issue_url":"https://api.github.com/repos/apache/druid/issues/6896","id":476412013,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQxMjAxMw==","user":{"login":"rae89","id":9400794,"node_id":"MDQ6VXNlcjk0MDA3OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9400794?v=4","gravatar_id":"","url":"https://api.github.com/users/rae89","html_url":"https://github.com/rae89","followers_url":"https://api.github.com/users/rae89/followers","following_url":"https://api.github.com/users/rae89/following{/other_user}","gists_url":"https://api.github.com/users/rae89/gists{/gist_id}","starred_url":"https://api.github.com/users/rae89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rae89/subscriptions","organizations_url":"https://api.github.com/users/rae89/orgs","repos_url":"https://api.github.com/users/rae89/repos","events_url":"https://api.github.com/users/rae89/events{/privacy}","received_events_url":"https://api.github.com/users/rae89/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T23:10:30Z","updated_at":"2019-03-25T23:10:30Z","author_association":"NONE","body":"I am having issues building the docker image using the command in the docker readme: `docker build -t druid:0.14.0 -f distribution/docker/Dockerfile .`\r\n\r\nHere is the build failure output:\r\n\r\n> [INFO] druid-time-min-max ................................. SUCCESS [  2.133 s]\r\n> [INFO] druid-google-extensions ............................ SUCCESS [  6.508 s]\r\n> [INFO] druid-virtual-columns .............................. SUCCESS [  2.119 s]\r\n> [INFO] druid-thrift-extensions ............................ SUCCESS [  9.566 s]\r\n> [INFO] ambari-metrics-emitter ............................. FAILURE [  2.370 s]\r\n> [INFO] sqlserver-metadata-storage ......................... SKIPPED\r\n> [INFO] kafka-emitter ...................................... SKIPPED\r\n> [INFO] druid-redis-cache .................................. SKIPPED\r\n> [INFO] druid-opentsdb-emitter ............................. SKIPPED\r\n> [INFO] materialized-view-maintenance ...................... SKIPPED\r\n> [INFO] materialized-view-selection ........................ SKIPPED\r\n> [INFO] druid-momentsketch ................................. SKIPPED\r\n> [INFO] distribution ....................................... SKIPPED\r\n> [INFO] ------------------------------------------------------------------------\r\n> [INFO] BUILD FAILURE\r\n> [INFO] ------------------------------------------------------------------------\r\n> [INFO] Total time:  10:02 min\r\n> [INFO] Finished at: 2019-03-25T23:08:02Z\r\n> [INFO] ------------------------------------------------------------------------\r\n> [ERROR] Failed to execute goal on project ambari-metrics-emitter: Could not resolve dependencies for project org.apache.druid.extensions.contrib:ambari-metrics-emitter:jar:0.15.0-incubating-SNAPSHOT: Could not transfer artifact org.apache.ambari:ambari-metrics-common:jar:2.4.1.0.22 from/to hortonworks (http://repo.hortonworks.com/content/repositories/releases): Failed to transfer file http://repo.hortonworks.com/content/repositories/releases/org/apache/ambari/ambari-metrics-common/2.4.1.0.22/ambari-metrics-common-2.4.1.0.22.jar with status code 503 -> [Help 1]\r\n> [ERROR]\r\n> [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n> [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n> [ERROR]\r\n> [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n> [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n> [ERROR]\r\n> [ERROR] After correcting the problems, you can resume the build with the command\r\n> [ERROR]   mvn <goals> -rf :ambari-metrics-emitter\r\n> The command '/bin/sh -c mvn install -ff -DskipTests -Dforbiddenapis.skip=true -Pdist -Pbundle-contrib-exts' returned a non-zero code: 1","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476412013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476417234","html_url":"https://github.com/apache/druid/issues/7243#issuecomment-476417234","issue_url":"https://api.github.com/repos/apache/druid/issues/7243","id":476417234,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQxNzIzNA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-25T23:34:03Z","updated_at":"2019-03-25T23:34:03Z","author_association":"MEMBER","body":"I cannot think of a better place than `StringFirstFoldingAggregatoryFactoryTest`, and calling methods like `makeAggregateCombiner()` manually and applying values manually. Admittedly, these interfaces are hard to test. It needs work. I've opened #7340 about this.\r\n\r\nFor your patch, it's not *obligatory* to add such tests, at least because many other aggregator factories currently don't have such tests either.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476417234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476435605","html_url":"https://github.com/apache/druid/issues/7243#issuecomment-476435605","issue_url":"https://api.github.com/repos/apache/druid/issues/7243","id":476435605,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQzNTYwNQ==","user":{"login":"glasser","id":16724,"node_id":"MDQ6VXNlcjE2NzI0","avatar_url":"https://avatars.githubusercontent.com/u/16724?v=4","gravatar_id":"","url":"https://api.github.com/users/glasser","html_url":"https://github.com/glasser","followers_url":"https://api.github.com/users/glasser/followers","following_url":"https://api.github.com/users/glasser/following{/other_user}","gists_url":"https://api.github.com/users/glasser/gists{/gist_id}","starred_url":"https://api.github.com/users/glasser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glasser/subscriptions","organizations_url":"https://api.github.com/users/glasser/orgs","repos_url":"https://api.github.com/users/glasser/repos","events_url":"https://api.github.com/users/glasser/events{/privacy}","received_events_url":"https://api.github.com/users/glasser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T01:12:34Z","updated_at":"2019-03-26T01:12:34Z","author_association":"CONTRIBUTOR","body":"Sure, I guess the problem is I can write tests that validate that the particular classes do what I wrote them to do, but I'm not sure how to write tests that validate that all the different components of aggregating work together properly with the right types, especially as I don't really understand this corner of Druid well.  The difference between \"does the code do what I think it does\" and \"does the code implement the right thing\".","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476435605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476443066","html_url":"https://github.com/apache/druid/pull/7282#issuecomment-476443066","issue_url":"https://api.github.com/repos/apache/druid/issues/7282","id":476443066,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ0MzA2Ng==","user":{"login":"es1220","id":3658592,"node_id":"MDQ6VXNlcjM2NTg1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3658592?v=4","gravatar_id":"","url":"https://api.github.com/users/es1220","html_url":"https://github.com/es1220","followers_url":"https://api.github.com/users/es1220/followers","following_url":"https://api.github.com/users/es1220/following{/other_user}","gists_url":"https://api.github.com/users/es1220/gists{/gist_id}","starred_url":"https://api.github.com/users/es1220/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/es1220/subscriptions","organizations_url":"https://api.github.com/users/es1220/orgs","repos_url":"https://api.github.com/users/es1220/repos","events_url":"https://api.github.com/users/es1220/events{/privacy}","received_events_url":"https://api.github.com/users/es1220/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T01:53:30Z","updated_at":"2019-03-26T01:53:30Z","author_association":"CONTRIBUTOR","body":"Your approach works well in my case. Thanks reply.\r\n\r\nI close my PR #7282.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476443066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476450183","html_url":"https://github.com/apache/druid/pull/6896#issuecomment-476450183","issue_url":"https://api.github.com/repos/apache/druid/issues/6896","id":476450183,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ1MDE4Mw==","user":{"login":"donbowman","id":5131923,"node_id":"MDQ6VXNlcjUxMzE5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/5131923?v=4","gravatar_id":"","url":"https://api.github.com/users/donbowman","html_url":"https://github.com/donbowman","followers_url":"https://api.github.com/users/donbowman/followers","following_url":"https://api.github.com/users/donbowman/following{/other_user}","gists_url":"https://api.github.com/users/donbowman/gists{/gist_id}","starred_url":"https://api.github.com/users/donbowman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/donbowman/subscriptions","organizations_url":"https://api.github.com/users/donbowman/orgs","repos_url":"https://api.github.com/users/donbowman/repos","events_url":"https://api.github.com/users/donbowman/events{/privacy}","received_events_url":"https://api.github.com/users/donbowman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T02:30:38Z","updated_at":"2019-03-26T02:30:38Z","author_association":"CONTRIBUTOR","body":"It does fetch the files from your local dir (e.g. whatever you have checked\nout). is it possible there was an error there?\n\nI just tried from the RC tag:\n\ndon@cube[gke-corp]:druid$ git checkout -b druid-0.14.0-incubating-rc1\nSwitched to a new branch 'druid-0.14.0-incubating-rc1'\ndon@cube[gke-corp]:druid$ docker build -t druid:0.14.0 -f\ndistribution/docker/Dockerfile .\n\n...\n\n[INFO]\n------------------------------------------------------------------------\n[INFO] Reactor Summary for Druid 0.15.0-incubating-SNAPSHOT:\n[INFO]\n[INFO] Druid .............................................. SUCCESS [\n33.112 s]\n[INFO] druid-core ......................................... SUCCESS [01:24\nmin]\n[INFO] druid-hll .......................................... SUCCESS [\n4.200 s]\n[INFO] extendedset ........................................ SUCCESS [\n2.976 s]\n[INFO] druid-processing ................................... SUCCESS [\n21.345 s]\n[INFO] druid-aws-common ................................... SUCCESS [\n4.630 s]\n[INFO] druid-console ...................................... SUCCESS [\n24.877 s]\n[INFO] druid-server ....................................... SUCCESS [\n26.654 s]\n[INFO] druid-examples ..................................... SUCCESS [\n5.936 s]\n[INFO] druid-indexing-hadoop .............................. SUCCESS [\n29.969 s]\n[INFO] druid-indexing-service ............................. SUCCESS [\n7.512 s]\n[INFO] druid-sql .......................................... SUCCESS [\n9.218 s]\n[INFO] druid-services ..................................... SUCCESS [\n11.430 s]\n[INFO] druid-s3-extensions ................................ SUCCESS [\n2.291 s]\n[INFO] druid-datasketches ................................. SUCCESS [\n3.742 s]\n[INFO] druid-histogram .................................... SUCCESS [\n2.981 s]\n[INFO] mysql-metadata-storage ............................. SUCCESS [\n2.301 s]\n[INFO] druid-kafka-indexing-service ....................... SUCCESS [\n6.335 s]\n[INFO] druid-basic-security ............................... SUCCESS [\n2.670 s]\n[INFO] simple-client-sslcontext ........................... SUCCESS [\n1.788 s]\n[INFO] druid-integration-tests ............................ SUCCESS [\n5.130 s]\n[INFO] druid-benchmarks ................................... SUCCESS [\n18.045 s]\n[INFO] druid-avro-extensions .............................. SUCCESS [\n24.472 s]\n[INFO] druid-bloom-filter ................................. SUCCESS [\n2.969 s]\n[INFO] druid-kerberos ..................................... SUCCESS [\n2.383 s]\n[INFO] druid-hdfs-storage ................................. SUCCESS [\n3.115 s]\n[INFO] druid-stats ........................................ SUCCESS [\n1.587 s]\n[INFO] druid-kafka-eight .................................. SUCCESS [\n3.535 s]\n[INFO] druid-lookups-cached-global ........................ SUCCESS [\n4.772 s]\n[INFO] druid-kafka-extraction-namespace ................... SUCCESS [\n2.186 s]\n[INFO] druid-kinesis-indexing-service ..................... SUCCESS [\n5.159 s]\n[INFO] druid-parquet-extensions ........................... SUCCESS [\n4.767 s]\n[INFO] postgresql-metadata-storage ........................ SUCCESS [\n2.715 s]\n[INFO] druid-protobuf-extensions .......................... SUCCESS [\n4.891 s]\n[INFO] druid-lookups-cached-single ........................ SUCCESS [\n2.436 s]\n[INFO] druid-influx-extensions ............................ SUCCESS [\n1.388 s]\n[INFO] druid-azure-extensions ............................. SUCCESS [\n1.911 s]\n[INFO] druid-cassandra-storage ............................ SUCCESS [\n6.038 s]\n[INFO] druid-rocketmq ..................................... SUCCESS [\n2.398 s]\n[INFO] druid-cloudfiles-extensions ........................ SUCCESS [\n11.416 s]\n[INFO] graphite-emitter ................................... SUCCESS [\n2.465 s]\n[INFO] druid-kafka-eight-simple-consumer .................. SUCCESS [\n1.497 s]\n[INFO] druid-rabbitmq ..................................... SUCCESS [\n1.860 s]\n[INFO] druid-distinctcount ................................ SUCCESS [\n1.428 s]\n[INFO] statsd-emitter ..................................... SUCCESS [\n4.146 s]\n[INFO] druid-orc-extensions ............................... SUCCESS [\n7.612 s]\n[INFO] druid-time-min-max ................................. SUCCESS [\n1.394 s]\n[INFO] druid-google-extensions ............................ SUCCESS [\n3.875 s]\n[INFO] druid-virtual-columns .............................. SUCCESS [\n1.480 s]\n[INFO] druid-thrift-extensions ............................ SUCCESS [\n7.749 s]\n[INFO] ambari-metrics-emitter ............................. SUCCESS [\n3.212 s]\n[INFO] sqlserver-metadata-storage ......................... SUCCESS [\n1.762 s]\n[INFO] kafka-emitter ...................................... SUCCESS [\n2.080 s]\n[INFO] druid-redis-cache .................................. SUCCESS [\n3.056 s]\n[INFO] druid-opentsdb-emitter ............................. SUCCESS [\n1.802 s]\n[INFO] materialized-view-maintenance ...................... SUCCESS [\n2.006 s]\n[INFO] materialized-view-selection ........................ SUCCESS [\n2.072 s]\n[INFO] druid-momentsketch ................................. SUCCESS [\n1.911 s]\n[INFO] distribution ....................................... SUCCESS [01:22\nmin]\n[INFO]\n------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO]\n------------------------------------------------------------------------\n[INFO] Total time:  08:54 min\n[INFO] Finished at: 2019-03-26T02:28:23Z\n[INFO]\n------------------------------------------------------------------------\nRemoving intermediate container e9517d295277\n  ...\n\n\nOn Mon, 25 Mar 2019 at 19:10, Robert Espinoza <notifications@github.com>\nwrote:\n\n> I am having issues building the docker image using the command in the\n> docker readme: docker build -t druid:0.14.0 -f\n> distribution/docker/Dockerfile .\n>\n> Here is the build failure output:\n>\n> [INFO] druid-time-min-max ................................. SUCCESS [\n> 2.133 s]\n> [INFO] druid-google-extensions ............................ SUCCESS [\n> 6.508 s]\n> [INFO] druid-virtual-columns .............................. SUCCESS [\n> 2.119 s]\n> [INFO] druid-thrift-extensions ............................ SUCCESS [\n> 9.566 s]\n> [INFO] ambari-metrics-emitter ............................. FAILURE [\n> 2.370 s]\n> [INFO] sqlserver-metadata-storage ......................... SKIPPED\n> [INFO] kafka-emitter ...................................... SKIPPED\n> [INFO] druid-redis-cache .................................. SKIPPED\n> [INFO] druid-opentsdb-emitter ............................. SKIPPED\n> [INFO] materialized-view-maintenance ...................... SKIPPED\n> [INFO] materialized-view-selection ........................ SKIPPED\n> [INFO] druid-momentsketch ................................. SKIPPED\n> [INFO] distribution ....................................... SKIPPED\n> [INFO]\n> ------------------------------------------------------------------------\n> [INFO] BUILD FAILURE\n> [INFO]\n> ------------------------------------------------------------------------\n> [INFO] Total time: 10:02 min\n> [INFO] Finished at: 2019-03-25T23:08:02Z\n> [INFO]\n> ------------------------------------------------------------------------\n> [ERROR] Failed to execute goal on project ambari-metrics-emitter: Could\n> not resolve dependencies for project\n> org.apache.druid.extensions.contrib:ambari-metrics-emitter:jar:0.15.0-incubating-SNAPSHOT:\n> Could not transfer artifact\n> org.apache.ambari:ambari-metrics-common:jar:2.4.1.0.22 from/to hortonworks (\n> http://repo.hortonworks.com/content/repositories/releases): Failed to\n> transfer file\n> http://repo.hortonworks.com/content/repositories/releases/org/apache/ambari/ambari-metrics-common/2.4.1.0.22/ambari-metrics-common-2.4.1.0.22.jar\n> with status code 503 -> [Help 1]\n> [ERROR]\n> [ERROR] To see the full stack trace of the errors, re-run Maven with the\n> -e switch.\n> [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n> [ERROR]\n> [ERROR] For more information about the errors and possible solutions,\n> please read the following articles:\n> [ERROR] [Help 1]\n> http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n> [ERROR]\n> [ERROR] After correcting the problems, you can resume the build with the\n> command\n> [ERROR] mvn -rf :ambari-metrics-emitter\n> The command '/bin/sh -c mvn install -ff -DskipTests\n> -Dforbiddenapis.skip=true -Pdist -Pbundle-contrib-exts' returned a non-zero\n> code: 1\n>\n> —\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-druid/pull/6896#issuecomment-476412013>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AE5Ok9dnuH44NVNsT7npKQdpuFhd_3xEks5vaVd3gaJpZM4aLkB1>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476450183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476824500","html_url":"https://github.com/apache/druid/pull/3956#issuecomment-476824500","issue_url":"https://api.github.com/repos/apache/druid/issues/3956","id":476824500,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjgyNDUwMA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T20:01:07Z","updated_at":"2019-03-26T20:01:07Z","author_association":"NONE","body":"This pull request has been closed due to lack of activity. If you think that is incorrect, or the pull request requires review, you can revive the PR at any time.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476824500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476832276","html_url":"https://github.com/apache/druid/pull/7281#issuecomment-476832276","issue_url":"https://api.github.com/repos/apache/druid/issues/7281","id":476832276,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjgzMjI3Ng==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T20:19:34Z","updated_at":"2019-03-26T20:19:34Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 any chance you can review this one?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476832276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/476839033","html_url":"https://github.com/apache/druid/issues/7159#issuecomment-476839033","issue_url":"https://api.github.com/repos/apache/druid/issues/7159","id":476839033,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjgzOTAzMw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-26T20:34:44Z","updated_at":"2019-03-26T20:34:44Z","author_association":"MEMBER","body":"Another instance when the same thing is split between balancing and loading sides is `BalancerSegmentHolder.lifetime` (currently configurable, equals to 15) and `CoordinatorDynamicConfig.replicantLifetime` (affects the \"lifetime\" for loading).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/476839033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]