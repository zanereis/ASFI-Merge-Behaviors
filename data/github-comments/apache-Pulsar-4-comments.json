[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/260938504","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-260938504","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":260938504,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDkzODUwNA==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T12:50:26Z","updated_at":"2016-11-16T12:50:26Z","author_association":"NONE","body":"I changed ledgerStorageClass=org.apache.bookkeeper.bookie.SortedLedgerStorage in bookkeeper.conf, the throughput is healthy now.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/260938504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005275","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261005275","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261005275,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAwNTI3NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T17:01:27Z","updated_at":"2016-11-16T17:01:27Z","author_association":"CONTRIBUTOR","body":"> I changed ledgerStorageClass=org.apache.bookkeeper.bookie.SortedLedgerStorage in bookkeeper.conf, the throughput is healthy now.\n\nSeems to work, thanks!\n\n> For example, to report stats to SLF4J logger, add this to bookkeeper.conf :\n> \n> ```\n> statsProviderClass=org.apache.bookkeeper.stats.CodahaleMetricsProvider\n> codahaleStatsSlf4jEndpoint=stats\n> ```\n\n@merlimat couldn't get this to work, Bookkeeper is complaining it can't find that class.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005394","html_url":"https://github.com/apache/pulsar/pull/88#issuecomment-261005394","issue_url":"https://api.github.com/repos/apache/pulsar/issues/88","id":261005394,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAwNTM5NA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T17:01:53Z","updated_at":"2016-11-16T17:01:53Z","author_association":"CONTRIBUTOR","body":"@merlimat tests are green now, can you give this a last review?\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005417","html_url":"https://github.com/apache/pulsar/pull/101#issuecomment-261005417","issue_url":"https://api.github.com/repos/apache/pulsar/issues/101","id":261005417,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAwNTQxNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T17:01:57Z","updated_at":"2016-11-16T17:01:57Z","author_association":"CONTRIBUTOR","body":"@merlimat tests are green now, can you give this a last review?\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261005417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261021306","html_url":"https://github.com/apache/pulsar/issues/100#issuecomment-261021306","issue_url":"https://api.github.com/repos/apache/pulsar/issues/100","id":261021306,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAyMTMwNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T17:58:15Z","updated_at":"2016-11-16T17:58:15Z","author_association":"CONTRIBUTOR","body":"Fixed in #101 \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261021306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261028664","html_url":"https://github.com/apache/pulsar/issues/81#issuecomment-261028664","issue_url":"https://api.github.com/repos/apache/pulsar/issues/81","id":261028664,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAyODY2NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T18:24:53Z","updated_at":"2016-11-16T18:24:53Z","author_association":"CONTRIBUTOR","body":"Fixed by #88 \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261028664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261033402","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261033402","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261033402,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAzMzQwMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T18:41:27Z","updated_at":"2016-11-16T18:41:27Z","author_association":"CONTRIBUTOR","body":"> @merlimat couldn't get this to work, Bookkeeper is complaining it can't find that class. \n\nOuch, I think that's because we are not including the dependency on `org.apache.bookkeeper:codahale-metrics-provider` in the distribution tgz. \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261033402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261033809","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261033809","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261033809,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTAzMzgwOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T18:42:54Z","updated_at":"2016-11-16T18:45:27Z","author_association":"CONTRIBUTOR","body":"> I changed ledgerStorageClass=org.apache.bookkeeper.bookie.SortedLedgerStorage in bookkeeper.conf, the throughput is healthy now. \n\n@sschepens @DongbinNie If you don't have many topics per single bookie (< 10K). The `SortedLedgerStorage` it's probably a very good choice.\n\nIf you don't want to wipe out the bookie you can convert the indexes from Sorted/Interleaved storage and RocksDb indexes with these commands : \n\n``` shell\n# RocksDB to interleavead/sorted storage\nbin/bookkeeper shell convert-to-interleaved-storage\n\n# Interleaved to RocksDB\nbin/bookkeeper shell convert-to-db-storage \n```\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261033809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261043016","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261043016","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261043016,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA0MzAxNg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T19:16:00Z","updated_at":"2016-11-16T19:16:00Z","author_association":"CONTRIBUTOR","body":"@merlimat what other choice do we have?  the default storage now is triggering really bad performance\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261043016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261043691","html_url":"https://github.com/apache/pulsar/pull/113#issuecomment-261043691","issue_url":"https://api.github.com/repos/apache/pulsar/issues/113","id":261043691,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA0MzY5MQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T19:18:48Z","updated_at":"2016-11-16T19:18:48Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261043691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261058622","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261058622","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261058622,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA1ODYyMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T20:14:39Z","updated_at":"2016-11-16T20:14:39Z","author_association":"CONTRIBUTOR","body":"The default storage implementation in Apache BookKeeper is SortedLedgerStorage. The \"older\" implementation was the InterleavedLedgerStorage, which is still available and has the same index format as the SortedLedgerStorage. The 2 are pretty much interchangeable, with the main difference being that SortedLedgerStorage maintains an in memory write-cache of entries, and then sorts them before flushing the entry-log. This gives better read-throughput when draining backlog.\n\nAt Yahoo we have developed DbLedgerStorage, which share some of goals of SortedLedgerStorage, but it's designed to scale to 100s of thousands of active ledgers per bookie. Again we have a write cache / read cache and we keep the offset indexes in RocksDB. This implementation is quite stable and used in prod since long time. Probably there may be some\nconfiguration parameters that need to be adjusted in some way for different machine specs.\n\nCan you share the exact steps of your test, so that I can try to reproduce the bad behavior locally? \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261058622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261059478","html_url":"https://github.com/apache/pulsar/issues/114#issuecomment-261059478","issue_url":"https://api.github.com/repos/apache/pulsar/issues/114","id":261059478,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA1OTQ3OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T20:18:12Z","updated_at":"2016-11-16T20:18:12Z","author_association":"CONTRIBUTOR","body":"Uhm, this smells like a deadlock in latest master code.. Can you take a jstack of the broker process (before it restarts itself) and attach it here?\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261059478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261068478","html_url":"https://github.com/apache/pulsar/issues/114#issuecomment-261068478","issue_url":"https://api.github.com/repos/apache/pulsar/issues/114","id":261068478,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA2ODQ3OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T20:54:08Z","updated_at":"2016-11-16T20:54:08Z","author_association":"CONTRIBUTOR","body":"Can you also share which configuration you have modified from default ?\n\nThere should be no need to set `loadBalancerAutoBundleSplitEnabled=true` for the load balancer to work. That flag is to control whether to dynamically split bundles based on load, but the load balancer works event without that.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261068478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261077840","html_url":"https://github.com/apache/pulsar/issues/114#issuecomment-261077840","issue_url":"https://api.github.com/repos/apache/pulsar/issues/114","id":261077840,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA3Nzg0MA==","user":{"login":"lovelle","id":7503370,"node_id":"MDQ6VXNlcjc1MDMzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/7503370?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelle","html_url":"https://github.com/lovelle","followers_url":"https://api.github.com/users/lovelle/followers","following_url":"https://api.github.com/users/lovelle/following{/other_user}","gists_url":"https://api.github.com/users/lovelle/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelle/subscriptions","organizations_url":"https://api.github.com/users/lovelle/orgs","repos_url":"https://api.github.com/users/lovelle/repos","events_url":"https://api.github.com/users/lovelle/events{/privacy}","received_events_url":"https://api.github.com/users/lovelle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T21:28:49Z","updated_at":"2016-11-16T21:28:49Z","author_association":"CONTRIBUTOR","body":"Hi Matteo.\n\nHere is jstack from broker just a moment before shutdown:  [jstack_broker.txt](https://github.com/yahoo/pulsar/files/595929/jstack_broker.txt)\n\nThe parameters we have changed in brokers are:\n\n```\nbrokerDeleteInactiveTopicsEnabled=false\nmaxUnackedMessagesPerConsumer=1000000\nmanagedLedgerDefaultEnsembleSize=3\nmanagedLedgerDefaultWriteQuorum=3\nloadBalancerPlacementStrategy=weightedRandomSelection\nloadBalancerReportUpdateMaxIntervalMinutes=5\nloadBalancerSheddingIntervalMinutes=15\nloadBalancerAutoBundleSplitEnabled=true\nmanagedLedgerCacheSizeMB=4096\n```\n\nWe are aware that broker should balance fine without `loadBalancerAutoBundleSplitEnabled` enabled, but we were testing all features that seemed to fit our requirements for production env.\n\nThanks for your help.\nBye.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261077840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261092169","html_url":"https://github.com/apache/pulsar/issues/114#issuecomment-261092169","issue_url":"https://api.github.com/repos/apache/pulsar/issues/114","id":261092169,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA5MjE2OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T22:24:42Z","updated_at":"2016-11-16T22:24:42Z","author_association":"CONTRIBUTOR","body":"Ok, we could see the problem from the jstack. This is the thread that is deadlocking itself : \n\n```\n\"main-EventThread\" #21 daemon prio=5 os_prio=0 tid=0x00007f7ee0eae000 nid=0x34 waiting on condition [0x00007f7e4bffe000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  <0x00000000c6f087e8> (a java.util.concurrent.CompletableFuture$Signaller)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    at java.util.concurrent.CompletableFuture$Signaller.block(CompletableFuture.java:1693)\n    at java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3323)\n    at java.util.concurrent.CompletableFuture.waitingGet(CompletableFuture.java:1729)\n    at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)\n    at com.github.benmanes.caffeine.cache.LocalAsyncLoadingCache$LoadingCacheView.get(LocalAsyncLoadingCache.java:383)\n    at com.yahoo.pulsar.common.naming.NamespaceBundleFactory.getBundles(NamespaceBundleFactory.java:130)\n    at com.yahoo.pulsar.broker.namespace.NamespaceService.getBundle(NamespaceService.java:140)\n    at com.yahoo.pulsar.broker.service.BrokerService.addTopicToStatsMaps(BrokerService.java:524)\n    at com.yahoo.pulsar.broker.service.BrokerService.lambda$refreshTopicToStatsMaps$11(BrokerService.java:550)\n    at com.yahoo.pulsar.broker.service.BrokerService$$Lambda$326/1860451344.accept(Unknown Source)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\n    at com.yahoo.pulsar.broker.service.BrokerService.refreshTopicToStatsMaps(BrokerService.java:549)\n    at com.yahoo.pulsar.broker.namespace.NamespaceService$2.processResult(NamespaceService.java:571)\n    at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:554)\n    at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:505)\n```\n\nThe problem was introduced in current master (not in 1.15.x). There is a mix of ZK async and sync operations due to a cache miss on the ZooKeeperDataCache. \n\nFrom the same ZK MainEvent thread we process the event and eventually trigger a sync ZK read that cannot complete because it needs the MainEvent thread to process the read response.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261092169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261094688","html_url":"https://github.com/apache/pulsar/pull/115#issuecomment-261094688","issue_url":"https://api.github.com/repos/apache/pulsar/issues/115","id":261094688,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTA5NDY4OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T22:34:56Z","updated_at":"2016-11-16T22:34:56Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261094688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261105127","html_url":"https://github.com/apache/pulsar/issues/114#issuecomment-261105127","issue_url":"https://api.github.com/repos/apache/pulsar/issues/114","id":261105127,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEwNTEyNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T23:21:45Z","updated_at":"2016-11-16T23:21:45Z","author_association":"CONTRIBUTOR","body":"Fixed in #115 \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261105127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261109126","html_url":"https://github.com/apache/pulsar/pull/111#issuecomment-261109126","issue_url":"https://api.github.com/repos/apache/pulsar/issues/111","id":261109126,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEwOTEyNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-16T23:42:47Z","updated_at":"2016-11-16T23:42:47Z","author_association":"CONTRIBUTOR","body":"@saandrews updated\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261109126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122611","html_url":"https://github.com/apache/pulsar/pull/117#issuecomment-261122611","issue_url":"https://api.github.com/repos/apache/pulsar/issues/117","id":261122611,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyMjYxMQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T00:59:16Z","updated_at":"2016-11-17T00:59:16Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122612","html_url":"https://github.com/apache/pulsar/pull/117#issuecomment-261122612","issue_url":"https://api.github.com/repos/apache/pulsar/issues/117","id":261122612,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyMjYxMg==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T00:59:16Z","updated_at":"2016-11-17T00:59:16Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122613","html_url":"https://github.com/apache/pulsar/pull/117#issuecomment-261122613","issue_url":"https://api.github.com/repos/apache/pulsar/issues/117","id":261122613,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyMjYxMw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T00:59:16Z","updated_at":"2016-11-17T00:59:16Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261122613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261125895","html_url":"https://github.com/apache/pulsar/pull/117#issuecomment-261125895","issue_url":"https://api.github.com/repos/apache/pulsar/issues/117","id":261125895,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTEyNTg5NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T01:18:22Z","updated_at":"2016-11-17T01:18:22Z","author_association":"CONTRIBUTOR","body":"Addressed the changes. \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261125895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261150267","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261150267","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261150267,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTE1MDI2Nw==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T04:07:53Z","updated_at":"2016-11-17T04:07:53Z","author_association":"NONE","body":"> Can you share the exact steps of your test, so that I can try to reproduce the bad behavior locally?\n\nIt can be re-produced easily in my env(with SAS disk) in following steps:\n1. starting perf-consumer: bin/pulsar-perf consume -n 1 -s sub-0 -q 1000 -u foo_url bar_topicUrl\n2. starting perf-producer: bin/pulsar-perf produce -n 20 -r 10000 -s 256 -u foo_url bar_topicUrl\n3. after received some messages in the consumer side, stop the consumer\n4. let the producer running for some times, e.g. 30 mins\n5. restart the perf-consumer: bin/pulsar-perf consume -n 1 -s sub-0 -q 1000 -u foo_url bar_topicUrl\n\n> Probably there may be some\n> configuration parameters that need to be adjusted in some way for different machine specs.\n\nDespite of the configuration, I believe there can be some enhancement in org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.fillReadAheadCache(long, long, long), that it will be much efficient to use rocksdb's iterator to expose the db's range scan ability other than seeking for every location\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261150267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261168198","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261168198","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261168198,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTE2ODE5OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T06:40:32Z","updated_at":"2016-11-17T06:40:32Z","author_association":"CONTRIBUTOR","body":"> Despite of the configuration, I believe there can be some enhancement in org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage.fillReadAheadCache(long, long, long), that it will be much efficient to use rocksdb's iterator to expose the db's range scan ability other than seeking for every location\n\nThe best option there is actually to completely bypass the rocksdb reads and just scan the BK entrylog file, and stopping when an entry for a different ledger is found (or max batch count entries were read). \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261168198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261202374","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261202374","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261202374,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTIwMjM3NA==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T09:51:21Z","updated_at":"2016-11-17T09:51:21Z","author_association":"NONE","body":"I have created a PR https://github.com/yahoo/bookkeeper/pull/1/files for modifying the fillReadAheadCache to use rocksdb's iterator, after patched in my env, the reading QPS goes to 30,000 from 300. \n\nthe compiled jar is attached for quick evaluation, please rename bookkeeper-server-4.3.1.41-yahoo-iterator.zip to bookkeeper-server-4.3.1.41-yahoo-iterator.jar.\n\n[bookkeeper-server-4.3.1.41-yahoo-iterator.zip](https://github.com/yahoo/pulsar/files/596999/bookkeeper-server-4.3.1.41-yahoo-iterator.zip)\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261202374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261335524","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261335524","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261335524,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTMzNTUyNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T18:56:37Z","updated_at":"2016-11-17T18:56:37Z","author_association":"CONTRIBUTOR","body":"@DongbinNie Nice finding. This looks like a perf regression introduced in bookkeeper-server-4.3.1.41-yahoo that was included in v1.15. \nThe read-ahead code itself was not changed significantly, but before there was an in-memory cache of the offset that was skipping the rocksdb get calls. \n\nYour change looks good, though I'd prefer to scan directly the entry log and avoid rocks db interaction in the read-ahead logic, as the iterators themselves can perform slowly under certain conditions.\n\nI'm testing out the change right now and will update here.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261335524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261341723","html_url":"https://github.com/apache/pulsar/issues/118#issuecomment-261341723","issue_url":"https://api.github.com/repos/apache/pulsar/issues/118","id":261341723,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTM0MTcyMw==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T19:19:26Z","updated_at":"2016-11-17T19:19:26Z","author_association":"NONE","body":"We have that exact same error with bookkeeper's autorecovery.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261341723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261366642","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261366642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261366642,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTM2NjY0Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T20:55:13Z","updated_at":"2016-11-18T01:10:56Z","author_association":"CONTRIBUTOR","body":"I just ran the tests with the change that avoid to do RocksDB get() when filling the read-ahead cache and I can clearly see the improvement, though I am seeing a very different number in the baseline on my hardware/config: \n\nConditions:\n- 1 producer / 1 consumer\n- 200 GB of backlog\n- 1 KB message sizes\n- 50 K writes /s\n- No batches (batches make the problem too easy for the bookie, consumer can easily fetch ~300K msg/s without any change)\n\nBacklog draining:\n- Before: 34 K reads/s\n- After: 58 K reads/s\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261366642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405456","html_url":"https://github.com/apache/pulsar/pull/119#issuecomment-261405456","issue_url":"https://api.github.com/repos/apache/pulsar/issues/119","id":261405456,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQwNTQ1Ng==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T23:41:38Z","updated_at":"2016-11-17T23:41:38Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405457","html_url":"https://github.com/apache/pulsar/pull/119#issuecomment-261405457","issue_url":"https://api.github.com/repos/apache/pulsar/issues/119","id":261405457,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQwNTQ1Nw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T23:41:38Z","updated_at":"2016-11-17T23:41:38Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405458","html_url":"https://github.com/apache/pulsar/pull/119#issuecomment-261405458","issue_url":"https://api.github.com/repos/apache/pulsar/issues/119","id":261405458,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQwNTQ1OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-17T23:41:38Z","updated_at":"2016-11-17T23:41:38Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261405458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261413642","html_url":"https://github.com/apache/pulsar/pull/120#issuecomment-261413642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/120","id":261413642,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQxMzY0Mg==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T00:29:31Z","updated_at":"2016-11-18T00:29:31Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261413642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261413643","html_url":"https://github.com/apache/pulsar/pull/120#issuecomment-261413643","issue_url":"https://api.github.com/repos/apache/pulsar/issues/120","id":261413643,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQxMzY0Mw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T00:29:31Z","updated_at":"2016-11-18T00:29:31Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261413643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261417606","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261417606","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261417606,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQxNzYwNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T00:53:56Z","updated_at":"2016-11-18T00:53:56Z","author_association":"CONTRIBUTOR","body":"Merged the fix in master. @sschepens @DongbinNie can you try again to check whether it improves backlog draining in your setup?\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261417606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261505869","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261505869","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261505869,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTUwNTg2OQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T11:02:28Z","updated_at":"2016-11-18T11:02:28Z","author_association":"NONE","body":"> Merged the fix in master. @sschepens @DongbinNie can you try again to check whether it improves backlog draining in your setup?\n\nI test in my env, the consumer QPS can goes to 30,000 with the latest master branch build.\nI'm wondering another case, if there were many writing topic, will it impact the performance due to fillReadAheadCache may only query a little entries every time(I'm not familiar with bookkeeper for now).\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261505869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261572701","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261572701","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261572701,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTU3MjcwMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T16:19:42Z","updated_at":"2016-11-18T16:19:42Z","author_association":"CONTRIBUTOR","body":"Entries are expected to be mostly sequential on the bookie entry logs, and that is why we have introduced the read-ahead cache. \n\nThe reason is that when a write reaches the bookie, first it is appended and synced on the journal (for durability) and then inserted into the write cache. \n\nWrite cache is in memory in the bookie process and it gets flushed periodically (default 1min). When flushing, we sort the entries by ledgerId/entryId, so that messages for the same topic are stored sequentially on disk, for that 1min interval. \n\nYou can try publishing and consuming on many topics by passing the \"-t 100\" flag on the perf tools. \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261572701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261593569","html_url":"https://github.com/apache/pulsar/issues/118#issuecomment-261593569","issue_url":"https://api.github.com/repos/apache/pulsar/issues/118","id":261593569,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTU5MzU2OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-18T17:40:43Z","updated_at":"2016-11-18T17:40:43Z","author_association":"CONTRIBUTOR","body":"@merlimat do you know if this is normal?\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261593569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677608","html_url":"https://github.com/apache/pulsar/pull/121#issuecomment-261677608","issue_url":"https://api.github.com/repos/apache/pulsar/issues/121","id":261677608,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTY3NzYwOA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-19T00:34:30Z","updated_at":"2016-11-19T00:34:30Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677609","html_url":"https://github.com/apache/pulsar/pull/121#issuecomment-261677609","issue_url":"https://api.github.com/repos/apache/pulsar/issues/121","id":261677609,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTY3NzYwOQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-19T00:34:30Z","updated_at":"2016-11-19T00:34:30Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677610","html_url":"https://github.com/apache/pulsar/pull/121#issuecomment-261677610","issue_url":"https://api.github.com/repos/apache/pulsar/issues/121","id":261677610,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTY3NzYxMA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-19T00:34:30Z","updated_at":"2016-11-19T00:34:30Z","author_association":"NONE","body":"CLA is valid!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261677610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261679089","html_url":"https://github.com/apache/pulsar/issues/93#issuecomment-261679089","issue_url":"https://api.github.com/repos/apache/pulsar/issues/93","id":261679089,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTY3OTA4OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-19T00:47:39Z","updated_at":"2016-11-19T00:47:39Z","author_association":"CONTRIBUTOR","body":"As we had seen earlier in #5 : this test-case was keep failing because [travis](https://travis-ci.org/yahoo/pulsar/builds/170640919) was picking up wrong [commit](https://github.com/yahoo/pulsar/commit/1b99fa608daa42955e09356f89ae498d6c969347). Closing this issue for now as we haven't seen this failure after that.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261679089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261752263","html_url":"https://github.com/apache/pulsar/issues/118#issuecomment-261752263","issue_url":"https://api.github.com/repos/apache/pulsar/issues/118","id":261752263,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc1MjI2Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T01:39:20Z","updated_at":"2016-11-20T01:39:20Z","author_association":"CONTRIBUTOR","body":"@sschepens @estebangarcia How did you enabled the auto-recovery? \n\nThere are a couple of ways to run the replication workers: \n1. In the same JVM process as the bookies `autoRecoveryDaemonEnabled=true` in `conf/bookkeeper.conf`\n2. As a separate process running either on every bookie, or just in a few VMs. It can be started with\n   `bin/bookkeeper autorecovery`\n\nIn both cases, the replication workers will watch for bookies that are not available and will \ntrigger the copy of all data that was stored in the bookie (from another available replica).\n\nYou can check the status of under-replicated ledgers with : \n\n```\nbin/bookkeeper shell listunderreplicated \n```\n\nFor errors in broker logs, that is somewhat expected, if the ledgers are still under-replicated the client is trying to read them from the failed bookie. Though, even when data is already replicated, the BK client might not see the metadata change unless there is a read-error, so it can be printing a bit of error logs. \n\nWe still have the pending task to backport a patch from Twitter branch to include read sequence reordering. That would make the client to first try to read from bookies that are marked available in ZK,\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261752263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261752340","html_url":"https://github.com/apache/pulsar/pull/111#issuecomment-261752340","issue_url":"https://api.github.com/repos/apache/pulsar/issues/111","id":261752340,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc1MjM0MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T01:41:13Z","updated_at":"2016-11-20T01:41:13Z","author_association":"CONTRIBUTOR","body":"@saandrews Updated again\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261752340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261761646","html_url":"https://github.com/apache/pulsar/pull/111#issuecomment-261761646","issue_url":"https://api.github.com/repos/apache/pulsar/issues/111","id":261761646,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc2MTY0Ng==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T06:24:11Z","updated_at":"2016-11-20T06:24:11Z","author_association":"CONTRIBUTOR","body":"👍 \n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261761646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261793266","html_url":"https://github.com/apache/pulsar/issues/109#issuecomment-261793266","issue_url":"https://api.github.com/repos/apache/pulsar/issues/109","id":261793266,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc5MzI2Ng==","user":{"login":"Addvilz","id":1390347,"node_id":"MDQ6VXNlcjEzOTAzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1390347?v=4","gravatar_id":"","url":"https://api.github.com/users/Addvilz","html_url":"https://github.com/Addvilz","followers_url":"https://api.github.com/users/Addvilz/followers","following_url":"https://api.github.com/users/Addvilz/following{/other_user}","gists_url":"https://api.github.com/users/Addvilz/gists{/gist_id}","starred_url":"https://api.github.com/users/Addvilz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Addvilz/subscriptions","organizations_url":"https://api.github.com/users/Addvilz/orgs","repos_url":"https://api.github.com/users/Addvilz/repos","events_url":"https://api.github.com/users/Addvilz/events{/privacy}","received_events_url":"https://api.github.com/users/Addvilz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T17:52:02Z","updated_at":"2016-11-20T17:52:02Z","author_association":"NONE","body":"Thanks!\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261793266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261796762","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-261796762","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":261796762,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc5Njc2Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-20T18:49:50Z","updated_at":"2016-11-20T18:49:50Z","author_association":"CONTRIBUTOR","body":"Closing this one. I will open a new PR with documentation for all the DbStorage configuration parameters.\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261796762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261829799","html_url":"https://github.com/apache/pulsar/pull/122#issuecomment-261829799","issue_url":"https://api.github.com/repos/apache/pulsar/issues/122","id":261829799,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTgyOTc5OQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-21T02:45:29Z","updated_at":"2016-11-21T02:45:29Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261829799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261935336","html_url":"https://github.com/apache/pulsar/issues/118#issuecomment-261935336","issue_url":"https://api.github.com/repos/apache/pulsar/issues/118","id":261935336,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTkzNTMzNg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-21T13:16:00Z","updated_at":"2016-11-21T13:16:00Z","author_association":"CONTRIBUTOR","body":"We did run separate autorecovery processes using `bin/bookkeeper autorecovery` but the failed consistently with connection errors to the failed broker.\r\nWe also saw a lot of underreplicated ledgers, but the autorecovery processes never managed to empty it, because they failed connecting to the failed broker, which makes little sense.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/261935336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262062453","html_url":"https://github.com/apache/pulsar/pull/123#issuecomment-262062453","issue_url":"https://api.github.com/repos/apache/pulsar/issues/123","id":262062453,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjA2MjQ1Mw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-21T20:48:19Z","updated_at":"2016-11-21T20:48:19Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262062453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262126784","html_url":"https://github.com/apache/pulsar/pull/124#issuecomment-262126784","issue_url":"https://api.github.com/repos/apache/pulsar/issues/124","id":262126784,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjEyNjc4NA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T02:05:20Z","updated_at":"2016-11-22T02:05:20Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262126784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262126785","html_url":"https://github.com/apache/pulsar/pull/124#issuecomment-262126785","issue_url":"https://api.github.com/repos/apache/pulsar/issues/124","id":262126785,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjEyNjc4NQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T02:05:20Z","updated_at":"2016-11-22T02:05:20Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262126785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148286","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262148286","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262148286,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjE0ODI4Ng==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T05:01:14Z","updated_at":"2016-11-22T05:01:14Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148287","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262148287","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262148287,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjE0ODI4Nw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T05:01:14Z","updated_at":"2016-11-22T05:01:14Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148288","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262148288","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262148288,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjE0ODI4OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T05:01:14Z","updated_at":"2016-11-22T05:01:14Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262148288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262234483","html_url":"https://github.com/apache/pulsar/pull/123#issuecomment-262234483","issue_url":"https://api.github.com/repos/apache/pulsar/issues/123","id":262234483,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjIzNDQ4Mw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T13:00:22Z","updated_at":"2016-11-22T13:00:22Z","author_association":"CONTRIBUTOR","body":"@merlimat do you have any recommendations for rocksdb tuning? I believe if we set `writeCacheMaxSizeMb` very high, a single flush would write a lot of level0 files, which would probably be above `rocksDB_numFilesInLevel0` and it will begin to [stall writes](https://github.com/facebook/rocksdb/wiki/Write-Stalls). Am I correct?\r\n\r\nIs there a good ratio between `writeCacheMaxSizeMb` and `rocksDB_writeBufferSizeMB` you find useful?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262234483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262316454","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262316454","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262316454,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMxNjQ1NA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:00:32Z","updated_at":"2016-11-22T18:00:32Z","author_association":"CONTRIBUTOR","body":"@merlimat still seeing strange performance on nodes when autorecovery is running, some nodes go to 100% cpu utilization and are apparently hung on [reading from rocksdb](https://github.com/yahoo/bookkeeper/blob/yahoo-4.3/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java#L395)\r\nWhat seems strange is that we have configured 4GB of readahead cache, but it doesn't even seem to be using it, processes are consuming about 2GB memory total. RocksDB block cache size is also 4GB.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262316454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262319933","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262319933","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262319933,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMxOTkzMw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:13:23Z","updated_at":"2016-11-22T18:40:25Z","author_association":"CONTRIBUTOR","body":"@merlimat Found something curious, Bookkeepers we're logging `Entry location cache max size: 16 MB`.\r\nYou recommended incrementing `dbStorage_rocksDB_blockCacheSize` to allow locations to fit, but it seems there's another configuration for that (`dbStorage_entryLocationCacheMaxSizeMb`) which is defaulted at 16MB.\r\n~Incrementing this value to 4GB immediately caused bookies cpu usage to drop significantly.~\r\n\r\nEdit: `dbStorage_entryLocationCacheMaxSizeMb` seems to not be used, our bookies continue to give really low throughput.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262319933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262320093","html_url":"https://github.com/apache/pulsar/pull/123#issuecomment-262320093","issue_url":"https://api.github.com/repos/apache/pulsar/issues/123","id":262320093,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMyMDA5Mw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:13:55Z","updated_at":"2016-11-22T18:13:55Z","author_association":"CONTRIBUTOR","body":"@merlimat please read my recent comments on #110 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262320093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262322137","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262322137","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262322137,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMyMjEzNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:21:56Z","updated_at":"2016-11-22T18:41:31Z","author_association":"CONTRIBUTOR","body":"CPU is down now, even tough, read throughput is still extremely low...\r\nThis seemed to happen when we restarted our bookkeepers.\r\n\r\nWe're seeing a spike in throughput when we restart bookies, but then they slowly degrade. Here's a graph of the read throughput of a consumer on a partitioned topic after restarting bookies:\r\n\r\n![screenshot from 2016-11-22 15-33-24](https://cloud.githubusercontent.com/assets/3072509/20536802/4e66e0c6-b0c9-11e6-938f-1ed4b9d9b2e4.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262322137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262327554","html_url":"https://github.com/apache/pulsar/pull/123#issuecomment-262327554","issue_url":"https://api.github.com/repos/apache/pulsar/issues/123","id":262327554,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMyNzU1NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:42:07Z","updated_at":"2016-11-22T18:42:07Z","author_association":"CONTRIBUTOR","body":"@sschepens  In DbLedgerStorage, RocksDB is used to just store the indexes, not the actual entries payloads. All writes to RocksDB are done in a background flush thread, so the stall are not a concern here.\r\n\r\nTo recap: \r\n * `dbStorage_writeCacheMaxSizeMb` : Memory portion where payloads are accumulated before flushing. Ideally this should big enough to accumulate ~1min worth of entries\r\n * `dbStorage_rocksDB_writeBufferSizeMB` : Size of RocksDB memtable. I don't think this need to be increased from the default 64MB\r\n * `dbStorage_rocksDB_blockCacheSize` : This is the RocksDB cache, used when reading. It should be big enough to hold the \"active\" portion of database to avoid disk access to read the indexes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262327554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262328704","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262328704","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262328704,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMyODcwNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:46:29Z","updated_at":"2016-11-22T18:46:29Z","author_association":"CONTRIBUTOR","body":"@sschepens `dbStorage_entryLocationCacheMaxSizeMb` was actually unused in 1.15. I have removed the keys from BK branch. Can you paste all the config settings you are currently using?\r\n\r\nIf you re-do the initial test of backlog draining, without restarting bookies, does it show higher read throughput?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262328704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262328885","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262328885","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262328885,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMyODg4NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:47:10Z","updated_at":"2016-11-22T18:47:10Z","author_association":"CONTRIBUTOR","body":"To give some insights, before restarting our bookies and we started observing this behavior, we were having a read throughput double the amount of the spike in the graph constantly.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262328885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330169","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262330169","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262330169,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMDE2OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:51:50Z","updated_at":"2016-11-22T18:51:50Z","author_association":"CONTRIBUTOR","body":"So, restarting the bookies, in general triggers the auto-recovery for each of the restarted bookie.\r\n\r\nTo avoid that, in a controlled restart you should be disabling auto-recovery (`bin/bookkeeper shell autorecovery -disable`) and then re-enable when the bookie is back up (`bin/bookkeeper shell autorecovery -enable`)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330406","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262330406","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262330406,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMDQwNg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:52:45Z","updated_at":"2016-11-22T18:53:09Z","author_association":"CONTRIBUTOR","body":"This is our current config file.\r\nWe're in the process of re running a test on a new topic.\r\n\r\n```properties\r\n#\r\n# Copyright 2016 Yahoo Inc.\r\n# \r\n# Licensed under the Apache License, Version 2.0 (the \"License\");\r\n# you may not use this file except in compliance with the License.\r\n# You may obtain a copy of the License at\r\n# \r\n#     http://www.apache.org/licenses/LICENSE-2.0\r\n# \r\n# Unless required by applicable law or agreed to in writing, software\r\n# distributed under the License is distributed on an \"AS IS\" BASIS,\r\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n# See the License for the specific language governing permissions and\r\n# limitations under the License.\r\n# \r\n\r\n## Bookie settings\r\n\r\n# Port that bookie server listen on\r\nbookiePort=3181\r\n\r\n# Set the network interface that the bookie should listen on.\r\n# If not set, the bookie will listen on all interfaces.\r\n#listeningInterface=eth0\r\n\r\n# Whether the bookie allowed to use a loopback interface as its primary\r\n# interface(i.e. the interface it uses to establish its identity)?\r\n# By default, loopback interfaces are not allowed as the primary\r\n# interface.\r\n# Using a loopback interface as the primary interface usually indicates\r\n# a configuration error. For example, its fairly common in some VPS setups\r\n# to not configure a hostname, or to have the hostname resolve to\r\n# 127.0.0.1. If this is the case, then all bookies in the cluster will\r\n# establish their identities as 127.0.0.1:3181, and only one will be able\r\n# to join the cluster. For VPSs configured like this, you should explicitly\r\n# set the listening interface.\r\n#allowLoopback=false\r\n\r\n# Directory Bookkeeper outputs its write ahead log\r\njournalDirectory=data/bookkeeper/journal\r\n\r\n# Directory Bookkeeper outputs ledger snapshots\r\n# could define multi directories to store snapshots, separated by ','\r\n# For example:\r\n# ledgerDirectories=/tmp/bk1-data,/tmp/bk2-data\r\n# \r\n# Ideally ledger dirs and journal dir are each in a differet device,\r\n# which reduce the contention between random i/o and sequential write.\r\n# It is possible to run with a single disk, but performance will be significantly lower.\r\nledgerDirectories=data/bookkeeper/ledgers\r\n# Directories to store index files. If not specified, will use ledgerDirectories to store.\r\n# indexDirectories=data/bookkeeper/ledgers\r\n\r\n# Ledger Manager Class\r\n# What kind of ledger manager is used to manage how ledgers are stored, managed\r\n# and garbage collected. Try to read 'BookKeeper Internals' for detail info.\r\nledgerManagerType=hierarchical\r\n\r\n# Root zookeeper path to store ledger metadata\r\n# This parameter is used by zookeeper-based ledger manager as a root znode to\r\n# store all ledgers.\r\n# zkLedgersRootPath=/ledgers\r\n\r\n# Ledger storage implementation class\r\nledgerStorageClass=org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorage\r\n\r\n# Enable/Disable entry logger preallocation\r\n# entryLogFilePreallocationEnabled=true\r\n\r\n# Max file size of entry logger, in bytes\r\n# A new entry log file will be created when the old one reaches the file size limitation\r\n# logSizeLimit=2147483648\r\n\r\n# Threshold of minor compaction\r\n# For those entry log files whose remaining size percentage reaches below\r\n# this threshold will be compacted in a minor compaction.\r\n# If it is set to less than zero, the minor compaction is disabled.\r\n# minorCompactionThreshold=0.2\r\n\r\n# Interval to run minor compaction, in seconds\r\n# If it is set to less than zero, the minor compaction is disabled. \r\n# minorCompactionInterval=3600\r\n\r\n# Threshold of major compaction\r\n# For those entry log files whose remaining size percentage reaches below\r\n# this threshold will be compacted in a major compaction.\r\n# Those entry log files whose remaining size percentage is still\r\n# higher than the threshold will never be compacted.\r\n# If it is set to less than zero, the minor compaction is disabled.\r\nmajorCompactionThreshold=0.5\r\n\r\n# Interval to run major compaction, in seconds\r\n# If it is set to less than zero, the major compaction is disabled. \r\n# majorCompactionInterval=86400 \r\n\r\n# Set the maximum number of entries which can be compacted without flushing.\r\n# When compacting, the entries are written to the entrylog and the new offsets\r\n# are cached in memory. Once the entrylog is flushed the index is updated with\r\n# the new offsets. This parameter controls the number of entries added to the\r\n# entrylog before a flush is forced. A higher value for this parameter means\r\n# more memory will be used for offsets. Each offset consists of 3 longs.\r\n# This parameter should _not_ be modified unless you know what you're doing.\r\n# The default is 100,000.\r\n#compactionMaxOutstandingRequests=100000\r\n\r\n# Set the rate at which compaction will readd entries. The unit is adds per second.\r\n#compactionRate=1000\r\n\r\n# Throttle compaction by bytes or by entries. \r\n#isThrottleByBytes=false\r\n\r\n# Set the rate at which compaction will readd entries. The unit is adds per second.\r\n#compactionRateByEntries=1000\r\n\r\n# Set the rate at which compaction will readd entries. The unit is bytes added per second.\r\n#compactionRateByBytes=1000000\r\n\r\n# Max file size of journal file, in mega bytes\r\n# A new journal file will be created when the old one reaches the file size limitation\r\n#\r\n# journalMaxSizeMB=2048\r\n\r\n# Max number of old journal file to kept\r\n# Keep a number of old journal files would help data recovery in specia case\r\n#\r\n# journalMaxBackups=5\r\n\r\n# How much space should we pre-allocate at a time in the journal\r\n# journalPreAllocSizeMB=16\r\n\r\n# Size of the write buffers used for the journal\r\n# journalWriteBufferSizeKB=64\r\n\r\n# Should we remove pages from page cache after force write\r\njournalRemoveFromPageCache=true\r\n\r\n# Should we group journal force writes, which optimize group commit\r\n# for higher throughput\r\n# journalAdaptiveGroupWrites=true\r\n\r\n# Maximum latency to impose on a journal write to achieve grouping\r\njournalMaxGroupWaitMSec=1\r\n\r\n# All the journal writes and commits should be aligned to given size\r\njournalAlignmentSize=4096\r\n\r\n# Maximum writes to buffer to achieve grouping\r\n# journalBufferedWritesThreshold=524288\r\n\r\n# If we should flush the journal when journal queue is empty\r\n# journalFlushWhenQueueEmpty=false\r\n\r\n# The number of threads that should handle journal callbacks\r\nnumJournalCallbackThreads=8\r\n\r\n# The number of max entries to keep in fragment for re-replication\r\nrereplicationEntryBatchSize=5000\r\n\r\n# How long the interval to trigger next garbage collection, in milliseconds\r\n# Since garbage collection is running in background, too frequent gc\r\n# will heart performance. It is better to give a higher number of gc\r\n# interval if there is enough disk capacity.\r\ngcWaitTime=900000\r\n\r\n# How long the interval to trigger next garbage collection of overreplicated\r\n# ledgers, in milliseconds [Default: 1 day]. This should not be run very frequently since we read\r\n# the metadata for all the ledgers on the bookie from zk\r\n# gcOverreplicatedLedgerWaitTime=86400000\r\n\r\n# How long the interval to flush ledger index pages to disk, in milliseconds\r\n# Flushing index files will introduce much random disk I/O.\r\n# If separating journal dir and ledger dirs each on different devices,\r\n# flushing would not affect performance. But if putting journal dir\r\n# and ledger dirs on same device, performance degrade significantly\r\n# on too frequent flushing. You can consider increment flush interval\r\n# to get better performance, but you need to pay more time on bookie\r\n# server restart after failure.\r\n#\r\nflushInterval=60000\r\n\r\n# Interval to watch whether bookie is dead or not, in milliseconds\r\n#\r\n# bookieDeathWatchInterval=1000\r\n\r\n## zookeeper client settings\r\n\r\n# A list of one of more servers on which zookeeper is running.\r\n# The server list can be comma separated values, for example:\r\n# zkServers=zk1:2181,zk2:2181,zk3:2181\r\nzkServers=localhost:2181\r\n# ZooKeeper client session timeout in milliseconds\r\n# Bookie server will exit if it received SESSION_EXPIRED because it\r\n# was partitioned off from ZooKeeper for more than the session timeout\r\n# JVM garbage collection, disk I/O will cause SESSION_EXPIRED.\r\n# Increment this value could help avoiding this issue\r\nzkTimeout=30000\r\n\r\n## NIO Server settings\r\n\r\n# This settings is used to enabled/disabled Nagle's algorithm, which is a means of\r\n# improving the efficiency of TCP/IP networks by reducing the number of packets\r\n# that need to be sent over the network.\r\n# If you are sending many small messages, such that more than one can fit in\r\n# a single IP packet, setting server.tcpnodelay to false to enable Nagle algorithm\r\n# can provide better performance.\r\n# Default value is true.\r\n#\r\n# serverTcpNoDelay=true\r\n\r\n## ledger cache settings\r\n\r\n# Max number of ledger index files could be opened in bookie server\r\n# If number of ledger index files reaches this limitation, bookie\r\n# server started to swap some ledgers from memory to disk.\r\n# Too frequent swap will affect performance. You can tune this number\r\n# to gain performance according your requirements.\r\nopenFileLimit=0\r\n\r\n# Size of a index page in ledger cache, in bytes\r\n# A larger index page can improve performance writing page to disk,\r\n# which is efficent when you have small number of ledgers and these\r\n# ledgers have similar number of entries.\r\n# If you have large number of ledgers and each ledger has fewer entries,\r\n# smaller index page would improve memory usage.\r\n# pageSize=8192\r\n\r\n# How many index pages provided in ledger cache\r\n# If number of index pages reaches this limitation, bookie server\r\n# starts to swap some ledgers from memory to disk. You can increment\r\n# this value when you found swap became more frequent. But make sure\r\n# pageLimit*pageSize should not more than JVM max memory limitation,\r\n# otherwise you would got OutOfMemoryException.\r\n# In general, incrementing pageLimit, using smaller index page would\r\n# gain bettern performance in lager number of ledgers with fewer entries case\r\n# If pageLimit is -1, bookie server will use 1/3 of JVM memory to compute\r\n# the limitation of number of index pages.\r\npageLimit=0\r\n\r\n#If all ledger directories configured are full, then support only read requests for clients.\r\n#If \"readOnlyModeEnabled=true\" then on all ledger disks full, bookie will be converted\r\n#to read-only mode and serve only read requests. Otherwise the bookie will be shutdown.\r\n#By default this will be disabled.\r\nreadOnlyModeEnabled=true\r\n\r\n#For each ledger dir, maximum disk space which can be used.\r\n#Default is 0.95f. i.e. 95% of disk can be used at most after which nothing will\r\n#be written to that partition. If all ledger dir partions are full, then bookie\r\n#will turn to readonly mode if 'readOnlyModeEnabled=true' is set, else it will\r\n#shutdown.\r\n#Valid values should be in between 0 and 1 (exclusive). \r\n#diskUsageThreshold=0.95\r\n\r\n#Disk check interval in milli seconds, interval to check the ledger dirs usage.\r\n#Default is 10000\r\n#diskCheckInterval=10000\r\n\r\n# Interval at which the auditor will do a check of all ledgers in the cluster.\r\n# By default this runs once a week. The interval is set in seconds.\r\n# To disable the periodic check completely, set this to 0.\r\n# Note that periodic checking will put extra load on the cluster, so it should\r\n# not be run more frequently than once a day.\r\n#auditorPeriodicCheckInterval=604800\r\n\r\n# The interval between auditor bookie checks.\r\n# The auditor bookie check, checks ledger metadata to see which bookies should\r\n# contain entries for each ledger. If a bookie which should contain entries is\r\n# unavailable, then the ledger containing that entry is marked for recovery.\r\n# Setting this to 0 disabled the periodic check. Bookie checks will still\r\n# run when a bookie fails.\r\n# The interval is specified in seconds.\r\n#auditorPeriodicBookieCheckInterval=86400\r\n\r\n# number of threads that should handle write requests. if zero, the writes would\r\n# be handled by netty threads directly.\r\nnumAddWorkerThreads=0\r\n\r\n# number of threads that should handle read requests. if zero, the reads would\r\n# be handled by netty threads directly.\r\nnumReadWorkerThreads=8\r\n\r\n# If read workers threads are enabled, limit the number of pending requests, to\r\n# avoid the executor queue to grow indefinitely\r\nmaxPendingReadRequestsPerThread=2500\r\n\r\n# The number of bytes we should use as capacity for BufferedReadChannel. Default is 512 bytes.\r\nreadBufferSizeBytes=4096\r\n\r\n# The number of bytes used as capacity for the write buffer. Default is 64KB.\r\n# writeBufferSizeBytes=65536\r\n\r\n# Whether the bookie should use its hostname to register with the\r\n# co-ordination service(eg: zookeeper service).\r\n# When false, bookie will use its ipaddress for the registration.\r\n# Defaults to false.\r\n#useHostNameAsBookieID=false\r\n\r\n# Stats Provider Class\r\n#statsProviderClass=org.apache.bookkeeper.stats.CodahaleMetricsProvider\r\ncodahaleStatsSlf4jEndpoint=stats\r\n\r\ndbStorage_rocksDBEnabled=true\r\n\r\n# This is where the data is stored before flushing. This will come from JVM direct memory.\r\ndbStorage_writeCacheMaxSizeMb=256\r\n#\r\n# # Read-ahead cache to speed up backlog draining. From direct memory\r\ndbStorage_readAheadCacheMaxSizeMb=4096\r\ndbStorage_readAheadCacheBatchSize=1000\r\n#\r\n# # Give 4GBytes to RocksDB block cache. Ideally this cache should be big enough\r\n# # to contain most of the locations index data/bookkeeper/ledgers/current/locations/\r\ndbStorage_rocksDB_blockCacheSize=4294967296\r\ndbStorage_entryLocationCacheMaxSizeMb=4096\r\n\r\ndbStorage_rocksDB_writeBufferSizeMB=64\r\ndbStorage_rocksDB_sstSizeInMB=64\r\ndbStorage_rocksDB_blockSize=65536\r\ndbStorage_rocksDB_bloomFilterBitsPerKey=10\r\ndbStorage_rocksDB_numLevels=-1\r\ndbStorage_rocksDB_numFilesInLevel0=4\r\ndbStorage_rocksDB_maxSizeInLevel1MB=256\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330792","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262330792","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262330792,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMDc5Mg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:54:08Z","updated_at":"2016-11-22T18:54:08Z","author_association":"CONTRIBUTOR","body":"> So, restarting the bookies, in general triggers the auto-recovery for each of the restarted bookie.\r\n\r\n> To avoid that, in a controlled restart you should be disabling auto-recovery (bin/bookkeeper shell autorecovery -disable) and then re-enable when the bookie is back up (bin/bookkeeper shell autorecovery -enable)\r\n\r\nWe're not running any autorecovery process, this should not be the case, but we'll try\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262330792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262331373","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262331373","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262331373,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMTM3Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:56:07Z","updated_at":"2016-11-22T18:56:07Z","author_association":"CONTRIBUTOR","body":"```properties\r\ndbStorage_writeCacheMaxSizeMb=256\r\n```\r\n\r\nThis should be bigger, to avoid stalling the writes when the flush is slower. As I commented on the other issue, ideally it should be holding 1min worth of write traffic.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262331373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262332451","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262332451","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262332451,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMjQ1MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T18:59:47Z","updated_at":"2016-11-22T18:59:47Z","author_association":"CONTRIBUTOR","body":"> This should be bigger, to avoid stalling the writes when the flush is slower. As I commented on the other issue, ideally it should be holding 1min worth of write traffic.\r\n\r\nWe're seeing read throughput issues, not write issues.\r\n\r\nWe did experience some issues when setting `dbStorage_writeCacheMaxSizeMb` too high, our ledgers storage seemed to be really stressed out by huge writes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262332451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262332862","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262332862","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262332862,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjMzMjg2Mg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T19:01:14Z","updated_at":"2016-11-22T19:01:14Z","author_association":"CONTRIBUTOR","body":"Another update, writing and consuming from a new topic (without restarting bookies) seems to work just fine. Gonna try restarting bookies now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262332862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262343680","html_url":"https://github.com/apache/pulsar/issues/118#issuecomment-262343680","issue_url":"https://api.github.com/repos/apache/pulsar/issues/118","id":262343680,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjM0MzY4MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T19:40:51Z","updated_at":"2016-11-22T19:40:51Z","author_association":"CONTRIBUTOR","body":"I don't know if that's the case, though the auto-recovery workers to be running when you shutdown the bookie, otherwise they won't notice the unavailable bookie. \r\n\r\nThere is later a full check for under-replicated ledgers that runs once a day. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262343680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262353304","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262353304","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262353304,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjM1MzMwNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T20:16:14Z","updated_at":"2016-11-22T20:16:14Z","author_association":"CONTRIBUTOR","body":"Looks good, can you verify in Eclipse that the exclusion top level pom is applied correctly?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262353304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262354549","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262354549","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262354549,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjM1NDU0OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T20:21:18Z","updated_at":"2016-11-22T20:21:18Z","author_association":"CONTRIBUTOR","body":"yes, I have verified in eclipse and in dependency:tree. However, verifying test-case failure.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262354549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262384665","html_url":"https://github.com/apache/pulsar/pull/125#issuecomment-262384665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/125","id":262384665,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjM4NDY2NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-22T22:26:37Z","updated_at":"2016-11-22T22:26:37Z","author_association":"CONTRIBUTOR","body":"@merlimat : can you please merge this PR as merging option is disable for me.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262384665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262503769","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262503769","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262503769,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjUwMzc2OQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-23T12:45:22Z","updated_at":"2016-11-23T12:45:22Z","author_association":"NONE","body":"@merlimat while I'm evaluating Pulsar, it will be very appreciated that you can list some real data in your production env, e.g. the number of bookie servers, bookie server's hardware,  the number of topic and subscription, throughput, latency of message producing.\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262503769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262546360","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262546360","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262546360,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjU0NjM2MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-23T15:29:11Z","updated_at":"2016-11-23T15:29:11Z","author_association":"CONTRIBUTOR","body":"@DongbinNie \r\n\r\nWe have shared some numbers on our blog post: https://yahooeng.tumblr.com/post/150078336821/open-sourcing-pulsar-pub-sub-messaging-at-scale\r\n\r\nAlso, take a look at the slides from a recent talk I gave:\r\nhttp://www.slideshare.net/merlimat/pulsar-distributed-pubsub-platform\r\n\r\nFor bookie hardware, there is a brief explanation at https://github.com/yahoo/pulsar/blob/master/docs/ClusterSetup.md#bookkeeper\r\n\r\nLet me know if you want more details","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262546360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262668470","html_url":"https://github.com/apache/pulsar/pull/126#issuecomment-262668470","issue_url":"https://api.github.com/repos/apache/pulsar/issues/126","id":262668470,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjY2ODQ3MA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-24T01:22:19Z","updated_at":"2016-11-24T01:22:19Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262668470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262668471","html_url":"https://github.com/apache/pulsar/pull/126#issuecomment-262668471","issue_url":"https://api.github.com/repos/apache/pulsar/issues/126","id":262668471,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjY2ODQ3MQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-24T01:22:19Z","updated_at":"2016-11-24T01:22:19Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262668471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262936069","html_url":"https://github.com/apache/pulsar/issues/110#issuecomment-262936069","issue_url":"https://api.github.com/repos/apache/pulsar/issues/110","id":262936069,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjkzNjA2OQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-25T11:20:10Z","updated_at":"2016-11-25T11:20:10Z","author_association":"NONE","body":"Thanks @merlimat \r\n\r\nOur business is heavily relied on MQ(rabbitmq for current), and the produce latency is very critical for us while the throughput is growing rapidly. \r\n\r\nThe underlying bookkeepr need to fsync the journal for every message(including batching) to complete the message adding, it means the bookkeeper must be deployed into SSD severs which will increase the costing of sever, so I'm very curious about the real data in your production practice.  :-)\r\n\r\nThe slides page 4 mentions \"Average latency <5ms, 99% 15ms\", and the page 24 mentions a single topic's measurement that focus on tp99 < 5ms, If convenience, could you list some detail data about the two cases that the cluster size, especially the bookkeeper size and hardware, the topics and throughput...\r\n\r\nThanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/262936069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263454158","html_url":"https://github.com/apache/pulsar/pull/126#issuecomment-263454158","issue_url":"https://api.github.com/repos/apache/pulsar/issues/126","id":263454158,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ1NDE1OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T01:59:13Z","updated_at":"2016-11-29T01:59:13Z","author_association":"CONTRIBUTOR","body":"removed ```local``` prefix from ```zookeeperserver``` config.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263454158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263688348","html_url":"https://github.com/apache/pulsar/pull/127#issuecomment-263688348","issue_url":"https://api.github.com/repos/apache/pulsar/issues/127","id":263688348,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4ODM0OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:25:56Z","updated_at":"2016-11-29T20:25:56Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263688348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759390","html_url":"https://github.com/apache/pulsar/pull/128#issuecomment-263759390","issue_url":"https://api.github.com/repos/apache/pulsar/issues/128","id":263759390,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc1OTM5MA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T01:54:00Z","updated_at":"2016-11-30T01:54:00Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759391","html_url":"https://github.com/apache/pulsar/pull/128#issuecomment-263759391","issue_url":"https://api.github.com/repos/apache/pulsar/issues/128","id":263759391,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc1OTM5MQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T01:54:01Z","updated_at":"2016-11-30T01:54:01Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759392","html_url":"https://github.com/apache/pulsar/pull/128#issuecomment-263759392","issue_url":"https://api.github.com/repos/apache/pulsar/issues/128","id":263759392,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc1OTM5Mg==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T01:54:01Z","updated_at":"2016-11-30T01:54:01Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/263759392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264014490","html_url":"https://github.com/apache/pulsar/pull/129#issuecomment-264014490","issue_url":"https://api.github.com/repos/apache/pulsar/issues/129","id":264014490,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAxNDQ5MA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T22:18:45Z","updated_at":"2016-11-30T22:18:45Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264014490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264014491","html_url":"https://github.com/apache/pulsar/pull/129#issuecomment-264014491","issue_url":"https://api.github.com/repos/apache/pulsar/issues/129","id":264014491,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDAxNDQ5MQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T22:18:45Z","updated_at":"2016-11-30T22:18:45Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264014491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264128858","html_url":"https://github.com/apache/pulsar/pull/130#issuecomment-264128858","issue_url":"https://api.github.com/repos/apache/pulsar/issues/130","id":264128858,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDEyODg1OA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-01T09:53:56Z","updated_at":"2016-12-01T09:53:56Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264128858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264281124","html_url":"https://github.com/apache/pulsar/issues/86#issuecomment-264281124","issue_url":"https://api.github.com/repos/apache/pulsar/issues/86","id":264281124,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDI4MTEyNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-01T20:12:11Z","updated_at":"2016-12-01T20:12:11Z","author_association":"CONTRIBUTOR","body":"Merged fix from #130 in 6ea847c","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264281124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264302634","html_url":"https://github.com/apache/pulsar/pull/126#issuecomment-264302634","issue_url":"https://api.github.com/repos/apache/pulsar/issues/126","id":264302634,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDMwMjYzNA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-01T21:35:52Z","updated_at":"2016-12-01T21:35:52Z","author_association":"CONTRIBUTOR","body":"@merlimat : have addressed all the changes. can you please let me know if we need any other changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264302634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264346770","html_url":"https://github.com/apache/pulsar/pull/131#issuecomment-264346770","issue_url":"https://api.github.com/repos/apache/pulsar/issues/131","id":264346770,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDM0Njc3MA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T01:20:21Z","updated_at":"2016-12-02T01:20:21Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264346770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264396404","html_url":"https://github.com/apache/pulsar/issues/134#issuecomment-264396404","issue_url":"https://api.github.com/repos/apache/pulsar/issues/134","id":264396404,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDM5NjQwNA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T08:05:06Z","updated_at":"2016-12-02T08:05:06Z","author_association":"CONTRIBUTOR","body":"- can you describe your usecase where this feature can be helpful?\r\n- and in that usecase: what could be the variables based on which user assign priority level of each consumer? Is it based on machine's capacity or configuration?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264396404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264422606","html_url":"https://github.com/apache/pulsar/pull/138#issuecomment-264422606","issue_url":"https://api.github.com/repos/apache/pulsar/issues/138","id":264422606,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDQyMjYwNg==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T10:26:59Z","updated_at":"2016-12-02T10:26:59Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264422606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264422610","html_url":"https://github.com/apache/pulsar/pull/138#issuecomment-264422610","issue_url":"https://api.github.com/repos/apache/pulsar/issues/138","id":264422610,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDQyMjYxMA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T10:27:00Z","updated_at":"2016-12-02T10:27:00Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264422610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264438105","html_url":"https://github.com/apache/pulsar/issues/134#issuecomment-264438105","issue_url":"https://api.github.com/repos/apache/pulsar/issues/134","id":264438105,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDQzODEwNQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T11:52:50Z","updated_at":"2016-12-02T12:03:59Z","author_association":"NONE","body":"the consumer may be assigned different priority based on the machine's capacity or location(e.g. rack or idc).\r\nwe would like the consumers in the master application cluster to consume the whole message as most as possible, if the master application cluster crash totally, the consumers in the other cluster can continue to consume the messages, but with different costing.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264438105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264456054","html_url":"https://github.com/apache/pulsar/pull/139#issuecomment-264456054","issue_url":"https://api.github.com/repos/apache/pulsar/issues/139","id":264456054,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDQ1NjA1NA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T13:41:07Z","updated_at":"2016-12-02T13:41:07Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264456054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264598802","html_url":"https://github.com/apache/pulsar/issues/134#issuecomment-264598802","issue_url":"https://api.github.com/repos/apache/pulsar/issues/134","id":264598802,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU5ODgwMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T00:30:53Z","updated_at":"2016-12-03T00:41:34Z","author_association":"CONTRIBUTOR","body":"That was what I had in mind as well. \r\n\r\nMy other question would be: would anyone need in practice more that 2 priorities (`High` and `Low`)? ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264598802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264599043","html_url":"https://github.com/apache/pulsar/issues/135#issuecomment-264599043","issue_url":"https://api.github.com/repos/apache/pulsar/issues/135","id":264599043,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU5OTA0Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T00:32:58Z","updated_at":"2016-12-03T00:32:58Z","author_association":"CONTRIBUTOR","body":"> maybe We can also reset the cursor based on message id.\r\n\r\nactually the replay feature only works with a \"timestamp\". The main reason is that rolling back to a specific messageId would be impossible to do on a partitioned topic.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264599043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264599959","html_url":"https://github.com/apache/pulsar/issues/133#issuecomment-264599959","issue_url":"https://api.github.com/repos/apache/pulsar/issues/133","id":264599959,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU5OTk1OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T00:40:51Z","updated_at":"2016-12-03T00:40:51Z","author_association":"CONTRIBUTOR","body":"Other than just delaying the message delivery, I think we could also provide a more general use distributed event scheduler, that can be implemented with multiple cascading queues.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264599959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264608435","html_url":"https://github.com/apache/pulsar/pull/140#issuecomment-264608435","issue_url":"https://api.github.com/repos/apache/pulsar/issues/140","id":264608435,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwODQzNQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T02:11:02Z","updated_at":"2016-12-03T02:11:02Z","author_association":"NONE","body":"CLA is valid!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264608435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641061","html_url":"https://github.com/apache/pulsar/issues/133#issuecomment-264641061","issue_url":"https://api.github.com/repos/apache/pulsar/issues/133","id":264641061,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY0MTA2MQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T14:03:36Z","updated_at":"2016-12-03T14:03:36Z","author_association":"NONE","body":"@merlimat could you please give a detailed description of the solution \"multiple cascading queues\", thanks.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641061/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641350","html_url":"https://github.com/apache/pulsar/issues/134#issuecomment-264641350","issue_url":"https://api.github.com/repos/apache/pulsar/issues/134","id":264641350,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY0MTM1MA==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T14:06:07Z","updated_at":"2016-12-03T14:06:16Z","author_association":"NONE","body":"> would anyone need in practice more that 2 priorities (High and Low)?\r\n\r\nCurrently we only require 2 priorities in the applications, but I think it's better to have the ability to have multiple priorities.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641665","html_url":"https://github.com/apache/pulsar/issues/135#issuecomment-264641665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/135","id":264641665,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY0MTY2NQ==","user":{"login":"DongbinNie","id":8368713,"node_id":"MDQ6VXNlcjgzNjg3MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8368713?v=4","gravatar_id":"","url":"https://api.github.com/users/DongbinNie","html_url":"https://github.com/DongbinNie","followers_url":"https://api.github.com/users/DongbinNie/followers","following_url":"https://api.github.com/users/DongbinNie/following{/other_user}","gists_url":"https://api.github.com/users/DongbinNie/gists{/gist_id}","starred_url":"https://api.github.com/users/DongbinNie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DongbinNie/subscriptions","organizations_url":"https://api.github.com/users/DongbinNie/orgs","repos_url":"https://api.github.com/users/DongbinNie/repos","events_url":"https://api.github.com/users/DongbinNie/events{/privacy}","received_events_url":"https://api.github.com/users/DongbinNie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T14:12:06Z","updated_at":"2016-12-03T14:12:06Z","author_association":"NONE","body":"> The main reason is that rolling back to a specific messageId would be impossible to do on a partitioned topic.\r\n\r\nThe application may provide messageIds for each partition, but timestamp already meets most of the replay cases in application, :-)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/264641665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]